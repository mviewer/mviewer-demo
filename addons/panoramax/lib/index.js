/*!
 * 
 *   @panoramax/web-viewer v4.1.0
 *   https://gitlab.com/panoramax/clients/web-viewer
 *
 *   Copyright (c) Panoramax team
 *
 *   This source code is licensed under the MIT license found in the
 *   LICENSE file in the root directory of this source tree.
 *
 */
!function(at,st){"object"===typeof exports&&"object"===typeof module?module.exports=st():"function"===typeof define&&define.amd?define("Panoramax",[],st):"object"===typeof exports?exports.Panoramax=st():at.Panoramax=st()}(this,(()=>(()=>{var at={9039:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>Basic});var ut=ot(4542),Hl=ot(5254),rc=ot(4964),sc=ot(7208),oc=ot(5995),_c=ot(7343),wc=ot(2614),Sc=ot.n(wc),iu=ot(8330);ot(1865),ot(3638);class Basic extends ut.WF{constructor(){let at=arguments.length>0&&void 0!==arguments[0]&&arguments[0];super(),this.users=["geovisio"],this["map-style"]=this.getAttribute("map-style")||(0,sc.MapTiles)(),this.lang=this.getAttribute("lang")||null,this.endpoint=this.getAttribute("endpoint")||null,this.picture=this.getAttribute("picture")||null,this.sequence=this.getAttribute("sequence")||null,console.info(`\ud83d\udcf7 Panoramax ${this.getClassName()} - Version ${iu.rE} (92967a3)\n\n\ud83c\udd98 Issues can be reported at ${iu.Jk.O}`),at||(this._isInternetFast=null,(0,_c.isInternetFast)().then((at=>this._isInternetFast=at)))}connectedCallback(){super.connectedCallback(),this._t=(0,rc.getTranslations)(this.lang),this.loader=(0,oc.createWebComp)("pnx-loader",{_parent:this,"no-label":(0,_c.isInIframe)()}),this._loadsAPI&&this.endpoint&&this._loadsAPI===this.endpoint||this.api&&this.api._endpoint===this.endpoint||!this.endpoint||((this._loadsAPI||this.api)&&(delete this.api,delete this._loadsAPI),this._setupAPI()),Object.entries({map:"map-options",psv:"psv-options",fetchOptions:"fetch-options",mapstyle:"map-style"}).forEach((at=>{let[st,ot]=at;this.getAttribute(st)&&console.error(`Component attribute "${st}" has been renamed into "${ot}". Old attribute "${st}" is ignored.`)}))}_setupAPI(){if(this.loader=this.loader||(0,oc.createWebComp)("pnx-loader",{_parent:this}),!this.endpoint)return void console.warn("No endpoint is defined");this._loadsAPI=this.endpoint;let at=this.endpoint;try{this["map-style"]=JSON.parse(this["map-style"])}catch(ot){}try{this.api=new Hl.A(this.endpoint,{users:this.users,fetch:this["fetch-options"],style:this["map-style"]}),this.api.onceReady().then((()=>{if(at!=this._loadsAPI||!this.api)return;let st=this.api.getUnavailableFeatures(),ot=this.api.getAvailableFeatures();ot=0===st.length?"\u2705 All features available":"\u2705 Available features: "+ot.join(", "),st=0===st.length?"":"\ud83d\udeab Unavailable features: "+st.join(", "),console.info(`\ud83c\udf10 Connected to API "${this.api._metadata.name}" (${this.api._endpoint})\n\u2139\ufe0f API runs STAC ${this.api._metadata.stac_version} ${this.api._metadata.geovisio_version?"& GeoVisio "+this.api._metadata.geovisio_version:""}\n   ${ot}\n   ${st}\n`.trim())})).catch((at=>this.loader.dismiss(at,this._t.pnx.error_api))).finally((()=>delete this._loadsAPI))}catch(ot){var st;delete this._loadsAPI,null!==(st=this.loader)&&void 0!==st&&st.dismiss?this.loader.dismiss(ot,this._t.pnx.error_api):console.error(ot)}}onceReady(){throw new Error("You must override this method on sub-class")}onceAPIReady(){return this.api?this.api.onceReady():new Promise((at=>setTimeout(at,100))).then(this.onceAPIReady.bind(this))}createRenderRoot(){return this}attributeChangedCallback(at,st,ot){if(super.attributeChangedCallback(at,st,ot),"endpoint"===at&&(this._loadsAPI&&ot&&this._loadsAPI===ot||this.api&&this.api._endpoint===ot||!ot||((this._loadsAPI||this.api)&&(delete this.api,delete this._loadsAPI),this._setupAPI())),["picture","sequence"].includes(at)){let ut,Hl,rc,sc;"picture"===at?(ut=this.sequence,rc=this.sequence,Hl=ot,sc=st):(ut=ot,rc=st,Hl=this.picture,sc=this.picture),this.dispatchEvent(new CustomEvent("select",{bubbles:!0,composed:!0,detail:{seqId:ut,picId:Hl,prevSeqId:rc,prevPicId:sc}}))}}getClassName(){return"Basic"}select(){let at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,st=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&(this.picture=null,this.sequence=null),this.picture=st,this.sequence=at}isWidthSmall(){return(null===this||void 0===this?void 0:this.offsetWidth)<576}isHeightSmall(){return(null===this||void 0===this?void 0:this.offsetHeight)<400}render(){return ut.qy`<p>Should not be used directly, use Viewer/CoverageMap/Editor instead</p>`}getSubComponentsNames(){return["loader","api"]}addEventListener(at,st,ot){let ut=at.split(":").shift();if(ut&&this.getSubComponentsNames().includes(ut)){var Hl;const rc=at.substring(ut.length+1);null!==(Hl=this[ut])&&void 0!==Hl&&Hl.addEventListener?this[ut].addEventListener(rc,st,ot):setTimeout((()=>this.addEventListener(at,st,ot)),50)}else super.addEventListener(at,st,ot)}static GetJSONConverter(){return{fromAttribute:at=>null===at||""===at?null:"object"===typeof at||Array.isArray(at)?at:Sc().parse(at),toAttribute:at=>null===at||""===at?"":"string"===typeof at?at:Sc().stringify(at)}}}Basic.properties={picture:{type:String,reflect:!0},sequence:{type:String,reflect:!0},"fetch-options":{converter:Basic.GetJSONConverter()},users:{type:Array,reflect:!0},"map-style":{type:String},lang:{type:String},endpoint:{type:String}}},153:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>CoverageMap});var ut=ot(9039),Hl=ot(5642),rc=ot(8340),sc=ot(927),oc=(ot(7776),ot(2118));class CoverageMap extends ut.A{constructor(){super(),this._mapContainer=document.createElement("div"),this.onceAPIReady().then((()=>{this.loader.setAttribute("value",30),this._initParams=new oc.Ay(oc.Ay.GetComponentProperties(CoverageMap,this)),this._initMap()}))}disconnectedCallback(){var at;super.disconnectedCallback(),null===(at=this.map)||void 0===at||at.destroy()}getClassName(){return"CoverageMap"}onceReady(){return this.map&&this.map.waitForEnoughMapLoaded?this.map.waitForEnoughMapLoaded():new Promise((at=>setTimeout(at,100))).then(this.onceReady.bind(this))}render(){return[this.loader,this._mapContainer]}getSubComponentsNames(){const at=super.getSubComponentsNames();return at.push("map"),at}_initMap(){class MyMap extends Hl.A{_getLayerStyleProperties(at){return"pictures_symbols"===at?{layout:{visibility:"none"}}:super._getLayerStyleProperties(at)}}this.map=new MyMap(this,this._mapContainer,Object.assign({},this._initParams.getMapInit(),{hash:!0})),this.map.addControl(new sc.NavigationControl({showCompass:!1})),this.loader.setAttribute("value",70),this.addEventListener("select",this._onSelect.bind(this)),this.map.on("picture-click",(at=>this.select(at.seqId,at.picId))),this.map.on("sequence-click",(at=>this.select(at.seqId))),this.map.waitForEnoughMapLoaded().then((async()=>{await(0,oc.mK)(this.map,this._initParams.getMapPostInit()),this.map.reloadLayersStyles(),this.loader.dismiss()}))}_onSelect(at){if(at.detail.picId||at.detail.seqId){const st=at.detail.picId?"pictures":"sequences",ot=this.map.queryRenderedFeatures({layers:[...this.map._userLayers].map((at=>(0,rc.getUserLayerId)(at,st))),filter:["==",["get","id"],at.detail.picId||at.detail.seqId]});ot.length>=0&&null!=ot[0]&&this.map._attachPreviewToPictures({features:ot},st)}}}CoverageMap.properties={"map-options":{converter:ut.A.GetJSONConverter()},...ut.A.properties},customElements.define("pnx-coverage-map",CoverageMap)},1752:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>Editor});ot(7365);var ut=ot(9039),Hl=ot(5642),rc=ot(9048),sc=ot(508),oc=ot(8340),_c=ot(1545),wc=ot(5995);const Sc="sequence-headings";class Editor extends ut.A{constructor(){super(),this.raster=null,this.background="streets",this.users=[],this._psvContainer=document.createElement("div"),this._psvContainer.setAttribute("slot","bg"),this._mapContainer=document.createElement("div"),this._mapContainer.setAttribute("slot","bg"),this.grid=(0,wc.createWebComp)("pnx-cornered-grid"),this.grid.appendChild(this._psvContainer),this.grid.appendChild(this._mapContainer),this.onceAPIReady().then((()=>{this.loader.setAttribute("value",30),this.sequence||this.loader.dismiss({},"No sequence is selected"),this.addEventListener("select",this._onSelect.bind(this)),this._initPSV(),this._initMap()}))}disconnectedCallback(){var at,st;super.disconnectedCallback(),null===(at=this.map)||void 0===at||at.destroy(),null===(st=this.psv)||void 0===st||st.destroy()}getClassName(){return"Editor"}onceReady(){var at,st;return this.map&&this.psv&&null!==(at=(st=this.map).loaded)&&void 0!==at&&at.call(st)?Promise.resolve():new Promise((at=>setTimeout(at,100))).then(this.onceReady.bind(this))}connectedCallback(){Array.isArray(this.users)&&this.users.length>0&&(console.warn("Parameters users can't be changed in Editor, only selected sequence can be visible"),this.users=[]),super.connectedCallback(),this._moveChildToGrid(),window.addEventListener("DOMContentLoaded",(()=>{this._moveChildToGrid()}),{once:!0})}attributeChangedCallback(at,st,ot){"users"===at&&Array.isArray(ot)&&ot.length>0?console.warn("Parameters users can't be changed in Editor, only selected sequence can be visible"):super.attributeChangedCallback(at,st,ot)}render(){return[this.loader,this.grid]}getSubComponentsNames(){return super.getSubComponentsNames().concat(["map","psv","grid"])}_initPSV(){try{this.psv=new rc.Ay(this,this._psvContainer),this.psv._myVTour.datasource.nodeResolver=this._getNode.bind(this)}catch(at){let st=_c.IJ.isWebGLSupported?this._t.pnx.error_psv:this._t.pnx.error_webgl;this.loader.dismiss(at,st)}}_initMap(){try{this.map=new Hl.A(this,this._mapContainer,{raster:this.raster,background:this.background,supplementaryStyle:this._createMapStyle(),zoom:15,picMarkerDraggable:!0}),(0,oc.linkMapAndPhoto)(this),this.loader.setAttribute("value",50),this._loadSequence(),this.map.once("load",(()=>{this.map.hasTwoBackgrounds()&&this._addMapBackgroundWidget(),this._bindPicturesEvents()}));const at=this.map._picMarker.setRotation.bind(this.map._picMarker);this.map._picMarker.setRotation=st=>(st=void 0===this._lastRelHeading?st:st+this._lastRelHeading-this.psv.getPictureRelativeHeading(),at(st))}catch(at){this.loader.dismiss(at,this._t.pnx.error_psv)}}_createMapStyle(){return{sources:{geovisio_editor_sequences:{type:"geojson",data:{type:"FeatureCollection",features:[]}}},layers:[{id:"geovisio_editor_sequences",type:"line",source:"geovisio_editor_sequences",layout:{...oc.VECTOR_STYLES.SEQUENCES.layout},paint:{...oc.VECTOR_STYLES.SEQUENCES.paint}},{id:"geovisio_editor_pictures",type:"circle",source:"geovisio_editor_sequences",layout:{...oc.VECTOR_STYLES.PICTURES.layout},paint:{...oc.VECTOR_STYLES.PICTURES.paint}}]}}_bindPicturesEvents(){this.map.on("mousemove","geovisio_editor_pictures",(()=>{this.map.getCanvas().style.cursor="pointer"})),this.map.on("mouseleave","geovisio_editor_pictures",(()=>{this.map.getCanvas().style.cursor=""})),this.map.on("click","geovisio_editor_pictures",this.map._onPictureClick.bind(this.map))}_loadSequence(){return this.loader.setAttribute("value",60),this.api.getSequenceItems(this.sequence).then((at=>{if(this.loader.setAttribute("value",80),this.map.once("sourcedata",(()=>{this.map.setPaintProperty("geovisio_editor_sequences","line-color",this.map._getLayerColorStyle("sequences")),this.map.setPaintProperty("geovisio_editor_pictures","circle-color",this.map._getLayerColorStyle("pictures")),this.map.setLayoutProperty("geovisio_editor_sequences","visibility","visible"),this.map.setLayoutProperty("geovisio_editor_pictures","visibility","visible"),this.map.once("styledata",(()=>this.loader.dismiss()))})),this._sequenceData=at.features,this.map.getSource("geovisio_editor_sequences").setData({type:"FeatureCollection",features:[{id:this.sequence,type:"Feature",properties:{id:this.sequence},geometry:{type:"LineString",coordinates:at.features.map((at=>at.geometry.coordinates))}},...at.features.map((at=>(at.properties.id=at.id,at.properties.sequences=[this.sequence],at)))]}),this.picture){const st=at.features.find((at=>at.id===this.picture));st?(this.select(this.sequence,this.picture,!0),this.map.jumpTo({center:st.geometry.coordinates,zoom:18})):console.log("Picture with ID",st,"was not found")}else{const st=[...at.features[0].geometry.coordinates,...at.features[0].geometry.coordinates];for(let ot=1;ot<at.features.length;ot++){const ut=at.features[ot].geometry.coordinates;ut[0]<st[0]&&(st[0]=ut[0]),ut[1]<st[1]&&(st[1]=ut[1]),ut[0]>st[2]&&(st[2]=ut[0]),ut[1]>st[3]&&(st[3]=ut[1])}this.map.fitBounds(st,{animate:!1})}})).catch((at=>this.loader.dismiss(at,this._t.pnx.error_api)))}_getNode(at){const st=this._sequenceData.find((st=>st.properties.id===at)),ot=st?(0,sc.apiFeatureToPSVNode)(st,this._t,this._isInternetFast,void 0,(at=>this.api.cleanResourceURL(at))):null;return ot&&delete ot.links,ot}_addMapBackgroundWidget(){const at=(0,wc.createWebComp)("pnx-map-background",{_parent:this,size:"sm",slot:"bottom-left"});this.grid.appendChild(at)}_moveChildToGrid(){Array.from(this.querySelectorAll("[slot]")).forEach((at=>{var st;null!==(st=at.tagName)&&void 0!==st&&st.toLowerCase().startsWith("pnx-")&&(at._parent=this,at._t=this._t),this.grid.appendChild(at)}))}previewSequenceHeadingChange(at){const st=void 0!==this.map.getLayer(Sc);if(this.map._picMarkerPreview.remove(),void 0===at)return delete this._lastRelHeading,st&&this.map.setLayoutProperty(Sc,"visibility","none"),void(this.picture&&this.map._picMarker.setRotation(this.psv.getXY().x));this._lastRelHeading=at,st||this.map.addLayer({id:Sc,type:"symbol",source:"geovisio_editor_sequences",layout:{"icon-image":"pnx-marker","icon-overlap":"always","icon-size":.8}});const ot=-this.psv.getPictureRelativeHeading();this.map.setLayoutProperty(Sc,"visibility","visible"),this.map.setLayoutProperty(Sc,"icon-rotate",["+",["get","view:azimuth"],ot,at]);const ut=[["==",["geometry-type"],"Point"]];this.picture&&ut.push(["!=",["get","id"],this.picture]),this.map.setFilter(Sc,["all",...ut]),this.picture&&this.map._picMarker.setRotation(this.psv.getXY().x)}_onSelect(){void 0!==this._lastRelHeading&&this.previewSequenceHeadingChange(this._lastRelHeading)}}Editor.properties={raster:{converter:ut.A.GetJSONConverter()},background:{type:String},...ut.A.properties},customElements.define("pnx-editor",Editor)},3407:(at,st,ot)=>{"use strict";ot.d(st,{$p:()=>iu,Ay:()=>PhotoViewer,RD:()=>lu});ot(970);var ut=ot(1545),Hl=ot(4451),rc=ot(9039),sc=ot(9048),oc=ot(5995),_c=ot(7343),wc=ot(2118),Sc=ot(4207);const iu=20,su=Math.PI/6,lu=["pnx-mini","pnx-widget-player","pnx-widget-zoom"];class PhotoViewer extends rc.A{constructor(){super(),this["psv-options"]={},this["url-parameters"]=this.getAttribute("url-parameters")||!0,this["keyboard-shortcuts"]=this.getAttribute("keyboard-shortcuts")||!0,this.widgets=this.getAttribute("widgets")||"true",this.grid=(0,oc.createWebComp)("pnx-cornered-grid"),this.psvContainer=document.createElement("div"),this.psvContainer.setAttribute("slot","bg"),this.grid.appendChild(this.psvContainer),this.popup=(0,oc.createWebComp)("pnx-popup",{_parent:this,onclose:this._onPopupClose.bind(this)}),this.tabindex=0}_createInitParamsHandler(){var at,st;this._initParams=new wc.Ay(wc.Ay.GetComponentProperties(PhotoViewer,this),Object.assign({},null===(at=this.urlHandler)||void 0===at?void 0:at.currentURLParams(),null===(st=this.urlHandler)||void 0===st?void 0:st.currentURLParams(!0)),{disableAnnotations:localStorage.getItem(_c.DISABLE_ANNOTATIONS_PARAM)})}_initWidgets(){"false"!==this._initParams.getParentPostInit().widgets&&((0,_c.isInIframe)()||(this.grid.appendChild((0,oc.createWebComp)("pnx-widget-player",{slot:"top",_parent:this,class:"pnx-only-psv pnx-print-hidden",size:this.isHeightSmall()?"md":"xl"})),this.grid.appendChild((0,oc.createWebComp)("pnx-annotations-switch",{slot:"top",_parent:this,class:"pnx-only-psv pnx-print-hidden",size:this.isHeightSmall()?"md":"xl"}))),(0,_c.isInIframe)()?(this.legend=(0,oc.createWebComp)("pnx-widget-legend",{slot:"bottom-right",light:!0,_parent:this,focus:this._initParams.getParentPostInit().focus,picture:this._initParams.getParentPostInit().picture}),this.grid.appendChild(this.legend)):this.isWidthSmall()?(this.legend=(0,oc.createWebComp)("pnx-picture-legend",{_parent:this}),this.bottomDrawer=(0,oc.createWebComp)("pnx-bottom-drawer",{slot:"bottom",_parent:this,class:this._initParams.getParentPostInit().picture?void 0:"pnx-hidden"}),this.bottomDrawer.appendChild(this.legend),this.grid.appendChild(this.bottomDrawer),this.addEventListener("select",(at=>{(0,_c.isNullId)(at.detail.picId)?this.bottomDrawer.classList.add("pnx-hidden"):this.bottomDrawer.classList.remove("pnx-hidden")}))):(this.legend=(0,oc.createWebComp)("pnx-widget-legend",{slot:this.isWidthSmall()?void 0:"top-left",_parent:this,focus:this._initParams.getParentPostInit().focus,picture:this._initParams.getParentPostInit().picture}),this.grid.appendChild((0,oc.createWebComp)("pnx-widget-zoom",{slot:"bottom-right",class:"pnx-print-hidden",_parent:this})),this.grid.appendChild(this.legend)))}connectedCallback(){super.connectedCallback(),this.presetsManager=new Sc.A(this.lang),this["url-parameters"]&&"false"!==this["url-parameters"]&&(this.urlHandler=new Hl.A(this),this.onceReady().then((()=>{this.urlHandler.listenToChanges(),this.urlHandler._onParentChange()}))),this.onceAPIReady().then(this._postAPIInit.bind(this)),this._moveChildToGrid(),window.addEventListener("DOMContentLoaded",(()=>{this._moveChildToGrid()}),{once:!0})}disconnectedCallback(){var at,st;super.disconnectedCallback(),null===(at=this.urlHandler)||void 0===at||at.destroy(),null===(st=this.psv)||void 0===st||st.destroy(),document.body.removeEventListener("click",this._toggleKeyboardBasedOnFocus),window.removeEventListener("keypress",this._toggleKeyboardBasedOnFocus)}getClassName(){return"PhotoViewer"}onceReady(){return this.oncePSVReady().then((()=>this._initParams.getParentPostInit().picture&&!this.psv.getPictureMetadata()?this.onceFirstPicLoaded():Promise.resolve()))}render(){return[this.loader,this.grid,this.popup]}getSubComponentsNames(){return super.getSubComponentsNames().concat(["psv","grid","popup","urlHandler"])}oncePSVReady(){let at;return new Promise((st=>{at=setInterval((()=>{this.psv&&"object"===typeof this.psv&&(this.psv.container?(clearInterval(at),st()):this.psv.addEventListener&&this.psv.addEventListener("ready",(()=>{clearInterval(at),st()}),{once:!0}))}),250)}))}onceFirstPicLoaded(){return this.oncePSVReady().then((()=>this.psv.getPictureMetadata()?Promise.resolve():new Promise((at=>{this.psv.addEventListener("picture-loaded",at,{once:!0})}))))}async _postAPIInit(){this.loader.setAttribute("value",30),this._createInitParamsHandler();const at=this._initParams.getParentPostInit();this._initPSV(),this._initWidgets(),(0,wc.ai)(this,at),at.keyboardShortcuts&&this._handleKeyboardManagement(),at.picture?this.psv.getPictureMetadata()?this.loader.dismiss():this.psv.addEventListener("picture-loaded",(()=>this.loader.dismiss()),{once:!0}):this.loader.dismiss()}_initPSV(){try{this.psv=new sc.Ay(this,this.psvContainer,{shouldGoFast:this._psvShouldGoFast.bind(this),keyboard:"always",keyboardActions:{...ut.zY.keyboardActions,8:"ROTATE_UP",2:"ROTATE_DOWN",4:"ROTATE_LEFT",6:"ROTATE_RIGHT",PageUp:()=>this.psv.goToNextPicture(),9:()=>this.psv.goToNextPicture(),PageDown:()=>this.psv.goToPrevPicture(),3:()=>this.psv.goToPrevPicture(),5:()=>this.moveCenter(),"*":()=>this.moveCenter(),Home:()=>{var at;return null===(at=this._toggleFocus)||void 0===at?void 0:at.call(this)},7:()=>{var at;return null===(at=this._toggleFocus)||void 0===at?void 0:at.call(this)},End:()=>this.mini.toggleAttribute("collapsed"),1:()=>this.mini.toggleAttribute("collapsed")," ":()=>this.psv.toggleSequencePlaying(),0:()=>this.psv.toggleSequencePlaying()},...this._initParams.getPSVInit()}),this.psv.addEventListener("panorama-error",(at=>console.log("load",at))),this.oncePSVReady().then((()=>{this.loader.setAttribute("value",50),(0,wc.Vy)(this.psv,this._initParams.getPSVPostInit())})),this.psv.addEventListener("sequence-playing",(()=>this.classList.add("pnx-playing"))),this.psv.addEventListener("sequence-stopped",(()=>this.classList.remove("pnx-playing")))}catch(at){let st=ut.IJ.isWebGLSupported?this._t.pnx.error_psv:this._t.pnx.error_webgl;this.loader.dismiss(at,st)}}_enableKeyboard(){this.psv.startKeyboardControl()}_disableKeyboard(){this.psv.stopKeyboardControl()}_toggleKeyboardBasedOnFocus(at){const st=(null===at||void 0===at?void 0:at.target)||document.activeElement;if(this.contains(st)){for(let at of this.grid.childNodes)if("bg"!==at.getAttribute("slot")&&!lu.includes(at.tagName.toLowerCase())&&at.contains(st))return void this._disableKeyboard();this._enableKeyboard()}else this._disableKeyboard()}_handleKeyboardManagement(){window.addEventListener("click",(at=>this._toggleKeyboardBasedOnFocus(at))),window.addEventListener("keypress",this._toggleKeyboardBasedOnFocus.bind(this)),this.popup.addEventListener("open",this._disableKeyboard.bind(this)),this.popup.addEventListener("close",this._enableKeyboard.bind(this)),this.psv.addEventListener("click",this._enableKeyboard.bind(this));for(let at of this.grid.childNodes)"bg"===at.getAttribute("slot")||lu.includes(at.tagName.toLowerCase())||(at.addEventListener("focusin",this._disableKeyboard.bind(this)),at.addEventListener("focusout",(()=>{null===this.popup.getAttribute("visible")&&this._enableKeyboard()})))}_psvShouldGoFast(){return this.psv._sequencePlaying&&this.psv.getTransitionDuration()<1e3}_moveChildToGrid(){Array.from(this.querySelectorAll("[slot]")).forEach((at=>{var st;null!==(st=at.tagName)&&void 0!==st&&st.toLowerCase().startsWith("pnx-")&&(at._parent=this,at._t=this._t),"editors"===at.getAttribute("slot")?this.onceReady().then((()=>{var st;return null===(st=this.legend)||void 0===st?void 0:st.appendChild(at)})):this.grid.appendChild(at)}))}setPopup(at){let st=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;at?this.popup.setAttribute("visible",""):this.popup.removeAttribute("visible"),this.popup.innerHTML="","string"===typeof st?this.popup.innerHTML=st:Array.isArray(st)&&st.forEach((at=>this.popup.appendChild(at)))}_onPopupClose(){this.dispatchEvent(new CustomEvent("focus-changed",{detail:{focus:this.map&&this.isMapWide()?"map":"pic"}}))}_showQualityScoreDoc(){this.setPopup(!0,[(0,oc.createWebComp)("pnx-quality-score-doc",{_t:this._t})])}_showReportForm(){if(!this.psv.getPictureMetadata())throw new Error("No picture currently selected");this.setPopup(!0,[(0,oc.createWebComp)("pnx-report-form",{_parent:this})])}_showShareOptions(){this.setPopup(!0,[(0,oc.createWebComp)("pnx-share-menu",{_parent:this})])}moveCenter(){this.psv.getPictureMetadata()&&this._psvAnimate({speed:sc.LM,yaw:0,pitch:0,zoom:sc.cS})}moveLeft(){this._moveToDirection("left")}moveRight(){this._moveToDirection("right")}moveUp(){this._moveToDirection("up")}moveDown(){this._moveToDirection("down")}_moveToDirection(at){let st=this.psv.getPosition();switch(at){case"up":st.pitch+=su;break;case"left":st.yaw-=su;break;case"down":st.pitch-=su;break;case"right":st.yaw+=su}this._psvAnimate({speed:sc.LM,...st})}_psvAnimate(at){this._lastPsvAnim&&this._lastPsvAnim.cancel(),this._lastPsvAnim=this.psv.animate(at)}addEventListener(at,st,ot){super.addEventListener(at,st,ot)}}PhotoViewer.properties={"psv-options":{converter:rc.A.GetJSONConverter()},widgets:{type:String},"url-parameters":{type:String},"keyboard-shortcuts":{type:String},tabindex:{type:Number},...rc.A.properties},customElements.define("pnx-photo-viewer",PhotoViewer)},8743:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>Viewer});ot(9616);var ut=ot(8340),Hl=ot(3407),rc=ot(2771),sc=ot(7343),oc=ot(5995),_c=ot(9683),wc=ot(2e3),Sc=ot(9438),iu=ot(2118);const su=100;class Viewer extends Hl.Ay{constructor(){super(),this["map-options"]=!0,this.geocoder=this.getAttribute("geocoder")||"nominatim",this.mini=(0,oc.createWebComp)("pnx-mini",{slot:"bottom-left",_parent:this,onexpand:this._onMiniExpand.bind(this),collapsed:!!(0,sc.isNullId)(this.picture)||void 0}),this.mini.addEventListener("expand",this._toggleFocus.bind(this)),this.grid.appendChild(this.mini),this.mapContainer=document.createElement("div"),this.tabindex=0}_createInitParamsHandler(){var at,st;this._initParams=new iu.Ay(iu.Ay.GetComponentProperties(Viewer,this),Object.assign({},null===(at=this.urlHandler)||void 0===at?void 0:at.currentURLParams(),null===(st=this.urlHandler)||void 0===st?void 0:st.currentURLParams(!0)),{map:(0,ut.getMapParamsFromLocalStorage)(),disableAnnotations:localStorage.getItem(sc.DISABLE_ANNOTATIONS_PARAM)})}_initWidgets(){var at,st;"false"!==this._initParams.getParentPostInit().widgets&&(this.grid.appendChild((0,oc.createWebComp)("pnx-widget-zoom",{slot:this.isWidthSmall()?"top-left":"bottom-right",class:this.isWidthSmall()?"pnx-only-map pnx-print-hidden":"pnx-print-hidden",_parent:this})),(0,sc.isInIframe)()?(this.legend=(0,oc.createWebComp)("pnx-widget-legend",{slot:"bottom-right",light:!0,_parent:this,focus:this._initParams.getParentPostInit().focus,picture:this._initParams.getParentPostInit().picture}),this.grid.appendChild(this.legend)):this.isWidthSmall()?(this.legend=(0,oc.createWebComp)("pnx-picture-legend",{_parent:this}),this.bottomDrawer=(0,oc.createWebComp)("pnx-bottom-drawer",{slot:"bottom",_parent:this,class:this._initParams.getParentPostInit().picture?void 0:"pnx-hidden"}),this.bottomDrawer.appendChild(this.legend),this.grid.appendChild(this.bottomDrawer),this.addEventListener("select",(at=>{(0,sc.isNullId)(at.detail.picId)?this.bottomDrawer.classList.add("pnx-hidden"):this.bottomDrawer.classList.remove("pnx-hidden")}))):(this.legend=(0,oc.createWebComp)("pnx-widget-legend",{slot:this.isWidthSmall()?"top":"top-left",_parent:this,focus:this._initParams.getParentPostInit().focus,picture:this._initParams.getParentPostInit().picture}),this._miniPicLegend=(0,oc.createWebComp)("pnx-mini-picture-legend",{_parent:this}),this.grid.appendChild(this.legend)),(0,sc.isInIframe)()||(this.grid.appendChild((0,oc.createWebComp)("pnx-widget-player",{slot:"top",_parent:this,class:"pnx-only-psv pnx-print-hidden",size:this.isHeightSmall()?"md":"xl"})),this.grid.appendChild((0,oc.createWebComp)("pnx-annotations-switch",{slot:"top",_parent:this,class:"pnx-only-psv pnx-print-hidden",size:this.isHeightSmall()?"md":"xl"})),this.grid.appendChild((0,oc.createWebComp)("pnx-widget-geosearch",{slot:this.isWidthSmall()?"top-right":"top-left",_parent:this,class:"pnx-only-map pnx-print-hidden",geocoder:this._initParams.getParentPostInit().geocoder})),this.grid.appendChild((0,oc.createWebComp)("pnx-widget-mapfilters",{slot:this.isWidthSmall()?"top-right":"top-left",_parent:this,"user-search":null!==this.api._endpoints.user_search&&null!==this.api._endpoints.user_tiles,"quality-score":(null===(at=this.map)||void 0===at||null===(st=at._hasQualityScore)||void 0===st?void 0:st.call(at))||!1,class:"pnx-only-map pnx-print-hidden"})),this.grid.appendChild((0,oc.createWebComp)("pnx-widget-maplayers",{slot:"top-right",_parent:this,class:"pnx-only-map pnx-print-hidden"}))))}disconnectedCallback(){var at;super.disconnectedCallback(),null===(at=this.map)||void 0===at||at.destroy()}getClassName(){return"Viewer"}getSubComponentsNames(){return super.getSubComponentsNames().concat(["mini","map"])}onceReady(){return Promise.all([this.oncePSVReady(),this.onceMapReady()]).then((()=>this._initParams.getParentPostInit().picture&&!this.psv.getPictureMetadata()?this.onceFirstPicLoaded():Promise.resolve()))}attributeChangedCallback(at,st,ot){var ut,Hl,rc,oc;(super.attributeChangedCallback(at,st,ot),"picture"===at)&&(null===(ut=this.legend)||void 0===ut||null===(Hl=ut.setAttribute)||void 0===Hl||Hl.call(ut,"picture",ot),(0,sc.isNullId)(st)&&!(0,sc.isNullId)(ot)&&this.mini.removeAttribute("collapsed"),(0,sc.isNullId)(ot)?this.map&&this.isMapWide()?this.mini.classList.add("pnx-hidden"):this.map&&!this.isMapWide()&&this._setFocus("map"):(this.mini.classList.remove("pnx-hidden"),(0,sc.isNullId)(st)&&(this._setFocus("pic"),"closed"===(null===(rc=this.bottomDrawer)||void 0===rc||null===(oc=rc.getAttribute)||void 0===oc?void 0:oc.call(rc,"openness"))&&this.bottomDrawer.setAttribute("openness","half-opened"))));"focus"===at&&this._setFocus(ot)}onceMapReady(){if(!this.map)return Promise.resolve();let at;return new Promise((st=>{at=setInterval((()=>{var ot,ut,Hl;"object"===typeof this.map&&(null!==(ot=this.map)&&void 0!==ot&&null!==(ut=ot.loaded)&&void 0!==ut&&ut.call(ot)?(clearInterval(at),st()):null!==(Hl=this.map)&&void 0!==Hl&&Hl.once&&this.map.once("render",(()=>{clearInterval(at),st()})))}),250)}))}async _initMap(){await new Promise((at=>{this.map=new rc.A(this,this.mapContainer,this._initParams.getMapInit()),(0,ut.saveMapParamsToLocalStorage)(this.map),this.map.once("users-changed",(()=>{this.loader.setAttribute("value",75),at()}))})),await(0,iu.mK)(this.map,this._initParams.getMapPostInit()),(0,ut.initMapKeyboardHandler)(this),(0,ut.linkMapAndPhoto)(this)}async _postAPIInit(){this.loader.setAttribute("value",30),this._createInitParamsHandler();const at=this._initParams.getParentPostInit();this._initPSV(),await this._initMap(),this._initWidgets(),this._moveChildToGrid(),(0,iu.iz)(this,at),at.keyboardShortcuts&&this._handleKeyboardManagement(),at.picture?this.psv.addEventListener("picture-loaded",(()=>{(0,iu.iz)(this,at),this.loader.dismiss()}),{once:!0}):this.loader.dismiss()}_enableKeyboard(){this.map&&this.isMapWide()?this._enableKeyboardMap():this._enableKeyboardPSV()}_enableKeyboardMap(){this.psv.stopKeyboardControl(),this.map.keyboard.enable()}_enableKeyboardPSV(){this.psv.startKeyboardControl(),this.map.keyboard.disable()}_disableKeyboard(){this.psv.stopKeyboardControl(),this.map.keyboard.disable()}_toggleKeyboardBasedOnFocus(at){const st=(null===at||void 0===at?void 0:at.target)||document.activeElement;if(this.contains(st)){for(let at of this.grid.childNodes)if("bg"!==at.getAttribute("slot")&&!Hl.RD.includes(at.tagName.toLowerCase())&&at.contains(st))return void this._disableKeyboard();this._enableKeyboard()}else this._disableKeyboard()}_handleKeyboardManagement(){window.addEventListener("click",(at=>this._toggleKeyboardBasedOnFocus(at))),window.addEventListener("keypress",this._toggleKeyboardBasedOnFocus.bind(this)),this.addEventListener("focus-changed",(at=>{this.popup.getAttribute("visible")?this._disableKeyboard():"map"===at.detail.focus?this._enableKeyboardMap():this._enableKeyboardPSV()})),this.popup.addEventListener("open",this._disableKeyboard.bind(this)),this.popup.addEventListener("close",this._enableKeyboard.bind(this)),this.psv.addEventListener("click",this._enableKeyboardPSV.bind(this));for(let at of this.grid.childNodes)"bg"===at.getAttribute("slot")||Hl.RD.includes(at.tagName.toLowerCase())||(at.addEventListener("focusin",this._disableKeyboard.bind(this)),at.addEventListener("focusout",(()=>{null===this.popup.getAttribute("visible")&&this._enableKeyboard()})))}moveCenter(){const at=this.psv.getPictureMetadata();at&&(this.map&&this.isMapWide()?this.map.flyTo({center:at.gps,zoom:20}):super.moveCenter())}_moveToDirection(at){if(this.map&&this.isMapWide()){let st;switch(at){case"up":st=[0,-100];break;case"left":st=[-100,0];break;case"down":st=[0,su];break;case"right":st=[su,0]}this.map.panBy(st)}else super._moveToDirection(at)}isMapWide(){return this.mapContainer.parentNode==this.grid}_setFocus(at){var st,ot,ut,Hl;let rc=arguments.length>1&&void 0!==arguments[1]&&arguments[1],Sc=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("map"===at&&!this.map)throw new Error("Map is not enabled");if(!["map","pic"].includes(at))throw new Error("Invalid focus value (should be pic or map)");if(this.focus=at,(Sc||("map"!==at||!this.map||!this.isMapWide())&&("pic"!==at||this.map&&this.isMapWide()))&&("map"===at?(this.psvContainer.parentNode==this.grid&&(this.grid.removeChild(this.psvContainer),this.psvContainer.removeAttribute("slot")),this.mapContainer.parentNode==this.mini&&this.mini.removeChild(this.mapContainer),this.mapContainer.setAttribute("slot","bg"),this.grid.appendChild(this.mapContainer),this.mini.appendChild(this.psvContainer),this.mini.icon=(0,oc.fa)(_c.pt),this._miniPicLegend&&this.mini.appendChild(this._miniPicLegend),(0,sc.isNullId)(this.picture)?this.mini.classList.add("pnx-hidden"):this.mini.classList.remove("pnx-hidden"),this.map.getCanvas().focus()):(this.mapContainer.parentNode==this.grid&&(this.grid.removeChild(this.mapContainer),this.mapContainer.removeAttribute("slot")),this.psvContainer.parentNode==this.mini&&(this.mini.removeChild(this.psvContainer),this._miniPicLegend&&this.mini.removeChild(this._miniPicLegend)),this.psvContainer.setAttribute("slot","bg"),this.grid.appendChild(this.psvContainer),this.mini.classList.remove("pnx-hidden"),this.mini.appendChild(this.mapContainer),this.mini.icon=(0,oc.fa)(wc.e5),this.psvContainer.focus()),null===this||void 0===this||null===(st=this.map)||void 0===st||null===(ot=st.resize)||void 0===ot||ot.call(st),this.psv.autoSize(),this.psv.forceRefresh(),null===(ut=this.legend)||void 0===ut||null===(Hl=ut.setAttribute)||void 0===Hl||Hl.call(ut,"focus",this.focus),!rc)){const st=new CustomEvent("focus-changed",{detail:{focus:at}});this.dispatchEvent(st)}}_toggleFocus(){this._setFocus(this.isMapWide()?"pic":"map")}_onMiniExpand(){this.map.resize(),this.psv.autoSize()}_onMapFiltersChange(){var at;const st=(0,Sc.qi)("#pnx-map-filters-menu"),ot=(0,Sc.qi)("#pnx-map-theme"),Hl=(0,ut.mapFiltersFormValues)(st,ot,null===(at=this.map)||void 0===at?void 0:at._hasQualityScore());this.map.setFilters(Hl)}}Viewer.properties={"map-options":{converter:Hl.Ay.GetJSONConverter()},focus:{type:String,reflect:!0},geocoder:{type:String},tabindex:{type:Number},...Hl.Ay.properties},customElements.define("pnx-viewer",Viewer)},3921:(at,st,ot)=>{"use strict";ot.r(st),ot.d(st,{Basic:()=>ut.A,CoverageMap:()=>Hl.A,Editor:()=>rc.A,PhotoViewer:()=>oc.Ay,Viewer:()=>sc.A});var ut=ot(9039),Hl=ot(153),rc=ot(1752),sc=ot(8743),oc=ot(3407)},9341:(at,st,ot)=>{"use strict";ot.r(st),ot.d(st,{core:()=>ut,layout:()=>Hl,menus:()=>rc,ui:()=>sc});var ut=ot(3921),Hl=ot(456),rc=ot(8794),sc=ot(9472)},6784:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>BottomDrawer});var ut=ot(4542),Hl=ot(1198),rc=ot(5995);const sc={opened:0,"half-opened":.7,closed:1};class BottomDrawer extends ut.WF{constructor(){super(),this._isDragging=!1,this.openness="half-opened"}firstUpdated(){super.firstUpdated(),this._boundTouchMove=this._onTouchMove.bind(this),this._boundTouchEnd=this._onTouchEnd.bind(this),this._drawerHeight=window.innerHeight-30;const at=this._getDrawer();at&&(at.style.height=`${this._drawerHeight}px`,at.style.maxHeight=`${this._drawerHeight}px`,(0,rc.onceParentAvailable)(this).then((()=>this._parent.onceReady())).then((()=>{var at,st;null===(at=this._parent.map)||void 0===at||at.addEventListener("click",(()=>this.openness="closed")),null===(st=this._parent.psv)||void 0===st||st.addEventListener("click",(()=>this.openness="closed"))})))}attributeChangedCallback(at,st,ot){if(super.attributeChangedCallback(at,st,ot),"openness"===at){if("opened"!==ot){const at=this.shadowRoot.querySelector(".content");at&&(at.scrollTop=0)}const at=this._getDrawer();at&&(at.style.transform=null)}}disconnectedCallback(){super.disconnectedCallback(),this._cleanupTouchListeners()}_getDrawer(){var at;return null===(at=this.shadowRoot)||void 0===at?void 0:at.querySelector(".drawer")}_onHandleClick(){"opened"===this.openness?this.openness="closed":"half-opened"===this.openness?this.openness="opened":"closed"===this.openness&&(this.openness="half-opened")}_onTouchStart(at){this._isDragging=!0,this._startFingerY=at.touches[0].clientY,this._deltaFingerY=0,this._drawerY=this._drawerHeight*sc[this.openness],window.addEventListener("touchmove",this._boundTouchMove,{passive:!0}),window.addEventListener("touchend",this._boundTouchEnd),window.addEventListener("touchcancel",this._boundTouchEnd)}_onTouchMove(at){if(!this._isDragging)return;const st=this.shadowRoot.querySelector(".content");st.scrollHeight>st.offsetHeight&&st.scrollTop>0?this._updateDrawerTransform(0):(this._deltaFingerY=at.touches[0].clientY-this._startFingerY,this._updateDrawerTransform(this._drawerY+this._deltaFingerY))}_onTouchEnd(at){(this._isDragging&&!(Math.abs(this._deltaFingerY)<30)||at.target.closest(".handle"))&&(at.preventDefault(),this._isDragging=!1,0===this._deltaFingerY&&"closed"===this.openness?this.openness="half-opened":this._updateDrawerTransform(this._drawerY+this._deltaFingerY,!0),this._cleanupTouchListeners(),this._startFingerY=null,this._deltaFingerY=null)}_cleanupTouchListeners(){window.removeEventListener("touchmove",this._boundTouchMove),window.removeEventListener("touchend",this._boundTouchEnd),window.removeEventListener("touchcancel",this._boundTouchCancel)}_updateDrawerTransform(at){let st=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const ot=this._getDrawer();ot&&(at=Math.max(0,Math.min(at,this._drawerHeight-30)),st&&(this._deltaFingerY<0?"closed"===this.openness?Math.abs(this._deltaFingerY)>this._drawerHeight*(1-sc["half-opened"])?this.openness="opened":this.openness="half-opened":this.openness="opened":this.openness="closed",this._drawerY=null,at=Math.max(0,Math.min(sc[this.openness]*this._drawerHeight,this._drawerHeight-30))),ot.style.transform=`translateY(${at}px)`)}render(){const at={drawer:!0,[this.openness]:!0,dragging:this._isDragging};return ut.qy`
			<div
				class=${(0,Hl.H)(at)}
				@touchstart="${this._onTouchStart}"
				@touchmove="${this._onTouchMove}"
				@touchend="${this._onTouchEnd}"
			>
				<div class="handle" @click=${this._onHandleClick}>
					<div class="handle-bar"></div>
				</div>
				<div class="content">
					<slot></slot>
				</div>
			</div>
		`}}BottomDrawer.styles=ut.AH`
		:host {
			position: fixed;
			bottom: 0;
			left: 0;
			width: 100%;
			z-index: 130;
			pointer-events: none;
			touch-action: none;
		}

		.drawer {
			background: var(--widget-bg);
			border-top-left-radius: 16px;
			border-top-right-radius: 16px;
			box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.2);
			display: flex;
			flex-direction: column;
			transition: transform 0.3s ease;
			will-change: transform;
			touch-action: auto;
			pointer-events: auto;
		}

		.drawer.dragging { transition: none; }
		.drawer.closed { transform: translateY(calc(100% - 30px)); }
		.drawer.half-opened { transform: translateY(70%); }
		.drawer.half-opened .content { overflow-y: hidden; }
		.drawer.opened { transform: translateY(0%); }

		.handle {
			height: 30px;
			display: flex;
			align-items: center;
			justify-content: center;
			cursor: pointer;
		}

		.handle-bar {
			width: 40px;
			height: 5px;
			background: var(--grey-pale);
			border-radius: 3px;
		}

		.content {
			overflow: auto;
			flex: 1;
		}
	`,BottomDrawer.properties={_fingerY:{state:!0},_deltaFingerY:{state:!0},_drawerY:{state:!0},_isDragging:{state:!0},_drawerHeight:{state:!0},openness:{type:String,reflect:!0}},customElements.define("pnx-bottom-drawer",BottomDrawer)},7422:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>CorneredGrid});var ut=ot(4542);class CorneredGrid extends ut.WF{render(){return ut.qy`
			<div class="bg">
				<slot name="bg"></slot>
			</div>
			<div class="row top">
				<div class="corner left" part="corner-top-left">
					<slot name="top-left"></slot>
				</div>
				<div class="corner middle" part="corner-top">
					<slot name="top"></slot>
				</div>
				<div class="corner right" part="corner-top-right">
					<slot name="top-right"></slot>
				</div>
			</div>
			<div class="row bottom">
				<div class="corner left" part="corner-bottom-left">
					<slot name="bottom-left"></slot>
				</div>
				<div class="corner middle" part="corner-bottom">
					<slot name="bottom"></slot>
				</div>
				<div class="corner right" part="corner-bottom-right">
					<slot name="bottom-right"></slot>
				</div>
			</div>
		`}}CorneredGrid.styles=ut.AH`
		:host {
			position: relative;
			width: 100%;
			height: 100%;
			display: flex;
			flex-direction: column;
			gap: 5px;
			flex-wrap: no-wrap;
		}

		.bg {
			position: absolute;
			inset: 0;
			z-index: 0;
		}

		.row {
			display: flex;
			flex-direction: row;
			flex: 1 1 50%;
			pointer-events: none;
		}

		.row.bottom { align-items: flex-end; }

		.corner {
			position: relative;
			flex: 1 1 33%;
			display: flex;
			gap: 10px;
			height: min-content;
		}

		.corner slot {
			pointer-events: auto;
			position: relative;
			z-index: 120;
		}

		.row.bottom .corner:not(.middle) { flex-direction: column; }
		.row.bottom .corner.left { flex-direction: column-reverse; justify-content: flex-start; align-items: flex-start; }
		.row.bottom .corner.middle { justify-content: center; align-items: flex-end; }
		.row.bottom .corner.right { justify-content: flex-end; align-items: flex-end; }

		.row.top .corner { flex-direction: row; }
		.row.top .corner.left { justify-content: flex-start; align-items: flex-start; }
		.row.top .corner.middle { justify-content: center; }
		.row.top .corner.right { justify-content: flex-end; align-items: flex-start; }
	`,customElements.define("pnx-cornered-grid",CorneredGrid)},1445:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>Mini});var ut=ot(4542),Hl=ot(1462),rc=ot(5721);class Mini extends ut.WF{constructor(){super(),this.collapsed=!1,this.icon=null}render(){var at,st;const ot=(null===(at=this._parent)||void 0===at?void 0:at.isWidthSmall())||(null===(st=this._parent)||void 0===st?void 0:st.isHeightSmall()),onExpand=()=>this.dispatchEvent(new Event("expand",{bubbles:!0,composed:!0}));if(this.collapsed||ot){const at=ot?onExpand:()=>this.collapsed=!1;return ut.qy`<pnx-button
				kind="flat"
				size="xxl"
				style="bottom: 0"
				@click=${at}
			>${this.icon}</pnx-button>`}var sc,oc,_c;return ut.qy`
				<slot></slot>

				<pnx-button
					kind="superflat"
					title=${null===(sc=this._parent)||void 0===sc?void 0:sc._t.pnx.expand_info}
					style="top: 0; right: 0"
					@click=${onExpand}
				>
					<img src=${Hl} alt="" />
					${null===(oc=this._parent)||void 0===oc?void 0:oc._t.pnx.expand}
				</pnx-button>

				<pnx-button
					kind="flat"
					title=${null===(_c=this._parent)||void 0===_c?void 0:_c._t.pnx.minimize}
					style="bottom: 0; left: 0"
					@click=${()=>this.collapsed=!0}
				>
					<img src=${rc} alt="" />
				</pnx-button>
			`}}Mini.styles=ut.AH`
		:host {
			display: block;
			position: absolute;
			inset: 0;
			pointer-events: none;
		}

		slot {
			z-index: 120;
			pointer-events: auto;
		}

		pnx-button {
			z-index: 121;
			position: absolute;
			pointer-events: auto;
		}

		pnx-button img {
			height: 20px;
		}

		pnx-button:not([size="xxl"])::part(btn) {
			border-top-left-radius: 0;
			border-bottom-right-radius: 0;
		}
	`,Mini.properties={icon:{type:String},collapsed:{type:Boolean,reflect:!0}},customElements.define("pnx-mini",Mini)},5534:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>Tabs});var ut=ot(4542);class Tabs extends ut.WF{constructor(){super(),this.activeTabIndex=0}_getTabs(){return this.shadowRoot.querySelector("slot[name='title']").assignedNodes()}_getContents(){return this.shadowRoot.querySelector("slot[name='content']").assignedNodes()}_changeTab(at,st){const ot=this._getTabs(),ut=this._getContents();void 0===at&&void 0===st||(at&&(st=ot.findIndex((st=>st===at||st===at.parentNode))),!isNaN(st)&&st>=0&&st<ot.length&&ot.forEach(((at,ot)=>{ot==st?(this.activeTabIndex=ot,ut[ot].classList.add("active"),at.classList.add("active")):(ut[ot].classList.remove("active"),at.classList.remove("active"))})))}_handleTabClick(at){this._changeTab(at.target)}updated(at){at.has("activeTabIndex")&&this._changeTab(void 0,this.activeTabIndex)}render(){return ut.qy`
			<nav @click="${this._handleTabClick}">
				<slot name="title" @slotchange=${()=>this.activeTabIndex=0}></slot>
			</nav>
			<div class="contents">
				<slot name="content"></slot>
			</div>
		`}}Tabs.styles=ut.AH`
		/* Tabs */
		nav {
			display: flex;
			gap: 5px;
			align-items: stretch;
			overflow-x: auto;
			touch-action: pan-x;
			position: sticky;
			top: 0;
			background: white;
			z-index: 125;
		}
		nav ::slotted(*) {
			color: var(--grey-dark);
			border-bottom: 2px solid rgba(0,0,0,0);
			cursor: pointer;
			transition: all 0.1s;
			flex: 1;
		}
		nav ::slotted(*:hover:not(.active)) { background-color: var(--blue-pale); }
		nav ::slotted(*.active) {
			color: var(--blue-dark);
			border-bottom: 2px solid var(--blue-dark);
		}

		/* Content */
		.contents ::slotted(div) { display: none !important; }
		.contents ::slotted(.active) { display: block !important; }
	`,Tabs.properties={activeTabIndex:{type:Number,reflect:!0}},customElements.define("pnx-tabs",Tabs)},456:(at,st,ot)=>{"use strict";ot.r(st),ot.d(st,{BottomDrawer:()=>ut.A,CorneredGrid:()=>Hl.A,Mini:()=>rc.A,Tabs:()=>sc.A});var ut=ot(6784),Hl=ot(7422),rc=ot(1445),sc=ot(5534)},1208:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>AnnotationsList});var ut=ot(4542),Hl=ot(8591),rc=ot(5995),sc=ot(1187),oc=ot(7321),_c=ot(4692),wc=ot(8466);ot(8983);class AnnotationsList extends ut.WF{constructor(){super(),this._selectedAnnotation=null,this._presets={},this.editable=!1,(0,rc.moreIcons)()}connectedCallback(){super.connectedCallback();const gotoannot=at=>{var st,ot;const ut=null===(st=this._meta.properties)||void 0===st||null===(ot=st.annotations)||void 0===ot?void 0:ot.findIndex((st=>st.id===at));ut>=0&&this._onListItemClick(Object.assign({nb:ut+1},this._meta.properties.annotations[ut]))};this._onPicChange(),(0,rc.onceParentAvailable)(this).then((()=>{var at,st,ot;null===(at=this._parent.psv)||void 0===at||at.addEventListener("picture-loaded",this._onPicChange.bind(this)),null===(st=this._parent.psv)||void 0===st||st.addEventListener("annotation-focused",(at=>gotoannot(at.detail.annotationId))),null===(ot=this._parent.psv)||void 0===ot||ot.addEventListener("annotations-unfocused",(()=>{this._onListItemClick(null)}));const ut=this._parent.psv.getSelectedAnnotations();ut.length>0&&gotoannot(ut[0])}))}_onPicChange(){var at,st,ot,ut,Hl;(this._meta=null===(at=this._parent)||void 0===at||null===(st=at.psv)||void 0===st?void 0:st.getPictureMetadata(),delete this._prevPsvView,this._selectedAnnotation=null,this._meta&&null!==(ot=this._parent)&&void 0!==ot&&ot.presetsManager)&&(this._presets={},(null===(ut=this._meta.properties)||void 0===ut||null===(Hl=ut.annotations)||void 0===Hl?void 0:Hl.length)>0&&this._meta.properties.annotations.map((at=>this._parent.presetsManager.getPreset(at).then((st=>{this._presets[at.id]=st,this.requestUpdate()})))))}_onListItemHover(at){at?(this._prevPsvView||(this._prevPsvView=[this._parent.psv.getZoomLevel(),this._parent.psv.getPosition()]),this._parent.psv.focusOnAnnotation(at.id,void 0,!0)):(this._parent.psv.unfocusAnnotation(),this._prevPsvView&&(this._parent.psv.zoom(this._prevPsvView[0]),this._parent.psv.rotate(this._prevPsvView[1]),delete this._prevPsvView))}_onListItemClick(at){this._selectedAnnotation=at,this._onListItemHover(at)}_onItemEditClick(at){at.stopPropagation(),this.dispatchEvent(new CustomEvent("edit-click",{detail:{annotation:this._selectedAnnotation}}))}_onItemDeleteClick(at){at.stopPropagation(),this.dispatchEvent(new CustomEvent("delete-click",{detail:{annotation:this._selectedAnnotation}}))}render(){var at,st,ot,Hl,Sc,iu,su,lu;return this._meta?null===this._selectedAnnotation?ut.qy`<div class="list">
				${null===(at=this._meta.properties)||void 0===at||null===(st=at.annotations)||void 0===st?void 0:st.map(((at,st)=>{var ot,Hl,oc,_c;return ut.qy`
					<pnx-list-item
						title=${(null===(ot=this._presets[at.id])||void 0===ot?void 0:ot.name)||(null===(Hl=this._parent)||void 0===Hl?void 0:Hl._t.pnx.semantics_features_default_title.replace("{nb}",st+1))}
						subtitle=${null===(oc=this._parent)||void 0===oc?void 0:oc._t.pnx.semantics_features_subtitle.replace("{nb}",at.semantics.filter((at=>"delete"!==at.action)).length)}
						@click=${()=>this._onListItemClick(Object.assign({nb:st+1},at))}
						@mouseover=${()=>this._onListItemHover(Object.assign({nb:st+1},at))}
						@mouseout=${()=>this._onListItemHover(null)}
					>
						<iconify-icon
							slot="icon"
							icon=${(null===(_c=this._presets[at.id])||void 0===_c?void 0:_c.iconify)||"fa6-solid:cube"}
							style="font-size: 1.5em"
						></iconify-icon>
						${(0,rc.fa)(sc.Xk,{transform:{size:24},attributes:{slot:"action"}})}
					</pnx-list-item>
				`}))}
			</div>`:ut.qy`<div class="annotation">
				<pnx-list-item
					title=${(null===(ot=this._presets[this._selectedAnnotation.id])||void 0===ot?void 0:ot.name)||(null===(Hl=this._parent)||void 0===Hl?void 0:Hl._t.pnx.semantics_features_default_title.replace("{nb}",this._selectedAnnotation.nb))}
					@click=${()=>this._onListItemClick(null)}
				>
					${(0,rc.fa)(wc.Ce,{transform:{size:24},attributes:{slot:"icon"}})}
					<iconify-icon
						slot="icon"
						icon=${(null===(Sc=this._presets[this._selectedAnnotation.id])||void 0===Sc?void 0:Sc.iconify)||"fa6-solid:cube"}
						style="font-size: 1.5em"
					></iconify-icon>
					${this.editable?ut.qy`
						<pnx-button
							kind="superinline"
							title=${null===(iu=this._parent)||void 0===iu?void 0:iu._t.pnx.semantics_edit}
							slot="action"
							@click=${this._onItemEditClick}
						>
							${(0,rc.fa)(oc.hp,{transform:{size:18}})}
						</pnx-button>
						<pnx-button
							kind="superinline"
							title=${null===(su=this._parent)||void 0===su?void 0:su._t.pnx.semantics_delete_annotation}
							slot="action"
							@click=${this._onItemDeleteClick}
						>
							${(0,rc.fa)(_c.yL,{transform:{size:18}})}
						</pnx-button>`:ut.s6}
				</pnx-list-item>
				<pnx-semantics-table
					._t=${null===(lu=this._parent)||void 0===lu?void 0:lu._t}
					.source=${this._selectedAnnotation}
				/>
			</div>`:ut.s6}}AnnotationsList.styles=[Hl.Op,Hl.wS,ut.AH`
		.annotation { background: var(--white); }
	`],AnnotationsList.properties={editable:{type:Boolean},_meta:{state:!0},_selectedAnnotation:{state:!0},_presets:{state:!0}},customElements.define("pnx-annotations-list",AnnotationsList)},5036:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>MapBackground});var ut=ot(4542),Hl=ot(7534),rc=ot(6810),sc=ot(5995);class MapBackground extends ut.WF{constructor(){super(),this.size="md"}connectedCallback(){super.connectedCallback(),(0,sc.onceParentAvailable)(this).then((()=>{var at,st;null===(at=this._parent.map)||void 0===at||at.on("background-changed",(at=>{this.bg=at.background})),this.bg=null===(st=this._parent.map)||void 0===st?void 0:st.getBackground()}))}_onBgSelect(at){var st,ot;this.bg=at.target.value,null===(st=this._parent)||void 0===st||null===(ot=st.map)||void 0===ot||ot.setBackground(this.bg)}render(){var at,st;return ut.qy`
			<input
				type="radio"
				id="bg-streets"
				name="bg"
				value="streets"
				@change=${this._onBgSelect}
				.checked=${"streets"==this.bg}
			/>
			<label for="bg-streets">
				<img src=${rc} class=${this.size} alt="" />
				${null===(at=this._parent)||void 0===at?void 0:at._t.pnx.map_background_streets}
			</label>
			<input
				type="radio"
				id="bg-aerial"
				name="bg"
				value="aerial"
				@change=${this._onBgSelect}
				.checked=${"aerial"==this.bg}
			/>
			<label for="bg-aerial">
				<img src=${Hl} class=${this.size} alt="" />
				${null===(st=this._parent)||void 0===st?void 0:st._t.pnx.map_background_aerial}
			</label>
		`}}MapBackground.styles=[ut.AH`
		:host {
			justify-content: space-evenly;
			box-sizing: border-box;
			display: flex;
			gap: 10px;
		}
		input { display: none; }
		label { cursor: pointer; }

		img {
			width: 40px;
			border-radius: 5px;
			vertical-align: middle;
			margin-right: 5px;
			border: 2px solid var(--widget-bg);
		}

		img.sm {
			width: 32px;
		}

		input:checked + label img {
			outline: 3px solid var(--widget-border-btn);
		}
	`],MapBackground.properties={bg:{state:!0},size:{type:String}},customElements.define("pnx-map-background",MapBackground)},3581:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>MapFilters});var ut=ot(4542),Hl=ot(5995),rc=ot(7343),sc=ot(8591),oc=ot(5279),_c=ot(9186),wc=ot(6069),Sc=ot(3233),iu=ot(6668),su=ot(7879);class MapFilters extends ut.WF{constructor(){super(),this._formDelay=null,this.showZoomIn=!0}connectedCallback(){super.connectedCallback();for(let at of this.shadowRoot.querySelectorAll("input"))at.addEventListener("change",this._onFormChange.bind(this)),at.addEventListener("keypress",this._onFormChange.bind(this)),at.addEventListener("paste",this._onFormChange.bind(this)),at.addEventListener("input",this._onFormChange.bind(this));(0,Hl.onceParentAvailable)(this).then((()=>{var at,st;return null===(at=(st=this._parent).onceMapReady)||void 0===at?void 0:at.call(st).then((async()=>{this._parent.map.on("zoomend",this._onMapZoom.bind(this)),this._parent.map.on("filters-changed",this._onParentFilterChange.bind(this)),this._onMapZoom(),this._onParentFilterChange(this._parent.map._mapFilters);const at=this._parent.map.getVisibleUsers();if((null===at||void 0===at?void 0:at.length)>0&&"geovisio"!=at[0]){this.user=at[0];const st=await this._parent.api.getUserName(at[0]);st&&(this.user=st)}}))}))}_onMapZoom(){this.showZoomIn=this._parent.map.getZoom()<7}_onParentFilterChange(at){var st;if(this.minDate=(null===at||void 0===at?void 0:at.minDate)||null,this.maxDate=(null===at||void 0===at?void 0:at.maxDate)||null,this.minDate&&this.maxDate&&this.minDate>this.maxDate){const at=this.minDate;this.minDate=this.maxDate,this.maxDate=at,this._onFormChange()}this.score=(null===at||void 0===at||null===(st=at.qualityscore)||void 0===st?void 0:st.length)<5?at.qualityscore.join(","):"",this.type="",null!==at&&void 0!==at&&at.pic_type&&""!=at.pic_type&&(this.type="flat"==at.pic_type?"flat":"equirectangular")}_onSubmit(at){return at.preventDefault(),this._onFormChange(),!1}_onFormChange(){this._formDelay&&clearTimeout(this._formDelay),this._formDelay=setTimeout((()=>{var at;return null===(at=this._parent)||void 0===at?void 0:at._onMapFiltersChange()}),250)}_userSearch(at){return null===this||void 0===this?void 0:this._parent.api.searchUsers(at).then((at=>(at||[]).map((at=>({title:at.label,data:at})))))}_onUserSearchResult(at){var st,ot,ut;return at.detail?at.target.classList.add("pnx-filter-active"):at.target.classList.remove("pnx-filter-active"),null===(st=this._parent)||void 0===st||null===(ot=st.map)||void 0===ot?void 0:ot.setVisibleUsers(null!==(ut=at.detail)&&void 0!==ut&&ut.data?[at.detail.data.id]:["geovisio"])}_onReset(){var at,st;null===(at=this.shadowRoot.querySelector("#pnx-filter-qualityscore"))||void 0===at||at.setAttribute("grade",""),null===(st=this.shadowRoot.querySelector("#pnx-filter-search-user"))||void 0===st||st.reset(),this.minDate=null,this.maxDate=null,this.type="",this.score=null,this.user=null,this._onFormChange()}_onDateShortcut(at){const st=this.shadowRoot.getElementById("pnx-filter-date-from"),ot=this.shadowRoot.getElementById("pnx-filter-date-end");st&&(st.value!==at?st.value=at:st.value=""),ot&&(ot.value="")}_onMeUserSearch(){var at,st;const ot=(0,rc.getUserAccount)();if(!ot)return;const ut=this.shadowRoot.getElementById("pnx-filter-search-user");null!==(at=this._parent)&&void 0!==at&&null!==(st=at.map)&&void 0!==st&&st.getVisibleUsers().includes(ot.id)?null===ut||void 0===ut||ut._onResultClick():null===ut||void 0===ut||ut._onResultClick({title:ot.name,data:{id:ot.id}})}render(){var at,st,ot,sc,lu,cu,uu,pu,mu,gu,Au,yu,_u,xu,Su,Du;const Lu=(0,rc.getUserAccount)();return ut.qy`<form
			@reset=${this._onReset}
			@change=${this._onFormChange}
			@submit=${this._onSubmit}
		>
			${this["no-date"]?"":ut.qy`<div class="pnx-filter-block">
				<div class="pnx-filter-zoomin ${this.showZoomIn?"":"hidden"}">${null===(at=this._parent)||void 0===at?void 0:at._t.pnx.filter_zoom_in}</div>
				<h4>${(0,Hl.fa)(_c.ok)} ${null===(st=this._parent)||void 0===st?void 0:st._t.pnx.filter_date}</h4>
				<div class="pnx-input-shortcuts">
					<button
						@click=${()=>this._onDateShortcut(new Date((new Date).setMonth((new Date).getMonth()-1)).toISOString().split("T")[0])}
					>${null===(ot=this._parent)||void 0===ot?void 0:ot._t.pnx.filter_date_1month}</button>
					<button
						@click=${()=>this._onDateShortcut(new Date((new Date).setMonth((new Date).getMonth()-6)).toISOString().split("T")[0])}
					>${null===(sc=this._parent)||void 0===sc?void 0:sc._t.pnx.filter_date_6months}</button>
					<button
						@click=${()=>this._onDateShortcut(new Date((new Date).setFullYear((new Date).getFullYear()-1)).toISOString().split("T")[0])}
					>${null===(lu=this._parent)||void 0===lu?void 0:lu._t.pnx.filter_date_1year}</button>
				</div>
				<div class="pnx-input-group">
					<input
						type="date"
						id="pnx-filter-date-from"
						.value=${this.minDate}
						class=${this.minDate&&""!=this.minDate?"pnx-filter-active":""}
					/>
					${(0,Hl.fa)(wc.dm)}
					<input
						type="date"
						id="pnx-filter-date-end"
						.value=${this.maxDate}
						class=${this.maxDate&&""!=this.maxDate?"pnx-filter-active":""}
					/>
				</div>
			</div>`}

			${this["no-picture-type"]?"":ut.qy`<div class="pnx-filter-block">
				<h4>${(0,Hl.fa)(oc.jb)} ${null===(cu=this._parent)||void 0===cu?void 0:cu._t.pnx.filter_picture}</h4>
				<div class="pnx-input-group pnx-checkbox-btns" style="justify-content: center;">
					<input
						type="radio"
						id="pnx-filter-type-all"
						name="pnx-filter-type"
						value=""
						.checked=${!this.type||""===this.type}
					/>
					<label for="pnx-filter-type-all">${null===(uu=this._parent)||void 0===uu?void 0:uu._t.pnx.picture_all}</label>
					<input
						type="radio"
						id="pnx-filter-type-flat"
						name="pnx-filter-type"
						value="flat"
						.checked=${"flat"===this.type}
					/>
					<label for="pnx-filter-type-flat">${null===(pu=this._parent)||void 0===pu?void 0:pu._t.pnx.picture_flat}</label>
					<input
						type="radio"
						id="pnx-filter-type-360"
						name="pnx-filter-type"
						value="equirectangular"
						.checked=${"equirectangular"===this.type}
					/>
					<label for="pnx-filter-type-360">${null===(mu=this._parent)||void 0===mu?void 0:mu._t.pnx.picture_360}</label>
				</div>
			</div>`}

			${this["quality-score"]?ut.qy`
				<div class="pnx-filter-block">
					<div class="pnx-filter-zoomin ${this.showZoomIn?"":"hidden"}">${null===(gu=this._parent)||void 0===gu?void 0:gu._t.pnx.filter_zoom_in}</div>
					<h4 style="margin-bottom: 3px">
						${(0,Hl.fa)(Sc.B9)} ${null===(Au=this._parent)||void 0===Au?void 0:Au._t.pnx.filter_qualityscore}
						<pnx-button
							title="${null===(yu=this._parent)||void 0===yu?void 0:yu._t.pnx.metadata_quality_help}"
							kind="superinline"
							@click=${()=>{var at;return null===(at=this._parent)||void 0===at?void 0:at._showQualityScoreDoc()}}
						>
							${(0,Hl.fa)(iu.iW)}
						</pnx-button>
					</h4>
					<div class="pnx-input-group">
						<pnx-quality-score
							id="pnx-filter-qualityscore"
							_t=${null===(_u=this._parent)||void 0===_u?void 0:_u._t}
							input="pnx-filter-qualityscore"
							grade=${this.score}
							@change=${this._onFormChange}
						>
						</pnx-quality-score>
					</div>
				</div>
			`:ut.s6}

			${this["user-search"]?ut.qy`
				<div class="pnx-filter-block">
					<h4>${(0,Hl.fa)(su.X4)} ${null===(xu=this._parent)||void 0===xu?void 0:xu._t.pnx.filter_user}</h4>
					${Lu?ut.qy`
						<div class="pnx-input-shortcuts">
							<button @click=${this._onMeUserSearch}>
								${null===(Su=this._parent)||void 0===Su?void 0:Su._t.pnx.filter_user_mypics}
							</button>
						</div>
					`:ut.s6}
					<pnx-search-bar
						id="pnx-filter-search-user"
						placeholder=${null===(Du=this._parent)||void 0===Du?void 0:Du._t.pnx.search_user}
						class=${this.user?"pnx-filter-active":""}
						value=${this.user}
						@result=${this._onUserSearchResult}
						.searcher=${this._userSearch.bind(this)}
						._parent=${this._parent}
						no-menu-closure
					>
					</pnx-search-bar>
				</div>
			`:ut.s6}
		</form>`}}MapFilters.styles=[sc.Op,sc.YC,ut.AH`
		.pnx-input-group {
			display: flex;
			flex-direction: row;
			align-items: center;
			justify-content: center;
			gap: 5px;
		}

		/* Filter block */
		.pnx-filter-block {
			position: relative;
			padding: 10px 15px;
			border-bottom: 2px solid var(--widget-border-div);
		}
		.pnx-filter-block:first-child {
			padding-top: 15px;
		}
		.pnx-filter-block:last-child {
			border-bottom: none;
			padding-bottom: 15px;
		}
		.pnx-filter-zoomin {
			z-index: 131;
			background-color: rgba(255,255,255,0.8);
			text-align: center;
			font-weight: 800;
			position: absolute;
			top: 0;
			right: 0;
			left: 0;
			bottom: 0;
			display: flex;
			justify-content: center;
			align-items: center;
			border-radius: 25px;
		}
		.pnx-filter-zoomin.hidden {
			display: none;
		}

		/* Input styles */
		.pnx-filter-active,
		pnx-search-bar.pnx-filter-active::part(container),
		pnx-search-bar.pnx-filter-active::part(input) {
			background-color: var(--widget-bg-active) !important;
			border-color: var(--widget-bg-active) !important;
			color: var(--widget-font-active) !important;
		}
		input[type=date] {
			min-width: 0;
			flex-grow: 2;
			padding: 2px 0;
			text-align: center;
			background-color: var(--widget-bg);
			color: var(--widget-font);
			border: 1px solid var(--widget-border-div);
			border-radius: 20px;
			font-family: var(--font-family);
		}

		/* Input shortcuts */
		.pnx-input-shortcuts {
			margin-top: -10px;
			margin-bottom: 5px;
		}
		.pnx-input-shortcuts button {
			border: none;
			font-size: 0.75em;
			padding: 2px 6px;
			vertical-align: middle;
			background-color: var(--grey-pale);
			color: var(--black);
			border-radius: 10px;
			cursor: pointer;
			font-family: var(--font-family);
		}
		.pnx-input-shortcuts button:hover {
			background-color: #d9dcd9;
		}

		/* Checkbox looking like buttons */
		.pnx-input-group.pnx-checkbox-btns {
			gap: 0;
			align-items: stretch;
		}
		.pnx-checkbox-btns label {
			display: inline-block;
			padding: 2px 7px;
			background: none;
			border: 1px solid var(--widget-border-btn);
			color: var(--widget-font-direct);
			cursor: pointer;
			font-size: 16px;
			text-decoration: none;
			border-left-width: 0px;
		}
		.pnx-checkbox-btns label:hover {
			background-color: var(--widget-bg-hover);
		}
		.pnx-checkbox-btns label:first-of-type {
			border-top-left-radius: 8px;
			border-bottom-left-radius: 8px;
			border-left-width: 1px;
		}
		.pnx-checkbox-btns label:last-of-type {
			border-top-right-radius: 8px;
			border-bottom-right-radius: 8px;
		}
		.pnx-checkbox-btns input[type="radio"] { display: none; }
		.pnx-checkbox-btns input[type="radio"]:checked + label {
			background-color: var(--widget-bg-active);
			color: var(--widget-font-active);
		}
		.pnx-checkbox-btns input[type="radio"]:checked + label:first-of-type {
			border-right-color: white;
		}

		/* Force user search width */
		#pnx-filter-search-user::part(container) { width: 100%; }
	`],MapFilters.properties={"quality-score":{type:Boolean},"user-search":{type:Boolean},"no-date":{type:Boolean},"no-picture-type":{type:Boolean},showZoomIn:{state:!0},minDate:{state:!0},maxDate:{state:!0},type:{state:!0},score:{state:!0},user:{state:!0}},customElements.define("pnx-map-filters-menu",MapFilters)},5334:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>MapLayers});var ut=ot(4542),Hl=ot(5995),rc=ot(8591),sc=ot(7343),oc=ot(7172),_c=ot(8629),wc=ot(6668);class MapLayers extends ut.WF{connectedCallback(){super.connectedCallback(),(0,Hl.onceParentAvailable)(this).then((()=>{var at,st;return null===(at=this._parent)||void 0===at||null===(st=at.onceMapReady)||void 0===st?void 0:st.call(at).then((()=>{this.theme=this._parent.map._mapFilters.theme,this._parent.map.on("filters-changed",(at=>this.theme=at.theme))}))}))}_onThemeSelect(at){var st;this.theme=at.target.value,null===(st=this._parent)||void 0===st||st._onMapFiltersChange()}render(){var at,st,ot,rc,Sc,iu,su,lu,cu,uu,pu,mu,gu,Au,yu,_u,xu,Su;const Du=[];var Lu;null!==(at=this._parent)&&void 0!==at&&null!==(st=at.map)&&void 0!==st&&null!==(ot=st.hasTwoBackgrounds)&&void 0!==ot&&ot.call(st)&&Du.push(ut.qy`
				<h4>${(0,Hl.fa)(oc.YS)} ${null===(Lu=this._parent)||void 0===Lu?void 0:Lu._t.pnx.map_background}</h4>
				<pnx-map-background ._parent=${this._parent}></pnx-map-background>
			`);return Du.push(ut.qy`
			<h4>${(0,Hl.fa)(_c.fy)} ${null===(rc=this._parent)||void 0===rc?void 0:rc._t.pnx.map_theme}</h4>
			<select id="pnx-map-theme" style="width: 100%;" @change=${this._onThemeSelect}>
				<option value="default" .selected=${"default"==this.theme}>${null===(Sc=this._parent)||void 0===Sc?void 0:Sc._t.pnx.map_theme_default}</option>
				<option value="age" .selected=${"age"==this.theme}>${null===(iu=this._parent)||void 0===iu?void 0:iu._t.pnx.map_theme_age}</option>
				<option value="type" .selected=${"type"==this.theme}>${null===(su=this._parent)||void 0===su?void 0:su._t.pnx.map_theme_type}</option>
				${(null===(lu=this._parent)||void 0===lu||null===(cu=lu.map)||void 0===cu||null===(uu=cu._hasQualityScore)||void 0===uu?void 0:uu.call(cu))&&ut.qy`<option value="score" .selected=${"score"==this.theme}>${null===(pu=this._parent)||void 0===pu?void 0:pu._t.pnx.map_theme_score}</option>`}
			</select>
		`),Du.push(ut.qy`<div class="legend">
			${"age"==this.theme?ut.qy`
				<div>
					<div class="legend-entry">
						<span class="legend-color" style="background-color: ${sc.COLORS.PALETTE_4}"></span>
						${null===(mu=this._parent)||void 0===mu?void 0:mu._t.pnx.map_theme_age_4}
					</div>
					<div class="legend-entry">
						<span class="legend-color" style="background-color: ${sc.COLORS.PALETTE_3}"></span>
						${null===(gu=this._parent)||void 0===gu?void 0:gu._t.pnx.map_theme_age_3}
					</div>
				</div>
				<div>
					<div class="legend-entry">
						<span class="legend-color" style="background-color: ${sc.COLORS.PALETTE_2}"></span>
						${null===(Au=this._parent)||void 0===Au?void 0:Au._t.pnx.map_theme_age_2}
					</div>
					<div class="legend-entry">
						<span class="legend-color" style="background-color: ${sc.COLORS.PALETTE_1}"></span>
						${null===(yu=this._parent)||void 0===yu?void 0:yu._t.pnx.map_theme_age_1}
					</div>
				</div>`:ut.s6}
			
			${"type"==this.theme?ut.qy`
			 	<div class="legend-entry">
			 		<span class="legend-color" style="background-color: ${sc.COLORS.QUALI_1}"></span>
			 		${null===(_u=this._parent)||void 0===_u?void 0:_u._t.pnx.picture_360}
			 	</div>
			 	<div class="legend-entry">
			 		<span class="legend-color" style="background-color: ${sc.COLORS.QUALI_2}"></span>
			 		${null===(xu=this._parent)||void 0===xu?void 0:xu._t.pnx.picture_flat}
			 	</div>`:ut.s6}
			
			${"score"==this.theme?ut.qy`<div>
				<pnx-quality-score></pnx-quality-score>
				<pnx-button
					title="${null===(Su=this._parent)||void 0===Su?void 0:Su._t.pnx.metadata_quality_help}"
					kind="superinline"
					@click=${()=>{var at;return null===(at=this._parent)||void 0===at?void 0:at._showQualityScoreDoc()}}
				>
					${(0,Hl.fa)(wc.iW)}
				</pnx-button></div>`:ut.s6}
		</div>`),Du}}MapLayers.styles=[rc.Op,rc.YC,rc.Lt,ut.AH`
		.legend {
			display: flex;
			flex-wrap: wrap;
			margin-top: 5px;
			justify-content: space-evenly;
		}

		.legend-entry {
			margin: 10px 8px 5px 0px;
			line-height: 12px;
			display: flex;
			align-items: center;
			font-size: 1.0em;
		}

		.legend-color {
			display: inline-block;
			width: 15px;
			height: 15px;
			border-radius: 3px;
			margin-right: 5px;
		}

		.legend-score {
			justify-content: center;
			gap: 0;
		}
	`],MapLayers.properties={theme:{state:!0}},customElements.define("pnx-map-layers-menu",MapLayers)},4749:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>MapLegend});var ut=ot(4542),Hl=ot(5995);class MapLegend extends ut.WF{constructor(){super(),this.light=!1}connectedCallback(){super.connectedCallback(),(0,Hl.onceParentAvailable)(this).then((()=>this.requestUpdate()))}render(){var at,st,ot,Hl;const rc=null===(at=this._parent)||void 0===at||null===(st=at.map)||void 0===st||null===(ot=st._attribution)||void 0===ot?void 0:ot._innerContainer,sc=null===(Hl=this._parent)||void 0===Hl?void 0:Hl._t.map.map_data.split("{m}");return this.light?rc&&rc.innerHTML.length>0?rc:ut.s6:ut.qy`
				${rc&&rc.innerHTML.length>0?ut.qy`${sc.shift()}${rc}${sc.shift()}`:ut.s6}
			`}}MapLegend.styles=ut.AH`
		:host {
			font-size: 0.7em;
		}
		small {
			font-size: 1em;
		}
		.maplibregl-ctrl-attrib-inner {
			display: inline-block;
		}
	`,MapLegend.properties={light:{type:Boolean}},customElements.define("pnx-map-legend",MapLegend)},1636:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>MiniPictureLegend});var ut=ot(4542),Hl=ot(5995),rc=ot(8591);class MiniPictureLegend extends ut.WF{connectedCallback(){super.connectedCallback(),(0,Hl.onceParentAvailable)(this).then((()=>this._parent.onceReady())).then((()=>{this._onPicChange(this._parent.psv.getPictureMetadata()),this._parent.psv.addEventListener("picture-loaded",(()=>{this._onPicChange(this._parent.psv.getPictureMetadata())})),this._parent.psv.addEventListener("sequence-stopped",(()=>{this._onPicChange(this._parent.psv.getPictureMetadata())}))}))}_onPicChange(at){this._caption=null===at||void 0===at?void 0:at.caption}render(){var at,st;return null!==(at=this._caption)&&void 0!==at&&at.date?ut.qy`<div class="pnx-panel">${this._caption.date.toLocaleDateString((null===(st=this._parent)||void 0===st?void 0:st.lang)||window.navigator.language,{year:"numeric",month:"long",day:"numeric"})}</div>`:ut.s6}}MiniPictureLegend.styles=[rc.nd,ut.AH`
		.pnx-panel {
			bottom: 0;
			right: 0;
			width: unset;
			min-width: unset;
			border-radius: 10px;
			border-top-right-radius: 0;
			border-bottom-left-radius: 0;
			border-right: none;
			border-bottom: none;
			padding: 2px 5px;
			font-size: 0.7em;
		}
	`],MiniPictureLegend.properties={_caption:{state:!0}},customElements.define("pnx-mini-picture-legend",MiniPictureLegend)},3589:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>PictureLegend});var ut=ot(4542),Hl=ot(686),rc=ot(1198),sc=ot(5995),oc=ot(8466),_c=ot(4336),wc=ot(2593),Sc=ot(7879),iu=ot(4927),su=ot(6311),lu=ot(1260),cu=ot(8591),uu=ot(3606),pu=ot(7208);class PictureLegend extends ut.WF{constructor(){super(),this._expanded=!0,this.collapsable=!1,this.light=!1}connectedCallback(){super.connectedCallback(),this._expanded=!this.collapsable,this._prevSearches={},(0,sc.onceParentAvailable)(this).then((()=>this._parent.onceReady())).then((()=>{this._onPicChange(this._parent.psv.getPictureMetadata()),this._parent.psv.addEventListener("picture-loaded",(()=>{this._onPicChange(this._parent.psv.getPictureMetadata())})),this._parent.psv.addEventListener("sequence-stopped",(()=>{this._onPicChange(this._parent.psv.getPictureMetadata())})),this._parent.psv.addEventListener("annotation-focused",(()=>{this._expanded=!0})),this._parent.psv.addEventListener("annotations-toggled",(at=>{at.detail.visible&&(this._expanded=!0)})),this._parent.psv.getSelectedAnnotations().length>0&&(this._expanded=!0)}))}_onPicChange(at){if(clearTimeout(this._addrTimer1),this._caption=null===at||void 0===at?void 0:at.caption,at){const st=`${at.gps[0].toFixed(4)}/${at.gps[1].toFixed(4)}`;this._prevSearches[st]?this._addr=this._prevSearches[st]:this._parent.psv._sequencePlaying||(this._addr="",this._addrTimer1=setTimeout((()=>{(0,uu.reverseGeocodingNominatim)(at.gps[1],at.gps[0]).then((at=>{clearTimeout(this._addrTimer2),this._addr=at,this._prevSearches[st]=at}))}),500))}else this._addr=""}_onBackClick(){var at,st;this._parent.isWidthSmall()&&"map"===this._parent.focus?this._parent.select():null===(at=(st=this._parent)._setFocus)||void 0===at||at.call(st,"map")}render(){var at,st,ot,cu,uu,mu,gu;if(!this._caption)return ut.s6;const Au=(null===(at=this._parent)||void 0===at?void 0:at.lang)||window.navigator.language,yu=(0,rc.H)({"pnx-hidden":this._expanded}),_u=(0,rc.H)({"pnx-hidden":!this._expanded});var xu,Su,Du,Lu,$u,hh;return this.light?Hl.qy`<div class="pnx-picture-legend-light">
				${(null===(xu=this._caption.producer)||void 0===xu?void 0:xu.length)>0?Hl.qy`
					<a
						href=${(0,pu.PanoramaxMetaCatalogURL)()+"/?pic="+this._parent.psv.getPictureMetadata().id}
						target="_blank"
						title=${null===(Su=this._parent)||void 0===Su?void 0:Su._t.pnx.share_page}
					>${this._caption.producer[this._caption.producer.length-1]}</a>
				</div>`:ut.s6}

				${(null===(Du=this._caption.producer)||void 0===Du?void 0:Du.length)>0&&this._caption.date?"-":""}

				${this._caption.date?new Intl.DateTimeFormat(Au,{timeZone:this._caption.tz,dateStyle:"short"}).format(this._caption.date):ut.s6}

				${((null===(Lu=this._caption.producer)||void 0===Lu?void 0:Lu.length)>0||this._caption.date)&&null!==($u=this._caption)&&void 0!==$u&&$u.license?"|":""}

				${null!==(hh=this._caption)&&void 0!==hh&&hh.license?Hl.qy`${(0,Hl.Bk)(this._caption.license)}`:ut.s6}
			`:Hl.qy`
			<div class="headline">
				${this._parent._setFocus?Hl.qy`
					<pnx-button
						kind="superinline"
						@click=${this._onBackClick}
					>
						${(0,sc.fa)(oc.Ce)}
					</pnx-button>
				`:ut.s6}

				<div id="pic-legend-addr" title=${this._addr||""}>
					${(null===(st=this._addr)||void 0===st?void 0:st.length)>0?this._addr:Hl.qy`<span class="pnx-placeholder-loading">&nbsp;</span>`}
				</div>

				<div class="headline-buttons">
					<pnx-button
						size="sm"
						class=${yu}
						title=${null===(ot=this._parent)||void 0===ot?void 0:ot._t.pnx.share}
						@click=${()=>this._parent._showShareOptions()}
					>
						${(0,sc.fa)(lu.faShareNodes)}
					</pnx-button>

					<pnx-picture-legend-actions
						@click=${at=>at.stopPropagation()}
						._parent=${this._parent}
						?full=${this._expanded}
					></pnx-picture-legend-actions>
				</div>
			</div>

			<div id="pic-legend-info" class=${yu}>
				${(null===(cu=this._caption.producer)||void 0===cu?void 0:cu.length)>0?Hl.qy`<div class="info-block">
					${(0,sc.fa)(Sc.X4)}
					${this._caption.producer[this._caption.producer.length-1]}
				</div>`:ut.s6}

				${this._caption.date?Hl.qy`<div class="info-block">
					${(0,sc.fa)(iu.BE)}
					${this._caption.date.toLocaleDateString((null===(uu=this._parent)||void 0===uu?void 0:uu.lang)||window.navigator.language,{year:"numeric",month:"long",day:"numeric"})}				</div>`:ut.s6}
			</div>

			<div id="pic-legend-cta" class=${_u}>
				<pnx-button size="sm" @click=${()=>this._parent._showShareOptions()}>
					${(0,sc.fa)(lu.faShareNodes)} ${null===(mu=this._parent)||void 0===mu?void 0:mu._t.pnx.share}
				</pnx-button>

				${this._parent.api._endpoints.report?Hl.qy`
						<pnx-button kind="fullwarn" size="sm" @click=${()=>this._parent._showReportForm()}>
							${(0,sc.fa)(su.JA)} ${null===(gu=this._parent)||void 0===gu?void 0:gu._t.pnx.report}
						</pnx-button>
				`:ut.s6}

				<slot name="editors">
					<pnx-widget-osmeditors ._parent=${this._parent} />
				</slot>
			</div>

			<pnx-picture-metadata class=${_u} ._parent=${this._parent}></pnx-picture-metadata>

			${this.collapsable?Hl.qy`<pnx-button
				kind="inline"
				size="sm"
				id="pic-legend-expand"
				@click=${()=>this._expanded=!this._expanded}
			>${this._expanded?(0,sc.fa)(_c.w2):(0,sc.fa)(wc.Jt)}</pnx-button>`:ut.s6}
		`}}PictureLegend.styles=[cu.qf,cu.nd,cu.R,ut.AH`
		:host {
			display: flex;
			flex-direction: column;
			margin: 0;
			font-family: var(--font-family);
			flex-wrap: nowrap;
		}

		@media screen and (min-width: 576px) {
			:host {
				max-height: 70vh;
			}
		}

		/* Top bar */
		.headline {
			display: flex;
			gap: 10px;
			align-items: center;
			margin: 10px 10px 5px 10px;
			justify-content: space-between;
			flex: 1;
		}

		.headline-buttons {
			display: flex;
			gap: 5px;
		}

		/* Address line */
		#pic-legend-addr {
			line-height: 1.2em;
			font-size: 1em;
			margin-bottom: 2px;
			flex-grow: 5;
			font-weight: 800;
			text-overflow: ellipsis;
			overflow: hidden;
  			white-space: nowrap;
		}

		#pic-legend-addr span {
			display: inline-block;
			height: 100%;
			width: 100%;
		}

		/* Minimal info block */
		#pic-legend-info {
			margin: 10px;
			display: flex;
			gap: 10px;
			justify-content: space-around;
		}
		.info-block {
			display: flex;
			flex-shrink: 1;
			gap: 5px;
			font-weight: 600;
			font-size: 0.85em;
			align-items: center;
		}
		.info-block svg { height: 18px; }

		/* Expand button */
		#pic-legend-expand {
			display: block;
			margin-top: 5px;
			max-width: 100%;
			flex: 1;
		}
		#pic-legend-expand::part(btn) {
			border-radius: 10px;
			border-top-right-radius: 0;
			border-top-left-radius: 0;
		}

		/* Details block */
		pnx-picture-metadata {
			margin: 5px 10px;
			display: block;
			box-sizing: border-box;
			flex: 1;
			overflow-y: auto;
		}

		/* Details actions */
		#pic-legend-cta {
			display: flex;
			margin: 5px 10px;
			border-bottom-left-radius: 10px;
			border-bottom-right-radius: 10px;
			gap: 5px;
			flex-wrap: wrap;
			flex: 1;
		}

		/* More options menu */
		#pnx-legend-opts { min-width: unset; }

		/* Editors */
		#pic-legend-editors { margin: 0 10px; }

		/* Light version */
		.pnx-picture-legend-light {
			width: max-content;
			font-size: 10px;
		}
	`],PictureLegend.properties={light:{type:Boolean},_caption:{state:!0},_addr:{state:!0},_expanded:{state:!0},collapsable:{type:Boolean}},customElements.define("pnx-picture-legend",PictureLegend)},6993:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>PictureMetadata});var ut=ot(4542),Hl=ot(686),rc=ot(5995),sc=ot(3520),oc=ot(3233),_c=ot(99),wc=ot(5279),Sc=ot(4954),iu=ot(2077),su=ot(5124),lu=ot(6668),cu=ot(6249),uu=ot(8591),pu=ot(508),mu=ot(7208),gu=ot(7343);const missing=()=>(0,rc.fa)(su.Ev,{styles:{height:"16px"}});class PictureMetadata extends ut.WF{connectedCallback(){super.connectedCallback();const gototags=()=>{const at=this.shadowRoot.querySelector("pnx-tabs");at&&at.setAttribute("activeTabIndex",4)};(0,rc.onceParentAvailable)(this).then((()=>{var at,st,ot,ut;this._meta=null===(at=this._parent)||void 0===at||null===(st=at.psv)||void 0===st?void 0:st.getPictureMetadata(),null===(ot=this._parent)||void 0===ot||null===(ut=ot.oncePSVReady)||void 0===ut||ut.call(ot).then((()=>{this._parent.psv.addEventListener("picture-loaded",(()=>{this._meta=this._parent.psv.getPictureMetadata()})),this._parent.psv.addEventListener("annotation-focused",gototags),this._parent.psv.addEventListener("annotations-toggled",(at=>{at.detail.visible&&gototags()})),this._parent.psv.getSelectedAnnotations().length>0&&gototags()}))}))}_onQualityScoreClick(){const at=this.shadowRoot.querySelector("pnx-tabs");at&&at.setAttribute("activeTabIndex",3)}_onCaptureDateClick(){const at=this.shadowRoot.querySelector("pnx-tabs");at&&at.setAttribute("activeTabIndex",1)}_toTab(at,st){return Hl.qy`
			<h4 slot="title">${at}</h4>
			<div slot="content" class="data-blocks">
				${st.filter((at=>at)).map((at=>Hl.qy`<div class="data-block" style=${at.style}>
					<h5>${at.title}</h5>
					<div style=${at.content_style} @click=${at.click}>${at.content}</div>
				</div>`))}
			</div>
		`}render(){var at,st,ot,su,uu,Au,yu,_u,xu,Su,Du,Lu,$u,hh,ed,td,id,nd,rd,ad,sd,od,ld,cd,ud,hd,dd,pd,md,gd,fd,Ad,yd,vd,_d,xd,bd,wd,Ed,Md,Sd,Td,Cd,kd,Id,Dd,Ld,Pd,zd,Nd,Rd,Od,Bd;if(!this._meta)return ut.s6;const Fd=(null===(at=this._parent)||void 0===at?void 0:at.lang)||window.navigator.language,jd=null===(st=this._meta)||void 0===st||null===(ot=st.properties)||void 0===ot?void 0:ot["pers:interior_orientation"],Ud=[jd.camera_manufacturer,jd.camera_model].filter((at=>at)).join(" "),Vd=null!==jd&&void 0!==jd&&jd.focal_length?`${null===jd||void 0===jd?void 0:jd.focal_length} mm`:missing();let Gd=null===jd||void 0===jd?void 0:jd.sensor_array_dimensions;Gd&&(Gd=`${Gd[0]} x ${Gd[1]} px (${Math.floor(Gd[0]*Gd[1]/1e6)} Mpx)`);let Zd=null===(su=this._parent)||void 0===su?void 0:su._t.pnx.picture_flat,Hd=null===(uu=this._parent)||void 0===uu?void 0:uu._t.pnx.picture_flat_long,Wd=null===jd||void 0===jd?void 0:jd.field_of_view;var qd,Yd;null!==Wd&&void 0!==Wd&&(360===Wd?(Zd=null===(qd=this._parent)||void 0===qd?void 0:qd._t.pnx.picture_360,Hd=null===(Yd=this._parent)||void 0===Yd?void 0:Yd._t.pnx.picture_360_long):Zd+=` (${Wd}\xb0)`);const Qd=[{title:null===(Au=this._parent)||void 0===Au?void 0:Au._t.pnx.metadata_camera_make,content:(null===jd||void 0===jd?void 0:jd.camera_manufacturer)||missing()},{title:null===(yu=this._parent)||void 0===yu?void 0:yu._t.pnx.metadata_camera_model,content:(null===jd||void 0===jd?void 0:jd.camera_model)||missing()},{title:null===(_u=this._parent)||void 0===_u?void 0:_u._t.pnx.metadata_camera_type,content:Zd},{title:null===(xu=this._parent)||void 0===xu?void 0:xu._t.pnx.metadata_camera_resolution,content:Gd||missing()},{title:null===(Su=this._parent)||void 0===Su?void 0:Su._t.pnx.metadata_camera_focal_length,content:Vd},(null===(Du=this._meta)||void 0===Du||null===(Lu=Du.caption)||void 0===Lu?void 0:Lu.date)&&{title:null===($u=this._parent)||void 0===$u?void 0:$u._t.pnx.metadata_general_date,content:Hl.qy`
					<strong>${new Intl.DateTimeFormat(Fd,{timeZone:this._meta.caption.tz,dateStyle:"short"}).format(this._meta.caption.date)}</strong>
					<br />${new Intl.DateTimeFormat(Fd,{timeZone:this._meta.caption.tz,hour:"numeric",minute:"numeric",second:"numeric",fractionalSecondDigits:3,timeZoneName:"longOffset"}).format(this._meta.caption.date)}
				`}],Kd=void 0!==(null===(hh=this._meta)||void 0===hh||null===(ed=hh.properties)||void 0===ed?void 0:ed["view:azimuth"])&&`${this._meta.properties["view:azimuth"]}\xb0`,Xd=[{title:null===(td=this._parent)||void 0===td?void 0:td._t.pnx.metadata_location_coordinates,content:Hl.qy`
					${this._meta.gps[0]}, ${this._meta.gps[1]}
					<pnx-copy-coordinates
						._parent=${this._parent}
						.gps=${this._meta.gps}
						style="margin-left: 10px"
					></pnx-copy-coordinates>
				`,style:"width: 100%"},{title:null===(id=this._parent)||void 0===id?void 0:id._t.pnx.metadata_location_orientation,content:Kd||missing()},{title:null===(nd=this._parent)||void 0===nd?void 0:nd._t.pnx.metadata_location_precision,content:(0,pu.getGPSPrecision)(this._meta)||missing()}],Jd=(null===(rd=this._parent)||void 0===rd||null===(ad=rd.map)||void 0===ad||null===(sd=ad._hasQualityScore)||void 0===sd?void 0:sd.call(ad))||(null===(od=this._meta)||void 0===od||null===(ld=od.properties)||void 0===ld?void 0:ld["quality:horizontal_accuracy"])||(null===(cd=this._meta)||void 0===cd||null===(ud=cd.properties)||void 0===ud?void 0:ud["panoramax:horizontal_pixel_density"]);let $d,Ap;if(Jd){var Ep,Dp,Lp,Np,Rp,Op,Fp,jp,Up,Vp,Gp;const at=(0,gu.getGrade)(gu.QUALITYSCORE_GPS_VALUES,null===(Ep=this._meta)||void 0===Ep||null===(Dp=Ep.properties)||void 0===Dp?void 0:Dp["quality:horizontal_accuracy"]),st=(0,gu.getGrade)(360===(null===(Lp=this._meta)||void 0===Lp?void 0:Lp.horizontalFov)?gu.QUALITYSCORE_RES_360_VALUES:gu.QUALITYSCORE_RES_FLAT_VALUES,null===(Np=this._meta)||void 0===Np||null===(Rp=Np.properties)||void 0===Rp?void 0:Rp["panoramax:horizontal_pixel_density"]);Ap=Math.round((st||1)*gu.QUALITYSCORE_POND_RES+(at||1)*gu.QUALITYSCORE_POND_GPS),$d=[{title:Hl.qy`
						${null===(Op=this._parent)||void 0===Op?void 0:Op._t.pnx.metadata_quality_score}
						<pnx-button
							title="${null===(Fp=this._parent)||void 0===Fp?void 0:Fp._t.pnx.metadata_quality_help}"
							kind="superinline"
							@click=${()=>{var at;return null===(at=this._parent)||void 0===at?void 0:at._showQualityScoreDoc()}}
						>
							${(0,rc.fa)(lu.iW)}
						</pnx-button>
					`,content:Hl.qy`<pnx-quality-score grade=${Ap} style="font-size: 16px"></pnx-quality-score>`,style:"width: 100%"},{title:null===(jp=this._parent)||void 0===jp?void 0:jp._t.pnx.metadata_quality_gps_score,content:(0,rc.createWebComp)("pnx-grade",{stars:at,_t:null===(Up=this._parent)||void 0===Up?void 0:Up._t})},{title:null===(Vp=this._parent)||void 0===Vp?void 0:Vp._t.pnx.metadata_quality_resolution_score,content:(0,rc.createWebComp)("pnx-grade",{stars:st,_t:null===(Gp=this._parent)||void 0===Gp?void 0:Gp._t})}]}const Zp=Object.entries(this._meta.properties.exif).sort().filter((at=>{let[,st]=at;return st})).map((at=>{let[st,ot]=at;return JSON.stringify(ot).includes("\\u")&&(ot=JSON.stringify(ot).replace(/\\u[0-9A-Fa-f]{4}/g,(at=>" 0x"+parseInt(at.slice(2),16).toString(16).toUpperCase().padStart(4,"0"))).slice(1,-1).trim()),{title:st,content:ot.length>30?Hl.qy`<textarea readonly .value=${ot}></textarea>`:ot,style:ot.length>30?"width: 100%":void 0}}));Zp.unshift({content:Hl.qy`
				<pnx-link-button
					size="sm"
					target="_blank"
					href="https://exiv2.org/metadata.html"
					title=${null===(hd=this._parent)||void 0===hd?void 0:hd._t.pnx.metadata_exif_doc_title}
				>${(0,rc.fa)(lu.iW)} ${null===(dd=this._parent)||void 0===dd?void 0:dd._t.pnx.metadata_exif_doc}</pnx-link-button>
			`,style:"width: 100%"});const Hp=[(null===(pd=this._meta)||void 0===pd||null===(md=pd.caption)||void 0===md||null===(gd=md.producer)||void 0===gd?void 0:gd.length)>0&&{title:null===(fd=this._parent)||void 0===fd?void 0:fd._t.pnx.metadata_general_author,content:Hl.qy`
					<strong>${this._meta.caption.producer[this._meta.caption.producer.length-1]}</strong>
					${this._meta.caption.producer.length>1?Hl.qy`<br />${this._meta.caption.producer.slice(0,-1).join(", ")}`:ut.s6}
				`},(null===(Ad=this._meta)||void 0===Ad||null===(yd=Ad.caption)||void 0===yd?void 0:yd.date)&&{title:null===(vd=this._parent)||void 0===vd?void 0:vd._t.pnx.metadata_general_date,click:this._onCaptureDateClick,content_style:"cursor: pointer",content:Hl.qy`
					<strong>${new Intl.DateTimeFormat(Fd,{timeZone:this._meta.caption.tz,dateStyle:"long"}).format(this._meta.caption.date)}</strong>
					<br />${new Intl.DateTimeFormat(Fd,{timeZone:this._meta.caption.tz,hour:"numeric",minute:"numeric",second:"numeric"}).format(this._meta.caption.date)}
				`},jd&&{title:null===(_d=this._parent)||void 0===_d?void 0:_d._t.pnx.metadata_camera,content:Hl.qy`
					<strong>${Ud.length>0?Ud:missing()}</strong>
					<br />${Hd}
				`},(null===(xd=this._meta)||void 0===xd||null===(bd=xd.caption)||void 0===bd?void 0:bd.license)&&{title:null===(wd=this._parent)||void 0===wd?void 0:wd._t.pnx.metadata_general_license,content:Hl.qy`${(0,Hl.Bk)(this._meta.caption.license)}`},Jd&&{title:null===(Ed=this._parent)||void 0===Ed?void 0:Ed._t.pnx.metadata_quality,click:this._onQualityScoreClick,content:Hl.qy`<pnx-quality-score
					grade=${Ap}
					style="font-size: 14px; cursor: pointer"
				/>`},{title:null===(Md=this._parent)||void 0===Md?void 0:Md._t.pnx.metadata_general_copy_id,content_style:"display: flex; gap: 5px;",content:Hl.qy`
					<pnx-copy-button
						kind="outline"
						size="sm"
						._t=${null===(Sd=this._parent)||void 0===Sd?void 0:Sd._t}
						text=${this._meta.id}
						style="flex: 1"
					>
						${(0,rc.fa)(wc.jb)} ${null===(Td=this._parent)||void 0===Td?void 0:Td._t.pnx.metadata_general_picid}
					</pnx-copy-button>
					<pnx-copy-button
						kind="outline"
						size="sm"
						._t=${null===(Cd=this._parent)||void 0===Cd?void 0:Cd._t}
						text=${this._meta.sequence.id}
						style="flex: 1"
					>
						${(0,rc.fa)(Sc.yv)} ${null===(kd=this._parent)||void 0===kd?void 0:kd._t.pnx.metadata_general_seqid}
					</pnx-copy-button>
				`},(null===(Id=this._meta)||void 0===Id?void 0:Id.origInstance)&&{title:null===(Dd=this._parent)||void 0===Dd?void 0:Dd._t.pnx.metadata_general_instance,content:Hl.qy`<strong>
					<a href=${this._meta.origInstance.href+window.location.search} target="_blank" style="text-decoration: none">
						<img
							src=${(0,mu.PanoramaxMetaCatalogURL)()+"/api/instances/"+this._meta.origInstance.instance_name+"/logo"}
							style="height: 30px; max-width: 150px; vertical-align: middle"
							alt=""
						/>
						<span style="text-decoration: underline">
							${this._meta.origInstance.instance_name||this._meta.origInstance.href.replace(/^http.?:\/\//,"")}
						</span>
					</a>
				</strong>`}];return Hl.qy`<pnx-tabs>
			${this._toTab(Hl.qy`${(0,rc.fa)(wc.jb)} ${null===(Ld=this._parent)||void 0===Ld?void 0:Ld._t.pnx.metadata_summary}`,Hp)}

			${this._toTab(Hl.qy`${(0,rc.fa)(_c.rw)} ${null===(Pd=this._parent)||void 0===Pd?void 0:Pd._t.pnx.metadata_camera}`,Qd)}

			${this._toTab(Hl.qy`${(0,rc.fa)(sc.gK)} ${null===(zd=this._parent)||void 0===zd?void 0:zd._t.pnx.metadata_location}`,Xd)}

			${Jd?this._toTab(Hl.qy`${(0,rc.fa)(oc.B9)} ${null===(Nd=this._parent)||void 0===Nd?void 0:Nd._t.pnx.metadata_quality}`,$d):ut.s6}

			<h4 slot="title">${(0,rc.fa)(cu.DX)} ${null===(Rd=this._parent)||void 0===Rd?void 0:Rd._t.pnx.semantics_title}</h4>
				<div slot="content" class="data-blocks">
					<pnx-semantics-metadata ._parent=${this._parent}></pnx-semantics-metadata>
				</div>
			</div>

			${null!==(Od=this._meta.properties)&&void 0!==Od&&Od.exif?this._toTab(Hl.qy`${(0,rc.fa)(iu.DD)} ${null===(Bd=this._parent)||void 0===Bd?void 0:Bd._t.pnx.metadata_exif}`,Zp):ut.s6}
		</pnx-tabs>`}}PictureMetadata.styles=[uu.Op,uu.YC,uu.PC,uu.R,uu.Tk,ut.AH`
		div[slot="content"] {
			padding: 5px 10px;
			background-color: #ededed;
		}

		.data-block {
			min-width: 50%;
		}

		pnx-semantics-table {
			overflow-x: auto;
  			display: block;
		}
	`],PictureMetadata.properties={_meta:{state:!0}},customElements.define("pnx-picture-metadata",PictureMetadata)},499:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>PlayerOptions});var ut=ot(4542),Hl=ot(8591),rc=ot(7744),sc=ot(325),oc=ot(9243),_c=ot(9048),wc=ot(5995);class PlayerOptions extends ut.WF{connectedCallback(){super.connectedCallback(),(0,wc.onceParentAvailable)(this).then((()=>{var at,st;return null===(at=this._parent)||void 0===at||null===(st=at.psv)||void 0===st?void 0:st.addEventListener("transition-duration-changed",(at=>{this.renderRoot.querySelector("#pnx-player-speed").value=_c.Vf-at.detail.value}))}))}_onSpeedChange(at){var st,ot;const ut=_c.Vf-at.target.value;null===(st=this._parent)||void 0===st||null===(ot=st.psv)||void 0===ot||ot.setTransitionDuration(ut)}_onContrastClick(){const at=this.renderRoot.querySelector("#pnx-player-contrast");var st,ot,ut,Hl;"true"==at.getAttribute("active")?(at.removeAttribute("active"),null===(st=this._parent)||void 0===st||null===(ot=st.psv)||void 0===ot||ot.setHigherContrast(!1)):(at.setAttribute("active","true"),null===(ut=this._parent)||void 0===ut||null===(Hl=ut.psv)||void 0===Hl||Hl.setHigherContrast(!0))}render(){var at,st,ot,Hl;return ut.qy`
			<div class="pnx-input-range" title="${null===(at=this._parent)||void 0===at?void 0:at._t.pnx.sequence_speed}">
				${(0,wc.fa)(oc.rO)}
				<input
					id="pnx-player-speed"
					type="range" name="speed"
					min="0" max="${_c.Vf-100}"
					value="${_c.Vf-(null===(st=this._parent)||void 0===st?void 0:st.psv.getTransitionDuration())}"
					title="${null===(ot=this._parent)||void 0===ot?void 0:ot._t.pnx.sequence_speed}"
					style="width: 100%;"
					@change=${this._onSpeedChange}
				/>
				${(0,wc.fa)(rc.KM)}
			</div>
			<pnx-button
				id="pnx-player-contrast"
				title="${null===(Hl=this._parent)||void 0===Hl?void 0:Hl._t.pnx.contrast}"
				kind="outline"
				@click=${this._onContrastClick}
			>
				${(0,wc.fa)(sc.rC)}
			</pnx-button>
		`}}PlayerOptions.styles=[Hl.Op,ut.AH`
		:host {
			display: flex;
			flex-direction: row;
			align-items: center;
			justify-content: center;
			gap: 15px;
			padding: 5px 15px;
		}

		.pnx-input-range {
			display: flex;
			justify-content: space-between;
			gap: 10px;
			align-items: center;
			width: 100%;
		}
	`],customElements.define("pnx-player-options",PlayerOptions)},5187:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>QualityScoreDoc});var ut=ot(4542),Hl=ot(8591),rc=ot(5995),sc=ot(3233);class QualityScoreDoc extends ut.WF{render(){var at,st,ot,Hl,oc;return ut.qy`
			<h4>${(0,rc.fa)(sc.B9)} ${null===(at=this._t)||void 0===at?void 0:at.pnx.qualityscore_title}</h4>
			<p>${null===(st=this._t)||void 0===st?void 0:st.pnx.qualityscore_doc_1}</p>
			<p>${null===(ot=this._t)||void 0===ot?void 0:ot.pnx.qualityscore_doc_2}</p>
			<pnx-quality-score grade="5"></pnx-quality-score>
			<p>${null===(Hl=this._t)||void 0===Hl?void 0:Hl.pnx.qualityscore_doc_3}</p>
			<pnx-link-button
				href="https://docs.panoramax.fr/pictures-metadata/quality_score/"
				target="_blank"
				kind="outline"
				style="width: 100%"
			>${null===(oc=this._t)||void 0===oc?void 0:oc.pnx.qualityscore_doc_link}</pnx-link-button>
		`}}QualityScoreDoc.styles=[Hl.YC,Hl.Op],customElements.define("pnx-quality-score-doc",QualityScoreDoc)},9588:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>ReportForm});var ut=ot(4542),Hl=ot(8591),rc=ot(5995),sc=ot(4881),oc=ot(6311),_c=ot(7516),wc=ot(2975),Sc=ot(1708),iu=ot(7343);const su=["","blur_missing","blur_excess","inappropriate","privacy","picture_low_quality","mislocated","copyright","other"];class ReportForm extends ut.WF{_onSubmit(at){var st,ot,ut,Hl;at.preventDefault();const rc=null===(st=this._parent)||void 0===st||null===(ot=st.psv)||void 0===ot?void 0:ot.getPictureMetadata(),sc=Object.fromEntries(new FormData(at.target)),oc={issue:sc.issue,picture_id:sc["whole-sequence"]?null:null===rc||void 0===rc?void 0:rc.id,reporter_comments:sc.comments,reporter_email:sc.email,sequence_id:null===rc||void 0===rc||null===(ut=rc.sequence)||void 0===ut?void 0:ut.id};this.mode="wait",null===(Hl=this._parent)||void 0===Hl||Hl.api.sendReport(oc).then((()=>{this.mode="success"})).catch((at=>{console.error(at),this.mode="failure",this.failure=at}))}render(){var at,st,ot,Hl,lu,cu,uu,pu,mu,gu;const Au=(0,iu.getUserAccount)();var yu,_u,xu,Su;return this.mode?ut.qy`
				<h4>${(0,rc.fa)(oc.JA)} ${null===(yu=this._parent)||void 0===yu?void 0:yu._t.pnx.report}</h4>
				<p>
					${"wait"===this.mode?null===(_u=this._parent)||void 0===_u?void 0:_u._t.pnx.report_wait:ut.s6}
					${"success"===this.mode?null===(xu=this._parent)||void 0===xu?void 0:xu._t.pnx.report_success:ut.s6}
					${"failure"===this.mode?null===(Su=this._parent)||void 0===Su?void 0:Su._t.pnx.report_failure.replace("{e}",this.failure):ut.s6}
				</p>
			`:ut.qy`
			<h4>${(0,rc.fa)(oc.JA)} ${null===(at=this._parent)||void 0===at?void 0:at._t.pnx.report}</h4>

			${Au&&null!==(st=this._parent)&&void 0!==st&&st._t?ut.qy`
				<p>${null===(ot=this._parent)||void 0===ot?void 0:ot._t.pnx.report_auth.replace("{a}",Au.name)}</p>
			`:ut.s6}

			<form @submit=${this._onSubmit.bind(this)}>
				<div class="group">
					<label for="issue">${(0,rc.fa)(_c.faCircleInfo)} ${null===(Hl=this._parent)||void 0===Hl?void 0:Hl._t.pnx.report_nature_label}</label>
					<select name="issue" id="issue" required class="pnx-100w">
						${su.map((at=>{var st;return ut.qy`
							<option
								value=${at}
								${""===at?ut.qy`disabled selected hidden`:ut.s6}
							>
								${null===(st=this._parent)||void 0===st?void 0:st._t.pnx.report_nature[at]}
							</option>
						`}))}
					</select>
				</div>

				<div class="group group-inline">
					<input name="whole-sequence" id="whole-sequence" type="checkbox" />
					<label for="whole-sequence">${null===(lu=this._parent)||void 0===lu?void 0:lu._t.pnx.report_whole_sequence}</label>
				</div>

				<div class="group">
					<label for="comments">${(0,rc.fa)(wc.Be)} ${null===(cu=this._parent)||void 0===cu?void 0:cu._t.pnx.report_details}</label>
					<textarea name="comments" id="comments" placeholder=${null===(uu=this._parent)||void 0===uu?void 0:uu._t.pnx.report_details_placeholder}></textarea>
				</div>

				${Au?ut.s6:ut.qy`
					<div class="group">
						<label for="email">${(0,rc.fa)(sc.Hz)} ${null===(pu=this._parent)||void 0===pu?void 0:pu._t.pnx.report_email}</label>
						<input type="email" name="email" id="email" placeholder=${null===(mu=this._parent)||void 0===mu?void 0:mu._t.pnx.report_email_placeholder} class="pnx-100w" />
					</div>
				`}

				<pnx-button type="submit" style="width: 100%">
					${(0,rc.fa)(Sc.is)} ${null===(gu=this._parent)||void 0===gu?void 0:gu._t.pnx.report_submit}
				</pnx-button>
			</form>
		`}}ReportForm.styles=[Hl.YC,Hl.Op,Hl.Lt,Hl.PC,Hl.hF,ut.AH`
		.group {
			margin-bottom: 10px;
		}

		.group:not(.group-inline) label {
			margin-bottom: 5px;
			display: inline-block;
		}
	`],ReportForm.properties={mode:{state:!0},failure:{state:!0}},customElements.define("pnx-report-form",ReportForm)},7694:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>SemanticsMetadata});var ut=ot(4542),Hl=ot(5995),rc=ot(7321),sc=ot(1372),oc=ot(2255),_c=ot(3624),wc=ot(174),Sc=ot(6627),iu=ot(508),su=ot(8591),lu=ot(7343);class SemanticsMetadata extends ut.WF{constructor(){super(),this._meta={},this._prevPSVPicNav=null,this._authUrl=null,this._editPicSem=!1,this._editedPicSemTags=null,this._addPicAnnot=!1,this._addPicAnnotGeom=null,this._addPicAnnotGeomOK=!1,this._editPicAnnot=null,this._editedAnnotSemTags=null}connectedCallback(){super.connectedCallback(),(0,Hl.onceParentAvailable)(this).then((()=>{var at,st,ot,ut;this._meta=null===(at=this._parent)||void 0===at||null===(st=at.psv)||void 0===st?void 0:st.getPictureMetadata(),null===(ot=this._parent)||void 0===ot||null===(ut=ot.oncePSVReady)||void 0===ut||ut.call(ot).then((()=>{this._parent.psv.addEventListener("picture-loaded",(()=>{this._meta=this._parent.psv.getPictureMetadata()})),this._parent.psv.addEventListener("annotation-focused",(()=>{const at=this.shadowRoot.querySelector("pnx-tabs");at&&at.setAttribute("activeTabIndex",4)}))})),this._parent.api.getAuthURL().then((at=>this._authUrl=at))}))}_blockPicChange(at){at?(this._prevPSVPicNav=this._parent.psv.getPicturesNavigation(),this._parent.psv.setPicturesNavigation("pic"),this._parent._disableKeyboard(),window.addEventListener("beforeunload",this._onBrowserQuit)):(this._parent.psv.setPicturesNavigation(this._prevPSVPicNav),this._parent._enableKeyboard(),window.removeEventListener("beforeunload",this._onBrowserQuit))}_onBrowserQuit(at){at.preventDefault(),at.returnValue=!0}_checkCanEdit(){return!this._meta.origInstance&&null!==(0,lu.getUserAccount)()||!!confirm(((null===(at=this._parent)||void 0===at?void 0:at._t.pnx.semantics_login_needed)||"").replace("{n}",this._parent.api._metadata.name))&&void(window.location.href=this._authUrl.replace("<CBURL>",encodeURIComponent(window.location.href)));var at}_onStartEditPicSem(){this._checkCanEdit()&&(this._editedPicSemTags=null,this._editPicSem=!0,this._blockPicChange(!0))}_onPicSemEditorChange(at){this._editedPicSemTags=at.detail}_onSavePicSem(){var at;const st=this.renderRoot.querySelector("#pnx-sem-pic-editor");var ot;st&&st.checkValidity()?null===(at=this._parent)||void 0===at||at.api.sendPictureSemantics(this._meta,this._editedPicSemTags.delta).then((at=>{var st;this._meta.properties.semantics=at.properties.semantics,this._editPicSem=!1,alert(null===(st=this._parent)||void 0===st?void 0:st._t.pnx.semantics_send_ok)})).catch((at=>{var st;this._editPicSem=!1,alert(null===(st=this._parent)||void 0===st?void 0:st._t.pnx.semantics_send_fail),console.error("Can't send semantics",at)})).finally((()=>{this._blockPicChange(!1)})):alert(null===(ot=this._parent)||void 0===ot?void 0:ot._t.pnx.semantics_cantsave_invalid)}_onCancelEditPicSem(){this._editPicSem=!1,this._blockPicChange(!1)}_onStartAddAnnotation(){this._checkCanEdit()&&(this._blockPicChange(!0),this._addPicAnnot=!0,this._addPicAnnotGeom=null,this._addPicAnnotGeomOK=!1,this._editPicAnnot=null,this._editedAnnotSemTags=null,this._addPicAnnotListener=at=>this._addPicAnnotGeom=at.detail.shape,this._parent.psv.addEventListener("annotation-drawn",this._addPicAnnotListener),this._parent.psv.startDrawAnnotation())}_onSaveDrawnPicAnnot(){var at;this._addPicAnnotGeom?(this._addPicAnnotGeomOK=!0,this._parent.psv.fixDrawAnnotation()):alert(null===(at=this._parent)||void 0===at?void 0:at._t.pnx.semantics_save_drawn_annotation_incomplete)}_onEditAnnotation(at){this._checkCanEdit()&&(this._editPicAnnot=at.detail.annotation,this._parent.psv.focusOnAnnotation(at.detail.annotation.id,!0))}_onEditAnnotTagsChange(at){this._editedAnnotSemTags=at.detail}_onSaveEditAnnot(){const at=this.renderRoot.querySelector("#pnx-edit-annot-sem-editor");var st,ot;if(at&&at.checkValidity()&&this._editedAnnotSemTags){if(this._addPicAnnot)null===(st=this._parent)||void 0===st||st.api.createPictureAnnotation(this._meta,this._addPicAnnotGeom,this._editedAnnotSemTags.delta).then((at=>{var st;this._meta.properties.annotations.push(at),alert(null===(st=this._parent)||void 0===st?void 0:st._t.pnx.semantics_send_ok),this._onCancelEditPicAnnot(at.id)})).catch((at=>{var st;console.error("Can't send annotation",at),alert(null===(st=this._parent)||void 0===st?void 0:st._t.pnx.semantics_send_fail),this._onCancelEditPicAnnot()}));else if(this._editPicAnnot){var ut;null===(ut=this._parent)||void 0===ut||ut.api.editPictureAnnotation(this._editPicAnnot.id,this._editedAnnotSemTags.delta).then((at=>{var st;const ot=this._meta.properties.annotations.findIndex((st=>st.id===at.id));this._meta.properties.annotations[ot]=at,alert(null===(st=this._parent)||void 0===st?void 0:st._t.pnx.semantics_send_ok)})).catch((at=>{var st;console.error("Can't send annotation",at),alert(null===(st=this._parent)||void 0===st?void 0:st._t.pnx.semantics_send_fail)})).finally((()=>{this._onCancelEditPicAnnot(this._editPicAnnot.id)}))}}else alert(null===(ot=this._parent)||void 0===ot?void 0:ot._t.pnx.semantics_cantsave_invalid)}_onCancelEditPicAnnot(){let at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this._addPicAnnot=!1,this._addPicAnnotGeom=null,this._addPicAnnotGeomOK=!1,this._editPicAnnot=null,this._editedAnnotSemTags=null,this._parent.psv.stopDrawAnnotation(),this._parent.psv.removeEventListener("annotation-drawn",this._addPicAnnotListener),this._parent.psv.toggleAllAnnotations(!0),this._blockPicChange(!1),at&&this._parent.psv.focusOnAnnotation(at)}_onDeleteAnnotation(at){var st,ot;this._checkCanEdit()&&(confirm(null===(st=this._parent)||void 0===st?void 0:st._t.pnx.semantics_delete_annotation_confirm)&&(null===(ot=this._parent)||void 0===ot||ot.api.deletePictureAnnotation(at.detail.annotation.id).then((()=>{var st,ot;const ut=Object.assign({},this._meta);ut.properties.annotations=this._meta.properties.annotations.filter((st=>st.id!=at.detail.annotation.id)),this._meta=ut,this._parent.psv.toggleAllAnnotations(!0),null===(st=this.renderRoot.querySelector("pnx-annotations-list"))||void 0===st||st._onPicChange(),alert(null===(ot=this._parent)||void 0===ot?void 0:ot._t.pnx.semantics_send_ok)})).catch((at=>{var st;console.error("Can't send annotation",at),alert(null===(st=this._parent)||void 0===st?void 0:st._t.pnx.semantics_send_fail)}))))}render(){var at,st,ot,su,cu,uu,pu,mu,gu,Au,yu,_u,xu,Su,Du,Lu,$u,hh,ed;if(null===(at=this._meta)||void 0===at||!at.properties)return;const td=(0,iu.getHashTags)(this._meta),id=!this._meta.origInstance&&(this._authUrl||null!==(0,lu.getUserAccount)());return ut.qy`
			${td.length>0?ut.qy`
				<div class="data-block">
					<h5>${null===(st=this._parent)||void 0===st?void 0:st._t.pnx.semantics_hashtags}</h5>
					<div>${td.join(" ")}</div>
				</div>
			`:ut.s6}

			${this._addPicAnnot||this._editPicAnnot?ut.s6:ut.qy`<div class="data-block">
				<h5>
					${null===(ot=this._parent)||void 0===ot?void 0:ot._t.pnx.semantics_tags_picture}

					${id&&this._editPicSem?ut.qy`<pnx-button-group style="display: inline-block; vertical-align: middle;">
							<pnx-button
								kind="fullsuccess"
								style="margin-right: 3px"
								title=${null===(su=this._parent)||void 0===su?void 0:su._t.pnx.semantics_save}
								@click=${this._onSavePicSem}
							>
								${(0,Hl.fa)(oc.jk)}
							</pnx-button>
							<pnx-button
								kind="fullwarn"
								title=${null===(cu=this._parent)||void 0===cu?void 0:cu._t.pnx.semantics_undo}
								@click=${this._onCancelEditPicSem}
							>
								${(0,Hl.fa)(_c.GR)}
							</pnx-button>
						</pnx-button-group>`:id?ut.qy`<pnx-button
							kind="full"
							title=${null===(uu=this._parent)||void 0===uu?void 0:uu._t.pnx.semantics_edit}
							@click=${this._onStartEditPicSem}
						>
							${(0,Hl.fa)(rc.hp)}
						</pnx-button>`:""}
				</h5>
				<div>
					${this._editPicSem?ut.qy`
						<pnx-semantics-editor
							id="pnx-sem-pic-editor"
							.semantics=${this._editedPicSemTags?this._editedPicSemTags.semantics:this._meta.properties.semantics}
							._t=${this._parent._t}
							@change=${this._onPicSemEditorChange}
						></pnx-semantics-editor>
					`:ut.qy`
						${(null===(pu=this._meta.properties.semantics)||void 0===pu?void 0:pu.length)>0?ut.qy`
							<pnx-semantics-table
								._t=${null===(mu=this._parent)||void 0===mu?void 0:mu._t}
								.source=${this._meta.properties}
								style="margin-top: 5px"
							/>`:null===(gu=this._parent)||void 0===gu?void 0:gu._t.pnx.semantics_tags_picture_none}
					`}
				</div>
			</div>`}

			${this._editPicSem?ut.s6:ut.qy`
				${this._addPicAnnot||this._editPicAnnot?ut.s6:ut.qy`<hr/>`}

				<div class="data-block"><h5>
					${null===(Au=this._parent)||void 0===Au?void 0:Au._t.pnx.semantics_features}

					${!id||this._addPicAnnot||this._editPicAnnot?"":ut.qy`<pnx-button
							kind="full"
							title=${null===(yu=this._parent)||void 0===yu?void 0:yu._t.pnx.semantics_add_annotation}
							@click=${this._onStartAddAnnotation}
						>
							${(0,Hl.fa)(sc.QL)}
						</pnx-button>`}

					${this._addPicAnnot&&this._addPicAnnotGeomOK||this._editPicAnnot?ut.qy`<pnx-button-group>
							<pnx-button
								kind="fullsuccess"
								style="margin-right: 3px"
								title=${null===(_u=this._parent)||void 0===_u?void 0:_u._t.pnx.semantics_save}
								@click=${this._onSaveEditAnnot}
							>
								${(0,Hl.fa)(oc.jk)}
							</pnx-button>
							<pnx-button
								kind="fullwarn"
								title=${null===(xu=this._parent)||void 0===xu?void 0:xu._t.pnx.semantics_undo}
								@click=${()=>this._onCancelEditPicAnnot(this._editPicAnnot?this._editPicAnnot.id:null)}
							>
								${(0,Hl.fa)(_c.GR)}
							</pnx-button>
						</pnx-button-group>`:""}
				</h5>

				${this._addPicAnnot&&!this._addPicAnnotGeomOK?ut.qy`
					<div>
						${null===(Su=this._parent)||void 0===Su?void 0:Su._t.pnx.semantics_draw_annotation}
					</div>
					<div style="display: flex; gap: 5px">
						<pnx-button
							kind="fullsuccess"
							style="flex: 1"
							@click=${this._onSaveDrawnPicAnnot}
						>
							${(0,Hl.fa)(wc.e6)} ${null===(Du=this._parent)||void 0===Du?void 0:Du._t.pnx.semantics_save_drawn_annotation}
						</pnx-button>
						<pnx-button
							kind="fullwarn"
							style="flex: 1"
							@click=${()=>this._onCancelEditPicAnnot()}
						>
							${(0,Hl.fa)(Sc.faXmark)} ${null===(Lu=this._parent)||void 0===Lu?void 0:Lu._t.pnx.semantics_undo_drawn_annotation}
						</pnx-button>
					</div>`:ut.s6}

				${this._editPicAnnot||this._addPicAnnot&&this._addPicAnnotGeomOK?ut.qy`
					<pnx-semantics-editor
						id="pnx-edit-annot-sem-editor"
						.semantics=${(null===($u=this._editPicAnnot)||void 0===$u?void 0:$u.semantics)||[]}
						._t=${this._parent._t}
						@change=${this._onEditAnnotTagsChange}
					></pnx-semantics-editor>`:ut.s6}

				${this._addPicAnnot||this._editPicAnnot?ut.s6:ut.qy`
					<div>${(null===(hh=this._meta.properties.annotations)||void 0===hh?void 0:hh.length)>0?ut.qy`<pnx-annotations-list
							.editable=${id}
							@edit-click=${this._onEditAnnotation}
							@delete-click=${this._onDeleteAnnotation}
							._parent=${this._parent}
						/>`:null===(ed=this._parent)||void 0===ed?void 0:ed._t.pnx.semantics_features_none}
					</div>
				`}

			</div>`}
		`}}SemanticsMetadata.styles=[su.R,su.Tk,ut.AH`
		.data-block {
			width: 100%;
		}
		.data-block h5 {
			justify-content: space-between;
		}
		hr {
			margin: 0 -10px;
			height: 8px;
			background: white;
			border: none;
		}
	`],SemanticsMetadata.properties={_meta:{state:!0},_prevPSVPicNav:{state:!0},_authUrl:{state:!0},_editPicSem:{state:!0},_editedPicSemTags:{state:!0},_addPicAnnot:{state:!0},_addPicAnnotGeom:{state:!0},_addPicAnnotGeomOK:{state:!0},_editPicAnnot:{state:!0},_editedAnnotSemTags:{state:!0}},customElements.define("pnx-semantics-metadata",SemanticsMetadata)},3765:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>ShareMenu});var ut=ot(4542),Hl=ot(5995),rc=ot(8591),sc=ot(2e3),oc=ot(7516),_c=ot(6002),wc=ot(7964);class ShareMenu extends ut.WF{constructor(){super(),this._onUrlChange()}connectedCallback(){super.connectedCallback(),(0,Hl.onceParentAvailable)(this).then((()=>this._parent.onceReady())).then((()=>{this._onUrlChange(),this._parent.urlHandler.addEventListener("url-changed",this._onUrlChange.bind(this))}))}_onUrlChange(){var at,st;const ot=window.location.href.replace(/\/$/,"");this._url=(null===(at=this._parent)||void 0===at||null===(st=at.urlHandler)||void 0===st?void 0:st.nextShortLink(ot))||ot}render(){var at,st,ot,rc,Sc,iu;const su=`<iframe src="${this._url}" style="border: none; width: 500px; height: 300px"></iframe>`;return ut.qy`
			<h4>${(0,Hl.fa)(_c.QO)} ${null===(at=this._parent)||void 0===at?void 0:at._t.pnx.share}</h4>
			<pnx-tabs>
				<h4 slot="title">${(0,Hl.fa)(wc.CQ)} ${null===(st=this._parent)||void 0===st?void 0:st._t.pnx.share_page}</h4>
				<div slot="content">
					<div class="links">
						<input type="text" readonly value=${this._url} style="flex: 2" />
						<pnx-copy-button ._t=${null===(ot=this._parent)||void 0===ot?void 0:ot._t} text=${this._url}></pnx-copy-button>
					</div>
				</div>
					
				<h4 slot="title">${(0,Hl.fa)(sc.e5)} ${null===(rc=this._parent)||void 0===rc?void 0:rc._t.pnx.share_embed}</h4>
				<div slot="content">
					<div class="embed">
						<pnx-link-button
							href="https://docs.panoramax.fr/web-viewer/03_URL_settings/"
							target="_blank"
							kind="superinline"
							size="sm"
						>
							${(0,Hl.fa)(oc.faCircleInfo)} ${null===(Sc=this._parent)||void 0===Sc?void 0:Sc._t.pnx.share_embed_docs}
						</pnx-link-button>
						<textarea readonly .value=${su}></textarea>
						<pnx-copy-button
							._t=${null===(iu=this._parent)||void 0===iu?void 0:iu._t}
							text=${su}
							style="width: 100%"
						></pnx-copy-button>
					</div>
				</div>
			</pnx-tabs>`}}ShareMenu.styles=[rc.Op,rc.hF,rc.PC,rc.YC,ut.AH`
		div[slot="content"] {
			margin-top: 10px;
		}
		.links {
			display: flex;
			gap: 5px;
		}
		.embed {
			display: flex;
			gap: 5px;
			align-items: center;
			flex-direction: column;
		}
	`],ShareMenu.properties={_url:{state:!0}},customElements.define("pnx-share-menu",ShareMenu)},8794:(at,st,ot)=>{"use strict";ot.r(st),ot.d(st,{AnnotationsList:()=>ut.A,MapBackground:()=>Hl.A,MapFilters:()=>rc.A,MapLayers:()=>sc.A,MapLegend:()=>oc.A,MiniPictureLegend:()=>_c.A,PictureLegend:()=>wc.A,PictureMetadata:()=>Sc.A,PlayerOptions:()=>iu.A,QualityScoreDoc:()=>su.A,ReportForm:()=>lu.A,SemanticsMetadata:()=>cu.A,Share:()=>uu.A});var ut=ot(1208),Hl=ot(5036),rc=ot(3581),sc=ot(5334),oc=ot(4749),_c=ot(1636),wc=ot(3589),Sc=ot(6993),iu=ot(499),su=ot(5187),lu=ot(9588),cu=ot(7694),uu=ot(3765)},8591:(at,st,ot)=>{"use strict";ot.d(st,{BQ:()=>uu,HM:()=>Sc,Lt:()=>_c,Op:()=>sc,PC:()=>oc,R:()=>rc,Tk:()=>gu,YC:()=>su,hF:()=>wc,kq:()=>iu,nd:()=>Hl,qf:()=>cu,s0:()=>lu,tp:()=>pu,wS:()=>mu});var ut=ot(4542);const Hl=ut.AH`
	.pnx-panel {
		position: absolute;
		transition: opacity 0.2s 0.1s;
		border-radius: 25px;
		border: 1px solid var(--widget-border-div);
		background-color: var(--widget-bg);
		color: var(--widget-font);
		min-width: 250px;
		box-sizing: border-box;
		font-family: var(--font-family);
	}

	.pnx-panel.pnx-hidden {
		opacity: 0;
		display: block !important;
		pointer-events: none;
	}

	.pnx-panel.pnx-padded {
		padding: 15px;
	}
`,rc=ut.AH`
	.pnx-hidden { display: none !important; }
`,sc=ut.AH`
	.svg-inline--fa {
		display: var(--fa-display, inline-block);
		height: 1em;
		overflow: visible;
		vertical-align: -0.125em;
	}
	svg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {
		overflow: visible;
		box-sizing: content-box;
	}
	@keyframes fa-spin {
		from {transform:rotate(0deg);}
		to {transform:rotate(360deg);}
	}
	.fa-spin {
		animation: fa-spin 2s infinite linear;
	}
`,oc=ut.AH`
	textarea {
		background-color: var(--widget-bg);
		color: var(--widget-font);
		border: 1px solid var(--widget-border-div);
		border-radius: 10px;
		padding: 5px;
		width: 100%;
		box-sizing: border-box;
		font-family: var(--font-family);
		resize: vertical;
	}
`,_c=ut.AH`
	select {
		background-color: var(--widget-bg);
		color: var(--widget-font);
		border: 1px solid var(--widget-border-div);
		border-radius: 20px;
		font-size: 16px;
		padding: 2px 10px;
		font-family: var(--font-family);
	}

	select.pnx-100w {
		width: 100%;
		box-sizing: border-box;
	}
`,wc=ut.AH`
	input {
		background-color: var(--widget-bg);
		color: var(--widget-font);
		border: 1px solid var(--widget-border-div);
		border-radius: 20px;
		font-size: 16px;
		padding: 2px 10px;
		font-family: var(--font-family);
	}

	input.pnx-100w {
		width: 100%;
		box-sizing: border-box;
	}
`,Sc=ut.AH`
	:host {
		display: inline-flex;
	}
	
	/* Common properties */
	.pnx-btn {
		white-space: nowrap;
		font-size: 1em;
		font-family: var(--font-family);
		flex-grow: 1;
		flex-shrink: 1;
		text-align: center;
		padding: 5px;
		font-weight: 600;
		flex-basis: 30%;
		line-height: 18px;
		justify-content: center;
		border-radius: 8px;
		cursor: pointer;
		text-decoration: none;
		display: inline-flex;
		align-items: center;
		gap: 5px;
		position: relative;
		width: 100%;
		height: 100%;
		min-width: 26px;
	}

	.pnx-btn:disabled { color: var(--widget-bg-inactive); }

	.pnx-btn.pnx-btn-active,
	.pnx-btn.pnx-btn-active:hover,
	.pnx-btn.pnx-btn-full.pnx-btn-active:hover,
	.pnx-btn.pnx-btn-outline.pnx-btn-active:hover {
		background-color: var(--widget-bg-active);
		border-color: var(--widget-bg-active);
		color: var(--widget-font-active);
	}

	.pnx-btn .svg-inline--fa,
	.pnx-btn ::slotted(.svg-inline--fa),
	.pnx-btn slot .svg-inline--fa {
		height: 16px;
		pointer-events: none;
	}

	/* Sizing */
	.pnx-btn-sm {
		border-radius: 6px;
		line-height: 12px;
		font-size: 12px;
		min-width: unset;
	}

	.pnx-btn.pnx-btn-sm .svg-inline--fa,
	.pnx-btn.pnx-btn-sm ::slotted(.svg-inline--fa) {
		height: 12px;
	}

	.pnx-btn-l {
		border-radius: 12px;
		height: 24px;
		line-height: 24px;
		font-size: 20px;
		min-width: 24px;
	}

	.pnx-btn-xl {
		border-radius: 20px;
		height: 40px;
		line-height: 40px;
		font-size: 16px;
		font-weight: 500;
		min-width: 40px;
		padding: 0 10px;
		gap: 8px;
	}

	.pnx-btn.pnx-btn-xl .svg-inline--fa,
	.pnx-btn.pnx-btn-xl ::slotted(.svg-inline--fa) {
		height: 16px;
	}

	.pnx-btn-xxl {
		border-radius: 28px;
		height: 56px;
		line-height: 56px;
		font-size: 24px;
		min-width: 56px;
	}

	.pnx-btn.pnx-btn-xxl .svg-inline--fa,
	.pnx-btn.pnx-btn-xxl ::slotted(.svg-inline--fa) {
		height: 24px;
	}

	/* Fully-filled style */
	.pnx-btn-full {
		background-color: var(--widget-bg-primary);
		color: var(--widget-font-direct);
		border: none;
	}

	.pnx-btn-full:not(:disabled):hover {
		background-color: var(--widget-bg-primary-hover);
	}

	/* Fully-filled warning style */
	.pnx-btn-fullwarn {
		background-color: var(--widget-bg-warn);
		color: var(--widget-font-warn);
		border: none;
	}

	.pnx-btn-fullwarn:not(:disabled):hover {
		background-color: var(--widget-bg-warn);
	}

	/* Fully-filled success style */
	.pnx-btn-fullsuccess {
		background-color: var(--widget-bg-success);
		color: var(--widget-font-success);
		border: none;
	}

	.pnx-btn-fullsuccess:not(:disabled):hover {
		background-color: var(--widget-bg-success);
	}

	/* Outline style */
	.pnx-btn-outline {
		border: 1px solid var(--widget-border-btn);
		color: var(--widget-font-direct);
		background-color: var(--widget-bg);
	}

	.pnx-btn-outline:not(:disabled):hover {
		background-color: var(--widget-bg-hover);
	}

	/* Flat style */
	.pnx-btn-flat,
	.pnx-btn-flat.pnx-btn-active,
	.pnx-btn-flat.pnx-btn-active:hover,
	.pnx-btn-flat:not(:disabled):hover {
		border: 1px solid var(--widget-border-div);
		color: var(--widget-font);
		background-color: var(--widget-bg);
	}

	.pnx-btn-flat:not(:disabled):hover {
		background-color: var(--widget-bg-hover);
	}

	/* Superflat style */
	.pnx-btn-superflat,
	.pnx-btn-superflat.pnx-btn-active,
	.pnx-btn-superflat.pnx-btn-active:hover,
	.pnx-btn-superflat:not(:disabled):hover {
		border: 1px solid var(--widget-border-div);
		color: var(--widget-font-direct);
		background-color: var(--widget-bg);
	}

	.pnx-btn-superflat:not(:disabled):hover {
		background-color: var(--widget-bg-hover);
	}

	/* Inline style */
	.pnx-btn-inline,
	.pnx-btn-inline.pnx-btn-active,
	.pnx-btn-inline.pnx-btn-active:hover,
	.pnx-btn-inline:not(:disabled):hover,
	.pnx-btn-superinline,
	.pnx-btn-superinline.pnx-btn-active,
	.pnx-btn-superinline.pnx-btn-active:hover,
	.pnx-btn-superinline:not(:disabled):hover {
		border: none;
		color: var(--widget-font);
		background: none;
	}

	.pnx-btn-inline:not(:disabled):hover,
	.pnx-btn-superinline:not(:disabled):hover {
		background-color: var(--widget-bg-hover);
	}

	/* Superinline style */
	.pnx-btn-superinline,
	.pnx-btn-superinline.pnx-btn-active,
	.pnx-btn-superinline.pnx-btn-active:hover,
	.pnx-btn-superinline:not(:disabled):hover {
		color: var(--widget-font-direct);
	}
`,iu=ut.AH`
	pnx-button-group > pnx-button {
		display: inline-flex;
	}

	pnx-button-group > pnx-button::part(btn) {
		height: unset;
	}

	/* Togglable in group */
	pnx-button-group > pnx-togglable-group > pnx-button {
		width: 100%;
		height: 100%;
	}

	/* Row */
	pnx-button-group[dir="row"] > :not(:first-child):not(:last-child)::part(btn),
	pnx-button-group[dir="row"] > :not(:first-child):not(:last-child) > ::part(btn) {
		border-radius: 0;
		border-left: none;
		border-right: none;
	}

	pnx-button-group[dir="row"] > :first-child::part(btn),
	pnx-button-group[dir="row"] > :first-child > ::part(btn) {
		border-top-right-radius: 0;
		border-bottom-right-radius: 0;
		border-right: none;
	}

	pnx-button-group[dir="row"] > :last-child::part(btn),
	pnx-button-group[dir="row"] > :last-child > ::part(btn) {
		border-top-left-radius: 0;
		border-bottom-left-radius: 0;
		border-left: none;
	}

	/* Column */
	pnx-button-group[dir="column"] > :not(:first-child):not(:last-child)::part(btn),
	pnx-button-group[dir="column"] > :not(:first-child):not(:last-child) > ::part(btn) {
		border-radius: 0;
		border-top: none;
		border-bottom: none;
	}

	pnx-button-group[dir="column"] > :first-child::part(btn),
	pnx-button-group[dir="column"] > :first-child > ::part(btn) {
		border-bottom-right-radius: 0;
		border-bottom-left-radius: 0;
		border-bottom: none;
	}

	pnx-button-group[dir="column"] > :last-child::part(btn),
	pnx-button-group[dir="column"] > :last-child > ::part(btn) {
		border-top-left-radius: 0;
		border-top-right-radius: 0;
		border-top: none;
	}
`,su=ut.AH`
	h1, h2, h3, h4, h5, h6 {
		font-family: var(--font-family);
	}
	
	h3 {
		font-size: 1.1em;
		line-height: 1.1em;
		font-weight: 500;
		margin: 10px 0 10px 0;
	}

	h4 {
		font-size: 1.0em;
		line-height: 1.0em;
		font-weight: 500;
		margin: 15px 0;
		display: flex;
		align-items: center;
		justify-content: flex-start;
		gap: 5px;
	}

	h4:first-of-type { margin-top: 0; }

	h4 > svg.svg-inline--fa {
		height: 18px;
	}

	h4[slot="title"] {
		margin: 0;
		justify-content: center;
		font-size: 0.8em;
		line-height: 2em;
		padding: 0.5em 0;
	}
	h4[slot="title"] svg.svg-inline--fa {
		height: 14px;
	}
`,lu=ut.AH`
	.pnx-active-icon {
		box-sizing: border-box;
		background-color: var(--orange);
		border: 3px solid #fff;
		border-radius: 8px;
		height: 15px;
		left: 20px;
		position: absolute;
		top: 5px;
		width: 15px;
	}
`,cu=ut.AH`
	@keyframes animatedBackground {
		from {
			background-position: 0 0;
		}
		to {
			background-position: 1000px 0;
		}
	}

	.pnx-placeholder-loading {
		width: 100px;
		height: 100px;
		background-image: linear-gradient(
			90deg,
			#e4e4e4 0%,
			#f1f1f1 40%,
			#ededed 60%,
			#e4e4e4 100%
		);
		background-position: 0px 0px;
		background-repeat: repeat;
		animation: animatedBackground 5s linear infinite;
	}
`,uu=(ut.AH`
	details summary {
		font-size: 1.0em;
		line-height: 1.0em;
		font-weight: 500;
		margin: 15px 0;
		cursor: pointer;
	}

	details summary svg {
		height: 18px;
		vertical-align: sub;
		margin-right: 2px;
	}
`,ut.AH`
	@media print {
		.pnx-print-hidden { display: none !important; }
	}
`),pu=ut.AH`
	table {
		border-collapse: collapse;
		font-size: 0.9rem;
		width: 100%;
		max-width: 100%;
		font-family: var(--font-family);
		background: var(--white);
	}

	th, td {
		padding: 10px;
		text-align: left;
		border-bottom: 1px solid #ddd;
	}

	th { font-weight: 600; }
`,mu=ut.AH`
	iconify-icon {
		display: inline-block;
		width: 1em;
		height: 1em;
	}
`,gu=ut.AH`
	.data-block {
		display: inline-block;
		margin: 8px 0;
		box-sizing: border-box;
		vertical-align: top;
	}
	.data-block h5 {
		font-size: 0.8em;
		font-weight: 400;
		color: var(--blue-dark);
		margin: 0 0 5px 0;
		display: flex;
		align-items: center;
		gap: 5px;
	}
	.data-block h5 pnx-button { vertical-align: middle; }
	.data-block h5 svg.svg-inline--fa { height: 14px; }
	.data-block div {
		font-size: 0.8em;
	}
`},6254:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>AnnotationsSwitch});var ut=ot(4542),Hl=ot(5995),rc=ot(6249),sc=ot(6311),oc=ot(508),_c=ot(1198),wc=ot(8591),Sc=ot(7343);class AnnotationsSwitch extends ut.WF{constructor(){super(),this._annotationsToggled=!1,this._warnNoAnnot=!1,this._warnNoAnnotTooltip=!1,this.size="xl"}connectedCallback(){super.connectedCallback(),(0,Hl.onceParentAvailable)(this).then((()=>{this._parent.onceReady().then((()=>{this._parent.psv.addEventListener("annotations-toggled",(at=>{this._annotationsToggled=at.detail.visible,this._persistAnnotationsLocalStorage(this._annotationsToggled)})),this._warnNoAnnot=!(0,oc.hasAnnotations)(this._parent.psv.getPictureMetadata()),this._parent.psv.addEventListener("picture-loaded",(()=>{this._warnNoAnnot=!(0,oc.hasAnnotations)(this._parent.psv.getPictureMetadata())}))})),this._parent.onceFirstPicLoaded().then((()=>{this._annotationsToggled=this._parent.psv.areAnnotationsVisible()||!1,this._persistAnnotationsLocalStorage(this._annotationsToggled)}))}))}_persistAnnotationsLocalStorage(at){localStorage.setItem(Sc.DISABLE_ANNOTATIONS_PARAM,at?"false":"true")}_onClick(){!this._annotationsToggled&&this._warnNoAnnot&&(this._warnNoAnnotTooltip=!0,setTimeout((()=>this._warnNoAnnotTooltip=!1),2e3)),this._persistAnnotationsLocalStorage(!this._annotationsToggled),this._parent.psv.toggleAllAnnotations(!this._annotationsToggled)}render(){var at,st,ot;const oc={"pnx-panel":!0,"pnx-hidden":!this._warnNoAnnotTooltip};return ut.qy`
			<pnx-button
				kind="superflat"
				size=${this.size}
				style="vertical-align: middle"
				class="pnx-print-hidden"
				title=${this._annotationsToggled?null===(at=this._parent._t)||void 0===at?void 0:at.pnx.semantics_hide_annotations:null===(st=this._parent._t)||void 0===st?void 0:st.pnx.semantics_show_annotations}
				active=${this._annotationsToggled?"":ut.s6}
				@click=${this._onClick}
			>
				${(0,Hl.fa)(rc.DX,{styles:{height:"20px"}})}
				${this._warnNoAnnot?(0,Hl.fa)(sc.JA,{classes:"pnx-annotations-switch-empty"}):ut.s6}
			</pnx-button>
			<div
				class=${(0,_c.H)(oc)}
				@click=${()=>this._warnNoAnnotTooltip=!1}
			>
				${null===(ot=this._parent._t)||void 0===ot?void 0:ot.pnx.semantics_zero_annotations}
			</div>
		`}}AnnotationsSwitch.styles=[wc.nd,ut.AH`
		.pnx-panel {
			padding: 5px;
			margin-top: 5px;
			width: max-content;
  			min-width: unset;
		}

		/* Custom button look */
		pnx-button::part(btn) {
			border-radius: 8px;
			height: 26px;
			width: 26px;
		}

		pnx-button[size="xl"]::part(btn) {
			border-radius: 8px;
			height: 38px;
			width: 38px;
		}

		pnx-button[active]::part(btn),
		pnx-button[active]:hover::part(btn) {
			background-color: var(--widget-bg-active) !important;
			border-color: var(--widget-bg-active) !important;
			color: var(--widget-font-active) !important;
		}

		/* No-annotations badge */
		.pnx-annotations-switch-empty {
			position: absolute;
			top: 1px;
			right: 1px;
			color: var(--orange);
			height: 8px;
		}

		pnx-button[size="xl"] .pnx-annotations-switch-empty {
			top: 2px;
			right: 2px;
			height: 12px;
		}

		pnx-button[active] .pnx-annotations-switch-empty {
			color: var(--yellow);
		}
	`],AnnotationsSwitch.properties={size:{type:String},_annotationsToggled:{state:!0},_warnNoAnnot:{state:!0},_warnNoAnnotTooltip:{state:!0}},customElements.define("pnx-annotations-switch",AnnotationsSwitch)},4450:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>Button});var ut=ot(4542),Hl=ot(8591);class Button extends ut.WF{constructor(){super(),this.active=!1,this.disabled=!1,this.kind="full",this.size="md"}connectedCallback(){super.connectedCallback(),"submit"===this.type&&this.addEventListener("click",(()=>{var at;return null===(at=this.closest("FORM"))||void 0===at?void 0:at.requestSubmit()}))}render(){const at=document.createElement("button");at.setAttribute("part","btn"),this.constructor.observedAttributes.filter((at=>void 0!==this[at]&&!1!==this[at]&&!["active","kind","size"].includes(at))).forEach((st=>at.setAttribute(st,this[st]))),at.classList.add("pnx-btn",`pnx-btn-${this.kind}`,`pnx-btn-${this.size}`),this.active&&at.classList.add("pnx-btn-active");const st=document.createElement("slot");return at.appendChild(st),at}}Button.styles=Hl.HM,Button.properties={active:{type:Boolean},kind:{type:String},size:{type:String},disabled:{type:Boolean},type:{type:String},title:{type:String}},customElements.define("pnx-button",Button)},7679:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>ButtonGroup});var ut=ot(4542);ot(1870);class ButtonGroup extends ut.WF{constructor(){super(),this.dir="row",this.size="md"}render(){return ut.qy`<div class="${this.dir} ${this.size}">
			<slot></slot>
		</div>`}}ButtonGroup.styles=ut.AH`
		div {
			display: flex;
			flex-wrap: nowrap;
			align-items: stretch;
			align-content: stretch;
			justify-content: center;
		}

		div.row { flex-direction: row; }
		div.column { flex-direction: column; }

		div.xl { line-height: 38px; font-size: 20px; }
		div.row.xl { height: 38px; }
		div.column.xl { width: 38px; }

		div.row ::slotted(*) { height: 100%; min-width: 24px; }
		div.column ::slotted(*) { width: 100%; min-height: 24px; }

		div.row.xl ::slotted(*) { min-width: 38px; }
		div.column.xl ::slotted(*) { min-height: 38px; }
	`,ButtonGroup.properties={dir:{type:String},size:{type:String}},customElements.define("pnx-button-group",ButtonGroup)},1903:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>CopyButton});var ut=ot(4542),Hl=ot(5995),rc=ot(174),sc=ot(4189),oc=ot(8591),_c=ot(1198);class CopyButton extends ut.WF{constructor(){super(),this.data="",this.input="",this.unstyled=!1,this.kind="full",this.size="md",this._active=!1,this.addEventListener("click",this._onClick)}_onClick(){var at;let st;if(""!==this.input){const at=document.getElementById(this.input);st=at.innerText||at.value}else""!==this.text&&(st=this.text);null!==(at=navigator)&&void 0!==at&&at.clipboard?(navigator.clipboard.writeText(st),this._active=!0,setTimeout((()=>this._active=!1),2e3)):alert("Clipboard is not available")}render(){var at,st;const ot={"pnx-btn":!this.unstyled,"pnx-btn-full":!this.unstyled,"pnx-btn-active":!this.unstyled&&this._active,"pnx-btn-unstyled":this.unstyled,[`pnx-btn-${this.kind}`]:!this.unstyled,[`pnx-btn-${this.size}`]:!this.unstyled};return ut.qy`<button title=${this.title} class=${(0,_c.H)(ot)} part="btn">
			${this._active?ut.qy`${(null===(at=this._t)||void 0===at?void 0:at.pnx.copied)||""} ${(0,Hl.fa)(rc.e6)}`:ut.qy`<slot>${(0,Hl.fa)(sc.jP)} ${(null===(st=this._t)||void 0===st?void 0:st.pnx.copy)||""}</slot>`}
		</button>`}}CopyButton.styles=[oc.Op,oc.HM,ut.AH`
		.pnx-btn-unstyled {
			border: none;
			background: none;
			font-family: var(--font-family);
			font-size: 1em;
			color: var(--widget-font);
			cursor: pointer;
			padding: 0;
			margin: 0;
		}
	`],CopyButton.properties={text:{type:String},input:{type:String},kind:{type:String},size:{type:String},unstyled:{type:Boolean},title:{type:String},_active:{state:!0,type:Boolean}},customElements.define("pnx-copy-button",CopyButton)},5051:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>Grade});var ut=ot(4542),Hl=ot(5995),rc=ot(4780),sc=ot(7325),oc=ot(8591);class Grade extends ut.WF{constructor(){super(),this.stars=0}render(){var at;const st=this.stars||0,ot=[];for(let ut=1;ut<=st;ut++)ot.push((0,Hl.fa)(rc.yy));for(let ut=st+1;ut<=5;ut++)ot.push((0,Hl.fa)(sc.yy));return ut.qy`<span>
			${ot}
		</span> (${this.stars?this.stars+"/5":(null===(at=this._t)||void 0===at?void 0:at.pnx.metadata_quality_missing)||"?"})`}}Grade.styles=[oc.Op,ut.AH`
		span { color: var(--orange); }
	`],Grade.properties={stars:{type:Number}},customElements.define("pnx-grade",Grade)},438:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>LinkButton});var ut=ot(4542),Hl=ot(8591);class LinkButton extends ut.WF{constructor(){super(),this.kind="full",this.size="md"}render(){const at=document.createElement("a");at.setAttribute("part","btn"),this.constructor.observedAttributes.filter((at=>void 0!==this[at])).forEach((st=>at.setAttribute(st,this[st]))),at.classList.add("pnx-btn",`pnx-btn-${this.kind}`,`pnx-btn-${this.size}`);const st=document.createElement("slot");return at.appendChild(st),at}}LinkButton.styles=Hl.HM,LinkButton.properties={href:{type:String},target:{type:String},title:{type:String},download:{type:String},class:{type:String},kind:{type:String},size:{type:String}},customElements.define("pnx-link-button",LinkButton)},5271:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>ListGroup});var ut=ot(4542),Hl=ot(8591);class ListGroup extends ut.WF{render(){return ut.qy`<slot></slot>`}}ListGroup.styles=[Hl.nd,ut.AH`
		:host ::slotted(*) {
			text-decoration: none;
			border: none;
			border-bottom: 1px solid var(--widget-border-div);
			background: none;
			display: block;
			width: 100%;
			color: var(--widget-font);
			font-family: var(--font-family);
			cursor: pointer;
			font-size: 1em;
			font-weight: 400;
			line-height: 18px;
			padding: 5px 10px;
  			min-width: 150px;
			width: 100%;
			text-align: left;
			box-sizing: border-box;
		}

		:host ::slotted(*:hover) {
			background-color: var(--widget-bg-hover);
		}

		:host ::slotted(*:first-child) {
			border-top-left-radius: 5px;
			border-top-right-radius: 5px;
		}

		:host ::slotted(*:last-child) {
			border: none;
			border-bottom-left-radius: 5px;
			border-bottom-right-radius: 5px;
		}
	`],customElements.define("pnx-list-group",ListGroup)},5525:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>ListItem});var ut=ot(4542);class ListItem extends ut.WF{render(){return ut.qy`
			<div class="list-item">
				<div class="icon">
					<slot name="icon"></slot>
				</div>
				<div class="content">
					<div class="title">${this.title}</div>
					<div class="subtitle">${this.subtitle}</div>
				</div>
				<div class="action">
					<slot name="action"></slot>
				</div>
			</div>
		`}}ListItem.styles=ut.AH`
		.list-item {
			display: flex;
			align-items: center;
			padding: 8px 16px;
			cursor: pointer;
			border-bottom: 1px solid #ddd;
			font-family: var(--font-family);
			background: var(--white);
			min-height: 50px;
			box-sizing: border-box;
		}
		.list-item:hover { background: var(--widget-bg-hover); }
		.icon {
			margin-right: 16px;
			display: flex;
			align-items: center;
			gap: 10px;
		}
		.action { margin-left: 16px; }
		.content {
			flex: 1;
		}
		.title {
			font-weight: 600;
		}
		.subtitle {
			font-size: 0.9em;
			color: var(--grey-dark);
		}
	`,ListItem.properties={title:{type:String},subtitle:{type:String}},customElements.define("pnx-list-item",ListItem)},3109:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>Loader});var ut=ot(4542),Hl=ot(2305),rc=ot(5975),sc=ot(7343);class Loader extends ut.WF{constructor(){super(),this.visible=!0,this["no-label"]=!1,this._mode="loading",this._isLabelFun=!1,this.value=-1}connectedCallback(){super.connectedCallback(),this._nextLabel()}isVisible(){return this.visible}dismiss(){let at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,st=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,ot=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(clearTimeout(this._loaderLabelChanger),at){var Hl;!0!==at&&console.error(at);let oc=[null===(Hl=this._parent)||void 0===Hl?void 0:Hl._t.pnx.error,ut.qy`<br />`];var rc,sc;if(st&&oc.push(st,ut.qy`<br />`),ot)oc.push(ut.qy`<pnx-button kind="full">${null===(rc=this._parent)||void 0===rc?void 0:rc._t.pnx.error_click}</pnx-button>`),this.addEventListener("click",ot);else oc.push(ut.qy`<small>${null===(sc=this._parent)||void 0===sc?void 0:sc._t.pnx.error_retry}</small>`);this._mode="error",this._label=oc;const _c=st||"Panoramax JS had a blocking exception",wc=new CustomEvent("broken",{detail:{error:_c}});throw this._parent.dispatchEvent(wc),new Error(_c)}{this.value=100,this._mode="done",this.visible=!1,this.style.transition="all 0.5s",setTimeout((()=>this.parentNode.removeChild(this)),2e3);const at=new CustomEvent("ready");this._parent.dispatchEvent(at),ot&&ot()}}_nextLabel(){var at,st,ot,ut;this._isLabelFun?this._label=null===(at=this._parent)||void 0===at?void 0:at._t.pnx.loading_labels_fun[(0,sc.inRangeRandom)(0,(null===(st=this._parent)||void 0===st?void 0:st._t.pnx.loading_labels_fun.length)-1)]:(this._label=null===(ot=this._parent)||void 0===ot?void 0:ot._t.pnx.loading_labels_serious[(0,sc.inRangeRandom)(0,(null===(ut=this._parent)||void 0===ut?void 0:ut._t.pnx.loading_labels_serious.length)-1)],this._isLabelFun=!0);this._loaderLabelChanger=setTimeout(this._nextLabel.bind(this),(0,sc.inRangeRandom)(500,1500))}render(){var at;return"error"==this._mode?ut.qy`
				<img class="logo-dead" src=${Hl} alt="" title=${null===(at=this._parent)||void 0===at?void 0:at._t.map.loading} />
				${this._label}
			`:ut.qy`
			<pnx-progress-bar .value=${this.value}></pnx-progress-bar>
			${this["no-label"]?ut.s6:ut.qy`<div class="label">${this._label}</div>`}
		`}}Loader.styles=ut.AH`
		:host {
			position: absolute;
			inset: 0;
			display: flex;
			flex-direction: column;
			justify-content: center;
			gap: 10px;
			align-items: center;
			background-image: url('${(0,ut.iz)(rc)}');
			background-repeat: no-repeat;
			background-size: cover;
			background-position: center; 
			z-index: 200;
			font-family: var(--font-family);
			font-weight: 550;
			color: var(--black);
			font-size: 1.4em;
			text-align: center;
			visibility: hidden;
			opacity: 0;
		}
		:host(*[visible]) {
			visibility: visible;
			opacity: 1;
		}

		div.label {
			background-color: rgba(255,255,255,0.5);
			box-shadow: white 0 0 10px;
			padding: 3px 10px;
			border-radius: 50px;
		}
		/* Logo */
		img.logo-dead { width: 100px; }
	`,Loader.properties={_mode:{state:!0},_label:{state:!0},_isLabelFun:{state:!0},visible:{type:Boolean,reflect:!0},"no-label":{type:Boolean},value:{type:Number}},customElements.define("pnx-loader",Loader)},5642:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>Map});ot(3041);var ut=ot(8340),Hl=ot(7343),rc=ot(6883),sc=ot(270),oc=ot(6462),_c=ot(9740),wc=(ot(6795),ot(927)),Sc=ot.n(wc),iu=ot(2968),su=ot.n(iu),lu=ot(748);Sc().workerClass=su(),Sc().addProtocol("pmtiles",(new lu.Zs).tile);class Map extends Sc().Map{constructor(at,st){let ot=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var Hl;(super({container:st,style:(0,ut.combineStyles)(at,ot),center:[0,0],zoom:0,maxZoom:24,attributionControl:!1,dragRotate:!1,pitchWithRotate:!1,touchZoomRotate:!0,touchPitch:!1,doubleClickZoom:!1,canvasContextAttributes:{preserveDrawingBuffer:!at.isWidthSmall()},transformRequest:at.api._getMapRequestTransform(),locale:at._t.maplibre,hash:!1,...ot}),this._loadMarkerImages(),this._parent=at,this._options=ot,this.getContainer().classList.add("pnx-map"),void 0===ot.touchZoomRotate)&&(null===this||void 0===this||null===(Hl=this.touchZoomRotate)||void 0===Hl||Hl.disableRotation());this._options.raster&&(this._options.background=this._options.background||"streets"),this._attribution=new(Sc().AttributionControl)({compact:!1,...ot.attributionControl}),this.addControl(this._attribution),this._initMapPosition(),this._picMarker=this._getPictureMarker(),this._picMarkerPreview=this._getPictureMarker(!1),this._picThumbUrl={},this._seqPictures={},this._userLayers=new Set,this._parent.addEventListener("select",this.reloadLayersStyles.bind(this)),setTimeout((()=>{var at;!this.loaded()&&null!==(at=this._parent)&&void 0!==at&&at.loader.isVisible()&&this._parent.loader.dismiss({},this._parent._t.map.slow_loading,(async()=>{await this._postLoad(),this._parent.loader.dismiss()}))}),15e3),this.waitForEnoughMapLoaded().then((async()=>await this._postLoad()))}async _postLoad(){this.resize(),await this.setVisibleUsers(this._parent.users),this.reloadLayersStyles(),this.fire("ready")}destroy(){this.remove(),delete this._parent,delete this._options,delete this._attribution,delete this._picMarker,delete this._picMarkerPreview,delete this._picThumbUrl,delete this._seqPictures,delete this._userLayers}waitForEnoughMapLoaded(){return new Promise((at=>{let st=0,ot=0,ut=0,Hl=0;const onSourceDataLoading=at=>{"source"===at.dataType&&at.tile&&(at.sourceId.startsWith("geovisio")?ot++:st++)},onSourceData=at=>{"source"===at.dataType&&at.tile&&(at.sourceId.startsWith("geovisio")?(Hl++,at.isSourceLoaded&&(Hl=ot)):(ut++,at.isSourceLoaded&&(ut=st))),checkEnoughLoaded()},checkEnoughLoaded=()=>{ut/st>=.75&&(0===ot||Hl/ot>=.75)&&(this.off("sourcedata",onSourceData),this.off("sourcedataloading",onSourceDataLoading),at())};this.on("sourcedataloading",onSourceDataLoading),this.on("sourcedata",onSourceData)}))}_initMapPosition(){!(0,ut.isNullCoordinates)(this._options.center)||this._options.zoom&&0!==this._options.zoom||this._options.hash||this._parent.onceAPIReady().then((()=>{var at,st;let ot=null===(at=this._parent)||void 0===at||null===(st=at.api)||void 0===st?void 0:st.getDataBbox();if(ot)try{ot=new(Sc().LngLatBounds)(ot),this.loaded()?this.fitBounds(ot,{animate:!1}):this.waitForEnoughMapLoaded().then((()=>this.fitBounds(ot,{animate:!1})))}catch(ut){console.warn("Received invalid bbox: "+ot)}}))}_loadMarkerImages(){[{id:"pnx-marker",img:rc},{id:"pnx-arrow-flat",img:oc},{id:"pnx-arrow-360",img:_c}].forEach((at=>{const st=new Image(64,64);st.onload=()=>this.addImage(at.id,st),st.src=at.img}))}_hasQualityScore(){var at,st,ot,ut;const Hl=(null===(at=this.getStyle())||void 0===at||null===(st=at.metadata)||void 0===st?void 0:st["panoramax:fields"])||{};return(null===Hl||void 0===Hl||null===(ot=Hl.pictures)||void 0===ot?void 0:ot.includes("gps_accuracy"))&&(null===Hl||void 0===Hl||null===(ut=Hl.pictures)||void 0===ut?void 0:ut.includes("h_pixel_density"))}_hasGridStats(){var at,st,ot,ut,Hl,rc;const sc=(null===(at=this.getStyle())||void 0===at||null===(st=at.metadata)||void 0===st?void 0:st["panoramax:fields"])||{};return(null===sc||void 0===sc||null===(ot=sc.grid)||void 0===ot?void 0:ot.includes("nb_360_pictures"))&&(null===sc||void 0===sc||null===(ut=sc.grid)||void 0===ut?void 0:ut.includes("nb_flat_pictures"))&&(null===sc||void 0===sc||null===(Hl=sc.grid)||void 0===Hl?void 0:Hl.includes("coef_360_pictures"))&&(null===sc||void 0===sc||null===(rc=sc.grid)||void 0===rc?void 0:rc.includes("coef_flat_pictures"))}reloadVectorTiles(){[...this._userLayers].forEach((at=>{const st=this.getSource((0,ut.getUserSourceId)(at));st.setTiles(st.tiles)}))}hasTwoBackgrounds(){return void 0!==this.getLayer(ut.RASTER_LAYER_ID)}getBackground(){if(!this.getLayer(ut.RASTER_LAYER_ID))return"streets";return"visible"==this.getLayoutProperty(ut.RASTER_LAYER_ID,"visibility")?"aerial":"streets"}setBackground(at){if(!this.getLayer(ut.RASTER_LAYER_ID)&&"aerial"===at)throw new Error("No aerial imagery available");this.getLayer(ut.RASTER_LAYER_ID)&&(this.setLayoutProperty(ut.RASTER_LAYER_ID,"visibility","aerial"===at?"visible":"none"),this.fire("background-changed",{background:at||"streets"}))}getVisibleUsers(){return[...this._userLayers].filter((at=>this.getLayer((0,ut.getUserLayerId)(at,"pictures"))&&"visible"===this.getLayoutProperty((0,ut.getUserLayerId)(at,"pictures"),"visibility")))}onceLayerReady(at){return this.getLayer(at)?Promise.resolve():new Promise((at=>{setTimeout(at,250)})).then((()=>this.onceLayerReady(at)))}async setVisibleUsers(){let at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];"string"===typeof at?at=[at]:null===at&&(at=[]),await Promise.all(at.filter((at=>""!=at&&!this._userLayers.has(at))).map((at=>(this._createPicturesTilesLayer(at),this.onceLayerReady((0,ut.getUserLayerId)(at,"pictures"))))));const st=["pictures","sequences","sequences_plus","grid","pictures_symbols"];[...this._userLayers].forEach((ot=>{st.forEach((st=>{const Hl=(0,ut.getUserLayerId)(ot,st);this.getLayer(Hl)&&this.setLayoutProperty(Hl,"visibility",at.includes(ot)?"visible":"none")}))})),this.reloadLayersStyles(),this.fire("users-changed",{usersIds:at})}filterUserLayersContent(at,st){[...this._userLayers].forEach((ot=>{this.getLayer((0,ut.getUserLayerId)(ot,at))?(this.setFilter((0,ut.getUserLayerId)(ot,at),st),"sequences"===at&&this.getLayer((0,ut.getUserLayerId)(ot,"sequences_plus"))&&this.setFilter((0,ut.getUserLayerId)(ot,"sequences_plus"),st),"pictures"===at&&this.getLayer((0,ut.getUserLayerId)(ot,"pictures_symbols"))&&this.setFilter((0,ut.getUserLayerId)(ot,"pictures_symbols"),st)):console.warn("Layer",(0,ut.getUserLayerId)(ot,at),"not ready")}))}displayPictureMarker(at,st,ot){let Hl=arguments.length>3&&void 0!==arguments[3]&&arguments[3],rc=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;this._picMarkerPreview.remove(),void 0!==at&&void 0!==st?(this._picMarker.setLngLat([at,st]).setRotation(ot).addTo(this),this._picMarker.picId=rc):this._picMarker.remove(),this.reloadLayersStyles(),Hl||void 0===at||void 0===st||this.flyTo({center:[at,st],zoom:this.getZoom()<ut.TILES_PICTURES_ZOOM+2?ut.TILES_PICTURES_ZOOM+2:this.getZoom(),maxDuration:2e3})}reloadLayersStyles(){const updateStyle=(at,st)=>{[...this._userLayers].forEach((ot=>{const Hl=(0,ut.getUserLayerId)(ot,at);if(this.getLayer(Hl)){for(let at in st.layout)this.setLayoutProperty(Hl,at,st.layout[at]);for(let at in st.paint)this.setPaintProperty(Hl,at,st.paint[at])}else console.warn("Layer",Hl,"not ready")}))};["pictures","pictures_symbols","sequences"].forEach((at=>{updateStyle(at,this._getLayerStyleProperties(at))}))}async _createPicturesTilesLayer(at){this._userLayers.add(at);const st=this.getStyle().layers.find(ut.isLabelLayer);if("geovisio"!==at&&!this.getSource(`geovisio_${at}`)){const ot=await this._parent.api.getUserMapStyle(at);Object.entries(ot.sources).forEach((at=>{let[st,ot]=at;return this.addSource(st,ot)})),ot.layers=ot.layers||[];ot.layers.concat((0,ut.getMissingLayerStyles)(ot.sources,ot.layers)).filter((at=>Object.keys(at).length>0)).forEach((at=>this.addLayer(at,null===st||void 0===st?void 0:st.id)))}this._picPreviewTimer=null,this._picPopup=new(Sc().Popup)({closeButton:!1,closeOnClick:!this._parent.isWidthSmall(),offset:3}),this._picPopup.on("close",(()=>{delete this._picPopup._picId}));const ot=(0,ut.getUserLayerId)(at,"pictures");this.on("mousemove",ot,(at=>{this.getCanvas().style.cursor="pointer";const st=Object.assign({},at);clearTimeout(this._picPreviewTimer),this._picPreviewTimer=setTimeout((()=>this._attachPreviewToPictures(st,ot)),100)})),this.on("mouseleave",ot,(()=>{clearTimeout(this._picPreviewTimer),this.getCanvas().style.cursor="",this._picPopup._picId,this._picPopup.remove()})),this.on("click",ot,this._onPictureClick.bind(this));const Hl=(0,ut.getUserLayerId)(at,"sequences_plus");this.on("mousemove",Hl,(at=>{if(this._onSequenceHover(at),this.getZoom()<=ut.TILES_PICTURES_ZOOM+1&&(this.getCanvas().style.cursor="pointer",at.features[0].properties.id)){const st=Object.assign({},at);clearTimeout(this._picPreviewTimer),this._picPreviewTimer=setTimeout((()=>this._attachPreviewToPictures(st,Hl)),100)}})),this.on("mouseleave",Hl,(()=>{clearTimeout(this._picPreviewTimer),this.getCanvas().style.cursor="",this._picPopup._picId,this._picPopup.remove()})),this.on("click",Hl,(at=>{at.preventDefault(),this.getZoom()<=ut.TILES_PICTURES_ZOOM+1&&this._onSequenceClick(at)})),"geovisio"===at&&this.getLayer("geovisio_grid")&&(this.on("mousemove","geovisio_grid",(at=>{if(this.getZoom()<=ut.TILES_PICTURES_ZOOM+1){this.getCanvas().style.cursor="pointer";const st=Object.assign({},at);clearTimeout(this._picPreviewTimer),this._picPreviewTimer=setTimeout((()=>this._attachPreviewToPictures(st,"geovisio_grid")),100)}})),this.on("mouseleave","geovisio_grid",(()=>{clearTimeout(this._picPreviewTimer),this.getCanvas().style.cursor="",this._picPopup._picId,this._picPopup.remove()})),this.on("click","geovisio_grid",(at=>{at.preventDefault(),this.flyTo({center:at.lngLat,zoom:ut.TILES_PICTURES_ZOOM-6})}))),this.on("click",(at=>{!1===at.defaultPrevented&&(clearTimeout(this._picPreviewTimer),this._picPopup.remove())}))}_getLayerStyleProperties(at){if("pictures_symbols"===at)return{paint:{},layout:{"icon-image":["case",["==",["get","id"],this._parent.picture],"",["==",["get","type"],"equirectangular"],"pnx-arrow-360","pnx-arrow-flat"],"symbol-sort-key":this._getLayerSortStyle(at)}};{const st={pictures:"circle",sequences:"line"};return{paint:Object.assign({[`${st[at]}-color`]:this._getLayerColorStyle(at)},ut.VECTOR_STYLES[at.toUpperCase()].paint),layout:Object.assign({[`${st[at]}-sort-key`]:this._getLayerSortStyle(at)},ut.VECTOR_STYLES[at.toUpperCase()].layout)}}}_getLayerColorStyle(at){const st=["case",["==",["get","hidden"],!0],Hl.COLORS.HIDDEN,["==",["get","geovisio:status"],"hidden"],Hl.COLORS.HIDDEN],ot=this._parent.sequence;return"sequences"==at&&ot?st.push(["==",["get","id"],ot],Hl.COLORS.SELECTED):at.startsWith("pictures")&&ot&&st.push(["in",ot,["get","sequences"]],Hl.COLORS.SELECTED),st.push(Hl.COLORS.BASE),st}_getLayerSortStyle(at){const st=["case",["==",["get","hidden"],!0],90],ot=this._parent.sequence;return"sequences"==at&&ot?st.push(["==",["get","id"],ot],100):at.startsWith("pictures")&&ot&&st.push(["in",ot,["get","sequences"]],100),st.push(10),st}_attachPreviewToPictures(at,st){let ot=at.features.pop();if(!ot||ot.properties.id==this._picPopup._picId)return;let Hl=null;if(st.endsWith("pictures")?Hl=ot.geometry.coordinates.slice():at.lngLat&&(Hl=[at.lngLat.lng,at.lngLat.lat]),!Hl){const at="LineString"===ot.geometry.type?[ot.geometry.coordinates]:ot.geometry.coordinates;let st=null;const ut=this.getBounds(),rc=ut.getCenter();for(let ot=0;ot<at.length;ot++)for(let sc=0;sc<at[ot].length;sc++)if(ut.contains(at[ot][sc])){let ut=rc.distanceTo(new(Sc().LngLat)(...at[ot][sc]));(null===st||ut<st)&&(Hl=at[ot][sc],st=ut)}if(!Hl)return}this._picPopup.setLngLat(Hl).addTo(this),this._picThumbUrl[ot.properties.id]||this._picPopup.setDOMContent((0,ut.getThumbGif)(this._parent._t)),this._picPopup._loading=ot.properties.id,this._picPopup._picId=ot.properties.id;const displayThumb=at=>{if(this._picPopup._loading===ot.properties.id)if(delete this._picPopup._loading,at){let st=document.createElement("img");st.classList.add("pnx-map-thumb"),st.alt=this._parent._t.map.thumbnail;let ut=new Image;if(ut.src=at,ut.addEventListener("load",(()=>{ot.properties.hidden?st.children[0].src=ut.src:st.src=ut.src,this._picPopup.setDOMContent(st)})),ot.properties.hidden){const at=document.createElement("div");at.classList.add("pnx-map-thumb-legend"),at.appendChild(document.createTextNode(this._parent._t.map.not_public));const ot=document.createElement("div");ot.appendChild(st),ot.appendChild(at),st=ot}}else this._picPopup.remove()};st.endsWith("pictures")?this._getPictureThumbURL(ot.properties.id).then(displayThumb):st.endsWith("grid")?this._getThumbURL(Hl).then(displayThumb):this._getSequenceThumbURL(ot.properties.id,new(Sc().LngLat)(...Hl)).then(displayThumb)}_getThumbURL(at){return this._parent.api.getPicturesAroundCoordinates(at[1],at[0],.1,1).then((at=>{var st;const ot=null===at||void 0===at||null===(st=at.features)||void 0===st?void 0:st.pop();return ot?this._parent.api.findThumbnailInPictureFeature(ot):null}))}_getSequenceThumbURL(at,st){return st?this._parent.api.getPicturesAroundCoordinates(st.lat,st.lng,1,1,at).then((st=>{var ot;return(null===st||void 0===st||null===(ot=st.features)||void 0===ot?void 0:ot.length)>0?this._parent.api.findThumbnailInPictureFeature(st.features[0]):this._parent.api.getPictureThumbnailURLForSequence(at)})):this._parent.api.getPictureThumbnailURLForSequence(at)}_getPictureThumbURL(at,st){let ot=null;return at&&(void 0!==this._picThumbUrl[at]?ot="string"===typeof this._picThumbUrl[at]?Promise.resolve(this._picThumbUrl[at]):this._picThumbUrl[at]:(this._picThumbUrl[at]=this._parent.api.getPictureThumbnailURL(at,st).then((st=>st?(this._picThumbUrl[at]=st,st):(this._picThumbUrl[at]=null,null))).catch((()=>{this._picThumbUrl[at]=null})),ot=this._picThumbUrl[at])),ot}_getPictureMarker(){let at=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const st=document.createElement("img");return st.src=at?sc:rc,st.alt="",new(Sc().Marker)({element:st,picId:null}).setDraggable(at&&this._options.picMarkerDraggable)}_onSequenceHover(at){var st;at.preventDefault(),at.features.length>0&&null!==(st=at.features[0].properties)&&void 0!==st&&st.id&&this.fire("sequence-hover",{seqId:at.features[0].properties.id})}_onSequenceClick(at){var st,ot;at.preventDefault(),"pic"!==(null===(st=this._parent.psv)||void 0===st?void 0:st.getPicturesNavigation())&&at.features.length>0&&null!==(ot=at.features[0].properties)&&void 0!==ot&&ot.id&&this.fire("sequence-click",{seqId:at.features[0].properties.id,coordinates:at.lngLat})}_onPictureClick(at){var st,ot,ut;if(at.preventDefault(),"pic"===(null===(st=this._parent.psv)||void 0===st?void 0:st.getPicturesNavigation()))return;const Hl=(null===at||void 0===at||null===(ot=at.features)||void 0===ot?void 0:ot.length)>0?at.features[0]:null;if(null!==Hl&&void 0!==Hl&&null!==(ut=Hl.properties)&&void 0!==ut&&ut.id){let st=null;try{Hl.properties.sequences&&(Array.isArray(Hl.properties.sequences)||(Hl.properties.sequences=JSON.parse(Hl.properties.sequences)),st=Hl.properties.sequences.pop())}catch(at){console.log("Sequence ID is not available in vector tiles for picture "+Hl.properties.id)}this.fire("picture-click",{picId:Hl.properties.id,seqId:st,feature:Hl})}}addEventListener(at,st){let ot=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!==ot&&void 0!==ot&&ot.once?this.once(at,st):this.on(at,st)}}},2771:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>MapMore,T:()=>sc});var ut=ot(5642),Hl=ot(7343),rc=ot(8340);const sc=["minDate","maxDate","pic_type","camera","theme","qualityscore"];class MapMore extends ut.A{constructor(at,st){super(at,st,arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}),this._mapFilters={},this._options.theme&&(this._mapFilters={theme:this._options.theme})}reloadLayersStyles(){if(super.reloadLayersStyles(),this._hasGridStats()){let at="coef";this._mapFilters.pic_type&&(at="flat"==this._mapFilters.pic_type?"coef_flat_pictures":"coef_360_pictures"),this.getStyle().layers.filter((at=>at.id.endsWith("_grid"))).forEach((st=>{const ot=(0,rc.switchCoefValue)(st,at);for(let at in ot.layout)this.setLayoutProperty(st.id,at,ot.layout[at]);for(let at in ot.paint)this.setPaintProperty(st.id,at,ot.paint[at])}))}}_getDatesForLayerColors(){const at=864e5,st=Date.now();return[st-30*at,st-365*at,st-730*at].map((at=>new Date(at).toISOString().split("T")[0]))}_getLayerColorStyle(at){var st,ot,ut,sc,oc,_c,wc,Sc;const iu=["case",["==",["get","hidden"],!0],Hl.COLORS.HIDDEN],su=(null===(st=this._parent.psv)||void 0===st||null===(ot=st._myVTour)||void 0===ot||null===(ut=ot.state)||void 0===ut?void 0:ut.loadingNode)||(null===(sc=this._parent.psv)||void 0===sc||null===(oc=sc._myVTour)||void 0===oc||null===(_c=oc.state)||void 0===_c||null===(wc=_c.currentNode)||void 0===wc?void 0:wc.id),lu=su?null===(Sc=this._parent.psv)||void 0===Sc?void 0:Sc._picturesSequences[su]:null;if("sequences"==at&&lu?iu.push(["==",["get","id"],lu],Hl.COLORS.SELECTED):"pictures"==at&&lu&&iu.push(["in",lu,["get","sequences"]],Hl.COLORS.SELECTED),this._mapFilters.theme==rc.MAP_THEMES.AGE){const st="sequences"==at?"date":"ts",ot=this._getDatesForLayerColors();iu.push(["!",["has",st]],Hl.COLORS.BASE,[">=",["get",st],ot[0]],Hl.COLORS.PALETTE_4,[">=",["get",st],ot[1]],Hl.COLORS.PALETTE_3,[">=",["get",st],ot[2]],Hl.COLORS.PALETTE_2,Hl.COLORS.PALETTE_1)}else this._mapFilters.theme==rc.MAP_THEMES.TYPE?iu.push(["!",["has","type"]],Hl.COLORS.BASE,["==",["get","type"],"equirectangular"],Hl.COLORS.QUALI_1,Hl.COLORS.QUALI_2):this._mapFilters.theme==rc.MAP_THEMES.SCORE?iu.push(["==",rc.MAP_EXPR_QUALITYSCORE,5],Hl.QUALITYSCORE_VALUES[0].color,["==",rc.MAP_EXPR_QUALITYSCORE,4],Hl.QUALITYSCORE_VALUES[1].color,["==",rc.MAP_EXPR_QUALITYSCORE,3],Hl.QUALITYSCORE_VALUES[2].color,["==",rc.MAP_EXPR_QUALITYSCORE,2],Hl.QUALITYSCORE_VALUES[3].color,Hl.QUALITYSCORE_VALUES[4].color):iu.push(Hl.COLORS.BASE);return iu}_getLayerSortStyle(at){var st,ot,ut,Hl,sc,oc,_c,wc;const Sc=["case",["==",["get","hidden"],!0],90],iu=(null===(st=this._parent.psv)||void 0===st||null===(ot=st._myVTour)||void 0===ot||null===(ut=ot.state)||void 0===ut?void 0:ut.loadingNode)||(null===(Hl=this._parent.psv)||void 0===Hl||null===(sc=Hl._myVTour)||void 0===sc||null===(oc=sc.state)||void 0===oc||null===(_c=oc.currentNode)||void 0===_c?void 0:_c.id),su=iu?null===(wc=this._parent.psv)||void 0===wc?void 0:wc._picturesSequences[iu]:null;if("sequences"==at&&su?Sc.push(["==",["get","id"],su],100):"pictures"==at&&su&&Sc.push(["in",su,["get","sequences"]],100),this._mapFilters.theme==rc.MAP_THEMES.AGE){const st="sequences"==at?"date":"ts",ot=this._getDatesForLayerColors();Sc.push(["!",["has",st]],0,[">=",["get",st],ot[0]],50,[">=",["get",st],ot[1]],49,[">=",["get",st],ot[2]],48)}else this._mapFilters.theme==rc.MAP_THEMES.TYPE?Sc.push(["!",["has","type"]],0,["==",["get","type"],"equirectangular"],50):this._mapFilters.theme==rc.MAP_THEMES.SCORE&&Sc.push(["==",rc.MAP_EXPR_QUALITYSCORE,5],80,["==",rc.MAP_EXPR_QUALITYSCORE,4],65,["==",rc.MAP_EXPR_QUALITYSCORE,3],50,["==",rc.MAP_EXPR_QUALITYSCORE,2],35,["==",rc.MAP_EXPR_QUALITYSCORE,1],20);return Sc.push(10),Sc}setFilters(at){let st=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{mapFilters:ot,mapSeqFilters:ut,mapPicFilters:Hl,reloadMapStyle:sc}=(0,rc.mapFiltersToLayersFilters)(at,this._hasGridStats());this._mapFilters=ot,sc&&this.reloadLayersStyles();const oc=this.getVisibleUsers().includes("geovisio");ut&&oc&&(ut=["step",["zoom"],!0,7,ut]),this.filterUserLayersContent("sequences",ut),this.filterUserLayersContent("pictures",Hl),!st&&(null!==ut||null!==Hl||null!==this._mapFilters.theme&&this._mapFilters.theme!==rc.MAP_THEMES.DEFAULT)&&oc&&this.getZoom()<7&&!this._hasGridStats()&&this.easeTo({zoom:7}),this.fire("filters-changed",Object.assign({},this._mapFilters))}async setVisibleUsers(){let at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];await super.setVisibleUsers(at);let{mapSeqFilters:st,mapPicFilters:ot,reloadMapStyle:ut}=(0,rc.mapFiltersToLayersFilters)(this._mapFilters,this._hasGridStats());ut&&this.reloadLayersStyles();const Hl=at.includes("geovisio");st&&Hl&&(st=["step",["zoom"],!0,7,st]),this.filterUserLayersContent("sequences",st),this.filterUserLayersContent("pictures",ot)}}},9048:(at,st,ot)=>{"use strict";ot.d(st,{Ay:()=>Photo,LM:()=>cu,Vf:()=>uu,cS:()=>lu});ot(5003);var ut=ot(5975),Hl=ot(2305),rc=ot(7343),sc=ot(508),oc=(ot(3961),ot(1080),ot(2710),ot(1575),ot(1545)),_c=ot(3348),wc=ot(4991),Sc=ot(3727);const iu={baseUrl:ut,width:1280,cols:2,rows:1,tileUrl:()=>null},su={id:rc.BASE_PANORAMA_ID,caption:"",panorama:iu,links:[],gps:[0,0],sequence:{},sphereCorrection:{},horizontalFov:360,properties:{}},lu=30,cu=250,uu=3e3,pu="draw-annotation-1",mu="draw-annotation-2",gu="draw-annotation-r";oc.jM.useNewAnglesOrder=!0;class Photo extends oc.jM{constructor(at,st){var ot;let ut=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};super({container:st,adapter:[Sc.A,{showErrorTile:!1,baseBlur:!1,resolution:at.isWidthSmall()?32:64,shouldGoFast:ut.shouldGoFast,useXmpData:!1}],withCredentials:at.api._getPSVWithCredentials(),requestHeaders:null===at||void 0===at||null===(ot=at["fetch-options"])||void 0===ot?void 0:ot.headers,panorama:iu,lang:at._t.psv,minFov:5,loadingTxt:"&nbsp;",navbar:null,rendererParameters:{preserveDrawingBuffer:!at.isWidthSmall()},plugins:[[_c.$,{dataMode:"server",positionMode:"gps",renderMode:"3d",preload:!0,getNode:()=>{},transitionOptions:()=>{},arrowsPosition:{linkOverlapAngle:Math.PI/6}}],[wc.b,{}]],...ut}),this._parent=at,this._options=ut,st.classList.add("pnx-psv"),this._shouldGoFast=(null===ut||void 0===ut?void 0:ut.shouldGoFast)||(()=>!1),this._transitionDuration=(null===ut||void 0===ut?void 0:ut.transitionDuration)||cu,this._myVTour=this.getPlugin(_c.$),this._myVTour.datasource.nodeResolver=this._getNodeFromAPI.bind(this),this._myVTour.config.transitionOptions=this._psvNodeTransition.bind(this),this._clearArrows=this._myVTour.arrowsRenderer.clear.bind(this._myVTour.arrowsRenderer),this._myVTour.arrowsRenderer.clear=()=>{},this._myMarkers=this.getPlugin(wc.b),this._annotationsVisible=!0===this._options.displayAnnotations,this._drawingAnnotation=null,this._sequencePlaying=!1,this._picturesNavigation=this._options.picturesNavigation||"any",this._picturesSequences={},this._myVTour.addEventListener("enter-arrow",this._onEnterArrow.bind(this)),this._myVTour.addEventListener("leave-arrow",this._onLeaveArrow.bind(this)),this._myVTour.addEventListener("node-changed",this._onNodeChanged.bind(this)),this._myMarkers.addEventListener("select-marker",this._onSelectMarker.bind(this)),this.addEventListener("position-updated",this._onPositionUpdated.bind(this)),this.addEventListener("zoom-updated",this._onZoomUpdated.bind(this)),this.addEventListener("dblclick",this._onDoubleClick.bind(this)),this._parent.addEventListener("select",this._onSelect.bind(this)),this.loader.size=150,this.loader.color="rgba(61, 61, 61, 0.5)",this.loader.textColor="rgba(255, 255, 255, 0.7)",this.loader.border=5,this.loader.thickness=10,this.loader.canvas.setAttribute("viewBox","0 0 150 150"),this.loader.__updateContent(),this._options.position&&!this._parent.picture&&this.goToPosition(...this._options.position)}async _getNodeFromAPI(at){var st,ot;if((0,rc.isNullId)(at))return su;const ut=await fetch(this._parent.api.getPictureMetadataUrl(at,this._picturesSequences[at]),this._parent.api._getFetchOptions());let Hl=await ut.json();if(Hl.features&&(Hl=Hl.features.pop()),!Hl||0===Object.keys(Hl).length||!ut.ok)throw this._parent.loader&&this._parent.loader.dismiss(!0,this._parent._t.pnx.error_pic),new Error("Picture with ID "+at+" was not found");this._picturesSequences[at]=Hl.collection;const oc=(0,sc.apiFeatureToPSVNode)(Hl,this._parent._t,this._parent._isInternetFast,this._picturesNavFilter.bind(this),this._parent.api.cleanResourceURL.bind(this._parent.api));var _c,wc;null!==oc&&void 0!==oc&&null!==(st=oc.sequence)&&void 0!==st&&st.prevPic&&(this._picturesSequences[null===oc||void 0===oc||null===(_c=oc.sequence)||void 0===_c?void 0:_c.prevPic]=Hl.collection);null!==oc&&void 0!==oc&&null!==(ot=oc.sequence)&&void 0!==ot&&ot.nextPic&&(this._picturesSequences[null===oc||void 0===oc||null===(wc=oc.sequence)||void 0===wc?void 0:wc.nextPic]=Hl.collection);return oc}_psvNodeTransition(at,st,ot){var ut,Hl,sc;let oc={};const _c=this._shouldGoFast()?0:Math.min(cu,this._transitionDuration),wc=_c>100,Sc=null!=(ot||(null===st||void 0===st?void 0:st.links.find((st=>st.nodeId==at.id)))),iu=st&&at.sequence.id===st.sequence.id,su=((null===st||void 0===st||null===(ut=st.properties)||void 0===ut?void 0:ut["view:azimuth"])||0)*(Math.PI/180),uu=((null===at||void 0===at||null===(Hl=at.properties)||void 0===Hl?void 0:Hl["view:azimuth"])||0)*(Math.PI/180),pu=(0,rc.getRelativeHeading)(at)*(Math.PI/180);this.setOption("maxFov",Math.min(3*at.horizontalFov/4,90));const mu={showLoader:!1,effect:"none",speed:0,rotation:!1,rotateTo:{pitch:0,yaw:-pu},zoomTo:lu};if(360==at.horizontalFov)oc=st?(0,rc.getDistance)(st.gps,at.gps)>=.001?mu:{speed:_c,effect:Sc&&wc?"fade":"none",rotation:Sc&&iu&&wc,rotateTo:this.getPosition()}:mu;else if(iu){const at=this.getPosition().yaw,ot=st.horizontalFov*(Math.PI/180)/2,ut=at<=ot||at>=2*Math.PI-ot,Hl=Math.abs(su-uu)<=Math.PI/4;oc={speed:_c,effect:Sc&&Hl&&wc?"fade":"none",rotation:Sc&&Hl&&wc,rotateTo:ut?this.getPosition():{pitch:0,yaw:0},zoomTo:ut?this.getZoomLevel():lu}}else oc=Object.assign(mu,{rotateTo:{pitch:0,yaw:0}});"fade"===oc.effect&&oc.speed>=150?setTimeout(this._clearArrows,oc.speed-100):this._clearArrows();const gu=new CustomEvent("picture-loading",{detail:{...Object.assign({},this.getXYZ(),oc.rotateTo?{x:180*(uu+oc.rotateTo.yaw)/Math.PI}:null,oc.zoomTo?{z:oc.zoomTo}:null),picId:at.id,lon:at.gps[0],lat:at.gps[1],first:(null===(sc=this._parent._initParams)||void 0===sc?void 0:sc.getParentPostInit().picture)==at.id}});return this.dispatchEvent(gu),oc}_onEnterArrow(at){const st=at.link,ot=at.node;let ut;ot&&(ut=360===ot.horizontalFov?(this.getPictureOriginalHeading()+180*this.getPosition().yaw/Math.PI)%360:this.getPictureOriginalHeading());const Hl=new CustomEvent("picture-preview-started",{detail:{picId:st.nodeId,coordinates:st.gps,direction:ut}});this.dispatchEvent(Hl)}_onLeaveArrow(at){const st=at.link,ot=new CustomEvent("picture-preview-stopped",{detail:{picId:st.nodeId}});this.dispatchEvent(ot)}_onPositionUpdated(at){let{position:st}=at;const ot=(0,rc.positionToXYZ)(st,this.getZoomLevel());ot.x+=this.getPictureOriginalHeading(),ot.x=ot.x%360;const ut=new CustomEvent("view-rotated",{detail:ot});this.dispatchEvent(ut),this._onTilesStartLoading()}_onZoomUpdated(at){let{zoomLevel:st}=at;const ot=new CustomEvent("view-rotated",{detail:{...this.getXY(),z:st}});this.dispatchEvent(ot),this._onTilesStartLoading()}_onDoubleClick(){this.unfocusAnnotation(!1,!0)}_onNodeChanged(at){for(let Hl of document.getElementsByClassName("pnx-psv-tour-arrows"))Hl.classList.remove("pnx-clicked");if(at.node.id){var st,ot,ut;const Hl=(null===(st=this._parent._initParams)||void 0===st?void 0:st.getParentPostInit().picture)==at.node.id;this._parent.select(null===(ot=at.node)||void 0===ot||null===(ut=ot.sequence)||void 0===ut?void 0:ut.id,at.node.id);const rc=this.getPictureMetadata();if(!rc)return void this.dispatchEvent(new CustomEvent("picture-loaded",{detail:{}}));this._prevSequence=rc.sequence.id;const sc=new CustomEvent("picture-loaded",{detail:{...this.getXYZ(),picId:at.node.id,lon:rc.gps[0],lat:rc.gps[1],first:Hl}});this.dispatchEvent(sc),rc.panorama.hdUrl?(this.setOption("downloadUrl",rc.panorama.hdUrl),this.setOption("downloadName",at.node.id+".jpg")):this.setOption("downloadUrl",null),this._annotationsVisible&&this.toggleAllAnnotations(!0)}this._onTilesStartLoading()}_onSelectMarker(at){var st;if(at.marker&&null!==(st=at.marker.id)&&void 0!==st&&st.startsWith("annotation-")){if(this.getSelectedAnnotations().find((at=>{var st,ot,ut;return null===(st=this._myMarkers.markers["annotation-"+at])||void 0===st||null===(ot=st.config)||void 0===ot||null===(ut=ot.data)||void 0===ut?void 0:ut.blockFocus})))return;this.focusOnAnnotation(at.marker.data.id)}}_onTilesStartLoading(){this._tilesQueueTimer&&(clearInterval(this._tilesQueueTimer),delete this._tilesQueueTimer),this._tilesQueueTimer=setInterval((()=>{if(0===Object.keys(this.adapter.queue.tasks).length){if(this._myVTour.state.currentNode){const at=new CustomEvent("picture-tiles-loaded",{detail:{picId:this._myVTour.state.currentNode.id}});this.dispatchEvent(at)}clearInterval(this._tilesQueueTimer),delete this._tilesQueueTimer}}),100)}getPictureMetadata(){var at,st,ot;return(0,rc.isNullId)(null===(at=this._myVTour)||void 0===at||null===(st=at.state)||void 0===st||null===(ot=st.currentNode)||void 0===ot?void 0:ot.id)?null:this._myVTour.state.currentNode?Object.assign({},this._myVTour.state.currentNode):null}getPictureId(){var at,st,ot,ut,Hl;const sc=(null===(at=this._myVTour)||void 0===at||null===(st=at.state)||void 0===st?void 0:st.loadingNode)||(null===(ot=this._myVTour)||void 0===ot||null===(ut=ot.state)||void 0===ut||null===(Hl=ut.currentNode)||void 0===Hl?void 0:Hl.id);return(0,rc.isNullId)(sc)?null:sc}_onSelect(at){at.detail.seqId&&(this._picturesSequences[at.detail.picId]=at.detail.seqId),this.getPictureId()!==at.detail.picId&&(this.loader.show(),this._myVTour.setCurrentNode(at.detail.picId).catch((at=>{this.showErrorOverlay(at,this._parent._t.pnx.error_pic,!0)})))}goToNextPicture(){if(!this.getPictureMetadata())throw new Error("No picture currently selected");if("pic"==this._picturesNavigation)throw new Error("Pictures navigation is locked to current picture");const at=this.getPictureMetadata().sequence.nextPic;if(!at)throw new Error("No next picture available");this._parent.select(this.getPictureMetadata().sequence.id,at)}goToPrevPicture(){if(!this.getPictureMetadata())throw new Error("No picture currently selected");if("pic"==this._picturesNavigation)throw new Error("Pictures navigation is locked to current picture");const at=this.getPictureMetadata().sequence.prevPic;if(!at)throw new Error("No previous picture available");this._parent.select(this.getPictureMetadata().sequence.id,at)}async goToPosition(at,st){if("pic"==this._picturesNavigation)throw new Error("Pictures navigation is locked to current picture");return this._parent.api.getPicturesAroundCoordinates(at,st).then((at=>{if(at.features.length>0){const st=at.features.pop();return this._parent.select(null===st||void 0===st?void 0:st.collection,st.id),st.id}return Promise.reject(new Error("No picture found nearby given coordinates"))}))}getXY(){const at=(0,rc.positionToXYZ)(this.getPosition());return at.x=(at.x+this.getPictureOriginalHeading())%360,at}getXYZ(){const at=this.getXY();return at.z=this.getZoomLevel(),at}getPictureOriginalHeading(){var at,st;return(null===(at=this.getPictureMetadata())||void 0===at||null===(st=at.properties)||void 0===st?void 0:st["view:azimuth"])||0}getPictureRelativeHeading(){return(0,rc.getRelativeHeading)(this.getPictureMetadata())}clearPictureMetadataCache(){var at,st,ot,ut;const Hl=null===(at=this.getPictureMetadata())||void 0===at?void 0:at.id,rc=null===(st=this.getPictureMetadata())||void 0===st||null===(ot=st.sequence)||void 0===ot?void 0:ot.id;null===(ut=this._myVTour.state.currentTooltip)||void 0===ut||ut.hide(),this._myVTour.state.currentTooltip=null,this._myVTour.state.currentNode=null,this._myVTour.state.preload={},this._myVTour.datasource.nodes={},Hl&&this._parent.select(rc,Hl)}setXYZ(at,st,ot){const ut=(0,rc.xyzToPosition)(at-this.getPictureOriginalHeading(),st,ot);this.rotate({yaw:ut.yaw,pitch:ut.pitch}),this.zoom(ut.zoom)}setHigherContrast(at){this.renderer.renderer.toneMapping=at?3:0,this.renderer.renderer.toneMappingExposure=at?2:1,this.needsUpdate()}getTransitionDuration(){return this._transitionDuration}setTransitionDuration(at){if((at=parseFloat(at))<100||at>uu)throw new Error("Invalid transition duration (should be between 100 and "+uu+")");this._transitionDuration=at;const st=new CustomEvent("transition-duration-changed",{detail:{value:at}});this.dispatchEvent(st)}setPanorama(at,st){const onFailure=at=>{var st;return this.showErrorOverlay(at,null===(st=this._parent)||void 0===st?void 0:st._t.pnx.error_pic,!0)};try{return super.setPanorama(at,st).catch(onFailure)}catch(ot){onFailure(ot)}}showErrorOverlay(at,st,ot){var ut,rc,sc,oc;null!==(ut=this._parent)&&void 0!==ut&&ut.loader.isVisible()||!this.overlay.isVisible()?null===(rc=this._parent)||void 0===rc||rc.loader.dismiss(at,st,ot?()=>{var at;null===(at=this._parent)||void 0===at||at.loader.dismiss(),this.overlay.hide()}:void 0):(console.error(at),this.overlay.show({image:`<img style="width: 200px" src="${Hl}" alt="" />`,title:null===(sc=this._parent)||void 0===sc?void 0:sc._t.pnx.error,text:st+"<br />"+(null===(oc=this._parent)||void 0===oc?void 0:oc._t.pnx.error_click),dissmisable:ot}))}playSequence(){this._sequencePlaying=!0,this.container.classList.add("pnx-psv-playing");const at=new Event("sequence-playing",{bubbles:!0,composed:!0});this.dispatchEvent(at);const nextPicturePlay=()=>{if(this._sequencePlaying){this.addEventListener("picture-loaded",(()=>{this._playTimer=setTimeout((()=>{nextPicturePlay()}),this.getTransitionDuration())}),{once:!0});try{this.goToNextPicture()}catch(at){this.stopSequence()}}};this.addEventListener("click",(()=>this.stopSequence())),nextPicturePlay()}stopSequence(){this._sequencePlaying=!1,this.container.classList.remove("pnx-psv-playing"),this._playTimer&&(clearTimeout(this._playTimer),delete this._playTimer),this.forceRefresh();const at=new Event("sequence-stopped",{bubbles:!0,composed:!0});this.dispatchEvent(at)}isSequencePlaying(){return this._sequencePlaying}toggleSequencePlaying(){this.isSequencePlaying()?this.stopSequence():this.playSequence()}getPicturesNavigation(){return this._picturesNavigation}setPicturesNavigation(at){"none"===at&&(at="pic"),this._picturesNavigation=at;const st=this.container.querySelector(".psv-virtual-tour-arrows");st&&(st.style.display="pic"==at?"none":null);const ot=new CustomEvent("pictures-navigation-changed",{detail:{value:at}});this.dispatchEvent(ot)}_picturesNavFilter(at){switch(this._picturesNavigation){case"seq":return["next","prev"].includes(at.rel);case"pic":case"none":return!1;default:return!0}}areAnnotationsVisible(){return this._annotationsVisible}getSelectedAnnotations(){return Object.keys(this._myMarkers.markers).filter((at=>{var st,ot,ut;return at.startsWith("annotation-")&&(null===(st=this._myMarkers.markers[at])||void 0===st||null===(ot=st.config)||void 0===ot||null===(ut=ot.data)||void 0===ut?void 0:ut.selected)})).map((at=>at.replace("annotation-","")))}toggleAllAnnotations(at){const st=this.getPictureMetadata();if(!st)throw this._myMarkers.clearMarkers(),new Error("No picture currently selected");if(at){var ot;let at=st.properties.annotations||[];0===(null===(ot=at)||void 0===ot?void 0:ot.length)&&console.warn("No annotation available on picture",st.id),at=at.map((at=>{if(!st.properties["pers:interior_orientation"].sensor_array_dimensions)return console.warn("Picture lacks pers:interior_orientation.sensor_array_dimensions property, can't compute marker"),null;const ot=at.shape.coordinates.map((at=>at.map((at=>{var ot;const ut=null===(ot=st.panorama)||void 0===ot?void 0:ot.cropData,Hl={textureX:at[0]+((null===ut||void 0===ut?void 0:ut.croppedX)||0),textureY:at[1]+((null===ut||void 0===ut?void 0:ut.croppedY)||0)};return this.dataHelper.textureCoordsToSphericalCoords(Hl)}))));return{id:`annotation-${at.id}`,polygon:ot,data:{id:at.id},className:"pnx-psv-annotation",svgStyle:{stroke:"var(--orange)",strokeWidth:"3px",fill:"var(--orange-transparent)",cursor:"pointer"},tooltip:this._parent._t.pnx.semantics_annotation_tooltip}})),this._myMarkers.setMarkers(at)}else this._myMarkers.clearMarkers();this._annotationsVisible=at,this.dispatchEvent(new CustomEvent("annotations-toggled",{detail:{visible:at}}))}focusOnAnnotation(at){let st=arguments.length>1&&void 0!==arguments[1]&&arguments[1],ot=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const ut=this.getSelectedAnnotations();if(at&&1===ut.length&&ut[0]===at)return;this.areAnnotationsVisible()||this.toggleAllAnnotations(!0),this.unfocusAnnotation(!0);const Hl=`annotation-${at}`;if(this._myMarkers.updateMarker({id:Hl,svgStyle:{stroke:"var(--red)",strokeWidth:"3px",fill:"var(--red-transparent)"},data:{selected:!0,blockFocus:st}}),this._myMarkers.gotoMarker(Hl,0),this.zoom(65),!ot){const st=new CustomEvent("annotation-focused",{detail:{annotationId:at}});this.dispatchEvent(st)}}unfocusAnnotation(){let at=arguments.length>0&&void 0!==arguments[0]&&arguments[0],st=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const ot=this.getSelectedAnnotations();if(ot.length>0){let ut=0;ot.forEach((at=>{var ot,Hl,rc;const sc="annotation-"+at;st&&null!==(ot=this._myMarkers.markers[sc])&&void 0!==ot&&null!==(Hl=ot.config)&&void 0!==Hl&&null!==(rc=Hl.data)&&void 0!==rc&&rc.blockFocus?ut++:this._myMarkers.updateMarker({id:sc,svgStyle:{stroke:"var(--orange)",strokeWidth:"3px",fill:"var(--orange-transparent)"},data:{selected:!1,blockFocus:!1}})})),!at&&ut<ot.length&&this.dispatchEvent(new Event("annotations-unfocused"))}}startDrawAnnotation(){this.toggleAllAnnotations(!1),this._drawingAnnotation=[],this._drawingMoves=0,this._myMarkers.addMarker({id:gu,polygon:[{yaw:0,pitch:0},{yaw:0,pitch:0},{yaw:0,pitch:0}],svgStyle:{fill:"rgba(0,0,255,0.3)",stroke:"blue",strokeWidth:"2px"},visible:!1}),this._myMarkers.addMarker({id:pu,circle:5,position:{yaw:0,pitch:0},style:{cursor:"pointer"},svgStyle:{fill:"rgba(255,0,0,0.3)",stroke:"red",strokeWidth:"3px"}}),this._myMarkers.addMarker({id:mu,circle:5,position:{yaw:0,pitch:0},style:{cursor:"pointer"},svgStyle:{fill:"rgba(255,0,0,0.3)",stroke:"red",strokeWidth:"3px"},visible:!1});const firstMove=at=>{const st=this.getPositionFromEvent(at);st&&(this._myMarkers.updateMarker({id:pu,position:st,style:{cursor:"grab"}}),2==this._drawingAnnotation.length&&this._myMarkers.updateMarker({id:gu,polygon:[st,{yaw:st.yaw,pitch:this._drawingAnnotation[1].pitch},this._drawingAnnotation[1],{yaw:this._drawingAnnotation[1].yaw,pitch:st.pitch}]}))},secMove=at=>{const st=this.getPositionFromEvent(at);st&&(this._myMarkers.updateMarker({id:mu,position:st,style:{cursor:"grab"}}),this._drawingAnnotation.length>=1&&this._myMarkers.updateMarker({id:gu,polygon:[this._drawingAnnotation[0],{yaw:this._drawingAnnotation[0].yaw,pitch:st.pitch},st,{yaw:st.yaw,pitch:this._drawingAnnotation[0].pitch}]}))};this._drawListeners=[firstMove,secMove],this.parent.addEventListener("mousemove",firstMove),this._drawingMoves=1,this._drawListenerClick=at=>{let st=!1;if(2!==this._drawingMoves&&at.marker.id===pu?0==this._drawingAnnotation.length?(this._drawingAnnotation.push({yaw:at.marker.config.position.yaw,pitch:at.marker.config.position.pitch}),this.parent.removeEventListener("mousemove",firstMove),this._myMarkers.updateMarker({id:pu,style:{cursor:"pointer"}}),this._myMarkers.updateMarker({id:mu,visible:!0,position:{yaw:at.marker.config.position.yaw,pitch:at.marker.config.position.pitch}}),this._myMarkers.updateMarker({id:gu,visible:!0}),this.parent.addEventListener("mousemove",secMove),this._drawingMoves=2):0===this._drawingMoves?(this.parent.addEventListener("mousemove",firstMove),this._drawingMoves=1):(this._drawingAnnotation[0]={yaw:at.marker.config.position.yaw,pitch:at.marker.config.position.pitch},this.parent.removeEventListener("mousemove",firstMove),this._myMarkers.updateMarker({id:pu,style:{cursor:"pointer"}}),this._drawingMoves=0,st=!0):1!==this._drawingMoves&&at.marker.id===mu&&(1==this._drawingAnnotation.length?(this._drawingAnnotation.push({yaw:at.marker.config.position.yaw,pitch:at.marker.config.position.pitch}),this.parent.removeEventListener("mousemove",secMove),this._myMarkers.updateMarker({id:mu,style:{cursor:"pointer"}}),this._drawingMoves=0,st=!0):2===this._drawingMoves?(this._drawingAnnotation[1]={yaw:at.marker.config.position.yaw,pitch:at.marker.config.position.pitch},this.parent.removeEventListener("mousemove",secMove),this._myMarkers.updateMarker({id:mu,style:{cursor:"pointer"}}),this._drawingMoves=0,st=!0):(this.parent.addEventListener("mousemove",secMove),this._drawingMoves=2)),st){var ot,ut;const at=this.dataHelper.sphericalCoordsToTextureCoords(this._drawingAnnotation[0]),st=this.dataHelper.sphericalCoordsToTextureCoords(this._drawingAnnotation[1]);let Hl=[at.textureX,at.textureY,st.textureX,st.textureY];const rc=null===(ot=this.getPictureMetadata())||void 0===ot||null===(ut=ot.panorama)||void 0===ut?void 0:ut.cropData;if(rc&&(Hl[0]-=rc.croppedX,Hl[1]-=rc.croppedY,Hl[2]-=rc.croppedX,Hl[3]-=rc.croppedY,(Hl[0]<0||Hl[0]>rc.croppedWidth||Hl[1]<0||Hl[1]>rc.croppedHeight||Hl[2]<0||Hl[2]>rc.croppedWidth||Hl[3]<0||Hl[3]>rc.croppedHeight)&&(Hl=null)),Hl[0]>=Hl[2]&&Hl[1]>=Hl[3]){let at=Hl[0],st=Hl[2],ot=Hl[1];Hl=[st,Hl[3],at,ot]}const sc=new CustomEvent("annotation-drawn",{detail:{shape:Hl}});this.dispatchEvent(sc)}},this._myMarkers.addEventListener("select-marker",this._drawListenerClick)}fixDrawAnnotation(){[pu,mu].forEach((at=>{try{this._myMarkers.removeMarker(at)}catch(st){}})),(this._drawListeners||[]).forEach((at=>this.parent.removeEventListener("mousemove",at))),this._myMarkers.removeEventListener("select-marker",this._drawListenerClick),this._myMarkers.updateMarker({id:gu,svgStyle:{stroke:"var(--red)",strokeWidth:"3px",fill:"var(--red-transparent)",cursor:"pointer"}}),this._drawingMoves=0}stopDrawAnnotation(){[pu,mu,gu].forEach((at=>{try{this._myMarkers.removeMarker(at)}catch(st){}})),(this._drawListeners||[]).forEach((at=>this.parent.removeEventListener("mousemove",at))),this._myMarkers.removeEventListener("select-marker",this._drawListenerClick),delete this._drawingMoves,this._drawingAnnotation=null}getPositionFromEvent(at){const st=this.container.getBoundingClientRect(),ot=at.clientX-st.left,ut=at.clientY-st.top,Hl=this.renderer.getIntersections({x:ot,y:ut}).find((at=>at.object.userData[oc.aH.VIEWER_DATA]));if(Hl)return this.dataHelper.vector3ToSphericalCoords(Hl.point)}forceRefresh(){var at;const st=this._myVTour.getCurrentNode();if(st&&st.panorama.baseUrl!==(null===st||void 0===st||null===(at=st.panorama)||void 0===at?void 0:at.origBaseUrl)){const at=this.getZoomLevel(),ot=this.getPosition();this._myVTour.state.currentNode=null,this._myVTour.setCurrentNode(st.id,{zoomTo:at,rotateTo:ot,fadeIn:!1,speed:0,rotation:!1})}st&&st.panorama.rows>1&&this.adapter.__refresh()}}},4374:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>Popup});var ut=ot(4542),Hl=ot(5995),rc=ot(8591),sc=ot(6627);class Popup extends ut.WF{constructor(){super(),this.visible=!1}connectedCallback(){super.connectedCallback(),this.addEventListener("click",(at=>{at.target===this&&this.close()})),document.addEventListener("keyup",(at=>{"Escape"===at.key&&this.visible&&this.close()}))}attributeChangedCallback(at,st,ot){super.attributeChangedCallback(at,st,ot),"visible"==at&&(""!==ot&&!0!==ot||this.dispatchEvent(new Event("open")))}close(){this.visible=!1,this.dispatchEvent(new Event("close"))}render(){return ut.qy`
			<div class="pnx-panel pnx-padded">
				<pnx-button
					class="btn-close"
					kind="flat"
					size="l"
					@click=${this.close.bind(this)}
				>
					${(0,Hl.fa)(sc.faXmark)}
				</pnx-button>

				<slot></slot>
			</div>
		`}}Popup.styles=[rc.nd,rc.Op,ut.AH`
		/* Backdrop */
		:host {
			display: flex;
			align-items: center;
			justify-content: center;
			position: absolute;
			top: 0;
			right: 0;
			left: 0;
			bottom: 0;
			opacity: 0;
			visibility: hidden;
			pointer-events: none;
			transition: all 0.2s;
			background: rgba(0, 0, 0, 0.85);
		}
		:host(*[visible]) {
			opacity: 1;
			visibility: visible;
			pointer-events: unset;
			z-index: 200;
		}

		/* Content backgroud */
		.pnx-panel {
			box-sizing: border-box;
			position: relative;
			width: 90%;
			max-height: 90%;
			max-width: 550px;
			overflow-y: auto;
		}

		.btn-close {
			position: absolute;
			top: 15px;
			right: 15px;
		}
	`],Popup.properties={visible:{type:Boolean,reflect:!0}},customElements.define("pnx-popup",Popup)},4364:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>ProgressBar});var ut=ot(4542);class ProgressBar extends ut.WF{render(){var at;return ut.qy`
			<progress
				value=${this.value>=0?this.value:ut.s6}
				class=${this.value>=0?ut.s6:"indeterminate"}
				max="100"
				title=${null===(at=this._t)||void 0===at?void 0:at.map.loading}
			></progress>
		`}}ProgressBar.styles=ut.AH`
		progress {
			max-width: 80vh;
			width: 300px;
			height: 16px;
			appearance: none;
			-webkit-appearance: none;
			border: 1px solid var(--grey-semi-dark);
			background-color: var(--grey);
			border-radius: 8px;
			overflow: hidden;
			padding: 3px;
			box-sizing: border-box;
			display: block;
		}

		progress::-webkit-progress-bar {
			background-color: var(--grey);
		}

		/* Don't merge with -moz below, for some f*ing reason a list selector doesn't work with Chrome */
		progress::-webkit-progress-value {
			background-color: var(--blue);
			border-radius: 5px;
			box-sizing: border-box;
		}

		progress::-moz-progress-bar {
			background-color: var(--blue);
			border-radius: 5px;
			box-sizing: border-box;
		}

		progress[value=""]::-moz-progress-bar,
		progress:not([value])::-moz-progress-bar {
			animation: indeterminateAnimation 1.5s infinite linear;
		}

		progress.indeterminate {
			position: relative;
			background-color: var(--grey);
			overflow: hidden;
		}

		progress.indeterminate::after {
			content: "";
			position: absolute;
			left: 3px;
			top: 3px;
			bottom: 3px;
			width: 20%;
			background-color: var(--blue);
			border-radius: 5px;
			animation: indeterminateAnimation 1.5s infinite linear;
			pointer-events: none;
		}

		@keyframes indeterminateAnimation {
			0%   { margin-left: 0%; width: 2%; }
			15%  { margin-left: 0%; width: 20%; }
			50%  { margin-left: 40%; width: 20%; }
			85%  { margin-left: 80%; width: 20%; }
			100% { margin-left: 98%; width: 2%; }
		}
	`,ProgressBar.properties={value:{type:Number}},customElements.define("pnx-progress-bar",ProgressBar)},2675:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>QualityScore});var ut=ot(4542),Hl=ot(7343);class QualityScore extends ut.WF{constructor(){super(),this.grade=0,this.input=!1}_onInput(){const at=[];for(let st of this.renderRoot.querySelectorAll("input"))st.checked&&at.push(st.value);this.grade=at.join(","),this.dispatchEvent(new CustomEvent("change",{bubbles:!0,composed:!0}))}render(){const at=`${this.grade}`.split(",").map((at=>parseInt(at))).filter((at=>!isNaN(at)));return this.input?Hl.QUALITYSCORE_VALUES.map(((st,ot)=>{var Hl;return ut.qy`
				<input
					id="${this.input}-${st.label}"
					type="checkbox"
					name="qualityscore"
					value="${5-ot}"
					@change="${this._onInput}"
					.checked=${at.includes(5-ot)}
				/>
				<label
					for="${this.input}-${st.label}"
					title="${null===(Hl=this._t)||void 0===Hl?void 0:Hl.pnx.filter_qualityscore_help}"
					style="background-color: ${st.color}"
				>
					${st.label}
				</label>
			`})):Hl.QUALITYSCORE_VALUES.map(((st,ot)=>ut.qy`
				<span class="${at.includes(5-ot)?"selected":""}" style="background-color: ${st.color}">
					${st.label}
				</span>
			`))}}QualityScore.styles=ut.AH`
		:host {
			gap: 0px;
			justify-content: center;
			height: 2em;
			font-size: 18px;
			display: inline-flex;
			align-items: center;
			color: white;
		}
	
		/* Single letter */
		span, label {
			width: 1.2em;
			height: 1.5em;
			line-height: 1.5em;
			display: inline-block;
			border: 0.05em solid white;
			text-align: center;
			background-color: gray;
			color: rgba(255,255,255,0.9);
			font-family: var(--font-family);
			font-weight: 800;
			vertical-align: middle;
		}

		/* Rounded corners for first/last */
		span:first-of-type, label:first-of-type {
			border-top-left-radius: 0.4em;
			border-bottom-left-radius: 0.4em;
		}

		span:last-of-type, label:last-of-type {
			border-top-right-radius: 0.4em;
			border-bottom-right-radius: 0.4em;
		}

		/* Selected letter */
		.selected, input[type="checkbox"]:checked + label {
			font-size: 1.3em;
			height: 1.6em;
			line-height: 1.6em;
			border-radius: 0.3em !important;
		}

		/* Clickable letter for input */
		label { cursor: pointer; }

		label:hover {
			font-size: 1.2em;
			height: 1.6em;
			line-height: 1.6em;
			border-radius: 0.3em !important;
		}

		input[type="checkbox"] { display: none; }
	`,QualityScore.properties={grade:{type:String},input:{type:String}},customElements.define("pnx-quality-score",QualityScore)},3409:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>SearchBar});var ut=ot(4542),Hl=ot(1198),rc=ot(4901),sc=ot(5995),oc=ot(8591),_c=ot(4011),wc=ot(7761),Sc=ot(3444),iu=ot(6627);class SearchBar extends ut.WF{constructor(){super(),this.reduceable=!1,this.reduced=!1,this.placeholder=ut.s6,this.size="md",this._icon="search",this._results=null,this["no-menu-closure"]=!1,this._throttler=null,delete this._lastSearch}connectedCallback(){super.connectedCallback(),this["no-menu-closure"]||(0,sc.listenForMenuClosure)(this,this.reset.bind(this))}attributeChangedCallback(at,st,ot){super.attributeChangedCallback(at,st,ot),"value"==at&&"search"==this._icon&&(this._icon="empty")}_onIconClick(){["empty","warn"].includes(this._icon)&&this.reset(),this.reduceable&&"search"==this._icon&&(this.reduced=!this.reduced)}_onInputChange(at){this.value=at.target.value,this._throttledSearch()}_onResultClick(at){this.dispatchEvent(new CustomEvent("result",{bubbles:!0,composed:!0,detail:at})),this._results=null,this._throttler&&(clearTimeout(this._throttler),this._throttler=null),!this.reduceable&&at?(this.value=null===at||void 0===at?void 0:at.title,this._icon="empty"):(this.value="",this._icon="search",this.reduceable&&(this.reduced=!0))}_throttledSearch(){this._throttler&&(clearTimeout(this._throttler),delete this._throttler),this._throttler=setTimeout(this._search.bind(this),500)}_search(){this.value&&0!=this.value.length?this.searcher?(this._icon="loading",this._results=null,this.searcher(this.value).then((at=>{if("loading"===this._icon)if(this._icon="empty",at&&0!=at.length)if(!0===at)this._results=null;else{var st;if(this._results=at,!this["no-menu-closure"])null===(st=this._parent)||void 0===st||st.dispatchEvent(new CustomEvent("menu-opened",{detail:{menu:this}}))}else this._results=[]})).catch((at=>{console.error(at),this._icon="warn"}))):console.warn("No search handler defined"):this.reset()}reset(){this._onResultClick(null)}render(){var at,st;const ot={sb:!0,"sb-xxl":"xxl"===this.size,"sb-reduceable":this.reduceable,"sb-reduced":this.reduced};return ut.qy`<div
			id=${this.id}
			class=${(0,Hl.H)(ot)}
			part="container"
		>
			<slot name="pre" class=${(0,Hl.H)({"sb-reduced":this.reduced})}></slot>

			<input
				id="${this.id}-input"
				type="text"
				placeholder=${this.placeholder}
				autocomplete="off"
				@change=${this._onInputChange.bind(this)}
				@keypress=${this._onInputChange.bind(this)}
				@paste=${this._onInputChange.bind(this)}
				@input=${this._onInputChange.bind(this)}
				.value=${this.value||""}
				part="input"
			/>

			<span
				class="sb-icon"
				@click=${this._onIconClick.bind(this)}
			>
				${"search"==this._icon?(0,sc.fa)(wc.$U):ut.s6}
				${"loading"==this._icon?(0,sc.fa)(Sc.s4,{classes:["fa-spin"]}):ut.s6}
				${"empty"==this._icon?(0,sc.fa)(iu.faXmark):ut.s6}
				${"warn"==this._icon?(0,sc.fa)(_c.lE):ut.s6}
			</span>

			${!this.reduced&&this._results?ut.qy`
				<div class="sb-results">
					${0===this._results.length?ut.qy`
						<div class="sb-empty">${null===(at=this._parent)||void 0===at||null===(st=at._t)||void 0===st?void 0:st.pnx.search_empty}</div>
					`:ut.s6}

					${(0,rc.T)(this._results,(at=>ut.qy`
						<div class="sb-result" @click=${()=>this._onResultClick(at)}>
							${at.title}
							${at.subtitle&&""!=at.subtitle?ut.qy`<br /><small>${at.subtitle}</small>`:ut.s6}
						</div>
					`))}
				</div>
			`:ut.s6}
		</div>`}}SearchBar.styles=[oc.Op,ut.AH`
		/* Container */
		.sb {
			display: flex;
			align-items: center;
			justify-content: space-between;
			gap: 5px;
			border: 1px solid var(--widget-border-div);
			border-radius: 5px;
			background-color: var(--widget-bg);
			color: var(--widget-font);
			height: 30px;
			border-radius: 20px;
			position: relative;
			padding: 0 0 0 10px;
			width: fit-content;
			max-width: 100%;
			box-sizing: border-box;
			font-family: var(--font-family);
		}
		.sb.sb-xxl {
			height: 40px;
			line-height: 40px;
		}
		.sb.sb-reduceable {
			width: 360px;
		}
		.sb.sb-reduceable.sb-reduced {
			width: fit-content;
			padding: 0;
			gap: 0;
		}

		/* Text field */
		.sb input {
			background: none;
			border: none !important;
			outline: none;
			height: 20px;
			width: 100%;
			font-family: var(--font-family);
		}
		.sb.sb-xxl input {
			font-size: 1.1em;
		}
		.sb.sb-reduceable.sb-reduced input {
			display: none;
		}

		/* Status icon */
		.sb-icon {
			cursor: pointer;
			height: 30px;
			line-height: 30px;
			width: 30px;
			min-width: 30px;
			text-align: center;
		}
		.sb.sb-xxl .sb-icon {
			height: 40px;
			line-height: 40px;
			width: 40px;
			min-width: 40px;
		}
		.sb-icon svg {
			pointer-events: none;
			width: 14px;
			height: 14px;
		}

		/* Search results */
		.sb-results {
			position: absolute;
			top: 35px;
			list-style: none;
			margin: 0;
			padding: 0;
			max-width: calc(100% - 20px);
			border: 1px solid var(--widget-border-div);
			border-radius: 10px;
			background-color: var(--widget-bg);
			color: var(--widget-font);
			z-index: 130;
			font-size: 1.05em;
  			line-height: normal;
			font-family: var(--font-family);
		}
		.sb.sb-xxl .sb-results {
			top: 45px;
		}
		.sb-result,
		.sb-empty {
			display: block;
			padding: 5px 15px;
			white-space: nowrap;
			overflow: hidden;
			text-overflow: ellipsis;
			cursor: pointer;
			border-radius: 0;
		}
		.sb-result:hover {
			background-color: var(--widget-bg-hover);
		}
		.sb-result:first-child {
			border-top-right-radius: 10px;
			border-top-left-radius: 10px;
			padding-top: 15px;
		}
		.sb-result:last-child {
			border-bottom-right-radius: 10px;
			border-bottom-left-radius: 10px;
			padding-bottom: 15px;
		}
	`],SearchBar.properties={id:{type:String},placeholder:{type:String},reduceable:{type:Boolean,reflect:!0},reduced:{type:Boolean,reflect:!0},value:{type:String},size:{type:String},_icon:{state:!0},_results:{state:!0},searcher:{type:Function},"no-menu-closure":{type:Boolean}},customElements.define("pnx-search-bar",SearchBar)},8780:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>SemanticsEditor});var ut=ot(4542),Hl=ot(9039),rc=ot(2283),sc=ot(8591),oc=ot(2614),_c=ot.n(oc);class SemanticsEditor extends ut.WF{constructor(){super(),this.semantics=null,this._valid=!0,this._firstSemantics=null,this.rows=3}connectedCallback(){super.connectedCallback(),this._firstSemantics=null===this.semantics?[]:_c().parse(_c().stringify(this.semantics))}getDiff(){return(0,rc.computeDiffTags)(this._firstSemantics||[],this.semantics)}checkValidity(){return this._valid}reset(){let at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.semantics=null,this._valid=!0,this._firstSemantics=at,this.semantics=at}_onInput(at){const st=at.target;try{this.semantics=(0,rc.parseSemanticsString)(st.value)||[],this._valid=!0}catch(ot){"Invalid tags"!==ot.message&&console.error(ot),this._valid=!1}}_onBlur(at){const st=at.target.checkValidity();if(this._valid)at.target.setCustomValidity(""),this.dispatchEvent(new CustomEvent("change",{detail:{semantics:this.semantics||[],delta:(0,rc.computeDiffTags)(this._firstSemantics||[],this.semantics)}}));else if(st){var ot;at.target.setCustomValidity((null===(ot=this._t)||void 0===ot?void 0:ot.pnx.semantics_editor_error)||"Invalid syntax"),at.target.reportValidity()}}render(){var at;return ut.qy`
			<textarea
				part="text"
				autocomplete="off"
				autocorrect="off"
				autocapitalize="off"
				spellcheck="false"
				placeholder=${(null===(at=this._t)||void 0===at?void 0:at.pnx.semantics_editor_example)||"key1=value1\nprefix|key2=value2"}
				@input=${this._onInput}
  				@blur=${this._onBlur}
				rows=${this.rows}
				.value=${(this.semantics||[]).map((at=>`${at.key}=${at.value}`)).join("\n")}
			></textarea>
		`}}SemanticsEditor.styles=[sc.PC,ut.AH`
		textarea:invalid {
			border: 2px solid var(--red);
			background-color:var(--beige);
		}
	`],SemanticsEditor.properties={semantics:{converter:Hl.A.GetJSONConverter(),reflect:!0},rows:{type:Number},_valid:{state:!0},_t:{converter:Hl.A.GetJSONConverter()},_firstSemantics:{state:!0}},customElements.define("pnx-semantics-editor",SemanticsEditor)},2373:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>SemanticsTable});var ut=ot(4542),Hl=ot(8591),rc=ot(2283);class SemanticsTable extends ut.WF{render(){if(!this.source)return ut.s6;const at=(0,rc.groupByPrefix)(this.source.semantics);return ut.qy`<table>
			<thead>
				<tr><th>${this._t.pnx.semantics_key}</th><th>${this._t.pnx.semantics_value}</th></tr>
			</thead>
			<tbody>
				${at.map((at=>at.tags.map((st=>ut.qy`
					<tr>
						<td>
							${""!=at.prefix?at.logo?ut.qy`<img src=${at.logo} class="prefix-logo" alt=${at.prefix} title=${at.title} />`:ut.qy`<small>(${at.prefix})</small>`:ut.s6}
							${at.key_transform?at.key_transform(st,this._t):st.key}
						</td>
						<td>
							${at.value_transform?at.value_transform(st,this._t):st.value}
							${st.qualifiers?ut.qy`<div class="qualifiers">
								<b>${this._t.pnx.semantics_qualifiers}</b>
								<ul>
									${st.qualifiers.map((at=>ut.qy`<li>${at.subkey} = ${at.value}</li>`))}
								</ul>
							</div>`:ut.s6}
						</td>
					</tr>
				`))))}
			</tbody>
		</table>`}}SemanticsTable.styles=[Hl.tp,ut.AH`
		:host { display: block; }
		th:first-child, td:first-child { width: 30%; }
		td { vertical-align: top; }

		td small { color: var(--grey-semi-dark); }
		.qualifiers { margin-top: 5px; }
		.qualifiers > b { margin: 8px 0; }
		.qualifiers ul {
			list-style: none;
			margin: 0px 0px 0px 15px;
			padding: 0;
		}

		img.prefix-logo {
			max-width: 15px;
			max-height: 15px;
			aspect-ratio: 1;
			vertical-align: middle;
		}
	`],SemanticsTable.properties={source:{type:Object}},customElements.define("pnx-semantics-table",SemanticsTable)},5202:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>TogglableGroup});var ut=ot(4542),Hl=ot(8591),rc=ot(5995),sc=ot(1198);class TogglableGroup extends ut.WF{constructor(){super(),this._opened=!1}open(){var at;this._opened=!0,null===(at=this._parent)||void 0===at||at.dispatchEvent(new CustomEvent("menu-opened",{detail:{menu:this}})),this.adjustMenuPosition(this._btn),this._chevron&&(this._chevron.style.rotate="180deg")}close(){this._opened=!1,this._chevron&&(this._chevron.style.rotate="")}connectedCallback(){super.connectedCallback(),(0,rc.listenForMenuClosure)(this,this.close.bind(this))}handleButtonSlotChange(at){this._btn=at.target.assignedNodes().pop(),this._btn&&(this._chevron=this._btn.querySelector("svg.fa-chevron-down"),this._chevron&&(this._chevron.style.transition="rotate 0.2s",this._chevron.style.rotate=this._opened?"180deg":""),this._btn.addEventListener("click",(()=>{this._opened?this.close():this.open()})))}adjustMenuPosition(at){const st=this.shadowRoot.querySelector("div[part='menu']");st.style.top=null,st.style.bottom=null,st.style.right=null,st.style.left=null,st.style.overflowY=null,st.style.marginTop=null;const ot=at.getBoundingClientRect();let ut=st.getBoundingClientRect();const Hl=ut.right<=window.innerWidth-10,rc=ut.bottom<=window.innerHeight-10;Hl&&rc?st.style.top=`${ot.bottom+5}px`:Hl||rc?rc?Hl||(st.style.marginTop="5px",st.style.right=window.innerWidth-ot.right+"px"):(st.style.bottom="10px",st.style.top=`${ot.bottom+5}px`,st.style.overflowY="auto"):(st.style.right=window.innerWidth-ot.left+5+"px",st.style.bottom=window.innerHeight-ot.bottom+"px",ut=st.getBoundingClientRect(),ut.top-10<0&&(st.style.bottom="10px",st.style.top=`${ot.top}px`,st.style.overflowY="auto"))}render(){const at={"pnx-panel":!0,"pnx-panel-fixed":!0,"pnx-hidden":!this._opened,"pnx-padded":"false"!==this.padded};return ut.qy`<div class="container" @click=${at=>at.stopPropagation()}>
			<slot name="button" @slotchange=${this.handleButtonSlotChange}></slot>
			<div class=${(0,sc.H)(at)} part="menu">
				<slot></slot>
			</div>
		</div>`}}TogglableGroup.styles=[Hl.nd,ut.AH`
		div.container {
			position: relative;
			height: 100%;
		}

		.pnx-panel { z-index: 130; }
		.pnx-panel-fixed { position: fixed; }
	`],TogglableGroup.properties={_opened:{state:!0},padded:{type:String}},customElements.define("pnx-togglable-group",TogglableGroup)},9472:(at,st,ot)=>{"use strict";ot.r(st),ot.d(st,{AnnotationsSwitch:()=>oc.A,Button:()=>Hl.A,ButtonGroup:()=>ut.A,CopyButton:()=>rc.A,Grade:()=>sc.A,LinkButton:()=>_c.A,ListGroup:()=>wc.A,ListItem:()=>Sc.A,Loader:()=>iu.A,Map:()=>su.A,MapMore:()=>lu.A,Photo:()=>cu.Ay,Popup:()=>uu.A,ProgressBar:()=>pu.A,QualityScore:()=>mu.A,SearchBar:()=>gu.A,SemanticsEditor:()=>Au.A,SemanticsTable:()=>yu.A,TogglableGroup:()=>_u.A,widgets:()=>xu});var ut=ot(7679),Hl=ot(4450),rc=ot(1903),sc=ot(5051),oc=ot(6254),_c=ot(438),wc=ot(5271),Sc=ot(5525),iu=ot(3109),su=ot(5642),lu=ot(2771),cu=ot(9048),uu=ot(4374),pu=ot(4364),mu=ot(2675),gu=ot(3409),Au=ot(8780),yu=ot(2373),_u=ot(5202),xu=ot(222)},5114:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>CopyCoordinates});var ut=ot(4542),Hl=ot(7343),rc=ot(5995),sc=ot(2593),oc=ot(8591);class CopyCoordinates extends ut.WF{render(){var at,st;const ot=(0,Hl.degToDms)(this.gps[0]),oc=ot.d<0?`${Math.abs(ot.d)}\xb0${ot.m}'${ot.s}"W`:`${ot.d}\xb0${ot.m}'${ot.s}"E`,_c=(0,Hl.degToDms)(this.gps[1]),wc=_c.d<0?`${Math.abs(_c.d)}\xb0${_c.m}'${_c.s}"S`:`${_c.d}\xb0${_c.m}'${_c.s}"N`,Sc={ddeclatlon:`${this.gps[1].toFixed(7)}, ${this.gps[0].toFixed(7)}`,ddeclonlat:`${this.gps[0].toFixed(7)}, ${this.gps[1].toFixed(7)}`,ddmslonlat:`${oc}, ${wc}`,ddmslatlon:`${wc}, ${oc}`};return ut.qy`<pnx-button-group style="display: inline-block; vertical-align: baseline" dir="row">
			<pnx-copy-button
				size="sm"
				text=${Sc.ddeclonlat}
				title=${null===(at=this._parent)||void 0===at?void 0:at._t.pnx.metadata_location_copy.replace("{v}",Sc.ddeclonlat)}
			></pnx-copy-button>

			<pnx-togglable-group padded="false" ._parent=${this._parent}>
				<pnx-button
					size="sm"
					slot="button"
					title=${null===(st=this._parent)||void 0===st?void 0:st._t.pnx.metadata_location_copy_more}
				>${(0,rc.fa)(sc.Jt)}</pnx-button>
				<pnx-list-group>
					${Object.values(Sc).map((at=>{var st;return ut.qy`
						<pnx-copy-button unstyled text=${at} ._t=${this._parent._t}>
							${null===(st=this._parent)||void 0===st?void 0:st._t.pnx.metadata_location_copy.replace("{v}",at)}
						</pnx-copy-button>
					`}))}
				</pnx-list-group>
			</pnx-togglable-group>
		</pnx-button-group>`}}CopyCoordinates.styles=[oc.kq,ut.AH`
		pnx-togglable-group::part(menu) {
			border-radius: 5px;
			min-width: unset;
		}
	`],CopyCoordinates.properties={gps:{type:Array}},customElements.define("pnx-copy-coordinates",CopyCoordinates)},2603:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>GeoSearch});var ut=ot(927),Hl=ot.n(ut),rc=ot(4542),sc=ot(3606),oc=ot(5995);ot(3630);const _c={ban:sc.forwardGeocodingBAN,standard:sc.forwardGeocodingStandard,nominatim:sc.forwardGeocodingNominatim};class GeoSearch extends rc.WF{constructor(){super(),this.geocoder="nominatim",this._geolocateCtrl=new(Hl().GeolocateControl)({positionOptions:{enableHighAccuracy:!0,timeout:6e4,maximumAge:3e5},showAccuracyCircle:!0,showUserLocation:!0,trackUserLocation:!0})}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),this._geocoderEngine=_c[this.geocoder]||(at=>_c.standard(at,this.geocoder)),(0,oc.onceParentAvailable)(this).then((()=>{var at,st;return null===(at=this._parent)||void 0===at||null===(st=at.onceMapReady)||void 0===st?void 0:st.call(at).then((()=>{this._geolocate=this._geolocateCtrl.onAdd(this._parent.map),this._geolocate.setAttribute("slot","pre")}))}))}_onInput(at){const st=at.match(/([-+]?\d{1,2}\.\d+),\s*([-+]?\d{1,3}\.\d+)/),ot=at.match(/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/);if(st){const at=parseFloat(st[1]),ot=parseFloat(st[2]);return this._parent.map.jumpTo({center:[ot,at],zoom:16}),Promise.resolve(!0)}return ot?(this._parent.select(null,at),Promise.resolve(!0)):this._geocoderEngine({query:at,limit:5,proximity:this._parent.map.getCenter().lat+","+this._parent.map.getCenter().lng}).then((at=>at=at.features.map((at=>({title:at.place_name.split(",")[0],subtitle:at.place_name.split(",").slice(1).join(", "),data:at})))))}_onSelect(at){const st=at.detail;var ot,ut;st&&(st.data.bounds?null===(ot=this._parent)||void 0===ot||ot.map.fitBounds(st.data.bounds,{animate:!1}):null===(ut=this._parent)||void 0===ut||ut.map.jumpTo({center:st.data.center,zoom:st.data.zoom||13}))}render(){var at,st;const ot=(null===(at=this._parent)||void 0===at?void 0:at.isWidthSmall())||!1;return rc.qy`
			<pnx-search-bar
				id="pnx-widget-search-bar"
				placeholder=${null===(st=this._parent)||void 0===st?void 0:st._t.pnx.search_address}
				._parent=${this._parent}
				.searcher=${this._onInput.bind(this)}
				.reduceable=${ot}
				.reduced=${ot}
				size="xxl"
				class="pnx-print-hidden"
				@result=${this._onSelect.bind(this)}
			>
				${this._geolocate}
			</pnx-search-bar>
		`}}GeoSearch.properties={geocoder:{type:String},_geolocate:{state:!0}},customElements.define("pnx-widget-geosearch",GeoSearch)},4385:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>Legend});var ut=ot(4542),Hl=ot(8591),rc=ot(5995),sc=ot(6668),oc=ot(5940),_c=ot(1198),wc=ot(7208);class Legend extends ut.WF{constructor(){super(),this.light=!1}connectedCallback(){super.connectedCallback(),(0,rc.onceParentAvailable)(this).then((()=>this.requestUpdate()))}render(){var at,st,ot,Hl;const Sc={"pnx-panel":!0,"pnx-padded":"map"==this.focus,"pnx-legend-light":this.light};return ut.qy`<div class=${(0,_c.H)(Sc)} part="panel">
			<div
				class="presentation"
				style=${!this.light&&"map"!=this.focus&&this.picture?"display: none":""}
			>
				<img class="logo" src=${oc} alt="" />

				${this.light?ut.qy`
					&copy; <a
						href=${(0,wc.PanoramaxWebsiteURL)()}
						title=${null===(at=this._parent)||void 0===at?void 0:at._t.map.more_panoramax}
						target="_blank"
					>${null===(st=this._parent)||void 0===st?void 0:st._t.pnx.panoramax}</a> |
				`:ut.qy`
					<div>
						${null===(ot=this._parent)||void 0===ot?void 0:ot._t.pnx.whats_panoramax}
						<pnx-link-button
							title=${null===(Hl=this._parent)||void 0===Hl?void 0:Hl._t.map.more_panoramax}
							kind="superinline"
							href=${(0,wc.PanoramaxWebsiteURL)()}
							target="_blank"
							size="sm"
						>
							${(0,rc.fa)(sc.iW)}
						</pnx-link-button>
					</div>
				`}
			</div>
			<pnx-picture-legend
				._parent=${this._parent}
				style=${"map"==this.focus?"display: none":""}
				collapsable
				light=${this.light||ut.s6}
			>
				<slot slot="editors" name="editors">
					<pnx-widget-osmeditors ._parent=${this._parent} />
				</slot>
			</pnx-picture-legend>
			<pnx-map-legend
				._parent=${this._parent}
				style=${"map"!=this.focus?"display: none":""}
				light=${this.light||ut.s6}
			></pnx-map-legend>
		</div>`}}Legend.styles=[Hl.nd,ut.AH`
		.pnx-panel[part="panel"] {
			border-radius: 10px;
			position: relative;
			max-width: 450px;
			z-index: 121; /* To appear above mini component */
			min-width: unset;
		}
		.pnx-panel[part="panel"].pnx-padded {
			padding: 10px;
			width: 250px;
		}
		.presentation {
			font-size: 0.85em;
			line-height: 1em;
			display: flex;
			gap: 5px;
			align-items: center;
		}
		.logo {
			width: 45px;
		}
		pnx-map-legend {
			display: block;
			margin-top: 5px;
		}

		/* Lighter/smaller version */
		.pnx-panel[part="panel"].pnx-legend-light {
			display: flex;
			gap: 3px;
			padding: 3px 8px 3px 3px;
			width: unset;
			min-width: unset;
			align-items: center;
			font-size: 10px;
			margin-right: -10px;
			margin-bottom: -10px;
			border-radius: 0;
			border-top-left-radius: 5px;
			border-right: none;
  			border-bottom: none;
		}
		.pnx-legend-light a,
		.pnx-legend-light .presentation {
			font-size: 10px;
		}
		.pnx-legend-light .logo {
			width: 15px;
		}

		.pnx-legend-light pnx-map-legend {
			width: max-content;
			margin-top: unset;
			font-size: 10px;
		}
	`],Legend.properties={focus:{type:String},picture:{type:String},light:{type:Boolean}},customElements.define("pnx-widget-legend",Legend)},4529:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>MapFiltersButton});var ut=ot(4542),Hl=ot(5995),rc=ot(1904),sc=ot(2593),oc=ot(6627),_c=ot(8591),wc=ot(2771);class MapFiltersButton extends ut.WF{constructor(){super(),this["user-search"]=!1,this["quality-score"]=!1,this._active=!1}connectedCallback(){super.connectedCallback(),(0,Hl.onceParentAvailable)(this).then((()=>{var at,st;return null===(at=this._parent)||void 0===at||null===(st=at.onceMapReady)||void 0===st?void 0:st.call(at).then((()=>{this._active=Object.keys(this._parent.map._mapFilters).filter((at=>at&&"theme"!==at)).length>0||this._parent.map.getVisibleUsers().filter((at=>"geovisio"!==at)).length>0,this._parent.map.on("filters-changed",(at=>{this._active=Object.keys(at).filter((at=>at&&wc.T.includes(at)&&"theme"!=at)).length>0||this._parent.map.getVisibleUsers().filter((at=>"geovisio"!==at)).length>0})),this._parent.map.on("users-changed",(at=>{this._active=Object.keys(this._parent.map._mapFilters).filter((at=>at&&"theme"!==at)).length>0||at.usersIds.filter((at=>"geovisio"!==at)).length>0}))}))}))}render(){var at,st;const ot=null===(at=this._parent)||void 0===at?void 0:at.isWidthSmall(),_c=(0,Hl.fa)(oc.faXmark,{styles:{"pointer-events":"auto"}});return _c.addEventListener("click",(at=>{at.stopPropagation(),this.shadowRoot.querySelector("pnx-map-filters-menu")._onReset(),this.shadowRoot.querySelector("#pnx-widget-filter")._opened=!1})),ut.qy`
			<pnx-togglable-group
				id="pnx-widget-filter"
				padded="false"
				class="pnx-only-map pnx-print-hidden"
				._parent=${this._parent}
			>
				<pnx-button kind="flat" size="xl" slot="button">
					${(0,Hl.fa)(rc._$)}
					${this._active?ut.qy`<span class="pnx-active-icon"></span>`:ut.s6}
					${ot?ut.s6:null===(st=this._parent)||void 0===st?void 0:st._t.pnx.filters}
					${ot?ut.s6:this._active?_c:(0,Hl.fa)(sc.Jt)}
				</pnx-button>
				<pnx-map-filters-menu
					id="pnx-map-filters-menu"
					._parent=${this._parent}
					user-search=${this["user-search"]}
					quality-score=${this["quality-score"]}
				></pnx-map-filters-menu>
			</pnx-togglable-group>
		`}}MapFiltersButton.styles=[_c.s0],MapFiltersButton.properties={"user-search":{type:Boolean},"quality-score":{type:Boolean},_active:{state:!0}},customElements.define("pnx-widget-mapfilters",MapFiltersButton)},1614:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>MapLayersButton});var ut=ot(4542),Hl=ot(5995),rc=ot(4220),sc=ot(2593),oc=ot(6627),_c=ot(8591);class MapLayersButton extends ut.WF{constructor(){super(),this._active=!1}connectedCallback(){super.connectedCallback();const at=[void 0,null,"","default"];(0,Hl.onceParentAvailable)(this).then((()=>{var st,ot;return null===(st=this._parent)||void 0===st||null===(ot=st.onceMapReady)||void 0===ot?void 0:ot.call(st).then((()=>{this._active=!at.includes(this._parent.map._mapFilters.theme),this._parent.map.on("filters-changed",(st=>{this._active=!at.includes(st.theme)}))}))}))}render(){var at,st;const ot=null===(at=this._parent)||void 0===at?void 0:at.isWidthSmall(),_c=(0,Hl.fa)(oc.faXmark,{styles:{"pointer-events":"auto"}});return _c.addEventListener("click",(at=>{at.stopPropagation();const st=this.shadowRoot.querySelector("pnx-map-layers-menu");st.shadowRoot.querySelector("#pnx-map-theme").value="default",st._onThemeSelect({target:{value:"default"}}),this.shadowRoot.querySelector("#pnx-widget-map-layers")._opened=!1})),ut.qy`
			<pnx-togglable-group
				id="pnx-widget-map-layers"
				class="pnx-print-hidden"
				._parent=${this._parent}
			>
				<pnx-button kind="flat" size="xl" slot="button">
					${(0,Hl.fa)(rc.qI)}
					${this._active?ut.qy`<span class="pnx-active-icon"></span>`:ut.s6}
					${ot?ut.s6:null===(st=this._parent)||void 0===st?void 0:st._t.pnx.layers}
					${ot?ut.s6:this._active?_c:(0,Hl.fa)(sc.Jt)}
				</pnx-button>
				<pnx-map-layers-menu
					id="pnx-map-layers-menu"
					._parent=${this._parent}
				></pnx-map-layers-menu>
			</pnx-togglable-group>
		`}}MapLayersButton.styles=[_c.s0],MapLayersButton.properties={_active:{state:!0}},customElements.define("pnx-widget-maplayers",MapLayersButton)},5789:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>OSMEditors});var ut=ot(4542),Hl=ot(5995),rc=ot(7343),sc=ot(7208),oc=ot(3520),_c=ot(6787),wc=ot(7704);const Sc="http://127.0.0.1:8111";class OSMEditors extends ut.WF{constructor(){super(),this._josm=!1}connectedCallback(){super.connectedCallback(),(0,Hl.onceParentAvailable)(this).then((()=>this._parent.onceReady())).then((()=>{this._parent.onceFirstPicLoaded().then(this._onPictureLoad.bind(this)),this._parent.psv.addEventListener("picture-loaded",this._onPictureLoad.bind(this))}))}_onPictureLoad(){var at,st;this._pic=null===(at=this._parent)||void 0===at||null===(st=at.psv)||void 0===st?void 0:st.getPictureMetadata()}_toggleJOSMLive(){var at,st,ot,ut,Hl,sc;(this._josm=!this._josm,this._josm)?fetch(Sc+"/version").then((()=>{var at,st,ot,ut,Hl,sc,oc,_c,wc;const iu=(0,rc.josmBboxParameters)(null===(at=this._parent)||void 0===at||null===(st=at.psv)||void 0===st||null===(ot=st.getPictureMetadata)||void 0===ot?void 0:ot.call(st));if(iu){fetch(`${Sc}/load_and_zoom?${iu}`).catch((at=>{console.warn(at),this._toggleJOSMLive()}))}this._josmListener=()=>{var at,st,ot;const ut=(0,rc.josmBboxParameters)(null===(at=this._parent)||void 0===at||null===(st=at.psv)||void 0===st||null===(ot=st.getPictureMetadata)||void 0===ot?void 0:ot.call(st));if(ut){fetch(`${Sc}/zoom?${ut}`).catch((at=>{console.warn(at),this._toggleJOSMLive()}))}},null===(ut=this._parent)||void 0===ut||null===(Hl=ut.psv)||void 0===Hl||null===(sc=Hl.addEventListener)||void 0===sc||sc.call(Hl,"picture-loaded",this._josmListener),null===(oc=this._parent)||void 0===oc||null===(_c=oc.psv)||void 0===_c||null===(wc=_c.addEventListener)||void 0===wc||wc.call(_c,"picture-loading",this._josmListener)})).catch((at=>{var st;console.warn(at),alert(null===(st=this._parent)||void 0===st?void 0:st._t.pnx.error_josm),this._toggleJOSMLive()})):this._josmListener&&(null===(at=this._parent)||void 0===at||null===(st=at.psv)||void 0===st||null===(ot=st.removeEventListener)||void 0===ot||ot.call(st,"picture-loading",this._josmListener),null===(ut=this._parent)||void 0===ut||null===(Hl=ut.psv)||void 0===Hl||null===(sc=Hl.removeEventListener)||void 0===sc||sc.call(Hl,"picture-loaded",this._josmListener),delete this._josmListener)}render(){var at,st;if(!this._pic)return ut.s6;if(null!==(at=this._parent)&&void 0!==at&&at.isWidthSmall())return ut.qy`
				<pnx-link-button
					size="sm"
					href="geo:${this._pic.gps[1]},${this._pic.gps[0]};u=3"
				>
					${(0,Hl.fa)(wc.A)} ${null===(st=this._parent)||void 0===st?void 0:st._t.pnx.geo_uri}
				</pnx-link-button>
			`;{var ot,rc,Sc,iu;const at={map:`19/${this._pic.gps[1]}/${this._pic.gps[0]}`,source:"Panoramax",photo_overlay:"panoramax",photo:`panoramax/${this._pic.id}`},st=at&&`${(0,sc.IdEditorURL)()}#${new URLSearchParams(at).toString()}`;return ut.qy`
				<pnx-link-button
					size="sm"
					href=${st}
					target="_blank"
					title="${null===(ot=this._parent)||void 0===ot?void 0:ot._t.pnx.contribute_id}"
				>
					${(0,Hl.fa)(oc.gK)} ${null===(rc=this._parent)||void 0===rc?void 0:rc._t.pnx.id}
				</pnx-link-button>

				<pnx-button
					id="pnx-edit-josm"
					size="sm"
					active=${this._josm?"":ut.s6}
					@click=${this._toggleJOSMLive}
					title="${null===(Sc=this._parent)||void 0===Sc?void 0:Sc._t.pnx.josm_live}"
				>
					${(0,Hl.fa)(_c.hU)} ${null===(iu=this._parent)||void 0===iu?void 0:iu._t.pnx.josm}
				</pnx-button>
			`}}}OSMEditors.properties={_pic:{state:!0},_josm:{state:!0}},OSMEditors.styles=ut.AH`
		:host { display: inline-flex; gap: 5px; }
		:host > * { flex: 1; }
		pnx-link-button::part(btn) { height: auto; }
	`,customElements.define("pnx-widget-osmeditors",OSMEditors)},8806:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>PictureLegendActions});var ut=ot(4542),Hl=ot(5995),rc=ot(3613),sc=ot(8591);class PictureLegendActions extends ut.WF{constructor(){super(),this.full=!1}connectedCallback(){super.connectedCallback(),(0,Hl.onceParentAvailable)(this).then((()=>this._parent.onceReady())).then((()=>{this._meta=this._parent.psv.getPictureMetadata(),this._parent.psv.addEventListener("picture-loaded",(()=>{this._meta=this._parent.psv.getPictureMetadata()}))}))}_onPrint(){this._closeGroup(),window.print()}_closeGroup(){this.renderRoot.querySelector("#pic-legend-headline-menu").close()}render(){var at,st,ot,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu,pu;return ut.qy`<pnx-togglable-group padded="false" id="pic-legend-headline-menu" ._parent=${this._parent}>
			<pnx-button slot="button" kind="inline">${(0,Hl.fa)(rc.v)}</pnx-button>
			<pnx-list-group class="pnx-print-hidden" @click=${this._closeMenu}>
				${this._meta?ut.qy`<pnx-copy-button ._t=${null===(at=this._parent)||void 0===at?void 0:at._t} text=${this._meta.id} unstyled>
					${null===(st=this._parent)||void 0===st?void 0:st._t.pnx.metadata_general_copy_picid}
				</pnx-copy-button>`:ut.s6}

				<a
					download
					target="_blank"
					href=${null===(ot=this._meta)||void 0===ot||null===(sc=ot.panorama)||void 0===sc?void 0:sc.hdUrl}
					@click=${this._closeGroup}
				>${null===(oc=this._parent)||void 0===oc?void 0:oc._t.pnx.share_image}</a>

				${this._parent.isWidthSmall()?ut.s6:ut.qy`<button @click=${this._onPrint}>
					${null===(_c=this._parent)||void 0===_c?void 0:_c._t.pnx.share_print}
				</button>`}

				${(null===(wc=this._parent)||void 0===wc||null===(Sc=wc.api)||void 0===Sc?void 0:Sc.getRSSURL())&&ut.qy`
					<a
						target="_blank"
						href=${null===(iu=this._parent)||void 0===iu?void 0:iu.api.getRSSURL(null===(su=this._parent)||void 0===su||null===(lu=su.map)||void 0===lu||null===(cu=lu.getBounds)||void 0===cu?void 0:cu.call(lu))}
						title=${null===(uu=this._parent)||void 0===uu?void 0:uu._t.pnx.share_rss_title}
						@click=${this._closeGroup}
					>
						${null===(pu=this._parent)||void 0===pu?void 0:pu._t.pnx.share_rss}
					</a>
				`}
			</pnx-list-group>
		</pnx-togglable-group>`}}PictureLegendActions.styles=[sc.BQ,ut.AH`
		pnx-togglable-group::part(menu) {
			border-radius: 5px;
			min-width: unset;
		}
	`],PictureLegendActions.properties={full:{type:Boolean},_meta:{state:!0}},customElements.define("pnx-picture-legend-actions",PictureLegendActions)},8305:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>Player});var ut=ot(4542),Hl=ot(5995),rc=ot(1705),sc=ot(6386),oc=ot(7472),_c=ot(5431),wc=ot(6533);ot(1230);class Player extends ut.WF{constructor(){super(),this.playing=!1,this.size="xl",this.more="depends",this._activePrev=!0,this._activePlay=!0,this._activeNext=!0}createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),(0,Hl.onceParentAvailable)(this).then((()=>{var at,st;return null===(at=this._parent)||void 0===at||null===(st=at.oncePSVReady)||void 0===st?void 0:st.call(at).then((()=>{this._parent.psv.addEventListener("sequence-playing",(()=>this.playing=!0)),this._parent.psv.addEventListener("sequence-stopped",(()=>this.playing=!1)),this._parent.psv.addEventListener("picture-loaded",this._changeActiveStates.bind(this)),this._parent.psv.addEventListener("pictures-navigation-changed",this._changeActiveStates.bind(this)),this._changeActiveStates()}))}))}_changeActiveStates(){var at,st,ot,ut,Hl,rc;"pic"===(null===(at=(st=this._parent.psv).getPicturesNavigation)||void 0===at?void 0:at.call(st))?(this._activeNext=!1,this._activePlay=!1,this._activePrev=!1):(this._activePrev=null!=(null===(ot=this._parent.psv.getPictureMetadata())||void 0===ot||null===(ut=ot.sequence)||void 0===ut?void 0:ut.prevPic),null!=(null===(Hl=this._parent.psv.getPictureMetadata())||void 0===Hl||null===(rc=Hl.sequence)||void 0===rc?void 0:rc.nextPic)?(this._activeNext=!0,this._activePlay=!0):(this._activeNext=!1,this._activePlay=!1));this.requestUpdate()}_onPlayClick(){var at,st,ot,ut,Hl,rc;null!==(at=this._parent)&&void 0!==at&&null!==(st=at.psv)&&void 0!==st&&st.isSequencePlaying()?(this.playing=!1,null===(ot=this._parent)||void 0===ot||null===(ut=ot.psv)||void 0===ut||ut.stopSequence()):(this.playing=!0,null===(Hl=this._parent)||void 0===Hl||null===(rc=Hl.psv)||void 0===rc||rc.playSequence())}render(){var at,st,ot,Sc,iu,su,lu,cu;return null!==(at=this._parent)&&void 0!==at&&null!==(st=at.psv)&&void 0!==st&&st.addEventListener?ut.qy`
			<pnx-button-group
				id="pnx-widget-player"
				dir="row"
				size=${this.size}
				class="pnx-print-hidden"
				style=${this._activePrev||this._activePlay||this._activeNext?"":"display: none"}
			>
				<pnx-button
					kind="superflat"
					id="pnx-player-prev"
					title=${null===(ot=this._parent)||void 0===ot?void 0:ot._t.pnx.sequence_prev}
					@click=${()=>{var at,st;return null===(at=this._parent)||void 0===at||null===(st=at.psv)||void 0===st?void 0:st.goToPrevPicture()}}
					.disabled=${!this._activePrev}
				>${(0,Hl.fa)(rc.TH)}</pnx-button>

				<pnx-button
					kind="superflat"
					id="pnx-player-play"
					title=${this.playing?null===(Sc=this._parent)||void 0===Sc?void 0:Sc._t.pnx.sequence_pause:null===(iu=this._parent)||void 0===iu?void 0:iu._t.pnx.sequence_play}
					.disabled=${!this._activePlay}
					@click=${this._onPlayClick.bind(this)}
				>${this.playing?(0,Hl.fa)(oc.G1):(0,Hl.fa)(sc.ij)}</pnx-button>

				<pnx-button
					kind="superflat"
					id="pnx-player-next"
					title=${null===(su=this._parent)||void 0===su?void 0:su._t.pnx.sequence_next}
					.disabled=${!this._activeNext}
					@click=${()=>{var at,st;return null===(at=this._parent)||void 0===at||null===(st=at.psv)||void 0===st?void 0:st.goToNextPicture()}}
				>${(0,Hl.fa)(_c.vF)}</pnx-button>

				${"never"===this.more||"always"!==this.more&&null!==(lu=this._parent)&&void 0!==lu&&lu.isWidthSmall()?ut.s6:ut.qy`
					<pnx-togglable-group padded="false" ._parent=${this._parent}>
						<pnx-button
							kind="flat"
							id="pnx-player-more"
							title=${null===(cu=this._parent)||void 0===cu?void 0:cu._t.pnx.sequence_more}
							class=${"depends"===this.more?"pnx-xs-hidden":""}
							slot="button"
						>${(0,Hl.fa)(wc.faEllipsisVertical)}</pnx-button>

						<pnx-player-options ._parent=${this._parent}></pnx-player-options>
					</pnx-togglable-group>
				`}
			</pnx-button-group>
		`:ut.s6}}Player.properties={playing:{type:Boolean,reflect:!0},size:{type:String},more:{type:String},_activePrev:{state:!0},_activePlay:{state:!0},_activeNext:{state:!0}},customElements.define("pnx-widget-player",Player)},3023:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>Zoom});var ut=ot(4542),Hl=ot(9048),rc=ot(3407),sc=ot(5995),oc=ot(1372),_c=ot(7290);ot(1870);class Zoom extends ut.WF{createRenderRoot(){return this}connectedCallback(){super.connectedCallback(),(0,sc.onceParentAvailable)(this).then((()=>{var at,st;return null===(at=this._parent)||void 0===at||null===(st=at.oncePSVReady)||void 0===st?void 0:st.call(at).then((()=>{var at,st;this._lastWantedZoom=(null===(at=this._parent)||void 0===at||null===(st=at.psv)||void 0===st?void 0:st.getZoomLevel())||Hl.cS}))}))}_onClick(at,st){if(this._parent.map&&this._parent.isMapWide())st?this._parent.map.zoomIn({},{originalEvent:at}):this._parent.map.zoomOut({},{originalEvent:at});else{this._parent.lastPsvAnim&&this._parent.lastPsvAnim.cancel();const at=st?Math.min(100,this._lastWantedZoom+rc.$p):Math.max(0,this._lastWantedZoom-rc.$p);this._parent.lastPsvAnim=this._parent.psv.animate({speed:Hl.LM,zoom:at}),this._lastWantedZoom=at}}render(){var at,st;return ut.qy`
			<pnx-button-group
				id="pnx-widget-zoom"
				dir="column"
				size="xl"
				class="pnx-mobile-hidden pnx-print-hidden"
			>
				<pnx-button
					id="pnx-zoom-in"
					kind="superflat"
					title=${null===(at=this._parent)||void 0===at?void 0:at._t.pnx.zoomIn}
					@click=${at=>this._onClick(at,!0)}
				>${(0,sc.fa)(oc.QL)}</pnx-button>

				<pnx-button
					id="pnx-zoom-out"
					kind="superflat"
					title=${null===(st=this._parent)||void 0===st?void 0:st._t.pnx.zoomOut}
					@click=${at=>this._onClick(at,!1)}
				>${(0,sc.fa)(_c.EZ)}</pnx-button>
			</pnx-button-group>
		`}}Zoom.properties={_lastWantedZoom:{state:!0}},customElements.define("pnx-widget-zoom",Zoom)},222:(at,st,ot)=>{"use strict";ot.r(st),ot.d(st,{CopyCoordinates:()=>ut.A,GeoSearch:()=>Hl.A,Legend:()=>rc.A,MapFiltersButton:()=>sc.A,MapLayersButton:()=>oc.A,OSMEditors:()=>_c.A,PictureLegendActions:()=>wc.A,Player:()=>Sc.A,Zoom:()=>iu.A});var ut=ot(5114),Hl=ot(2603),rc=ot(4385),sc=ot(4529),oc=ot(1614),_c=ot(5789),wc=ot(8806),Sc=ot(8305),iu=ot(3023)},5254:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>API});var ut=ot(7343);class API extends EventTarget{constructor(at){let st=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(super(),null===at||void 0===at||"string"!==typeof at){const at=new Error("endpoint parameter is empty or not a valid string");throw this.dispatchEvent(new CustomEvent("broken",{detail:{error:at}})),at}if(at.startsWith("/")&&(at=window.location.href.split("/").slice(0,3).join("/")+at),!API.isValidHttpUrl(at)){const st=new Error(`endpoint parameter is not a valid URL: ${at}`);throw this.dispatchEvent(new CustomEvent("broken",{detail:{error:st}})),st}this._endpoint=at,this._isReady=0,this._dataBbox=null,this._fetchOpts=(null===st||void 0===st?void 0:st.fetch)||{},this._metadata={},this._configuration=null,st.skipReadLanding||(this._readLanding=fetch(at,this._getFetchOptions()).then((at=>at.json())).then((at=>this._parseLanding(at,st))).catch((at=>(this._isReady=-1,console.error(at),this.dispatchEvent(new CustomEvent("broken",{detail:{error:at}})),Promise.reject("Viewer failed to communicate with API")))).then((()=>this._loadMapStyles(st.style,st.users))).then((()=>(this._isReady=1,this.dispatchEvent(new Event("ready")),"API is ready"))))}onceReady(){return-1==this._isReady?Promise.reject("Viewer failed to communicate with API"):1==this._isReady?Promise.resolve("API is ready"):this._readLanding}isReady(){return 1==this._isReady}getAvailableFeatures(){return Object.entries(this._endpoints).filter((at=>null!==at[1])).map((at=>at[0]))}getUnavailableFeatures(){return Object.entries(this._endpoints).filter((at=>null===at[1])).map((at=>at[0]))}_parseLanding(at,st){var ot,ut;if(this._endpoints={collections:null,search:null,style:null,user_style:null,tiles:(null===st||void 0===st?void 0:st.tiles)||null,user_tiles:null,user_search:null,collection_preview:null,item_preview:null,rss:null,report:null},!at||!at.links||!Array.isArray(at.links))throw new Error("API Landing page doesn't contain 'links' list");if(!at.stac_version.startsWith("1."))throw new Error(`API is not in a supported STAC version (Panoramax viewer supports only 1.x, API is ${at.stac_version})`);this._metadata.name=at.title||"Unnamed",this._metadata.stac_version=at.stac_version,this._metadata.geovisio_version=at.geovisio_version;const Hl=[],rc=[];if([{rel:"search",type:"application/geo+json",endpointId:"search",mandatory:!0,missingIssue:"No direct access to pictures metadata."},{rel:"data",type:"application/json",endpointId:"collections",mandatory:!0,missingIssue:"No way for viewer to access sequences."},{rel:"data",type:"application/rss+xml",endpointId:"rss"},{rel:"xyz",type:"application/vnd.mapbox-vector-tile",endpointId:"tiles"},{rel:"xyz-style",type:"application/json",endpointId:"style"},{rel:"user-xyz-style",type:"application/json",endpointId:"user_style"},{rel:"user-xyz",type:"application/vnd.mapbox-vector-tile",endpointId:"user_tiles"},{rel:"user-search",type:"application/json",endpointId:"user_search",missingIssue:"Filter map data by user name will not be available."},{rel:"collection-preview",type:"image/jpeg",endpointId:"collection_preview",missingIssue:"Display of thumbnail could be slower."},{rel:"item-preview",type:"image/jpeg",endpointId:"item_preview",missingIssue:"Display of thumbnail could be slower."},{rel:"report",type:"application/json",endpointId:"report"}].forEach((st=>{const ot=at.links.find((at=>at.rel==st.rel&&at.type==st.type));if(ot){if(!API.isValidHttpUrl(ot.href))throw new Error(`API endpoint '${ot.rel}' (${ot.type}) is not a valid URL: ${ot.href}`);this._endpoints[st.endpointId]||(this._endpoints[st.endpointId]=ot.href)}else if(!this._endpoints[st.endpointId]){let at=`API doesn't offer a '${st.rel}' (${st.type}) endpoint in its links`;st.missingIssue&&(at+=`\n${st.missingIssue}`),st.mandatory?Hl.push(at):st.missingIssue&&rc.push(at)}})),this._endpoints.style||this._endpoints.tiles||rc.push("API doesn't offer 'xyz' or 'xyz-style' endpoints in its links.\nMap widget will not be available."),this._endpoints.user_style||this._endpoints.user_tiles||rc.push("API doesn't offer 'user-xyz' or 'user-xyz-style' endpoints in its links.\nFilter map data by user ID will not be available."),rc.forEach((at=>console.warn(at))),Hl.length>0)throw new Error(Hl.join("\n"));const sc=null===at||void 0===at||null===(ot=at.extent)||void 0===ot||null===(ut=ot.spatial)||void 0===ut?void 0:ut.bbox;this._dataBbox=sc&&Array.isArray(sc)&&sc.length>0&&Array.isArray(sc[0])&&4===sc[0].length?[[sc[0][0],sc[0][1]],[sc[0][2],sc[0][3]]]:null}_loadMapStyles(at,st){const ot=new Set(st||[]);this.mapStyle={version:8,sources:{},layers:[],metadata:{}};const ut=[this.getMapStyle()];if("string"===typeof at){const st=at.startsWith(this._endpoint)?this._getFetchOptions():void 0;ut.push(fetch(at,st).then((at=>at.json())))}else"object"===typeof at&&ut.push(Promise.resolve(at));return[...ot].filter((at=>"geovisio"!==at)).forEach((at=>{ut.push(this.getUserMapStyle(at,!0))})),Promise.all(ut).then((at=>{const st=["bearing","center","glyphs","light","name","pitch","sky","sprite","terrain","transition","zoom"];at.forEach((at=>{st.forEach((st=>{at[st]&&(this.mapStyle[st]=at[st]||this.mapStyle[st])})),Object.assign(this.mapStyle.sources,(null===at||void 0===at?void 0:at.sources)||{}),Object.assign(this.mapStyle.metadata,(null===at||void 0===at?void 0:at.metadata)||{}),this.mapStyle.layers=this.mapStyle.layers.concat((null===at||void 0===at?void 0:at.layers)||[])}))})).catch((at=>console.error(at)))}_getFetchOptions(){let at=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return Object.assign({signal:at?void 0:AbortSignal.timeout(15e3)},this._fetchOpts)}_getMapRequestTransform(){const at=this._getFetchOptions();if(delete at.signal,Object.keys(at).length>0)return st=>{if(st.startsWith(this._endpoint))return{url:st,...at}}}_getPSVWithCredentials(){return"include"===this._getFetchOptions().credentials?at=>at.startsWith(this._endpoint):void 0}cleanResourceURL(at){if(!at)return;const st=new URL(this._endpoint);return at.startsWith("/")?st.protocol+"//"+st.host+at:at.startsWith("./")?this._endpoint+at.substring(1):at}async getSequenceItems(at){let st=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,ot=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!this.isReady())throw new Error("API is not ready to use");try{return API.isIdValid(at),fetch(st||`${this._endpoints.collections}/${at}/items`,this._getFetchOptions(!0)).then((at=>at.json())).then((st=>{let ut=st;ot&&(ut.features=ot.features.concat(ut.features));const Hl=st.links.find((at=>"next"===at.rel));return Hl?this.getSequenceItems(at,Hl.href,ut):ut}))}catch(ut){return Promise.reject(ut)}}getPicturesAroundCoordinatesUrl(at,st){let ot=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e-4,ut=arguments.length>3?arguments[3]:void 0,Hl=arguments.length>4?arguments[4]:void 0;if(!this.isReady())throw new Error("API is not ready to use");if(isNaN(parseFloat(at))||isNaN(parseFloat(st)))throw new Error("lat and lon parameters should be valid numbers");const rc=[st-ot,at-ot,st+ot,at+ot].map((at=>at.toFixed(4))).join(","),sc=ut?`&limit=${ut}`:"",oc=Hl?`&collections=${Hl}`:"";return`${this._endpoints.search}?bbox=${rc}${sc}${oc}`}getPicturesAroundCoordinates(at,st,ot,ut,Hl){return fetch(this.getPicturesAroundCoordinatesUrl(at,st,ot,ut,Hl),this._getFetchOptions()).then((at=>at.json()))}getPictureMetadataUrl(at,st){if(!this.isReady())throw new Error("API is not ready to use");if(API.isIdValid(at))return st?`${this._endpoints.collections}/${st}/items/${at}`:`${this._endpoints.search}?ids=${at}`}getMapStyle(){if(this.isReady())return this.mapStyle;let at;return at=this._endpoints.style?this._endpoints.style:this._endpoints.tiles?{version:8,sources:{geovisio:{type:"vector",tiles:[this._endpoints.tiles],minzoom:0,maxzoom:15}}}:fetch(`${this._endpoint}/map/14/0/0.mvt`,this._getFetchOptions()).then((()=>(this._endpoints.tiles=`${this._endpoint}/map/{z}/{x}/{y}.mvt`,console.log("Using fallback endpoint for vector tiles"),this.getMapStyle()))).catch((at=>(console.error(at),Promise.reject(new Error("API doesn't offer a vector tiles endpoint"))))),"string"===typeof at?fetch(at,this._getFetchOptions()).then((at=>at.json())):Promise.resolve(at)}getUserMapStyle(at){let st;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||this.isReady()?at?(this._endpoints.user_style?st=this._endpoints.user_style.replace(/\{userId\}/g,at):this._endpoints.user_tiles&&(st={version:8,sources:{[`geovisio_${at}`]:{type:"vector",tiles:[this._endpoints.user_tiles.replace(/\{userId\}/g,at)],minzoom:0,maxzoom:15}}}),st?"string"===typeof st?fetch(st,this._getFetchOptions()).then((at=>at.json())):Promise.resolve(st):Promise.reject(new Error("API doesn't offer map style for specific user"))):Promise.reject(new Error("Parameter userId is empty")):Promise.reject(new Error("API is not ready to use"))}findThumbnailInPictureFeature(at){if(!this.isReady())throw new Error("API is not ready to use");if(!at||!at.assets)return null;let st=null;for(let ot of Object.values(at.assets)){if(ot.roles.includes("thumbnail")&&"image/jpeg"==ot.type&&API.isValidHttpUrl(ot.href))return this.cleanResourceURL(ot.href);ot.roles.includes("visual")&&"image/jpeg"==ot.type&&API.isValidHttpUrl(ot.href)&&(st=this.cleanResourceURL(ot.href))}return st}getPictureThumbnailURLForSequence(at,st){if(!this.isReady())throw new Error("API is not ready to use");if(this._endpoints.collection_preview)return Promise.resolve(this._endpoints.collection_preview.replace("{id}",at));if(st&&Array.isArray(st.links)&&st.links.length>0){let at=st.links.find((at=>"preview"===at.rel&&"image/jpeg"===at.type));if(at&&API.isValidHttpUrl(at.href))return Promise.resolve(at.href)}const ot=`${this._endpoints.search}?limit=1&collections=${at}`;return fetch(ot,this._getFetchOptions()).then((at=>at.json())).then((at=>Array.isArray(at.features)&&0!=at.features.length?this.findThumbnailInPictureFeature(at.features.pop()):null))}getPictureThumbnailURL(at,st){if(!this.isReady())throw new Error("API is not ready to use");return at?this._endpoints.item_preview?Promise.resolve(this._endpoints.item_preview.replace("{id}",at)):at&&st?fetch(`${this._endpoints.collections}/${st}/items/${at}`,this._getFetchOptions()).then((at=>at.json())).then((at=>at?this.findThumbnailInPictureFeature(at):null)):fetch(`${this._endpoints.search}?ids=${at}`,this._getFetchOptions()).then((at=>at.json())).then((at=>at&&Array.isArray(at.features)&&0!=at.features.length?this.findThumbnailInPictureFeature(at.features.pop()):null)):Promise.resolve(null)}getRSSURL(at){if(!this.isReady())throw new Error("API is not ready to use");if(this._endpoints.rss){let st=this._endpoints.rss;return at&&(st+=st.includes("?")?"&":"?",st+="bbox="+[at.getWest(),at.getSouth(),at.getEast(),at.getNorth()].join(",")),st}return null}getSequenceMetadataUrl(at){if(!this.isReady())throw new Error("API is not ready to use");return`${this._endpoints.collections}/${at}`}getDataBbox(){if(!this.isReady())throw new Error("API is not ready to use");return this._dataBbox}searchUsers(at){if(!this.isReady())throw new Error("API is not ready to use");if(!this._endpoints.user_search)throw new Error("User search is not available");return fetch(`${this._endpoints.user_search}?q=${at}`,this._getFetchOptions()).then((at=>at.json())).then((at=>(null===at||void 0===at?void 0:at.features)||null))}getUserName(at){if(!this.isReady())throw new Error("API is not ready to use");if(!this._endpoints.user_search)throw new Error("User search is not available");return fetch(this._endpoints.user_search.replace(/\/search$/,`/${at}`),this._getFetchOptions()).then((at=>at.json())).then((at=>(null===at||void 0===at?void 0:at.label)||(null===at||void 0===at?void 0:at.name)||null))}sendReport(at){if(!this.isReady())throw new Error("API is not ready to use");if(!this._endpoints.report)throw new Error("Report sending is not available");const st={...this._getFetchOptions(),method:"POST",body:JSON.stringify(at),headers:{"Content-Type":"application/json"}};return fetch(this._endpoints.report,st).then((async at=>{if(at.status>=400){let ot=await at.text();try{ot=JSON.parse(ot).message}catch(st){}return Promise.reject(ot)}return at.json()}))}sendPictureSemantics(at,st){var ot;if(!this.isReady())throw new Error("API is not ready to use");if(null===at||void 0===at||null===(ot=at.sequence)||void 0===ot||!ot.id||null===at||void 0===at||!at.id)throw new Error("Missing IDs from picture");let ut=this.getPictureMetadataUrl(at.id,at.sequence.id);null!==at&&void 0!==at&&at.origInstance&&(ut=`${at.origInstance.href}/api/collections/${at.sequence.id}/items/${at.id}`);const Hl={...this._getFetchOptions(),method:"PATCH",body:JSON.stringify({semantics:st}),headers:{"Content-Type":"application/json"}};return fetch(ut,Hl).then((async at=>{if(at.status>=400){let ot=await at.text();try{ot=JSON.parse(ot).message}catch(st){}return Promise.reject(ot)}return at.json()}))}createPictureAnnotation(at,st,ot){var ut;if(!this.isReady())throw new Error("API is not ready to use");if(null===at||void 0===at||null===(ut=at.sequence)||void 0===ut||!ut.id||null===at||void 0===at||!at.id)throw new Error("Missing IDs from picture");let Hl=this.getPictureMetadataUrl(at.id,at.sequence.id)+"/annotations";null!==at&&void 0!==at&&at.origInstance&&(Hl=`${at.origInstance.href}/api/collections/${at.sequence.id}/items/${at.id}/annotations`);const rc={...this._getFetchOptions(),method:"POST",body:JSON.stringify({semantics:ot,shape:st}),headers:{"Content-Type":"application/json"}};return fetch(Hl,rc).then((async at=>{if(at.status>=400){let ot=await at.text();try{ot=JSON.parse(ot).message}catch(st){}return Promise.reject(ot)}return at.json()}))}editPictureAnnotation(at,st){if(!this.isReady())throw new Error("API is not ready to use");let ot=`${this._endpoint}/annotations/${at}`;const ut={...this._getFetchOptions(),method:"PATCH",body:JSON.stringify({semantics:st}),headers:{"Content-Type":"application/json"}};return fetch(ot,ut).then((async at=>{if(at.status>=400){let ot=await at.text();try{ot=JSON.parse(ot).message}catch(st){}return Promise.reject(ot)}return at.json()}))}deletePictureAnnotation(at){if(!this.isReady())throw new Error("API is not ready to use");let st=`${this._endpoint}/annotations/${at}`;const ot={...this._getFetchOptions(),method:"DELETE"};return fetch(st,ot).then((async at=>{if(at.status>=400){let ot=await at.text();try{ot=JSON.parse(ot).message}catch(st){}return Promise.reject(ot)}return!0}))}getAuthURL(){var at,st;return this._configuration?Promise.resolve(!(null===(at=this._configuration)||void 0===at||null===(st=at.auth)||void 0===st||!st.enabled)&&`${this._endpoint}/auth/login?next_url=<CBURL>`):null===this._configuration?fetch(this._endpoint+"/configuration",this._getFetchOptions()).then((at=>at.json())).then((at=>(this._configuration=at,this.getAuthURL()))).catch((()=>(this._configuration=!1,!1))):Promise.resolve(!1)}static isValidHttpUrl(at){let st;try{st=new URL(at)}catch(ot){return!1}return"http:"===st.protocol||"https:"===st.protocol}static isIdValid(at){if((0,ut.isNullId)(at))throw new Error("id should be a valid picture unique identifier");return!0}}},2118:(at,st,ot)=>{"use strict";ot.d(st,{Ay:()=>InitParameters,Qm:()=>ut,Vy:()=>alterPSVState,ai:()=>alterPhotoViewerState,iz:()=>alterViewerState,mK:()=>alterMapState});const ut={minDate:"date_from",maxDate:"date_to",pic_type:"pic_type",camera:"camera",theme:"theme",qualityscore:"pic_score"},Hl=Object.fromEntries(Object.entries(ut).map((at=>[at[1],at[0]]))),rc=["none","null","false",!1],sc=["antialias","bearing","bearingSnap","bounds","boxZoom","clickTolerance","collectResourceTiming","cooperativeGestures","crossSourceCollisions","doubleClickZoom","dragPan","dragRotate","fadeDuration","failIfMajorPerformanceCaveat","fitBoundsOptions","hash","interactive","localIdeographFontFamily","locale","logoPosition","maplibreLogo","maxBounds","maxCanvasSize","maxPitch","maxTileCacheSize","maxTileCacheZoomLevels","maxZoom","minPitch","minZoom","pitch","pitchWithRotate","pixelRatio","preserveDrawingBuffer","refreshExpiredTiles","renderWorldCopies","scrollZoom","touchPitch","touchZoomRotate","trackResize","transformCameraUpdate","transformRequest","validateStyle"];class InitParameters{constructor(){var at,st,ot,ut,Hl,oc,_c;let wc=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},Sc=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},iu=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"false"===wc["url-parameters"]&&(Sc={});let su={};"object"===typeof(null===wc||void 0===wc?void 0:wc["psv-options"])&&(su=wc["psv-options"]);let lu={};"object"===typeof(null===wc||void 0===wc?void 0:wc["map-options"])&&(lu=wc["map-options"]);let cu={};"object"===typeof(null===iu||void 0===iu?void 0:iu.map)&&(cu=iu.map);let uu=Sc.map&&"none"!==Sc.map?getMapPositionFromString(Sc.map):null,pu=!rc.includes(Sc.map)&&!rc.includes(wc["map-options"]),mu=Sc.focus||wc.focus,gu=Sc.pic||wc.picture,Au=Sc.users||wc.users,yu=Sc.speed||(null===(at=su)||void 0===at?void 0:at.transitionDuration),_u=Sc.nav||(null===(st=su)||void 0===st?void 0:st.picturesNavigation),xu=Sc.theme||(null===(ot=cu)||void 0===ot?void 0:ot.theme)||lu.theme,Su=Sc.background||(null===(ut=cu)||void 0===ut?void 0:ut.background)||lu.background,Du=(null===uu||void 0===uu?void 0:uu.center)||!gu&&((null===(Hl=cu)||void 0===Hl?void 0:Hl.center)||lu.center)||[0,0],Lu=(null===uu||void 0===uu?void 0:uu.zoom)||(null===(oc=cu)||void 0===oc?void 0:oc.zoom)||lu.zoom,$u=(null===uu||void 0===uu?void 0:uu.pitch)||lu.pitch,hh=(null===uu||void 0===uu?void 0:uu.bearing)||lu.bearing,ed=wc.geocoder,td=wc.widgets,id=wc.sequence,nd=wc["fetch-options"],rd=wc.style,ad=wc.lang,sd=wc.endpoint,od=lu.raster,ld=lu.attributionControl,cd=(ud=lu,Object.fromEntries(Object.entries(ud).filter((at=>{let[st]=at;return sc.includes(st)}))));var ud;let hd=wc["keyboard-shortcuts"],dd="false"===(null===iu||void 0===iu?void 0:iu.disableAnnotations)||(null===(_c=su)||void 0===_c?void 0:_c.displayAnnotations)||!1,pd=Sc.xyz,md=Sc.date_from,gd=Sc.date_to,fd=Sc.pic_type,Ad=Sc.camera,yd=Sc.pic_score,vd=Sc.xywh,_d=Sc.annot;["map","pic"].includes(mu)?"map"!==mu||pu||(console.warn("Parameter focus can't be 'map' as map is disabled"),mu="pic"):(console.warn("Invalid value for parameter focus:",mu),mu=pu&&!gu?"map":"pic"),"aerial"!=Su||od||(console.warn("Parameter background can't be 'aerial' as no aerial imagery is available"),Su="streets"),pu&&!gu&&(mu="map"),!dd&&_d&&(dd=!0),this._parentInit={map:pu,users:Au,fetchOptions:nd,style:rd,lang:ad,endpoint:sd},this._parentPostInit={focus:mu,picture:gu,sequence:id,geocoder:ed,widgets:td,forceFocus:!0,keyboardShortcuts:!0},this._psvInit=Object.assign(Object.fromEntries(Object.entries(su).filter((at=>{let[st]=at;return!["transitionDuration","picturesNavigation","displayAnnotations"].includes(st)}))),{displayAnnotations:dd}),this._psvAny={transitionDuration:yu,picturesNavigation:_u},this._psvPostInit={xyz:pd,xywh:vd,annotation:_d},this._mapInit={raster:od,attributionControl:ld,...cd},this._mapAny={theme:xu,background:Su,center:Du,zoom:Lu,pitch:$u,bearing:hh,users:Au},this._mapPostInit={date_from:md,date_to:gd,pic_type:fd,camera:Ad,pic_score:yd},"false"===hd&&(this._psvInit.keyboard=!1,this._psvInit.keyboardActions={},this._mapInit.keyboard=!1,this._parentPostInit.keyboardShortcuts=!1)}_sanitize(at){return Object.fromEntries(Object.entries(at).filter((at=>{let[,st]=at;return void 0!==st})))}getParentInit(){return this._sanitize(this._parentInit)}getParentPostInit(){return this._sanitize(this._parentPostInit)}getPSVInit(){return this._sanitize(Object.assign({},this._psvInit,this._psvAny))}getPSVPostInit(){return this._sanitize(Object.assign({},this._psvPostInit,this._psvAny))}getMapInit(){return this._sanitize(Object.assign({},this._mapInit,this._mapAny))}getMapPostInit(){return this._sanitize(Object.assign({},this._mapPostInit,this._mapAny))}static GetComponentProperties(at,st){const ot={};for(let ut in at.properties){at.properties[ut].state||null==st[ut]||(ot[ut]=st[ut])}return ot}}function getMapPositionFromString(at,st){const ot=(at||"").split("/");if(ot.length>=3&&!ot.some((at=>isNaN(at)))){const at={center:[+ot[2],+ot[1]],zoom:+ot[0],pitch:+(ot[4]||0)};return st&&(at.bearing=st.dragRotate.isEnabled()&&st.touchZoomRotate.isEnabled()?+(ot[3]||0):st.getBearing()),at}return null}function alterPSVState(at,st){st.xyz&&at.addEventListener("picture-loaded",(()=>{const ot=function(at){const st=(at||"").split("/");return 3!==st.length||st.some((at=>isNaN(at)))?null:{x:+st[0],y:+st[1],z:+st[2]}}(st.xyz);at.setXYZ(ot.x,ot.y,ot.z)}),{once:!0}),st.xywh&&at.addEventListener("picture-loaded",(()=>{const ot=function(at,st){let ot=(at||"").split(",");if(4!==ot.length||ot.some((at=>isNaN(at))))return null;{var ut,Hl,rc,sc;let[at,wc,Sc,iu]=ot.map((at=>parseFloat(at))),su=st.panorama.basePanoData;if("function"===typeof su){var oc,_c;const at=null===st||void 0===st||null===(oc=st.properties)||void 0===oc||null===(_c=oc["pers:interior_orientation"])||void 0===_c?void 0:_c.sensor_array_dimensions;su=at&&2==at.length?su({width:at[0],height:at[1]}):null}if(null===(ut=su)||void 0===ut||!ut.fullWidth||null===(Hl=su)||void 0===Hl||!Hl.fullHeight)return null;const lu=(null===(rc=su)||void 0===rc?void 0:rc.croppedX)||0,cu=(null===(sc=su)||void 0===sc?void 0:sc.croppedY)||0,uu=lu+at+Sc/2-su.fullWidth/2,pu=-(cu+wc+iu/2-su.fullHeight/2),mu=uu/su.fullWidth,gu=pu/su.fullHeight,Au=(Sc/su.fullWidth+iu/su.fullHeight)/2;return{yaw:2*mu*Math.PI,pitch:gu*Math.PI,z:100*(1-Au)}}}(st.xywh,at.getPictureMetadata());at.rotate(ot),at.zoom(ot.z)}),{once:!0}),st.annotation&&(at.getPictureMetadata()?at.focusOnAnnotation(st.annotation):at.addEventListener("picture-loaded",(()=>{at.focusOnAnnotation(st.annotation)}),{once:!0}));let ot=st.transitionDuration||st.speed;void 0!==ot&&at.setTransitionDuration(ot);let ut=st.picturesNavigation||st.nav;["none","pic","any","seq"].includes(ut)&&at.setPicturesNavigation(ut)}async function alterMapState(at,st){var ot;const ut=getMapPositionFromString(st.map,at);ut&&at.jumpTo(ut);let rc=Array.isArray(st.users)?st.users:(st.users||"").split(",");(0===rc.length||1===rc.length&&""===rc[0].trim())&&(rc=["geovisio"]),await at.setVisibleUsers(rc),null===(ot=at.setFilters)||void 0===ot||ot.call(at,function(at){const st={};for(let ot in Hl)at[ot]&&(st[Hl[ot]]=at[ot]);if(st.qualityscore){let at=st.qualityscore.split("");const ot={A:5,B:4,C:3,D:2,E:1};st.qualityscore=at.map((at=>ot[at]))}return st}(st)),["aerial","streets"].includes(st.background)&&at.setBackground(st.background)}function alterPhotoViewerState(at,st){let ot=st.picture||st.pic;if(ot){const st=ot.split(";");st.length>1&&console.warn("Multiple picture IDs passed in URL, only first one kept"),at.select(null,st[0],!0)}else at.select()}function alterViewerState(at,st){alterPhotoViewerState(at,st),"map"===st.focus&&null!==at&&void 0!==at&&at.map?(at.setPopup(!1),at._setFocus("map",null,st.forceFocus)):"pic"===st.focus&&null!==at&&void 0!==at&&at.mini?(at.setPopup(!1),at._setFocus("pic",null,st.forceFocus)):st.focus&&"meta"===st.focus&&null!==at&&void 0!==at&&at.mini&&at._setFocus("pic",null,st.forceFocus)}},3727:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>PhotoAdapter});var ut=ot(3890);class PhotoAdapter extends ut.D{constructor(at,st){super(at,st),this._shouldGoFast=st.shouldGoFast||(()=>!0)}loadTexture(at,st){return at.origBaseUrl?at.baseUrl=at.origBaseUrl:at.origBaseUrl=at.baseUrl,this._shouldGoFast()&&at.thumbUrl&&!at.hdLoaded&&1==at.rows&&(at.baseUrl=at.thumbUrl),super.loadTexture(at,st).then((st=>(at.baseUrl===at.origBaseUrl&&(at.hdLoaded=!0),st))).catch((at=>{console.error("Can't load texture",at)}))}__loadTiles(at){this._shouldGoFast()||super.__loadTiles(at)}}},4207:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>PresetManager});var ut=ot(7208);const Hl={fas:"fa6-solid"},rc={"fa6-solid:directions":"fa6-solid:diamond-turn-right"};class PresetManager{constructor(){let at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,st=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._ready=!1,this._presets=null,this._translations={},st||this._load(at)}async _load(at){var st;at=at||(null===(st=window.navigator.languages[0])||void 0===st?void 0:st.substring(0,2));try{var ot,sc;const[st,wc,Sc]=await Promise.all([fetch(`${(0,ut.PanoramaxPresetsURL)()}/translations/en.min.json`),at?fetch(`${(0,ut.PanoramaxPresetsURL)()}/translations/${at}.min.json`):Promise.resolve({ok:!0}),fetch(`${(0,ut.PanoramaxPresetsURL)()}/presets.min.json`)]);if(!st||!wc||!Sc||!st.ok||!wc.ok||!Sc.ok)throw this._ready=-1,new Error("Presets service is not available");var oc,_c;if(this._presets=await Sc.json(),this._translations.en=null===(ot=await st.json())||void 0===ot||null===(sc=ot.en)||void 0===sc?void 0:sc.presets,at)this._translations[at]=null===(oc=await wc.json())||void 0===oc||null===(_c=oc[at])||void 0===_c?void 0:_c.presets;Object.entries(this._presets).forEach((st=>{var ot,ut,sc,oc,_c,wc;let[Sc,iu]=st;if(null!==(ot=this._translations[at])&&void 0!==ot&&null!==(ut=ot.presets)&&void 0!==ut&&null!==(sc=ut[Sc])&&void 0!==sc&&sc.name?iu.name=this._translations[at].presets[Sc].name:null!==(oc=this._translations.en)&&void 0!==oc&&null!==(_c=oc.presets)&&void 0!==_c&&null!==(wc=_c[Sc])&&void 0!==wc&&wc.name&&(iu.name=this._translations.en.presets[Sc].name),iu.icon){const at=iu.icon.split("-")[0],st=Hl[at];iu.iconify=st?iu.icon.replace(at+"-",st+":"):iu.icon.split("-")[0]+":"+iu.icon.split("-").slice(1).join("-"),rc[iu.iconify]&&(iu.iconify=rc[iu.iconify])}})),this._ready=!0}catch(wc){console.error("Presets service throws an error:",wc),this._ready=-1}}async onceReady(){return this._ready?-1===this._ready?Promise.reject():Promise.resolve():(await new Promise((at=>setTimeout(at,250))),this.onceReady())}async getPreset(at){return this.onceReady().then((()=>{const st=Object.values(this._presets).filter((st=>{if(0===Object.keys(st.tags).length)return!1;for(let ot in st.tags){const ut=st.tags[ot];if(!at.semantics.find((at=>"delete"!==at.action&&at.key===ot&&("*"===ut||ut===at.value))))return!1}return!0}));return st.sort(((at,st)=>{const ot=Object.keys(at.tags).length,ut=Object.keys(st.tags).length;if(ot>ut)return-1;if(ot===ut){const ot=Object.values(at.tags).filter((at=>"*"===at)).length,ut=Object.values(st.tags).filter((at=>"*"===at)).length;return ot<ut?-1:ot>ut?1:0}return 1})),st.shift()}))}}},4451:(at,st,ot)=>{"use strict";ot.d(st,{A:()=>URLHandler});var ut=ot(2118);const Hl=["speed","nav","focus","pic","xyz","map","background","users","pic_score","s","xywh","annot"].concat(Object.values(ut.Qm)),rc=["focus-changed","pictures-navigation-changed"],sc=["position-updated","zoom-updated","view-rotated","picture-loaded","transition-duration-changed"],oc=["moveend","zoomend","boxzoomend","background-changed","users-changed","filters-changed"];class URLHandler extends EventTarget{constructor(at){super(),this._parent=at,this._delay=null}listenToChanges(){window.addEventListener("popstate",this._onURLChange.bind(this),!1),rc.forEach((at=>this._parent.addEventListener(at,this._onParentChange.bind(this)))),sc.forEach((at=>this._parent.psv.addEventListener(at,this._onParentChange.bind(this)))),this._parent.map&&oc.forEach((at=>this._parent.map.on(at,this._onParentChange.bind(this))))}destroy(){window.removeEventListener("popstate",this._onURLChange)}nextURLParams(){var at;let st={};"number"==typeof this._parent.psv.getTransitionDuration()&&(st.speed=this._parent.psv.getTransitionDuration()),[null,"any"].includes(this._parent.psv.getPicturesNavigation())||(st.nav=this._parent.psv.getPicturesNavigation()),this._parent.psv.getPictureId()&&(st.pic=this._parent.psv.getPictureId());this._parent.psv.getPictureMetadata()&&(st.xyz=this.currentPSVString());const ot=this._parent.psv.getSelectedAnnotations();if((null===ot||void 0===ot?void 0:ot.length)>0&&(st.annot=ot[0]),null!==(at=this._parent.map)&&void 0!==at&&at.loaded){var Hl,rc,sc,oc;st.map=this.currentMapString(),st.focus="pic",this._parent.isMapWide()&&(st.focus="map"),null!==(Hl=this._parent.map)&&void 0!==Hl&&null!==(rc=Hl.hasTwoBackgrounds)&&void 0!==rc&&rc.call(Hl)&&null!==(sc=this._parent.map)&&void 0!==sc&&null!==(oc=sc.getBackground)&&void 0!==oc&&oc.call(sc)&&(st.background=this._parent.map.getBackground());const at=this._parent.map.getVisibleUsers();if((at.length>1||!at.includes("geovisio"))&&(st.users=at.join(",")),this._parent.map._mapFilters){for(let at in ut.Qm)this._parent.map._mapFilters[at]&&(st[ut.Qm[at]]=this._parent.map._mapFilters[at]);if(st.pic_score){const at=[null,"E","D","C","B","A"];st.pic_score=st.pic_score.map((st=>at[st])).join("")}}}return st}nextURLString(){let at="";return Object.entries(this.nextURLParams()).sort(((at,st)=>at[0].localeCompare(st[0]))).forEach((st=>{let[ot,ut]=st,Hl=!1;const rc=at.split("&").map((at=>{const st=at.split("=")[0];return st===ot?(Hl=!0,`${st}=${ut}`):at})).filter((at=>at));Hl||rc.push(`${ot}=${ut}`),at=`${rc.join("&")}`})),`?${at}`.replace(/^\?+/,"?")}currentURLParams(){const at=(arguments.length>0&&void 0!==arguments[0]&&arguments[0]?window.location.hash:window.location.search).replace(/^[?#]/,"");let st={};if(at.split("&").map((at=>at.split("="))).filter((at=>void 0!==at[0]&&at[0].length>0&&Hl.includes(at[0]))).forEach((at=>{st[at[0]]=at[1]})),st.s){const at=Object.fromEntries(decodeURIComponent(st.s).split(";").map((at=>[at[0],at.substring(1)])));st={},"m"===at.f?st.focus="map":"p"===at.f?st.focus="pic":"t"===at.f&&(st.focus="meta"),""!==at.s&&(st.speed=100*parseFloat(at.s)),"a"===at.n?st.nav="any":"s"===at.n&&(st.nav="seq"),"n"===at.n&&(st.nav="none"),""!==at.p&&(st.pic=at.p),""!==at.a&&(st.annot=at.a),""!==at.c&&(st.xyz=at.c),""!==at.m&&(st.map=at.m),""!==at.d&&(st.date_from=at.d),""!==at.e&&(st.date_to=at.e),"f"===at.t?st.pic_type="flat":"e"===at.t&&(st.pic_type="equirectangular"),""!==at.k&&(st.camera=at.k),"d"===at.v?st.theme="default":"a"===at.v?st.theme="age":"t"===at.v?st.theme="type":"s"===at.v&&(st.theme="score"),"s"===at.b?st.background="streets":"a"===at.b&&(st.background="aerial"),""!==at.u&&(st.users=at.u),""!==at.q&&(st.pic_score=at.q)}return st}currentMapString(){var at;if(null===(at=this._parent.map)||void 0===at||!at.loaded)return"";const st=this._parent.map.getCenter(),ot=Math.round(100*this._parent.map.getZoom())/100,ut=Math.ceil((ot*Math.LN2+Math.log(512/360/.5))/Math.LN10),Hl=Math.pow(10,ut),rc=Math.round(st.lng*Hl)/Hl,sc=Math.round(st.lat*Hl)/Hl,oc=this._parent.map.getBearing(),_c=this._parent.map.getPitch();let wc=`${ot}/${sc}/${rc}`;return(oc||_c)&&(wc+="/"+Math.round(10*oc)/10),_c&&(wc+=`/${Math.round(_c)}`),wc}currentPSVString(){const at=this._parent.psv.getXYZ();return`${at.x.toFixed(2)}/${at.y.toFixed(2)}/${Math.round(at.z||0)}`}_onURLChange(){let at=this.currentURLParams();"Viewer"===this._parent.getClassName()?(0,ut.iz)(this._parent,at):(0,ut.ai)(this._parent,at),(0,ut.Vy)(this._parent.psv,at),this._parent.map&&(0,ut.mK)(this._parent.map,at)}nextShortLink(at){const st=new URL(at),ot=this.nextURLParams(),ut={f:(ot.focus||"").substring(0,1),s:isNaN(parseInt(ot.speed))?void 0:Math.floor(parseInt(ot.speed)/100),n:(ot.nav||"").substring(0,1),p:ot.pic,c:ot.xyz,m:ot.map,d:ot.date_from,e:ot.date_to,t:(ot.pic_type||"").substring(0,1),k:ot.camera,v:(ot.theme||"").substring(0,1),b:(ot.background||"").substring(0,1),u:ot.users,q:ot.pic_score,a:ot.annot},Hl=Object.entries(ut).filter((at=>{let[,st]=at;return void 0!=st&&""!=st})).map((at=>{let[st,ot]=at;return`${st}${ot}`})).join(";");return st.search=`s=${Hl}`,st}getUnmanagedParameters(at){return new URLSearchParams(Array.from(at.searchParams).filter((at=>{let[st]=at;return!Hl.includes(st)}))).toString()}_onParentChange(){this._delay&&(clearTimeout(this._delay),this._delay=null),this._delay=setTimeout((()=>{var at,st,ot;const ut=new URL(window.location.href),Hl=new URL(window.location.href),rc=this.getUnmanagedParameters(ut);if(Hl.search=this._parent?this.nextURLString()+(rc.length>0?"&"+rc:""):"",Object.keys(this.currentURLParams(!0)).length>0&&(Hl.hash=""),ut.search==Hl.search)return;const sc=this.currentURLParams().pic||"",oc=(null===(at=this._parent)||void 0===at||null===(st=at.psv)||void 0===st||null===(ot=st.getPictureId)||void 0===ot?void 0:ot.call(st))||"";try{if(sc!=oc?window.history.pushState(window.history.state,null,Hl.href):window.history.replaceState(window.history.state,null,Hl.href),this._parent){const at=new CustomEvent("url-changed",{detail:{url:Hl.href}});this.dispatchEvent(at)}}catch(_c){}}),500)}}},3606:(at,st,ot)=>{"use strict";ot.r(st),ot.d(st,{forwardGeocodingBAN:()=>forwardGeocodingBAN,forwardGeocodingNominatim:()=>forwardGeocodingNominatim,forwardGeocodingStandard:()=>forwardGeocodingStandard,reverseGeocodingNominatim:()=>reverseGeocodingNominatim});var ut=ot(7208);const Hl={house:20,housenumber:20,street:18,locality:15,district:13,municipality:12,city:12,county:8,region:7,state:7,country:5};function geocoderParamsToURLString(at){let st={};return Object.entries(at).filter((at=>void 0!==at[1]&&null!==at[1])).forEach((at=>st[at[0]]=at[1])),new URLSearchParams(st).toString()}function forwardGeocodingNominatim(at){const st={q:at.query,countrycodes:at.countries,limit:at.limit,viewbox:at.bbox};return fetch(`${(0,ut.NominatimBaseUrl)()}/search?${geocoderParamsToURLString(st)}&format=geocodejson&addressdetails=1`).then((at=>at.json())).then((at=>{const st={features:[]},ot=[];return(at.features||[]).forEach((at=>{var ut,rc,sc;const oc=geocodeJsonToPlaceName(null===(ut=at.properties)||void 0===ut?void 0:ut.geocoding)||(null===(rc=at.properties)||void 0===rc||null===(sc=rc.geocoding)||void 0===sc?void 0:sc.label);var _c,wc;ot.includes(oc)||(st.features.push({place_type:["place"],place_name:oc,center:at.geometry.coordinates,zoom:Hl[null===(_c=at.properties)||void 0===_c||null===(wc=_c.geocoding)||void 0===wc?void 0:wc.type]}),ot.push(oc))})),st}))}function reverseGeocodingNominatim(at,st){return fetch(`${(0,ut.NominatimBaseUrl)()}/reverse?lat=${at}&lon=${st}&zoom=18&format=geocodejson`).then((at=>at.json())).then((at=>{var st,ot,ut;return geocodeJsonToPlaceName(null===at||void 0===at||null===(st=at.features)||void 0===st||null===(ot=st.shift())||void 0===ot||null===(ut=ot.properties)||void 0===ut?void 0:ut.geocoding)}))}function forwardGeocodingBAN(at){return forwardGeocodingStandard(at,(0,ut.AdresseDataGouvBaseURL)())}function geocodeJsonToPlaceName(at){if(!at||"object"!=typeof at)return"";let st=at.name,ot=[],ut=[];switch(at.type){case"hamlet":case"croft":case"isolated_dwelling":case"neighbourhood":case"allotments":case"quarter":case"farm":case"farmyard":case"industrial":case"commercial":case"retail":case"city_block":case"residential":case"locality":case"district":ut.push(at.city),ut.push(at.county),ut.push(at.state),ut.push(at.country);break;case"city":case"region":ut.push(at.county),ut.push(at.state),ut.push(at.country);break;case"country":break;case"house":case"housenumber":ot.push(at.housenumber),ot.push(at.street),ot.push(at.locality),ot.push(at.district),ut.push(at.city),ut.push(at.county),ut.push(at.state),ut.push(at.country);break;default:ot.push(at.street),ot.push(at.locality),ot.push(at.district),ut.push(at.city),ut.push(at.county),ut.push(at.state),ut.push(at.country)}return ot=ot.filter((at=>at)),ot=ot.filter(((at,ut)=>at!=st&&(0===ut||ot[ut-1]!==at))),ot=ot.length>0?at.housenumber?ot.slice(0,2).join(" "):ot.shift():null,ot===st&&(ot=null),ut=ut.filter((at=>at)),ut=ut.filter(((at,Hl)=>at!=st&&(!ot||!ot.includes(at))&&(0===Hl||ut[Hl-1]!==at))),[st,ot,ut.shift()].filter((at=>at)).join(", ")}function forwardGeocodingStandard(at,st){const ot={q:at.query,limit:at.limit};if("string"===typeof at.proximity){const[st,ut]=at.proximity.split(",").map((at=>parseFloat(at.trim())));ot.lat=st,ot.lon=ut}return fetch(`${st}/?${geocoderParamsToURLString(ot)}`).then((at=>at.json())).then((at=>{const st={features:[]},ot=[];return(at.features||[]).forEach((at=>{const ut=geocodeJsonToPlaceName(at.properties);ot.includes(ut)||"other"==at.properties.type||(st.features.push({place_type:["place"],place_name:ut,center:at.geometry.coordinates,zoom:Hl[at.properties.type]}),ot.push(ut))})),st}))}},4964:(at,st,ot)=>{"use strict";ot.r(st),ot.d(st,{autoDetectLocale:()=>autoDetectLocale,getTranslations:()=>getTranslations});var ut=ot(4149),Hl=ot(369),rc=ot(389),sc=ot(9946),oc=ot(8302),_c=ot(5222),wc=ot(6909),Sc=ot(4895),iu=ot(3979),su=ot(6920),lu=ot(9026),cu=ot(991),uu=ot(6984);const pu="en",mu={da:ut,de:Hl,eo:sc,en:rc,es:oc,fr:_c,hu:wc,it:Sc,ja:iu,nl:su,pl:lu,sv:cu,"zh-Hant":uu,zh:uu};function autoDetectLocale(at,st){for(const ot of window.navigator.languages){let st=ot;switch(st){case"zh-TW":case"zh-HK":case"zh-MO":st="zh-Hant";break;case"zh-CN":case"zh-SG":st="zh-Hans";break;default:st.length>2&&(st=ot.substring(0,2))}const ut=at.find((at=>at===st));if(ut)return ut}return st}function getTranslations(){let at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const st=JSON.parse(JSON.stringify(rc));let ot;if(at||(at=autoDetectLocale(Object.keys(mu),pu)),mu[at]&&"en"!==at&&(ot=mu[at]),at.length>2){const st=at.substring(0,2);mu[st]&&(ot=mu[st])}return ot&&Object.entries(ot).forEach((at=>{let[ot,ut]=at;Object.entries(ut).forEach((at=>{let[ut,Hl]=at;Array.isArray(Hl)&&(Hl=Hl.filter((at=>null!=at))),st[ot][ut]=Hl}))})),st}},2030:(at,st,ot)=>{"use strict";ot.r(st),ot.d(st,{API:()=>iu.A,PhotoAdapter:()=>su.A,PresetsManager:()=>lu.A,URLHandler:()=>cu.A,geocoder:()=>ut,i18n:()=>Hl,map:()=>rc,picture:()=>sc,semantics:()=>oc,services:()=>_c,utils:()=>wc,widgets:()=>Sc});var ut=ot(3606),Hl=ot(4964),rc=ot(8340),sc=ot(508),oc=ot(2283),_c=ot(7208),wc=ot(7343),Sc=ot(5995),iu=ot(5254),su=ot(3727),lu=ot(4207),cu=ot(4451)},8340:(at,st,ot)=>{"use strict";ot.r(st),ot.d(st,{MAP_EXPR_QUALITYSCORE:()=>lu,MAP_THEMES:()=>Sc,RASTER_LAYER_ID:()=>sc,TILES_PICTURES_SYMBOL_ZOOM:()=>_c,TILES_PICTURES_ZOOM:()=>oc,VECTOR_STYLES:()=>wc,combineStyles:()=>combineStyles,getMapParamsFromLocalStorage:()=>getMapParamsFromLocalStorage,getMissingLayerStyles:()=>getMissingLayerStyles,getThumbGif:()=>getThumbGif,getUserLayerId:()=>getUserLayerId,getUserSourceId:()=>getUserSourceId,initMapKeyboardHandler:()=>initMapKeyboardHandler,isLabelLayer:()=>isLabelLayer,isNullCoordinates:()=>isNullCoordinates,linkMapAndPhoto:()=>linkMapAndPhoto,mapFiltersFormValues:()=>mapFiltersFormValues,mapFiltersToLayersFilters:()=>mapFiltersToLayersFilters,saveMapParamsToLocalStorage:()=>saveMapParamsToLocalStorage,switchCoefValue:()=>switchCoefValue});var ut=ot(6883),Hl=ot(7343),rc=ot(4964);const sc="pnx-aerial",oc=15,_c=18,wc={PICTURES:{paint:{"circle-radius":["interpolate",["linear"],["zoom"],oc,4.5,_c,6,24,12],"circle-opacity":["interpolate",["linear"],["zoom"],oc,0,oc+1,1],"circle-stroke-color":"#ffffff","circle-stroke-width":["interpolate",["linear"],["zoom"],oc+1,0,oc+2,1,_c,1.5,24,3]},layout:{}},PICTURES_SYMBOLS:{paint:{"icon-opacity":["interpolate",["linear"],["zoom"],_c,0,_c+1,1]},layout:{"icon-image":["case",["==",["get","type"],"equirectangular"],"pnx-arrow-360","pnx-arrow-flat"],"icon-size":["interpolate",["linear"],["zoom"],_c,.5,24,1],"icon-rotate":["to-number",["get","heading"]],"icon-allow-overlap":!0}},SEQUENCES:{paint:{"line-width":["interpolate",["linear"],["zoom"],0,.5,10,2,14,4,16,5,22,3]},layout:{"line-cap":"square"}},SEQUENCES_PLUS:{paint:{"line-width":["interpolate",["linear"],["zoom"],0,15,oc+1,30,oc+2,0],"line-opacity":0,"line-color":"#ff0000"},layout:{"line-cap":"square"}}},Sc={DEFAULT:"default",AGE:"age",TYPE:"type",SCORE:"score"},iu=["case",["==",["get","type"],"equirectangular"],["case",["has","h_pixel_density"],["step",["get","h_pixel_density"],...Hl.QUALITYSCORE_RES_360_VALUES],1],["case",["has","h_pixel_density"],["step",["get","h_pixel_density"],...Hl.QUALITYSCORE_RES_FLAT_VALUES],1]],su=["case",["has","gps_accuracy"],["step",["get","gps_accuracy"],...Hl.QUALITYSCORE_GPS_VALUES],1],lu=["round",["+",["*",iu,Hl.QUALITYSCORE_POND_RES],["*",su,Hl.QUALITYSCORE_POND_GPS]]];function getThumbGif(at){const st=document.createElement("img");return st.src=ut,st.alt=at.loading,st.title=at.loading,st.classList.add("pnx-map-thumb","pnx-map-thumb-loader"),st}function isNullCoordinates(at){return null===at||void 0===at||Array.isArray(at)&&(2===at.length&&0===at[0]&&0===at[1]||at.length<2)}function isLabelLayer(at){var st;return"symbol"===at.type&&void 0!==(null===at||void 0===at||null===(st=at.layout)||void 0===st?void 0:st["text-field"])&&(void 0===at.minzoom||at.minzoom<15)}function combineStyles(at,st){var ot,ut,Hl;const oc=at.api.getMapStyle();if(oc.layers=oc.layers||[],oc.layers=oc.layers.concat(getMissingLayerStyles(oc.sources,oc.layers)),oc.metadata||(oc.metadata={}),st.supplementaryStyle&&(Object.assign(oc.sources,st.supplementaryStyle.sources||{}),Object.assign(oc.metadata,st.supplementaryStyle.metadata||{}),oc.layers=oc.layers.concat(st.supplementaryStyle.layers||[])),oc.layers=oc.layers.filter((at=>at.id)),st.raster&&(oc.sources["pnx-aerial"]=st.raster,oc.layers.push({id:sc,type:"raster",source:"pnx-aerial",layout:{visibility:"aerial"===st.background?"visible":"none"}})),null!==at&&void 0!==at&&null!==(ot=at.users)&&void 0!==ot&&ot.includes("geovisio")||oc.layers.forEach((at=>{"geovisio"===at.source&&(at.layout||(at.layout={}),at.layout.visibility="none")})),oc.layers.sort(((at,st)=>isLabelLayer(at)&&!isLabelLayer(st)?1:!isLabelLayer(at)&&isLabelLayer(st)?-1:at.id.startsWith("geovisio")&&!st.id.startsWith("geovisio")?1:!at.id.startsWith("geovisio")&&st.id.startsWith("geovisio")?-1:at.id.endsWith("_pictures")&&!st.id.endsWith("_pictures")?1:!at.id.endsWith("_pictures")&&st.id.endsWith("_pictures")?-1:0)),null!==(ut=oc.metadata)&&void 0!==ut&&ut["panoramax:locales"]||(oc.metadata["panoramax:locales"]=["fr","en","de","es","ru","pt","zh","hi","latin"]),oc.metadata["panoramax:locales"]){let st=at.lang||(0,rc.autoDetectLocale)(oc.metadata["panoramax:locales"],"latin");st.includes("-")&&(st=st.split("-")[0]),st.includes("_")&&(st=st.split("_")[0]),oc.layers.forEach((at=>{isLabelLayer(at)&&at.layout["text-field"].includes("name:latin")&&(at.layout["text-field"]=["coalesce",["get",`name:${st}`],["get","name:latin"],["get","name"]])}))}const _c=oc.layers.find((at=>"place_label_city"==at.id));let wc=oc.layers.find((at=>"place_label_capital"==at.id));return _c&&!wc&&(_c.paint={"text-color":"hsl(0, 0%, 0%)","text-halo-blur":0,"text-halo-color":"hsla(0, 0%, 100%, 1)","text-halo-width":3},_c.layout["text-letter-spacing"]=.1,wc=JSON.parse(JSON.stringify(_c)),wc.id="place_label_capital",wc.filter.push(["<=","capital",2]),_c.filter.push([">","capital",2]),oc.layers.push(wc)),null!==oc&&void 0!==oc&&null!==(Hl=oc.sources)&&void 0!==Hl&&Hl.plan_ign&&(oc.sources.plan_ign.maxzoom=18),oc}function getMissingLayerStyles(){let at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},st=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const ot=[];return Object.keys(at).filter((at=>void 0===st.find((st=>(null===st||void 0===st?void 0:st.source)===at)))).forEach((at=>{at.startsWith("geovisio")&&(ot.push({id:`${at}_sequences`,type:"line",source:at,"source-layer":"sequences",layout:{...wc.SEQUENCES.layout},paint:{...wc.SEQUENCES.paint,"line-color":Hl.COLORS.BASE}}),ot.push({id:`${at}_sequences_plus`,type:"line",source:at,"source-layer":"sequences",layout:{...wc.SEQUENCES_PLUS.layout},paint:{...wc.SEQUENCES_PLUS.paint}}),ot.push({id:`${at}_pictures_symbols`,type:"symbol",source:at,"source-layer":"pictures",...wc.PICTURES_SYMBOLS}),ot.push({id:`${at}_pictures_symbols`,type:"symbol",source:at,"source-layer":"pictures",...wc.PICTURES_SYMBOLS}),ot.push({id:`${at}_pictures`,type:"circle",source:at,"source-layer":"pictures",layout:{...wc.PICTURES.layout},paint:{...wc.PICTURES.paint,"circle-color":Hl.COLORS.BASE}}))})),st.filter((at=>{var ot;return(null===at||void 0===at||null===(ot=at.id)||void 0===ot?void 0:ot.endsWith("_sequences"))&&void 0===st.find((st=>(null===st||void 0===st?void 0:st.id)===at.id+"_plus"))})).forEach((at=>{ot.push({id:`${at.id}_plus`,type:"line",source:at.source,"source-layer":at["source-layer"],layout:{...wc.SEQUENCES_PLUS.layout},paint:{...wc.SEQUENCES_PLUS.paint}})})),st.filter((at=>{var ot;return(null===at||void 0===at||null===(ot=at.id)||void 0===ot?void 0:ot.endsWith("_pictures"))&&void 0===st.find((st=>(null===st||void 0===st?void 0:st.id)===at.id+"_symbols"))})).forEach((at=>{ot.unshift({id:`${at.id}_symbols`,type:"symbol",source:at.source,"source-layer":"pictures",...wc.PICTURES_SYMBOLS}),at.paint=Object.assign(at.paint||{},wc.PICTURES.paint),at.layout=Object.assign(at.layout||{},wc.PICTURES.layout)})),ot}function mapFiltersFormValues(at,st,ot){const ut=null===at||void 0===at?void 0:at.shadowRoot.getElementById("pnx-filter-date-from"),Hl=null===at||void 0===at?void 0:at.shadowRoot.getElementById("pnx-filter-date-end"),rc=null===at||void 0===at?void 0:at.shadowRoot.querySelectorAll("input[name='pnx-filter-type']");let sc="";for(let _c=0;_c<rc.length;_c++){const at=rc[_c];if(at.checked){sc=at.value;break}}let oc=[];if(ot){const st=null===at||void 0===at?void 0:at.shadowRoot.getElementById("pnx-filter-qualityscore");oc=((null===st||void 0===st?void 0:st.grade)||"").split(",").map((at=>parseInt(at))).filter((at=>!isNaN(at))),5==oc.length&&(oc=[])}return{minDate:null===ut||void 0===ut?void 0:ut.value,maxDate:null===Hl||void 0===Hl?void 0:Hl.value,pic_type:sc,theme:null===st||void 0===st?void 0:st.value,qualityscore:oc}}function mapFiltersToLayersFilters(at){let st=arguments.length>1&&void 0!==arguments[1]&&arguments[1],ot={},ut=[],Hl=[],rc=!1;if(at.minDate&&""!==at.minDate&&(ot.minDate=at.minDate,ut.push([">=",["get","date"],at.minDate]),Hl.push([">=",["get","ts"],at.minDate])),at.maxDate&&""!==at.maxDate){ot.maxDate=at.maxDate,ut.push(["<=",["get","date"],at.maxDate]);let st=new Date(at.maxDate);st.setDate(st.getDate()+1),st=st.toISOString().split("T")[0],Hl.push(["<=",["get","ts"],st])}if(at.pic_type&&""!==at.pic_type&&(ot.pic_type="flat"===at.pic_type?"flat":"equirectangular",ut.push(["==",["get","type"],ot.pic_type]),Hl.push(["==",["get","type"],ot.pic_type])),st&&(rc=!0),at.camera&&""!==at.camera){ot.camera=at.camera;const st=at.camera.toLowerCase().trim()+"                    ",rc=at.camera.toLowerCase().trim()+"zzzzzzzzzzzzzzzzzzzz",sc=["collator",{"case-sensitive":!1,"diacritic-sensitive":!1}];ut.push([">=",["get","model"],st,sc]),ut.push(["<=",["get","model"],rc,sc]),Hl.push([">=",["get","model"],st,sc]),Hl.push(["<=",["get","model"],rc,sc])}return at.qualityscore&&at.qualityscore.length>0&&(ot.qualityscore=at.qualityscore,ut.push(["in",lu,["literal",ot.qualityscore]]),Hl.push(["in",lu,["literal",ot.qualityscore]])),at.theme&&Object.values(Sc).includes(at.theme)&&(ot.theme=at.theme,rc=!0),0==ut.length?ut=null:ut.unshift("all"),0==Hl.length?Hl=null:(Hl.unshift("all"),Hl=["step",["zoom"],!0,oc,Hl]),{mapFilters:ot,mapSeqFilters:ut,mapPicFilters:Hl,reloadMapStyle:rc}}function getUserLayerId(at,st){return`${getUserSourceId(at)}_${st}`}function getUserSourceId(at){return"geovisio"===at?"geovisio":"geovisio_"+at}function switchCoefValue(at,st){if(Array.isArray(at))return at.map((at=>switchCoefValue(at,st)));if("object"===typeof at&&null!==at){const ot={};for(const ut in at)ot[ut]=switchCoefValue(at[ut],st);return ot}return"string"===typeof at&&at.startsWith("coef")?st:at}function linkMapAndPhoto(at){const onPicLoad=st=>{var ot,ut,rc,sc,oc,_c;(0,Hl.isNullId)(st.detail.picId)?(at.map.displayPictureMarker(),null!==at&&void 0!==at&&null!==(ot=at.isMapWide)&&void 0!==ot&&ot.call(at)&&(null===at||void 0===at||null===(ut=at.mini)||void 0===ut||ut.setAttribute("collapsed",""))):(at.map.displayPictureMarker(st.detail.lon,st.detail.lat,at.psv.getXY().x,st.detail.first&&!isNullCoordinates(null===(rc=at._initParams)||void 0===rc||null===(sc=rc.getMapPostInit())||void 0===sc?void 0:sc.center),st.detail.picId),null!==at&&void 0!==at&&null!==(oc=at.isMapWide)&&void 0!==oc&&oc.call(at)&&(null===at||void 0===at||null===(_c=at.mini)||void 0===_c||_c.removeAttribute("collapsed")))};at.psv.addEventListener("picture-loading",onPicLoad),at.psv.addEventListener("picture-loaded",onPicLoad),at.psv.addEventListener("view-rotated",(()=>{let st=at.psv.getPosition().yaw*(180/Math.PI);st+=at.psv.getPictureOriginalHeading(),at.map._picMarker.setRotation(st)})),at.psv.addEventListener("picture-preview-started",(st=>{at.map._picMarkerPreview.setLngLat(st.detail.coordinates).setRotation(st.detail.direction||0).addTo(at.map)})),at.psv.addEventListener("picture-preview-stopped",(()=>{at.map._picMarkerPreview.remove()})),at.psv.addEventListener("picture-loaded",(st=>{at.isWidthSmall()&&at._picPopup&&st.detail.picId==at._picPopup._picId&&at._picPopup.remove()})),at.map.on("picture-click",(st=>{at.select(st.seqId,st.picId),!at.psv._myVTour.state.currentNode&&null!==at&&void 0!==at&&at._setFocus&&at._setFocus("pic")})),at.map.on("sequence-click",(st=>{at.api.getPicturesAroundCoordinates(st.coordinates.lat,st.coordinates.lng,1,1,st.seqId).then((st=>{var ot,ut;(null===st||void 0===st||null===(ot=st.features)||void 0===ot?void 0:ot.length)>0&&(at.select(null===(ut=st.features[0])||void 0===ut?void 0:ut.collection,st.features[0].id),!at.psv.getPictureMetadata()&&null!==at&&void 0!==at&&at._setFocus&&at._setFocus("pic"))}))})),at._setFocus&&(at.psv.addEventListener("dblclick",(()=>{at.isMapWide()&&at._setFocus("pic")})),at.map.on("dblclick",(()=>{at.isMapWide()?"any"===at.psv.getPicturesNavigation()&&at.select():at._setFocus("map")})))}function initMapKeyboardHandler(at){at.map.keyboard.keydown=function(st){if(st.altKey||st.ctrlKey||st.metaKey)return;switch(st.key){case"*":case"5":return void at.moveCenter();case"PageUp":case"9":return void at.psv.goToNextPicture();case"PageDown":case"3":return void at.psv.goToPrevPicture();case"Home":case"7":return st.stopPropagation(),void at._toggleFocus();case"End":case"1":return void at.mini.toggleAttribute("collapsed");case" ":case"0":return void at.psv.toggleSequencePlaying()}let ot=0,ut=0,Hl=0,rc=0,sc=0;switch(st.keyCode){case 61:case 107:case 171:case 187:ot=1;break;case 189:case 109:case 173:ot=-1;break;case 37:case 100:st.shiftKey?ut=-1:(st.preventDefault(),rc=-1);break;case 39:case 102:st.shiftKey?ut=1:(st.preventDefault(),rc=1);break;case 38:case 104:st.shiftKey?Hl=1:(st.preventDefault(),sc=-1);break;case 40:case 98:st.shiftKey?Hl=-1:(st.preventDefault(),sc=1);break;default:return}return this._rotationDisabled&&(ut=0,Hl=0),{cameraAnimation:at=>{const oc=this._tr;at.easeTo({duration:300,easeId:"keyboardHandler",easing:at=>at*(2-at),zoom:ot?Math.round(oc.zoom)+ot*(st.shiftKey?2:1):oc.zoom,bearing:oc.bearing+ut*this._bearingStep,pitch:oc.pitch+Hl*this._pitchStep,offset:[-rc*this._panStep,-sc*this._panStep],center:oc.center},{originalEvent:st})}}}.bind(at.map.keyboard)}const cu="pnx-map-parameters";function getMapParamsFromLocalStorage(){const at=localStorage.getItem(cu);if(!at)return{};try{return JSON.parse(at)}catch(st){return console.warn("Can't read map parameters stored in localStorage",st),{}}}function saveMapParamsToLocalStorage(at){const save=()=>localStorage.setItem(cu,JSON.stringify({center:Object.fromEntries(Object.entries(at.getCenter()).map((at=>{let[st,ot]=at;return[st,ot.toFixed(7)]}))),zoom:at.getZoom().toFixed(1),background:at.getBackground(),theme:at._mapFilters.theme}));at.on("background-changed",save),at.on("filters-changed",save),at.on("moveend",save),at.on("zoomend",save),at.on("dragend",save),at.on("boxzoomend",save)}},508:(at,st,ot)=>{"use strict";ot.r(st),ot.d(st,{apiFeatureToPSVNode:()=>apiFeatureToPSVNode,filterRelatedPicsLinks:()=>filterRelatedPicsLinks,getCroppedPanoData:()=>getCroppedPanoData,getExifFloat:()=>getExifFloat,getGPSPrecision:()=>getGPSPrecision,getHashTags:()=>getHashTags,getNodeCaption:()=>getNodeCaption,getSphereCorrection:()=>getSphereCorrection,hasAnnotations:()=>hasAnnotations,sortPicturesInDirection:()=>sortPicturesInDirection});var ut=ot(8407),Hl=ot(6830),rc=ot(7343);const sc=(0,rc.svgToPSVLink)(ut,"white"),oc=(0,rc.svgToPSVLink)(Hl,rc.COLORS.NEXT);function getExifFloat(at){if(!([null,void 0,""].includes(at)||"string"===typeof at&&""===at.trim())){if("number"===typeof at)return at;if("string"!==typeof at);else{if(/^-?\d+(\.\d+)?\/-?\d+(\.\d+)?$/.test(at)){const st=at.split("/").map((at=>parseFloat(at)));return st[0]/st[1]}try{return parseFloat(at)}catch(st){}}}}function getGPSPrecision(at){var st,ot,ut,Hl,rc;let sc=null;const oc=(null===at||void 0===at||null===(st=at.properties)||void 0===st?void 0:st["quality:horizontal_accuracy"])||getExifFloat(null===at||void 0===at||null===(ot=at.properties)||void 0===ot||null===(ut=ot.exif)||void 0===ut?void 0:ut["Exif.GPSInfo.GPSHPositioningError"]),_c=getExifFloat(null===at||void 0===at||null===(Hl=at.properties)||void 0===Hl||null===(rc=Hl.exif)||void 0===rc?void 0:rc["Exif.GPSInfo.GPSDOP"]);return void 0!==oc?sc=`${oc} m`:void 0!==_c&&(sc=_c<1?"ideal":_c<2?"excellent":_c<5?"good":_c<10?"moderate":_c<20?"fair":"poor"),sc}function getSphereCorrection(at){var st,ot,ut,Hl;let rc=null===(st=at.properties)||void 0===st?void 0:st["view:azimuth"];if(void 0===rc){var sc,oc;const st=getExifFloat(null===(sc=at.properties)||void 0===sc||null===(oc=sc.exif)||void 0===oc?void 0:oc["Exif.GPSInfo.GPSImgDirection"]);void 0!==st&&(rc=st)}rc=rc||0;let _c=null===(ot=at.properties)||void 0===ot?void 0:ot["pers:yaw"],wc=["Xmp.GPano.PoseHeadingDegrees","Xmp.Camera.Yaw","Exif.MpfInfo.MPFYawAngle"];if(void 0===_c)for(let gu of wc){var Sc,iu;const st=getExifFloat(null===(Sc=at.properties)||void 0===Sc||null===(iu=Sc.exif)||void 0===iu?void 0:iu[gu]);if(void 0!==st){_c=st;break}}_c=_c||0,Math.round(rc)===Math.round(_c)&&_c>0&&console.warn("Picture with UUID",at.id,"has same GPS Image direction and Yaw, could cause rendering issues");let su=null===(ut=at.properties)||void 0===ut?void 0:ut["pers:pitch"];if(wc=["Xmp.GPano.PosePitchDegrees","Xmp.Camera.Pitch","Exif.MpfInfo.MPFPitchAngle"],void 0===su)for(let gu of wc){var lu,cu;const st=getExifFloat(null===(lu=at.properties)||void 0===lu||null===(cu=lu.exif)||void 0===cu?void 0:cu[gu]);if(void 0!==st){su=st;break}}su=su||0;let uu=null===(Hl=at.properties)||void 0===Hl?void 0:Hl["pers:roll"];if(wc=["Xmp.GPano.PoseRollDegrees","Xmp.Camera.Roll","Exif.MpfInfo.MPFRollAngle"],void 0===uu)for(let gu of wc){var pu,mu;const st=getExifFloat(null===(pu=at.properties)||void 0===pu||null===(mu=pu.exif)||void 0===mu?void 0:mu[gu]);if(void 0!==st){uu=st;break}}return uu=uu||0,0!==su&&0!==uu?{pan:_c*Math.PI/180,tilt:su*Math.PI/180,roll:uu*Math.PI/180}:{}}function getCroppedPanoData(at,st){var ot,ut,Hl;let rc;var sc,oc;if(null!==(ot=at.properties)&&void 0!==ot&&ot["pers:interior_orientation"]&&(null!==(sc=at.properties["pers:interior_orientation"])&&void 0!==sc&&sc.visible_area&&null!==(oc=at.properties["pers:interior_orientation"])&&void 0!==oc&&oc.sensor_array_dimensions)){const st=at.properties["pers:interior_orientation"].visible_area,ot=at.properties["pers:interior_orientation"].sensor_array_dimensions;try{rc={fullWidth:parseInt(ot[0]),fullHeight:parseInt(ot[1]),croppedX:parseInt(st[0]),croppedY:parseInt(st[1]),croppedWidth:parseInt(ot[0])-parseInt(st[2])-parseInt(st[0]),croppedHeight:parseInt(ot[1])-parseInt(st[3])-parseInt(st[1])}}catch(uu){console.warn("Invalid pers:interior_orientation values for cropped panorama "+at.id)}}if(!rc&&null!==(ut=at.properties)&&void 0!==ut&&ut.exif)try{var _c,wc,Sc,iu,su,lu;rc={fullWidth:parseInt(null===(_c=at.properties.exif)||void 0===_c?void 0:_c["Xmp.GPano.FullPanoWidthPixels"]),fullHeight:parseInt(null===(wc=at.properties.exif)||void 0===wc?void 0:wc["Xmp.GPano.FullPanoHeightPixels"]),croppedX:parseInt(null===(Sc=at.properties.exif)||void 0===Sc?void 0:Sc["Xmp.GPano.CroppedAreaLeftPixels"]),croppedY:parseInt(null===(iu=at.properties.exif)||void 0===iu?void 0:iu["Xmp.GPano.CroppedAreaTopPixels"]),croppedWidth:parseInt(null===(su=at.properties.exif)||void 0===su?void 0:su["Xmp.GPano.CroppedAreaImageWidthPixels"]),croppedHeight:parseInt(null===(lu=at.properties.exif)||void 0===lu?void 0:lu["Xmp.GPano.CroppedAreaImageHeightPixels"])},rc.croppedWidth>rc.fullWidth&&(rc.fullWidth=rc.croppedWidth),rc.croppedHeight>rc.fullHeight&&(rc.fullHeight=rc.croppedHeight)}catch(uu){console.warn("Invalid XMP.GPano values for cropped panorama "+at.id)}if(rc&&(rc=Object.fromEntries(Object.entries(rc||{}).filter((at=>!isNaN(at[1])))),(!rc.fullWidth&&!rc.croppedWidth&&rc.fullHeight&&!rc.croppedHeight||rc.fullWidth&&!rc.croppedWidth&&!rc.fullHeight&&!rc.croppedHeight||rc.fullWidth&&!rc.croppedWidth&&rc.fullHeight&&!rc.croppedHeight||rc.fullWidth==rc.croppedWidth&&rc.fullHeight==rc.croppedHeight)&&(rc={})),null!==(Hl=rc)&&void 0!==Hl&&Hl.fullWidth&&null!==st&&void 0!==st&&st.width){var cu;let at=st.width/((null===(cu=rc)||void 0===cu?void 0:cu.croppedWidth)||rc.fullWidth);rc={fullWidth:void 0!==rc.fullWidth?Math.floor(rc.fullWidth*at):void 0,fullHeight:void 0!==rc.fullHeight?Math.floor(rc.fullHeight*at):void 0,croppedWidth:void 0!==rc.croppedWidth?Math.floor(rc.croppedWidth*at):void 0,croppedHeight:void 0!==rc.croppedHeight?Math.floor(rc.croppedHeight*at):void 0,croppedX:void 0!==rc.croppedX?Math.floor(rc.croppedX*at):void 0,croppedY:void 0!==rc.croppedY?Math.floor(rc.croppedY*at):void 0}}return rc||{}}function sortPicturesInDirection(at){return(st,ot)=>"related"!=st.rel&&"related"!=ot.rel?0:"related"!=st.rel?-1:"related"!=ot.rel?1:st.date==ot.date?(0,rc.getDistance)(at,st.geometry.coordinates)-(0,rc.getDistance)(at,ot.geometry.coordinates):ot.date.localeCompare(st.date)}function getNodeCaption(at,st){var ot,ut,Hl;const rc={};if(null!==at&&void 0!==at&&null!==(ot=at.properties)&&void 0!==ot&&ot.datetimetz){rc.date=new Date(at.properties.datetimetz);const st=at.properties.datetimetz.match(/([+-]\d{2}):(\d{2})$|Z$/);st&&("Z"===st[0]?rc.tz="UTC":rc.tz=st[0])}else null!==at&&void 0!==at&&null!==(ut=at.properties)&&void 0!==ut&&ut.datetime&&(rc.date=new Date(at.properties.datetime));if(null!==at&&void 0!==at&&at.providers){var sc;const st=null===at||void 0===at||null===(sc=at.providers)||void 0===sc?void 0:sc.filter((at=>{var st;return null===at||void 0===at||null===(st=at.roles)||void 0===st?void 0:st.includes("producer")}));if((null===st||void 0===st?void 0:st.length)>=0){const at={};st.map((at=>at.name)).forEach((st=>{const ot=st.toLowerCase().replace(/\s/g,"");at[ot]?at[ot].push(st):at[ot]=[st]})),rc.producer=[],Object.values(at).forEach((at=>{const st=at[0],ot=at.find((at=>at.toLowerCase()!=at));rc.producer.push(ot||st)}))}}if(null!==at&&void 0!==at&&null!==(Hl=at.properties)&&void 0!==Hl&&Hl.license&&(rc.license=at.properties.license,null!==at&&void 0!==at&&at.links)){const ot=at.links.find((at=>"license"===(null===at||void 0===at?void 0:at.rel)));ot&&(rc.license=`<a href="${ot.href}" title="${st.pnx.metadata_general_license_link}" target="_blank">${rc.license}</a>`)}return rc}function apiFeatureToPSVNode(at,st){var ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu,pu,mu;let gu=arguments.length>2&&void 0!==arguments[2]&&arguments[2],Au=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,yu=arguments.length>4&&void 0!==arguments[4]?arguments[4]:at=>at;const _u=null!=(null===(ot=at.properties)||void 0===ot||null===(ut=ot["pers:interior_orientation"])||void 0===ut?void 0:ut.field_of_view);let xu=_u?parseInt(at.properties["pers:interior_orientation"].field_of_view):70;const Su=360===xu,Du=yu((Object.values(at.assets).find((at=>{var st;return null===at||void 0===at||null===(st=at.roles)||void 0===st?void 0:st.includes("data")}))||{}).href),Lu=null===at||void 0===at||null===(Hl=at.properties)||void 0===Hl||null===(rc=Hl["tiles:tile_matrix_sets"])||void 0===rc?void 0:rc.geovisio,$u=null===(sc=at.links)||void 0===sc||null===(oc=sc.find)||void 0===oc?void 0:oc.call(sc,(at=>"prev"===(null===at||void 0===at?void 0:at.rel)&&"application/geo+json"===(null===at||void 0===at?void 0:at.type))),hh=null===(_c=at.links)||void 0===_c||null===(wc=_c.find)||void 0===wc?void 0:wc.call(_c,(at=>"next"===(null===at||void 0===at?void 0:at.rel)&&"application/geo+json"===(null===at||void 0===at?void 0:at.type))),ed=Object.values(at.assets).find((at=>{var st;return(null===(st=at.roles)||void 0===st?void 0:st.includes("visual"))&&"image/webp"===at.type})),td=Object.values(at.assets).find((at=>{var st;return(null===(st=at.roles)||void 0===st?void 0:st.includes("visual"))&&"image/jpeg"===at.type})),id=yu((ed||td).href),nd=yu(null===(Sc=Object.values(at.assets).find((at=>{var st;return(null===(st=at.roles)||void 0===st?void 0:st.includes("thumbnail"))&&"image/jpeg"===at.type})))||void 0===Sc?void 0:Sc.href),rd=(null===at||void 0===at||null===(iu=at.asset_templates)||void 0===iu?void 0:iu.tiles_webp)||(null===at||void 0===at||null===(su=at.asset_templates)||void 0===su?void 0:su.tiles),ad=getCroppedPanoData(at),sd=null===(lu=at.links)||void 0===lu||null===(cu=lu.find)||void 0===cu?void 0:cu.call(lu,(at=>"via"===(null===at||void 0===at?void 0:at.rel)&&"application/json"===(null===at||void 0===at?void 0:at.type))),od=null===(uu=at.properties)||void 0===uu||null===(pu=uu["pers:interior_orientation"])||void 0===pu?void 0:pu.sensor_array_dimensions;let ld;if(Object.keys(ad).length>0)ld={baseUrl:gu?Du:id,origBaseUrl:gu?Du:id,hdUrl:Du,thumbUrl:nd,basePanoData:gu?ad:st=>getCroppedPanoData(at,st),cropData:ad,width:ad.fullWidth,cols:2,rows:1,tileUrl:()=>null};else if(Su&&Lu)ld={baseUrl:id,origBaseUrl:id,basePanoData:at=>({fullWidth:at.width,fullHeight:at.height}),hdUrl:Du,thumbUrl:nd,cols:Lu&&Lu.tileMatrix[0].matrixWidth,rows:Lu&&Lu.tileMatrix[0].matrixHeight,width:Lu&&Lu.tileMatrix[0].matrixWidth*Lu.tileMatrix[0].tileWidth,tileUrl:Lu&&((at,st)=>yu(rd.href.replace(/\{TileCol\}/g,at).replace(/\{TileRow\}/g,st)))};else{const getFlatCrop=at=>{at.width<at.height&&!_u&&(xu=35);const st=xu*at.height/at.width,ot=360*at.width/xu,ut=180*at.height/st;return{fullWidth:Math.floor(ot),fullHeight:Math.floor(ut),croppedWidth:at.width,croppedHeight:at.height,croppedX:Math.floor((ot-at.width)/2),croppedY:Math.floor((ut-at.height)/2)}};let at=od?getFlatCrop({width:od[0],height:od[1]}):null;ld={baseUrl:gu?Du:id,origBaseUrl:gu?Du:id,hdUrl:Du,thumbUrl:nd,basePanoData:getFlatCrop,cropData:at,width:(null===at||void 0===at?void 0:at.fullWidth)||2,cols:2,rows:1,tileUrl:()=>null}}null!==(mu=at.properties)&&void 0!==mu&&mu.semantics&&(at.properties.semantics=at.properties.semantics.filter((at=>Object.keys(at).length>0)));return{id:at.id,caption:getNodeCaption(at,st),panorama:ld,links:filterRelatedPicsLinks(at,Au),gps:at.geometry.coordinates,sequence:{id:at.collection,nextPic:hh?hh.id:void 0,prevPic:$u?$u.id:void 0},sphereCorrection:getSphereCorrection(at),horizontalFov:xu,origInstance:sd,properties:at.properties}}function filterRelatedPicsLinks(at){var st;let ot=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const ut=at.links.filter((at=>["next","prev","related"].includes(null===at||void 0===at?void 0:at.rel)&&"application/geo+json"===(null===at||void 0===at?void 0:at.type))).filter((at=>!ot||ot(at))).map((at=>(at.datetime&&(at.date=at.datetime.split("T")[0]),at))),Hl=at.geometry.coordinates,_c=[],wc={N:[],ENE:[],ESE:[],S:[],WSW:[],WNW:[]};for(let sc of ut){wc[(0,rc.getSimplifiedAngle)(Hl,sc.geometry.coordinates)].push(sc)}for(let rc in wc){const at=wc[rc];0!=at.length&&(at.sort(sortPicturesInDirection(Hl)),_c.push(at.shift()))}let arrowStyle=at=>"related"===at.rel?{element:(0,rc.getArrow)(oc),size:{width:128/3,height:128}}:{element:(0,rc.getArrow)(sc),size:{width:75,height:75}};const Sc=-((null===(st=at.properties)||void 0===st?void 0:st["view:azimuth"])||0)*(Math.PI/180);return _c.map((at=>({nodeId:at.id,gps:at.geometry.coordinates,arrowStyle:arrowStyle(at),linkOffset:{yaw:Sc}})))}function getHashTags(at){var st;if(null===at||void 0===at||null===(st=at.properties)||void 0===st||!st.semantics)return[];const ot=at.properties.semantics.filter((at=>"hashtags"===at.key)),ut=[];return ot.forEach((at=>at.value.split(";").forEach((at=>ut.push(at.trim()))))),ut}function hasAnnotations(at){var st,ot;return(null===at||void 0===at||null===(st=at.properties)||void 0===st||null===(ot=st.annotations)||void 0===ot?void 0:ot.length)>0}},2283:(at,st,ot)=>{"use strict";ot.r(st),ot.d(st,{computeDiffTags:()=>computeDiffTags,decodeBasicTag:()=>decodeBasicTag,decodeKey:()=>decodeKey,groupByPrefix:()=>groupByPrefix,parseSemanticsString:()=>parseSemanticsString});var ut=ot(4542),Hl=ot(5995),rc=ot(7929),sc=ot(1760),oc=ot(7091),_c=ot(7208);function valToValLink(at,st,ot){return ut.qy`
		${at}
		<pnx-link-button
			kind="superinline"
			size="sm"
			href=${st}
			target="_blank"
			style="vertical-align: middle"
			title=${ot}
		>${(0,Hl.fa)(rc.iW_)}</pnx-link-button>`}const wc=["highway","building","amenity","landuse","natural","waterway","leisure","shop","railway","tourism","barrier","boundary","place","power"],Sc={"":{title:"Panoramax"},osm:{title:"OpenStreetMap",logo:sc,key_transform:(at,st)=>valToValLink(at.key,`${(0,_c.OSMWikiURL)()}/Key:${at.key}`,st.pnx.semantics_key_doc),value_transform:(at,st)=>wc.includes(at.key)?valToValLink(at.value,`${(0,_c.OSMWikiURL)()}/Tag:${at.key}=${at.value}`,st.pnx.semantics_value_doc):at.value},wd:{title:"Wikidata",logo:oc,key_transform:(at,st)=>{const ot=`${(0,_c.WikidataURL)()}/Property:${at.key}`;return st.pnx.semantics_wikidata_properties[at.key]?valToValLink(`${st.pnx.semantics_wikidata_properties[at.key]} (${at.key})`,ot,st.pnx.semantics_key_doc):valToValLink(at.key,ot,st.pnx.semantics_key_doc)},value_transform:(at,st)=>valToValLink(at.value,`${(0,_c.WikidataURL)()}/${at.value}`,st.pnx.semantics_value_doc)},exif:{title:"EXIF"}};function decodeBasicTag(at){const st=(at||"").lastIndexOf("=");return st<0?null:{key:decodeKey(at.substring(0,st)),value:at.substring(st+1)}}function decodeKey(){let at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";const st=at.match(/^(?:([a-z_]+)\|)?([^[]+)(?:\[(.*)\])?$/);if(!st)return{prefix:"",subkey:at,qualifies:null};const[,ot,ut,Hl]=st;return{key:at,prefix:ot||"",subkey:ut,qualifies:decodeBasicTag(Hl)}}function parseSemanticsString(at){const st=at.split("\n").map((at=>{const st=decodeBasicTag(at);return st&&st.key.key.length<=256&&st.value.length<=2048?{key:st.key.key,value:st.value}:null}));if(st.findIndex((at=>!at))>=0){if(0===at.trim().length&&1===st.length)return[];throw new Error("Invalid tags")}return st}function computeDiffTags(){let at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],st=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];const ot=[];return(st||[]).filter((st=>void 0===at.find((at=>at.key==st.key&&at.value==st.value)))).forEach((at=>ot.push({key:at.key,value:at.value,action:"add"}))),(at||[]).filter((at=>void 0===st.find((st=>at.key==st.key&&at.value==st.value)))).forEach((at=>ot.push({key:at.key,value:at.value,action:"delete"}))),ot}function groupByPrefix(at){const st={},ot=[];return at.forEach((at=>{if("delete"===at.action)return;const ut=decodeKey(at.key);ut.qualifies?ot.push(Object.assign({},at,ut)):(st[ut.prefix]||(st[ut.prefix]=[]),st[ut.prefix].push(ut.prefix.length>0?{key:ut.subkey,value:at.value}:at))})),ot.forEach((at=>{var ot;let{key:ut,prefix:Hl,subkey:rc,qualifies:sc,value:oc}=at;const _c=null===(ot=st[sc.key.prefix])||void 0===ot?void 0:ot.find((at=>at.key===sc.key.subkey&&(!sc.value||sc.value===at.value)));_c&&(_c.qualifiers||(_c.qualifiers=[]),_c.qualifiers.push({key:ut,prefix:Hl,subkey:rc,value:oc}))})),Object.entries(st).map((at=>{let[st,ot]=at;return Sc[st]?Object.assign({prefix:st,tags:ot},Sc[st]):{prefix:st,title:st,tags:ot}}))}},7208:(at,st,ot)=>{"use strict";function MapTiles(){return"https://panoramax.openstreetmap.fr/pmtiles/basic.json"}function PanoramaxWebsiteURL(){return"https://panoramax.fr"}function PanoramaxPresetsURL(){return"https://presets.panoramax.fr"}function PanoramaxMetaCatalogURL(){return"https://explore.panoramax.fr"}function TemakiIconURL(at){return`https://raw.githubusercontent.com/rapideditor/temaki/refs/heads/main/icons/${at}.svg`}function WikidataURL(){return"https://www.wikidata.org/wiki"}function IdEditorURL(){return"https://www.openstreetmap.org/edit?editor=id"}function OSMWikiURL(){return"https://wiki.openstreetmap.org/wiki"}function InternetFastThreshold(){return 10}function InternetFastTestFile(){return"https://panoramax.openstreetmap.fr/images/05/ca/2c/98/0111-4baf-b6f3-587bb8847d2e.jpg"}function AdresseDataGouvBaseURL(){return"https://data.geopf.fr/geocodage/search"}function NominatimBaseUrl(){return"https://nominatim.openstreetmap.org"}ot.r(st),ot.d(st,{AdresseDataGouvBaseURL:()=>AdresseDataGouvBaseURL,IdEditorURL:()=>IdEditorURL,InternetFastTestFile:()=>InternetFastTestFile,InternetFastThreshold:()=>InternetFastThreshold,MapTiles:()=>MapTiles,NominatimBaseUrl:()=>NominatimBaseUrl,OSMWikiURL:()=>OSMWikiURL,PanoramaxMetaCatalogURL:()=>PanoramaxMetaCatalogURL,PanoramaxPresetsURL:()=>PanoramaxPresetsURL,PanoramaxWebsiteURL:()=>PanoramaxWebsiteURL,TemakiIconURL:()=>TemakiIconURL,WikidataURL:()=>WikidataURL})},7343:(at,st,ot)=>{"use strict";ot.r(st),ot.d(st,{BASE_PANORAMA_ID:()=>rc,COLORS:()=>sc,COLORS_HEX:()=>oc,DISABLE_ANNOTATIONS_PARAM:()=>Hl,QUALITYSCORE_GPS_VALUES:()=>iu,QUALITYSCORE_POND_GPS:()=>lu,QUALITYSCORE_POND_RES:()=>su,QUALITYSCORE_RES_360_VALUES:()=>Sc,QUALITYSCORE_RES_FLAT_VALUES:()=>wc,QUALITYSCORE_VALUES:()=>_c,degToDms:()=>degToDms,getArrow:()=>getArrow,getAzimuth:()=>getAzimuth,getCookie:()=>getCookie,getDistance:()=>getDistance,getGrade:()=>getGrade,getRelativeHeading:()=>getRelativeHeading,getSimplifiedAngle:()=>getSimplifiedAngle,getUserAccount:()=>getUserAccount,inRangeRandom:()=>inRangeRandom,isInIframe:()=>isInIframe,isInternetFast:()=>isInternetFast,isNullId:()=>isNullId,josmBboxParameters:()=>josmBboxParameters,positionToXYZ:()=>positionToXYZ,svgToPSVLink:()=>svgToPSVLink,xyzToPosition:()=>xyzToPosition});var ut=ot(7208);const Hl="pnx-disable-annotations",rc="geovisio-fake-id-0",sc={BASE:"#FF6F00",SELECTED:"#1E88E5",HIDDEN:"#34495E",NEXT:"#ffab40",QUALI_1:"#00695C",QUALI_2:"#fd8d3c",PALETTE_1:"#fecc5c",PALETTE_2:"#fd8d3c",PALETTE_3:"#f03b20",PALETTE_4:"#bd0026"},oc=Object.fromEntries(Object.entries(sc).map((at=>(at[1]=parseInt(at[1].slice(1),16),at)))),_c=[{color:"#007f4e",label:"A"},{color:"#72b043",label:"B"},{color:"#b5be2f",label:"C"},{color:"#f8cc1b",label:"D"},{color:"#f6a020",label:"E"}],wc=[1,10,2,15,3,30,4],Sc=[3,15,4,30,5],iu=[5,1.01,4,2.01,3,5.01,2,10.01,1],su=.8,lu=.2;function isNullId(at){return[null,void 0,"",rc].includes(at)}function getGrade(at,st){if(null===st||void 0===st||""===st)return null;for(let ot=0;ot<at.length;ot+=2){const ut=at[ot];if(st<at[ot+1])return ut}return at[at.length-1]}function getDistance(at,st){const ot=at[0]-st[0],ut=at[1]-st[1];return Math.sqrt(ot*ot+ut*ut)}function svgToPSVLink(at,st){try{const ot=atob(at.replace(/^data:image\/svg\+xml;base64,/,"")),ut=(new DOMParser).parseFromString(ot,"image/svg+xml").childNodes[0],Hl=document.createElement("button");return Hl.appendChild(ut),Hl.classList.add("pnx-psv-tour-arrows","pnx-print-hidden"),Hl.style.color=st,Hl}catch(ot){const st=document.createElement("img");return st.src=at,st.alt="",st}}function getArrow(at){const st=at.cloneNode(!0);return st.addEventListener("pointerup",(()=>st.classList.add("pnx-clicked"))),st}function getAzimuth(at,st){return(Math.atan2(st[0]-at[0],st[1]-at[1])*(180/Math.PI)+360)%360}function getRelativeHeading(at){var st,ot;if(!at)throw new Error("No picture selected");let ut,Hl;const rc=at.properties["view:azimuth"];if(null!==at&&void 0!==at&&null!==(st=at.sequence)&&void 0!==st&&st.prevPic){var sc;const st=null===at||void 0===at||null===(sc=at.links)||void 0===sc?void 0:sc.find((st=>st.nodeId===at.sequence.prevPic));st&&(ut=(rc-getAzimuth(st.gps,at.gps)+180)%360-180)}if(null!==at&&void 0!==at&&null!==(ot=at.sequence)&&void 0!==ot&&ot.nextPic){var oc;const st=null===at||void 0===at||null===(oc=at.links)||void 0===oc?void 0:oc.find((st=>st.nodeId===at.sequence.nextPic));st&&(Hl=(rc-getAzimuth(at.gps,st.gps)+180)%360-180)}return void 0!==ut?ut:void 0!==Hl?Hl:0}function getSimplifiedAngle(at,st){const ot=Math.atan2(st[0]-at[0],st[1]-at[1])*(180/Math.PI);return Math.abs(ot)<30?"N":ot>=30&&ot<90?"ENE":ot>=90&&ot<150?"ESE":Math.abs(ot)>=150?"S":ot<=-30&&ot>-90?"WNW":ot<=-90&&ot>-150?"WSW":void 0}function positionToXYZ(at){let st=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;const ot={x:at.yaw*(180/Math.PI),y:at.pitch*(180/Math.PI)};return void 0!==st&&(ot.z=st),ot}function xyzToPosition(at,st,ot){return{yaw:at/(180/Math.PI),pitch:st/(180/Math.PI),zoom:ot}}function degToDms(at){const st=at<0?Math.ceil(at):Math.floor(at),ot=60*Math.abs(at-st),ut=Math.floor(ot);return{d:st,m:ut,s:parseFloat((60*(ot-ut)).toFixed(3))}}function josmBboxParameters(at){if(at){var st;const ot=at.gps,ut=null===at||void 0===at||null===(st=at.properties)||void 0===st?void 0:st["view:azimuth"],Hl=2e-4,rc={left:ot[0]-(null===ut||ut>=180?Hl:0),right:ot[0]+(null===ut||ut<=180?Hl:0),top:ot[1]+(null===ut||ut<=90||ut>=270?Hl:0),bottom:ot[1]-(null===ut||ut>=90&&ut<=270?Hl:0),changeset_source:"Panoramax"};return Object.entries(rc).map((at=>at.join("="))).join("&")}return null}function isInIframe(){try{return window.self!==window.top}catch(at){return!0}}const cu="pnx-internet-fast";function isInternetFast(){try{const at=navigator.connection.downlink;return Promise.resolve(at>=(0,ut.InternetFastThreshold)())}catch(at){try{const at=sessionStorage.getItem(cu);if(["true","false"].includes(at))return Promise.resolve("true"===at);const st=(new Date).getTime();return fetch(`${(0,ut.InternetFastTestFile)()}?nocache=${st}`).then((async at=>[at,await at.blob()])).then((at=>{let[ot,Hl]=at;const rc=8*parseInt(ot.headers.get("Content-Length")||Hl.size)/1024/1024/(((new Date).getTime()-st)/1e3)>=(0,ut.InternetFastThreshold)();return sessionStorage.setItem(cu,rc?"true":"false"),rc})).catch((at=>(console.warn("Failed to run speedtest",at),!1)))}catch(at){return Promise.resolve(!1)}}}function getCookie(at){var st,ot,ut;const Hl=null===(st=document.cookie)||void 0===st||null===(ot=st.split(";"))||void 0===ot||null===(ut=ot.find((st=>st.trimStart().startsWith(`${at}=`))))||void 0===ut?void 0:ut.split("=");if(Hl)return Hl.shift(),Hl.join("=")}function getUserAccount(){const at=getCookie("session"),st=getCookie("user_id"),ot=getCookie("user_name");return at&&st&&ot?{id:st,name:ot}:null}function inRangeRandom(at,st){const ot=new Uint32Array(1);crypto.getRandomValues(ot);let ut=ot[0]/4294967296;return at=Math.ceil(at),st=Math.floor(st),Math.floor(ut*(st-at+1))+at}},5995:(at,st,ot)=>{"use strict";ot.r(st),ot.d(st,{createWebComp:()=>createWebComp,fa:()=>fa,listenForMenuClosure:()=>listenForMenuClosure,moreIcons:()=>moreIcons,onceParentAvailable:()=>onceParentAvailable});var ut=ot(3710),Hl=ot(8983),rc=ot(7208);function fa(at,st){return(0,ut.Kk)(at,st).node[0]}function moreIcons(){(0,Hl.c8)((async at=>{const st=await fetch((0,rc.TemakiIconURL)(at));return st.ok?{body:await st.text()}:null}),"temaki")}function createWebComp(at){let st=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const ot=document.createElement(at);return Object.entries(st).forEach((at=>{let[st,ut]=at;st.startsWith("_")?ot[st]=ut:st.startsWith("fn")?ot[st.substring(2)]=ut:st.startsWith("on")?ot.addEventListener(st.substring(2),ut):ut&&ot.setAttribute(st,ut)})),ot}function listenForMenuClosure(at,st){var ot,ut,Hl,rc,sc,oc,_c;null===(ot=at._parent)||void 0===ot||ot.addEventListener("menu-opened",(ot=>{ot.detail.menu!=at&&st()})),null===(ut=at._parent)||void 0===ut||null===(Hl=ut.onceMapReady)||void 0===Hl||Hl.call(ut).then((()=>{var ot,ut;null===(ot=at._parent.map)||void 0===ot||null===(ut=ot.on)||void 0===ut||ut.call(ot,"click",(()=>st()))})),null===(rc=at._parent)||void 0===rc||null===(sc=rc.oncePSVReady)||void 0===sc||sc.call(rc).then((()=>{at._parent.psv.addEventListener("click",(()=>st()))})),null===(oc=at._parent)||void 0===oc||null===(_c=oc.onceReady)||void 0===_c||_c.call(oc).then((()=>{var ot;null===(ot=at._parent.legend)||void 0===ot||ot.addEventListener("click",(()=>st()))}))}function lookForParent(at){return at._parent?at._parent:at===document.body?null:at.parentNode?lookForParent(at.parentNode):at.host?lookForParent(at.host):void 0}function onceParentAvailable(at){return at._parent?Promise.resolve(at._parent):new Promise((st=>{const ot=setInterval((()=>{const ut=lookForParent(at);ut&&(at._parent=ut,clearInterval(ot),st(at._parent))}),100)}))}},7325:(at,st)=>{"use strict";var ot="star",ut=[11088,61446],Hl="f005",rc="M287.9 0c9.2 0 17.6 5.2 21.6 13.5l68.6 141.3 153.2 22.6c9 1.3 16.5 7.6 19.3 16.3s.5 18.1-5.9 24.5L433.6 328.4l26.2 155.6c1.5 9-2.2 18.1-9.7 23.5s-17.3 6-25.3 1.7l-137-73.2L151 509.1c-8.1 4.3-17.9 3.7-25.3-1.7s-11.2-14.5-9.7-23.5l26.2-155.6L31.1 218.2c-6.5-6.4-8.7-15.9-5.9-24.5s10.3-14.9 19.3-16.3l153.2-22.6L266.3 13.5C270.4 5.2 278.7 0 287.9 0zm0 79L235.4 187.2c-3.5 7.1-10.2 12.1-18.1 13.3L99 217.9 184.9 303c5.5 5.5 8.1 13.3 6.8 21L171.4 443.7l105.2-56.2c7.1-3.8 15.6-3.8 22.6 0l105.2 56.2L384.2 324.1c-1.3-7.7 1.2-15.5 6.8-21l85.9-85.1L358.6 200.5c-7.8-1.2-14.6-6.1-18.1-13.3L287.9 79z";st.mw={prefix:"far",iconName:ot,icon:[576,512,ut,Hl,rc]},st.yy=st.mw},8466:(at,st)=>{"use strict";var ot="arrow-left",ut=[8592],Hl="f060",rc="M9.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.2 288 416 288c17.7 0 32-14.3 32-32s-14.3-32-32-32l-306.7 0L214.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z";st.mw={prefix:"fas",iconName:ot,icon:[448,512,ut,Hl,rc]},st.Ce=st.mw},6069:(at,st)=>{"use strict";var ot="arrow-right",ut=[8594],Hl="f061",rc="M438.6 278.6c12.5-12.5 12.5-32.8 0-45.3l-160-160c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L338.8 224 32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l306.7 0L233.4 393.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0l160-160z";st.mw={prefix:"fas",iconName:ot,icon:[448,512,ut,Hl,rc]},st.dm=st.mw},4881:(at,st)=>{"use strict";var ot=[61946],ut="M256 64C150 64 64 150 64 256s86 192 192 192c17.7 0 32 14.3 32 32s-14.3 32-32 32C114.6 512 0 397.4 0 256S114.6 0 256 0S512 114.6 512 256l0 32c0 53-43 96-96 96c-29.3 0-55.6-13.2-73.2-33.9C320 371.1 289.5 384 256 384c-70.7 0-128-57.3-128-128s57.3-128 128-128c27.9 0 53.7 8.9 74.7 24.1c5.7-5 13.1-8.1 21.3-8.1c17.7 0 32 14.3 32 32l0 80 0 32c0 17.7 14.3 32 32 32s32-14.3 32-32l0-32c0-106-86-192-192-192zm64 192a64 64 0 1 0 -128 0 64 64 0 1 0 128 0z";st.mw={prefix:"fas",iconName:"at",icon:[512,512,ot,"40",ut]},st.Hz=st.mw},1705:(at,st)=>{"use strict";var ot="backward",ut=[9194],Hl="f04a",rc="M459.5 440.6c9.5 7.9 22.8 9.7 34.1 4.4s18.4-16.6 18.4-29l0-320c0-12.4-7.2-23.7-18.4-29s-24.5-3.6-34.1 4.4L288 214.3l0 41.7 0 41.7L459.5 440.6zM256 352l0-96 0-128 0-32c0-12.4-7.2-23.7-18.4-29s-24.5-3.6-34.1 4.4l-192 160C4.2 237.5 0 246.5 0 256s4.2 18.5 11.5 24.6l192 160c9.5 7.9 22.8 9.7 34.1 4.4s18.4-16.6 18.4-29l0-64z";st.mw={prefix:"fas",iconName:ot,icon:[512,512,ut,Hl,rc]},st.TH=st.mw},9186:(at,st)=>{"use strict";var ot="calendar",ut=[128197,128198],Hl="f133",rc="M96 32l0 32L48 64C21.5 64 0 85.5 0 112l0 48 448 0 0-48c0-26.5-21.5-48-48-48l-48 0 0-32c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 32L160 64l0-32c0-17.7-14.3-32-32-32S96 14.3 96 32zM448 192L0 192 0 464c0 26.5 21.5 48 48 48l352 0c26.5 0 48-21.5 48-48l0-272z";st.mw={prefix:"fas",iconName:ot,icon:[448,512,ut,Hl,rc]},st.ok=st.mw},4927:(at,st,ot)=>{"use strict";var ut=ot(1577);st.mw={prefix:ut.prefix,iconName:ut.iconName,icon:[ut.width,ut.height,ut.aliases,ut.unicode,ut.svgPathData]},st.BE=st.mw,ut.prefix,ut.iconName,ut.width,ut.height,ut.aliases,ut.unicode,ut.svgPathData,ut.aliases},1577:(at,st)=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});var ot="calendar-days",ut=["calendar-alt"],Hl="f073",rc="M128 0c17.7 0 32 14.3 32 32l0 32 128 0 0-32c0-17.7 14.3-32 32-32s32 14.3 32 32l0 32 48 0c26.5 0 48 21.5 48 48l0 48L0 160l0-48C0 85.5 21.5 64 48 64l48 0 0-32c0-17.7 14.3-32 32-32zM0 192l448 0 0 272c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 192zm64 80l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm128 0l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zM64 400l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16zm144-16c-8.8 0-16 7.2-16 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0zm112 16l0 32c0 8.8 7.2 16 16 16l32 0c8.8 0 16-7.2 16-16l0-32c0-8.8-7.2-16-16-16l-32 0c-8.8 0-16 7.2-16 16z";st.definition={prefix:"fas",iconName:ot,icon:[448,512,ut,Hl,rc]},st.faCalendarDays=st.definition,st.prefix="fas",st.iconName=ot,st.width=448,st.height=512,st.ligatures=ut,st.unicode=Hl,st.svgPathData=rc,st.aliases=ut},99:(at,st)=>{"use strict";var ot="camera",ut=[62258,"camera-alt"],Hl="f030",rc="M149.1 64.8L138.7 96 64 96C28.7 96 0 124.7 0 160L0 416c0 35.3 28.7 64 64 64l384 0c35.3 0 64-28.7 64-64l0-256c0-35.3-28.7-64-64-64l-74.7 0L362.9 64.8C356.4 45.2 338.1 32 317.4 32L194.6 32c-20.7 0-39 13.2-45.5 32.8zM256 192a96 96 0 1 1 0 192 96 96 0 1 1 0-192z";st.mw={prefix:"fas",iconName:ot,icon:[512,512,ut,Hl,rc]},st.rw=st.mw},174:(at,st)=>{"use strict";var ot="check",ut=[10003,10004],Hl="f00c",rc="M438.6 105.4c12.5 12.5 12.5 32.8 0 45.3l-256 256c-12.5 12.5-32.8 12.5-45.3 0l-128-128c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0L160 338.7 393.4 105.4c12.5-12.5 32.8-12.5 45.3 0z";st.mw={prefix:"fas",iconName:ot,icon:[448,512,ut,Hl,rc]},st.e6=st.mw},2593:(at,st)=>{"use strict";var ot="chevron-down",ut=[],Hl="f078",rc="M233.4 406.6c12.5 12.5 32.8 12.5 45.3 0l192-192c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L256 338.7 86.6 169.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3l192 192z";st.mw={prefix:"fas",iconName:ot,icon:[512,512,ut,Hl,rc]},st.Jt=st.mw},1187:(at,st)=>{"use strict";var ot="chevron-right",ut=[9002],Hl="f054",rc="M310.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-192 192c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L242.7 256 73.4 86.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l192 192z";st.mw={prefix:"fas",iconName:ot,icon:[320,512,ut,Hl,rc]},st.Xk=st.mw},4336:(at,st)=>{"use strict";var ot="chevron-up",ut=[],Hl="f077",rc="M233.4 105.4c12.5-12.5 32.8-12.5 45.3 0l192 192c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L256 173.3 86.6 342.6c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3l192-192z";st.mw={prefix:"fas",iconName:ot,icon:[512,512,ut,Hl,rc]},st.w2=st.mw},4011:(at,st)=>{"use strict";var ot="circle-exclamation",ut=["exclamation-circle"],Hl="f06a",rc="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zm0-384c13.3 0 24 10.7 24 24l0 112c0 13.3-10.7 24-24 24s-24-10.7-24-24l0-112c0-13.3 10.7-24 24-24zM224 352a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z";st.mw={prefix:"fas",iconName:ot,icon:[512,512,ut,Hl,rc]},st.lE=st.mw},7516:(at,st)=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});var ot="circle-info",ut=["info-circle"],Hl="f05a",rc="M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z";st.definition={prefix:"fas",iconName:ot,icon:[512,512,ut,Hl,rc]},st.faCircleInfo=st.definition,st.prefix="fas",st.iconName=ot,st.width=512,st.height=512,st.ligatures=ut,st.unicode=Hl,st.svgPathData=rc,st.aliases=ut},3444:(at,st)=>{"use strict";var ot="circle-notch",ut=[],Hl="f1ce",rc="M222.7 32.1c5 16.9-4.6 34.8-21.5 39.8C121.8 95.6 64 169.1 64 256c0 106 86 192 192 192s192-86 192-192c0-86.9-57.8-160.4-137.1-184.1c-16.9-5-26.6-22.9-21.5-39.8s22.9-26.6 39.8-21.5C434.9 42.1 512 140 512 256c0 141.4-114.6 256-256 256S0 397.4 0 256C0 140 77.1 42.1 182.9 10.6c16.9-5 34.8 4.6 39.8 21.5z";st.mw={prefix:"fas",iconName:ot,icon:[512,512,ut,Hl,rc]},st.s4=st.mw},2975:(at,st)=>{"use strict";var ot="comment-dots",ut=[128172,62075,"commenting"],Hl="f4ad",rc="M256 448c141.4 0 256-93.1 256-208S397.4 32 256 32S0 125.1 0 240c0 45.1 17.7 86.8 47.7 120.9c-1.9 24.5-11.4 46.3-21.4 62.9c-5.5 9.2-11.1 16.6-15.2 21.6c-2.1 2.5-3.7 4.4-4.9 5.7c-.6 .6-1 1.1-1.3 1.4l-.3 .3c0 0 0 0 0 0c0 0 0 0 0 0s0 0 0 0s0 0 0 0c-4.6 4.6-5.9 11.4-3.4 17.4c2.5 6 8.3 9.9 14.8 9.9c28.7 0 57.6-8.9 81.6-19.3c22.9-10 42.4-21.9 54.3-30.6c31.8 11.5 67 17.9 104.1 17.9zM128 208a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm128 0a32 32 0 1 1 0 64 32 32 0 1 1 0-64zm96 32a32 32 0 1 1 64 0 32 32 0 1 1 -64 0z";st.mw={prefix:"fas",iconName:ot,icon:[512,512,ut,Hl,rc]},st.Be=st.mw},4189:(at,st)=>{"use strict";var ot="copy",ut=[],Hl="f0c5",rc="M208 0L332.1 0c12.7 0 24.9 5.1 33.9 14.1l67.9 67.9c9 9 14.1 21.2 14.1 33.9L448 336c0 26.5-21.5 48-48 48l-192 0c-26.5 0-48-21.5-48-48l0-288c0-26.5 21.5-48 48-48zM48 128l80 0 0 64-64 0 0 256 192 0 0-32 64 0 0 48c0 26.5-21.5 48-48 48L48 512c-26.5 0-48-21.5-48-48L0 176c0-26.5 21.5-48 48-48z";st.mw={prefix:"fas",iconName:ot,icon:[448,512,ut,Hl,rc]},st.jP=st.mw},7172:(at,st)=>{"use strict";var ot="earth-europe",ut=["globe-europe"],Hl="f7a2",rc="M266.3 48.3L232.5 73.6c-5.4 4-8.5 10.4-8.5 17.1l0 9.1c0 6.8 5.5 12.3 12.3 12.3c2.4 0 4.8-.7 6.8-2.1l41.8-27.9c2-1.3 4.4-2.1 6.8-2.1l1 0c6.2 0 11.3 5.1 11.3 11.3c0 3-1.2 5.9-3.3 8l-19.9 19.9c-5.8 5.8-12.9 10.2-20.7 12.8l-26.5 8.8c-5.8 1.9-9.6 7.3-9.6 13.4c0 3.7-1.5 7.3-4.1 10l-17.9 17.9c-6.4 6.4-9.9 15-9.9 24l0 4.3c0 16.4 13.6 29.7 29.9 29.7c11 0 21.2-6.2 26.1-16l4-8.1c2.4-4.8 7.4-7.9 12.8-7.9c4.5 0 8.7 2.1 11.4 5.7l16.3 21.7c2.1 2.9 5.5 4.5 9.1 4.5c8.4 0 13.9-8.9 10.1-16.4l-1.1-2.3c-3.5-7 0-15.5 7.5-18l21.2-7.1c7.6-2.5 12.7-9.6 12.7-17.6c0-10.3 8.3-18.6 18.6-18.6l29.4 0c8.8 0 16 7.2 16 16s-7.2 16-16 16l-20.7 0c-7.2 0-14.2 2.9-19.3 8l-4.7 4.7c-2.1 2.1-3.3 5-3.3 8c0 6.2 5.1 11.3 11.3 11.3l11.3 0c6 0 11.8 2.4 16 6.6l6.5 6.5c1.8 1.8 2.8 4.3 2.8 6.8s-1 5-2.8 6.8l-7.5 7.5C386 262 384 266.9 384 272s2 10 5.7 13.7L408 304c10.2 10.2 24.1 16 38.6 16l7.3 0c6.5-20.2 10-41.7 10-64c0-111.4-87.6-202.4-197.7-207.7zm172 307.9c-3.7-2.6-8.2-4.1-13-4.1c-6 0-11.8-2.4-16-6.6L396 332c-7.7-7.7-18-12-28.9-12c-9.7 0-19.2-3.5-26.6-9.8L314 287.4c-11.6-9.9-26.4-15.4-41.7-15.4l-20.9 0c-12.6 0-25 3.7-35.5 10.7L188.5 301c-17.8 11.9-28.5 31.9-28.5 53.3l0 3.2c0 17 6.7 33.3 18.7 45.3l16 16c8.5 8.5 20 13.3 32 13.3l21.3 0c13.3 0 24 10.7 24 24c0 2.5 .4 5 1.1 7.3c71.3-5.8 132.5-47.6 165.2-107.2zM0 256a256 256 0 1 1 512 0A256 256 0 1 1 0 256zM187.3 100.7c-6.2-6.2-16.4-6.2-22.6 0l-32 32c-6.2 6.2-6.2 16.4 0 22.6s16.4 6.2 22.6 0l32-32c6.2-6.2 6.2-16.4 0-22.6z";st.mw={prefix:"fas",iconName:ot,icon:[512,512,ut,Hl,rc]},st.YS=st.mw},3613:(at,st,ot)=>{"use strict";var ut=ot(6533);st.mw={prefix:ut.prefix,iconName:ut.iconName,icon:[ut.width,ut.height,ut.aliases,ut.unicode,ut.svgPathData]},st.v=st.mw,ut.prefix,ut.iconName,ut.width,ut.height,ut.aliases,ut.unicode,ut.svgPathData,ut.aliases},6533:(at,st)=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});var ot="ellipsis-vertical",ut=["ellipsis-v"],Hl="f142",rc="M64 360a56 56 0 1 0 0 112 56 56 0 1 0 0-112zm0-160a56 56 0 1 0 0 112 56 56 0 1 0 0-112zM120 96A56 56 0 1 0 8 96a56 56 0 1 0 112 0z";st.definition={prefix:"fas",iconName:ot,icon:[128,512,ut,Hl,rc]},st.faEllipsisVertical=st.definition,st.prefix="fas",st.iconName=ot,st.width=128,st.height=512,st.ligatures=ut,st.unicode=Hl,st.svgPathData=rc,st.aliases=ut},7704:(at,st,ot)=>{"use strict";var ut=ot(7144);st.mw={prefix:ut.prefix,iconName:ut.iconName,icon:[ut.width,ut.height,ut.aliases,ut.unicode,ut.svgPathData]},st.A=st.mw,ut.prefix,ut.iconName,ut.width,ut.height,ut.aliases,ut.unicode,ut.svgPathData,ut.aliases},2255:(at,st)=>{"use strict";var ot="floppy-disk",ut=[128190,128426,"save"],Hl="f0c7",rc="M64 32C28.7 32 0 60.7 0 96L0 416c0 35.3 28.7 64 64 64l320 0c35.3 0 64-28.7 64-64l0-242.7c0-17-6.7-33.3-18.7-45.3L352 50.7C340 38.7 323.7 32 306.7 32L64 32zm0 96c0-17.7 14.3-32 32-32l192 0c17.7 0 32 14.3 32 32l0 64c0 17.7-14.3 32-32 32L96 224c-17.7 0-32-14.3-32-32l0-64zM224 288a64 64 0 1 1 0 128 64 64 0 1 1 0-128z";st.mw={prefix:"fas",iconName:ot,icon:[448,512,ut,Hl,rc]},st.jk=st.mw},5431:(at,st)=>{"use strict";var ot="forward",ut=[9193],Hl="f04e",rc="M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416L0 96C0 83.6 7.2 72.3 18.4 67s24.5-3.6 34.1 4.4L224 214.3l0 41.7 0 41.7L52.5 440.6zM256 352l0-96 0-128 0-32c0-12.4 7.2-23.7 18.4-29s24.5-3.6 34.1 4.4l192 160c7.3 6.1 11.5 15.1 11.5 24.6s-4.2 18.5-11.5 24.6l-192 160c-9.5 7.9-22.8 9.7-34.1 4.4s-18.4-16.6-18.4-29l0-64z";st.mw={prefix:"fas",iconName:ot,icon:[512,512,ut,Hl,rc]},st.vF=st.mw},5279:(at,st)=>{"use strict";var ot="image",ut=[],Hl="f03e",rc="M0 96C0 60.7 28.7 32 64 32l384 0c35.3 0 64 28.7 64 64l0 320c0 35.3-28.7 64-64 64L64 480c-35.3 0-64-28.7-64-64L0 96zM323.8 202.5c-4.5-6.6-11.9-10.5-19.8-10.5s-15.4 3.9-19.8 10.5l-87 127.6L170.7 297c-4.6-5.7-11.5-9-18.7-9s-14.2 3.3-18.7 9l-64 80c-5.8 7.2-6.9 17.1-2.9 25.4s12.4 13.6 21.6 13.6l96 0 32 0 208 0c8.9 0 17.1-4.9 21.2-12.8s3.6-17.4-1.4-24.7l-120-176zM112 192a48 48 0 1 0 0-96 48 48 0 1 0 0 96z";st.mw={prefix:"fas",iconName:ot,icon:[512,512,ut,Hl,rc]},st.jb=st.mw},4954:(at,st)=>{"use strict";var ot="images",ut=[],Hl="f302",rc="M160 32c-35.3 0-64 28.7-64 64l0 224c0 35.3 28.7 64 64 64l352 0c35.3 0 64-28.7 64-64l0-224c0-35.3-28.7-64-64-64L160 32zM396 138.7l96 144c4.9 7.4 5.4 16.8 1.2 24.6S480.9 320 472 320l-144 0-48 0-80 0c-9.2 0-17.6-5.3-21.6-13.6s-2.9-18.2 2.9-25.4l64-80c4.6-5.7 11.4-9 18.7-9s14.2 3.3 18.7 9l17.3 21.6 56-84C360.5 132 368 128 376 128s15.5 4 20 10.7zM192 128a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zM48 120c0-13.3-10.7-24-24-24S0 106.7 0 120L0 344c0 75.1 60.9 136 136 136l320 0c13.3 0 24-10.7 24-24s-10.7-24-24-24l-320 0c-48.6 0-88-39.4-88-88l0-224z";st.mw={prefix:"fas",iconName:ot,icon:[576,512,ut,Hl,rc]},st.yv=st.mw},6668:(at,st,ot)=>{"use strict";var ut=ot(7516);st.mw={prefix:ut.prefix,iconName:ut.iconName,icon:[ut.width,ut.height,ut.aliases,ut.unicode,ut.svgPathData]},st.iW=st.mw,ut.prefix,ut.iconName,ut.width,ut.height,ut.aliases,ut.unicode,ut.svgPathData,ut.aliases},4220:(at,st)=>{"use strict";var ot="layer-group",ut=[],Hl="f5fd",rc="M264.5 5.2c14.9-6.9 32.1-6.9 47 0l218.6 101c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 149.8C37.4 145.8 32 137.3 32 128s5.4-17.9 13.9-21.8L264.5 5.2zM476.9 209.6l53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 277.8C37.4 273.8 32 265.3 32 256s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2c23.4 10.8 50.4 10.8 73.8 0l152-70.2zm-152 198.2l152-70.2 53.2 24.6c8.5 3.9 13.9 12.4 13.9 21.8s-5.4 17.9-13.9 21.8l-218.6 101c-14.9 6.9-32.1 6.9-47 0L45.9 405.8C37.4 401.8 32 393.3 32 384s5.4-17.9 13.9-21.8l53.2-24.6 152 70.2c23.4 10.8 50.4 10.8 73.8 0z";st.mw={prefix:"fas",iconName:ot,icon:[576,512,ut,Hl,rc]},st.qI=st.mw},325:(at,st)=>{"use strict";var ot="lightbulb",ut=[128161],Hl="f0eb",rc="M272 384c9.6-31.9 29.5-59.1 49.2-86.2c0 0 0 0 0 0c5.2-7.1 10.4-14.2 15.4-21.4c19.8-28.5 31.4-63 31.4-100.3C368 78.8 289.2 0 192 0S16 78.8 16 176c0 37.3 11.6 71.9 31.4 100.3c5 7.2 10.2 14.3 15.4 21.4c0 0 0 0 0 0c19.8 27.1 39.7 54.4 49.2 86.2l160 0zM192 512c44.2 0 80-35.8 80-80l0-16-160 0 0 16c0 44.2 35.8 80 80 80zM112 176c0 8.8-7.2 16-16 16s-16-7.2-16-16c0-61.9 50.1-112 112-112c8.8 0 16 7.2 16 16s-7.2 16-16 16c-44.2 0-80 35.8-80 80z";st.mw={prefix:"fas",iconName:ot,icon:[384,512,ut,Hl,rc]},st.rC=st.mw},7964:(at,st)=>{"use strict";var ot="link",ut=[128279,"chain"],Hl="f0c1",rc="M579.8 267.7c56.5-56.5 56.5-148 0-204.5c-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6c31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0c-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0L579.8 267.7zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5c50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5L217.7 177.2c31.5-31.5 82.5-31.5 114 0c27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0L60.2 244.3z";st.mw={prefix:"fas",iconName:ot,icon:[640,512,ut,Hl,rc]},st.CQ=st.mw},3520:(at,st)=>{"use strict";var ot="location-dot",ut=["map-marker-alt"],Hl="f3c5",rc="M215.7 499.2C267 435 384 279.4 384 192C384 86 298 0 192 0S0 86 0 192c0 87.4 117 243 168.3 307.2c12.3 15.3 35.1 15.3 47.4 0zM192 128a64 64 0 1 1 0 128 64 64 0 1 1 0-128z";st.mw={prefix:"fas",iconName:ot,icon:[384,512,ut,Hl,rc]},st.gK=st.mw},7761:(at,st)=>{"use strict";var ot="magnifying-glass",ut=[128269,"search"],Hl="f002",rc="M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z";st.mw={prefix:"fas",iconName:ot,icon:[512,512,ut,Hl,rc]},st.$U=st.mw},2e3:(at,st)=>{"use strict";var ot=[128506,62072],ut="f279",Hl="M384 476.1L192 421.2l0-385.3L384 90.8l0 385.3zm32-1.2l0-386.5L543.1 37.5c15.8-6.3 32.9 5.3 32.9 22.3l0 334.8c0 9.8-6 18.6-15.1 22.3L416 474.8zM15.1 95.1L160 37.2l0 386.5L32.9 474.5C17.1 480.8 0 469.2 0 452.2L0 117.4c0-9.8 6-18.6 15.1-22.3z";st.mw={prefix:"fas",iconName:"map",icon:[576,512,ot,ut,Hl]},st.e5=st.mw},3233:(at,st)=>{"use strict";var ot="medal",ut=[127941],Hl="f5a2",rc="M4.1 38.2C1.4 34.2 0 29.4 0 24.6C0 11 11 0 24.6 0L133.9 0c11.2 0 21.7 5.9 27.4 15.5l68.5 114.1c-48.2 6.1-91.3 28.6-123.4 61.9L4.1 38.2zm503.7 0L405.6 191.5c-32.1-33.3-75.2-55.8-123.4-61.9L350.7 15.5C356.5 5.9 366.9 0 378.1 0L487.4 0C501 0 512 11 512 24.6c0 4.8-1.4 9.6-4.1 13.6zM80 336a176 176 0 1 1 352 0A176 176 0 1 1 80 336zm184.4-94.9c-3.4-7-13.3-7-16.8 0l-22.4 45.4c-1.4 2.8-4 4.7-7 5.1L168 298.9c-7.7 1.1-10.7 10.5-5.2 16l36.3 35.4c2.2 2.2 3.2 5.2 2.7 8.3l-8.6 49.9c-1.3 7.6 6.7 13.5 13.6 9.9l44.8-23.6c2.7-1.4 6-1.4 8.7 0l44.8 23.6c6.9 3.6 14.9-2.2 13.6-9.9l-8.6-49.9c-.5-3 .5-6.1 2.7-8.3l36.3-35.4c5.6-5.4 2.5-14.8-5.2-16l-50.1-7.3c-3-.4-5.7-2.4-7-5.1l-22.4-45.4z";st.mw={prefix:"fas",iconName:ot,icon:[512,512,ut,Hl,rc]},st.B9=st.mw},7290:(at,st)=>{"use strict";var ot="minus",ut=[8211,8722,10134,"subtract"],Hl="f068",rc="M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z";st.mw={prefix:"fas",iconName:ot,icon:[448,512,ut,Hl,rc]},st.EZ=st.mw},8629:(at,st)=>{"use strict";var ot="palette",ut=[127912],Hl="f53f",rc="M512 256c0 .9 0 1.8 0 2.7c-.4 36.5-33.6 61.3-70.1 61.3L344 320c-26.5 0-48 21.5-48 48c0 3.4 .4 6.7 1 9.9c2.1 10.2 6.5 20 10.8 29.9c6.1 13.8 12.1 27.5 12.1 42c0 31.8-21.6 60.7-53.4 62c-3.5 .1-7 .2-10.6 .2C114.6 512 0 397.4 0 256S114.6 0 256 0S512 114.6 512 256zM128 288a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm0-96a32 32 0 1 0 0-64 32 32 0 1 0 0 64zM288 96a32 32 0 1 0 -64 0 32 32 0 1 0 64 0zm96 96a32 32 0 1 0 0-64 32 32 0 1 0 0 64z";st.mw={prefix:"fas",iconName:ot,icon:[512,512,ut,Hl,rc]},st.fy=st.mw},9683:(at,st)=>{"use strict";var ot="panorama",ut=[],Hl="e209",rc="M45.6 32C20.4 32 0 52.4 0 77.6L0 434.4C0 459.6 20.4 480 45.6 480c5.1 0 10-.8 14.7-2.4C74.6 472.8 177.6 440 320 440s245.4 32.8 259.6 37.6c4.7 1.6 9.7 2.4 14.7 2.4c25.2 0 45.6-20.4 45.6-45.6l0-356.7C640 52.4 619.6 32 594.4 32c-5 0-10 .8-14.7 2.4C565.4 39.2 462.4 72 320 72S74.6 39.2 60.4 34.4C55.6 32.8 50.7 32 45.6 32zM96 160a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm272 0c7.9 0 15.4 3.9 19.8 10.5L512.3 353c5.4 8 5.6 18.4 .4 26.5s-14.7 12.3-24.2 10.7C442.7 382.4 385.2 376 320 376c-65.6 0-123.4 6.5-169.3 14.4c-9.8 1.7-19.7-2.9-24.7-11.5s-4.3-19.4 1.9-27.2L197.3 265c4.6-5.7 11.4-9 18.7-9s14.2 3.3 18.7 9l26.4 33.1 87-127.6c4.5-6.6 11.9-10.5 19.8-10.5z";st.mw={prefix:"fas",iconName:ot,icon:[640,512,ut,Hl,rc]},st.pt=st.mw},1708:(at,st)=>{"use strict";var ot="paper-plane",ut=[61913],Hl="f1d8",rc="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480l0-83.6c0-4 1.5-7.8 4.2-10.8L331.8 202.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8 17.7 316.6C7.1 311.3 .3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4z";st.mw={prefix:"fas",iconName:ot,icon:[512,512,ut,Hl,rc]},st.is=st.mw},7472:(at,st)=>{"use strict";var ot="pause",ut=[9208],Hl="f04c",rc="M48 64C21.5 64 0 85.5 0 112L0 400c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48L48 64zm192 0c-26.5 0-48 21.5-48 48l0 288c0 26.5 21.5 48 48 48l32 0c26.5 0 48-21.5 48-48l0-288c0-26.5-21.5-48-48-48l-32 0z";st.mw={prefix:"fas",iconName:ot,icon:[320,512,ut,Hl,rc]},st.G1=st.mw},7321:(at,st)=>{"use strict";var ot=[128394],ut="f304",Hl="M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z";st.mw={prefix:"fas",iconName:"pen",icon:[512,512,ot,ut,Hl]},st.hp=st.mw},9243:(at,st)=>{"use strict";var ot="person-biking",ut=[128692,"biking"],Hl="f84a",rc="M400 96a48 48 0 1 0 0-96 48 48 0 1 0 0 96zm27.2 64l-61.8-48.8c-17.3-13.6-41.7-13.8-59.1-.3l-83.1 64.2c-30.7 23.8-28.5 70.8 4.3 91.6L288 305.1 288 416c0 17.7 14.3 32 32 32s32-14.3 32-32l0-128c0-10.7-5.3-20.7-14.2-26.6L295 232.9l60.3-48.5L396 217c5.7 4.5 12.7 7 20 7l64 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-52.8 0zM56 384a72 72 0 1 1 144 0A72 72 0 1 1 56 384zm200 0A128 128 0 1 0 0 384a128 128 0 1 0 256 0zm184 0a72 72 0 1 1 144 0 72 72 0 1 1 -144 0zm200 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z";st.mw={prefix:"fas",iconName:ot,icon:[640,512,ut,Hl,rc]},st.rO=st.mw},6386:(at,st)=>{"use strict";var ot="play",ut=[9654],Hl="f04b",rc="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80L0 432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z";st.mw={prefix:"fas",iconName:ot,icon:[384,512,ut,Hl,rc]},st.ij=st.mw},1372:(at,st)=>{"use strict";var ot="plus",ut=[10133,61543,"add"],Hl="M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z";st.mw={prefix:"fas",iconName:ot,icon:[448,512,ut,"2b",Hl]},st.QL=st.mw},5124:(at,st)=>{"use strict";var ot="question",ut=[10067,10068,61736],Hl="M80 160c0-35.3 28.7-64 64-64l32 0c35.3 0 64 28.7 64 64l0 3.6c0 21.8-11.1 42.1-29.4 53.8l-42.2 27.1c-25.2 16.2-40.4 44.1-40.4 74l0 1.4c0 17.7 14.3 32 32 32s32-14.3 32-32l0-1.4c0-8.2 4.2-15.8 11-20.2l42.2-27.1c36.6-23.6 58.8-64.1 58.8-107.7l0-3.6c0-70.7-57.3-128-128-128l-32 0C73.3 32 16 89.3 16 160c0 17.7 14.3 32 32 32s32-14.3 32-32zm80 320a40 40 0 1 0 0-80 40 40 0 1 0 0 80z";st.mw={prefix:"fas",iconName:ot,icon:[320,512,ut,"3f",Hl]},st.Ev=st.mw},7744:(at,st)=>{"use strict";var ot="rocket",ut=[],Hl="f135",rc="M156.6 384.9L125.7 354c-8.5-8.5-11.5-20.8-7.7-32.2c3-8.9 7-20.5 11.8-33.8L24 288c-8.6 0-16.6-4.6-20.9-12.1s-4.2-16.7 .2-24.1l52.5-88.5c13-21.9 36.5-35.3 61.9-35.3l82.3 0c2.4-4 4.8-7.7 7.2-11.3C289.1-4.1 411.1-8.1 483.9 5.3c11.6 2.1 20.6 11.2 22.8 22.8c13.4 72.9 9.3 194.8-111.4 276.7c-3.5 2.4-7.3 4.8-11.3 7.2l0 82.3c0 25.4-13.4 49-35.3 61.9l-88.5 52.5c-7.4 4.4-16.6 4.5-24.1 .2s-12.1-12.2-12.1-20.9l0-107.2c-14.1 4.9-26.4 8.9-35.7 11.9c-11.2 3.6-23.4 .5-31.8-7.8zM384 168a40 40 0 1 0 0-80 40 40 0 1 0 0 80z";st.mw={prefix:"fas",iconName:ot,icon:[512,512,ut,Hl,rc]},st.KM=st.mw},6787:(at,st)=>{"use strict";var ot="satellite-dish",ut=[128225],Hl="f7c0",rc="M192 32c0-17.7 14.3-32 32-32C383.1 0 512 128.9 512 288c0 17.7-14.3 32-32 32s-32-14.3-32-32C448 164.3 347.7 64 224 64c-17.7 0-32-14.3-32-32zM60.6 220.6L164.7 324.7l28.4-28.4c-.7-2.6-1.1-5.4-1.1-8.3c0-17.7 14.3-32 32-32s32 14.3 32 32s-14.3 32-32 32c-2.9 0-5.6-.4-8.3-1.1l-28.4 28.4L291.4 451.4c14.5 14.5 11.8 38.8-7.3 46.3C260.5 506.9 234.9 512 208 512C93.1 512 0 418.9 0 304c0-26.9 5.1-52.5 14.4-76.1c7.5-19 31.8-21.8 46.3-7.3zM224 96c106 0 192 86 192 192c0 17.7-14.3 32-32 32s-32-14.3-32-32c0-70.7-57.3-128-128-128c-17.7 0-32-14.3-32-32s14.3-32 32-32z";st.mw={prefix:"fas",iconName:ot,icon:[512,512,ut,Hl,rc]},st.hU=st.mw},2077:(at,st)=>{"use strict";var ot="scroll",ut=[128220],Hl="f70e",rc="M0 80l0 48c0 17.7 14.3 32 32 32l16 0 48 0 0-80c0-26.5-21.5-48-48-48S0 53.5 0 80zM112 32c10 13.4 16 30 16 48l0 304c0 35.3 28.7 64 64 64s64-28.7 64-64l0-5.3c0-32.4 26.3-58.7 58.7-58.7L480 320l0-192c0-53-43-96-96-96L112 32zM464 480c61.9 0 112-50.1 112-112c0-8.8-7.2-16-16-16l-245.3 0c-14.7 0-26.7 11.9-26.7 26.7l0 5.3c0 53-43 96-96 96l176 0 96 0z";st.mw={prefix:"fas",iconName:ot,icon:[576,512,ut,Hl,rc]},st.DD=st.mw},6002:(at,st,ot)=>{"use strict";var ut=ot(1260);st.mw={prefix:ut.prefix,iconName:ut.iconName,icon:[ut.width,ut.height,ut.aliases,ut.unicode,ut.svgPathData]},st.QO=st.mw,ut.prefix,ut.iconName,ut.width,ut.height,ut.aliases,ut.unicode,ut.svgPathData,ut.aliases},1260:(at,st)=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});var ot="share-nodes",ut=["share-alt"],Hl="f1e0",rc="M352 224c53 0 96-43 96-96s-43-96-96-96s-96 43-96 96c0 4 .2 8 .7 11.9l-94.1 47C145.4 170.2 121.9 160 96 160c-53 0-96 43-96 96s43 96 96 96c25.9 0 49.4-10.2 66.6-26.9l94.1 47c-.5 3.9-.7 7.8-.7 11.9c0 53 43 96 96 96s96-43 96-96s-43-96-96-96c-25.9 0-49.4 10.2-66.6 26.9l-94.1-47c.5-3.9 .7-7.8 .7-11.9s-.2-8-.7-11.9l94.1-47C302.6 213.8 326.1 224 352 224z";st.definition={prefix:"fas",iconName:ot,icon:[448,512,ut,Hl,rc]},st.faShareNodes=st.definition,st.prefix="fas",st.iconName=ot,st.width=448,st.height=512,st.ligatures=ut,st.unicode=Hl,st.svgPathData=rc,st.aliases=ut},1904:(at,st)=>{"use strict";var ot="sliders",ut=["sliders-h"],Hl="f1de",rc="M0 416c0 17.7 14.3 32 32 32l54.7 0c12.3 28.3 40.5 48 73.3 48s61-19.7 73.3-48L480 448c17.7 0 32-14.3 32-32s-14.3-32-32-32l-246.7 0c-12.3-28.3-40.5-48-73.3-48s-61 19.7-73.3 48L32 384c-17.7 0-32 14.3-32 32zm128 0a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zM320 256a32 32 0 1 1 64 0 32 32 0 1 1 -64 0zm32-80c-32.8 0-61 19.7-73.3 48L32 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l246.7 0c12.3 28.3 40.5 48 73.3 48s61-19.7 73.3-48l54.7 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-54.7 0c-12.3-28.3-40.5-48-73.3-48zM192 128a32 32 0 1 1 0-64 32 32 0 1 1 0 64zm73.3-64C253 35.7 224.8 16 192 16s-61 19.7-73.3 48L32 64C14.3 64 0 78.3 0 96s14.3 32 32 32l86.7 0c12.3 28.3 40.5 48 73.3 48s61-19.7 73.3-48L480 128c17.7 0 32-14.3 32-32s-14.3-32-32-32L265.3 64z";st.mw={prefix:"fas",iconName:ot,icon:[512,512,ut,Hl,rc]},st._$=st.mw},4780:(at,st)=>{"use strict";var ot="star",ut=[11088,61446],Hl="f005",rc="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z";st.mw={prefix:"fas",iconName:ot,icon:[576,512,ut,Hl,rc]},st.yy=st.mw},6249:(at,st)=>{"use strict";var ot="tags",ut=[],Hl="f02c",rc="M345 39.1L472.8 168.4c52.4 53 52.4 138.2 0 191.2L360.8 472.9c-9.3 9.4-24.5 9.5-33.9 .2s-9.5-24.5-.2-33.9L438.6 325.9c33.9-34.3 33.9-89.4 0-123.7L310.9 72.9c-9.3-9.4-9.2-24.6 .2-33.9s24.6-9.2 33.9 .2zM0 229.5L0 80C0 53.5 21.5 32 48 32l149.5 0c17 0 33.3 6.7 45.3 18.7l168 168c25 25 25 65.5 0 90.5L277.3 442.7c-25 25-65.5 25-90.5 0l-168-168C6.7 262.7 0 246.5 0 229.5zM144 144a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z";st.mw={prefix:"fas",iconName:ot,icon:[512,512,ut,Hl,rc]},st.DX=st.mw},3624:(at,st,ot)=>{"use strict";var ut=ot(6627);st.mw={prefix:ut.prefix,iconName:ut.iconName,icon:[ut.width,ut.height,ut.aliases,ut.unicode,ut.svgPathData]},st.GR=st.mw,ut.prefix,ut.iconName,ut.width,ut.height,ut.aliases,ut.unicode,ut.svgPathData,ut.aliases},4692:(at,st)=>{"use strict";var ot="trash",ut=[],Hl="f1f8",rc="M135.2 17.7L128 32 32 32C14.3 32 0 46.3 0 64S14.3 96 32 96l384 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-96 0-7.2-14.3C307.4 6.8 296.3 0 284.2 0L163.8 0c-12.1 0-23.2 6.8-28.6 17.7zM416 128L32 128 53.2 467c1.6 25.3 22.6 45 47.9 45l245.8 0c25.3 0 46.3-19.7 47.9-45L416 128z";st.mw={prefix:"fas",iconName:ot,icon:[448,512,ut,Hl,rc]},st.yL=st.mw},6311:(at,st)=>{"use strict";var ot="triangle-exclamation",ut=[9888,"exclamation-triangle","warning"],Hl="f071",rc="M256 32c14.2 0 27.3 7.5 34.5 19.8l216 368c7.3 12.4 7.3 27.7 .2 40.1S486.3 480 472 480L40 480c-14.3 0-27.6-7.7-34.7-20.1s-7-27.8 .2-40.1l216-368C228.7 39.5 241.8 32 256 32zm0 128c-13.3 0-24 10.7-24 24l0 112c0 13.3 10.7 24 24 24s24-10.7 24-24l0-112c0-13.3-10.7-24-24-24zm32 224a32 32 0 1 0 -64 0 32 32 0 1 0 64 0z";st.mw={prefix:"fas",iconName:ot,icon:[512,512,ut,Hl,rc]},st.JA=st.mw},7144:(at,st)=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});var ot="up-right-from-square",ut=["external-link-alt"],Hl="f35d",rc="M352 0c-12.9 0-24.6 7.8-29.6 19.8s-2.2 25.7 6.9 34.9L370.7 96 201.4 265.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L416 141.3l41.4 41.4c9.2 9.2 22.9 11.9 34.9 6.9s19.8-16.6 19.8-29.6l0-128c0-17.7-14.3-32-32-32L352 0zM80 32C35.8 32 0 67.8 0 112L0 432c0 44.2 35.8 80 80 80l320 0c44.2 0 80-35.8 80-80l0-112c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 112c0 8.8-7.2 16-16 16L80 448c-8.8 0-16-7.2-16-16l0-320c0-8.8 7.2-16 16-16l112 0c17.7 0 32-14.3 32-32s-14.3-32-32-32L80 32z";st.definition={prefix:"fas",iconName:ot,icon:[512,512,ut,Hl,rc]},st.faUpRightFromSquare=st.definition,st.prefix="fas",st.iconName=ot,st.width=512,st.height=512,st.ligatures=ut,st.unicode=Hl,st.svgPathData=rc,st.aliases=ut},7879:(at,st)=>{"use strict";var ot="user",ut=[128100,62144],Hl="f007",rc="M224 256A128 128 0 1 0 224 0a128 128 0 1 0 0 256zm-45.7 48C79.8 304 0 383.8 0 482.3C0 498.7 13.3 512 29.7 512l388.6 0c16.4 0 29.7-13.3 29.7-29.7C448 383.8 368.2 304 269.7 304l-91.4 0z";st.mw={prefix:"fas",iconName:ot,icon:[448,512,ut,Hl,rc]},st.X4=st.mw},6627:(at,st)=>{"use strict";Object.defineProperty(st,"__esModule",{value:!0});var ot="xmark",ut=[128473,10005,10006,10060,215,"close","multiply","remove","times"],Hl="f00d",rc="M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z";st.definition={prefix:"fas",iconName:ot,icon:[384,512,ut,Hl,rc]},st.faXmark=st.definition,st.prefix="fas",st.iconName=ot,st.width=384,st.height=512,st.ligatures=ut,st.unicode=Hl,st.svgPathData=rc,st.aliases=ut},1545:(at,st,ot)=>{"use strict";ot.d(st,{AZ:()=>ld,GR:()=>rm,IJ:()=>tm,Np:()=>lm,Qw:()=>$p,S:()=>registerButton,TL:()=>Em,Wp:()=>xu,aH:()=>sc,e6:()=>Su,jM:()=>tg,rx:()=>cd,uj:()=>sm,zY:()=>Mm});var ut=ot(9435),Hl=ot(9408),rc=Object.defineProperty,__export=(at,st)=>{for(var ot in st)rc(at,ot,{get:st[ot],enumerable:!0})},sc={};__export(sc,{ACTIONS:()=>mu,ANIMATION_MIN_DURATION:()=>_c,CAPTURE_EVENTS_CLASS:()=>pu,CTRLZOOM_TIMEOUT:()=>lu,DBLCLICK_DELAY:()=>Sc,EASINGS:()=>_u,ICONS:()=>yu,IDS:()=>gu,KEY_CODES:()=>Au,LONGTOUCH_DELAY:()=>iu,MOVE_THRESHOLD:()=>wc,SPHERE_RADIUS:()=>cu,TWOFINGERSOVERLAY_DELAY:()=>su,VIEWER_DATA:()=>uu});var oc,_c=500,wc=4,Sc=300,iu=500,su=100,lu=2e3,cu=10,uu="photoSphereViewer",pu="psv--capture-event",mu=(at=>(at.ROTATE_UP="ROTATE_UP",at.ROTATE_DOWN="ROTATE_DOWN",at.ROTATE_RIGHT="ROTATE_RIGHT",at.ROTATE_LEFT="ROTATE_LEFT",at.ZOOM_IN="ZOOM_IN",at.ZOOM_OUT="ZOOM_OUT",at))(mu||{}),gu={MENU:"menu",TWO_FINGERS:"twoFingers",CTRL_ZOOM:"ctrlZoom",ERROR:"error",DESCRIPTION:"description"},Au={Enter:"Enter",Control:"Control",Escape:"Escape",Space:" ",PageUp:"PageUp",PageDown:"PageDown",ArrowLeft:"ArrowLeft",ArrowUp:"ArrowUp",ArrowRight:"ArrowRight",ArrowDown:"ArrowDown",Delete:"Delete",Plus:"+",Minus:"-"},yu={arrow:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="40 40 432 432"><g transform="rotate(0, 256, 256)"><path fill="currentColor" d="M425.23 210.55H227.39a5 5 0 01-3.53-8.53l56.56-56.57a45.5 45.5 0 000-64.28 45.15 45.15 0 00-32.13-13.3 45.15 45.15 0 00-32.14 13.3L41.32 256l174.83 174.83a45.15 45.15 0 0032.14 13.3 45.15 45.15 0 0032.13-13.3 45.5 45.5 0 000-64.28l-56.57-56.57a5 5 0 013.54-8.53h197.84c25.06 0 45.45-20.39 45.45-45.45s-20.4-45.45-45.45-45.45z"/></g>\x3c!-- Created by Flatart from the Noun Project --\x3e</svg>\n',close:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><g fill="currentColor" transform=" translate(50, 50) rotate(45)"><rect x="-5" y="-65" width="10" height="130"/><rect x="-65" y="-5" width="130" height="10"/></g></svg>',download:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M83.3 35.6h-17V3H32.2v32.6H16.6l33.6 32.7 33-32.7z"/><path fill="currentColor" d="M83.3 64.2v16.3H16.6V64.2H-.1v32.6H100V64.2H83.3z"/>\x3c!--Created by Michael Zenaty from the Noun Project--\x3e</svg>\n',fullscreenIn:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M100 40H87.1V18.8h-21V6H100zM100 93.2H66V80.3h21.1v-21H100zM34 93.2H0v-34h12.9v21.1h21zM12.9 40H0V6h34v12.9H12.8z"/>\x3c!--Created by Garrett Knoll from the Noun Project--\x3e</svg>\n',fullscreenOut:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M66 7h13v21h21v13H66zM66 60.3h34v12.9H79v21H66zM0 60.3h34v34H21V73.1H0zM21 7h13v34H0V28h21z"/>\x3c!--Created by Garrett Knoll from the Noun Project--\x3e</svg>\n',info:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><path fill="currentColor" d="M28.3 26.1c-1 2.6-1.9 4.8-2.6 7-2.5 7.4-5 14.7-7.2 22-1.3 4.4.5 7.2 4.3 7.8 1.3.2 2.8.2 4.2-.1 8.2-2 11.9-8.6 15.7-15.2l-2.2 2a18.8 18.8 0 0 1-7.4 5.2 2 2 0 0 1-1.6-.2c-.2-.1 0-1 0-1.4l.8-1.8L41.9 28c.5-1.4.9-3 .7-4.4-.2-2.6-3-4.4-6.3-4.4-8.8.2-15 4.5-19.5 11.8-.2.3-.2.6-.3 1.3 3.7-2.8 6.8-6.1 11.8-6.2z"/><circle fill="currentColor" cx="39.3" cy="9.2" r="8.2"/>\x3c!--Created by Arafat Uddin from the Noun Project--\x3e</svg>\n',menu:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 10 80 80"><g fill="currentColor"><circle r="10" cx="20" cy="20"/><circle r="10" cx="50" cy="20"/><circle r="10" cx="80" cy="20"/><circle r="10" cx="20" cy="50"/><circle r="10" cx="50" cy="50"/><circle r="10" cx="80" cy="50"/><circle r="10" cx="20" cy="80"/><circle r="10" cx="50" cy="80"/><circle r="10" cx="80" cy="80"/></g>\x3c!-- Created by Richard Kun\xe1k from the Noun Project--\x3e</svg>\n',zoomIn:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M14.043 12.22a7.738 7.738 0 1 0-1.823 1.822l4.985 4.985c.503.504 1.32.504 1.822 0a1.285 1.285 0 0 0 0-1.822l-4.984-4.985zm-6.305 1.043a5.527 5.527 0 1 1 0-11.053 5.527 5.527 0 0 1 0 11.053z"/><path fill="currentColor" d="M8.728 4.009H6.744v2.737H4.006V8.73h2.738v2.736h1.984V8.73h2.737V6.746H8.728z"/>\x3c!--Created by Ryan Canning from the Noun Project--\x3e</svg>\n',zoomOut:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path fill="currentColor" d="M14.043 12.22a7.738 7.738 0 1 0-1.823 1.822l4.985 4.985c.503.504 1.32.504 1.822 0a1.285 1.285 0 0 0 0-1.822l-4.984-4.985zm-6.305 1.043a5.527 5.527 0 1 1 0-11.053 5.527 5.527 0 0 1 0 11.053z"/><path fill="currentColor" d="M4.006 6.746h7.459V8.73H4.006z"/>\x3c!--Created by Ryan Canning from the Noun Project--\x3e</svg>\n'},_u={linear:at=>at,inQuad:at=>at*at,outQuad:at=>at*(2-at),inOutQuad:at=>at<.5?2*at*at:(4-2*at)*at-1,inCubic:at=>at*at*at,outCubic:at=>--at*at*at+1,inOutCubic:at=>at<.5?4*at*at*at:(at-1)*(2*at-2)*(2*at-2)+1,inQuart:at=>at*at*at*at,outQuart:at=>1- --at*at*at*at,inOutQuart:at=>at<.5?8*at*at*at*at:1-8*--at*at*at*at,inQuint:at=>at*at*at*at*at,outQuint:at=>1+--at*at*at*at*at,inOutQuint:at=>at<.5?16*at*at*at*at*at:1+16*--at*at*at*at*at,inSine:at=>1-Math.cos(at*(Math.PI/2)),outSine:at=>Math.sin(at*(Math.PI/2)),inOutSine:at=>.5-.5*Math.cos(Math.PI*at),inExpo:at=>Math.pow(2,10*(at-1)),outExpo:at=>1-Math.pow(2,-10*at),inOutExpo:at=>(at=2*at-1)<0?.5*Math.pow(2,10*at):1-.5*Math.pow(2,-10*at),inCirc:at=>1-Math.sqrt(1-at*at),outCirc:at=>Math.sqrt(1-(at-1)*(at-1)),inOutCirc:at=>(at*=2)<1?.5-.5*Math.sqrt(1-at*at):.5+.5*Math.sqrt(1-(at-=2)*at)},xu={};function wrap(at,st){let ot=at%st;return ot<0&&(ot+=st),ot}function sum(at){return at.reduce(((at,st)=>at+st),0)}function distance(at,st){return Math.sqrt(Math.pow(at.x-st.x,2)+Math.pow(at.y-st.y,2))}function angle(at,st){return Math.atan2(st.y-at.y,st.x-at.x)}function getShortestArc(at,st){return[0,2*Math.PI,2*-Math.PI].reduce(((ot,ut)=>{const Hl=st-at+ut;return Math.abs(Hl)<Math.abs(ot)?Hl:ot}),1/0)}function getAngle(at,st){return Math.acos(Math.cos(at.pitch)*Math.cos(st.pitch)*Math.cos(at.yaw-st.yaw)+Math.sin(at.pitch)*Math.sin(st.pitch))}function greatArcDistance(at,st){let[ot,ut]=at,[Hl,rc]=st;ot-Hl>Math.PI?ot-=2*Math.PI:ot-Hl<-Math.PI&&(ot+=2*Math.PI);const sc=(Hl-ot)*Math.cos((ut+rc)/2),oc=rc-ut;return Math.sqrt(sc*sc+oc*oc)}function getElement(at){return"string"===typeof at?at.match(/^[a-z]/i)?document.getElementById(at):document.querySelector(at):at}function toggleClass(at,st,ot){void 0===ot?at.classList.toggle(st):ot?at.classList.add(st):ot||at.classList.remove(st)}function addClasses(at,st){at.classList.add(...st.split(" ").filter((at=>!!at)))}function removeClasses(at,st){at.classList.remove(...st.split(" ").filter((at=>!!at)))}function hasParent(at,st){let ot=at;do{if(ot===st)return!0;ot=ot.parentElement}while(ot);return!1}function getClosest(at,st){if(!at?.matches)return null;let ot=at;do{if(ot.matches(st))return ot;ot=ot.parentElement}while(ot);return null}function getEventTarget(at){return at?.composedPath()[0]||null}function getMatchingTarget(at,st){return at?at.composedPath().find((at=>(at instanceof HTMLElement||at instanceof SVGElement)&&at.matches(st))):null}function getPosition(at){let st=0,ot=0,ut=at;for(;ut;)st+=ut.offsetLeft-ut.scrollLeft+ut.clientLeft,ot+=ut.offsetTop-ut.scrollTop+ut.clientTop,ut=ut.offsetParent;return st-=window.scrollX,ot-=window.scrollY,{x:st,y:ot}}function getStyleProperty(at,st){return window.getComputedStyle(at).getPropertyValue(st)}function getTouchData(at){if(at.touches.length<2)return null;const st={x:at.touches[0].clientX,y:at.touches[0].clientY},ot={x:at.touches[1].clientX,y:at.touches[1].clientY};return{distance:distance(st,ot),angle:angle(st,ot),center:{x:(st.x+ot.x)/2,y:(st.y+ot.y)/2}}}function isFullscreenEnabled(at,st){return void 0===st&&(st=!1),st?at===oc:document.fullscreenElement===at}function requestFullscreen(at,st){void 0===st&&(st=!1),st?(oc=at,at.classList.add("psv-fullscreen-emulation"),document.dispatchEvent(new Event("fullscreenchange"))):at.requestFullscreen()}function exitFullscreen(at){void 0===at&&(at=!1),at?(oc.classList.remove("psv-fullscreen-emulation"),oc=null,document.dispatchEvent(new Event("fullscreenchange"))):document.exitFullscreen()}function keyPressMatch(at,st){let ot,ut=!1,Hl=!1,rc=!1,sc=!1;return"+"===st?ot=st:st.split("+").forEach((at=>{switch(at){case"Shift":ut=!0;break;case"Ctrl":Hl=!0;break;case"Alt":rc=!0;break;case"Meta":sc=!0;break;case"Plus":ot="+";break;case"Minus":ot="-";break;default:ot=at}})),ut===at.shiftKey&&Hl===at.ctrlKey&&rc===at.altKey&&sc===at.metaKey&&ot===at.key}function dasherize(at){return at.replace(/[A-Z](?:(?=[^A-Z])|[A-Z]*(?=[A-Z][^A-Z]|$))/g,((at,st)=>(st>0?"-":"")+at.toLowerCase()))}function throttle(at,st){let ot=!1;return function(){for(var ut=arguments.length,Hl=new Array(ut),rc=0;rc<ut;rc++)Hl[rc]=arguments[rc];ot||(ot=!0,setTimeout((()=>{at.apply(this,Hl),ot=!1}),st))}}function isPlainObject(at){if("object"!==typeof at||null===at||"[object Object]"!==Object.prototype.toString.call(at))return!1;if(null===Object.getPrototypeOf(at))return!0;let st=at;for(;null!==Object.getPrototypeOf(st);)st=Object.getPrototypeOf(st);return Object.getPrototypeOf(at)===st}function deepmerge(at,st){const ot=st;return function merge(at,st){return Array.isArray(st)?(at&&Array.isArray(at)?at.length=0:at=[],st.forEach(((st,ot)=>{at[ot]=merge(null,st)}))):"object"===typeof st?(at&&!Array.isArray(at)||(at={}),Object.keys(st).forEach((ut=>{"__proto__"!==ut&&("object"===typeof st[ut]&&st[ut]&&isPlainObject(st[ut])?st[ut]!==ot&&(at[ut]?merge(at[ut],st[ut]):at[ut]=merge(null,st[ut])):at[ut]=st[ut])}))):at=st,at}(at,st)}function clone(at){return deepmerge(null,at)}function isEmpty(at){return!at||0===Object.keys(at).length&&at.constructor===Object}function isNil(at){return null===at||void 0===at}function firstNonNull(){for(var at=arguments.length,st=new Array(at),ot=0;ot<at;ot++)st[ot]=arguments[ot];for(const ut of st)if(!isNil(ut))return ut;return null}function deepEqual(at,st){if(at===st)return!0;if(isObject(at)&&isObject(st)){if(Object.keys(at).length!==Object.keys(st).length)return!1;for(const ot of Object.keys(at))if(!deepEqual(at[ot],st[ot]))return!1;return!0}return!1}function isObject(at){return"object"===typeof at&&null!==at}__export(xu,{Animation:()=>id,Dynamic:()=>nd,MultiDynamic:()=>rd,PressHandler:()=>ad,Slider:()=>od,SliderDirection:()=>sd,addClasses:()=>addClasses,angle:()=>angle,applyEulerInverse:()=>applyEulerInverse,checkClosedShadowDom:()=>checkClosedShadowDom,checkStylesheet:()=>checkStylesheet,checkVersion:()=>checkVersion,cleanCssPosition:()=>cleanCssPosition,clone:()=>clone,createTexture:()=>createTexture,cssPositionIsOrdered:()=>cssPositionIsOrdered,dasherize:()=>dasherize,deepEqual:()=>deepEqual,deepmerge:()=>deepmerge,distance:()=>distance,exitFullscreen:()=>exitFullscreen,firstNonNull:()=>firstNonNull,getAbortError:()=>getAbortError,getAngle:()=>getAngle,getClosest:()=>getClosest,getConfigParser:()=>getConfigParser,getElement:()=>getElement,getEventTarget:()=>getEventTarget,getMatchingTarget:()=>getMatchingTarget,getPosition:()=>getPosition,getShortestArc:()=>getShortestArc,getStyleProperty:()=>getStyleProperty,getTouchData:()=>getTouchData,getXMPValue:()=>getXMPValue,greatArcDistance:()=>greatArcDistance,hasParent:()=>hasParent,invertResolvableBoolean:()=>invertResolvableBoolean,isAbortError:()=>isAbortError,isEmpty:()=>isEmpty,isExtendedPosition:()=>isExtendedPosition,isFullscreenEnabled:()=>isFullscreenEnabled,isNil:()=>isNil,isPlainObject:()=>isPlainObject,keyPressMatch:()=>keyPressMatch,logWarn:()=>logWarn,mergePanoData:()=>mergePanoData,parseAngle:()=>parseAngle,parsePoint:()=>parsePoint,parseSpeed:()=>parseSpeed,removeClasses:()=>removeClasses,requestFullscreen:()=>requestFullscreen,resolveBoolean:()=>resolveBoolean,speedToDuration:()=>speedToDuration,sum:()=>sum,throttle:()=>throttle,toggleClass:()=>toggleClass,wrap:()=>wrap});var Su=class _PSVError extends Error{constructor(at,st){super(st&&st instanceof Error?`${at}: ${st.message}`:at),this.name="PSVError",Error.captureStackTrace?.(this,_PSVError)}};function resolveBoolean(at,st){isPlainObject(at)?(st(at.initial,!0),at.promise.then((at=>st(at,!1)))):st(at,!0)}function invertResolvableBoolean(at){return{initial:!at.initial,promise:at.promise.then((at=>!at))}}function getAbortError(){const at=new Error("Loading was aborted.");return at.name="AbortError",at}function isAbortError(at){return"AbortError"===at?.name}function logWarn(at){console.warn(`PhotoSphereViewer: ${at}`)}function isExtendedPosition(at){return!(!at||Array.isArray(at))&&[["textureX","textureY"],["yaw","pitch"]].some((st=>{let[ot,ut]=st;return void 0!==at[ot]&&void 0!==at[ut]}))}function getXMPValue(at,st,ot){void 0===ot&&(ot=!0);let ut=at.match("<GPano:"+st+">(.*)</GPano:"+st+">");if(null!==ut){const at=ot?parseInt(ut[1],10):parseFloat(ut[1]);return isNaN(at)?null:at}if(ut=at.match("GPano:"+st+'="(.*?)"'),null!==ut){const at=ot?parseInt(ut[1],10):parseFloat(ut[1]);return isNaN(at)?null:at}return null}var Du={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},Lu=["left","center","right"],$u=["top","center","bottom"],hh=[...Lu,...$u],ed="center";function parsePoint(at){if(!at)return{x:.5,y:.5};if("object"===typeof at)return at;let st=at.toLocaleLowerCase().split(" ").slice(0,2);1===st.length&&(st=Du[st[0]]?[st[0],ed]:[st[0],st[0]]);const ot="left"!==st[1]&&"right"!==st[1]&&"top"!==st[0]&&"bottom"!==st[0];st=st.map((at=>Du[at]||at)),ot||st.reverse();const ut=st.join(" ").match(/^([0-9.]+)% ([0-9.]+)%$/);return ut?{x:parseFloat(ut[1])/100,y:parseFloat(ut[2])/100}:{x:.5,y:.5}}function cleanCssPosition(at,st){let{allowCenter:ot,cssOrder:ut}=void 0===st?{allowCenter:!0,cssOrder:!0}:st;return at?("string"===typeof at&&(at=at.split(" ")),1===at.length&&(at[0]===ed?at=[ed,ed]:-1!==Lu.indexOf(at[0])?at=[ed,at[0]]:-1!==$u.indexOf(at[0])&&(at=[at[0],ed])),2!==at.length||-1===hh.indexOf(at[0])||-1===hh.indexOf(at[1])?(logWarn(`Unparsable position ${at}`),null):ot||at[0]!==ed||at[1]!==ed?(ut&&!cssPositionIsOrdered(at)&&(at=[at[1],at[0]]),at[1]===ed&&-1!==Lu.indexOf(at[0])&&(at=[ed,at[0]]),at[0]===ed&&-1!==$u.indexOf(at[1])&&(at=[at[1],ed]),at):(logWarn("Invalid position center center"),null)):null}function cssPositionIsOrdered(at){return-1!==$u.indexOf(at[0])&&-1!==Lu.indexOf(at[1])}function parseSpeed(at){let st;if("string"===typeof at){const ot=at.toString().trim();let Hl=parseFloat(ot.replace(/^(-?[0-9]+(?:\.[0-9]*)?).*$/,"$1"));const rc=ot.replace(/^-?[0-9]+(?:\.[0-9]*)?(.*)$/,"$1").trim();switch(rc.match(/(pm|per minute)$/)&&(Hl/=60),rc){case"dpm":case"degrees per minute":case"dps":case"degrees per second":st=ut.cj9.degToRad(Hl);break;case"rdpm":case"radians per minute":case"rdps":case"radians per second":st=Hl;break;case"rpm":case"revolutions per minute":case"rps":case"revolutions per second":st=Hl*Math.PI*2;break;default:throw new Su(`Unknown speed unit "${rc}"`)}}else st=at;return st}function speedToDuration(at,st){if("number"!==typeof at){const ot=parseSpeed(at);return st/Math.abs(ot)*1e3}return Math.abs(at)}function parseAngle(at,st,ot){let Hl;if(void 0===st&&(st=!1),void 0===ot&&(ot=st),"string"===typeof at){const st=at.toLowerCase().trim().match(/^(-?[0-9]+(?:\.[0-9]*)?)(.*)$/);if(!st)throw new Su(`Unknown angle "${at}"`);const ot=parseFloat(st[1]),rc=st[2];if(rc)switch(rc){case"deg":case"degs":Hl=ut.cj9.degToRad(ot);break;case"rad":case"rads":Hl=ot;break;default:throw new Su(`Unknown angle unit "${rc}"`)}else Hl=ot}else{if("number"!==typeof at||isNaN(at))throw new Su(`Unknown angle "${at}"`);Hl=at}return Hl=wrap(st?Hl+Math.PI:Hl,2*Math.PI),st?ut.cj9.clamp(Hl-Math.PI,-Math.PI/(ot?2:1),Math.PI/(ot?2:1)):Hl}function createTexture(at,st){void 0===st&&(st=!1);const ot=new ut.gPd(at);return ot.needsUpdate=!0,ot.minFilter=st?ut.$_I:ut.k6q,ot.generateMipmaps=st,ot.anisotropy=st?2:1,ot}var td=new ut.PTz;function applyEulerInverse(at,st){td.setFromEuler(st).invert(),at.applyQuaternion(td)}function getConfigParser(at,st){const parser=function(ot){const ut=clone({...at,...ot}),Hl={};for(let[rc,sc]of Object.entries(ut)){if(st&&rc in st)sc=st[rc](sc,{rawConfig:ut,defValue:at[rc]});else if(!(rc in at)){logWarn(`Unknown option ${rc}`);continue}Hl[rc]=sc}return Hl};return parser.defaults=at,parser.parsers=st||{},parser}function checkStylesheet(at,st){"true"!==getStyleProperty(at,`--psv-${st}-loaded`)&&console.error(`PhotoSphereViewer: stylesheet "@photo-sphere-viewer/${st}/index.css" is not loaded`)}function checkVersion(at,st,ot){st&&st!==ot&&console.error(`PhotoSphereViewer: @photo-sphere-viewer/${at} is in version ${st} but @photo-sphere-viewer/core is in version ${ot}`)}function checkClosedShadowDom(at){do{if(at instanceof ShadowRoot&&"closed"===at.mode)return void console.error("PhotoSphereViewer: closed shadow DOM detected, the viewer might not work as expected");at=at.parentNode}while(at)}function mergePanoData(at,st,ot,ut){const Hl={isEquirectangular:!0,fullWidth:firstNonNull(ot?.fullWidth,ut?.fullWidth),fullHeight:firstNonNull(ot?.fullHeight,ut?.fullHeight),croppedWidth:at,croppedHeight:st,croppedX:firstNonNull(ot?.croppedX,ut?.croppedX),croppedY:firstNonNull(ot?.croppedY,ut?.croppedY),poseHeading:firstNonNull(ot?.poseHeading,ut?.poseHeading,0),posePitch:firstNonNull(ot?.posePitch,ut?.posePitch,0),poseRoll:firstNonNull(ot?.poseRoll,ut?.poseRoll,0),initialHeading:ut?.initialHeading,initialPitch:ut?.initialPitch,initialFov:ut?.initialFov};return Hl.fullWidth||Hl.fullHeight||(Hl.fullWidth=Math.max(at,2*st),Hl.fullHeight=Math.round(Hl.fullWidth/2)),Hl.fullWidth||(Hl.fullWidth=2*Hl.fullHeight),Hl.fullHeight||(Hl.fullHeight=Math.round(Hl.fullWidth/2)),null===Hl.croppedX&&(Hl.croppedX=Math.round((Hl.fullWidth-at)/2)),null===Hl.croppedY&&(Hl.croppedY=Math.round((Hl.fullHeight-st)/2)),Math.abs(Hl.fullWidth-2*Hl.fullHeight)>1&&(logWarn("Invalid panoData, fullWidth should be twice fullHeight"),Hl.fullHeight=Math.round(Hl.fullWidth/2)),Hl.croppedX+Hl.croppedWidth>Hl.fullWidth&&(logWarn("Invalid panoData, croppedX + croppedWidth > fullWidth"),Hl.croppedX=Hl.fullWidth-Hl.croppedWidth),Hl.croppedY+Hl.croppedHeight>Hl.fullHeight&&(logWarn("Invalid panoData, croppedY + croppedHeight > fullHeight"),Hl.croppedY=Hl.fullHeight-Hl.croppedHeight),Hl.croppedX<0&&(logWarn("Invalid panoData, croppedX < 0"),Hl.croppedX=0),Hl.croppedY<0&&(logWarn("Invalid panoData, croppedY < 0"),Hl.croppedY=0),Hl}var id=class{constructor(at){this.easing=_u.linear,this.callbacks=[],this.resolved=!1,this.cancelled=!1,this.options=at,at?(at.easing&&(this.easing="function"===typeof at.easing?at.easing:_u[at.easing]||_u.linear),this.delayTimeout=setTimeout((()=>{this.delayTimeout=void 0,this.animationFrame=window.requestAnimationFrame((at=>this.__run(at)))}),at.delay||0)):this.resolved=!0}__run(at){if(this.cancelled)return;this.start||(this.start=at);const st=(at-this.start)/this.options.duration,ot={};if(st<1){for(const[at,ut]of Object.entries(this.options.properties))if(ut){const Hl=ut.start+(ut.end-ut.start)*this.easing(st);ot[at]=Hl}this.options.onTick(ot,st),this.animationFrame=window.requestAnimationFrame((at=>this.__run(at)))}else{for(const[at,st]of Object.entries(this.options.properties))st&&(ot[at]=st.end);this.options.onTick(ot,1),this.__resolve(!0),this.animationFrame=void 0}}__resolve(at){at?this.resolved=!0:this.cancelled=!0,this.callbacks.forEach((st=>st(at))),this.callbacks.length=0}then(at){return this.resolved||this.cancelled?Promise.resolve(this.resolved).then(at):new Promise((at=>{this.callbacks.push(at)})).then(at)}cancel(){this.cancelled||this.resolved||(this.__resolve(!1),this.delayTimeout&&(window.clearTimeout(this.delayTimeout),this.delayTimeout=void 0),this.animationFrame&&(window.cancelAnimationFrame(this.animationFrame),this.animationFrame=void 0))}},nd=class{constructor(at,st){if(this.fn=at,this.mode=0,this.speed=0,this.speedMult=0,this.currentSpeed=0,this.target=0,this.__current=0,this.min=st.min,this.max=st.max,this.wrap=st.wrap,this.current=st.defaultValue,this.wrap&&0!==this.min)throw new Su("invalid config");this.fn&&this.fn(this.current)}get current(){return this.__current}set current(at){this.__current=at}setSpeed(at){this.speed=at}goto(at,st){void 0===st&&(st=1),this.mode=2,this.target=this.wrap?wrap(at,this.max):ut.cj9.clamp(at,this.min,this.max),this.speedMult=st}step(at,st){void 0===st&&(st=1),0===st?this.setValue(this.current+at):(2!==this.mode&&(this.target=this.current),this.goto(this.target+at,st))}roll(at,st){void 0===at&&(at=!1),void 0===st&&(st=1),this.mode=1,this.target=at?-1/0:1/0,this.speedMult=st}stop(){this.mode=0}setValue(at){return this.target=this.wrap?wrap(at,this.max):ut.cj9.clamp(at,this.min,this.max),this.mode=0,this.currentSpeed=0,this.target!==this.current&&(this.current=this.target,this.fn&&this.fn(this.current),!0)}update(at){if(2===this.mode){this.wrap&&Math.abs(this.target-this.current)>this.max/2&&(this.current=this.current<this.target?this.current+this.max:this.current-this.max);const at=this.currentSpeed*this.currentSpeed/(this.speed*this.speedMult*4);Math.abs(this.target-this.current)<=at&&(this.mode=0)}let st=0===this.mode?0:this.speed*this.speedMult;this.target<this.current&&(st=-st),this.currentSpeed<st?this.currentSpeed=Math.min(st,this.currentSpeed+at/1e3*this.speed*this.speedMult*2):this.currentSpeed>st&&(this.currentSpeed=Math.max(st,this.currentSpeed-at/1e3*this.speed*this.speedMult*2));let ot=null;return this.current>this.target&&this.currentSpeed?ot=Math.max(this.target,this.current+this.currentSpeed*at/1e3):this.current<this.target&&this.currentSpeed&&(ot=Math.min(this.target,this.current+this.currentSpeed*at/1e3)),null!==ot&&(ot=this.wrap?wrap(ot,this.max):ut.cj9.clamp(ot,this.min,this.max),ot!==this.current)&&(this.current=ot,this.fn&&this.fn(this.current),!0)}},rd=class{constructor(at,st){this.fn=at,this.dynamics=st,this.fn&&this.fn(this.current)}get current(){return Object.entries(this.dynamics).reduce(((at,st)=>{let[ot,ut]=st;return at[ot]=ut.current,at}),{})}setSpeed(at){for(const st of Object.values(this.dynamics))st.setSpeed(at)}goto(at,st){void 0===st&&(st=1);for(const[ot,ut]of Object.entries(at))this.dynamics[ot].goto(ut,st)}step(at,st){if(void 0===st&&(st=1),0===st)this.setValue(Object.keys(at).reduce(((st,ot)=>(st[ot]=at[ot]+this.dynamics[ot].current,st)),{}));else for(const[ot,ut]of Object.entries(at))this.dynamics[ot].step(ut,st)}roll(at,st){void 0===st&&(st=1);for(const[ot,ut]of Object.entries(at))this.dynamics[ot].roll(ut,st)}stop(){for(const at of Object.values(this.dynamics))at.stop()}setValue(at){let st=!1;for(const[ot,ut]of Object.entries(at))st=this.dynamics[ot].setValue(ut)||st;return st&&this.fn&&this.fn(this.current),st}update(at){let st=!1;for(const ot of Object.values(this.dynamics))st=ot.update(at)||st;return st&&this.fn&&this.fn(this.current),st}},ad=class{constructor(at){void 0===at&&(at=200),this.delay=at,this.time=0,this.delay=at}get pending(){return 0!==this.time}down(at){this.timeout&&(clearTimeout(this.timeout),this.timeout=void 0),this.time=(new Date).getTime(),this.data=at}up(at){if(!this.time)return;Date.now()-this.time<this.delay?this.timeout=setTimeout((()=>{at(this.data),this.timeout=void 0,this.time=0,this.data=void 0}),this.delay):(at(this.data),this.time=0,this.data=void 0)}},sd=(at=>(at.VERTICAL="VERTICAL",at.HORIZONTAL="HORIZONTAL",at))(sd||{}),od=class{constructor(at,st,ot){this.container=at,this.direction=st,this.listener=ot,this.mousedown=!1,this.mouseover=!1,this.container.addEventListener("click",this),this.container.addEventListener("mousedown",this),this.container.addEventListener("mouseenter",this),this.container.addEventListener("mouseleave",this),this.container.addEventListener("touchstart",this),this.container.addEventListener("mousemove",this,!0),this.container.addEventListener("touchmove",this,!0),window.addEventListener("mouseup",this),window.addEventListener("touchend",this)}get isVertical(){return"VERTICAL"===this.direction}get isHorizontal(){return"HORIZONTAL"===this.direction}destroy(){window.removeEventListener("mouseup",this),window.removeEventListener("touchend",this)}handleEvent(at){switch(at.type){case"click":at.stopPropagation();break;case"mousedown":this.__onMouseDown(at);break;case"mouseenter":this.__onMouseEnter(at);break;case"mouseleave":this.__onMouseLeave(at);break;case"touchstart":this.__onTouchStart(at);break;case"mousemove":this.__onMouseMove(at);break;case"touchmove":this.__onTouchMove(at);break;case"mouseup":this.__onMouseUp(at);break;case"touchend":this.__onTouchEnd(at)}}__onMouseDown(at){this.mousedown=!0,this.__update(at.clientX,at.clientY,!0)}__onMouseEnter(at){this.mouseover=!0,this.__update(at.clientX,at.clientY,!0)}__onTouchStart(at){this.mouseover=!0,this.mousedown=!0;const st=at.changedTouches[0];this.__update(st.clientX,st.clientY,!0)}__onMouseMove(at){(this.mousedown||this.mouseover)&&(at.stopPropagation(),this.__update(at.clientX,at.clientY,!0))}__onTouchMove(at){if(this.mousedown||this.mouseover){at.stopPropagation();const st=at.changedTouches[0];this.__update(st.clientX,st.clientY,!0)}}__onMouseUp(at){this.mousedown&&(this.mousedown=!1,this.__update(at.clientX,at.clientY,!1))}__onMouseLeave(at){this.mouseover&&(this.mouseover=!1,this.__update(at.clientX,at.clientY,!0))}__onTouchEnd(at){if(this.mousedown){this.mouseover=!1,this.mousedown=!1;const st=at.changedTouches[0];this.__update(st.clientX,st.clientY,!1)}}__update(at,st,ot){const Hl=this.container.getBoundingClientRect();let rc;rc=this.isVertical?ut.cj9.clamp((Hl.bottom-st)/Hl.height,0,1):ut.cj9.clamp((at-Hl.left)/Hl.width,0,1),this.listener({value:rc,click:!ot,mousedown:this.mousedown,mouseover:this.mouseover,cursor:{clientX:at,clientY:st}})}},ld={};__export(ld,{BeforeAnimateEvent:()=>pd,BeforeRenderEvent:()=>gd,BeforeRotateEvent:()=>Ad,ClickEvent:()=>vd,ConfigChangedEvent:()=>xd,DoubleClickEvent:()=>wd,FullscreenEvent:()=>Md,HideNotificationEvent:()=>Td,HideOverlayEvent:()=>kd,HidePanelEvent:()=>Dd,HideTooltipEvent:()=>Pd,KeypressEvent:()=>Nd,LoadProgressEvent:()=>Od,ObjectEnterEvent:()=>Yp,ObjectEvent:()=>Wp,ObjectHoverEvent:()=>Jp,ObjectLeaveEvent:()=>Kp,PanoramaErrorEvent:()=>Gd,PanoramaLoadEvent:()=>Fd,PanoramaLoadedEvent:()=>Ud,PositionUpdatedEvent:()=>qd,ReadyEvent:()=>Xd,RenderEvent:()=>$d,RollUpdatedEvent:()=>Qd,ShowNotificationEvent:()=>Ep,ShowOverlayEvent:()=>Lp,ShowPanelEvent:()=>Rp,ShowTooltipEvent:()=>Fp,SizeUpdatedEvent:()=>Up,StopAllEvent:()=>Gp,TransitionDoneEvent:()=>Hd,ViewerEvent:()=>hd,ZoomUpdatedEvent:()=>Hp});var cd=class extends Event{constructor(at,st){void 0===st&&(st=!1),super(at,{cancelable:st})}},ud=class extends EventTarget{dispatchEvent(at){return super.dispatchEvent(at)}addEventListener(at,st,ot){super.addEventListener(at,st,ot)}removeEventListener(at,st,ot){super.removeEventListener(at,st,ot)}},hd=class extends cd{},dd=class _BeforeAnimateEvent extends hd{constructor(at,st){super(_BeforeAnimateEvent.type,!0),this.position=at,this.zoomLevel=st}};dd.type="before-animate";var pd=dd,md=class _BeforeRenderEvent extends hd{constructor(at,st){super(_BeforeRenderEvent.type),this.timestamp=at,this.elapsed=st}};md.type="before-render";var gd=md,fd=class _BeforeRotateEvent extends hd{constructor(at){super(_BeforeRotateEvent.type,!0),this.position=at}};fd.type="before-rotate";var Ad=fd,yd=class _ClickEvent extends hd{constructor(at){super(_ClickEvent.type),this.data=at}};yd.type="click";var vd=yd,_d=class _ConfigChangedEvent extends hd{constructor(at){super(_ConfigChangedEvent.type),this.options=at}containsOptions(){for(var at=arguments.length,st=new Array(at),ot=0;ot<at;ot++)st[ot]=arguments[ot];return st.some((at=>this.options.includes(at)))}};_d.type="config-changed";var xd=_d,bd=class _DoubleClickEvent extends hd{constructor(at){super(_DoubleClickEvent.type),this.data=at}};bd.type="dblclick";var wd=bd,Ed=class _FullscreenEvent extends hd{constructor(at){super(_FullscreenEvent.type),this.fullscreenEnabled=at}};Ed.type="fullscreen";var Md=Ed,Sd=class _HideNotificationEvent extends hd{constructor(at){super(_HideNotificationEvent.type),this.notificationId=at}};Sd.type="hide-notification";var Td=Sd,Cd=class _HideOverlayEvent extends hd{constructor(at){super(_HideOverlayEvent.type),this.overlayId=at}};Cd.type="hide-overlay";var kd=Cd,Id=class _HidePanelEvent extends hd{constructor(at){super(_HidePanelEvent.type),this.panelId=at}};Id.type="hide-panel";var Dd=Id,Ld=class _HideTooltipEvent extends hd{constructor(at){super(_HideTooltipEvent.type),this.tooltipData=at}};Ld.type="hide-tooltip";var Pd=Ld,zd=class _KeypressEvent extends hd{constructor(at,st){super(_KeypressEvent.type,!0),this.key=at,this.originalEvent=st}matches(at){return keyPressMatch(this.originalEvent,at)}};zd.type="key-press";var Nd=zd,Rd=class _LoadProgressEvent extends hd{constructor(at){super(_LoadProgressEvent.type),this.progress=at}};Rd.type="load-progress";var Od=Rd,Bd=class _PanoramaLoadEvent extends hd{constructor(at){super(_PanoramaLoadEvent.type),this.panorama=at}};Bd.type="panorama-load";var Fd=Bd,jd=class _PanoramaLoadedEvent extends hd{constructor(at){super(_PanoramaLoadedEvent.type),this.data=at}};jd.type="panorama-loaded";var Ud=jd,Vd=class _PanoramaErrorEvent extends hd{constructor(at,st){super(_PanoramaErrorEvent.type),this.panorama=at,this.error=st}};Vd.type="panorama-error";var Gd=Vd,Zd=class _TransitionDoneEvent extends hd{constructor(at){super(_TransitionDoneEvent.type),this.completed=at}};Zd.type="transition-done";var Hd=Zd,Wd=class _PositionUpdatedEvent extends hd{constructor(at){super(_PositionUpdatedEvent.type),this.position=at}};Wd.type="position-updated";var qd=Wd,Yd=class _RollUpdatedEvent extends hd{constructor(at){super(_RollUpdatedEvent.type),this.roll=at}};Yd.type="roll-updated";var Qd=Yd,Kd=class _ReadyEvent extends hd{constructor(){super(_ReadyEvent.type)}};Kd.type="ready";var Xd=Kd,Jd=class _RenderEvent extends hd{constructor(){super(_RenderEvent.type)}};Jd.type="render";var $d=Jd,Ap=class _ShowNotificationEvent extends hd{constructor(at){super(_ShowNotificationEvent.type),this.notificationId=at}};Ap.type="show-notification";var Ep=Ap,Dp=class _ShowOverlayEvent extends hd{constructor(at){super(_ShowOverlayEvent.type),this.overlayId=at}};Dp.type="show-overlay";var Lp=Dp,Np=class _ShowPanelEvent extends hd{constructor(at){super(_ShowPanelEvent.type),this.panelId=at}};Np.type="show-panel";var Rp=Np,Op=class _ShowTooltipEvent extends hd{constructor(at,st){super(_ShowTooltipEvent.type),this.tooltip=at,this.tooltipData=st}};Op.type="show-tooltip";var Fp=Op,jp=class _SizeUpdatedEvent extends hd{constructor(at){super(_SizeUpdatedEvent.type),this.size=at}};jp.type="size-updated";var Up=jp,Vp=class _StopAllEvent extends hd{constructor(){super(_StopAllEvent.type)}};Vp.type="stop-all";var Gp=Vp,Zp=class _ZoomUpdatedEvent extends hd{constructor(at){super(_ZoomUpdatedEvent.type),this.zoomLevel=at}};Zp.type="zoom-updated";var Hp=Zp,Wp=class extends hd{constructor(at,st,ot,ut,Hl){super(at),this.originalEvent=st,this.object=ot,this.viewerPoint=ut,this.userDataKey=Hl}},qp=class _ObjectEnterEvent extends Wp{constructor(at,st,ot,ut){super(_ObjectEnterEvent.type,at,st,ot,ut)}};qp.type="enter-object";var Yp=qp,Qp=class _ObjectLeaveEvent extends Wp{constructor(at,st,ot,ut){super(_ObjectLeaveEvent.type,at,st,ot,ut)}};Qp.type="leave-object";var Kp=Qp,Xp=class _ObjectHoverEvent extends Wp{constructor(at,st,ot,ut){super(_ObjectHoverEvent.type,at,st,ot,ut)}};Xp.type="hover-object";var Jp=Xp,$p=class{constructor(at){this.viewer=at}init(){}destroy(){}supportsTransition(at){return!1}supportsPreload(at){return!1}textureCoordsToSphericalCoords(at,st){throw new Su("Current adapter does not support texture coordinates.")}sphericalCoordsToTextureCoords(at,st){throw new Su("Current adapter does not support texture coordinates.")}};function adapterInterop(at){if(at)for(const[,st]of[["_",at],...Object.entries(at)])if(st.prototype instanceof $p)return checkVersion(st.id,st.VERSION,"5.14.0"),st;return null}$p.supportsDownload=!1;var em=`${uu}_touchSupport`,tm={loaded:!1,pixelRatio:1,isWebGLSupported:!1,maxTextureWidth:0,isTouchEnabled:null,__maxCanvasWidth:null,isIphone:!1,get maxCanvasWidth(){return null===this.__maxCanvasWidth&&(this.__maxCanvasWidth=function(at){let st=at,ot=!1;const ut=document.createElement("canvas"),Hl=ut.getContext("2d");ut.width=1,ut.height=1;for(;st>1024&&!ot;){const at=document.createElement("canvas"),ut=at.getContext("2d");at.width=st,at.height=st/2;try{ut.fillStyle="white",ut.fillRect(st-1,st/2-1,1,1),Hl.drawImage(at,st-1,st/2-1,1,1,0,0,1,1),Hl.getImageData(0,0,1,1).data[0]>0&&(ot=!0)}catch{}at.width=0,at.height=0,ot||(st/=2)}if(ot)return st;throw new Su("Unable to detect system capabilities")}(this.maxTextureWidth)),this.__maxCanvasWidth},load(){if(!this.loaded){const at=function(){try{return document.createElement("canvas").getContext("webgl2")}catch{return null}}();this.pixelRatio=window.devicePixelRatio||1,this.isWebGLSupported=!!at,this.maxTextureWidth=at?at.getParameter(at.MAX_TEXTURE_SIZE):0,this.isTouchEnabled=function(){let at="ontouchstart"in window||navigator.maxTouchPoints>0;em in localStorage&&(at="true"===localStorage[em]);const st=new Promise((st=>{const clear=()=>{window.removeEventListener("mousedown",listenerMouse),window.removeEventListener("touchstart",listenerTouch),clearTimeout(ot)},listenerMouse=()=>{clear(),localStorage[em]=!1,st(!1)},listenerTouch=()=>{clear(),localStorage[em]=!0,st(!0)},listenerTimeout=()=>{clear(),localStorage[em]=at,st(at)};window.addEventListener("mousedown",listenerMouse,!1),window.addEventListener("touchstart",listenerTouch,!1);const ot=setTimeout(listenerTimeout,1e4)}));return{initial:at,promise:st}}(),this.isIphone=/iPhone/i.test(navigator.userAgent),this.loaded=!0}if(!tm.isWebGLSupported)throw new Su("WebGL 2 is not supported.");if(0===tm.maxTextureWidth)throw new Su("Unable to detect system capabilities")}};var im=getConfigParser({resolution:64,useXmpData:!0,blur:!1},{resolution:at=>{if(!at||!ut.cj9.isPowerOfTwo(at))throw new Su("EquirectangularAdapter resolution must be power of two.");return at}}),nm=class _EquirectangularAdapter extends $p{static withConfig(at){return[_EquirectangularAdapter,at]}constructor(at,st){super(at),this.config=im(st),this.SPHERE_SEGMENTS=this.config.resolution,this.SPHERE_HORIZONTAL_SEGMENTS=this.SPHERE_SEGMENTS/2}supportsTransition(){return!0}supportsPreload(){return!0}textureCoordsToSphericalCoords(at,st){if(isNil(at.textureX)||isNil(at.textureY))throw new Su("Texture position is missing 'textureX' or 'textureY'");const ot=(at.textureX+st.croppedX)/st.fullWidth*Math.PI*2,ut=(at.textureY+st.croppedY)/st.fullHeight*Math.PI;return{yaw:ot>=Math.PI?ot-Math.PI:ot+Math.PI,pitch:Math.PI/2-ut}}sphericalCoordsToTextureCoords(at,st){const ot=at.yaw/Math.PI/2*st.fullWidth,ut=at.pitch/Math.PI*st.fullHeight;let Hl=Math.round(at.yaw<Math.PI?ot+st.fullWidth/2:ot-st.fullWidth/2)-st.croppedX,rc=Math.round(st.fullHeight/2-ut)-st.croppedY;return(Hl<0||Hl>st.croppedWidth||rc<0||rc>st.croppedHeight)&&(Hl=rc=void 0),{textureX:Hl,textureY:rc}}async loadTexture(at,st,ot,ut){if(void 0===st&&(st=!0),void 0===ut&&(ut=this.config.useXmpData),"string"!==typeof at&&("object"!==typeof at||!at.path))return Promise.reject(new Su("Invalid panorama url, are you using the right adapter?"));let Hl;Hl="string"===typeof at?{path:at,data:ot}:{data:ot,...at};const rc=await this.viewer.textureLoader.loadFile(Hl.path,st?at=>this.viewer.textureLoader.dispatchProgress(at):null,Hl.path),sc=ut?await this.loadXMP(rc):null,oc=await this.viewer.textureLoader.blobToImage(rc);"function"===typeof Hl.data&&(Hl.data=Hl.data(oc,sc));const _c=mergePanoData(oc.width,oc.height,Hl.data,sc);return{panorama:at,texture:this.createEquirectangularTexture(oc),panoData:_c,cacheKey:Hl.path}}async loadXMP(at){const st=await this.loadBlobAsString(at),ot=st.indexOf("<x:xmpmeta");if(-1===ot)return null;const ut=st.indexOf("</x:xmpmeta>",ot);if(-1===ut)return null;const Hl=st.substring(ot,ut);return Hl.includes("GPano:")?{fullWidth:getXMPValue(Hl,"FullPanoWidthPixels"),fullHeight:getXMPValue(Hl,"FullPanoHeightPixels"),croppedWidth:getXMPValue(Hl,"CroppedAreaImageWidthPixels"),croppedHeight:getXMPValue(Hl,"CroppedAreaImageHeightPixels"),croppedX:getXMPValue(Hl,"CroppedAreaLeftPixels"),croppedY:getXMPValue(Hl,"CroppedAreaTopPixels"),poseHeading:getXMPValue(Hl,"PoseHeadingDegrees",!1),posePitch:getXMPValue(Hl,"PosePitchDegrees",!1),poseRoll:getXMPValue(Hl,"PoseRollDegrees",!1),initialHeading:getXMPValue(Hl,"InitialViewHeadingDegrees",!1),initialPitch:getXMPValue(Hl,"InitialViewPitchDegrees",!1),initialFov:getXMPValue(Hl,"InitialHorizontalFOVDegrees",!1)}:null}loadBlobAsString(at){return new Promise(((st,ot)=>{const ut=new FileReader;ut.onload=()=>st(ut.result),ut.onerror=ot,ut.readAsText(at)}))}createEquirectangularTexture(at){if(this.config.blur||at.width>tm.maxTextureWidth){const st=Math.min(1,tm.maxCanvasWidth/at.width),ot=new OffscreenCanvas(Math.floor(at.width*st),Math.floor(at.height*st)),ut=ot.getContext("2d");return this.config.blur&&(ut.filter=`blur(${ot.width/2048}px)`),ut.drawImage(at,0,0,ot.width,ot.height),createTexture(ot)}return createTexture(at)}createMesh(at){const st=at.croppedX/at.fullWidth*2*Math.PI,ot=at.croppedWidth/at.fullWidth*2*Math.PI,Hl=at.croppedY/at.fullHeight*Math.PI,rc=at.croppedHeight/at.fullHeight*Math.PI,sc=new ut.Gu$(cu,Math.round(this.SPHERE_SEGMENTS/(2*Math.PI)*ot),Math.round(this.SPHERE_HORIZONTAL_SEGMENTS/Math.PI*rc),-Math.PI/2+st,ot,Hl,rc).scale(-1,1,1),oc=new ut.V9B({depthTest:!1,depthWrite:!1});return new ut.eaF(sc,oc)}setTexture(at,st){at.material.map=st.texture}setTextureOpacity(at,st){at.material.opacity=st,at.material.transparent=st<1}disposeTexture(at){let{texture:st}=at;st.dispose()}disposeMesh(at){at.geometry.dispose(),at.material.dispose()}};nm.id="equirectangular",nm.VERSION="5.14.0",nm.supportsDownload=!0;var rm=nm,am=class _DualFisheyeAdapter extends rm{static withConfig(at){return[_DualFisheyeAdapter,at]}constructor(at,st){super(at,{resolution:st?.resolution??64,useXmpData:!1})}async loadTexture(at,st){const ot=await super.loadTexture(at,st,null,!1);return ot.panoData=null,ot}createMesh(){const at=new ut.Gu$(cu,this.SPHERE_SEGMENTS,this.SPHERE_HORIZONTAL_SEGMENTS).scale(-1,1,1).toNonIndexed(),st=at.getAttribute("uv"),ot=at.getAttribute("normal");for(let ut=0;ut<st.count;ut++)for(let at=0;at<3;at++){const Hl=3*ut+at,rc=ot.getX(Hl),sc=ot.getY(Hl),oc=ot.getZ(Hl),_c=.947;if(ut<st.count/6){const at=0===rc&&0===oc?1:Math.acos(sc)/Math.sqrt(rc*rc+oc*oc)*(2/Math.PI);st.setXY(Hl,rc*(_c/4)*at+1/4,oc*(_c/2)*at+.5)}else{const at=0===rc&&0===oc?1:Math.acos(-sc)/Math.sqrt(rc*rc+oc*oc)*(2/Math.PI);st.setXY(Hl,_c/4*-rc*at+3/4,oc*(_c/2)*at+.5)}}at.rotateX(-Math.PI/2),at.rotateY(Math.PI);const Hl=new ut.V9B({depthTest:!1,depthWrite:!1});return new ut.eaF(at,Hl)}};am.id="dual-fisheye",am.VERSION="5.14.0";var sm=class _AbstractComponent{constructor(at,st){this.parent=at,this.children=[],this.state={visible:!0},this.viewer=at instanceof _AbstractComponent?at.viewer:at,this.container=document.createElement(st.tagName??"div"),this.container.className=st.className||"",this.parent.children.push(this),this.parent.container.appendChild(this.container)}destroy(){this.parent.container.removeChild(this.container);const at=this.parent.children.indexOf(this);-1!==at&&this.parent.children.splice(at,1),this.children.slice().forEach((at=>at.destroy())),this.children.length=0}toggle(at){void 0===at&&(at=!this.isVisible()),at?this.show():this.hide()}hide(at){this.container.style.display="none",this.state.visible=!1}show(at){this.container.style.display="",this.state.visible=!0}isVisible(){return this.state.visible}},om=getConfigParser({id:null,tagName:null,className:null,title:null,hoverScale:!1,collapsable:!1,tabbable:!0,icon:null,iconActive:null}),lm=class extends sm{constructor(at,st){super(at,{tagName:st.tagName,className:`psv-button ${st.hoverScale?"psv-button--hover-scale":""} ${st.className||""}`}),this.state={visible:!0,enabled:!0,supported:!0,collapsed:!1,active:!1,width:0},this.config=om(st),st.id||(this.config.id=this.constructor.id),st.icon&&this.__setIcon(st.icon),this.state.width=this.container.offsetWidth,this.config.title?this.container.title=this.viewer.config.lang[this.config.title]??this.config.title:this.id&&this.id in this.viewer.config.lang&&(this.container.title=this.viewer.config.lang[this.id]),st.tabbable&&(this.container.tabIndex=0),this.container.addEventListener("click",(at=>{this.state.enabled&&this.onClick(),at.stopPropagation()})),this.container.addEventListener("keydown",(at=>{at.key===Au.Enter&&this.state.enabled&&(this.onClick(),at.stopPropagation())}))}get id(){return this.config.id}get title(){return this.container.title}get content(){return this.container.innerHTML}get width(){return this.state.width}get collapsable(){return this.config.collapsable}show(at){void 0===at&&(at=!0),this.isVisible()||(this.state.visible=!0,this.state.collapsed||(this.container.style.display=""),at&&this.viewer.navbar.autoSize())}hide(at){void 0===at&&(at=!0),this.isVisible()&&(this.state.visible=!1,this.container.style.display="none",at&&this.viewer.navbar.autoSize())}checkSupported(){resolveBoolean(this.isSupported(),((at,st)=>{this.state&&(this.state.supported=at,st?at||this.hide():this.toggle(at))}))}autoSize(){}isSupported(){return!0}toggleActive(at){void 0===at&&(at=!this.state.active),at!==this.state.active&&(this.state.active=at,toggleClass(this.container,"psv-button--active",this.state.active),this.config.iconActive&&this.__setIcon(this.state.active?this.config.iconActive:this.config.icon))}disable(){this.container.classList.add("psv-button--disabled"),this.state.enabled=!1}enable(){this.container.classList.remove("psv-button--disabled"),this.state.enabled=!0}collapse(){this.state.collapsed=!0,this.container.style.display="none"}uncollapse(){this.state.collapsed=!1,this.state.visible&&(this.container.style.display="")}__setIcon(at){this.container.innerHTML=at,addClasses(this.container.querySelector("svg"),"psv-button-svg")}},cm=class extends lm{constructor(at,st){super(at,{id:st.id??`psvButton-${Math.random().toString(36).substring(2)}`,className:`psv-custom-button ${st.className||""}`,hoverScale:!1,collapsable:!1!==st.collapsable,tabbable:!1!==st.tabbable,title:st.title}),this.customOnClick=st.onClick,st.content&&("string"===typeof st.content?this.container.innerHTML=st.content:(this.container.classList.add("psv-custom-button--no-padding"),st.content.style.height="100%",st.content.attachViewer?.(this.viewer),this.container.appendChild(st.content))),this.state.width=this.container.offsetWidth,st.disabled&&this.disable(),!1===st.visible&&this.hide()}onClick(){this.customOnClick?.(this.viewer)}},um=class extends lm{constructor(at){super(at,{className:"psv-description-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:yu.info}),this.mode=0,this.viewer.addEventListener(Td.type,this),this.viewer.addEventListener(Ep.type,this),this.viewer.addEventListener(Dd.type,this),this.viewer.addEventListener(Rp.type,this),this.viewer.addEventListener(xd.type,this)}destroy(){this.viewer.removeEventListener(Td.type,this),this.viewer.removeEventListener(Ep.type,this),this.viewer.removeEventListener(Dd.type,this),this.viewer.removeEventListener(Rp.type,this),this.viewer.removeEventListener(xd.type,this),super.destroy()}handleEvent(at){if(at instanceof xd)return void(at.containsOptions("description")&&this.autoSize(!0));if(!this.mode)return;let st=!1;at instanceof Td?st=1===this.mode:at instanceof Ep?st=1===this.mode&&at.notificationId!==gu.DESCRIPTION:at instanceof Dd?st=2===this.mode:at instanceof Rp&&(st=2===this.mode&&at.panelId!==gu.DESCRIPTION),st&&(this.toggleActive(!1),this.mode=0)}onClick(){this.mode?this.__close():this.__open()}hide(at){super.hide(at),this.mode&&this.__close()}autoSize(at){if(void 0===at&&(at=!1),at){const at=this.viewer.navbar.getButton("caption",!1),st=at&&!at.isVisible(),ot=!!this.viewer.config.description;st||ot?this.show(!1):this.hide(!1)}}__close(){switch(this.mode){case 1:this.viewer.notification.hide(gu.DESCRIPTION);break;case 2:this.viewer.panel.hide(gu.DESCRIPTION)}}__open(){this.toggleActive(!0),this.viewer.config.description?(this.mode=2,this.viewer.panel.show({id:gu.DESCRIPTION,content:`${this.viewer.config.caption?`<p>${this.viewer.config.caption}</p>`:""}${this.viewer.config.description}`})):(this.mode=1,this.viewer.notification.show({id:gu.DESCRIPTION,content:this.viewer.config.caption}))}};um.id="description";var hm=class extends lm{constructor(at){super(at,{tagName:"a",className:"psv-download-button",hoverScale:!0,collapsable:!0,tabbable:!0,icon:yu.download}),this.viewer.addEventListener(xd.type,this),this.viewer.addEventListener(Ud.type,this)}destroy(){this.viewer.removeEventListener(xd.type,this),this.viewer.removeEventListener(Ud.type,this),super.destroy()}handleEvent(at){at instanceof xd?(at.containsOptions("downloadUrl")&&this.checkSupported(),at.containsOptions("downloadUrl","downloadName")&&this.__update()):at instanceof Ud&&this.__update()}onClick(){}checkSupported(){this.viewer.adapter.constructor.supportsDownload||this.viewer.config.downloadUrl?this.show():this.hide()}__update(){const at=this.container;at.href=this.viewer.config.downloadUrl||this.viewer.config.panorama,at.target="_blank",at.href.startsWith("data:")&&!this.viewer.config.downloadName?at.download="panorama."+at.href.substring(0,at.href.indexOf(";")).split("/").pop():at.download=this.viewer.config.downloadName||at.href.split("/").pop()}};hm.id="download";var dm=class extends lm{constructor(at){super(at,{className:"psv-fullscreen-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:yu.fullscreenIn,iconActive:yu.fullscreenOut}),this.viewer.addEventListener(Md.type,this)}destroy(){this.viewer.removeEventListener(Md.type,this),super.destroy()}handleEvent(at){at instanceof Md&&this.toggleActive(at.fullscreenEnabled)}onClick(){this.viewer.toggleFullscreen()}};dm.id="fullscreen";var pm=class extends lm{constructor(at){super(at,{className:"psv-menu-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:yu.menu}),this.viewer.addEventListener(Rp.type,this),this.viewer.addEventListener(Dd.type,this),super.hide()}destroy(){this.viewer.removeEventListener(Rp.type,this),this.viewer.removeEventListener(Dd.type,this),super.destroy()}handleEvent(at){at instanceof Rp?this.toggleActive(at.panelId===gu.MENU):at instanceof Dd&&this.toggleActive(!1)}onClick(){this.state.active?this.__hideMenu():this.__showMenu()}hide(at){super.hide(at),this.__hideMenu()}show(at){super.show(at),this.state.active&&this.__showMenu()}__showMenu(){var at,st;this.viewer.panel.show({id:gu.MENU,content:(at=this.viewer.navbar.collapsed,st=this.viewer.config.lang.menu,`\n<div class="psv-panel-menu psv-panel-menu--stripped">\n  <h1 class="psv-panel-menu-title">${yu.menu} ${st}</h1>\n  <ul class="psv-panel-menu-list">\n    ${at.map((at=>`\n    <li data-psv-button="${at.id}" class="psv-panel-menu-item" tabindex="0">\n      <span class="psv-panel-menu-item-icon">${at.content}</span>\n      <span class="psv-panel-menu-item-label">${at.title}</span>\n    </li>\n    `)).join("")}\n  </ul>\n</div>\n`),noMargin:!0,clickHandler:at=>{const st=at?getClosest(at,".psv-panel-menu-item"):void 0,ot=st?st.dataset.psvButton:void 0;ot&&(this.viewer.navbar.getButton(ot).onClick(),this.__hideMenu())}})}__hideMenu(){this.viewer.panel.hide(gu.MENU)}};function getIcon(at){let st=0;switch(at){case 0:st=90;break;case 1:st=-90;break;case 3:st=180;break;default:st=0}return yu.arrow.replace("rotate(0",`rotate(${st}`)}pm.id="menu";var mm=class extends lm{constructor(at,st){super(at,{className:"psv-move-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:getIcon(st)}),this.direction=st,this.handler=new ad,this.container.addEventListener("mousedown",this),this.container.addEventListener("keydown",this),this.container.addEventListener("keyup",this),this.viewer.container.addEventListener("mouseup",this),this.viewer.container.addEventListener("touchend",this)}destroy(){this.__onMouseUp(),this.viewer.container.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchend",this),super.destroy()}handleEvent(at){switch(at.type){case"mousedown":this.__onMouseDown();break;case"mouseup":case"touchend":this.__onMouseUp();break;case"keydown":at.key===Au.Enter&&this.__onMouseDown();break;case"keyup":at.key===Au.Enter&&this.__onMouseUp()}}onClick(){}isSupported(){return invertResolvableBoolean(tm.isTouchEnabled)}__onMouseDown(){if(!this.state.enabled)return;const at={};switch(this.direction){case 0:at.pitch=!1;break;case 1:at.pitch=!0;break;case 3:at.yaw=!1;break;default:at.yaw=!0}this.viewer.stopAll(),this.viewer.dynamics.position.roll(at),this.handler.down()}__onMouseUp(){this.state.enabled&&this.handler.up((()=>{this.viewer.dynamics.position.stop(),this.viewer.resetIdleTimer()}))}};mm.groupId="move";var gm=class extends mm{constructor(at){super(at,1)}};gm.id="moveDown";var fm=class extends mm{constructor(at){super(at,2)}};fm.id="moveLeft";var Am=class extends mm{constructor(at){super(at,3)}};Am.id="moveRight";var ym=class extends mm{constructor(at){super(at,0)}};ym.id="moveUp";var vm=class extends lm{constructor(at,st,ot){super(at,{className:"psv-zoom-button",hoverScale:!0,collapsable:!1,tabbable:!0,icon:st}),this.direction=ot,this.handler=new ad,this.container.addEventListener("mousedown",this),this.container.addEventListener("keydown",this),this.container.addEventListener("keyup",this),this.viewer.container.addEventListener("mouseup",this),this.viewer.container.addEventListener("touchend",this)}destroy(){this.__onMouseUp(),this.viewer.container.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchend",this),super.destroy()}handleEvent(at){switch(at.type){case"mousedown":this.__onMouseDown();break;case"mouseup":case"touchend":this.__onMouseUp();break;case"keydown":at.key===Au.Enter&&this.__onMouseDown();break;case"keyup":at.key===Au.Enter&&this.__onMouseUp()}}onClick(){}isSupported(){return invertResolvableBoolean(tm.isTouchEnabled)}__onMouseDown(){this.state.enabled&&(this.viewer.dynamics.zoom.roll(1===this.direction),this.handler.down())}__onMouseUp(){this.state.enabled&&this.handler.up((()=>this.viewer.dynamics.zoom.stop()))}};vm.groupId="zoom";var _m=class extends vm{constructor(at){super(at,yu.zoomIn,0)}};_m.id="zoomIn";var xm=class extends vm{constructor(at){super(at,yu.zoomOut,1)}};xm.id="zoomOut";var bm=class extends lm{constructor(at){super(at,{className:"psv-zoom-range",hoverScale:!1,collapsable:!1,tabbable:!1}),this.zoomRange=document.createElement("div"),this.zoomRange.className="psv-zoom-range-line",this.container.appendChild(this.zoomRange),this.zoomValue=document.createElement("div"),this.zoomValue.className="psv-zoom-range-handle",this.zoomRange.appendChild(this.zoomValue),this.slider=new od(this.container,"HORIZONTAL",(at=>this.__onSliderUpdate(at))),this.mediaMinWidth=parseInt(getStyleProperty(this.container,"max-width"),10),this.viewer.addEventListener(Hp.type,this),this.viewer.state.ready?this.__moveZoomValue(this.viewer.getZoomLevel()):this.viewer.addEventListener(Xd.type,this)}destroy(){this.slider.destroy(),this.viewer.removeEventListener(Hp.type,this),this.viewer.removeEventListener(Xd.type,this),super.destroy()}handleEvent(at){at instanceof Hp?this.__moveZoomValue(at.zoomLevel):at instanceof Xd&&this.__moveZoomValue(this.viewer.getZoomLevel())}onClick(){}isSupported(){return invertResolvableBoolean(tm.isTouchEnabled)}autoSize(){this.state.supported&&(this.viewer.state.size.width<=this.mediaMinWidth&&this.state.visible?this.hide(!1):this.viewer.state.size.width>this.mediaMinWidth&&!this.state.visible&&this.show(!1))}__moveZoomValue(at){this.zoomValue.style.left=at/100*this.zoomRange.offsetWidth-this.zoomValue.offsetWidth/2+"px"}__onSliderUpdate(at){at.mousedown&&this.viewer.zoom(100*at.value)}};bm.id="zoomRange",bm.groupId="zoom";var wm=class extends ud{constructor(at){super(),this.viewer=at}init(){}destroy(){}},Em=class extends wm{constructor(at,st){super(at),this.config=this.constructor.configParser(st)}setOption(at,st){this.setOptions({[at]:st})}setOptions(at){const st={...this.config,...at},ot=this.constructor,ut=ot.configParser,Hl=ot.readonlyOptions,rc=ot.id;for(let[sc,oc]of Object.entries(at))sc in ut.defaults?Hl.includes(sc)?logWarn(`${rc}: Option "${sc}" cannot be updated`):(sc in ut.parsers&&(oc=ut.parsers[sc](oc,{rawConfig:st,defValue:ut.defaults[sc]})),this.config[sc]=oc):logWarn(`${rc}: Unknown option "${sc}"`)}};function pluginInterop(at){if(at)for(const[,st]of[["_",at],...Object.entries(at)])if(st.prototype instanceof wm)return checkVersion(st.id,st.VERSION,"5.14.0"),st;return null}Em.readonlyOptions=[];var Mm={panorama:null,container:null,adapter:[rm,null],plugins:[],caption:null,description:null,downloadUrl:null,downloadName:null,loadingImg:null,loadingTxt:"",size:null,fisheye:0,minFov:30,maxFov:90,defaultZoomLvl:50,defaultYaw:0,defaultPitch:0,sphereCorrection:null,moveSpeed:1,zoomSpeed:1,moveInertia:.8,mousewheel:!0,mousemove:!0,mousewheelCtrlKey:!1,touchmoveTwoFingers:!1,panoData:null,requestHeaders:null,canvasBackground:"#000",defaultTransition:{speed:1500,rotation:!0,effect:"fade"},rendererParameters:{alpha:!0,antialias:!0},withCredentials:()=>!1,navbar:["zoom","move","download","description","caption","fullscreen"],lang:{zoom:"Zoom",zoomOut:"Zoom out",zoomIn:"Zoom in",moveUp:"Move up",moveDown:"Move down",moveLeft:"Move left",moveRight:"Move right",description:"Description",download:"Download",fullscreen:"Fullscreen",loading:"Loading...",menu:"Menu",close:"Close",twoFingers:"Use two fingers to navigate",ctrlZoom:"Use ctrl + scroll to zoom the image",loadError:"The panorama cannot be loaded",webglError:"Your browser does not seem to support WebGL"},keyboard:"fullscreen",keyboardActions:{[Au.ArrowUp]:"ROTATE_UP",[Au.ArrowDown]:"ROTATE_DOWN",[Au.ArrowRight]:"ROTATE_RIGHT",[Au.ArrowLeft]:"ROTATE_LEFT",[Au.PageUp]:"ZOOM_IN",[Au.PageDown]:"ZOOM_OUT",[Au.Plus]:"ZOOM_IN",[Au.Minus]:"ZOOM_OUT"}},Sm={panorama:"Use setPanorama method to change the panorama",panoData:"Use setPanorama method to change the panorama",container:"Cannot change viewer container",adapter:"Cannot change adapter",plugins:"Cannot change plugins"},Tm={container:at=>{if(!at)throw new Su("No value given for container.");return at},adapter:(at,st)=>{let{defValue:ot}=st;if(!(at=at?Array.isArray(at)?[adapterInterop(at[0]),at[1]]:[adapterInterop(at),null]:ot)[0])throw new Su("An undefined value was given for adapter.");if(!at[0].id)throw new Su("Adapter has no id.");return at},defaultYaw:at=>parseAngle(at),defaultPitch:at=>parseAngle(at,!0),defaultZoomLvl:at=>ut.cj9.clamp(at,0,100),minFov:(at,st)=>{let{rawConfig:ot}=st;return ot.maxFov<at&&(logWarn("maxFov cannot be lower than minFov"),at=ot.maxFov),ut.cj9.clamp(at,1,179)},maxFov:(at,st)=>{let{rawConfig:ot}=st;return at<ot.minFov&&(at=ot.minFov),ut.cj9.clamp(at,1,179)},moveInertia:(at,st)=>{let{defValue:ot}=st;return!0===at?ot:!1===at?0:at},lang:at=>({...Mm.lang,...at}),fisheye:at=>!0===at?1:!1===at?0:at,requestHeaders:at=>at&&"object"===typeof at?()=>at:"function"===typeof at?at:null,withCredentials:at=>"boolean"===typeof at?()=>at:"function"===typeof at?at:()=>!1,defaultTransition:(at,st)=>{let{defValue:ot}=st;return null===at||0===at.speed?null:{...ot,...at}},rendererParameters:(at,st)=>{let{defValue:ot}=st;return{...at,...ot}},plugins:at=>at.map(((at,st)=>{if(!(at=Array.isArray(at)?[pluginInterop(at[0]),at[1]]:[pluginInterop(at),null])[0])throw new Su(`An undefined value was given for plugin ${st}.`);if(!at[0].id)throw new Su(`Plugin ${st} has no id.`);return at})),navbar:at=>!1===at?null:!0===at?clone(Mm.navbar):"string"===typeof at?at.split(/[ ,]/):at},Cm=getConfigParser(Mm,Tm),km=class extends lm{constructor(at){super(at,{className:"psv-caption",hoverScale:!1,collapsable:!1,tabbable:!0}),this.contentWidth=0,this.state.width=0,this.contentElt=document.createElement("div"),this.contentElt.className="psv-caption-content",this.container.appendChild(this.contentElt),this.setCaption(this.viewer.config.caption)}hide(){this.contentElt.style.display="none",this.state.visible=!1}show(){this.contentElt.style.display="",this.state.visible=!0}onClick(){}setCaption(at){this.show(),this.contentElt.innerHTML=at??"",this.contentElt.innerHTML?this.contentWidth=this.contentElt.offsetWidth:this.contentWidth=0,this.autoSize()}autoSize(){this.toggle(this.container.offsetWidth>=this.contentWidth),this.__refreshButton()}__refreshButton(){this.viewer.navbar.getButton(um.id,!1)?.autoSize(!0)}};km.id="caption";var Im={},Dm={};function registerButton(at,st){if(!at.id)throw new Su("Button id is required");if(Im[at.id]=at,at.groupId&&(Dm[at.groupId]=Dm[at.groupId]||[]).push(at),st){const ot=Mm.navbar;switch(st){case"start":ot.unshift(at.id);break;case"end":ot.push(at.id);break;default:{const[ut,Hl]=st.split(":"),rc=ot.indexOf(ut);if(!ut||!Hl||-1===rc)throw new Su(`Invalid defaultPosition ${st}`);ot.splice(rc+("right"===Hl?1:0),0,at.id)}}}}[xm,bm,_m,um,km,hm,dm,fm,Am,ym,gm].forEach((at=>registerButton(at)));var Lm=class extends sm{constructor(at){super(at,{className:`psv-navbar ${pu}`}),this.collapsed=[],this.state.visible=!1}show(){this.viewer.container.classList.add("psv--has-navbar"),this.container.classList.add("psv-navbar--open"),this.state.visible=!0}hide(){this.viewer.container.classList.remove("psv--has-navbar"),this.container.classList.remove("psv-navbar--open"),this.state.visible=!1}setButtons(at){this.children.slice().forEach((at=>at.destroy())),this.children.length=0,-1!==at.indexOf(km.id)&&-1===at.indexOf(um.id)&&at.splice(at.indexOf(km.id),0,um.id),at.forEach((at=>{"object"===typeof at?new cm(this,at):Im[at]?new Im[at](this):Dm[at]?Dm[at].forEach((at=>{new at(this)})):logWarn(`Unknown button ${at}`)})),new pm(this),this.children.forEach((at=>{at instanceof lm&&at.checkSupported()})),this.autoSize()}setCaption(at){this.children.some((st=>st instanceof km&&(st.setCaption(at),!0)))}getButton(at,st){void 0===st&&(st=!0);const ot=this.children.find((st=>st instanceof lm&&st.id===at));return!ot&&st&&logWarn(`button "${at}" not found in the navbar`),ot}focusButton(at){this.isVisible()&&(this.getButton(at,!1)?.container||this.container.firstElementChild)?.focus()}autoSize(){this.children.forEach((at=>{at instanceof lm&&at.autoSize()}));const at=this.container.offsetWidth;let st=0;const ot=[];this.children.forEach((at=>{at.isVisible()&&at instanceof lm&&(st+=at.width,at.collapsable&&ot.push(at))})),0!==st&&(at<st&&ot.length>0?(ot.forEach((at=>at.collapse())),this.collapsed=ot,this.getButton(pm.id).show(!1)):at>=st&&this.collapsed.length>0&&(this.collapsed.forEach((at=>at.uncollapse())),this.collapsed=[],this.getButton(pm.id).hide(!1)),this.getButton(km.id,!1)?.autoSize())}};ut.l2R.enabled=!1;var Pm={enabled:!0,maxItems:10,ttl:600,items:{},purgeInterval:null,init(){ut.l2R.enabled&&(logWarn("ThreeJS cache should be disabled"),ut.l2R.enabled=!1),!this.purgeInterval&&this.enabled&&(this.purgeInterval=setInterval((()=>this.purge()),6e4))},add(at,st,ot){this.enabled&&st&&(this.items[st]=this.items[st]??{files:{},lastAccess:null},this.items[st].files[at]=ot,this.items[st].lastAccess=Date.now())},get(at,st){if(this.enabled&&st&&this.items[st])return this.items[st].lastAccess=Date.now(),this.items[st].files[at]},remove(at,st){this.enabled&&st&&this.items[st]&&(delete this.items[st].files[at],0===Object.keys(this.items[st].files).length&&delete this.items[st])},purge(){Object.entries(this.items).sort(((at,st)=>{let[,ot]=at,[,ut]=st;return ut.lastAccess-ot.lastAccess})).forEach(((at,st)=>{let[ot,{lastAccess:ut}]=at;st>0&&(Date.now()-ut>=1e3*this.ttl||st>=this.maxItems)&&delete this.items[ot]}))}},zm=class extends sm{constructor(at){super(at,{className:"psv-loader-container"}),this.loader=document.createElement("div"),this.loader.className="psv-loader",this.container.appendChild(this.loader),this.size=this.loader.offsetWidth,this.canvas=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.canvas.setAttribute("class","psv-loader-canvas"),this.canvas.setAttribute("viewBox",`0 0 ${this.size} ${this.size}`),this.loader.appendChild(this.canvas),this.textColor=getStyleProperty(this.loader,"color"),this.color=getStyleProperty(this.canvas,"color"),this.border=parseInt(getStyleProperty(this.loader,"--psv-loader-border"),10),this.thickness=parseInt(getStyleProperty(this.loader,"--psv-loader-tickness"),10);const st=this.size/2;this.canvas.innerHTML=`\n            <circle cx="${st}" cy="${st}" r="${st}" fill="${this.color}"/>\n            <path d="" fill="none" stroke="${this.textColor}" stroke-width="${this.thickness}" stroke-linecap="round"/>\n        `,this.viewer.addEventListener(xd.type,this),this.__updateContent(),this.hide()}destroy(){this.viewer.removeEventListener(xd.type,this),super.destroy()}handleEvent(at){at instanceof xd&&at.containsOptions("loadingImg","loadingTxt","lang")&&this.__updateContent()}setProgress(at){this.container.classList.remove("psv-loader--undefined");const st=ut.cj9.clamp(at,0,99.999)/100*Math.PI*2,ot=this.size/2,Hl=ot,rc=this.thickness/2+this.border,sc=(this.size-this.thickness)/2-this.border,oc=Math.sin(st)*sc+ot,_c=-Math.cos(st)*sc+ot,wc=at>50?"1":"0";this.canvas.querySelector("path").setAttributeNS(null,"d",`M ${Hl} ${rc} A ${sc} ${sc} 0 ${wc} 1 ${oc} ${_c}`)}showUndefined(){this.show(),this.setProgress(25),this.container.classList.add("psv-loader--undefined")}__updateContent(){const at=this.loader.querySelector(".psv-loader-image, .psv-loader-text");let st;if(at&&this.loader.removeChild(at),this.viewer.config.loadingImg?(st=document.createElement("img"),st.className="psv-loader-image",st.src=this.viewer.config.loadingImg):null!==this.viewer.config.loadingTxt&&(st=document.createElement("div"),st.className="psv-loader-text",st.innerHTML=this.viewer.config.loadingTxt||this.viewer.config.lang.loading),st){const at=Math.round(Math.sqrt(2*Math.pow(this.size/2-this.thickness/2-this.border,2)));st.style.maxWidth=at+"px",st.style.maxHeight=at+"px",this.loader.appendChild(st)}}},Nm=class extends sm{constructor(at){super(at,{className:"psv-notification"}),this.state={visible:!1,contentId:null,timeout:null},this.content=document.createElement("div"),this.content.className="psv-notification-content",this.container.appendChild(this.content),this.content.addEventListener("click",(()=>this.hide()))}isVisible(at){return this.state.visible&&(!at||!this.state.contentId||this.state.contentId===at)}toggle(){throw new Su("Notification cannot be toggled")}show(at){this.state.timeout&&(clearTimeout(this.state.timeout),this.state.timeout=null),"string"===typeof at&&(at={content:at}),this.state.contentId=at.id||null,this.content.innerHTML=at.content,this.container.classList.add("psv-notification--visible"),this.state.visible=!0,this.viewer.dispatchEvent(new Ep(this.state.contentId)),at.timeout&&(this.state.timeout=setTimeout((()=>this.hide(this.state.contentId)),at.timeout))}hide(at){if(this.isVisible(at)){const at=this.state.contentId;this.container.classList.remove("psv-notification--visible"),this.state.visible=!1,this.state.contentId=null,this.viewer.dispatchEvent(new Td(at))}}},Rm=class extends sm{constructor(at){super(at,{className:`psv-overlay ${pu}`}),this.state={visible:!1,contentId:null,dismissible:!0},this.image=document.createElement("div"),this.image.className="psv-overlay-image",this.container.appendChild(this.image),this.title=document.createElement("div"),this.title.className="psv-overlay-title",this.container.appendChild(this.title),this.text=document.createElement("div"),this.text.className="psv-overlay-text",this.container.appendChild(this.text),this.container.addEventListener("click",this),this.viewer.addEventListener(Nd.type,this),super.hide()}destroy(){this.viewer.removeEventListener(Nd.type,this),super.destroy()}handleEvent(at){"click"===at.type?this.isVisible()&&this.state.dismissible&&(this.hide(),at.stopPropagation()):at instanceof Nd&&this.isVisible()&&this.state.dismissible&&at.matches(Au.Escape)&&(this.hide(),at.preventDefault())}isVisible(at){return this.state.visible&&(!at||!this.state.contentId||this.state.contentId===at)}toggle(){throw new Su("Overlay cannot be toggled")}show(at){"string"===typeof at&&(at={title:at}),this.state.contentId=at.id||null,this.state.dismissible=!1!==at.dismissible,this.image.innerHTML=at.image||"",this.title.innerHTML=at.title||"",this.text.innerHTML=at.text||"",super.show(),this.viewer.dispatchEvent(new Lp(this.state.contentId))}hide(at){if(this.isVisible(at)){const at=this.state.contentId;super.hide(),this.state.contentId=null,this.viewer.dispatchEvent(new kd(at))}}},Om="psv-panel-content--no-interaction",Bm=class extends sm{constructor(at){super(at,{className:`psv-panel ${pu}`}),this.state={visible:!1,contentId:null,mouseX:0,mouseY:0,mousedown:!1,clickHandler:null,keyHandler:null,width:{}};const st=document.createElement("div");st.className="psv-panel-resizer",this.container.appendChild(st);const ot=document.createElement("div");ot.className="psv-panel-close-button",ot.innerHTML=yu.close,ot.title=at.config.lang.close,this.container.appendChild(ot),this.content=document.createElement("div"),this.content.className="psv-panel-content",this.container.appendChild(this.content),ot.addEventListener("click",(()=>this.hide())),st.addEventListener("mousedown",this),st.addEventListener("touchstart",this),this.viewer.container.addEventListener("mouseup",this),this.viewer.container.addEventListener("touchend",this),this.viewer.container.addEventListener("mousemove",this),this.viewer.container.addEventListener("touchmove",this),this.viewer.addEventListener(Nd.type,this)}destroy(){this.viewer.removeEventListener(Nd.type,this),this.viewer.container.removeEventListener("mousemove",this),this.viewer.container.removeEventListener("touchmove",this),this.viewer.container.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchend",this),super.destroy()}handleEvent(at){switch(at.type){case"mousedown":this.__onMouseDown(at);break;case"touchstart":this.__onTouchStart(at);break;case"mousemove":this.__onMouseMove(at);break;case"touchmove":this.__onTouchMove(at);break;case"mouseup":this.__onMouseUp(at);break;case"touchend":this.__onTouchEnd(at);break;case Nd.type:this.__onKeyPress(at)}}isVisible(at){return this.state.visible&&(!at||!this.state.contentId||this.state.contentId===at)}toggle(){throw new Su("Panel cannot be toggled")}show(at){"string"===typeof at&&(at={content:at});const st=this.isVisible(at.id);this.state.contentId=at.id||null,this.state.visible=!0,this.state.clickHandler&&(this.content.removeEventListener("click",this.state.clickHandler),this.content.removeEventListener("keydown",this.state.keyHandler),this.state.clickHandler=null,this.state.keyHandler=null),at.id&&this.state.width[at.id]?this.container.style.width=this.state.width[at.id]:at.width?this.container.style.width=at.width:this.container.style.width=null,this.content.innerHTML=at.content,this.content.scrollTop=0,this.container.classList.add("psv-panel--open"),toggleClass(this.content,"psv-panel-content--no-margin",!0===at.noMargin),at.clickHandler&&(this.state.clickHandler=st=>{at.clickHandler(getEventTarget(st))},this.state.keyHandler=st=>{st.key===Au.Enter&&at.clickHandler(getEventTarget(st))},this.content.addEventListener("click",this.state.clickHandler),this.content.addEventListener("keydown",this.state.keyHandler),st||setTimeout((()=>{this.content.querySelector("a,button,[tabindex]")?.focus()}),300)),this.viewer.dispatchEvent(new Rp(this.state.contentId))}hide(at){if(this.isVisible(at)){const at=this.state.contentId;this.state.visible=!1,this.state.contentId=null,this.content.innerHTML=null,this.container.classList.remove("psv-panel--open"),this.state.clickHandler&&(this.content.removeEventListener("click",this.state.clickHandler),this.content.removeEventListener("keydown",this.state.keyHandler),this.state.clickHandler=null,this.state.keyHandler=null),this.viewer.dispatchEvent(new Dd(at))}}__onMouseDown(at){at.stopPropagation(),this.__startResize(at.clientX,at.clientY)}__onTouchStart(at){if(at.stopPropagation(),1===at.touches.length){const st=at.touches[0];this.__startResize(st.clientX,st.clientY)}}__onMouseUp(at){this.state.mousedown&&(at.stopPropagation(),this.state.mousedown=!1,this.content.classList.remove(Om))}__onTouchEnd(at){this.state.mousedown&&(at.stopPropagation(),0===at.touches.length&&(this.state.mousedown=!1,this.content.classList.remove(Om)))}__onMouseMove(at){this.state.mousedown&&(at.stopPropagation(),this.__resize(at.clientX,at.clientY))}__onTouchMove(at){if(this.state.mousedown){const st=at.touches[0];this.__resize(st.clientX,st.clientY)}}__onKeyPress(at){this.isVisible()&&at.matches(Au.Escape)&&(this.hide(),at.preventDefault())}__startResize(at,st){this.state.mouseX=at,this.state.mouseY=st,this.state.mousedown=!0,this.content.classList.add(Om)}__resize(at,st){const ot=at,ut=st,Hl=Math.max(200,this.container.offsetWidth-(ot-this.state.mouseX))+"px";this.state.contentId&&(this.state.width[this.state.contentId]=Hl),this.container.style.width=Hl,this.state.mouseX=ot,this.state.mouseY=ut}},Fm=class extends sm{constructor(at,st){super(at,{className:"psv-tooltip"}),this.state={visible:!0,arrow:0,border:0,state:0,width:0,height:0,pos:"",config:null,data:null,hideTimeout:null},this.content=document.createElement("div"),this.content.className="psv-tooltip-content",this.container.appendChild(this.content),this.arrow=document.createElement("div"),this.arrow.className="psv-tooltip-arrow",this.container.appendChild(this.arrow),this.container.addEventListener("transitionend",this),this.container.addEventListener("touchdown",(at=>at.stopPropagation())),this.container.addEventListener("mousedown",(at=>at.stopPropagation())),this.container.style.top="-1000px",this.container.style.left="-1000px",this.show(st)}handleEvent(at){"transitionend"===at.type&&this.__onTransitionEnd(at)}destroy(){clearTimeout(this.state.hideTimeout),delete this.state.data,super.destroy()}toggle(){throw new Su("Tooltip cannot be toggled")}show(at){if(0!==this.state.state)throw new Su("Initialized tooltip cannot be re-initialized");at.className&&addClasses(this.container,at.className),at.style&&Object.assign(this.container.style,at.style),this.state.state=3,this.update(at.content,at),this.state.data=at.data,this.state.state=1,this.viewer.dispatchEvent(new Fp(this,this.state.data)),this.__waitImages()}update(at,st){this.content.innerHTML=at;const ot=this.container.getBoundingClientRect();this.state.width=ot.right-ot.left,this.state.height=ot.bottom-ot.top,this.state.arrow=parseInt(getStyleProperty(this.arrow,"border-top-width"),10),this.state.border=parseInt(getStyleProperty(this.container,"border-top-left-radius"),10),this.move(st??this.state.config),this.__waitImages()}move(at){if(1!==this.state.state&&3!==this.state.state)throw new Su("Uninitialized tooltip cannot be moved");at.box=at.box??this.state.config?.box??{width:0,height:0},this.state.config=at;const st=this.container,ot=this.arrow,ut={posClass:cleanCssPosition(at.position,{allowCenter:!1,cssOrder:!1})||["top","center"],width:this.state.width,height:this.state.height,top:0,left:0,arrowTop:0,arrowLeft:0};this.__computeTooltipPosition(ut,at);let Hl=null,rc=null;if(ut.top<0?Hl="bottom":ut.top+ut.height>this.viewer.state.size.height&&(Hl="top"),ut.left<0?rc="right":ut.left+ut.width>this.viewer.state.size.width&&(rc="left"),rc||Hl){const st=cssPositionIsOrdered(ut.posClass);Hl&&(ut.posClass[st?0:1]=Hl),rc&&(ut.posClass[st?1:0]=rc),this.__computeTooltipPosition(ut,at)}st.style.top=ut.top+"px",st.style.left=ut.left+"px",ot.style.top=ut.arrowTop+"px",ot.style.left=ut.arrowLeft+"px";const sc=ut.posClass.join("-");sc!==this.state.pos&&(st.classList.remove(`psv-tooltip--${this.state.pos}`),this.state.pos=sc,st.classList.add(`psv-tooltip--${this.state.pos}`))}hide(){this.container.classList.remove("psv-tooltip--visible"),this.state.state=2,this.viewer.dispatchEvent(new Pd(this.state.data));const at=parseFloat(getStyleProperty(this.container,"transition-duration"));this.state.hideTimeout=setTimeout((()=>{this.destroy()}),2*at)}__onTransitionEnd(at){if("transform"===at.propertyName)switch(this.state.state){case 1:this.container.classList.add("psv-tooltip--visible"),this.state.state=3;break;case 2:this.state.state=0,this.destroy()}}__computeTooltipPosition(at,st){const ot=this.state.arrow,ut=st.top,Hl=at.height,rc=st.left,sc=at.width,oc=ot+this.state.border,_c=st.box.width/2+2*ot,wc=st.box.height/2+2*ot;switch(at.posClass.join("-")){case"top-left":at.top=ut-wc-Hl,at.left=rc+oc-sc,at.arrowTop=Hl,at.arrowLeft=sc-oc-ot;break;case"top-center":at.top=ut-wc-Hl,at.left=rc-sc/2,at.arrowTop=Hl,at.arrowLeft=sc/2-ot;break;case"top-right":at.top=ut-wc-Hl,at.left=rc-oc,at.arrowTop=Hl,at.arrowLeft=ot;break;case"bottom-left":at.top=ut+wc,at.left=rc+oc-sc,at.arrowTop=2*-ot,at.arrowLeft=sc-oc-ot;break;case"bottom-center":at.top=ut+wc,at.left=rc-sc/2,at.arrowTop=2*-ot,at.arrowLeft=sc/2-ot;break;case"bottom-right":at.top=ut+wc,at.left=rc-oc,at.arrowTop=2*-ot,at.arrowLeft=ot;break;case"left-top":at.top=ut+oc-Hl,at.left=rc-_c-sc,at.arrowTop=Hl-oc-ot,at.arrowLeft=sc;break;case"center-left":at.top=ut-Hl/2,at.left=rc-_c-sc,at.arrowTop=Hl/2-ot,at.arrowLeft=sc;break;case"left-bottom":at.top=ut-oc,at.left=rc-_c-sc,at.arrowTop=ot,at.arrowLeft=sc;break;case"right-top":at.top=ut+oc-Hl,at.left=rc+_c,at.arrowTop=Hl-oc-ot,at.arrowLeft=2*-ot;break;case"center-right":at.top=ut-Hl/2,at.left=rc+_c,at.arrowTop=Hl/2-ot,at.arrowLeft=2*-ot;break;case"right-bottom":at.top=ut-oc,at.left=rc+_c,at.arrowTop=ot,at.arrowLeft=2*-ot}}__waitImages(){const at=this.content.querySelectorAll("img");if(at.length>0){const st=[];at.forEach((at=>{at.complete||st.push(new Promise((st=>{at.onload=st,at.onerror=st})))})),st.length&&Promise.all(st).then((()=>{if(1===this.state.state||3===this.state.state){const at=this.container.getBoundingClientRect();this.state.width=at.right-at.left,this.state.height=at.bottom-at.top,this.move(this.state.config)}}))}}},jm=class{constructor(at){this.viewer=at,this.config=at.config,this.state=at.state}destroy(){}},Um=new ut.Pq0,Vm=new ut.O9p(0,0,0,"ZXY"),Gm=class extends jm{constructor(at){super(at)}fovToZoomLevel(at){const st=Math.round((at-this.config.minFov)/(this.config.maxFov-this.config.minFov)*100);return ut.cj9.clamp(st-2*(st-50),0,100)}zoomLevelToFov(at){return this.config.maxFov+at/100*(this.config.minFov-this.config.maxFov)}vFovToHFov(at){return ut.cj9.radToDeg(2*Math.atan(Math.tan(ut.cj9.degToRad(at)/2)*this.state.aspect))}hFovToVFov(at){return ut.cj9.radToDeg(2*Math.atan(Math.tan(ut.cj9.degToRad(at)/2)/this.state.aspect))}getAnimationProperties(at,st,ot){const ut=!isNil(st),Hl=!isNil(ot),rc={};let sc=null;if(ut){const ot=this.viewer.getPosition(),ut=getShortestArc(ot.yaw,st.yaw);rc.yaw={start:ot.yaw,end:ot.yaw+ut},rc.pitch={start:ot.pitch,end:st.pitch},sc=speedToDuration(at,getAngle(ot,st))}if(Hl){const st=this.viewer.getZoomLevel(),ut=Math.abs(ot-st);rc.zoom={start:st,end:ot},null===sc&&(sc=speedToDuration(at,Math.PI/4*ut/100))}return sc=null===sc?"number"===typeof at?at:_c:Math.max(_c,sc),{duration:sc,properties:rc}}getTransitionOptions(at){let st;const ot=this.config.defaultTransition??Mm.defaultTransition;return st=!1===at.transition||null===at.transition?null:!0===at.transition?{...ot}:"object"===typeof at.transition?{...ot,...at.transition}:this.config.defaultTransition,st}textureCoordsToSphericalCoords(at){if(!this.state.textureData?.panoData)throw new Su("Current adapter does not support texture coordinates or no texture has been loaded");const st=this.viewer.adapter.textureCoordsToSphericalCoords(at,this.state.textureData.panoData);return Vm.equals(this.viewer.renderer.panoramaPose)&&Vm.equals(this.viewer.renderer.sphereCorrection)?st:(this.sphericalCoordsToVector3(st,Um),Um.applyEuler(this.viewer.renderer.panoramaPose),Um.applyEuler(this.viewer.renderer.sphereCorrection),this.vector3ToSphericalCoords(Um))}sphericalCoordsToTextureCoords(at){if(!this.state.textureData?.panoData)throw new Su("Current adapter does not support texture coordinates or no texture has been loaded");return Vm.equals(this.viewer.renderer.panoramaPose)&&Vm.equals(this.viewer.renderer.sphereCorrection)||(this.sphericalCoordsToVector3(at,Um),applyEulerInverse(Um,this.viewer.renderer.sphereCorrection),applyEulerInverse(Um,this.viewer.renderer.panoramaPose),at=this.vector3ToSphericalCoords(Um)),this.viewer.adapter.sphericalCoordsToTextureCoords(at,this.state.textureData.panoData)}sphericalCoordsToVector3(at,st,ot){return void 0===ot&&(ot=cu),st||(st=new ut.Pq0),st.x=ot*-Math.cos(at.pitch)*Math.sin(at.yaw),st.y=ot*Math.sin(at.pitch),st.z=ot*Math.cos(at.pitch)*Math.cos(at.yaw),st}vector3ToSphericalCoords(at){const st=Math.acos(at.y/Math.sqrt(at.x*at.x+at.y*at.y+at.z*at.z)),ot=Math.atan2(at.x,at.z);return{yaw:ot<0?-ot:2*Math.PI-ot,pitch:Math.PI/2-st}}viewerCoordsToVector3(at){const st=this.viewer.renderer.getIntersections(at).filter((at=>at.object.userData[uu]));return st.length?st[0].point:null}viewerCoordsToSphericalCoords(at){const st=this.viewerCoordsToVector3(at);return st?this.vector3ToSphericalCoords(st):null}vector3ToViewerCoords(at){const st=at.clone();return st.project(this.viewer.renderer.camera),{x:Math.round((st.x+1)/2*this.state.size.width),y:Math.round((1-st.y)/2*this.state.size.height)}}sphericalCoordsToViewerCoords(at){return this.sphericalCoordsToVector3(at,Um),this.vector3ToViewerCoords(Um)}isPointVisible(at){let st,ot;if(at instanceof ut.Pq0)st=at,ot=this.vector3ToViewerCoords(at);else{if(!isExtendedPosition(at))return!1;st=this.sphericalCoordsToVector3(at,Um),ot=this.vector3ToViewerCoords(st)}return st.dot(this.viewer.state.direction)>0&&ot.x>=0&&ot.x<=this.viewer.state.size.width&&ot.y>=0&&ot.y<=this.viewer.state.size.height}cleanPosition(at){if("yaw"in at||"pitch"in at){if(!("yaw"in at)||!("pitch"in at))throw new Su("Position is missing 'yaw' or 'pitch'");return{yaw:parseAngle(at.yaw),pitch:parseAngle(at.pitch,!0)}}return this.textureCoordsToSphericalCoords(at)}cleanSphereCorrection(at){return{pan:parseAngle(at?.pan||0),tilt:parseAngle(at?.tilt||0,!0),roll:parseAngle(at?.roll||0,!0,!1)}}cleanPanoramaPose(at){return{pan:ut.cj9.degToRad(at?.poseHeading||0),tilt:ut.cj9.degToRad(at?.posePitch||0),roll:ut.cj9.degToRad(at?.poseRoll||0)}}cleanPanoramaOptions(at,st){return st?.isEquirectangular?(isNil(at.zoom)&&!isNil(st.initialFov)&&(at={...at,zoom:this.fovToZoomLevel(this.hFovToVFov(st.initialFov))}),!isNil(at.position)||isNil(st.initialHeading)||isNil(st.initialPitch)||(at={...at,position:{yaw:parseAngle(st.initialHeading),pitch:parseAngle(st.initialPitch,!0)}}),at):at}},Zm=class _Step{constructor(){this.$=_Step.IDLE}is(){for(var at=arguments.length,st=new Array(at),ot=0;ot<at;ot++)st[ot]=arguments[ot];return st.some((at=>this.$&at))}set(at){this.$=at}add(at){this.$|=at}remove(at){this.$&=~at}};Zm.IDLE=0,Zm.CLICK=1,Zm.MOVING=2;var Hm=Zm,Wm=class extends jm{constructor(at){super(at),this.data={startMouseX:0,startMouseY:0,mouseX:0,mouseY:0,pinchDist:0,moveDelta:{yaw:0,pitch:0,zoom:0},accumulatorFactor:0,ctrlKeyDown:!1,dblclickData:null,dblclickTimeout:null,longtouchTimeout:null,twofingersTimeout:null,ctrlZoomTimeout:null},this.step=new Hm,this.keyHandler=new ad,this.resizeObserver=new ResizeObserver(throttle((()=>this.viewer.autoSize()),50)),this.moveThreshold=wc*tm.pixelRatio}init(){window.addEventListener("keydown",this,{passive:!1}),window.addEventListener("keyup",this),this.viewer.container.addEventListener("mousedown",this),window.addEventListener("mousemove",this,{passive:!1}),window.addEventListener("mouseup",this),this.viewer.container.addEventListener("touchstart",this,{passive:!1}),window.addEventListener("touchmove",this,{passive:!1}),window.addEventListener("touchend",this,{passive:!1}),this.viewer.container.addEventListener("wheel",this,{passive:!1}),document.addEventListener("fullscreenchange",this),this.resizeObserver.observe(this.viewer.container),this.viewer.addEventListener(gd.type,this),this.viewer.addEventListener(Gp.type,this)}destroy(){window.removeEventListener("keydown",this),window.removeEventListener("keyup",this),this.viewer.container.removeEventListener("mousedown",this),window.removeEventListener("mousemove",this),window.removeEventListener("mouseup",this),this.viewer.container.removeEventListener("touchstart",this),window.removeEventListener("touchmove",this),window.removeEventListener("touchend",this),this.viewer.container.removeEventListener("wheel",this),document.removeEventListener("fullscreenchange",this),this.resizeObserver.disconnect(),this.viewer.removeEventListener(gd.type,this),this.viewer.removeEventListener(Gp.type,this),clearTimeout(this.data.dblclickTimeout),clearTimeout(this.data.longtouchTimeout),clearTimeout(this.data.twofingersTimeout),clearTimeout(this.data.ctrlZoomTimeout),super.destroy()}handleEvent(at){switch(at.type){case"keydown":this.__onKeyDown(at);break;case"keyup":this.__onKeyUp();break;case"mousemove":this.__onMouseMove(at);break;case"mouseup":this.__onMouseUp(at);break;case"touchmove":this.__onTouchMove(at);break;case"touchend":this.__onTouchEnd(at);break;case"fullscreenchange":this.__onFullscreenChange();break;case gd.type:this.__applyMoveDelta();break;case Gp.type:this.__clearMoveDelta()}if(!getMatchingTarget(at,"."+pu))switch(at.type){case"mousedown":this.__onMouseDown(at);break;case"touchstart":this.__onTouchStart(at);break;case"wheel":this.__onMouseWheel(at)}}__onKeyDown(at){if(this.config.mousewheelCtrlKey&&(this.data.ctrlKeyDown=at.key===Au.Control,this.data.ctrlKeyDown&&(clearTimeout(this.data.ctrlZoomTimeout),this.viewer.overlay.hide(gu.CTRL_ZOOM))),this.viewer.dispatchEvent(new Nd(at.key,at))&&this.state.keyboardEnabled&&this.config.keyboardActions&&!this.keyHandler.pending)for(const[st,ot]of Object.entries(this.config.keyboardActions))if(keyPressMatch(at,st)){if("function"===typeof ot)ot(this.viewer,at);else{switch("ZOOM_IN"!==ot&&"ZOOM_OUT"!==ot&&this.viewer.stopAll(),ot){case"ROTATE_UP":this.viewer.dynamics.position.roll({pitch:!1});break;case"ROTATE_DOWN":this.viewer.dynamics.position.roll({pitch:!0});break;case"ROTATE_RIGHT":this.viewer.dynamics.position.roll({yaw:!1});break;case"ROTATE_LEFT":this.viewer.dynamics.position.roll({yaw:!0});break;case"ZOOM_IN":this.viewer.dynamics.zoom.roll(!1);break;case"ZOOM_OUT":this.viewer.dynamics.zoom.roll(!0)}this.keyHandler.down(ot)}return void at.preventDefault()}}__onKeyUp(){this.data.ctrlKeyDown=!1,this.state.keyboardEnabled&&this.keyHandler.up((at=>{"ZOOM_IN"===at||"ZOOM_OUT"===at?this.viewer.dynamics.zoom.stop():(this.viewer.dynamics.position.stop(),this.viewer.resetIdleTimer())}))}__onMouseDown(at){this.step.add(Hm.CLICK),this.data.startMouseX=at.clientX,this.data.startMouseY=at.clientY,this.config.mousemove&&at.preventDefault()}__onMouseUp(at){this.step.is(Hm.CLICK,Hm.MOVING)&&this.__stopMove(at.clientX,at.clientY,at,2===at.button)}__onMouseMove(at){this.config.mousemove&&this.step.is(Hm.CLICK,Hm.MOVING)&&(at.preventDefault(),this.__doMove(at.clientX,at.clientY)),this.__handleObjectsEvents(at)}__onTouchStart(at){1===at.touches.length?(this.step.add(Hm.CLICK),this.data.startMouseX=at.touches[0].clientX,this.data.startMouseY=at.touches[0].clientY,this.data.longtouchTimeout||(this.data.longtouchTimeout=setTimeout((()=>{const st=at.touches[0];this.__stopMove(st.clientX,st.clientY,at,!0),this.data.longtouchTimeout=null}),iu))):2===at.touches.length&&(this.step.set(Hm.IDLE),this.__cancelLongTouch(),this.config.mousemove&&(this.__cancelTwoFingersOverlay(),this.__startMoveZoom(at),at.preventDefault()))}__onTouchEnd(at){if(this.__cancelLongTouch(),this.step.is(Hm.CLICK,Hm.MOVING))if(at.preventDefault(),this.__cancelTwoFingersOverlay(),1===at.touches.length)this.__stopMove(this.data.mouseX,this.data.mouseY);else if(0===at.touches.length){const st=at.changedTouches[0];this.__stopMove(st.clientX,st.clientY,at)}}__onTouchMove(at){if(this.__cancelLongTouch(),this.config.mousemove)if(1===at.touches.length){if(this.config.touchmoveTwoFingers)this.step.is(Hm.CLICK)&&!this.data.twofingersTimeout&&(this.data.twofingersTimeout=setTimeout((()=>{this.viewer.overlay.show({id:gu.TWO_FINGERS,image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="currentColor" d="M33.38 33.2a1.96 1.96 0 0 0 1.5-3.23 10.61 10.61 0 0 1 7.18-17.51c.7-.06 1.31-.49 1.61-1.12a13.02 13.02 0 0 1 11.74-7.43c7.14 0 12.96 5.8 12.96 12.9 0 3.07-1.1 6.05-3.1 8.38-.7.82-.61 2.05.21 2.76.83.7 2.07.6 2.78-.22a16.77 16.77 0 0 0 4.04-10.91C72.3 7.54 64.72 0 55.4 0a16.98 16.98 0 0 0-14.79 8.7 14.6 14.6 0 0 0-12.23 14.36c0 3.46 1.25 6.82 3.5 9.45.4.45.94.69 1.5.69m45.74 43.55a22.13 22.13 0 0 1-5.23 12.4c-4 4.55-9.53 6.86-16.42 6.86-12.6 0-20.1-10.8-20.17-10.91a1.82 1.82 0 0 0-.08-.1c-5.3-6.83-14.55-23.82-17.27-28.87-.05-.1 0-.21.02-.23a6.3 6.3 0 0 1 8.24 1.85l9.38 12.59a1.97 1.97 0 0 0 3.54-1.17V25.34a4 4 0 0 1 1.19-2.87 3.32 3.32 0 0 1 2.4-.95c1.88.05 3.4 1.82 3.4 3.94v24.32a1.96 1.96 0 0 0 3.93 0v-33.1a3.5 3.5 0 0 1 7 0v35.39a1.96 1.96 0 0 0 3.93 0v-.44c.05-2.05 1.6-3.7 3.49-3.7 1.93 0 3.5 1.7 3.5 3.82v5.63c0 .24.04.48.13.71l.1.26a1.97 1.97 0 0 0 3.76-.37c.33-1.78 1.77-3.07 3.43-3.07 1.9 0 3.45 1.67 3.5 3.74l-1.77 18.1zM77.39 51c-1.25 0-2.45.32-3.5.9v-.15c0-4.27-3.33-7.74-7.42-7.74-1.26 0-2.45.33-3.5.9V16.69a7.42 7.42 0 0 0-14.85 0v1.86a7 7 0 0 0-3.28-.94 7.21 7.21 0 0 0-5.26 2.07 7.92 7.92 0 0 0-2.38 5.67v37.9l-5.83-7.82a10.2 10.2 0 0 0-13.35-2.92 4.1 4.1 0 0 0-1.53 5.48C20 64.52 28.74 80.45 34.07 87.34c.72 1.04 9.02 12.59 23.4 12.59 7.96 0 14.66-2.84 19.38-8.2a26.06 26.06 0 0 0 6.18-14.6l1.78-18.2v-.2c0-4.26-3.32-7.73-7.42-7.73z"/>\x3c!--Created by AomAm from the Noun Project--\x3e</svg>\n',title:this.config.lang.twoFingers})}),su));else if(this.step.is(Hm.CLICK,Hm.MOVING)){at.preventDefault();const st=at.touches[0];this.__doMove(st.clientX,st.clientY)}}else this.__doMoveZoom(at),this.__cancelTwoFingersOverlay()}__cancelLongTouch(){this.data.longtouchTimeout&&(clearTimeout(this.data.longtouchTimeout),this.data.longtouchTimeout=null)}__cancelTwoFingersOverlay(){this.config.touchmoveTwoFingers&&(this.data.twofingersTimeout&&(clearTimeout(this.data.twofingersTimeout),this.data.twofingersTimeout=null),this.viewer.overlay.hide(gu.TWO_FINGERS))}__onMouseWheel(at){if(!this.config.mousewheel||!at.deltaY)return;if(this.config.mousewheelCtrlKey&&!this.data.ctrlKeyDown)return this.viewer.overlay.show({id:gu.CTRL_ZOOM,image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 17 79 79"><path fill="currentColor" d="M38.1 29.27c-.24 0-.44.2-.44.45v10.7a.45.45 0 00.9 0v-10.7c0-.25-.2-.45-.45-.45zm10.2 26.66a11.54 11.54 0 01-8.48-6.14.45.45 0 10-.8.41 12.45 12.45 0 009.22 6.62.45.45 0 00.07-.9zm24.55-13.08a23.04 23.04 0 00-22.56-23v7.07l-.01.05a2.83 2.83 0 012.39 2.78v14.03l.09-.02h8.84v-9.22a.45.45 0 11.9 0v9.22h10.35v-.9zm0 27.33V44.66H62.5c-.02 2.01-.52 4-1.47 5.76a.45.45 0 01-.61.18.45.45 0 01-.19-.61 11.54 11.54 0 001.36-5.33h-8.83l-.1-.01a2.83 2.83 0 01-2.83 2.84h-.04-.04a2.83 2.83 0 01-2.83-2.83v-14.9a2.82 2.82 0 012.47-2.8v-7.11a23.04 23.04 0 00-22.57 23v.91h14.72V29.88a8.2 8.2 0 015.02-7.57c.22-.1.5.01.59.24.1.23-.01.5-.24.6a7.3 7.3 0 00-4.47 6.73v13.88h3.9a.45.45 0 110 .9h-3.9v.15a7.32 7.32 0 0011.23 6.17.45.45 0 01.49.76 8.22 8.22 0 01-12.62-6.93v-.15H26.82v25.52a23.04 23.04 0 0023.01 23.01 23.04 23.04 0 0023.02-23.01zm1.8-27.33v27.33A24.85 24.85 0 0149.84 95a24.85 24.85 0 01-24.82-24.82V42.85a24.85 24.85 0 0124.82-24.82 24.85 24.85 0 0124.83 24.82zM57.98 29.88v9.36a.45.45 0 11-.9 0v-9.36a7.28 7.28 0 00-3.4-6.17.45.45 0 01.49-.76 8.18 8.18 0 013.8 6.93z"/>\x3c!-- Created by Icon Island from the Noun Project --\x3e</svg>\n',title:this.config.lang.ctrlZoom}),clearTimeout(this.data.ctrlZoomTimeout),void(this.data.ctrlZoomTimeout=setTimeout((()=>this.viewer.overlay.hide(gu.CTRL_ZOOM)),lu));at.preventDefault(),at.stopPropagation();const st=at.deltaY/Math.abs(at.deltaY)*5*this.config.zoomSpeed;0!==st&&this.viewer.dynamics.zoom.step(-st,5)}__onFullscreenChange(){const at=this.viewer.isFullscreenEnabled();"fullscreen"===this.config.keyboard&&(at?this.viewer.startKeyboardControl():this.viewer.stopKeyboardControl()),this.viewer.dispatchEvent(new Md(at))}__resetMove(){this.step.set(Hm.IDLE),this.data.mouseX=0,this.data.mouseY=0,this.data.startMouseX=0,this.data.startMouseY=0}__startMoveZoom(at){this.viewer.stopAll(),this.__resetMove();const st=getTouchData(at);this.step.set(Hm.MOVING),this.data.accumulatorFactor=this.config.moveInertia,({distance:this.data.pinchDist,center:{x:this.data.mouseX,y:this.data.mouseY}}=st)}__stopMove(at,st,ot,ut){void 0===ut&&(ut=!1),this.step.is(Hm.CLICK)&&!this.__moveThresholdReached(at,st)&&this.__doClick(at,st,ot,ut),this.config.moveInertia&&(this.data.accumulatorFactor=Math.pow(this.config.moveInertia,.5)),this.__resetMove(),this.viewer.resetIdleTimer()}__doClick(at,st,ot,ut){void 0===ut&&(ut=!1);const Hl=this.viewer.container.getBoundingClientRect(),rc=at-Hl.left,sc=st-Hl.top,oc=this.viewer.renderer.getIntersections({x:rc,y:sc}),_c=oc.find((at=>at.object.userData[uu]));if(_c){const Hl=this.viewer.dataHelper.vector3ToSphericalCoords(_c.point),wc={rightclick:ut,originalEvent:ot,target:getEventTarget(ot),clientX:at,clientY:st,viewerX:rc,viewerY:sc,yaw:Hl.yaw,pitch:Hl.pitch,objects:oc.map((at=>at.object)).filter((at=>!at.userData[uu]))};try{const at=this.viewer.dataHelper.sphericalCoordsToTextureCoords(wc);Object.assign(wc,at)}catch{}this.data.dblclickTimeout?(Math.abs(this.data.dblclickData.clientX-wc.clientX)<this.moveThreshold&&Math.abs(this.data.dblclickData.clientY-wc.clientY)<this.moveThreshold&&this.viewer.dispatchEvent(new wd(this.data.dblclickData)),clearTimeout(this.data.dblclickTimeout),this.data.dblclickTimeout=null,this.data.dblclickData=null):(this.viewer.dispatchEvent(new vd(wc)),this.data.dblclickData=clone(wc),this.data.dblclickTimeout=setTimeout((()=>{this.data.dblclickTimeout=null,this.data.dblclickData=null}),Sc))}}__handleObjectsEvents(at){if(!isEmpty(this.state.objectsObservers)&&at.composedPath().includes(this.viewer.container)){const st=getPosition(this.viewer.container),ot={x:at.clientX-st.x,y:at.clientY-st.y},ut=this.viewer.renderer.getIntersections(ot),emit=(st,ut,Hl)=>{this.viewer.dispatchEvent(new Hl(at,st,ot,ut))};for(const[at,Hl]of Object.entries(this.state.objectsObservers)){const st=ut.find((st=>st.object.userData[at]));st?(Hl&&st.object!==Hl&&(emit(Hl,at,Kp),this.state.objectsObservers[at]=null),Hl?emit(st.object,at,Jp):(this.state.objectsObservers[at]=st.object,emit(st.object,at,Yp))):Hl&&(emit(Hl,at,Kp),this.state.objectsObservers[at]=null)}}}__doMove(at,st){if(this.step.is(Hm.CLICK)&&this.__moveThresholdReached(at,st))this.viewer.stopAll(),this.__resetMove(),this.step.set(Hm.MOVING),this.data.mouseX=at,this.data.mouseY=st,this.data.accumulatorFactor=this.config.moveInertia;else if(this.step.is(Hm.MOVING)){const ot=(at-this.data.mouseX)*Math.cos(this.state.roll)-(st-this.data.mouseY)*Math.sin(this.state.roll),Hl=(st-this.data.mouseY)*Math.cos(this.state.roll)+(at-this.data.mouseX)*Math.sin(this.state.roll),rc={yaw:this.config.moveSpeed*(ot/this.state.size.width)*ut.cj9.degToRad(this.state.hFov),pitch:this.config.moveSpeed*(Hl/this.state.size.height)*ut.cj9.degToRad(this.state.vFov)};this.data.moveDelta.yaw+=rc.yaw,this.data.moveDelta.pitch+=rc.pitch,this.data.mouseX=at,this.data.mouseY=st}}__moveThresholdReached(at,st){return Math.abs(at-this.data.startMouseX)>=this.moveThreshold||Math.abs(st-this.data.startMouseY)>=this.moveThreshold}__doMoveZoom(at){if(this.step.is(Hm.MOVING)){at.preventDefault();const st=getTouchData(at);this.__doMove(st.center.x,st.center.y),this.data.moveDelta.zoom+=this.config.zoomSpeed*((st.distance-this.data.pinchDist)/tm.pixelRatio),this.data.pinchDist=st.distance}}__applyMoveDelta(){const at=.001;if(Math.abs(this.data.moveDelta.yaw)>0||Math.abs(this.data.moveDelta.pitch)>0){const st=this.viewer.getPosition();this.viewer.rotate({yaw:st.yaw-this.data.moveDelta.yaw*(1-this.config.moveInertia),pitch:st.pitch+this.data.moveDelta.pitch*(1-this.config.moveInertia)}),this.data.moveDelta.yaw*=this.data.accumulatorFactor,this.data.moveDelta.pitch*=this.data.accumulatorFactor,Math.abs(this.data.moveDelta.yaw)<=at&&(this.data.moveDelta.yaw=0),Math.abs(this.data.moveDelta.pitch)<=at&&(this.data.moveDelta.pitch=0)}if(Math.abs(this.data.moveDelta.zoom)>0){const st=this.viewer.getZoomLevel();this.viewer.zoom(st+this.data.moveDelta.zoom*(1-this.config.moveInertia)),this.data.moveDelta.zoom*=this.config.moveInertia,Math.abs(this.data.moveDelta.zoom)<=at&&(this.data.moveDelta.zoom=0)}}__clearMoveDelta(){this.data.moveDelta.yaw=0,this.data.moveDelta.pitch=0,this.data.moveDelta.zoom=0}};ut.ppV.enabled=!1;var qm=new ut.I9Y,Ym=new ut.kn4,Qm=new ut.NRn,Km=class extends jm{constructor(at){super(at),this.frustumNeedsUpdate=!0,this.renderer=new Hl.JeP(this.config.rendererParameters),this.renderer.setPixelRatio(tm.pixelRatio),this.renderer.outputColorSpace=ut.Zr2,this.renderer.toneMapping=ut.kyO,this.renderer.domElement.className="psv-canvas",this.renderer.domElement.style.background=this.config.canvasBackground,this.scene=new ut.Z58,this.camera=new ut.ubm(50,16/9,.1,2*cu),this.camera.matrixAutoUpdate=!1;const st=new ut.eaF(new ut.Gu$(cu).scale(-1,1,1),new ut.V9B({opacity:0,transparent:!0,depthTest:!1,depthWrite:!1}));st.userData={[uu]:!0},this.scene.add(st),this.raycaster=new ut.tBo,this.frustum=new ut.PPD,this.container=document.createElement("div"),this.container.className="psv-canvas-container",this.container.appendChild(this.renderer.domElement),this.viewer.container.appendChild(this.container),this.container.addEventListener("contextmenu",(at=>at.preventDefault())),this.viewer.addEventListener(Up.type,this),this.viewer.addEventListener(Hp.type,this),this.viewer.addEventListener(qd.type,this),this.viewer.addEventListener(Qd.type,this),this.viewer.addEventListener(xd.type,this),this.hide()}get panoramaPose(){return this.mesh.rotation}get sphereCorrection(){return this.meshContainer.rotation}init(){this.show(),this.renderer.setAnimationLoop((at=>this.__renderLoop(at)))}destroy(){this.renderer.setAnimationLoop(null),this.cleanScene(this.scene),this.renderer.dispose(),this.viewer.container.removeChild(this.container),this.viewer.removeEventListener(Up.type,this),this.viewer.removeEventListener(Hp.type,this),this.viewer.removeEventListener(qd.type,this),this.viewer.removeEventListener(Qd.type,this),this.viewer.removeEventListener(xd.type,this),super.destroy()}handleEvent(at){switch(at.type){case Up.type:this.__onSizeUpdated();break;case Hp.type:this.__onZoomUpdated();break;case qd.type:case Qd.type:this.__onPositionUpdated();break;case xd.type:at.containsOptions("fisheye")&&this.__onPositionUpdated(),at.containsOptions("canvasBackground")&&(this.renderer.domElement.style.background=this.config.canvasBackground)}}hide(){this.container.style.opacity="0"}show(){this.container.style.opacity="1"}setCustomRenderer(at){this.customRenderer=at?at(this.renderer):null,this.viewer.needsUpdate()}__onSizeUpdated(){this.renderer.setSize(this.state.size.width,this.state.size.height),this.camera.aspect=this.state.aspect,this.camera.updateProjectionMatrix(),this.viewer.needsUpdate(),this.frustumNeedsUpdate=!0}__onZoomUpdated(){this.camera.fov=this.state.vFov,this.camera.updateProjectionMatrix(),this.viewer.needsUpdate(),this.frustumNeedsUpdate=!0}__onPositionUpdated(){this.camera.position.set(0,0,0),this.camera.lookAt(this.state.direction),this.config.fisheye&&this.camera.position.copy(this.state.direction).multiplyScalar(this.config.fisheye/2).negate(),this.camera.rotateZ(-this.state.roll),this.camera.updateMatrix(),this.camera.updateMatrixWorld(),this.viewer.needsUpdate(),this.frustumNeedsUpdate=!0}__renderLoop(at){const st=this.timestamp?at-this.timestamp:0;this.timestamp=at,this.viewer.dispatchEvent(new gd(at,st)),this.viewer.dynamics.update(st),(this.state.needsUpdate||this.state.continuousUpdateCount>0)&&(this.state.needsUpdate=!1,(this.customRenderer||this.renderer).render(this.scene,this.camera),this.viewer.dispatchEvent(new $d))}setTexture(at){this.meshContainer||(this.meshContainer=new ut.YJl,this.scene.add(this.meshContainer)),this.state.textureData&&this.viewer.adapter.disposeTexture(this.state.textureData),this.mesh&&(this.meshContainer.remove(this.mesh),this.viewer.adapter.disposeMesh(this.mesh)),this.mesh=this.viewer.adapter.createMesh(at.panoData),this.viewer.adapter.setTexture(this.mesh,at,!1),this.meshContainer.add(this.mesh),this.state.textureData=at,this.viewer.needsUpdate()}setPanoramaPose(at,st){void 0===st&&(st=this.mesh);const ot=this.viewer.dataHelper.cleanPanoramaPose(at);st.rotation.set(ot.tilt,ot.pan,ot.roll,"YXZ")}setSphereCorrection(at,st){void 0===st&&(st=this.meshContainer);const ot=this.viewer.dataHelper.cleanSphereCorrection(at);st.rotation.set(ot.tilt,ot.pan,ot.roll,"YXZ")}transition(at,st,ot){const Hl="fade"===ot.effect||ot.rotation,rc=!isNil(st.position),sc=!isNil(st.zoom),oc=new pd(rc?this.viewer.dataHelper.cleanPosition(st.position):void 0,st.zoom);this.viewer.dispatchEvent(oc);const _c=new ut.YJl,wc=this.viewer.adapter.createMesh(at.panoData);if(this.viewer.adapter.setTexture(wc,at,!0),this.viewer.adapter.setTextureOpacity(wc,0),this.setPanoramaPose(at.panoData,wc),this.setSphereCorrection(st.sphereCorrection,_c),rc&&!ot.rotation){const at=this.viewer.getPosition(),st=new ut.Pq0(0,1,0);_c.rotateOnWorldAxis(st,oc.position.yaw-at.yaw);const ot=new ut.Pq0(0,1,0).cross(this.camera.getWorldDirection(new ut.Pq0)).normalize();_c.rotateOnWorldAxis(ot,oc.position.pitch-at.pitch)}_c.add(wc),this.scene.add(_c),this.renderer.setRenderTarget(new ut.nWS),this.renderer.render(this.scene,this.camera),this.renderer.setRenderTarget(null);const{duration:Sc,properties:iu}=this.viewer.dataHelper.getAnimationProperties(ot.speed,ot.rotation?oc.position:null,Hl?oc.zoomLevel:null),su=new id({properties:{...iu,opacity:{start:0,end:1}},duration:Sc,easing:"inOutCubic",onTick:at=>{switch(ot.effect){case"fade":this.viewer.adapter.setTextureOpacity(wc,at.opacity);break;case"black":case"white":at.opacity<.5?this.renderer.toneMappingExposure="black"===ot.effect?ut.cj9.mapLinear(at.opacity,0,.5,1,0):ut.cj9.mapLinear(at.opacity,0,.5,1,5):(this.renderer.toneMappingExposure="black"===ot.effect?ut.cj9.mapLinear(at.opacity,.5,1,0,1):ut.cj9.mapLinear(at.opacity,.5,1,5,1),this.mesh.visible=!1,this.viewer.adapter.setTextureOpacity(wc,1),sc&&!Hl&&this.viewer.dynamics.zoom.setValue(oc.zoomLevel))}rc&&ot.rotation&&this.viewer.dynamics.position.setValue({yaw:at.yaw,pitch:at.pitch}),sc&&Hl&&this.viewer.dynamics.zoom.setValue(at.zoom),this.viewer.needsUpdate()}});return su.then((ut=>{_c.remove(wc),this.scene.remove(_c),ut?(this.viewer.adapter.disposeTexture(this.state.textureData),this.meshContainer.remove(this.mesh),this.viewer.adapter.disposeMesh(this.mesh),this.mesh=wc,this.meshContainer.add(wc),this.state.textureData=at,this.setPanoramaPose(at.panoData),this.setSphereCorrection(st.sphereCorrection),rc&&!ot.rotation&&this.viewer.rotate(st.position)):(this.viewer.adapter.disposeTexture(at),this.viewer.adapter.disposeMesh(wc))})),su}getIntersections(at){qm.x=2*at.x/this.state.size.width-1,qm.y=-2*at.y/this.state.size.height+1,this.raycaster.setFromCamera(qm,this.camera);const st=this.raycaster.intersectObjects(this.scene.children,!0).filter((at=>at.object.visible)).filter((at=>at.object.isMesh&&!!at.object.userData));return this.customRenderer?.getIntersections&&st.push(...this.customRenderer.getIntersections(this.raycaster,qm)),st}isObjectVisible(at){if(!at)return!1;if(this.frustumNeedsUpdate&&(Ym.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),this.frustum.setFromProjectionMatrix(Ym),this.frustumNeedsUpdate=!1),at.isVector3)return this.frustum.containsPoint(at);if(at.isMesh&&at.geometry){const st=at;return st.geometry.boundingBox||st.geometry.computeBoundingBox(),Qm.copy(st.geometry.boundingBox).applyMatrix4(st.matrixWorld),this.frustum.intersectsBox(Qm)}return!!at.isObject3D&&this.frustum.intersectsObject(at)}addObject(at){this.scene.add(at)}removeObject(at){this.scene.remove(at)}cleanScene(at){const disposeMaterial=at=>{at.map?.dispose(),at.uniforms&&Object.values(at.uniforms).forEach((at=>{at.value?.dispose?.()})),at.dispose()};at.traverse((st=>{st.geometry?.dispose(),st.material&&(Array.isArray(st.material)?st.material.forEach((at=>{disposeMaterial(at)})):disposeMaterial(st.material)),st instanceof ut.Z58||st.dispose?.(),st!==at&&this.cleanScene(st)}))}},Xm=class extends ut.$NF{constructor(){super(...arguments),this._abortController=new AbortController}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}load(at,st,ot,ut){const Hl=this._abortController.signal,rc=super.load(at,(at=>{removeEventListeners(),st(at)}),ot,(at=>{if(removeEventListeners(),Hl.aborted){const at=new Error;at.name="AbortError",at.message="The operation was aborted.",ut(at)}else ut(at)}));function onAbortSignal(){rc.src=""}function removeEventListeners(){Hl.removeEventListener("abort",onAbortSignal,!1)}return Hl.addEventListener("abort",onAbortSignal,!1),rc}},Jm=class extends jm{constructor(at){super(at),this.fileLoader=new ut.Y9S,this.fileLoader.setResponseType("blob"),this.imageLoader=new Xm}destroy(){this.abortLoading(),super.destroy()}abortLoading(){console.log("abort2"),this.fileLoader.abort?.(),this.imageLoader.abort()}loadFile(at,st,ot){const ut=Pm.get(at,ot);if(ut){if(ut instanceof Blob)return st?.(100),Promise.resolve(ut);Pm.remove(at,ot)}this.config.requestHeaders&&this.fileLoader.setRequestHeader(this.config.requestHeaders(at)),this.fileLoader.setWithCredentials(this.config.withCredentials(at));let Hl=0;return st?.(Hl),this.fileLoader.loadAsync(at,(at=>{if(at.lengthComputable){const ot=at.loaded/at.total*100;ot>Hl&&(Hl=ot,st?.(Hl))}})).then((ut=>(Hl=100,st?.(Hl),Pm.add(at,ot,ut),ut)))}loadImage(at,st,ot){const ut=Pm.get(at,ot);return ut?(st?.(100),ut instanceof Blob?this.blobToImage(ut):Promise.resolve(ut)):st||this.config.requestHeaders?this.loadFile(at,st,ot).then((at=>this.blobToImage(at))):(this.imageLoader.setWithCredentials(this.config.withCredentials(at)),this.imageLoader.loadAsync(at).then((st=>(Pm.add(at,ot,st),st))))}blobToImage(at){return new Promise(((st,ot)=>{const ut=document.createElement("img");ut.onload=()=>{URL.revokeObjectURL(ut.src),st(ut)},ut.onerror=ot,ut.src=URL.createObjectURL(at)}))}preloadPanorama(at){return this.viewer.adapter.supportsPreload(at)?this.viewer.adapter.loadTexture(at,!1):Promise.reject(new Su("Current adapter does not support preload"))}dispatchProgress(at){this.viewer.loader.setProgress(at),this.viewer.dispatchEvent(new Od(Math.round(at)))}},$m=class extends jm{constructor(at){super(at),this.zoom=new nd((at=>{this.viewer.state.vFov=this.viewer.dataHelper.zoomLevelToFov(at),this.viewer.state.hFov=this.viewer.dataHelper.vFovToHFov(this.viewer.state.vFov),this.viewer.dispatchEvent(new Hp(at))}),{defaultValue:this.viewer.config.defaultZoomLvl,min:0,max:100,wrap:!1}),this.position=new rd((at=>{this.viewer.dataHelper.sphericalCoordsToVector3(at,this.viewer.state.direction),this.viewer.dispatchEvent(new qd(at))}),{yaw:new nd(null,{defaultValue:this.config.defaultYaw,min:0,max:2*Math.PI,wrap:!0}),pitch:new nd(null,{defaultValue:this.config.defaultPitch,min:-Math.PI/2,max:Math.PI/2,wrap:!1})}),this.roll=new nd((at=>{this.viewer.state.roll=at,this.viewer.dispatchEvent(new Qd(at))}),{defaultValue:0,min:-Math.PI,max:Math.PI,wrap:!1}),this.updateSpeeds()}updateSpeeds(){this.zoom.setSpeed(50*this.config.zoomSpeed),this.position.setSpeed(ut.cj9.degToRad(50*this.config.moveSpeed)),this.roll.setSpeed(ut.cj9.degToRad(50*this.config.moveSpeed))}update(at){this.zoom.update(at),this.position.update(at),this.roll.update(at)}},eg=class{constructor(){this.ready=!1,this.needsUpdate=!1,this.continuousUpdateCount=0,this.keyboardEnabled=!1,this.direction=new ut.Pq0(0,0,cu),this.roll=0,this.vFov=60,this.hFov=60,this.aspect=1,this.animation=null,this.transitionAnimation=null,this.loadingPromise=null,this.idleTime=-1,this.objectsObservers={},this.size={width:0,height:0}}},tg=class extends ud{constructor(at){if(super(),this.plugins={},this.children=[],this.parent=getElement(at.container),!this.parent)throw new Su('"container" element not found.');this.parent[uu]=this,this.container=document.createElement("div"),this.container.classList.add("psv-container"),this.parent.appendChild(this.container),checkClosedShadowDom(this.parent),checkStylesheet(this.container,"core"),this.state=new eg,this.config=Cm(at),this.__setSize(this.config.size),this.overlay=new Rm(this);try{tm.load()}catch(st){return console.error(st),void this.showError(this.config.lang.webglError)}Pm.init(),this.adapter=new this.config.adapter[0](this,this.config.adapter[1]),this.renderer=new Km(this),this.textureLoader=new Jm(this),this.eventsHandler=new Wm(this),this.dataHelper=new Gm(this),this.dynamics=new $m(this),this.adapter.init?.(),this.loader=new zm(this),this.navbar=new Lm(this),this.panel=new Bm(this),this.notification=new Nm(this),this.autoSize(),this.setCursor(null),resolveBoolean(tm.isTouchEnabled,(at=>{toggleClass(this.container,"psv--is-touch",at)})),this.config.plugins.forEach((at=>{let[st,ot]=at;this.plugins[st.id]=new st(this,ot)}));for(const ot of Object.values(this.plugins))ot.init?.();this.config.navbar&&this.navbar.setButtons(this.config.navbar),this.state.loadingPromise||(this.config.panorama?this.setPanorama(this.config.panorama,{sphereCorrection:this.config.sphereCorrection,panoData:this.config.panoData}):this.loader.show())}destroy(){this.stopAll(),this.stopKeyboardControl(),this.exitFullscreen();for(const[at,st]of Object.entries(this.plugins))st.destroy(),delete this.plugins[at];this.children.slice().forEach((at=>at.destroy())),this.children.length=0,this.eventsHandler?.destroy(),this.renderer?.destroy(),this.textureLoader?.destroy(),this.dataHelper?.destroy(),this.adapter?.destroy(),this.dynamics?.destroy(),this.parent.removeChild(this.container),delete this.parent[uu]}init(){this.eventsHandler.init(),this.renderer.init(),this.config.navbar&&this.navbar.show(),"always"===this.config.keyboard&&this.startKeyboardControl(),this.resetIdleTimer(),this.state.ready=!0,this.dispatchEvent(new Xd)}resetIdleTimer(){this.state.idleTime=performance.now()}disableIdleTimer(){this.state.idleTime=-1}getPlugin(at){if("string"===typeof at)return this.plugins[at];{const st=pluginInterop(at);return st?this.plugins[st.id]:null}}getPosition(){return this.dataHelper.cleanPosition(this.dynamics.position.current)}getZoomLevel(){return this.dynamics.zoom.current}getSize(){return{...this.state.size}}isFullscreenEnabled(){return isFullscreenEnabled(this.parent,tm.isIphone)}needsUpdate(){this.state.needsUpdate=!0}needsContinuousUpdate(at){at?this.state.continuousUpdateCount++:this.state.continuousUpdateCount>0&&this.state.continuousUpdateCount--}autoSize(){this.container.clientWidth===this.state.size.width&&this.container.clientHeight===this.state.size.height||(this.state.size.width=Math.round(this.container.clientWidth),this.state.size.height=Math.round(this.container.clientHeight),this.state.aspect=this.state.size.width/this.state.size.height,this.state.hFov=this.dataHelper.vFovToHFov(this.state.vFov),this.dispatchEvent(new Up(this.getSize())),this.navbar.autoSize())}setPanorama(at,st){void 0===st&&(st={}),this.textureLoader.abortLoading(),this.state.transitionAnimation?.cancel();const ot=this.dataHelper.getTransitionOptions(st);void 0===st.showLoader&&(st.showLoader=!0),void 0===st.caption&&(st.caption=this.config.caption),void 0===st.description&&(st.description=this.config.description),st.panoData||"function"!==typeof this.config.panoData||(st.panoData=this.config.panoData),this.hideError(),this.resetIdleTimer(),this.config.panorama=at,this.config.caption=st.caption,this.config.description=st.description,this.config.sphereCorrection=st.sphereCorrection,"function"===typeof this.config.panoData&&"function"!==typeof st.panoData||(this.config.panoData=st.panoData);const done=st=>{if(isAbortError(st))return!1;if(this.loader.hide(),this.state.loadingPromise=null,st)throw this.navbar.setCaption(null),this.showError(this.config.lang.loadError),console.error(st),this.dispatchEvent(new Gd(at,st)),st;return this.navbar.setCaption(this.config.caption),!0};this.navbar.setCaption(`<em>${this.config.lang.loading}</em>`),!st.showLoader&&this.state.ready||this.loader.show(),this.dispatchEvent(new Fd(at));const ut=this.adapter.loadTexture(this.config.panorama,!0,st.panoData).then((at=>{if(at.panorama!==this.config.panorama)throw this.adapter.disposeTexture(at),getAbortError();const ot=this.dataHelper.cleanPanoramaOptions(st,at.panoData);return isNil(ot.zoom)&&isNil(ot.position)||this.stopAll(),{textureData:at,cleanOptions:ot}}));return ot&&this.state.ready&&this.adapter.supportsTransition(this.config.panorama)?this.state.loadingPromise=ut.then((at=>{let{textureData:st,cleanOptions:ut}=at;return this.loader.hide(),this.dispatchEvent(new Ud(st)),this.state.transitionAnimation=this.renderer.transition(st,ut,ot),this.state.transitionAnimation})).then((at=>{if(this.state.transitionAnimation=null,this.dispatchEvent(new Hd(at)),!at)throw getAbortError()})).then((()=>done()),(at=>done(at))):this.state.loadingPromise=ut.then((at=>{let{textureData:ot,cleanOptions:ut}=at;this.renderer.show(),this.renderer.setTexture(ot),this.renderer.setPanoramaPose(ot.panoData),this.renderer.setSphereCorrection(st.sphereCorrection),this.state.ready||this.init(),this.dispatchEvent(new Ud(ot)),isNil(ut.zoom)||this.zoom(ut.zoom),isNil(ut.position)||this.rotate(ut.position)})).then((()=>done()),(at=>done(at))),this.state.loadingPromise}setOptions(at){const st={...this.config,...at};for(let[ot,ut]of Object.entries(at))if(ot in Mm)if(ot in Sm)logWarn(Sm[ot]);else switch(ot in Tm&&(ut=Tm[ot](ut,{rawConfig:st,defValue:Mm[ot]})),this.config[ot]=ut,ot){case"mousemove":this.state.cursorOverride||this.setCursor(null);break;case"caption":this.navbar.setCaption(this.config.caption);break;case"size":this.resize(this.config.size);break;case"sphereCorrection":this.renderer.setSphereCorrection(this.config.sphereCorrection);break;case"navbar":case"lang":this.navbar.setButtons(this.config.navbar);break;case"moveSpeed":case"zoomSpeed":this.dynamics.updateSpeeds();break;case"minFov":case"maxFov":this.dynamics.zoom.setValue(this.dataHelper.fovToZoomLevel(this.state.vFov)),this.dispatchEvent(new Hp(this.getZoomLevel()));break;case"keyboard":"always"===this.config.keyboard?this.startKeyboardControl():this.stopKeyboardControl()}else logWarn(`Unknown option ${ot}`);this.needsUpdate(),this.dispatchEvent(new xd(Object.keys(at)))}setOption(at,st){this.setOptions({[at]:st})}showError(at){this.overlay.show({id:gu.ERROR,image:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="15 15 70 70"><path fill="currentColor" d="M50,16.2c-18.6,0-33.8,15.1-33.8,33.8S31.4,83.7,50,83.7S83.8,68.6,83.8,50S68.6,16.2,50,16.2z M50,80.2c-16.7,0-30.2-13.6-30.2-30.2S33.3,19.7,50,19.7S80.3,33.3,80.3,50S66.7,80.2,50,80.2z"/><rect fill="currentColor" x="48" y="31.7" width="4" height="28"/><rect fill="currentColor" x="48" y="63.2" width="4" height="5"/>\x3c!--Created by Shastry from the Noun Project--\x3e</svg>\n',title:at,dismissible:!1})}hideError(){this.overlay.hide(gu.ERROR)}rotate(at){const st=new Ad(this.dataHelper.cleanPosition(at));this.dispatchEvent(st),st.defaultPrevented||this.dynamics.position.setValue(st.position)}zoom(at){this.dynamics.zoom.setValue(at)}zoomIn(at){void 0===at&&(at=1),this.dynamics.zoom.step(at)}zoomOut(at){void 0===at&&(at=1),this.dynamics.zoom.step(-at)}animate(at){const st=isExtendedPosition(at),ot=!isNil(at.zoom),ut=new pd(st?this.dataHelper.cleanPosition(at):void 0,at.zoom);if(this.dispatchEvent(ut),ut.defaultPrevented)return;this.stopAll();const{duration:Hl,properties:rc}=this.dataHelper.getAnimationProperties(at.speed,ut.position,ut.zoomLevel);return Hl?(this.state.animation=new id({properties:rc,duration:Hl,easing:at.easing||"inOutSine",onTick:at=>{st&&this.dynamics.position.setValue({yaw:at.yaw,pitch:at.pitch}),ot&&this.dynamics.zoom.setValue(at.zoom)}}),this.state.animation.then((()=>{this.state.animation=null,this.resetIdleTimer()})),this.state.animation):(st&&this.rotate(ut.position),ot&&this.zoom(ut.zoomLevel),new id(null))}stopAnimation(){return this.state.animation?(this.state.animation.cancel(),this.state.animation):Promise.resolve()}resize(at){this.__setSize(at),this.autoSize()}__setSize(at){["width","height"].forEach((st=>{at?.[st]&&(/^[0-9.]+$/.test(at[st])&&(at[st]+="px"),this.parent.style[st]=at[st])}))}enterFullscreen(){this.isFullscreenEnabled()||requestFullscreen(this.parent,tm.isIphone)}exitFullscreen(){this.isFullscreenEnabled()&&exitFullscreen(tm.isIphone)}toggleFullscreen(){this.isFullscreenEnabled()?this.exitFullscreen():this.enterFullscreen()}startKeyboardControl(){this.state.keyboardEnabled=!0}stopKeyboardControl(){this.state.keyboardEnabled=!1}createTooltip(at){return new Fm(this,at)}setCursor(at){this.state.cursorOverride=at,this.container.style.cursor=at||(this.config.mousemove?"move":"default")}observeObjects(at){this.state.objectsObservers[at]||(this.state.objectsObservers[at]=null)}unobserveObjects(at){delete this.state.objectsObservers[at]}stopAll(){return this.dispatchEvent(new Gp),this.disableIdleTimer(),this.stopAnimation()}}},3890:(at,st,ot)=>{"use strict";ot.d(st,{D:()=>iu});var ut=ot(1545),Hl=ot(9435),rc=class{constructor(at,st,ot){this.id=at,this.priority=st,this.fn=ot,this.status=1}start(){return this.status=2,this.fn(this).then((()=>{this.status=4}),(()=>{this.status=5}))}cancel(){this.status=3}isCancelled(){return 3===this.status}},sc=class{constructor(at){void 0===at&&(at=8),this.concurency=at,this.runningTasks={},this.tasks={}}enqueue(at){this.tasks[at.id]=at}clear(){Object.values(this.tasks).forEach((at=>at.cancel())),this.tasks={},this.runningTasks={}}setPriority(at,st){const ot=this.tasks[at];ot&&(ot.priority=st,0===ot.status&&(ot.status=1))}disableAllTasks(){Object.values(this.tasks).forEach((at=>{at.status=0}))}start(){if(Object.keys(this.runningTasks).length>=this.concurency)return;const at=Object.values(this.tasks).filter((at=>1===at.status)).sort(((at,st)=>st.priority-at.priority)).pop();at&&(this.runningTasks[at.id]=!0,at.start().then((()=>{at.isCancelled()||(delete this.tasks[at.id],delete this.runningTasks[at.id],this.start())})),this.start())}};var oc=["dodgerblue","limegreen","indianred"];function isMultiTiles(at){return!!at.levels}function computeTileConfig(at,st,ot){return{...at,level:st,colSize:at.width/at.cols,rowSize:at.width/2/at.rows,facesByCol:ot.SPHERE_SEGMENTS/at.cols,facesByRow:ot.SPHERE_HORIZONTAL_SEGMENTS/at.rows}}function getTileConfig(at,st,ot,ut,Hl){let rc,sc;return isMultiTiles(at)?(ut?(sc=at.levels.findIndex((at=>{const Hl=at.width/360*st,rc=at.width/2/180*ot;return Hl>=ut.width&&rc>=ut.height})),-1===sc&&(sc=at.levels.length-1)):sc=0,rc=at.levels[sc]):(sc=0,rc={...at}),computeTileConfig(rc,sc,Hl)}function getTileConfigByIndex(at,st,ot){return isMultiTiles(at)&&at.levels[st]?computeTileConfig(at.levels[st],st,ot):null}function checkTile(at,st){if(!at.width||!at.cols||!at.rows)throw new ut.e6("Invalid panorama configuration, are you using the right adapter?");if(at.cols>st.SPHERE_SEGMENTS)throw new ut.e6(`Panorama cols must not be greater than ${st.SPHERE_SEGMENTS}.`);if(at.rows>st.SPHERE_HORIZONTAL_SEGMENTS)throw new ut.e6(`Panorama rows must not be greater than ${st.SPHERE_HORIZONTAL_SEGMENTS}.`);if(!Hl.cj9.isPowerOfTwo(at.cols)||!Hl.cj9.isPowerOfTwo(at.rows))throw new ut.e6("Panorama cols and rows must be powers of 2.")}function getCacheKey(at,st){for(let ot=0;ot<st.cols;ot++){const ut=at.tileUrl(ot,st.rows/2,st.level);if(ut)return ut}return at.tileUrl.toString()}function tileId(at){return`${at.col}x${at.row}/${at.config.level}`}function meshes(at){return at.children}var _c=ut.Wp.getConfigParser({resolution:64,showErrorTile:!0,baseBlur:!0,antialias:!0,debug:!1,useXmpData:!1}),wc=new Hl.Pq0,Sc=class _EquirectangularTilesAdapter extends ut.Qw{constructor(at,st){super(at),this.state={tileConfig:null,tiles:{},faces:{},geom:null,materials:[],errorMaterial:null,inTransition:!1},this.queue=new sc,this.config=_c(st),this.adapter=new ut.GR(this.viewer,{resolution:this.config.resolution,blur:this.config.baseBlur}),this.SPHERE_SEGMENTS=this.config.resolution,this.SPHERE_HORIZONTAL_SEGMENTS=this.SPHERE_SEGMENTS/2,this.NB_VERTICES=2*this.SPHERE_SEGMENTS*3+(this.SPHERE_HORIZONTAL_SEGMENTS-2)*this.SPHERE_SEGMENTS*6,this.NB_GROUPS=this.SPHERE_SEGMENTS*this.SPHERE_HORIZONTAL_SEGMENTS,this.viewer.config.requestHeaders&&ut.Wp.logWarn('EquirectangularTilesAdapter fallbacks to file loader because "requestHeaders" where provided. Consider removing "requestHeaders" if you experience performances issues.')}static withConfig(at){return[_EquirectangularTilesAdapter,at]}init(){super.init(),this.viewer.addEventListener(ut.AZ.TransitionDoneEvent.type,this),this.viewer.addEventListener(ut.AZ.PositionUpdatedEvent.type,this),this.viewer.addEventListener(ut.AZ.ZoomUpdatedEvent.type,this)}destroy(){this.viewer.removeEventListener(ut.AZ.TransitionDoneEvent.type,this),this.viewer.removeEventListener(ut.AZ.PositionUpdatedEvent.type,this),this.viewer.removeEventListener(ut.AZ.ZoomUpdatedEvent.type,this),this.__cleanup(),this.state.errorMaterial?.map?.dispose(),this.state.errorMaterial?.dispose(),this.adapter.destroy(),delete this.adapter,delete this.state.geom,delete this.state.errorMaterial,super.destroy()}handleEvent(at){switch(at.type){case ut.AZ.PositionUpdatedEvent.type:case ut.AZ.ZoomUpdatedEvent.type:this.__refresh();break;case ut.AZ.TransitionDoneEvent.type:this.state.inTransition=!1,at.completed&&this.__switchMesh(this.viewer.renderer.mesh)}}supportsTransition(at){return!!at.baseUrl}supportsPreload(at){return!!at.baseUrl}textureCoordsToSphericalCoords(at,st){return this.adapter.textureCoordsToSphericalCoords(at,st)}sphericalCoordsToTextureCoords(at,st){return this.adapter.sphericalCoordsToTextureCoords(at,st)}async loadTexture(at,st){void 0===st&&(st=!0),function(at,st){if("object"!==typeof at||!at.tileUrl)throw new ut.e6("Invalid panorama configuration, are you using the right adapter?");isMultiTiles(at)?(at.levels.forEach((at=>{checkTile(at,st),"zoomRange"in at&&ut.Wp.logWarn('EquirectangularTilesAdapter: "zoomRange" property is deprecated and must be removed')})),at.levels.sort(((at,st)=>at.width-st.width))):checkTile(at,st)}(at,this);const ot=getTileConfig(at,0,0,null,this),Hl={isEquirectangular:!0,fullWidth:ot.width,fullHeight:ot.width/2,croppedWidth:ot.width,croppedHeight:ot.width/2,croppedX:0,croppedY:0,poseHeading:0,posePitch:0,poseRoll:0};if(at.baseUrl){const ot=await this.adapter.loadTexture(at.baseUrl,st,at.basePanoData,!0);return{panorama:at,panoData:{...Hl,baseData:ot.panoData},cacheKey:ot.cacheKey,texture:ot.texture}}return{panorama:at,panoData:{...Hl,baseData:null},cacheKey:getCacheKey(at,ot),texture:null}}createMesh(at){const st=this.adapter.createMesh(at.baseData??at),ot=new Hl.Gu$(ut.aH.SPHERE_RADIUS,this.SPHERE_SEGMENTS,this.SPHERE_HORIZONTAL_SEGMENTS,-Math.PI/2).scale(-1,1,1).toNonIndexed();ot.clearGroups();let rc=0,sc=0;for(;rc<3*this.SPHERE_SEGMENTS;rc+=3)ot.addGroup(rc,3,sc++);for(;rc<this.NB_VERTICES-3*this.SPHERE_SEGMENTS;rc+=6)ot.addGroup(rc,6,sc++);for(;rc<this.NB_VERTICES;rc+=3)ot.addGroup(rc,3,sc++);const oc=[],_c=new Hl.V9B({opacity:0,transparent:!0,depthTest:!1,depthWrite:!1});for(let ut=0;ut<this.NB_GROUPS;ut++)oc.push(_c);const wc=new Hl.eaF(ot,oc);wc.renderOrder=1;const Sc=new Hl.YJl;return Sc.add(st),Sc.add(wc),Sc}setTexture(at,st,ot){const[ut]=meshes(at);st.texture?this.adapter.setTexture(ut,{panorama:st.panorama.baseUrl,texture:st.texture,panoData:st.panoData.baseData}):ut.visible=!1,ot?this.state.inTransition=!0:this.__switchMesh(at)}setTextureOpacity(at,st){const[ot]=meshes(at);this.adapter.setTextureOpacity(ot,st)}disposeTexture(at){let{texture:st}=at;st?.dispose()}disposeMesh(at){const[st,ot]=meshes(at);st.geometry.dispose(),st.material.dispose(),ot.geometry.dispose(),ot.material.forEach((at=>{at.map?.dispose(),at.dispose()}))}__refresh(){if(!this.state.geom||this.state.inTransition)return;const at=this.viewer.config.panorama,st=getTileConfig(at,this.viewer.state.hFov,this.viewer.state.vFov,this.viewer.state.size,this),ot=this.state.geom.getAttribute("position"),ut={};for(let Hl=0;Hl<this.NB_VERTICES;Hl+=1)if(wc.fromBufferAttribute(ot,Hl),wc.applyEuler(this.viewer.renderer.sphereCorrection),this.viewer.renderer.isObjectVisible(wc)){let ot;ot=Hl<3*this.SPHERE_SEGMENTS?Math.floor(Hl/3):Hl<this.NB_VERTICES-3*this.SPHERE_SEGMENTS?Math.floor((Hl/3-this.SPHERE_SEGMENTS)/2)+this.SPHERE_SEGMENTS:Math.floor((Hl-this.NB_VERTICES-3*this.SPHERE_SEGMENTS)/3)+this.SPHERE_HORIZONTAL_SEGMENTS*(this.SPHERE_SEGMENTS-1);const rc=Math.floor(ot/this.SPHERE_SEGMENTS),sc=ot-rc*this.SPHERE_SEGMENTS;let oc=st;for(;oc;){const st=Math.floor(rc/oc.facesByRow),ot=Math.floor(sc/oc.facesByCol);let Hl=wc.angleTo(this.viewer.state.direction);0!==st&&st!==oc.rows-1||(Hl*=2);const _c={row:st,col:ot,angle:Hl,config:oc,url:null},Sc=tileId(_c);if(ut[Sc]){ut[Sc].angle=Math.min(ut[Sc].angle,Hl);break}if(_c.url=at.tileUrl(ot,st,oc.level),_c.url){ut[Sc]=_c;break}oc=getTileConfigByIndex(at,oc.level-1,this)}}this.state.tileConfig=st,this.__loadTiles(Object.values(ut))}__loadTiles(at){this.queue.disableAllTasks(),at.forEach((at=>{const st=tileId(at);this.state.tiles[st]?this.queue.setPriority(st,at.angle):(this.state.tiles[st]=!0,this.queue.enqueue(new rc(st,at.angle,(st=>this.__loadTile(at,st)))))})),this.queue.start()}__loadTile(at,st){return this.viewer.textureLoader.loadImage(at.url,null,this.viewer.state.textureData.cacheKey).then((ot=>{if(!st.isCancelled()){this.config.debug&&(ot=function(at,st,ot){const ut=document.createElement("canvas");ut.width=at.width,ut.height=at.height;const Hl=ut.getContext("2d");Hl.fillStyle=oc[st%oc.length],Hl.fillRect(0,0,ut.width,ut.height),Hl.globalCompositeOperation="multiply",Hl.drawImage(at,0,0);const rc=at.width/7;return Hl.globalCompositeOperation="source-over",Hl.fillStyle="white",Hl.font=`${rc}px monospace`,Hl.textAlign="center",ot.split("\n").forEach(((st,ot)=>{Hl.fillText(st,at.width/2,at.height/2+rc*(.3+ot))})),ut}(ot,at.config.level,tileId(at)));const st=this.config.antialias&&at.config.level>0,rc=new Hl.V9B({map:ut.Wp.createTexture(ot,st)});this.__swapMaterial(at,rc,!1),this.viewer.needsUpdate()}})).catch((ot=>{ut.Wp.isAbortError(ot)||st.isCancelled()||!this.config.showErrorTile||(this.state.errorMaterial||(this.state.errorMaterial=function(){const at=new OffscreenCanvas(512,512),st=at.getContext("2d");return st.fillStyle="#333",st.fillRect(0,0,at.width,at.height),st.font=at.width/5+"px serif",st.fillStyle="#a22",st.textAlign="center",st.textBaseline="middle",st.fillText("\u26a0",at.width/2,at.height/2),new Hl.V9B({map:ut.Wp.createTexture(at)})}()),this.__swapMaterial(at,this.state.errorMaterial,!0),this.viewer.needsUpdate())}))}__swapMaterial(at,st,ot){const ut=this.state.geom.getAttribute("uv");for(let Hl=0;Hl<at.config.facesByCol;Hl++)for(let rc=0;rc<at.config.facesByRow;rc++){const sc=at.col*at.config.facesByCol+Hl,oc=at.row*at.config.facesByRow+rc,_c=0===oc,wc=oc===this.SPHERE_HORIZONTAL_SEGMENTS-1;let Sc;if(Sc=_c?3*sc:wc?this.NB_VERTICES-3*this.SPHERE_SEGMENTS+3*sc:3*this.SPHERE_SEGMENTS+(oc-1)*this.SPHERE_SEGMENTS*6+6*sc,ot&&this.state.faces[Sc]>-1)continue;if(this.state.faces[Sc]>at.config.level)continue;this.state.faces[Sc]=ot?-1:at.config.level;const iu=this.state.geom.groups.find((at=>at.start===Sc)).materialIndex;this.state.materials[iu]=st;const su=1-rc/at.config.facesByRow,lu=1-(rc+1)/at.config.facesByRow,cu=Hl/at.config.facesByCol,uu=(Hl+1)/at.config.facesByCol;_c?(ut.setXY(Sc,(cu+uu)/2,su),ut.setXY(Sc+1,cu,lu),ut.setXY(Sc+2,uu,lu)):wc?(ut.setXY(Sc,uu,su),ut.setXY(Sc+1,cu,su),ut.setXY(Sc+2,(cu+uu)/2,lu)):(ut.setXY(Sc,uu,su),ut.setXY(Sc+1,cu,su),ut.setXY(Sc+2,uu,lu),ut.setXY(Sc+3,cu,su),ut.setXY(Sc+4,cu,lu),ut.setXY(Sc+5,uu,lu))}ut.needsUpdate=!0}__switchMesh(at){const[,st]=meshes(at);if(this.__cleanup(),this.state.materials=st.material,this.state.geom=st.geometry,this.config.debug){const at=function(at){const st=new Hl.XJ7(at),ot=new Hl.DXC(st);return ot.material.depthTest=!1,ot.material.depthWrite=!1,ot.material.opacity=.25,ot.material.transparent=!0,ot}(this.state.geom);this.viewer.renderer.addObject(at),this.viewer.renderer.setSphereCorrection(this.viewer.config.sphereCorrection,at)}setTimeout((()=>this.__refresh()))}__cleanup(){this.queue.clear(),this.state.tiles={},this.state.faces={},this.state.materials=[],this.state.inTransition=!1}};Sc.id="equirectangular-tiles",Sc.VERSION="5.14.0",Sc.supportsDownload=!1;var iu=Sc},4991:(at,st,ot)=>{"use strict";ot.d(st,{b:()=>Rd});var ut=ot(1545),Hl=ot(9435),rc=Object.defineProperty;((at,st)=>{for(var ot in st)rc(at,ot,{get:st[ot],enumerable:!0})})({},{EnterMarkerEvent:()=>cu,GotoMarkerDoneEvent:()=>Sc,HideMarkersEvent:()=>xu,LeaveMarkerEvent:()=>su,MarkerVisibilityEvent:()=>_c,MarkersPluginEvent:()=>sc,RenderMarkersListEvent:()=>ed,SelectMarkerEvent:()=>pu,SelectMarkerListEvent:()=>gu,SetMarkersEvent:()=>Du,ShowMarkersEvent:()=>$u,UnselectMarkerEvent:()=>yu});var sc=class extends ut.rx{},oc=class _MarkerVisibilityEvent extends sc{constructor(at,st){super(_MarkerVisibilityEvent.type),this.marker=at,this.visible=st}};oc.type="marker-visibility";var _c=oc,wc=class _GotoMarkerDoneEvent extends sc{constructor(at){super(_GotoMarkerDoneEvent.type),this.marker=at}};wc.type="goto-marker-done";var Sc=wc,iu=class _LeaveMarkerEvent extends sc{constructor(at){super(_LeaveMarkerEvent.type),this.marker=at}};iu.type="leave-marker";var su=iu,lu=class _EnterMarkerEvent extends sc{constructor(at){super(_EnterMarkerEvent.type),this.marker=at}};lu.type="enter-marker";var cu=lu,uu=class _SelectMarkerEvent extends sc{constructor(at,st,ot){super(_SelectMarkerEvent.type),this.marker=at,this.doubleClick=st,this.rightClick=ot}};uu.type="select-marker";var pu=uu,mu=class _SelectMarkerListEvent extends sc{constructor(at){super(_SelectMarkerListEvent.type),this.marker=at}};mu.type="select-marker-list";var gu=mu,Au=class _UnselectMarkerEvent extends sc{constructor(at){super(_UnselectMarkerEvent.type),this.marker=at}};Au.type="unselect-marker";var yu=Au,_u=class _HideMarkersEvent extends sc{constructor(){super(_HideMarkersEvent.type)}};_u.type="hide-markers";var xu=_u,Su=class _SetMarkersEvent extends sc{constructor(at){super(_SetMarkersEvent.type),this.markers=at}};Su.type="set-markers";var Du=Su,Lu=class _ShowMarkersEvent extends sc{constructor(){super(_ShowMarkersEvent.type)}};Lu.type="show-markers";var $u=Lu,hh=class _RenderMarkersListEvent extends sc{constructor(at){super(_RenderMarkersListEvent.type),this.markers=at}};hh.type="render-markers-list";var ed=hh,td=class extends ut.Np{constructor(at){super(at,{className:"psv-markers-button",icon:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="10 9 81 81"><path fill="currentColor" d="M50.5 90S22.9 51.9 22.9 36.6 35.2 9 50.5 9s27.6 12.4 27.6 27.6S50.5 90 50.5 90zm0-66.3c-6.1 0-11 4.9-11 11s4.9 11 11 11 11-4.9 11-11-4.9-11-11-11z"/>\x3c!--Created by Rohith M S from the Noun Project--\x3e</svg>\n',hoverScale:!0,collapsable:!0,tabbable:!0}),this.plugin=this.viewer.getPlugin("markers"),this.plugin&&(this.plugin.addEventListener($u.type,this),this.plugin.addEventListener(xu.type,this),this.toggleActive(!0))}destroy(){this.plugin&&(this.plugin.removeEventListener($u.type,this),this.plugin.removeEventListener(xu.type,this)),super.destroy()}isSupported(){return!!this.plugin}handleEvent(at){at instanceof $u?this.toggleActive(!0):at instanceof xu&&this.toggleActive(!1)}onClick(){this.plugin.toggleAllMarkers()}};td.id="markers";var id='<svg xmlns="http://www.w3.org/2000/svg" viewBox="9 9 81 81"><path fill="currentColor" d="M37.5 90S9.9 51.9 9.9 36.6 22.2 9 37.5 9s27.6 12.4 27.6 27.6S37.5 90 37.5 90zm0-66.3c-6.1 0-11 4.9-11 11s4.9 11 11 11 11-4.9 11-11-4.9-11-11-11zM86.7 55H70c-1.8 0-3.3-1.5-3.3-3.3s1.5-3.3 3.3-3.3h16.7c1.8 0 3.3 1.5 3.3 3.3S88.5 55 86.7 55zm0-25h-15a3.3 3.3 0 0 1-3.3-3.3c0-1.8 1.5-3.3 3.3-3.3h15c1.8 0 3.3 1.5 3.3 3.3 0 1.8-1.5 3.3-3.3 3.3zM56.5 73h30c1.8 0 3.3 1.5 3.3 3.3 0 1.8-1.5 3.3-3.3 3.3h-30a3.3 3.3 0 0 1-3.3-3.3 3.2 3.2 0 0 1 3.3-3.3z"/>\x3c!--Created by Rohith M S from the Noun Project--\x3e</svg>\n',nd="http://www.w3.org/2000/svg",rd="psvMarker",ad=ut.Wp.dasherize(rd),sd="marker",od="markersList",ld={amount:2,duration:100,easing:"linear"},MARKERS_LIST_TEMPLATE=(at,st)=>`\n<div class="psv-panel-menu psv-panel-menu--stripped">\n    <h1 class="psv-panel-menu-title">${id} ${st}</h1>\n    <ul class="psv-panel-menu-list">\n    ${at.map((at=>`\n        <li data-${ad}="${at.id}" class="psv-panel-menu-item" tabindex="0">\n          ${"image"===at.type?`<span class="psv-panel-menu-item-icon"><img src="${at.definition}"/></span>`:""}\n          <span class="psv-panel-menu-item-label">${at.getListContent()}</span>\n        </li>\n    `)).join("")}\n    </ul>\n</div>\n`,cd=class extends ut.Np{constructor(at){super(at,{className:" psv-markers-list-button",icon:id,hoverScale:!0,collapsable:!0,tabbable:!0}),this.plugin=this.viewer.getPlugin("markers"),this.plugin&&(this.viewer.addEventListener(ut.AZ.ShowPanelEvent.type,this),this.viewer.addEventListener(ut.AZ.HidePanelEvent.type,this))}destroy(){this.viewer.removeEventListener(ut.AZ.ShowPanelEvent.type,this),this.viewer.removeEventListener(ut.AZ.HidePanelEvent.type,this),super.destroy()}isSupported(){return!!this.plugin}handleEvent(at){at instanceof ut.AZ.ShowPanelEvent?this.toggleActive(at.panelId===od):at instanceof ut.AZ.HidePanelEvent&&this.toggleActive(!1)}onClick(){this.plugin.toggleMarkersList()}};cd.id="markersList";var ud=new Hl.Pq0,hd=new Hl.PTz,dd=new Hl.Pq0,pd=class extends Hl.B69{constructor(at){void 0===at&&(at=document.createElement("div")),super(),this.isCSS3DObject=!0,this.element=at,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",(function(){this.traverse((function(at){at.element instanceof at.element.ownerDocument.defaultView.Element&&null!==at.element.parentNode&&at.element.remove()}))}))}copy(at,st){return super.copy(at,st),this.element=at.element.cloneNode(!0),this}},md=new Hl.kn4,gd=new Hl.kn4,fd=class{constructor(at){void 0===at&&(at={});const st=this;let ot,ut,Hl,rc;const sc={camera:{style:""},objects:new WeakMap},oc=void 0!==at.element?at.element:document.createElement("div");oc.style.overflow="hidden",this.domElement=oc;const _c=document.createElement("div");_c.style.transformOrigin="0 0",_c.style.pointerEvents="none",oc.appendChild(_c);const wc=document.createElement("div");function epsilon(at){return Math.abs(at)<1e-10?0:at}function getCameraCSSMatrix(at){const st=at.elements;return"matrix3d("+epsilon(st[0])+","+epsilon(-st[1])+","+epsilon(st[2])+","+epsilon(st[3])+","+epsilon(st[4])+","+epsilon(-st[5])+","+epsilon(st[6])+","+epsilon(st[7])+","+epsilon(st[8])+","+epsilon(-st[9])+","+epsilon(st[10])+","+epsilon(st[11])+","+epsilon(st[12])+","+epsilon(-st[13])+","+epsilon(st[14])+","+epsilon(st[15])+")"}function getObjectCSSMatrix(at){const st=at.elements;return"translate(-50%,-50%)"+("matrix3d("+epsilon(st[0])+","+epsilon(st[1])+","+epsilon(st[2])+","+epsilon(st[3])+","+epsilon(-st[4])+","+epsilon(-st[5])+","+epsilon(-st[6])+","+epsilon(-st[7])+","+epsilon(st[8])+","+epsilon(st[9])+","+epsilon(st[10])+","+epsilon(st[11])+","+epsilon(st[12])+","+epsilon(st[13])+","+epsilon(st[14])+","+epsilon(st[15])+")")}function hideObject(at){at.isCSS3DObject&&(at.element.style.display="none");for(let st=0,ot=at.children.length;st<ot;st++)hideObject(at.children[st])}function renderObject(at,ot,ut,Hl){if(!1!==at.visible){if(at.isCSS3DObject){const Hl=!0===at.layers.test(ut.layers),rc=at.element;if(rc.style.display=!0===Hl?"":"none",!0===Hl){let Hl;at.onBeforeRender(st,ot,ut),at.isCSS3DSprite?(md.copy(ut.matrixWorldInverse),md.transpose(),0!==at.rotation2D&&md.multiply(gd.makeRotationZ(at.rotation2D)),at.matrixWorld.decompose(ud,hd,dd),md.setPosition(ud),md.scale(dd),md.elements[3]=0,md.elements[7]=0,md.elements[11]=0,md.elements[15]=1,Hl=getObjectCSSMatrix(md)):Hl=getObjectCSSMatrix(at.matrixWorld);const oc=sc.objects.get(at);if(void 0===oc||oc.style!==Hl){rc.style.transform=Hl;const st={style:Hl};sc.objects.set(at,st)}rc.parentNode!==wc&&wc.appendChild(rc),at.onAfterRender(st,ot,ut)}}for(let st=0,rc=at.children.length;st<rc;st++)renderObject(at.children[st],ot,ut,Hl)}else hideObject(at)}wc.style.transformStyle="preserve-3d",_c.appendChild(wc),this.getSize=function(){return{width:ot,height:ut}},this.render=function(at,st){const oc=st.projectionMatrix.elements[5]*rc;let Sc,iu;st.view&&st.view.enabled?(_c.style.transform=`translate( ${-st.view.offsetX*(ot/st.view.width)}px, ${-st.view.offsetY*(ut/st.view.height)}px )`,_c.style.transform+=`scale( ${st.view.fullWidth/st.view.width}, ${st.view.fullHeight/st.view.height} )`):_c.style.transform="",!0===at.matrixWorldAutoUpdate&&at.updateMatrixWorld(),null===st.parent&&!0===st.matrixWorldAutoUpdate&&st.updateMatrixWorld(),st.isOrthographicCamera&&(Sc=-(st.right+st.left)/2,iu=(st.top+st.bottom)/2);const su=st.view&&st.view.enabled?st.view.height/st.view.fullHeight:1,lu=st.isOrthographicCamera?`scale( ${su} )scale(`+oc+")translate("+epsilon(Sc)+"px,"+epsilon(iu)+"px)"+getCameraCSSMatrix(st.matrixWorldInverse):`scale( ${su} )translateZ(`+oc+"px)"+getCameraCSSMatrix(st.matrixWorldInverse),cu=(st.isPerspectiveCamera?"perspective("+oc+"px) ":"")+lu+"translate("+Hl+"px,"+rc+"px)";sc.camera.style!==cu&&(wc.style.transform=cu,sc.camera.style=cu),renderObject(at,at,st,lu)},this.setSize=function(at,st){ot=at,ut=st,Hl=ot/2,rc=ut/2,oc.style.width=at+"px",oc.style.height=st+"px",_c.style.width=at+"px",_c.style.height=st+"px",wc.style.width=at+"px",wc.style.height=st+"px"}}},Ad=class{constructor(at){this.viewer=at,this.element=document.createElement("div"),this.element.className="psv-markers-css3d-container",this.renderer=new fd({element:this.element}),this.scene=new Hl.Z58,this.intersectionObserver=new IntersectionObserver((at=>{at.forEach((at=>{const st=at.target[rd];st.config.visible&&(st.viewportIntersection=at.isIntersecting)}))}),{root:this.element}),at.addEventListener(ut.AZ.ReadyEvent.type,this,{once:!0}),at.addEventListener(ut.AZ.SizeUpdatedEvent.type,this),at.addEventListener(ut.AZ.RenderEvent.type,this)}handleEvent(at){switch(at.type){case ut.AZ.ReadyEvent.type:case ut.AZ.SizeUpdatedEvent.type:this.updateSize();break;case ut.AZ.RenderEvent.type:this.render()}}destroy(){this.viewer.removeEventListener(ut.AZ.ReadyEvent.type,this),this.viewer.removeEventListener(ut.AZ.SizeUpdatedEvent.type,this),this.viewer.removeEventListener(ut.AZ.RenderEvent.type,this),this.intersectionObserver.disconnect()}updateSize(){const at=this.viewer.getSize();this.renderer.setSize(at.width,at.height)}render(){this.renderer.render(this.scene,this.viewer.renderer.camera)}addObject(at){this.scene.add(at.threeElement),this.intersectionObserver.observe(at.domElement)}removeObject(at){this.scene.remove(at.threeElement),this.intersectionObserver.unobserve(at.domElement)}},yd=(at=>(at.image="image",at.html="html",at.element="element",at.imageLayer="imageLayer",at.videoLayer="videoLayer",at.elementLayer="elementLayer",at.polygon="polygon",at.polygonPixels="polygonPixels",at.polyline="polyline",at.polylinePixels="polylinePixels",at.square="square",at.rect="rect",at.circle="circle",at.ellipse="ellipse",at.path="path",at))(yd||{});function getMarkerType(at,st){void 0===st&&(st=!1);const ot=[];if(Object.keys(yd).forEach((st=>{at[st]&&ot.push(st)})),0===ot.length&&!st)throw new ut.e6(`missing marker content, either ${Object.keys(yd).join(", ")}`);if(ot.length>1)throw new ut.e6(`multiple marker content, either ${Object.keys(yd).join(", ")}`);return ot[0]}var vd=class{constructor(at,st,ot){if(this.viewer=at,this.plugin=st,this.state={anchor:null,visible:!1,staticTooltip:!1,position:null,position2D:null,positions3D:null,size:null},!ot.id)throw new ut.e6("missing marker id");this.type=getMarkerType(ot),this.createElement(),this.update(ot)}get id(){return this.config.id}get data(){return this.config.data}get domElement(){return null}get threeElement(){return null}get video(){return null}destroy(){delete this.viewer,delete this.plugin,delete this.element,this.hideTooltip()}is3d(){return!1}isNormal(){return!1}isPoly(){return!1}isSvg(){return!1}isCss3d(){return!1}update(at){const st=getMarkerType(at,!0);if(void 0!==st&&st!==this.type)throw new ut.e6(`cannot change marker ${at.id} type`);if(this.config=ut.Wp.deepmerge(this.config,at),"string"===typeof this.config.tooltip&&(this.config.tooltip={content:this.config.tooltip}),this.config.tooltip&&!this.config.tooltip.trigger&&(this.config.tooltip.trigger="hover"),ut.Wp.isNil(this.config.visible)&&(this.config.visible=!0),ut.Wp.isNil(this.config.zIndex)&&(this.config.zIndex=1),ut.Wp.isNil(this.config.opacity)&&(this.config.opacity=1),this.config.rotation){const at=this.config.rotation;this.config.rotation="object"===typeof at?{yaw:at.yaw?ut.Wp.parseAngle(at.yaw,!0,!1):0,pitch:at.pitch?ut.Wp.parseAngle(at.pitch,!0,!1):0,roll:at.roll?ut.Wp.parseAngle(at.roll,!0,!1):0}:{yaw:0,pitch:0,roll:ut.Wp.parseAngle(at,!0,!1)}}else this.config.rotation={yaw:0,pitch:0,roll:0};this.state.anchor=ut.Wp.parsePoint(this.config.anchor)}getListContent(){return this.config.listContent?this.config.listContent:this.config.tooltip?.content?this.config.tooltip.content:this.config.html?this.config.html:this.id}showTooltip(at,st,ot){if(void 0===ot&&(ot=!1),this.state.visible&&this.config.tooltip?.content&&this.state.position2D){const Hl={...this.config.tooltip,style:{pointerEvents:this.state.staticTooltip?"auto":"none"},data:this,top:0,left:0};if(this.isPoly()||this.is3d()||this.isCss3d())if(at||st){const ot=ut.Wp.getPosition(this.viewer.container);Hl.top=st-ot.y+10,Hl.left=at-ot.x,Hl.box={width:20,height:20}}else Hl.top=this.state.position2D.y,Hl.left=this.state.position2D.x;else{const at=this.viewer.dataHelper.vector3ToViewerCoords(this.state.positions3D[0]);let st=this.state.size.width,ot=this.state.size.height;this.config.hoverScale&&!this.state.staticTooltip&&(st*=this.config.hoverScale.amount,ot*=this.config.hoverScale.amount),Hl.top=at.y-ot*this.state.anchor.y+ot/2,Hl.left=at.x-st*this.state.anchor.x+st/2,Hl.box={width:st,height:ot}}this.tooltip?ot?this.tooltip.update(this.config.tooltip.content,Hl):this.tooltip.move(Hl):this.tooltip=this.viewer.createTooltip(Hl)}}hideTooltip(){this.tooltip&&(this.tooltip.hide(),this.tooltip=null)}},_d=class extends vd{get domElement(){return this.element}constructor(at,st,ot){super(at,st,ot)}afterCreateElement(){this.element[rd]=this}destroy(){delete this.element[rd],super.destroy()}update(at){super.update(at);const st=this.domElement;st.id=`psv-marker-${this.config.id}`,st.setAttribute("class","psv-marker"),this.state.visible&&st.classList.add("psv-marker--visible"),this.config.tooltip&&st.classList.add("psv-marker--has-tooltip"),this.config.content&&st.classList.add("psv-marker--has-content"),this.config.className&&ut.Wp.addClasses(st,this.config.className),st.style.opacity=`${this.config.opacity}`,st.style.zIndex=`${30+this.config.zIndex}`,this.config.style&&Object.assign(st.style,this.config.style)}},xd=class extends _d{constructor(at,st,ot){super(at,st,ot)}afterCreateElement(){super.afterCreateElement(),this.domElement.addEventListener("transitionend",(()=>{this.domElement.style.transition=""}))}render(at){let{viewerPosition:st,zoomLevel:ot,hoveringMarker:ut}=at;this.__updateSize();const Hl=this.viewer.dataHelper.vector3ToViewerCoords(this.state.positions3D[0]);Hl.x-=this.state.size.width*this.state.anchor.x,Hl.y-=this.state.size.height*this.state.anchor.y;return this.state.positions3D[0].dot(this.viewer.state.direction)>0&&Hl.x+this.state.size.width>=0&&Hl.x-this.state.size.width<=this.viewer.state.size.width&&Hl.y+this.state.size.height>=0&&Hl.y-this.state.size.height<=this.viewer.state.size.height?(this.domElement.style.translate=`${Hl.x}px ${Hl.y}px 0px`,this.applyScale({zoomLevel:ot,viewerPosition:st,mouseover:this===ut}),Hl):null}update(at){if(super.update(at),!ut.Wp.isExtendedPosition(this.config.position))throw new ut.e6(`missing marker ${this.id} position`);try{this.state.position=this.viewer.dataHelper.cleanPosition(this.config.position)}catch(ot){throw new ut.e6(`invalid marker ${this.id} position`,ot)}this.state.positions3D=[this.viewer.dataHelper.sphericalCoordsToVector3(this.state.position)];const st=this.domElement;st.classList.add("psv-marker--normal"),this.config.scale&&Array.isArray(this.config.scale)&&(this.config.scale={zoom:this.config.scale}),"boolean"===typeof this.config.hoverScale?this.config.hoverScale=this.config.hoverScale?this.plugin.config.defaultHoverScale||ld:null:"number"===typeof this.config.hoverScale?this.config.hoverScale={amount:this.config.hoverScale}:this.config.hoverScale||(this.config.hoverScale=this.plugin.config.defaultHoverScale),this.config.hoverScale&&(this.config.hoverScale={...this.plugin.config.defaultHoverScale,...this.config.hoverScale}),st.style.rotate=0!==this.config.rotation.roll?Hl.cj9.radToDeg(this.config.rotation.roll)+"deg":null,st.style.transformOrigin=`${100*this.state.anchor.x}% ${100*this.state.anchor.y}%`}__updateSize(){if(!this.needsUpdateSize)return;const at=this.domElement,st=!this.state.visible||!this.state.size;if(st&&at.classList.add("psv-marker--transparent"),this.isSvg()){const st=at.firstElementChild.getBoundingClientRect();this.state.size={width:st.width,height:st.height}}else this.state.size={width:at.offsetWidth,height:at.offsetHeight};st&&at.classList.remove("psv-marker--transparent"),this.isSvg()&&(at.style.width=this.state.size.width+"px",at.style.height=this.state.size.height+"px"),"element"!==this.type&&(this.needsUpdateSize=!1)}applyScale(at){let{zoomLevel:st,viewerPosition:ot,mouseover:rc}=at;null!==rc&&this.config.hoverScale&&(this.domElement.style.transition=`scale ${this.config.hoverScale.duration}ms ${this.config.hoverScale.easing}`);let sc=1;if("function"===typeof this.config.scale)sc=this.config.scale(st,ot);else if(this.config.scale){if(Array.isArray(this.config.scale.zoom)){const[at,ot]=this.config.scale.zoom;sc*=at+(ot-at)*ut.aH.EASINGS.inQuad(st/100)}if(Array.isArray(this.config.scale.yaw)){const[at,st]=this.config.scale.yaw,rc=Hl.cj9.degToRad(this.viewer.state.hFov)/2,oc=Math.abs(ut.Wp.getShortestArc(this.state.position.yaw,ot.yaw));sc*=st+(at-st)*ut.aH.EASINGS.outQuad(Math.max(0,(rc-oc)/rc))}}rc&&this.config.hoverScale&&(sc*=this.config.hoverScale.amount),this.domElement.style.scale=`${sc}`}},bd=class extends Hl.BKk{get map(){return this.uniforms.map.value}set map(at){this.uniforms.map.value=at}set alpha(at){this.uniforms.alpha.value=at}get offset(){return this.uniforms.offset.value}get repeat(){return this.uniforms.repeat.value}set chromaKey(at){this.uniforms.keying.value=!0===at?.enabled,at?.enabled&&("object"===typeof at.color&&"r"in at.color?this.uniforms.color.value.set(at.color.r/255,at.color.g/255,at.color.b/255):this.uniforms.color.value.set(at.color??65280),this.uniforms.similarity.value=at.similarity??.2,this.uniforms.smoothness.value=at.smoothness??.2)}constructor(at){super({transparent:!0,depthTest:!1,depthWrite:!1,uniforms:{map:{value:at?.map},repeat:{value:new Hl.I9Y(1,1)},offset:{value:new Hl.I9Y(0,0)},alpha:{value:at?.alpha??1},keying:{value:!1},color:{value:new Hl.Q1f(65280)},similarity:{value:.2},smoothness:{value:.2},spill:{value:.1}},vertexShader:"varying vec2 vUv;\nuniform vec2 repeat;\nuniform vec2 offset;\n\nvoid main() {\n    vUv = uv * repeat + offset;\n    gl_Position = projectionMatrix *  modelViewMatrix * vec4( position, 1.0 );\n}\n",fragmentShader:"// https://www.8thwall.com/playground/chromakey-threejs\n\nuniform sampler2D map;\nuniform float alpha;\nuniform bool keying;\nuniform vec3 color;\nuniform float similarity;\nuniform float smoothness;\nuniform float spill;\n\nvarying vec2 vUv;\n\nvec2 RGBtoUV(vec3 rgb) {\n    return vec2(\n        rgb.r * -0.169 + rgb.g * -0.331 + rgb.b *  0.5    + 0.5,\n        rgb.r *  0.5   + rgb.g * -0.419 + rgb.b * -0.081  + 0.5\n    );\n}\n\nvoid main(void) {\n    gl_FragColor = texture2D(map, vUv);\n\n    if (keying) {\n        float chromaDist = distance(RGBtoUV(gl_FragColor.rgb), RGBtoUV(color));\n\n        float baseMask = chromaDist - similarity;\n        float fullMask = pow(clamp(baseMask / smoothness, 0., 1.), 1.5);\n        gl_FragColor.a *= fullMask * alpha;\n\n        float spillVal = pow(clamp(baseMask / spill, 0., 1.), 1.5);\n        float desat = clamp(gl_FragColor.r * 0.2126 + gl_FragColor.g * 0.7152 + gl_FragColor.b * 0.0722, 0., 1.);\n        gl_FragColor.rgb = mix(vec3(desat, desat, desat), gl_FragColor.rgb, spillVal);\n    } else {\n        gl_FragColor.a *= alpha;\n    }\n}\n"}),this.chromaKey=at?.chromaKey}};function greatArcIntermediaryPoint(at,st,ot){const[Hl,rc]=at,[sc,oc]=st,_c=ut.Wp.greatArcDistance(at,st),wc=Math.sin((1-ot)*_c)/Math.sin(_c),Sc=Math.sin(ot*_c)/Math.sin(_c),iu=wc*Math.cos(rc)*Math.cos(Hl)+Sc*Math.cos(oc)*Math.cos(sc),su=wc*Math.cos(rc)*Math.sin(Hl)+Sc*Math.cos(oc)*Math.sin(sc),lu=wc*Math.sin(rc)+Sc*Math.sin(oc);return[Math.atan2(su,iu),Math.atan2(lu,Math.sqrt(iu*iu+su*su))]}function getPolygonCenter(at){return at.reduce(((at,st)=>at.add(st)),new Hl.Pq0).normalize()}function getPolylineCenter(at){const st=function(at){const st=[at[0]];let ot=0;for(let ut=1;ut<at.length;ut++){const Hl=at[ut-1][0]-at[ut][0];Hl>Math.PI?ot+=1:Hl<-Math.PI&&(ot-=1),st.push([at[ut][0]+2*ot*Math.PI,at[ut][1]])}return st}(at);let ot=0;const Hl=[];for(let sc=0;sc<st.length-1;sc++){const at=ut.Wp.greatArcDistance(st[sc],st[sc+1])*ut.aH.SPHERE_RADIUS;Hl.push(at),ot+=at}let rc=0;for(let ut=0;ut<st.length-1;ut++){if(rc+Hl[ut]>ot/2){const at=(ot/2-rc)/Hl[ut];return greatArcIntermediaryPoint(st[ut],st[ut+1],at)}rc+=Hl[ut]}return st[Math.round(st.length/2)]}var wd=new Hl.Pq0,Ed=new Hl.Pq0,Md=new Hl.Pq0,Sd=new Hl.Pq0,Td=new Hl.Pq0,Cd=new Hl.Pq0;function getGreatCircleIntersection(at,st,ot){wd.copy(ot).normalize(),Ed.crossVectors(at,st).normalize(),Md.crossVectors(Ed,at).normalize(),Sd.copy(at).multiplyScalar(-wd.dot(Md)),Td.copy(Md).multiplyScalar(wd.dot(at));const rc=(new Hl.Pq0).addVectors(Sd,Td).normalize();return Cd.crossVectors(rc,wd),rc.applyAxisAngle(Cd,.01).multiplyScalar(ut.aH.SPHERE_RADIUS)}var kd=class extends vd{get threeElement(){return this.element}get threeMesh(){return this.threeElement.children[0]}get video(){return"videoLayer"===this.type?this.threeMesh.material.map.image:null}constructor(at,st,ot){super(at,st,ot)}is3d(){return!0}createElement(){const at=new bd({alpha:0}),st=new Hl.bdM(1,1),ot=new Hl.eaF(st,at);ot.userData={[rd]:this},Object.defineProperty(ot,"visible",{enumerable:!0,get:function(){return this.userData[rd].config.visible},set:function(at){this.userData[rd].config.visible=at}}),this.element=(new Hl.YJl).add(ot),"videoLayer"===this.type&&this.viewer.needsContinuousUpdate(!0)}destroy(){delete this.threeMesh.userData[rd],"videoLayer"===this.type&&(this.video.pause(),this.viewer.needsContinuousUpdate(!1)),super.destroy()}render(){return this.viewer.renderer.isObjectVisible(this.threeMesh)?this.viewer.dataHelper.sphericalCoordsToViewerCoords(this.state.position):null}update(at){super.update(at);const st=this.threeMesh,ot=st.parent,rc=st.material;if(ut.Wp.isExtendedPosition(this.config.position)){try{this.state.position=this.viewer.dataHelper.cleanPosition(this.config.position)}catch(sc){throw new ut.e6(`invalid marker ${this.id} position`,sc)}if(!this.config.size)throw new ut.e6(`missing marker ${this.id} size`);this.state.size=this.config.size,st.scale.set(this.config.size.width/100,this.config.size.height/100,1),st.position.set(st.scale.x*(.5-this.state.anchor.x),st.scale.y*(this.state.anchor.y-.5),0),st.rotation.set(0,0,0),this.viewer.dataHelper.sphericalCoordsToVector3(this.state.position,ot.position),ot.lookAt(0,ot.position.y,0),st.rotateY(-this.config.rotation.yaw),st.rotateX(-this.config.rotation.pitch),st.rotateZ(-this.config.rotation.roll);const at=st.geometry.getAttribute("position");this.state.positions3D=[0,1,3,2].map((ot=>{const ut=new Hl.Pq0;return ut.fromBufferAttribute(at,ot),st.localToWorld(ut)}))}else{if(4!==this.config.position?.length)throw new ut.e6(`missing marker ${this.id} position`);let at;try{at=this.config.position.map((at=>this.viewer.dataHelper.cleanPosition(at)))}catch(sc){throw new ut.e6(`invalid marker ${this.id} position`,sc)}const ot=at.map((at=>this.viewer.dataHelper.sphericalCoordsToVector3(at))),Hl=getPolygonCenter(ot);this.state.position=this.viewer.dataHelper.vector3ToSphericalCoords(Hl),this.state.positions3D=ot;const oc=st.geometry.getAttribute("position");[ot[0],ot[1],ot[3],ot[2]].forEach(((at,st)=>{oc.setX(st,at.x),oc.setY(st,at.y),oc.setZ(st,at.z)})),oc.needsUpdate=!0,this.__setTextureWrap(rc)}switch(this.type){case"videoLayer":if(this.definition!==this.config.videoLayer){rc.map?.dispose();const at=function(at){let{src:st,withCredentials:ot,muted:ut,autoplay:Hl}=at;const rc=document.createElement("video");return rc.crossOrigin=ot?"use-credentials":"anonymous",rc.loop=!0,rc.playsInline=!0,rc.autoplay=Hl,rc.muted=ut,rc.preload="metadata",st instanceof MediaStream?rc.srcObject=st:rc.src=st,rc}({src:this.config.videoLayer,withCredentials:this.viewer.config.withCredentials(this.config.videoLayer),muted:!0,autoplay:this.config.autoplay??!0}),ot=new Hl.Nv2(at);rc.map=ot,rc.alpha=0,at.addEventListener("loadedmetadata",(()=>{this.viewer&&(rc.alpha=this.config.opacity,ut.Wp.isExtendedPosition(this.config.position)||(st.material.userData[rd]={width:at.videoWidth,height:at.videoHeight},this.__setTextureWrap(rc)))}),{once:!0}),at.autoplay&&at.play(),this.definition=this.config.videoLayer}else rc.alpha=this.config.opacity;break;case"imageLayer":if(this.definition!==this.config.imageLayer){rc.map?.dispose();const at=new Hl.gPd;rc.map=at,rc.alpha=0,this.viewer.textureLoader.loadImage(this.config.imageLayer).then((ot=>{this.viewer&&(ut.Wp.isExtendedPosition(this.config.position)||(st.material.userData[rd]={width:ot.width,height:ot.height},this.__setTextureWrap(rc)),at.image=ot,at.anisotropy=4,at.needsUpdate=!0,rc.alpha=this.config.opacity,this.viewer.needsUpdate())})),this.definition=this.config.imageLayer}else rc.alpha=this.config.opacity}rc.chromaKey=this.config.chromaKey,st.renderOrder=1e3+this.config.zIndex,st.geometry.boundingBox=null}__setTextureWrap(at){const st=at.userData[rd];if(!st||!st.height||!st.width)return at.repeat.set(1,1),void at.offset.set(0,0);const ot=this.config.position.map((at=>this.viewer.dataHelper.cleanPosition(at))),Hl=(ut.Wp.greatArcDistance([ot[0].yaw,ot[0].pitch],[ot[1].yaw,ot[1].pitch])+ut.Wp.greatArcDistance([ot[3].yaw,ot[3].pitch],[ot[2].yaw,ot[2].pitch]))/(ut.Wp.greatArcDistance([ot[1].yaw,ot[1].pitch],[ot[2].yaw,ot[2].pitch])+ut.Wp.greatArcDistance([ot[0].yaw,ot[0].pitch],[ot[3].yaw,ot[3].pitch])),rc=st.width/st.height;let sc=0,oc=0;Hl<rc?sc=rc-Hl:oc=1/rc-1/Hl,at.repeat.set(1-sc,1-oc),at.offset.set(sc/2,oc/2)}},Id=class extends _d{constructor(at,st,ot){super(at,st,ot),this.viewportIntersection=!1}get threeElement(){return this.object}isCss3d(){return!0}createElement(){this.element=document.createElement("div"),this.object=new pd(this.element),this.object.userData={[rd]:this},Object.defineProperty(this.object,"visible",{enumerable:!0,get:function(){return this.userData[rd].config.visible},set:function(at){this.userData[rd].config.visible=at}}),this.afterCreateElement()}destroy(){delete this.object.userData[rd],delete this.object,super.destroy()}render(at){let{viewerPosition:st,zoomLevel:ot}=at;const ut=this.domElement;this.state.size={width:ut.offsetWidth,height:ut.offsetHeight};if(this.state.positions3D[0].dot(this.viewer.state.direction)>0&&this.viewportIntersection){const at=this.viewer.dataHelper.sphericalCoordsToViewerCoords(this.state.position);return this.config.elementLayer.updateMarker?.({marker:this,position:at,viewerPosition:st,zoomLevel:ot,viewerSize:this.viewer.state.size}),at}return null}update(at){if(super.update(at),!ut.Wp.isExtendedPosition(this.config.position))throw new ut.e6(`missing marker ${this.id} position`);try{this.state.position=this.viewer.dataHelper.cleanPosition(this.config.position)}catch(Hl){throw new ut.e6(`invalid marker ${this.id} position`,Hl)}this.state.positions3D=[this.viewer.dataHelper.sphericalCoordsToVector3(this.state.position)];const st=this.threeElement,ot=this.domElement;ot.classList.add("psv-marker--css3d"),ot.childNodes.forEach((at=>at.remove())),ot.appendChild(this.config.elementLayer),this.config.elementLayer.style.display="block",st.position.copy(this.state.positions3D[0]).multiplyScalar(100),st.lookAt(0,100*this.state.positions3D[0].y,0),st.rotateY(-this.config.rotation.yaw),st.rotateX(-this.config.rotation.pitch),st.rotateZ(-this.config.rotation.roll)}},Dd=class extends xd{constructor(at,st,ot){super(at,st,ot)}isNormal(){return!0}createElement(){this.element=document.createElement("div"),this.afterCreateElement()}render(at){const st=super.render(at);return st&&"element"===this.type&&this.config.element.updateMarker?.({marker:this,position:st,viewerPosition:at.viewerPosition,zoomLevel:at.zoomLevel,viewerSize:this.viewer.state.size}),st}update(at){super.update(at);const st=this.domElement;if(this.config.image&&!this.config.size)throw new ut.e6(`missing marker ${this.id} size`);switch(this.config.size?(this.needsUpdateSize=!1,this.state.size=this.config.size,st.style.width=this.config.size.width+"px",st.style.height=this.config.size.height+"px"):this.needsUpdateSize=!0,this.type){case"image":this.definition=this.config.image,st.style.backgroundImage=`url("${this.config.image}")`;break;case"html":this.definition=this.config.html,st.innerHTML=this.config.html;break;case"element":this.definition!==this.config.element&&(this.definition=this.config.element,st.childNodes.forEach((at=>at.remove())),st.appendChild(this.config.element),this.config.element.style.display="block")}}},Ld=class extends _d{constructor(at,st,ot){super(at,st,ot)}createElement(){this.element=document.createElementNS(nd,"path"),this.element[rd]=this}isPoly(){return!0}get isPixels(){return"polygonPixels"===this.type||"polylinePixels"===this.type}get isPolygon(){return"polygon"===this.type||"polygonPixels"===this.type}get isPolyline(){return"polyline"===this.type||"polylinePixels"===this.type}get coords(){return this.definition}render(){const at=this.__getAllPolyPositions();if(at[0].length>(this.isPolygon?2:1)){const st=this.viewer.dataHelper.sphericalCoordsToViewerCoords(this.state.position),ot=at.filter((at=>at.length>0)).map((at=>{let ot="M";return ot+=at.map((at=>`${at.x-st.x},${at.y-st.y}`)).join("L"),this.isPolygon&&(ot+="Z"),ot})).join(" ");return this.domElement.setAttributeNS(null,"d",ot),this.domElement.setAttributeNS(null,"transform",`translate(${st.x} ${st.y})`),st}return null}update(at){super.update(at);const st=this.domElement;st.classList.add("psv-marker--poly"),this.config.svgStyle?(Object.entries(this.config.svgStyle).forEach((at=>{let[ot,Hl]=at;st.setAttributeNS(null,ut.Wp.dasherize(ot),Hl)})),this.isPolyline&&!this.config.svgStyle.fill&&st.setAttributeNS(null,"fill","none")):this.isPolygon?st.setAttributeNS(null,"fill","rgba(0,0,0,0.5)"):this.isPolyline&&(st.setAttributeNS(null,"fill","none"),st.setAttributeNS(null,"stroke","rgb(0,0,0)"));try{let at=this.config[this.type];if(!Array.isArray(at[0])&&"object"!==typeof at[0])for(let st=0;st<at.length;st++)at.splice(st,2,[at[st],at[st+1]]);if(Array.isArray(at[0][0])||"object"===typeof at[0][0]||(at=[at]),this.isPolyline&&at.length>1)throw new ut.e6("polylines cannot have holes");this.isPixels?this.definition=at.map((at=>at.map((at=>{let st;return st=ut.Wp.isExtendedPosition(at)?this.viewer.dataHelper.cleanPosition(at):this.viewer.dataHelper.textureCoordsToSphericalCoords({textureX:at[0],textureY:at[1]}),[st.yaw,st.pitch]})))):this.definition=at.map((at=>at.map((at=>{let st;return st=ut.Wp.isExtendedPosition(at)?this.viewer.dataHelper.cleanPosition(at):this.viewer.dataHelper.cleanPosition({yaw:at[0],pitch:at[1]}),[st.yaw,st.pitch]}))))}catch(ot){throw new ut.e6(`invalid marker ${this.id} position`,ot)}if(this.positions3D=this.coords.map((at=>at.map((at=>this.viewer.dataHelper.sphericalCoordsToVector3({yaw:at[0],pitch:at[1]}))))),this.isPolygon){const at=getPolygonCenter(this.positions3D[0]);this.state.position=this.viewer.dataHelper.vector3ToSphericalCoords(at)}else{const at=getPolylineCenter(this.coords[0]);this.state.position={yaw:at[0],pitch:at[1]}}this.state.positions3D=this.positions3D[0]}__getAllPolyPositions(){return this.positions3D.map((at=>this.__getPolyPositions(at)))}__getPolyPositions(at){const st=at.length,ot=at.map((at=>({vector:at,visible:at.dot(this.viewer.state.direction)>0}))),ut=[];return ot.forEach(((at,Hl)=>{if(!at.visible){[0===Hl?ot[st-1]:ot[Hl-1],Hl===st-1?ot[0]:ot[Hl+1]].forEach((st=>{st.visible&&ut.push({visible:st.vector,invisible:at.vector,index:Hl})}))}})),ut.reverse().forEach((at=>{ot.splice(at.index,0,{vector:getGreatCircleIntersection(at.visible,at.invisible,this.viewer.state.direction),visible:!0})})),ot.filter((at=>at.visible)).map((at=>this.viewer.dataHelper.vector3ToViewerCoords(at.vector)))}},Pd=class extends xd{get svgElement(){return this.domElement.firstElementChild}constructor(at,st,ot){super(at,st,ot)}isSvg(){return!0}createElement(){const at="square"===this.type?"rect":this.type,st=document.createElementNS(nd,at);this.element=document.createElementNS(nd,"svg"),this.element.appendChild(st),this.afterCreateElement()}update(at){super.update(at);const st=this.svgElement;switch(this.needsUpdateSize=!0,this.type){case"square":this.definition={x:0,y:0,width:this.config.square,height:this.config.square};break;case"rect":Array.isArray(this.config.rect)?this.definition={x:0,y:0,width:this.config.rect[0],height:this.config.rect[1]}:this.definition={x:0,y:0,width:this.config.rect.width,height:this.config.rect.height};break;case"circle":this.definition={cx:this.config.circle,cy:this.config.circle,r:this.config.circle};break;case"ellipse":Array.isArray(this.config.ellipse)?this.definition={cx:this.config.ellipse[0],cy:this.config.ellipse[1],rx:this.config.ellipse[0],ry:this.config.ellipse[1]}:this.definition={cx:this.config.ellipse.rx,cy:this.config.ellipse.ry,rx:this.config.ellipse.rx,ry:this.config.ellipse.ry};break;case"path":this.definition={d:this.config.path}}Object.entries(this.definition).forEach((at=>{let[ot,ut]=at;st.setAttributeNS(null,ot,ut)})),this.config.svgStyle?Object.entries(this.config.svgStyle).forEach((at=>{let[ot,Hl]=at;st.setAttributeNS(null,ut.Wp.dasherize(ot),Hl)})):st.setAttributeNS(null,"fill","rgba(0,0,0,0.5)")}},zd=ut.Wp.getConfigParser({clickEventOnMarker:!1,gotoMarkerSpeed:"8rpm",markers:null,defaultHoverScale:null},{defaultHoverScale:at=>at?(!0===at&&(at=ld),"number"===typeof at&&(at={amount:at}),{...ld,...at}):null});var Nd=class _MarkersPlugin extends ut.TL{constructor(at,st){super(at,st),this.markers={},this.state={allVisible:!0,showAllTooltips:!1,currentMarker:null,hoveringMarker:null,needsReRender:!1,lastClientX:null,lastClientY:null},this.container=document.createElement("div"),this.container.className="psv-markers",this.viewer.container.appendChild(this.container),this.container.addEventListener("contextmenu",(at=>at.preventDefault())),this.svgContainer=document.createElementNS(nd,"svg"),this.svgContainer.setAttribute("class","psv-markers-svg-container"),this.container.appendChild(this.svgContainer),this.css3DContainer=new Ad(at),this.container.appendChild(this.css3DContainer.element),this.container.addEventListener("mouseenter",this,!0),this.container.addEventListener("mouseleave",this,!0),this.container.addEventListener("mousemove",this,!0)}static withConfig(at){return[_MarkersPlugin,at]}init(){super.init(),ut.Wp.checkStylesheet(this.viewer.container,"markers-plugin"),this.viewer.addEventListener(ut.AZ.ClickEvent.type,this),this.viewer.addEventListener(ut.AZ.DoubleClickEvent.type,this),this.viewer.addEventListener(ut.AZ.RenderEvent.type,this),this.viewer.addEventListener(ut.AZ.ConfigChangedEvent.type,this),this.viewer.addEventListener(ut.AZ.ObjectEnterEvent.type,this),this.viewer.addEventListener(ut.AZ.ObjectHoverEvent.type,this),this.viewer.addEventListener(ut.AZ.ObjectLeaveEvent.type,this),this.viewer.addEventListener(ut.AZ.ReadyEvent.type,this,{once:!0})}destroy(){this.clearMarkers(!1),this.viewer.unobserveObjects(rd),this.viewer.removeEventListener(ut.AZ.ClickEvent.type,this),this.viewer.removeEventListener(ut.AZ.DoubleClickEvent.type,this),this.viewer.removeEventListener(ut.AZ.RenderEvent.type,this),this.viewer.removeEventListener(ut.AZ.ObjectEnterEvent.type,this),this.viewer.removeEventListener(ut.AZ.ObjectHoverEvent.type,this),this.viewer.removeEventListener(ut.AZ.ObjectLeaveEvent.type,this),this.viewer.removeEventListener(ut.AZ.ReadyEvent.type,this),this.css3DContainer.destroy(),this.viewer.container.removeChild(this.container),super.destroy()}handleEvent(at){switch(at.type){case ut.AZ.ReadyEvent.type:this.config.markers&&(this.setMarkers(this.config.markers),delete this.config.markers);break;case ut.AZ.RenderEvent.type:this.renderMarkers();break;case ut.AZ.ClickEvent.type:this.__onClick(at,!1);break;case ut.AZ.DoubleClickEvent.type:this.__onClick(at,!0);break;case ut.AZ.ObjectEnterEvent.type:case ut.AZ.ObjectLeaveEvent.type:case ut.AZ.ObjectHoverEvent.type:if(at.userDataKey===rd){const st=at.originalEvent,ot=at.object.userData[rd];switch(at.type){case ut.AZ.ObjectEnterEvent.type:ot.config.style?.cursor?this.viewer.setCursor(ot.config.style.cursor):(ot.config.tooltip||ot.config.content)&&this.viewer.setCursor("pointer"),this.__onEnterMarker(st,ot);break;case ut.AZ.ObjectLeaveEvent.type:this.viewer.setCursor(null),this.__onLeaveMarker(ot);break;case ut.AZ.ObjectHoverEvent.type:this.__onHoverMarker(st,ot)}}break;case"mouseenter":{const st=this.__getTargetMarker(ut.Wp.getEventTarget(at));this.__onEnterMarker(at,st);break}case"mouseleave":{const st=this.__getTargetMarker(ut.Wp.getEventTarget(at));this.__onLeaveMarker(st);break}case"mousemove":{const st=this.__getTargetMarker(ut.Wp.getEventTarget(at),!0);this.__onHoverMarker(at,st);break}}}toggleAllMarkers(){this.state.allVisible?this.hideAllMarkers():this.showAllMarkers()}showAllMarkers(){this.state.allVisible=!0,Object.values(this.markers).forEach((at=>{at.config.visible=!0})),this.renderMarkers(),this.dispatchEvent(new $u)}hideAllMarkers(){this.state.allVisible=!1,Object.values(this.markers).forEach((at=>{at.config.visible=!1})),this.renderMarkers(),this.dispatchEvent(new xu)}toggleAllTooltips(){this.state.showAllTooltips?this.hideAllTooltips():this.showAllTooltips()}showAllTooltips(){this.state.showAllTooltips=!0,Object.values(this.markers).forEach((at=>{at.state.staticTooltip=!0,at.showTooltip()}))}hideAllTooltips(){this.state.showAllTooltips=!1,Object.values(this.markers).forEach((at=>{at.state.staticTooltip=!1,at.hideTooltip()}))}getNbMarkers(){return Object.keys(this.markers).length}getMarkers(){return Object.values(this.markers)}addMarker(at,st){if(void 0===st&&(st=!0),this.markers[at.id])throw new ut.e6(`marker "${at.id}" already exists`);const ot=new(function(at){switch(getMarkerType(at,!1)){case"image":case"html":case"element":return Dd;case"imageLayer":case"videoLayer":return kd;case"elementLayer":return Id;case"polygon":case"polyline":case"polygonPixels":case"polylinePixels":return Ld;case"square":case"rect":case"circle":case"ellipse":case"path":return Pd;default:throw new ut.e6("invalid marker type")}}(at))(this.viewer,this,at);ot.isPoly()?this.svgContainer.appendChild(ot.domElement):ot.isCss3d()?this.css3DContainer.addObject(ot):ot.is3d()?this.viewer.renderer.addObject(ot.threeElement):this.container.appendChild(ot.domElement),this.markers[ot.id]=ot,this.state.showAllTooltips&&(ot.state.staticTooltip=!0),st&&this.__afterChangeMarkers()}getMarker(at){const st="object"===typeof at?at.id:at;if(!this.markers[st])throw new ut.e6(`cannot find marker "${st}"`);return this.markers[st]}getCurrentMarker(){return this.state.currentMarker}updateMarker(at,st){void 0===st&&(st=!0);const ot=this.getMarker(at.id);ot.update(at),st&&(this.__afterChangeMarkers(),(ot===this.state.hoveringMarker&&"hover"===ot.config.tooltip?.trigger||ot.state.staticTooltip)&&ot.showTooltip(this.state.lastClientX,this.state.lastClientY,!0))}removeMarker(at,st){void 0===st&&(st=!0);const ot=this.getMarker(at);ot.isPoly()?this.svgContainer.removeChild(ot.domElement):ot.isCss3d()?this.css3DContainer.removeObject(ot):ot.is3d()?this.viewer.renderer.removeObject(ot.threeElement):this.container.removeChild(ot.domElement),this.state.hoveringMarker===ot&&(this.state.hoveringMarker=null),this.state.currentMarker===ot&&(this.state.currentMarker=null),ot.destroy(),delete this.markers[ot.id],st&&this.__afterChangeMarkers()}removeMarkers(at,st){void 0===st&&(st=!0),at.forEach((at=>this.removeMarker(at,!1))),st&&this.__afterChangeMarkers()}setMarkers(at,st){void 0===st&&(st=!0),this.clearMarkers(!1),at?.forEach((at=>{this.addMarker(at,!1)})),st&&this.__afterChangeMarkers()}clearMarkers(at){void 0===at&&(at=!0),Object.keys(this.markers).forEach((at=>{this.removeMarker(at,!1)})),at&&this.__afterChangeMarkers()}gotoMarker(at,st){void 0===st&&(st=this.config.gotoMarkerSpeed);const ot=this.getMarker(at);return st?this.viewer.animate({...ot.state.position,zoom:ot.config.zoomLvl,speed:st}).then((()=>{this.dispatchEvent(new Sc(ot))})):(this.viewer.rotate(ot.state.position),ut.Wp.isNil(ot.config.zoomLvl)||this.viewer.zoom(ot.config.zoomLvl),this.dispatchEvent(new Sc(ot)),Promise.resolve())}hideMarker(at){this.toggleMarker(at,!1)}showMarker(at){this.toggleMarker(at,!0)}showMarkerTooltip(at){const st=this.getMarker(at);st.state.staticTooltip=!0,st.showTooltip()}hideMarkerTooltip(at){const st=this.getMarker(at);st.state.staticTooltip=!1,st.hideTooltip()}toggleMarker(at,st){const ot=this.getMarker(at);ot.config.visible=ut.Wp.isNil(st)?!ot.config.visible:st,this.renderMarkers()}showMarkerPanel(at){const st=this.getMarker(at);st.config.content?this.viewer.panel.show({id:sd,content:st.config.content}):this.hideMarkerPanel()}hideMarkerPanel(){this.viewer.panel.hide(sd)}toggleMarkersList(){this.viewer.panel.isVisible(od)?this.hideMarkersList():this.showMarkersList()}showMarkersList(){let at=[];Object.values(this.markers).forEach((st=>{st.config.visible&&!st.config.hideList&&at.push(st)}));const st=new ed(at);this.dispatchEvent(st),at=st.markers,this.viewer.panel.show({id:od,content:MARKERS_LIST_TEMPLATE(at,this.viewer.config.lang[td.id]),noMargin:!0,clickHandler:at=>{const st=ut.Wp.getClosest(at,".psv-panel-menu-item"),ot=st?st.dataset[rd]:void 0;if(ot){const at=this.getMarker(ot);this.dispatchEvent(new gu(at)),this.gotoMarker(at.id),this.hideMarkersList()}}})}hideMarkersList(){this.viewer.panel.hide(od)}renderMarkers(){if(this.state.needsReRender)return void(this.state.needsReRender=!1);const at=this.viewer.getZoomLevel(),st=this.viewer.getPosition(),ot=this.state.hoveringMarker;Object.values(this.markers).forEach((Hl=>{let rc=Hl.config.visible,sc=!1,oc=null;rc&&(oc=Hl.render({viewerPosition:st,zoomLevel:at,hoveringMarker:ot}),rc=!!oc),sc=Hl.state.visible!==rc,Hl.state.visible=rc,Hl.state.position2D=oc,Hl.domElement&&ut.Wp.toggleClass(Hl.domElement,"psv-marker--visible",rc),rc?Hl.state.staticTooltip?Hl.showTooltip():Hl!==this.state.hoveringMarker&&Hl.hideTooltip():Hl.hideTooltip(),sc&&(this.dispatchEvent(new _c(Hl,rc)),(Hl.is3d()||Hl.isCss3d())&&(this.state.needsReRender=!0))})),this.state.needsReRender&&this.viewer.needsUpdate()}__getTargetMarker(at,st){if(void 0===st&&(st=!1),at instanceof Node){const ot=st?ut.Wp.getClosest(at,".psv-marker"):at;return ot?ot[rd]:void 0}return Array.isArray(at)?at.map((at=>at.userData[rd])).filter((at=>!!at)).sort(((at,st)=>st.config.zIndex-at.config.zIndex))[0]:null}__onEnterMarker(at,st){st&&(this.state.hoveringMarker=st,this.state.lastClientX=at.clientX,this.state.lastClientY=at.clientY,this.dispatchEvent(new cu(st)),st instanceof xd&&st.applyScale({zoomLevel:this.viewer.getZoomLevel(),viewerPosition:this.viewer.getPosition(),mouseover:!0}),st.state.staticTooltip||"hover"!==st.config.tooltip?.trigger||st.showTooltip(at.clientX,at.clientY))}__onLeaveMarker(at){at&&(this.dispatchEvent(new su(at)),at instanceof xd&&at.applyScale({zoomLevel:this.viewer.getZoomLevel(),viewerPosition:this.viewer.getPosition(),mouseover:!1}),this.state.hoveringMarker=null,at.state.staticTooltip||"hover"!==at.config.tooltip?.trigger?at.state.staticTooltip&&at.showTooltip():at.hideTooltip())}__onHoverMarker(at,st){st&&(this.state.lastClientX=at.clientX,this.state.lastClientY=at.clientY,(st.isPoly()||st.is3d()||st.isCss3d())&&"hover"===st.config.tooltip?.trigger&&st.showTooltip(at.clientX,at.clientY))}__onClick(at,st){const ot=this.__getTargetMarker(at.data.objects),ut=this.__getTargetMarker(at.data.target,!0)||ot;this.state.currentMarker&&this.state.currentMarker!==ut&&(this.dispatchEvent(new yu(this.state.currentMarker)),this.viewer.panel.hide(sd),this.state.showAllTooltips||"click"!==this.state.currentMarker.config.tooltip?.trigger||this.hideMarkerTooltip(this.state.currentMarker.id),this.state.currentMarker=null),ut&&(this.state.currentMarker=ut,this.dispatchEvent(new pu(ut,st,at.data.rightclick)),this.config.clickEventOnMarker?at.data.marker=ut:at.stopImmediatePropagation(),this.markers[ut.id]&&!at.data.rightclick&&("click"===ut.config.tooltip?.trigger?ut.tooltip?this.hideMarkerTooltip(ut.id):this.showMarkerTooltip(ut.id):this.showMarkerPanel(ut.id)))}__afterChangeMarkers(){this.__refreshUi(),this.__checkObjectsObserver(),this.viewer.needsUpdate(),this.dispatchEvent(new Du(this.getMarkers()))}__refreshUi(){const at=Object.values(this.markers).filter((at=>!at.config.hideList)).length;0===at?(this.viewer.panel.hide(sd),this.viewer.panel.hide(od)):this.viewer.panel.isVisible(od)?this.showMarkersList():this.viewer.panel.isVisible(sd)&&(this.state.currentMarker?this.showMarkerPanel(this.state.currentMarker.id):this.viewer.panel.hide()),this.viewer.navbar.getButton(td.id,!1)?.toggle(at>0),this.viewer.navbar.getButton(cd.id,!1)?.toggle(at>0)}__checkObjectsObserver(){Object.values(this.markers).some((at=>at.is3d()))?this.viewer.observeObjects(rd):this.viewer.unobserveObjects(rd)}};Nd.id="markers",Nd.VERSION="5.14.0",Nd.configParser=zd,Nd.readonlyOptions=["markers"];var Rd=Nd;ut.zY.lang[td.id]="Markers",ut.zY.lang[cd.id]="Markers list",(0,ut.S)(td,"caption:left"),(0,ut.S)(cd,"caption:left")},3348:(at,st,ot)=>{"use strict";ot.d(st,{$:()=>cd});var ut=ot(1545),Hl=ot(9435),rc=Object.defineProperty;((at,st)=>{for(var ot in st)rc(at,ot,{get:st[ot],enumerable:!0})})({},{EnterArrowEvent:()=>wc,LeaveArrowEvent:()=>iu,NodeChangedEvent:()=>oc});var sc=class _NodeChangedEvent extends ut.rx{constructor(at,st){super(_NodeChangedEvent.type),this.node=at,this.data=st}};sc.type="node-changed";var oc=sc,_c=class _EnterArrowEvent extends ut.rx{constructor(at,st){super(_EnterArrowEvent.type),this.link=at,this.node=st}};_c.type="enter-arrow";var wc=_c,Sc=class _LeaveArrowEvent extends ut.rx{constructor(at,st){super(_LeaveArrowEvent.type),this.link=at,this.node=st}};Sc.type="leave-arrow";var iu=Sc,su=class extends Hl.B69{constructor(at){void 0===at&&(at=document.createElement("div")),super(),this.isCSS2DObject=!0,this.element=at,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new Hl.I9Y(.5,.5),this.addEventListener("removed",(function(){this.traverse((function(at){at.element instanceof at.element.ownerDocument.defaultView.Element&&null!==at.element.parentNode&&at.element.remove()}))}))}copy(at,st){return super.copy(at,st),this.element=at.element.cloneNode(!0),this.center=at.center,this}},lu=new Hl.Pq0,cu=new Hl.kn4,uu=new Hl.kn4,pu=new Hl.Pq0,mu=new Hl.Pq0,gu=class{constructor(at){void 0===at&&(at={});const st=this;let ot,ut,Hl,rc;const sc={objects:new WeakMap},oc=void 0!==at.element?at.element:document.createElement("div");function hideObject(at){at.isCSS2DObject&&(at.element.style.display="none");for(let st=0,ot=at.children.length;st<ot;st++)hideObject(at.children[st])}function renderObject(at,ot,ut){if(!1!==at.visible){if(at.isCSS2DObject){lu.setFromMatrixPosition(at.matrixWorld),lu.applyMatrix4(uu);const _c=lu.z>=-1&&lu.z<=1&&!0===at.layers.test(ut.layers),wc=at.element;wc.style.display=!0===_c?"":"none",!0===_c&&(at.onBeforeRender(st,ot,ut),wc.style.transform="translate("+-100*at.center.x+"%,"+-100*at.center.y+"%)translate("+(lu.x*Hl+Hl)+"px,"+(-lu.y*rc+rc)+"px)",wc.parentNode!==oc&&oc.appendChild(wc),at.onAfterRender(st,ot,ut));const Sc={distanceToCameraSquared:getDistanceToSquared(ut,at)};sc.objects.set(at,Sc)}for(let st=0,Hl=at.children.length;st<Hl;st++)renderObject(at.children[st],ot,ut)}else hideObject(at)}function getDistanceToSquared(at,st){return pu.setFromMatrixPosition(at.matrixWorld),mu.setFromMatrixPosition(st.matrixWorld),pu.distanceToSquared(mu)}oc.style.overflow="hidden",this.domElement=oc,this.getSize=function(){return{width:ot,height:ut}},this.render=function(at,st){!0===at.matrixWorldAutoUpdate&&at.updateMatrixWorld(),null===st.parent&&!0===st.matrixWorldAutoUpdate&&st.updateMatrixWorld(),cu.copy(st.matrixWorldInverse),uu.multiplyMatrices(st.projectionMatrix,cu),renderObject(at,at,st),function(at){const st=function(at){const st=[];return at.traverseVisible((function(at){at.isCSS2DObject&&st.push(at)})),st}(at).sort((function(at,st){if(at.renderOrder!==st.renderOrder)return st.renderOrder-at.renderOrder;return sc.objects.get(at).distanceToCameraSquared-sc.objects.get(st).distanceToCameraSquared})),ot=st.length;for(let ut=0,Hl=st.length;ut<Hl;ut++)st[ut].element.style.zIndex=ot-ut}(at)},this.setSize=function(at,st){ot=at,ut=st,Hl=ot/2,rc=ut/2,oc.style.width=at+"px",oc.style.height=st+"px"}}},Au=new Hl.Pq0,yu=new Hl.PTz,_u=new Hl.Pq0,xu=class extends Hl.B69{constructor(at){void 0===at&&(at=document.createElement("div")),super(),this.isCSS3DObject=!0,this.element=at,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.addEventListener("removed",(function(){this.traverse((function(at){at.element instanceof at.element.ownerDocument.defaultView.Element&&null!==at.element.parentNode&&at.element.remove()}))}))}copy(at,st){return super.copy(at,st),this.element=at.element.cloneNode(!0),this}},Su=new Hl.kn4,Du=new Hl.kn4,Lu=class{constructor(at){void 0===at&&(at={});const st=this;let ot,ut,Hl,rc;const sc={camera:{style:""},objects:new WeakMap},oc=void 0!==at.element?at.element:document.createElement("div");oc.style.overflow="hidden",this.domElement=oc;const _c=document.createElement("div");_c.style.transformOrigin="0 0",_c.style.pointerEvents="none",oc.appendChild(_c);const wc=document.createElement("div");function epsilon(at){return Math.abs(at)<1e-10?0:at}function getCameraCSSMatrix(at){const st=at.elements;return"matrix3d("+epsilon(st[0])+","+epsilon(-st[1])+","+epsilon(st[2])+","+epsilon(st[3])+","+epsilon(st[4])+","+epsilon(-st[5])+","+epsilon(st[6])+","+epsilon(st[7])+","+epsilon(st[8])+","+epsilon(-st[9])+","+epsilon(st[10])+","+epsilon(st[11])+","+epsilon(st[12])+","+epsilon(-st[13])+","+epsilon(st[14])+","+epsilon(st[15])+")"}function getObjectCSSMatrix(at){const st=at.elements;return"translate(-50%,-50%)"+("matrix3d("+epsilon(st[0])+","+epsilon(st[1])+","+epsilon(st[2])+","+epsilon(st[3])+","+epsilon(-st[4])+","+epsilon(-st[5])+","+epsilon(-st[6])+","+epsilon(-st[7])+","+epsilon(st[8])+","+epsilon(st[9])+","+epsilon(st[10])+","+epsilon(st[11])+","+epsilon(st[12])+","+epsilon(st[13])+","+epsilon(st[14])+","+epsilon(st[15])+")")}function hideObject(at){at.isCSS3DObject&&(at.element.style.display="none");for(let st=0,ot=at.children.length;st<ot;st++)hideObject(at.children[st])}function renderObject(at,ot,ut,Hl){if(!1!==at.visible){if(at.isCSS3DObject){const Hl=!0===at.layers.test(ut.layers),rc=at.element;if(rc.style.display=!0===Hl?"":"none",!0===Hl){let Hl;at.onBeforeRender(st,ot,ut),at.isCSS3DSprite?(Su.copy(ut.matrixWorldInverse),Su.transpose(),0!==at.rotation2D&&Su.multiply(Du.makeRotationZ(at.rotation2D)),at.matrixWorld.decompose(Au,yu,_u),Su.setPosition(Au),Su.scale(_u),Su.elements[3]=0,Su.elements[7]=0,Su.elements[11]=0,Su.elements[15]=1,Hl=getObjectCSSMatrix(Su)):Hl=getObjectCSSMatrix(at.matrixWorld);const oc=sc.objects.get(at);if(void 0===oc||oc.style!==Hl){rc.style.transform=Hl;const st={style:Hl};sc.objects.set(at,st)}rc.parentNode!==wc&&wc.appendChild(rc),at.onAfterRender(st,ot,ut)}}for(let st=0,rc=at.children.length;st<rc;st++)renderObject(at.children[st],ot,ut,Hl)}else hideObject(at)}wc.style.transformStyle="preserve-3d",_c.appendChild(wc),this.getSize=function(){return{width:ot,height:ut}},this.render=function(at,st){const oc=st.projectionMatrix.elements[5]*rc;let Sc,iu;st.view&&st.view.enabled?(_c.style.transform=`translate( ${-st.view.offsetX*(ot/st.view.width)}px, ${-st.view.offsetY*(ut/st.view.height)}px )`,_c.style.transform+=`scale( ${st.view.fullWidth/st.view.width}, ${st.view.fullHeight/st.view.height} )`):_c.style.transform="",!0===at.matrixWorldAutoUpdate&&at.updateMatrixWorld(),null===st.parent&&!0===st.matrixWorldAutoUpdate&&st.updateMatrixWorld(),st.isOrthographicCamera&&(Sc=-(st.right+st.left)/2,iu=(st.top+st.bottom)/2);const su=st.view&&st.view.enabled?st.view.height/st.view.fullHeight:1,lu=st.isOrthographicCamera?`scale( ${su} )scale(`+oc+")translate("+epsilon(Sc)+"px,"+epsilon(iu)+"px)"+getCameraCSSMatrix(st.matrixWorldInverse):`scale( ${su} )translateZ(`+oc+"px)"+getCameraCSSMatrix(st.matrixWorldInverse),cu=(st.isPerspectiveCamera?"perspective("+oc+"px) ":"")+lu+"translate("+Hl+"px,"+rc+"px)";sc.camera.style!==cu&&(wc.style.transform=cu,sc.camera.style=cu),renderObject(at,at,st,lu)},this.setSize=function(at,st){ot=at,ut=st,Hl=ot/2,rc=ut/2,oc.style.width=at+"px",oc.style.height=st+"px",_c.style.width=at+"px",_c.style.height=st+"px",wc.style.width=at+"px",wc.style.height=st+"px"}}},$u="tourLink",hh="__tour-link__",ed={className:"psv-virtual-tour-tooltip",content:'<div class="psv-virtual-tour-loader"><div></div><div></div><div></div></div>'},td={element:()=>{const at=document.createElement("button");return at.className="psv-virtual-tour-arrow",at.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">\n    <path fill-rule="even-odd" fill="currentColor" d="\n        M50,50 m45,0\n        a45,45 0 1,0 -90,0\n        a45,45 0 1,0  90,0\n\n        M50,50 m38,0\n        a38,38 0 0,1 -76,0\n        a38,38 0 0,1  76,0\n\n        M50,50 m30,0\n        a30,30 0 1,0 -60,0\n        a30,30 0 1,0  60,0\n        \n        M50,40 m2.5,-2.5\n        l17.5,17.5\n        a 2.5,2.5 0 0 1 -5,5\n        l-15,-15\n        l-15,15\n        a 2.5,2.5 0 0 1 -5,-5\n        l17.5,-17.5\n        a 3.5,3.5 0 0 1 5,0\n    "/>\n</svg>',at},size:{width:80,height:80}},id="arrow",nd=class extends ut.uj{constructor(at,st){super(at,{className:"psv-virtual-tour-arrows"}),this.plugin=st,this.renderer=this.is3D?new Lu({element:this.container}):new gu({element:this.container}),this.camera=this.is3D?new Hl.ubm(30,1):null,this.scene=new Hl.Z58,this.viewer.addEventListener(ut.AZ.ReadyEvent.type,this,{once:!0}),this.viewer.addEventListener(ut.AZ.PositionUpdatedEvent.type,this),this.viewer.addEventListener(ut.AZ.SizeUpdatedEvent.type,this),this.viewer.addEventListener(ut.AZ.RenderEvent.type,this),this.viewer.addEventListener(ut.AZ.ClickEvent.type,this),this.container.addEventListener("mouseenter",this,!0),this.container.addEventListener("mouseleave",this,!0),this.container.addEventListener("mousemove",this,!0),this.container.addEventListener("contextmenu",(at=>at.preventDefault()))}get is3D(){return this.plugin.is3D}get arrowsPosition(){return this.plugin.config.arrowsPosition}get arrowStyle(){return this.plugin.config.arrowStyle}init(){this.is3D&&(this.gallery=this.viewer.getPlugin("gallery"),this.gallery?.addEventListener("show-gallery",this),this.gallery?.addEventListener("hide-gallery",this))}destroy(){this.viewer.removeEventListener(ut.AZ.ReadyEvent.type,this),this.viewer.removeEventListener(ut.AZ.PositionUpdatedEvent.type,this),this.viewer.removeEventListener(ut.AZ.SizeUpdatedEvent.type,this),this.viewer.removeEventListener(ut.AZ.RenderEvent.type,this),this.viewer.removeEventListener(ut.AZ.ClickEvent.type,this),this.gallery?.removeEventListener("show-gallery",this),this.gallery?.removeEventListener("hide-gallery",this),super.destroy()}handleEvent(at){switch(at.type){case ut.AZ.ReadyEvent.type:case ut.AZ.SizeUpdatedEvent.type:case ut.AZ.PositionUpdatedEvent.type:this.__updateCamera();break;case ut.AZ.RenderEvent.type:this.render();break;case ut.AZ.ClickEvent.type:{if(at.data.rightclick)break;const st=this.__getTargetLink(at.data.target,!0);st&&this.plugin.setCurrentNode(st.nodeId,null,st);break}case"mouseenter":{const st=this.__getTargetLink(ut.Wp.getEventTarget(at));st&&this.plugin.__onEnterArrow(st,at);break}case"mouseleave":{const st=this.__getTargetLink(ut.Wp.getEventTarget(at));st&&this.plugin.__onLeaveArrow(st);break}case"mousemove":this.__getTargetLink(ut.Wp.getEventTarget(at),!0)&&this.plugin.__onHoverArrow(at);break;case"hide-gallery":this.__onToggleGallery(!1);break;case"show-gallery":at.fullscreen||this.__onToggleGallery(!0)}}__updateCamera(){const at=this.viewer.getSize();if(this.renderer.setSize(at.width,at.height),this.is3D){const st=this.viewer.getPosition();st.pitch=Hl.cj9.clamp(st.pitch,-this.arrowsPosition.maxPitch,-this.arrowsPosition.minPitch),this.viewer.dataHelper.sphericalCoordsToVector3(st,this.camera.position,2*at.height).negate(),this.camera.lookAt(0,0,0),this.camera.translateY(at.height/3),this.camera.updateProjectionMatrix()}}render(){if(this.is3D){const at=this.viewer.getPosition(),st=[];let ot=Number.MAX_SAFE_INTEGER;this.scene.children.forEach((Hl=>{const rc=Hl.userData[id];if(rc.conflict){const sc=Math.abs(ut.Wp.getShortestArc(at.yaw,rc.yaw));ot=Math.min(ot,sc),st.push([Hl,sc])}})),st.forEach((at=>{let[st,ut]=at;const Hl=ut!==ot;st.element.style.opacity=Hl?"0.5":null,st.element.style.zIndex=Hl?"-1":null})),this.renderer.render(this.scene,this.camera)}else this.renderer.render(this.scene,this.viewer.renderer.camera)}clear(){this.scene.clear()}__buildArrowElement(at,st){if(st?.image){const at=document.createElement("img");return at.src=st.image,at}if(st?.element)return"function"===typeof st.element?st.element(at):st.element}addLinkArrow(at,st,ot){void 0===ot&&(ot=1);let Hl=this.__buildArrowElement(at,at.arrowStyle);Hl||(Hl=this.__buildArrowElement(at,this.arrowStyle)),Hl[$u]=at;const rc={...this.arrowStyle,...at.arrowStyle};if(Hl.classList.add("psv-virtual-tour-link"),rc.className&&ut.Wp.addClasses(Hl,rc.className),rc.style&&Object.assign(Hl.style,rc.style),this.is3D){Hl.style.width=1.5*rc.size.width+"px",Hl.style.height=1.5*rc.size.height+"px";let at=!1;this.scene.children.forEach((ot=>{const Hl=ot.userData[id];Math.abs(ut.Wp.getShortestArc(Hl.yaw,st.yaw))<this.arrowsPosition.linkOverlapAngle&&(Hl.conflict=!0,at=!0)}));const sc=new xu(Hl);sc.userData[id]={yaw:st.yaw,conflict:at},sc.rotation.set(-Math.PI/2,0,Math.PI-st.yaw),this.viewer.dataHelper.sphericalCoordsToVector3({yaw:st.yaw,pitch:0},sc.position,100*ot),this.scene.add(sc)}else{Hl.style.width=rc.size.width+"px",Hl.style.height=rc.size.height+"px",Hl.style.pointerEvents="auto";const at=new su(Hl);this.viewer.dataHelper.sphericalCoordsToVector3(st,at.position),this.scene.add(at)}}__getTargetLink(at,st){void 0===st&&(st=!1);const ot=st?ut.Wp.getClosest(at,".psv-virtual-tour-link"):at;return ot?ot[$u]:void 0}__onToggleGallery(at){this.container.style.marginBottom=at?this.viewer.container.querySelector(".psv-gallery").offsetHeight+"px":""}},rd=class{constructor(at,st){this.plugin=at,this.viewer=st,this.nodes={}}destroy(){}checkNode(at){if(!at.id)throw new ut.e6("No id given for node");if(!at.panorama)throw new ut.e6(`No panorama provided for node ${at.id}`);if(this.plugin.isGps&&!(at.gps?.length>=2))throw new ut.e6(`No GPS position provided for node ${at.id}`);if(!this.plugin.isGps&&at.markers?.some((at=>at.gps&&!at.position)))throw new ut.e6("Cannot use GPS positioning for markers in manual mode");at.links||(ut.Wp.logWarn(`Node ${at.id} has no links`),at.links=[])}checkLink(at,st){if(!st.nodeId)throw new ut.e6(`Link of node ${at.id} has no target id`);if(st.nodeId===at.id)throw new ut.e6(`Node ${at.id} links to itself`);if(!this.plugin.isGps&&!ut.Wp.isExtendedPosition(st.position))throw new ut.e6(`No position provided for link ${st.nodeId} of node ${at.id}`);if(this.plugin.isGps&&!st.gps)throw new ut.e6(`No GPS position provided for link ${st.nodeId} of node ${at.id}`)}},ad=class extends rd{async loadNode(at){if(this.nodes[at])return this.nodes[at];throw new ut.e6(`Node ${at} not found`)}setNodes(at){if(!at?.length)throw new ut.e6("No nodes provided");const st={},ot={};at.forEach((at=>{if(this.checkNode(at),st[at.id])throw new ut.e6(`Duplicate node ${at.id}`);st[at.id]=at})),at.forEach((at=>{this.__checkLinks(at,st),at.links.forEach((at=>{ot[at.nodeId]=!0}))})),at.forEach((at=>{ot[at.id]||ut.Wp.logWarn(`Node ${at.id} is never linked to`)})),this.nodes=st}updateNode(at){if(!at.id)throw new ut.e6("No id given for node");const st=this.nodes[at.id];if(!st)throw new ut.e6(`Node ${at.id} does not exist`);return Object.assign(st,at),this.checkNode(st),this.__checkLinks(st,this.nodes),st}__checkLinks(at,st){at.links.forEach((ot=>{if(!st[ot.nodeId])throw new ut.e6(`Target node ${ot.nodeId} of node ${at.id} does not exists`);ot.gps=ot.gps||st[ot.nodeId].gps,this.checkLink(at,ot)}))}},sd=class extends rd{constructor(at,st){if(super(at,st),!at.config.getNode)throw new ut.e6("Missing getNode() option.");this.nodeResolver=at.config.getNode}async loadNode(at){if(this.nodes[at])return this.nodes[at];{const st=await this.nodeResolver(at);return this.checkNode(st),st.links.forEach((at=>{this.checkLink(st,at)})),this.nodes[at]=st,st}}clearCache(){this.nodes={}}};function gpsToSpherical(at,st){const ot=gpsDegToRad(at),Hl=gpsDegToRad(st),rc=at[2]??0,sc=st[2]??0;let oc=0;rc!==sc&&(oc=Math.atan((sc-rc)/function(at,st){return 6371e3*ut.Wp.greatArcDistance(at,st)}(ot,Hl)));const _c=function(at,st){const[ot,ut]=at,[Hl,rc]=st,sc=Math.sin(Hl-ot)*Math.cos(rc),oc=Math.cos(ut)*Math.sin(rc)-Math.sin(ut)*Math.cos(rc)*Math.cos(Hl-ot);return Math.atan2(sc,oc)}(ot,Hl);return{yaw:_c,pitch:oc}}function gpsDegToRad(at){return[Hl.cj9.degToRad(at[0]),Hl.cj9.degToRad(at[1])]}var od=ut.Wp.getConfigParser({dataMode:"client",positionMode:"manual",renderMode:"3d",nodes:null,getNode:null,startNodeId:null,preload:!1,transitionOptions:{showLoader:!0,speed:"20rpm",effect:"fade",rotation:!0},linksOnCompass:!0,showLinkTooltip:!0,getLinkTooltip:null,arrowStyle:td,arrowsPosition:{minPitch:.3,maxPitch:Math.PI/2,linkOverlapAngle:Math.PI/4,linkPitchOffset:-.1},map:null},{dataMode(at){if("client"!==at&&"server"!==at)throw new ut.e6("VirtualTourPlugin: invalid dataMode");return at},positionMode(at){if("gps"!==at&&"manual"!==at)throw new ut.e6("VirtualTourPlugin: invalid positionMode");return at},renderMode(at){if("3d"!==at&&"2d"!==at)throw new ut.e6("VirtualTourPlugin: invalid renderMode");return at},arrowsPosition(at,st){let{defValue:ot}=st;return{...ot,...at}},arrowStyle(at,st){let{defValue:ot}=st;return{...ot,...at}},map(at,st){let{rawConfig:ot}=st;if(at){if("server"===ot.dataMode)return ut.Wp.logWarn("VirtualTourPlugin: The map cannot be used in server side mode"),null;if(!at.imageUrl)return ut.Wp.logWarn('VirtualTourPlugin: configuring the map requires at least "imageUrl"'),null}return at}}),ld=class _VirtualTourPlugin extends ut.TL{constructor(at,st){super(at,st),this.state={currentNode:null,currentTooltip:null,loadingNode:null,preload:{}},this.arrowsRenderer=new nd(this.viewer,this)}get is3D(){return"3d"===this.config.renderMode}get isServerSide(){return"server"===this.config.dataMode}get isGps(){return"gps"===this.config.positionMode}static withConfig(at){return[_VirtualTourPlugin,at]}init(){super.init(),this.arrowsRenderer.init(),ut.Wp.checkStylesheet(this.viewer.container,"virtual-tour-plugin"),this.markers=this.viewer.getPlugin("markers"),this.compass=this.viewer.getPlugin("compass"),this.markers?.config.markers&&(ut.Wp.logWarn("No default markers can be configured on the MarkersPlugin when using the VirtualTourPlugin. Consider defining `markers` on each tour node."),delete this.markers.config.markers),this.isGps&&(this.plan=this.viewer.getPlugin("plan")),this.isServerSide||(this.gallery=this.viewer.getPlugin("gallery"),this.map=this.viewer.getPlugin("map"),this.config.map&&!this.map&&ut.Wp.logWarn("The map is configured on the VirtualTourPlugin but the MapPlugin is not loaded.")),this.datasource=this.isServerSide?new sd(this,this.viewer):new ad(this,this.viewer),this.map&&(this.map.addEventListener("select-hotspot",this),this.map.setImage(this.config.map.imageUrl)),this.plan?.addEventListener("select-hotspot",this),this.isServerSide?this.config.startNodeId&&this.setCurrentNode(this.config.startNodeId):this.config.nodes&&(this.setNodes(this.config.nodes,this.config.startNodeId),delete this.config.nodes)}destroy(){this.map?.removeEventListener("select-hotspot",this),this.plan?.removeEventListener("select-hotspot",this),this.datasource.destroy(),this.arrowsRenderer.destroy(),delete this.datasource,delete this.markers,delete this.compass,delete this.gallery,delete this.arrowsRenderer,super.destroy()}handleEvent(at){if(at instanceof ut.AZ.ClickEvent){const st=at.data.objects.find((at=>at.userData[$u]))?.userData[$u];st&&this.setCurrentNode(st.nodeId,null,st)}else if("select-hotspot"===at.type){const st=at.hotspotId;st.startsWith(hh)&&this.setCurrentNode(st.substring(13))}}getCurrentNode(){return this.state.currentNode}setNodes(at,st){if(this.isServerSide)throw new ut.e6("Cannot set nodes in server side mode");this.__hideTooltip(),this.state.currentNode=null,this.datasource.setNodes(at),st?this.datasource.nodes[st]||(st=at[0].id,ut.Wp.logWarn(`startNodeId not found is provided nodes, resetted to ${st}`)):st=at[0].id,this.setCurrentNode(st),this.__setGalleryItems(),this.__setMapHotspots(),this.__setPlanHotspots()}setCurrentNode(at,st,ot){if(at===this.state.currentNode?.id&&!st?.forceUpdate)return Promise.resolve(!0);st?.forceUpdate&&this.isServerSide&&this.datasource.clearCache(),this.viewer.hideError(),this.state.loadingNode=at;const Hl=this.state.currentNode,rc=Hl&&ot?this.__getLinkPosition(Hl,ot):null;return Promise.resolve(this.state.preload[at]).then((()=>{if(this.state.loadingNode!==at)throw ut.Wp.getAbortError();return this.datasource.loadNode(at)})).then((sc=>{if(this.state.loadingNode!==at)throw ut.Wp.getAbortError();const oc={...od.defaults.transitionOptions,rotateTo:rc,zoomTo:rc?this.viewer.getZoomLevel():null,..."function"===typeof this.config.transitionOptions?this.config.transitionOptions(sc,Hl,ot):this.config.transitionOptions,...st};return oc.effect||(oc.effect="none"),this.viewer.panel.hide("description"),this.__hideTooltip(),this.arrowsRenderer.clear(),this.gallery?.config.hideOnClick&&this.gallery.hide(),this.map?.config.minimizeOnHotspotClick&&this.map.minimize(),this.plan?.config.minimizeOnHotspotClick&&this.plan.minimize(),oc.rotation&&"none"===oc.effect?this.viewer.animate({...oc.rotateTo,zoom:oc.zoomTo,speed:oc.speed}).then((()=>[sc,oc])):Promise.resolve([sc,oc])})).then((st=>{let[ot,Hl]=st;if(this.state.loadingNode!==at)throw ut.Wp.getAbortError();return this.markers?.clearMarkers(),this.config.linksOnCompass&&this.compass?.clearHotspots(),this.viewer.setPanorama(ot.panorama,{caption:ot.caption,description:ot.description,panoData:ot.panoData,sphereCorrection:ot.sphereCorrection,showLoader:Hl.showLoader,position:Hl.rotateTo,zoom:Hl.zoomTo,transition:"none"!==Hl.effect&&{effect:Hl.effect,rotation:Hl.rotation,speed:Hl.speed}}).then((at=>{if(!at)throw ut.Wp.getAbortError();return ot}))})).then((st=>{if(this.state.loadingNode!==at)throw ut.Wp.getAbortError();return this.state.currentNode=st,this.map&&this.map.setCenter(this.__getNodeMapPosition(st)??this.map.config.center),this.plan?.setCoordinates(st.gps),this.__addNodeMarkers(st),this.__renderLinks(st),this.__preload(st),this.state.loadingNode=null,this.dispatchEvent(new oc(st,{fromNode:Hl,fromLink:ot,fromLinkPosition:rc})),this.viewer.resetIdleTimer(),!0})).catch((at=>{if(ut.Wp.isAbortError(at))return!1;throw this.viewer.showError(this.viewer.config.lang.loadError),this.viewer.loader.hide(),this.viewer.navbar.setCaption(""),this.state.loadingNode=null,at}))}async gotoLink(at,st){void 0===st&&(st="8rpm");const ot=this.getLinkPosition(at);st?await this.viewer.animate({...ot,speed:st}):this.viewer.rotate(ot)}getLinkPosition(at){const st=this.state.currentNode?.links.find((st=>st.nodeId===at));if(!st)throw new ut.e6(`Cannot find link "${at}"`);return this.__getLinkPosition(this.state.currentNode,st)}updateNode(at){if(this.isServerSide)throw new ut.e6("Cannot update node in server side mode");const st=this.datasource.updateNode(at);if((at.name||at.thumbnail||at.panorama)&&this.__setGalleryItems(),(at.name||at.gps||at.map)&&this.__setMapHotspots(),(at.name||at.gps||at.plan)&&this.__setPlanHotspots(),this.state.currentNode?.id===st.id){if(this.__hideTooltip(),at.panorama||at.panoData||at.sphereCorrection)return void this.setCurrentNode(st.id,{forceUpdate:!0});at.caption&&this.viewer.setOption("caption",st.caption),at.description&&this.viewer.setOption("description",st.description),(at.links||at.gps)&&this.__renderLinks(st),at.gps&&this.plan?.setCoordinates(st.gps),(at.map||at.gps)&&this.map?.setCenter(this.__getNodeMapPosition(st)),(at.markers||at.gps)&&this.__addNodeMarkers(st)}}__setGalleryItems(){this.gallery&&this.gallery.setItems(Object.values(this.datasource.nodes).filter((at=>!1!==at.showInGallery)).map((at=>({id:at.id,panorama:at.panorama,name:at.name,thumbnail:at.thumbnail}))),(at=>{this.setCurrentNode(at)}))}__setMapHotspots(){this.map&&this.map.setHotspots(Object.values(this.datasource.nodes).filter((at=>!1!==at.map)).map((at=>({tooltip:at.name,...at.map||{},...this.__getNodeMapPosition(at),id:hh+at.id}))))}__setPlanHotspots(){this.plan&&this.plan.setHotspots(Object.values(this.datasource.nodes).filter((at=>!1!==at.plan)).map((at=>({tooltip:at.name,...at.plan||{},coordinates:at.gps,id:hh+at.id}))))}__renderLinks(at){this.arrowsRenderer.clear();const st=[];at.links.forEach((ot=>{const ut=this.__getLinkPosition(at,ot);ut.yaw+=ot.linkOffset?.yaw??0,ut.pitch+=ot.linkOffset?.pitch??0,this.isGps&&!this.is3D&&(ut.pitch+=this.config.arrowsPosition.linkPitchOffset),st.push(ut),this.arrowsRenderer.addLinkArrow(ot,ut,ot.linkOffset?.depth)})),this.arrowsRenderer.render(),this.config.linksOnCompass&&this.compass?.setHotspots(st)}__getLinkPosition(at,st){return this.isGps?gpsToSpherical(at.gps,st.gps):this.viewer.dataHelper.cleanPosition(st.position)}async __getTooltipContent(at){const st=await this.datasource.loadNode(at.nodeId),ot=[];(st.name||st.thumbnail||st.caption)&&(st.name&&ot.push(`<h3>${st.name}</h3>`),st.thumbnail&&ot.push(`<img src="${st.thumbnail}">`),st.caption&&ot.push(`<p>${st.caption}</p>`));let ut=ot.join("");return this.config.getLinkTooltip&&(ut=this.config.getLinkTooltip(ut,at,st)),ut}__onEnterArrow(at,st){const ot=ut.Wp.getPosition(this.viewer.container),Hl={x:st.clientX-ot.x,y:st.clientY-ot.y};this.config.showLinkTooltip&&(this.state.currentTooltip=this.viewer.createTooltip({...ed,left:Hl.x,top:Hl.y,box:{width:20,height:20}}),this.__getTooltipContent(at).then((at=>{at?this.state.currentTooltip.update(at):this.__hideTooltip()}))),this.map?.setActiveHotspot(hh+at.nodeId),this.plan?.setActiveHotspot(hh+at.nodeId),this.dispatchEvent(new wc(at,this.state.currentNode))}__onHoverArrow(at){const st=ut.Wp.getPosition(this.viewer.container),ot={x:at.clientX-st.x,y:at.clientY-st.y};this.state.currentTooltip?.move({left:ot.x,top:ot.y})}__onLeaveArrow(at){this.__hideTooltip(),this.map?.setActiveHotspot(null),this.plan?.setActiveHotspot(null),this.dispatchEvent(new iu(at,this.state.currentNode))}__hideTooltip(){this.state.currentTooltip?.hide(),this.state.currentTooltip=null}__preload(at){this.config.preload&&(this.state.preload[at.id]=!0,this.state.currentNode.links.filter((at=>!this.state.preload[at.nodeId])).filter((at=>"function"!==typeof this.config.preload||this.config.preload(this.state.currentNode,at))).forEach((at=>{this.state.preload[at.nodeId]=this.datasource.loadNode(at.nodeId).then((at=>this.viewer.textureLoader.preloadPanorama(at.panorama))).then((()=>{this.state.preload[at.nodeId]=!0})).catch((()=>{delete this.state.preload[at.nodeId]}))})))}__addNodeMarkers(at){at.markers&&(this.markers?this.markers.setMarkers(at.markers.map((st=>(st.gps&&this.isGps&&(st.position=gpsToSpherical(at.gps,st.gps),st.data?.map&&Object.assign(st.data.map,this.__getGpsMapPosition(st.gps)),st.data?.plan&&(st.data.plan.coordinates=st.gps)),st)))):ut.Wp.logWarn(`Node ${at.id} markers ignored because the plugin is not loaded.`))}__getNodeMapPosition(at){const st=this.__getGpsMapPosition(at.gps);return st||(at.map?{x:at.map.x,y:at.map.y}:null)}__getGpsMapPosition(at){const st=this.config.map;return this.isGps&&st&&st.extent&&st.size?{x:Hl.cj9.mapLinear(at[0],st.extent[0],st.extent[2],0,st.size.width),y:Hl.cj9.mapLinear(at[1],st.extent[1],st.extent[3],0,st.size.height)}:null}};ld.id="virtual-tour",ld.VERSION="5.14.0",ld.configParser=od,ld.readonlyOptions=Object.keys(od.defaults);var cd=ld},3336:(at,st,ot)=>{"use strict";ot.d(st,{Rq:()=>decompressSync});var ut=Uint8Array,Hl=Uint16Array,rc=Int32Array,sc=new ut([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),oc=new ut([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),_c=new ut([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),freb=function(at,st){for(var ot=new Hl(31),ut=0;ut<31;++ut)ot[ut]=st+=1<<at[ut-1];var sc=new rc(ot[30]);for(ut=1;ut<30;++ut)for(var oc=ot[ut];oc<ot[ut+1];++oc)sc[oc]=oc-ot[ut]<<5|ut;return{b:ot,r:sc}},wc=freb(sc,2),Sc=wc.b,iu=wc.r;Sc[28]=258,iu[258]=28;for(var su=freb(oc,0),lu=su.b,cu=(su.r,new Hl(32768)),uu=0;uu<32768;++uu){var pu=(43690&uu)>>1|(21845&uu)<<1;pu=(61680&(pu=(52428&pu)>>2|(13107&pu)<<2))>>4|(3855&pu)<<4,cu[uu]=((65280&pu)>>8|(255&pu)<<8)>>1}var hMap=function(at,st,ot){for(var ut=at.length,rc=0,sc=new Hl(st);rc<ut;++rc)at[rc]&&++sc[at[rc]-1];var oc,_c=new Hl(st);for(rc=1;rc<st;++rc)_c[rc]=_c[rc-1]+sc[rc-1]<<1;if(ot){oc=new Hl(1<<st);var wc=15-st;for(rc=0;rc<ut;++rc)if(at[rc])for(var Sc=rc<<4|at[rc],iu=st-at[rc],su=_c[at[rc]-1]++<<iu,lu=su|(1<<iu)-1;su<=lu;++su)oc[cu[su]>>wc]=Sc}else for(oc=new Hl(ut),rc=0;rc<ut;++rc)at[rc]&&(oc[rc]=cu[_c[at[rc]-1]++]>>15-at[rc]);return oc},mu=new ut(288);for(uu=0;uu<144;++uu)mu[uu]=8;for(uu=144;uu<256;++uu)mu[uu]=9;for(uu=256;uu<280;++uu)mu[uu]=7;for(uu=280;uu<288;++uu)mu[uu]=8;var gu=new ut(32);for(uu=0;uu<32;++uu)gu[uu]=5;var Au=hMap(mu,9,1),yu=hMap(gu,5,1),max=function(at){for(var st=at[0],ot=1;ot<at.length;++ot)at[ot]>st&&(st=at[ot]);return st},bits=function(at,st,ot){var ut=st/8|0;return(at[ut]|at[ut+1]<<8)>>(7&st)&ot},bits16=function(at,st){var ot=st/8|0;return(at[ot]|at[ot+1]<<8|at[ot+2]<<16)>>(7&st)},shft=function(at){return(at+7)/8|0},slc=function(at,st,ot){return(null==st||st<0)&&(st=0),(null==ot||ot>at.length)&&(ot=at.length),new ut(at.subarray(st,ot))},_u=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],err=function(at,st,ot){var ut=new Error(st||_u[at]);if(ut.code=at,Error.captureStackTrace&&Error.captureStackTrace(ut,err),!ot)throw ut;return ut},inflt=function(at,st,ot,Hl){var rc=at.length,wc=Hl?Hl.length:0;if(!rc||st.f&&!st.l)return ot||new ut(0);var iu=!ot,su=iu||2!=st.i,cu=st.i;iu&&(ot=new ut(3*rc));var cbuf=function(at){var st=ot.length;if(at>st){var Hl=new ut(Math.max(2*st,at));Hl.set(ot),ot=Hl}},uu=st.f||0,pu=st.p||0,mu=st.b||0,gu=st.l,_u=st.d,xu=st.m,Su=st.n,Du=8*rc;do{if(!gu){uu=bits(at,pu,1);var Lu=bits(at,pu+1,3);if(pu+=3,!Lu){var $u=at[(cd=shft(pu)+4)-4]|at[cd-3]<<8,hh=cd+$u;if(hh>rc){cu&&err(0);break}su&&cbuf(mu+$u),ot.set(at.subarray(cd,hh),mu),st.b=mu+=$u,st.p=pu=8*hh,st.f=uu;continue}if(1==Lu)gu=Au,_u=yu,xu=9,Su=5;else if(2==Lu){var ed=bits(at,pu,31)+257,td=bits(at,pu+10,15)+4,id=ed+bits(at,pu+5,31)+1;pu+=14;for(var nd=new ut(id),rd=new ut(19),ad=0;ad<td;++ad)rd[_c[ad]]=bits(at,pu+3*ad,7);pu+=3*td;var sd=max(rd),od=(1<<sd)-1,ld=hMap(rd,sd,1);for(ad=0;ad<id;){var cd,ud=ld[bits(at,pu,od)];if(pu+=15&ud,(cd=ud>>4)<16)nd[ad++]=cd;else{var hd=0,dd=0;for(16==cd?(dd=3+bits(at,pu,3),pu+=2,hd=nd[ad-1]):17==cd?(dd=3+bits(at,pu,7),pu+=3):18==cd&&(dd=11+bits(at,pu,127),pu+=7);dd--;)nd[ad++]=hd}}var pd=nd.subarray(0,ed),md=nd.subarray(ed);xu=max(pd),Su=max(md),gu=hMap(pd,xu,1),_u=hMap(md,Su,1)}else err(1);if(pu>Du){cu&&err(0);break}}su&&cbuf(mu+131072);for(var gd=(1<<xu)-1,fd=(1<<Su)-1,Ad=pu;;Ad=pu){var yd=(hd=gu[bits16(at,pu)&gd])>>4;if((pu+=15&hd)>Du){cu&&err(0);break}if(hd||err(2),yd<256)ot[mu++]=yd;else{if(256==yd){Ad=pu,gu=null;break}var vd=yd-254;if(yd>264){var _d=sc[ad=yd-257];vd=bits(at,pu,(1<<_d)-1)+Sc[ad],pu+=_d}var xd=_u[bits16(at,pu)&fd],bd=xd>>4;xd||err(3),pu+=15&xd;md=lu[bd];if(bd>3){_d=oc[bd];md+=bits16(at,pu)&(1<<_d)-1,pu+=_d}if(pu>Du){cu&&err(0);break}su&&cbuf(mu+131072);var wd=mu+vd;if(mu<md){var Ed=wc-md,Md=Math.min(md,wd);for(Ed+mu<0&&err(3);mu<Md;++mu)ot[mu]=Hl[Ed+mu]}for(;mu<wd;++mu)ot[mu]=ot[mu-md]}}st.l=gu,st.p=Ad,st.b=mu,st.f=uu,gu&&(uu=1,st.m=xu,st.d=_u,st.n=Su)}while(!uu);return mu!=ot.length&&iu?slc(ot,0,mu):ot.subarray(0,mu)},xu=new ut(0),gzs=function(at){31==at[0]&&139==at[1]&&8==at[2]||err(6,"invalid gzip data");var st=at[3],ot=10;4&st&&(ot+=2+(at[10]|at[11]<<8));for(var ut=(st>>3&1)+(st>>4&1);ut>0;ut-=!at[ot++]);return ot+(2&st)},gzl=function(at){var st=at.length;return(at[st-4]|at[st-3]<<8|at[st-2]<<16|at[st-1]<<24)>>>0},zls=function(at,st){return(8!=(15&at[0])||at[0]>>4>7||(at[0]<<8|at[1])%31)&&err(6,"invalid zlib data"),(at[1]>>5&1)==+!st&&err(6,"invalid zlib data: "+(32&at[1]?"need":"unexpected")+" dictionary"),2+(at[1]>>3&4)};function inflateSync(at,st){return inflt(at,{i:2},st&&st.out,st&&st.dictionary)}function gunzipSync(at,st){var ot=gzs(at);return ot+8>at.length&&err(6,"invalid gzip data"),inflt(at.subarray(ot,-8),{i:2},st&&st.out||new ut(gzl(at)),st&&st.dictionary)}function unzlibSync(at,st){return inflt(at.subarray(zls(at,st&&st.dictionary),-4),{i:2},st&&st.out,st&&st.dictionary)}function decompressSync(at,st){return 31==at[0]&&139==at[1]&&8==at[2]?gunzipSync(at,st):8!=(15&at[0])||at[0]>>4>7||(at[0]<<8|at[1])%31?inflateSync(at,st):unzlibSync(at,st)}var Su="undefined"!=typeof TextDecoder&&new TextDecoder;try{Su.decode(xu,{stream:!0})}catch(Du){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout},2614:function(at){at.exports=function(){"use strict";function createCommonjsModule(at,st){return at(st={exports:{}},st.exports),st.exports}var at=createCommonjsModule((function(at){var st=at.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=st)})),st=createCommonjsModule((function(at){var st=at.exports={version:"2.6.5"};"number"==typeof __e&&(__e=st)})),ot=(st.version,function(at){return"object"===typeof at?null!==at:"function"===typeof at}),_anObject=function(at){if(!ot(at))throw TypeError(at+" is not an object!");return at},_fails=function(at){try{return!!at()}catch(st){return!0}},ut=!_fails((function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})),Hl=at.document,rc=ot(Hl)&&ot(Hl.createElement),_domCreate=function(at){return rc?Hl.createElement(at):{}},sc=!ut&&!_fails((function(){return 7!=Object.defineProperty(_domCreate("div"),"a",{get:function(){return 7}}).a})),_toPrimitive=function(at,st){if(!ot(at))return at;var ut,Hl;if(st&&"function"==typeof(ut=at.toString)&&!ot(Hl=ut.call(at)))return Hl;if("function"==typeof(ut=at.valueOf)&&!ot(Hl=ut.call(at)))return Hl;if(!st&&"function"==typeof(ut=at.toString)&&!ot(Hl=ut.call(at)))return Hl;throw TypeError("Can't convert object to primitive value")},oc=Object.defineProperty,_c={f:ut?Object.defineProperty:function(at,st,ot){if(_anObject(at),st=_toPrimitive(st,!0),_anObject(ot),sc)try{return oc(at,st,ot)}catch(ut){}if("get"in ot||"set"in ot)throw TypeError("Accessors not supported!");return"value"in ot&&(at[st]=ot.value),at}},_propertyDesc=function(at,st){return{enumerable:!(1&at),configurable:!(2&at),writable:!(4&at),value:st}},wc=ut?function(at,st,ot){return _c.f(at,st,_propertyDesc(1,ot))}:function(at,st,ot){return at[st]=ot,at},Sc={}.hasOwnProperty,_has=function(at,st){return Sc.call(at,st)},iu=0,su=Math.random(),_uid=function(at){return"Symbol(".concat(void 0===at?"":at,")_",(++iu+su).toString(36))},lu=!1,cu=createCommonjsModule((function(ot){var ut="__core-js_shared__",Hl=at[ut]||(at[ut]={});(ot.exports=function(at,st){return Hl[at]||(Hl[at]=void 0!==st?st:{})})("versions",[]).push({version:st.version,mode:lu?"pure":"global",copyright:"\xa9 2019 Denis Pushkarev (zloirock.ru)"})})),uu=cu("native-function-to-string",Function.toString),pu=createCommonjsModule((function(ot){var ut=_uid("src"),Hl="toString",rc=(""+uu).split(Hl);st.inspectSource=function(at){return uu.call(at)},(ot.exports=function(st,ot,Hl,sc){var oc="function"==typeof Hl;oc&&(_has(Hl,"name")||wc(Hl,"name",ot)),st[ot]!==Hl&&(oc&&(_has(Hl,ut)||wc(Hl,ut,st[ot]?""+st[ot]:rc.join(String(ot)))),st===at?st[ot]=Hl:sc?st[ot]?st[ot]=Hl:wc(st,ot,Hl):(delete st[ot],wc(st,ot,Hl)))})(Function.prototype,Hl,(function(){return"function"==typeof this&&this[ut]||uu.call(this)}))})),_aFunction=function(at){if("function"!=typeof at)throw TypeError(at+" is not a function!");return at},_ctx=function(at,st,ot){if(_aFunction(at),void 0===st)return at;switch(ot){case 1:return function(ot){return at.call(st,ot)};case 2:return function(ot,ut){return at.call(st,ot,ut)};case 3:return function(ot,ut,Hl){return at.call(st,ot,ut,Hl)}}return function(){return at.apply(st,arguments)}},mu="prototype",$export=function(ot,ut,Hl){var rc,sc,oc,_c,Sc=ot&$export.F,iu=ot&$export.G,su=ot&$export.S,lu=ot&$export.P,cu=ot&$export.B,uu=iu?at:su?at[ut]||(at[ut]={}):(at[ut]||{})[mu],gu=iu?st:st[ut]||(st[ut]={}),Au=gu[mu]||(gu[mu]={});for(rc in iu&&(Hl=ut),Hl)oc=((sc=!Sc&&uu&&void 0!==uu[rc])?uu:Hl)[rc],_c=cu&&sc?_ctx(oc,at):lu&&"function"==typeof oc?_ctx(Function.call,oc):oc,uu&&pu(uu,rc,oc,ot&$export.U),gu[rc]!=oc&&wc(gu,rc,_c),lu&&Au[rc]!=oc&&(Au[rc]=oc)};at.core=st,$export.F=1,$export.G=2,$export.S=4,$export.P=8,$export.B=16,$export.W=32,$export.U=64,$export.R=128;var gu,Au=$export,yu=Math.ceil,_u=Math.floor,_toInteger=function(at){return isNaN(at=+at)?0:(at>0?_u:yu)(at)},_defined=function(at){if(void 0==at)throw TypeError("Can't call method on  "+at);return at},xu=(gu=!1,function(at,st){var ot,ut,Hl=String(_defined(at)),rc=_toInteger(st),sc=Hl.length;return rc<0||rc>=sc?gu?"":void 0:(ot=Hl.charCodeAt(rc))<55296||ot>56319||rc+1===sc||(ut=Hl.charCodeAt(rc+1))<56320||ut>57343?gu?Hl.charAt(rc):ot:gu?Hl.slice(rc,rc+2):ut-56320+(ot-55296<<10)+65536});Au(Au.P,"String",{codePointAt:function(at){return xu(this,at)}}),st.String.codePointAt;var Su=Math.max,Du=Math.min,_toAbsoluteIndex=function(at,st){return(at=_toInteger(at))<0?Su(at+st,0):Du(at,st)},Lu=String.fromCharCode,$u=String.fromCodePoint;Au(Au.S+Au.F*(!!$u&&1!=$u.length),"String",{fromCodePoint:function(at){for(var st,ot=arguments,ut=[],Hl=arguments.length,rc=0;Hl>rc;){if(st=+ot[rc++],_toAbsoluteIndex(st,1114111)!==st)throw RangeError(st+" is not a valid code point");ut.push(st<65536?Lu(st):Lu(55296+((st-=65536)>>10),st%1024+56320))}return ut.join("")}}),st.String.fromCodePoint;var hh,ed,td,id,nd,rd,ad,sd,od,ld,cd,ud,hd,dd,pd={Space_Separator:/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,ID_Start:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,ID_Continue:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/},md={isSpaceSeparator:function(at){return"string"===typeof at&&pd.Space_Separator.test(at)},isIdStartChar:function(at){return"string"===typeof at&&(at>="a"&&at<="z"||at>="A"&&at<="Z"||"$"===at||"_"===at||pd.ID_Start.test(at))},isIdContinueChar:function(at){return"string"===typeof at&&(at>="a"&&at<="z"||at>="A"&&at<="Z"||at>="0"&&at<="9"||"$"===at||"_"===at||"\u200c"===at||"\u200d"===at||pd.ID_Continue.test(at))},isDigit:function(at){return"string"===typeof at&&/[0-9]/.test(at)},isHexDigit:function(at){return"string"===typeof at&&/[0-9A-Fa-f]/.test(at)}},parse=function(at,st){hh=String(at),ed="start",td=[],id=0,nd=1,rd=0,ad=void 0,sd=void 0,od=void 0;do{ad=lex(),fd[ed]()}while("eof"!==ad.type);return"function"===typeof st?internalize({"":od},"",st):od};function internalize(at,st,ot){var ut=at[st];if(null!=ut&&"object"===typeof ut)if(Array.isArray(ut))for(var Hl=0;Hl<ut.length;Hl++){var rc=String(Hl),sc=internalize(ut,rc,ot);void 0===sc?delete ut[rc]:Object.defineProperty(ut,rc,{value:sc,writable:!0,enumerable:!0,configurable:!0})}else for(var oc in ut){var _c=internalize(ut,oc,ot);void 0===_c?delete ut[oc]:Object.defineProperty(ut,oc,{value:_c,writable:!0,enumerable:!0,configurable:!0})}return ot.call(at,st,ut)}function lex(){for(ld="default",cd="",ud=!1,hd=1;;){dd=peek();var at=gd[ld]();if(at)return at}}function peek(){if(hh[id])return String.fromCodePoint(hh.codePointAt(id))}function read(){var at=peek();return"\n"===at?(nd++,rd=0):at?rd+=at.length:rd++,at&&(id+=at.length),at}var gd={default:function(){switch(dd){case"\t":case"\v":case"\f":case" ":case"\xa0":case"\ufeff":case"\n":case"\r":case"\u2028":case"\u2029":return void read();case"/":return read(),void(ld="comment");case void 0:return read(),newToken("eof")}if(!md.isSpaceSeparator(dd))return gd[ed]();read()},comment:function(){switch(dd){case"*":return read(),void(ld="multiLineComment");case"/":return read(),void(ld="singleLineComment")}throw invalidChar(read())},multiLineComment:function(){switch(dd){case"*":return read(),void(ld="multiLineCommentAsterisk");case void 0:throw invalidChar(read())}read()},multiLineCommentAsterisk:function(){switch(dd){case"*":return void read();case"/":return read(),void(ld="default");case void 0:throw invalidChar(read())}read(),ld="multiLineComment"},singleLineComment:function(){switch(dd){case"\n":case"\r":case"\u2028":case"\u2029":return read(),void(ld="default");case void 0:return read(),newToken("eof")}read()},value:function(){switch(dd){case"{":case"[":return newToken("punctuator",read());case"n":return read(),literal("ull"),newToken("null",null);case"t":return read(),literal("rue"),newToken("boolean",!0);case"f":return read(),literal("alse"),newToken("boolean",!1);case"-":case"+":return"-"===read()&&(hd=-1),void(ld="sign");case".":return cd=read(),void(ld="decimalPointLeading");case"0":return cd=read(),void(ld="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return cd=read(),void(ld="decimalInteger");case"I":return read(),literal("nfinity"),newToken("numeric",1/0);case"N":return read(),literal("aN"),newToken("numeric",NaN);case'"':case"'":return ud='"'===read(),cd="",void(ld="string")}throw invalidChar(read())},identifierNameStartEscape:function(){if("u"!==dd)throw invalidChar(read());read();var at=unicodeEscape();switch(at){case"$":case"_":break;default:if(!md.isIdStartChar(at))throw invalidIdentifier()}cd+=at,ld="identifierName"},identifierName:function(){switch(dd){case"$":case"_":case"\u200c":case"\u200d":return void(cd+=read());case"\\":return read(),void(ld="identifierNameEscape")}if(!md.isIdContinueChar(dd))return newToken("identifier",cd);cd+=read()},identifierNameEscape:function(){if("u"!==dd)throw invalidChar(read());read();var at=unicodeEscape();switch(at){case"$":case"_":case"\u200c":case"\u200d":break;default:if(!md.isIdContinueChar(at))throw invalidIdentifier()}cd+=at,ld="identifierName"},sign:function(){switch(dd){case".":return cd=read(),void(ld="decimalPointLeading");case"0":return cd=read(),void(ld="zero");case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":return cd=read(),void(ld="decimalInteger");case"I":return read(),literal("nfinity"),newToken("numeric",hd*(1/0));case"N":return read(),literal("aN"),newToken("numeric",NaN)}throw invalidChar(read())},zero:function(){switch(dd){case".":return cd+=read(),void(ld="decimalPoint");case"e":case"E":return cd+=read(),void(ld="decimalExponent");case"x":case"X":return cd+=read(),void(ld="hexadecimal")}return newToken("numeric",0*hd)},decimalInteger:function(){switch(dd){case".":return cd+=read(),void(ld="decimalPoint");case"e":case"E":return cd+=read(),void(ld="decimalExponent")}if(!md.isDigit(dd))return newToken("numeric",hd*Number(cd));cd+=read()},decimalPointLeading:function(){if(md.isDigit(dd))return cd+=read(),void(ld="decimalFraction");throw invalidChar(read())},decimalPoint:function(){switch(dd){case"e":case"E":return cd+=read(),void(ld="decimalExponent")}return md.isDigit(dd)?(cd+=read(),void(ld="decimalFraction")):newToken("numeric",hd*Number(cd))},decimalFraction:function(){switch(dd){case"e":case"E":return cd+=read(),void(ld="decimalExponent")}if(!md.isDigit(dd))return newToken("numeric",hd*Number(cd));cd+=read()},decimalExponent:function(){switch(dd){case"+":case"-":return cd+=read(),void(ld="decimalExponentSign")}if(md.isDigit(dd))return cd+=read(),void(ld="decimalExponentInteger");throw invalidChar(read())},decimalExponentSign:function(){if(md.isDigit(dd))return cd+=read(),void(ld="decimalExponentInteger");throw invalidChar(read())},decimalExponentInteger:function(){if(!md.isDigit(dd))return newToken("numeric",hd*Number(cd));cd+=read()},hexadecimal:function(){if(md.isHexDigit(dd))return cd+=read(),void(ld="hexadecimalInteger");throw invalidChar(read())},hexadecimalInteger:function(){if(!md.isHexDigit(dd))return newToken("numeric",hd*Number(cd));cd+=read()},string:function(){switch(dd){case"\\":return read(),void(cd+=escape());case'"':return ud?(read(),newToken("string",cd)):void(cd+=read());case"'":return ud?void(cd+=read()):(read(),newToken("string",cd));case"\n":case"\r":throw invalidChar(read());case"\u2028":case"\u2029":separatorChar(dd);break;case void 0:throw invalidChar(read())}cd+=read()},start:function(){switch(dd){case"{":case"[":return newToken("punctuator",read())}ld="value"},beforePropertyName:function(){switch(dd){case"$":case"_":return cd=read(),void(ld="identifierName");case"\\":return read(),void(ld="identifierNameStartEscape");case"}":return newToken("punctuator",read());case'"':case"'":return ud='"'===read(),void(ld="string")}if(md.isIdStartChar(dd))return cd+=read(),void(ld="identifierName");throw invalidChar(read())},afterPropertyName:function(){if(":"===dd)return newToken("punctuator",read());throw invalidChar(read())},beforePropertyValue:function(){ld="value"},afterPropertyValue:function(){switch(dd){case",":case"}":return newToken("punctuator",read())}throw invalidChar(read())},beforeArrayValue:function(){if("]"===dd)return newToken("punctuator",read());ld="value"},afterArrayValue:function(){switch(dd){case",":case"]":return newToken("punctuator",read())}throw invalidChar(read())},end:function(){throw invalidChar(read())}};function newToken(at,st){return{type:at,value:st,line:nd,column:rd}}function literal(at){for(var st=0,ot=at;st<ot.length;st+=1){var ut=ot[st];if(peek()!==ut)throw invalidChar(read());read()}}function escape(){switch(peek()){case"b":return read(),"\b";case"f":return read(),"\f";case"n":return read(),"\n";case"r":return read(),"\r";case"t":return read(),"\t";case"v":return read(),"\v";case"0":if(read(),md.isDigit(peek()))throw invalidChar(read());return"\0";case"x":return read(),hexEscape();case"u":return read(),unicodeEscape();case"\n":case"\u2028":case"\u2029":return read(),"";case"\r":return read(),"\n"===peek()&&read(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case void 0:throw invalidChar(read())}return read()}function hexEscape(){var at="",st=peek();if(!md.isHexDigit(st))throw invalidChar(read());if(at+=read(),st=peek(),!md.isHexDigit(st))throw invalidChar(read());return at+=read(),String.fromCodePoint(parseInt(at,16))}function unicodeEscape(){for(var at="",st=4;st-- >0;){var ot=peek();if(!md.isHexDigit(ot))throw invalidChar(read());at+=read()}return String.fromCodePoint(parseInt(at,16))}var fd={start:function(){if("eof"===ad.type)throw invalidEOF();push()},beforePropertyName:function(){switch(ad.type){case"identifier":case"string":return sd=ad.value,void(ed="afterPropertyName");case"punctuator":return void pop();case"eof":throw invalidEOF()}},afterPropertyName:function(){if("eof"===ad.type)throw invalidEOF();ed="beforePropertyValue"},beforePropertyValue:function(){if("eof"===ad.type)throw invalidEOF();push()},beforeArrayValue:function(){if("eof"===ad.type)throw invalidEOF();"punctuator"!==ad.type||"]"!==ad.value?push():pop()},afterPropertyValue:function(){if("eof"===ad.type)throw invalidEOF();switch(ad.value){case",":return void(ed="beforePropertyName");case"}":pop()}},afterArrayValue:function(){if("eof"===ad.type)throw invalidEOF();switch(ad.value){case",":return void(ed="beforeArrayValue");case"]":pop()}},end:function(){}};function push(){var at;switch(ad.type){case"punctuator":switch(ad.value){case"{":at={};break;case"[":at=[]}break;case"null":case"boolean":case"numeric":case"string":at=ad.value}if(void 0===od)od=at;else{var st=td[td.length-1];Array.isArray(st)?st.push(at):Object.defineProperty(st,sd,{value:at,writable:!0,enumerable:!0,configurable:!0})}if(null!==at&&"object"===typeof at)td.push(at),ed=Array.isArray(at)?"beforeArrayValue":"beforePropertyName";else{var ot=td[td.length-1];ed=null==ot?"end":Array.isArray(ot)?"afterArrayValue":"afterPropertyValue"}}function pop(){td.pop();var at=td[td.length-1];ed=null==at?"end":Array.isArray(at)?"afterArrayValue":"afterPropertyValue"}function invalidChar(at){return syntaxError(void 0===at?"JSON5: invalid end of input at "+nd+":"+rd:"JSON5: invalid character '"+formatChar(at)+"' at "+nd+":"+rd)}function invalidEOF(){return syntaxError("JSON5: invalid end of input at "+nd+":"+rd)}function invalidIdentifier(){return syntaxError("JSON5: invalid identifier character at "+nd+":"+(rd-=5))}function separatorChar(at){console.warn("JSON5: '"+formatChar(at)+"' in strings is not valid ECMAScript; consider escaping")}function formatChar(at){var st={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(st[at])return st[at];if(at<" "){var ot=at.charCodeAt(0).toString(16);return"\\x"+("00"+ot).substring(ot.length)}return at}function syntaxError(at){var st=new SyntaxError(at);return st.lineNumber=nd,st.columnNumber=rd,st}return{parse:parse,stringify:function(at,st,ot){var ut,Hl,rc,sc=[],oc="",_c="";if(null==st||"object"!==typeof st||Array.isArray(st)||(ot=st.space,rc=st.quote,st=st.replacer),"function"===typeof st)Hl=st;else if(Array.isArray(st)){ut=[];for(var wc=0,Sc=st;wc<Sc.length;wc+=1){var iu=Sc[wc],su=void 0;"string"===typeof iu?su=iu:("number"===typeof iu||iu instanceof String||iu instanceof Number)&&(su=String(iu)),void 0!==su&&ut.indexOf(su)<0&&ut.push(su)}}return ot instanceof Number?ot=Number(ot):ot instanceof String&&(ot=String(ot)),"number"===typeof ot?ot>0&&(ot=Math.min(10,Math.floor(ot)),_c="          ".substr(0,ot)):"string"===typeof ot&&(_c=ot.substr(0,10)),serializeProperty("",{"":at});function serializeProperty(at,st){var ot=st[at];switch(null!=ot&&("function"===typeof ot.toJSON5?ot=ot.toJSON5(at):"function"===typeof ot.toJSON&&(ot=ot.toJSON(at))),Hl&&(ot=Hl.call(st,at,ot)),ot instanceof Number?ot=Number(ot):ot instanceof String?ot=String(ot):ot instanceof Boolean&&(ot=ot.valueOf()),ot){case null:return"null";case!0:return"true";case!1:return"false"}return"string"===typeof ot?quoteString(ot,!1):"number"===typeof ot?String(ot):"object"===typeof ot?Array.isArray(ot)?serializeArray(ot):serializeObject(ot):void 0}function quoteString(at){for(var st={"'":.1,'"':.2},ot={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},ut="",Hl=0;Hl<at.length;Hl++){var sc=at[Hl];switch(sc){case"'":case'"':st[sc]++,ut+=sc;continue;case"\0":if(md.isDigit(at[Hl+1])){ut+="\\x00";continue}}if(ot[sc])ut+=ot[sc];else if(sc<" "){var oc=sc.charCodeAt(0).toString(16);ut+="\\x"+("00"+oc).substring(oc.length)}else ut+=sc}var _c=rc||Object.keys(st).reduce((function(at,ot){return st[at]<st[ot]?at:ot}));return _c+(ut=ut.replace(new RegExp(_c,"g"),ot[_c]))+_c}function serializeObject(at){if(sc.indexOf(at)>=0)throw TypeError("Converting circular structure to JSON5");sc.push(at);var st=oc;oc+=_c;for(var ot,Hl,rc=[],wc=0,Sc=ut||Object.keys(at);wc<Sc.length;wc+=1){var iu=Sc[wc],su=serializeProperty(iu,at);if(void 0!==su){var lu=serializeKey(iu)+":";""!==_c&&(lu+=" "),lu+=su,rc.push(lu)}}if(0===rc.length)ot="{}";else if(""===_c)ot="{"+(Hl=rc.join(","))+"}";else{var cu=",\n"+oc;Hl=rc.join(cu),ot="{\n"+oc+Hl+",\n"+st+"}"}return sc.pop(),oc=st,ot}function serializeKey(at){if(0===at.length)return quoteString(at,!0);var st=String.fromCodePoint(at.codePointAt(0));if(!md.isIdStartChar(st))return quoteString(at,!0);for(var ot=st.length;ot<at.length;ot++)if(!md.isIdContinueChar(String.fromCodePoint(at.codePointAt(ot))))return quoteString(at,!0);return at}function serializeArray(at){if(sc.indexOf(at)>=0)throw TypeError("Converting circular structure to JSON5");sc.push(at);var st=oc;oc+=_c;for(var ot,ut=[],Hl=0;Hl<at.length;Hl++){var rc=serializeProperty(String(Hl),at);ut.push(void 0!==rc?rc:"null")}if(0===ut.length)ot="[]";else if(""===_c)ot="["+ut.join(",")+"]";else{var wc=",\n"+oc,Sc=ut.join(wc);ot="[\n"+oc+Sc+",\n"+st+"]"}return sc.pop(),oc=st,ot}}}}()},9922:(at,st,ot)=>{"use strict";function normalizeSelector(at){function saveUnmatched(){ot&&(rc.length>0&&/^[~+>]$/.test(rc[rc.length-1])&&rc.push(" "),rc.push(ot))}var st,ot,ut,Hl,rc=[],sc=[0],oc=0,_c=/(?:[^\\]|(?:^|[^\\])(?:\\\\)+)$/,wc=/^\s+$/,Sc=[/\s+|\/\*|["'>~+[(]/g,/\s+|\/\*|["'[\]()]/g,/\s+|\/\*|["'[\]()]/g,null,/\*\//g];for(at=at.trim();;){if(ot="",(ut=Sc[sc[sc.length-1]]).lastIndex=oc,!(st=ut.exec(at))){ot=at.substr(oc),saveUnmatched();break}if((Hl=oc)<(oc=ut.lastIndex)-st[0].length&&(ot=at.substring(Hl,oc-st[0].length)),sc[sc.length-1]<3){if(saveUnmatched(),"["===st[0])sc.push(1);else if("("===st[0])sc.push(2);else if(/^["']$/.test(st[0]))sc.push(3),Sc[3]=new RegExp(st[0],"g");else if("/*"===st[0])sc.push(4);else if(/^[\])]$/.test(st[0])&&sc.length>0)sc.pop();else if(/^(?:\s+|[~+>])$/.test(st[0])&&(rc.length>0&&!wc.test(rc[rc.length-1])&&0===sc[sc.length-1]&&rc.push(" "),1===sc[sc.length-1]&&5===rc.length&&"="===rc[2].charAt(rc[2].length-1)&&(rc[4]=" "+rc[4]),wc.test(st[0])))continue;rc.push(st[0])}else rc[rc.length-1]+=ot,_c.test(rc[rc.length-1])&&(4===sc[sc.length-1]&&(rc.length<2||wc.test(rc[rc.length-2])?rc.pop():rc[rc.length-1]=" ",st[0]=""),sc.pop()),rc[rc.length-1]+=st[0]}return rc.join("").trim()}ot.d(st,{P:()=>normalizeSelector})},9438:(at,st,ot)=>{"use strict";ot.d(st,{qi:()=>querySelectorDeep});var ut=ot(9922);function querySelectorDeep(at,st,ot){return void 0===st&&(st=document),void 0===ot&&(ot=null),_querySelectorDeep(at,!1,st,ot)}function _querySelectorDeep(at,st,ot,Hl){void 0===Hl&&(Hl=null),at=(0,ut.P)(at);let rc=ot.querySelector(at);if(document.head.createShadowRoot||document.head.attachShadow){if(!st&&rc)return rc;return splitByCharacterUnlessQuoted(at,",").reduce(((at,ut)=>{if(!st&&at)return at;const rc=splitByCharacterUnlessQuoted(ut.replace(/^\s+/g,"").replace(/\s*([>+~]+)\s*/g,"$1")," ").filter((at=>!!at)).map((at=>splitByCharacterUnlessQuoted(at,">"))),sc=rc.length-1,oc=function(at,st,ot){void 0===at&&(at=null);void 0===ot&&(ot=null);let ut=[];if(ot)ut=ot;else{const findAllElements=function(at){for(let st=0;st<at.length;st++){const ot=at[st];ut.push(ot),ot.shadowRoot&&findAllElements(ot.shadowRoot.querySelectorAll("*"))}};st.shadowRoot&&findAllElements(st.shadowRoot.querySelectorAll("*")),findAllElements(st.querySelectorAll("*"))}return at?ut.filter((st=>st.matches(at))):ut}(rc[sc][rc[sc].length-1],ot,Hl),_c=function(at,st,ot){return ut=>{let Hl=st,rc=ut,sc=!1;for(;rc&&!isDocumentNode(rc);){let st=!0;if(1===at[Hl].length)st=rc.matches(at[Hl]);else{const ut=[].concat(at[Hl]).reverse();let sc=rc;for(const at of ut){if(!sc||!sc.matches(at)){st=!1;break}sc=findParentOrHost(sc,ot)}}if(st&&0===Hl){sc=!0;break}st&&Hl--,rc=findParentOrHost(rc,ot)}return sc}}(rc,sc,ot);return st?at=at.concat(oc.filter(_c)):(at=oc.find(_c))||null}),st?[]:null)}return st?ot.querySelectorAll(at):rc}function splitByCharacterUnlessQuoted(at,st){return at.match(/\\?.|^$/g).reduce(((at,ot)=>('"'!==ot||at.sQuote?"'"!==ot||at.quote?at.quote||at.sQuote||ot!==st?at.a[at.a.length-1]+=ot:at.a.push(""):(at.sQuote^=1,at.a[at.a.length-1]+=ot):(at.quote^=1,at.a[at.a.length-1]+=ot),at)),{a:[""]}).a}function isDocumentNode(at){return at.nodeType===Node.DOCUMENT_FRAGMENT_NODE||at.nodeType===Node.DOCUMENT_NODE}function findParentOrHost(at,st){const ot=at.parentNode;return ot&&ot.host&&11===ot.nodeType?ot.host:ot===st?null:ot}},1865:()=>{},3961:()=>{},2710:()=>{},1575:()=>{},1080:()=>{},6795:()=>{},3638:()=>{},7776:()=>{},7365:()=>{},970:()=>{},9616:()=>{},1870:()=>{},3041:()=>{},5003:()=>{},3630:()=>{},1230:()=>{},9740:at=>{"use strict";at.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgd2lkdGg9IjQ4IgogICBoZWlnaHQ9IjQ4IgogICB2aWV3Qm94PSIwIDAgNDggNDgiCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGgKICAgICBzdHlsZT0iZmlsbDojZmZjYzgwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDoyLjYzNzM2O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIgogICAgIGQ9Ik0gMjQgMS4zMTgzNTk0IEEgMjIuNjgxMzIgMjIuNjgxMzIgMCAwIDAgMS4zMTgzNTk0IDI0IEEgMjIuNjgxMzIgMjIuNjgxMzIgMCAwIDAgMjQgNDYuNjgxNjQxIEEgMjIuNjgxMzIgMjIuNjgxMzIgMCAwIDAgNDYuNjgxNjQxIDI0IEEgMjIuNjgxMzIgMjIuNjgxMzIgMCAwIDAgMjQgMS4zMTgzNTk0IHogTSAyNCAxNC4wMjE0ODQgQSA5Ljk3Nzc1NjUgOS45Nzc3NTY1IDAgMCAxIDMzLjk3ODUxNiAyNCBBIDkuOTc3NzU2NSA5Ljk3Nzc1NjUgMCAwIDEgMjQgMzMuOTc4NTE2IEEgOS45Nzc3NTY1IDkuOTc3NzU2NSAwIDAgMSAxNC4wMjE0ODQgMjQgQSA5Ljk3Nzc1NjUgOS45Nzc3NTY1IDAgMCAxIDI0IDE0LjAyMTQ4NCB6ICIgLz4KICA8cGF0aAogICAgIHN0eWxlPSJmaWxsOiNiZjM2MGM7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiNmZmZmZmY7c3Ryb2tlLXdpZHRoOjIuNTtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIgogICAgIGQ9Ik0gMjQgMS4yNDIxODc1IEEgMjIuNTk0MTA3IDIyLjU5NDEwNyAwIDAgMCA4LjAyMTQ4NDQgNy44NTkzNzUgTCAxNy4wNDI5NjkgMTYuODgyODEyIEEgOS45Nzc3NTY1IDkuOTc3NzU2NSAwIDAgMSAyNCAxNC4wMjE0ODQgQSA5Ljk3Nzc1NjUgOS45Nzc3NTY1IDAgMCAxIDMwLjk3NDYwOSAxNi44NjcxODggTCAzOS45Nzg1MTYgNy44NjMyODEyIEEgMjIuNTk0MTA3IDIyLjU5NDEwNyAwIDAgMCAyNCAxLjI0MjE4NzUgeiAiIC8+Cjwvc3ZnPgo="},6462:at=>{"use strict";at.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgd2lkdGg9IjQ4IgogICBoZWlnaHQ9IjQ4IgogICB2aWV3Qm94PSIwIDAgNDggNDgiCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPHBhdGgKICAgICBzdHlsZT0iZmlsbDojYmYzNjBjO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDoyLjUwMDAzO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgZD0iTSAyNCAxLjI0MjE4NzUgQSAyMi41OTQxMDcgMjIuNTk0MTA3IDAgMCAwIDguMDIxNDg0NCA3Ljg1OTM3NSBMIDE3LjA0Mjk2OSAxNi44ODI4MTIgQSA5Ljk3Nzc1NjUgOS45Nzc3NTY1IDAgMCAxIDI0IDE0LjAyMTQ4NCBBIDkuOTc3NzU2NSA5Ljk3Nzc1NjUgMCAwIDEgMzAuOTc0NjA5IDE2Ljg2NzE4OCBMIDM5Ljk3ODUxNiA3Ljg2MzI4MTIgQSAyMi41OTQxMDcgMjIuNTk0MTA3IDAgMCAwIDI0IDEuMjQyMTg3NSB6ICIgLz4KPC9zdmc+Cg=="},8407:at=>{"use strict";at.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKCXZpZXdCb3g9IjAgMCA2NCA2NCIKCXdpZHRoPSI2NCIgaGVpZ2h0PSI2NCIKCXhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKCXhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aAoJZD0iTSAyNy4zNTk0ODYsMTIuNjU1MTMgMS40MzE2MzQ5LDQzLjQ5OTE3IGMgLTMuMjk5OTA4MiwzLjkwNjAxNCAtMC41Mzg3NjA0Niw5Ljk2NzA3IDQuNjQ2ODA5Nyw5Ljk2NzA3IEggNTcuOTM0MTQ2IGMgNS4xMTgyMjUsMCA3Ljk0NjcxOCwtNS45OTM3MTEgNC42NDY4MSwtOS45NjcwNyBMIDM2LjY1MzEwNSwxMi42NTUxMyBjIC0yLjQyNDQyMiwtMi44Mjg0OTMxIC02Ljg2OTE5NywtMi44Mjg0OTMxIC05LjI5MzYxOSwwIHoiCglzdHlsZT0iZmlsbDogY3VycmVudENvbG9yO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDowLjY3MzQ1MSIgLz4KPC9zdmc+Cg=="},6830:at=>{"use strict";at.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+Cjxzdmcgdmlld0JveD0iMCAwIDY0IDE5MiIgd2lkdGg9IjY0IiBoZWlnaHQ9IjE5MiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGNpcmNsZQoJY3g9IjMyIgoJY3k9IjMyIgoJcj0iMjkuODk3ODA2IgoJc3R5bGU9ImZpbGw6IGN1cnJlbnRDb2xvcjtmaWxsLW9wYWNpdHk6MTtzdHJva2U6I2ZmZmZmZjtzdHJva2Utd2lkdGg6NC4yMDQzOTtzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgo8cGF0aCBkPSJtIDM0LjI3OTg3MywyMC4yNjIxNzEgNi43MTE0NDIsNi43MTQyOTQgYyAwLjg5MTQ2NSwwLjg5MTQ2NSAyLjMzOTk4NiwwLjg5MTQ2NSAzLjIzMTQ1MSwwIDAuODkxNDY2LC0wLjg5MTQ2NSAwLjg5MTQ2NiwtMi4zMzk5ODUgMCwtMy4yMzE0NSAtOS42NjI5MDIsLTkuNjY1ODI5IC0zLjc5NDI4NSwtMy43OTQyODYgLTguMTgwMjk3LC04LjE4MDI5OCAtMS4wNzEzOTYsLTEuMDc0MzIyIC0yLjUyNTY5NiwtMS42NzcxNjUgLTQuMDM5OTcyLC0xLjY3NzE2NSAtMS41MTcxMjksMCAtMi45Njg1NzYsMC42MDI4NTggLTQuMDQyODI1LDEuNjc3MTY1IGwgLTguMTgwMjk4LDguMTgwMjk4IGMgLTAuODk0MzE3LDAuODkxNDY1IC0wLjg5NDMxNywyLjMzOTk4NiAwLDMuMjMxNDUgMC44OTE0NjYsMC44OTE0NjUgMi4zMzk5ODcsMC44OTE0NjUgMy4yMzE0NTIsMCBsIDYuNjk3MTA2LC02LjY5NDI1MyB2IDI3LjcwMzk0MyBjIDAsMCAtMC4xMDk3MDYsMi4xMjYyOTIgMi4yODU5NzEsMi4xMjYyOTIgMi4zOTU2NzYsMCAyLjI4NTk3LC0yLjEyNjI5MiAyLjI4NTk3LC0yLjEyNjI5MiB6IiBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpldmVub2RkO3N0cm9rZS13aWR0aDowLjczMTQyOSIgLz4KPC9zdmc+Cg=="},7534:at=>{"use strict";at.exports="data:image/jpeg;base64,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"},6810:at=>{"use strict";at.exports="data:image/jpeg;base64,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"},5975:at=>{"use strict";at.exports="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQEAlgCWAAD/2wBDAA0JCgsKCA0LCgsODg0PEyAVExISEyccHhcgLikxMC4pLSwzOko+MzZGNywtQFdBRkxOUlNSMj5aYVpQYEpRUk//2wBDAQ4ODhMREyYVFSZPNS01T09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT0//wgARCAQACAADAREAAhEBAxEB/8QAGgABAQEBAQEBAAAAAAAAAAAAAAECAwQFBv/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAf04AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAACkKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAApAUAAAAAAAEAAABAAAAAAACkKAAAAACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEABQCFAAAAAAAIAAACAAAAEKAAAAAACgAAAAAAAoAAAAAABAAACgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAKAAAAAAACFIACAAgAAAAAABQAUAAAAAAAAAAFAAAAIAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAABQAAAACAAgICAAAAAAoKACggIAUAAAAoAAAAKAAACAAAAEKQoAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAEKAAUAAEAAIACAEAABQUAAAAAAgAABSFIUApAUhQCgAAAgAIAAAAAUAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAACgAhAUhQAAUEKAAQoABAAACgEAAAABACEABSAAApAUAAoBQCgEAAIAACkIUAFAABSFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAUAEBAUAAAFAAIUAAEKQhQQoBQQoABCAgIQhQQFAAAKCAoBSFANAAAgAABCkKACFIUhQUAAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAUEBQQgBSggABQAACAEABSgAAAAAAAEAIQyZBCgAFIACgoKCgA0CFIAAAAQAAAAAAFABQCgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAhQACAFAAAIUAAEBQACAoAAAABAUAEAKAAZKQhkwACkKCgpAUoBTRAACApAACAhSgAgNGSlBAUFAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAoABk0AAAAAAQAAAAhCgpQAAAQEKAQgBTB0KCGQUwQoBAUyCggANFBSgAhAAAAUgBQClOYNFBQQhClBQCgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEKACAgABQCkAAAAAAKCEMlKCEABDZSgAAhAUpCAoKQoIAQgMlANgAyAQpSEBQUhDRkhsgIAUpSkAIUAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAQpAAAUAAAAAEAKAQhCghSApClICkNAgKQ0AAAAAAAAAQGQUhQCFABQZMEOhopyNGiFBSEABSgAgAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACApCkAAAAAABSAAAAgICAgAABCg0aKZMlKQpClKAAAAAAAQFAIYIDRAQpSlBCEKU0CFMGSFBsyUEKCgAoABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACFBCgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAKACAFIAAQEAIACAFNGgAACHMEKbKUEBAUoAIAQoAIZKDQMAhTQBkyaNgoBADkU2YICgoKCgFAKAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAFAAAAAAAIUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABQAQAAAAAgAAAIUpSEIQoIDIKDRAACEIaOhACFIDRAQpCmSlAIZKCAgNg0QEKQpAQGSmiAApQUAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAABAAAQpQQgIQApAACghSFKQhCgAA0ClIUAAhDZAYKUAyZIADR0BCmDJTJkGzJSlKUApQCgAAAAAAAAAAAAAAAAAAAAAAAAAAAAgBQAAAAAQpAAQFBQAAACAFAAAAAAAAAAAAAAAAAAAAAAAIAAAACFAAAAAAAAAIAUAyAAQEKAUFAIQoABCFBDRClIAZKaKCkMlIZBQYBClNlIcikBo2cjIABToCgpQUAoAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAUAAAAAgABCkKUAAAgAAKAAAAAAAAAAAAAAAAAAAAAAQAAAAAEKAAAAAAAACAoIQAAFAIUEAAIUAAEAAKCFAIClNAgKYIUhoGCGgQpopQAQpDmZMmjAOhohDRQUoBQAAAAAAAAAAAAAAAAAAAAAAAAAQAoIAUAAAAEBQAAAAAAAQApCgAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAIAAAAQAoABAAAACAAAApSmSHQEKAQwQGjYMlBQAAAAAAAQ8pSg0UpSlBQUAAAAAAAAAAAAAAAAAAAAAAAAAAEBQQFAAAAAAAAAAAABACgAAAAAAAAAAAAAAAAAAAAAAAEAAAAAABCgAAAAAAEKCAAAAAAhQAAAACAEAAAKAQA2CggAIUpACFKAAAAAAADBDIIClNApQUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgKAAAAAAAAAACAFIAUAAAAAAAAAAAAAAAAAAAAAAAAgAIACkABCkBQCgAAAAAEAAKQAAAFBTIKQpACAhQAACAAGigyaAIUgBAUoKAAAACApCgHEhSg0ClBQAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAFAAAIAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAABAAQFIACFIUApCgo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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEkgAEEgEkkgAAgAAEEgEAgEAAEggAgEgEkkAkAggkAEgkkAEEAAggkggkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgEgEkkAkAgAAAkkgAAAAAAAAAEggEEEEgkkEEEkkAgkAAgEgAAAAkgEgkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAkgAAAgAAEgAAEAAAAAEgAEkAAAAggkEEEAAAgEkAkEkAgkkEkEgEggEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkkAAEAAAAAAEkkEAEEgAAAEEkkkAAAkgAEEgAAEkAggEkgEkgEkkAkAgEkggkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAgkAgEEkgAAkAAEkgkkkEAAAEkEkEEAkgAgkkggAggggEEkAgAEEkgkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgkEkEgEgAAkkgEAAAAAEkAAAAEgEAAAAAAAAAEEkkAAAkAkkAgEggkgAAgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkEEgAAkkkgkkkgggkkkEkEgAAkgkAAAAAAAEgAEkkkEgkgkAgkAggEEEEgEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkkgkkkAAkgkkEEAkkkggAAAEEggEEEAAggEkEEEggEEgEAEAkkgEEEEgkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkkgAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgkAggAEkkgAAkEgAEggEAEkAEkAgEEkAkggkAggEkgEgkkEEAEAgEkAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkkgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAEkAAEkgEkEkAEgggEAAAggAEAgAEAkggkEAEEkgAkgEAAggAgEgkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkgAAAAAEEAEggAAAAkgAAAAAAAAAAAAAAAAAAAAAAAkgAAAgAkgEgAAAAggggAAEEgggkEAEgEkgEEAAAgkAAkEgAAgAgAkAEkgkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAggAAAAAkkkEgAAAkkkAAAAAAAAAAAAAAAAAAAAAAEkkkAAEAAAAEgAAAkAEkEgggEkAgAEkAEAgEgkAkEAgEgkAgAEEEggAEgkAgAAAAAAAAAAAAAAAAAAAAAAAAAEkAkgAAAAEgAAAAAAAEkEAAAAAAAAAAAAAAAAAAAAAAEkkAAAAAAAAEAAAAAkkgAEkAgEAAEgkgkkEAgEAEkAAkgAAAAAAAAgkAkgggAAAAAAAAAAAAAAAAAAAAAAAAAAEgEgAAAAAAAAAAAAEkAAAAAAAAAAAAAAAAAAAAAAAAEkkkEAAEAAkgAAAEAAkEkkEgAEAgEgEgkkEEkEAAAgAAgAAAAAAAAEkEkEAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAkgkgAAAAAAAAAAAAAAAAAAAAAAAAkgkkEgEEkkAEkAAgEAkEkkAggkEEgAggAgkEAEgAkkAAkAAAAAgEAEEEEggAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkkgAAAkgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEkAEgEgkgggkEAAEkkgEkkkEkEkAEAEEAgAkkAgkgkkkggAAAAggEkEAggkkgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAkkAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkEgEgAEkkgggEkgkEAgEEEkAAAkEAEkAgEAAkEEAgAEkgAAkgEgAAAAgEgkAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEEEkAEEAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAEgggggEEgAEgEkkAkAEkkAgAEkAAkkAEkEEEEkAEAgAkgAAgkAAAAAAgggAkkAAAAAAAAAAAAAAAAAAAAAEAAAAAAAEgAkAAEAAAAAAkAAAAAAAAAAAAAAAAAAAAAAAEgkgEkAggkgAAkggAkAgAkEEEkgAAEEgkAAEEkkAAAAkkEAggkAkgAAgEEggAEkAAAAAAAAAAAAAAAAAAEkkEAEAAAAEkkAAEgAAEgAAAAAAAAAAAAAAAAAEAAAAAAAAEkEAgAAkkAEAEkAgkAEAAkkAgEkAAAEgkkgggEAkEAAEEEgAgkggEAEAAEgEEgkgAAAAAAAAAAAAAAAAAAAgEAAkAAAAkkAAAAAAkkkAAAEgAAAAAAAAAAkkAAAAAAAAEEEEgAEAgEkAAggkgEkgEEEEkEkAAAEgAEEEgkkEAAgEEAAAkAAgEAAAggAEAkEEkgAAAAAAAAAAAAAAAkkAAgkEAAAEkkAAAAAAgAgAAAEAAAAAAAAAAAkgAAAAAAAEEEgggAgAgkAAEgEEEgkEAkEgkkEEgEkkkEgEEgAAEAEEgEggEgkAAgAggkAAkAggAgAAAgEAAAAAAAAAAkgAAgEgAAAEAkAAAAAEgAAAAAAAAAAAAAAAAEAAAAAAAAEEAkggkgAAAAkEEAggkEgAgEAAAkEAgEkkkkkkkAAAAAEggggAgEAAAAAkEkkkgEgEAkEEkkgAAAAAAEgEAkkkAgAgAAAgAAAAAAAAAAAAAEgAAAAAAAAAAgAAAAkAAAEEAkkAAAAAAAEkAAAAggkAAkEEgAkAEkkkkAEgAAAAAAAkgAggEkEAgkkgggkkgkAgkAkkkkgAAkkggAEgkAAgAgkkkkEAAAAAAAAAAAEkAEAEAAAAAAAAAAAAAkkAAAgAAkgAAAAAAAAAEAgEgEEgAAkkkEgAgAkkAEkgAAAAAAAAkAkEkggkAEAEgkgkAEAkAkgkkkAAAkgAkkEgkEgEEEEkEAAAAAAAAAAAAAAkggEgAkAAAAAAAAAAEAgAAgkkAAkAAAEgAAAEAkkEAEAkAAAgEkAgEAEEkgkgAAAAAAEkgAgEgEggAgEkAkkAggAEgEgkEgAAAkAEkkkkgEEAAkgAgAAAAAAAAAAAAgAkkAgAAAAAAAAAAAAAgkkAkAEkgAgAAAAAAgAEAgAAAEgAAAEggAkAEAAkkAAAAAAAAAEggkkEggEgggAkEEkggAAkkkkEkkAEkAkggAAkkAAgkkEEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEkgAkgkgAEkAAAAAAAEAAAkgAAAAAAAgAAggkgAEAEkkAkAAAAAAAAkAEAgAkAAkkkgAkAgEkAAEggAkkkkkAEgAAEgkkAgEEkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEkAAkAAAgEEEAgAAgAAAAgAEAAAAAAEggEkAAkAEEEAAEkAAAAAEAEgkkEkEgAEEkgAAAEAAEAgAgkAEkkAAgAAEggAEAEEgkkkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAEgEEEAgkEAgkggEAEAAAAAggEkAkkEgAEgkgAAkgAAAEEEkggAEkkEEkAggAEAgAgkAkAEgkEkgkkkEAgEEAAAkkggEAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEkgkAAAkEEkEkAAAkkgAAAgAggkAEgAgkgkgkgAAkgAEgkkEEEkAAkkgEkkggkgAAAAkkkAEkggAAAkEkAAAAAAAAEkkgAAAAAAAAkAkkEkgAkgkEgAAAAAAAAAAAAAggEAggAEEAgAAgEEAEAgAAAAgAAAAAAAkAkAkggggAkkkAgAAEgkAAggkkAkEAkAEAAkgEkEkkAkEAEkkkAAAAAAAAAEEgAAAAAEgkgEgkAAEkEkEgkkkkAAAAAAAEEAAAkgAAAEkkAAEEEkgEgAAgAAAEgAkAAEEEgkAEkEkgAAgEgEkkAkEgAAAAAAAgEAAEkggkkEkkEkkgkAAEEgAAEgAkgkgAAAAggAAgkAgAAAEAgEgAAgkkEgAAAAAgkAAAkkgEgEkkgAggEkAggAEgAAAEgEkAAAAEEkEEkkkkkkkAAEkggkAEEEAEAAEgAAAkAAAEkkEEAAgkggAgAEgkgAgAkAAAAAAAAAAkgkkkgEgkgAkkkgEkkAEgAAAAAEgkkkgEAgEggggggAAAEEEgAAgAAAgEgEAggkgkkkEAkkgAEEgggggEkggAAAEAAEAAAAAAEkggkgAEggggAAAAkkEgAAAAAEkgAAEEgAAEggEEgEkgAgAAAAAAAAAAAgEkkkkkkkgEgAkgggAAAAEEEAEgAAgEAgAEkkgAEEgAAkkEgEAEEAAAgAkgAkgAAAAAgAAkAAAkkkkEkgAAAAAAAgAgkAAAAEgAkAEkkAkggAAAkAEgAAAAAAAAAAAEAAAEkkkkkkkgEAEgEgAgAkEkEEkAAAggAAAkkEAAAkEgkgkkkAggkkAEkggAggAAAgAgkkAgEEkgkAgkkkgAAAAAEgAAAkAAAEEEEgEkkkkkkkkgkgkkgAAAAAAAEAAEkkAkEkkEEkkkEgAkEAAAAAkAAAAAAEAgAggkgEAggAkAkEkAgEEAAEAkgkAAgkEAAAEAgAEgkEAEkkkkAgAAAAAAAgAAAgkgAAEkgEkgAkEkkkkEkEkEEkgAAEkgEkEkgkkkEkkEkEkkAEAgEAAggkAEkAAgAAggAgkggkgEgAEEkAAAEkAAAEAgkAAAAEgggkEkAEEAkEAAAgkkkAAAAAAAAgAAAgkAkAkEEkkAAAEgEkkAAEEkEgkkkkkgEgAgEkggEkEgAkkkgggkkgEEkEkgEkAkAkAAAAEggAggEgkgAAEAgkAEAAAkgEAkgEgEAAAAkAAAAAgkEkAgAEAAAAEAEgAAEAgAEAEgkkgAAAAAAAgEAAAkkkkAkkAAEkgAEAEgAkkkAAkkgkAgEkAkEEAAAAkAEkAEEAEkAAAEAgkAAAkEEAAAgkAEEggEkAAAAgAEgEEggAAAEkEEgkgAAAkgEEAEAAAAEgkkkggkkkggAAAAAEggAAgAEEkgEEAAkEkAAEkgAAAEkkkAgkEAAAkAAEgAAkkkgAEAgAgEggEgAAAAAAEAkAgkEkggAEEkkgAAAAAAAAAAEkEAAAEkAgkAEAggAAEAkAAAgAkkkkkkkkAggAEkkkgAgAkEEAAkAAkAkkkkAAAAAAgkAEkkEEAAAAAAAAAAEEAAEAEEkkAAAAAgEgkAgAEkAEAgEkAggEgggAAAEgkEEggAAAEkEgEEEgkAkAAAEEkgEkkgAEkkkkkkAkgEkkgAAAAAAEAAAEkgEkEkgAAAAEkggAgEAEAAAAEAEgAEAEkkAEEkgAEkkgEAkAEkkkkEgkAEAkEkkgEgkEgAgggkgAAAAAAgAEkAEgAEEAAEgkgAkAAAAkggAkkkkgkkkAkAkEEkkkAkEEAEgAkkkkkAAAEAggEAkAgEAkAAAkAEAAAggggAkgEgkEEEEgEAgAkEAkkAkEAEAAAkgAggAAEkAAAAAAggkEEEEAAAAAkAAgAEkggAAEAAgkAEgAAAAkkkAEAgEAgkkgAAEEEkkkkAAkAEEggEggAAggAkgAgggAkkgAgAkkgEgEkgEEAEgkEEEAAEAEAAAAgEgEkkEkEAAkAEAkEkkgEkkkEAEAAEEEEkgAAAAAAAAAAEEkEkAAAEEgAgkAAAAgkgEEEkkkAAAkEAkAEkAEAAEgAAggkEAgEkkEEAEEAAEAkgEEEgAEkkEAgkAkAEAkkAAkgkkAAkkkkAgEAAgEkgAAkEAEEgEgkkAAAAgAAAAAAAkAgAAAEgkkgAAEkAAAAAAkEAkkgAAAEgEkEkEEAEggggAgAkEkEkAEgkkAAEAgkEgAkgAAgEEAEkAgkkgEAAEkgggkEkkEEEgAgkkkgAEEkkAkkEkEgAAAAAkgAAAAAAEgEkkkkgAgAAAgEkkAAAAAAgkAEgAAEkAkgAgkggAgkkEAkEkkkggAEAgAEkkAEkkAAEEAAEgAkkEEkgAAkkAkAgEgAkkgAAkkkAAkEkgEkAAAkkggAAAAAAAggAAAAAEAAAEkAgEAAAAEgEEAgAAAEEkEkkEAgkkAkkgEkgkAAkgEAggkAAkAAgAEgggEkEAEkEEEgkAggEEkEEkAAkkkkggAAAkAggAAAAAAAAEAAAkAAAAAAAAAAAAEAgAkggAgAAAAgEAAAAAAAAAAEAAkAAEAAAgEAEgkggkkEgAkgEgkAAgEkkkAEAAgEkAAkkEEkAkAkgAkEkAEEgAEgEkkEgEkgEkgkAAAAAAAAAEgAAAAAAAAAAAAAAAgkkAAAAAkAAAAAAkAAAAAAAAAkgkkgAkEkAkAEkEEAkkgEgEkgAEkkgkAAkEgkggEkAEgkgkEEEAkggEEkkgEkAkggkkgkgAgkAAEkAAAAAAAAAEgAAAAAAAAAAAAAAAAAAAEgEkAkkkkkAgkgAAAAAAAAAAAAAkggAAAAgAAgkAAEgEEkEAgEEAgEAgkgggggEgkAEkgAEkgkkkggAgEkkEkgEkkgkkkkkkkAAAAAAAEkEgAggAAkAAEkAAAAAAAEAgkAEAAAAAAAEEgAAAAAAAAAAAEAEgAgAAAAgEgEAAgEgEEAAgAgAkkkkgAEkgEkgkkgEgEEgkAkEAEAEkEAgAkkgkgEkkkkkkgAAgAAAAAggggkEkEEgkgAkAkEAAkkAgEEkEEAkkAEAgAAAAAAAAAEEEEggggggAAAkgkkAgkAgAAAkkkgEkgAgAgAEkkAEkEEEEAEAgggEAEkEEgkkAkEgggAgkkkEEAggEkEAEggggAAAgAgAkkkEAEAAgAAEAEAgkkAgggkkggkAAAAAAEkkAEAkEkggEkAkkkkkkgkkkkkkkgkkkkkkAkkkkkgEgkgEEAgggkkkkEEEkkAAgEAgggEgkEkkkAkAEkkAggEEEkkAkkkggkkgkkgEAgEkAgEAAkggEEEAkEAgggkkEkAkggAkEEgkAEkkggkAAAAEgEAAAgggAkggkAgkEEggkAEgEkAAgkkEEEgAAAEkEAggEEEkkAggAkEEAgkggAEkggAggEkkggEAEEEkAggAkEkAAgAkAggEAAkEgkAkgkAgkgEggAgAEEgEkEgAkEEkAggkggAkEAAEAAgEAkkEEEEgEAggkEEEAgggkgEkgEEkgEEkEkAkAEAEkAkkAkEAAEkkEEEkEAggkEggAkEEAkEAkAgAkEgEkEkkEkgAkkAAAkAgkAgAEgAgkAggkkAEEAAAEEkEAgkkkAEkEkgEkkAggEgAgkkEEAkAkgAAEEkgAgEAggAAAEkkkkgAAEAEkEgggEEkAgkEkkgkAAgEAEEkAgkkggAEEEAAggkEkAEAAEAEEEkEAEgkkgEEAgEgEAkAEEEAEEkAgkEgEAkEEkkgkkAgEAkkEggAkggEEEkgkgkEAkkkkAAEgkAgkgEEgggAEAggAkEAkAEAkAEAAAAgEkkkEEEAAEgkgAAggAgEAkgAgEAgkEkggAkEAkgAEkAkgkAEkgAAkAAAEkEgAkkkggAAkAAkkkkAkAkEgkEEEkkAAEAkgAgEkgAggkgkEkEEAgAEkgEkkgkAggAEEkAAgAgEkAEAkkAkAAEEgkkEAgkkEggkEkgEgAkggEEAEEkAEgkAEAkAkAkEEkAgAAEEkAkAEEEEkgEAAEkEgkgEAAEkgEgAgEEkgAgkkEggggEEAEAgAgAgEkgAEkEgkAkgAEkEgkggkEkAAEEggAkEAkEgEAAAkEAEgggEEgEkggggEAkEgEggAggkkAgAkgEgEEgkkEgEgkEEkAEAkAEgAkggkAEkgEAEEkEEAgEEEAgkEkAkEkkEgAkAgAAgAEEggAEkkkEkgkAkAgEkkEAAEAkEkEEkkAAkEgAAAgEgEEgEkkAgkEEkAEAEAkkkgAAkkgEgEkAEAkkAgAgEEkgAEAkEEkgAEggAgkAkkkEkEgAkggkEAgkgAAgkEkAEEgkEgkEEAgkgkAkkkAAgEgkgEkEAAAgAEEgAkAgAkAgEAEkkEEgggkgEkAEAEgkkEgkEkkEAkgkgkkAEEkEgAgAkkgggkAkgAkEgEgkkEEkEAEAkAAgEAkkgkgAkkkkkkEEEgAAEkEEAEkkgEgAgAkggkEkAEAkgEggAAEEkgAkgAgEkEAkEAEkgEEAEgAkAEgAkkEkAAAkAAAEgggEAEgAkAkAEgEkAgAEAggkAAAgggAgAgkAAEEEAAkAAkEEggEAkgEgEAkAAgkAkgkEgAkkEgEgEkEgEEAkgkgkEgAAEkggkkEEkkAkEEkkgEgAEgkEgkEAgAAAEggkEkAkkggEEkgEEEAAAAkkkggkkkkAkkkEAgkAkEgkEEAgEEgAAgEgkgAkkkkkgEkkEkgkAAkAkgEkkEAEgkkgAEkgkggkgAEkkAggAgAEkEggEkAgAgkggAgAAAAgAEgAkgkkkggggEEkAkkkAgkAEEAgggEAAkEEEEkEgkkAEggkEgEgkgkEggEkggEAAggAEkAgAkkkgkgkEkkgAkgEEggEgEAAkAkAgAAkAkAkEAAAgEkAgAAEAAAEkAAEAkEkAkAAEAgEEAEAkkEEggkgEkkgkkggkAkkgkAkgAkEgEkAkEkEkggkgAAEkggAAAkgAgggkAgkEgEAEgkAEkEEkAEgkggAkgEEAgAgkgEgEEEAEgkEggAgAAAAAAAAkEAAkAggEgkkEkAAgAEgkkgggAAgAAAkgkEEAgkEEEEgggkAAgAEkEAkEkAgkEgkEgkEgkEkgEEkAkkgEkgAEEEgAAAAgAgggggkggAEkAAgEgEAAgEggkkEgAAAEggEEgEgEkEgAEEEAEEEkkEAkkkAkAAggAEEAAkEEkkEEkkkggkgEgAkAgAgAgAggAgkAEAgEkgEkgEggEggAAgAkkkAEAEAgEAkAkgAkAEkgkgAgkgEAAkEkgAAAAAEgkAAAkAEAEkAAAAgAAAkggkEAEAgAEkAggkEEAgEkEEAkEkAAEgEggAkEkkAAEgAkgAAgkkkggAgEggEAEgEkEkEEEggkgEAgAkkgEkgEgAEgkAEgAgAEkAkgAgAAAAEAEgAAEkAEAEEAgAEEkAkkkAggEkkAgkAAkEAgEAgEgAAEEEgkgAkkEAkkEAEAkAEgggkEEgAgkAAggAEEgAgEAEkkEgEEEgEkEggggEAkgEgAkAAEkgAkkkkEAgAAAEAgEkAEAkAEgkEAkAkAEAgAgAgEEkkEkgAEEEgEAEgEEEEkkgAkAEgAEEEgAkkgAgAkkEAAkkAAggkggkAEEAEAgAkEkAAAAEkgAgAEAkAgAgEAkggkEgAEAgEEEEkAAgEkEgEAgAkgEkkkAkAAEEkAAgEgEEEEEkggEgkggEgEAgkgkEkAkkgkAgkEAEAgEgAEAAAAAggkgAEAkEEgkkAggggAgEAgkEAkkggkkkkkAAkAEAkEEkgEggkEAkgEAAkAEkkAEgAkggkAkkgAgEAEAkEgAAkEgkEEEkgEkAAEgAEgEggEkkEgAgkggAgAEkAAAkAAkgAgkEgkgAkAEkEkgkEAkEEEAkEgkgEEgkAEEgkkgkgAAAgAgAggkAgEAAAggkkgAkAAEkEkAEkEAkkAAEEEEAkggkgkEkAgAAEEgggkAgAkkggAAAgAAgkgEkgkEEkkEkEAgkAkEgAgAkAEAkgkEkgEkAEAkggEgEAAAkAkkgkkggkEkkAAAAggAgkAEEgAkkgAgkEAkggEkgkkgEAEkggggkgEEggEAAgEAEkkAAkkEAAgAgkEEAgAEkAAkkkEEEEEEAggEAkgAAgkAAgkgkkEkkkAgkkgAEkEEgEEkEgAAAAgAAEEEAkAkAkkAEgAAkkEkkEAAAAkgEEgEAgkEAAEgAgggkggAkAAkkgAEkEEkEEEgAAgkgAggAkkAEEAAEEEEEkAggkgggkAEAEkkkgAkkAAEgAgkEAgkAkAkAAAkEkkgAAkgkAgkEEkEgkEgEEkEkkgAAAAAEkEAggAEAkEEkEgEAEAEkAEkAAEkgkEkAgggAAkEgAAgEkkEkAAgEAEkEgkgggggkgkAkggkAkEEkkAkEgkgkAEAAgAEgEAgkkgkgEgEgggEEEgkEEkAAgAkEkkkEAAAEggkgAggEkggkkEEAAAAAAAgAAkkkEkkkgAgAgEkAkEggkkAgEAkAkgkAkEAEAEgAAggEAkEEEEgEkEEkgkkAgAAAEgEEkAgEkAkgkgEkEAEgkEgEkAgAEkkEkgAkAkAkEAgkAgEEEEEEkgAAAAAEAAAEkggkkAkgAgEAAggEkkEkkEgEAgggEAAAAgkEkAEgEgEkgAgAkAgEAkAgkgkEkAgkkkEAAEEgAgAgAggkAAggkkEgEAAgEkkkkkkkEEEAkkkAgAAkEkEEkkgAAAAAAkEkkkkkEEkAkAgAAggAggEgAEggAkgggkEEgkAEEgkkEgAEgkEEgAkAkEkgkAgkggEAkEkkkAgkAggggEkEEEgEEgAgEkgEgkEgkkgkgkEkkkkAAEkkkAAAAAAAAAAAEEgkggEEgkkAkAEEAEAgkgAAAEkAgkEkEgEAgAgAEgAAEggEkAEkgAAEkkEAEkAkAgAAkAAAAgkEAEgAggEkEEAEEAAkEEAggAAkgEkkkkEkgEggEkAEkgAAAAAAAAEkkkkkgkkAkkgkgAkAEgEEkgAAAkkgEEgEAEAkAEEkAEgggAkgAAgEkEkgEkEAkEgkEEkkkkkEEAEEkgAkkkEkkkEEEAAAgkggkAkkEgAkkEkgAEkggEgEgAAAAAAAAAgkkgAEEEAAkEkkEgggkAgEAAAAAAAgkkEgkEggAgkEEEEEkEAAkEkEEgAAkEEAgEAEAkkEkkEkEEgEgEAEkkAgkkkEgAAkgEgEAkAkkggkAEkkAkggAAEAEkkEgEAgkkAEAgEggAEkkEkgkkEkAgAAAAAAAAkgAEggEEggEkgkAkAAggkAgkEEkgEEEkEEkAEAkAkEgEEkAEAAgAAkgAEkgAAAAggEgAAEkEAkEAgEkEkgEkkEkAAgAgkkkkgAAAAAgEkkgkEAAEEkgEkEAgAAAAAAAAEkAkAkEAgEEEAAEEkEgkEAkgkggkggkAAAEEEgEkEAAAEEgAEEgkgkAAAkAkkAAAAAAAAAEkEgAggkAAkAAAEkkAEkkEkkgEAAAAEAEkAkkkEkAEkkEkkkAAAAAAAEAgkkEAgEgEEEgEgEAEgEAAAgAAgAEkEgAkAEkgkEgkAEgkggEgAgAgggEkEAgkAAAAAAAAAAAEggkAkEAAAAAAEkkkkkkkEggAEAAkkkAkgkkgkkgAgAEkAEEAAAAAAAAggkkEAkgkEEEAEgAEAkkAgEkkkAAAEkgEgEEEkgAAAEEkgEEAgAgEgggggkkAAAAAAAAAAAAAEkEkAAAAAAAAAAEgkEAkkgkAEkkEkkkkgAkEEgkkgkkgAEAAAAAAAAkEEkgkkkAgAkAEAAEkgEgkEkEAEkgEEEkAgAkEgAgAgEEkgAkkgkEkkAgEEEgAAAAAAAAAAAAAkAAAAAAAAAAAAAAAgAgggAAAkkkkEkgkAEEkkkkAkgAgkEAAAAAAAAAEkkkkAEkAAAAAEgEAEAgkkAEEEgkgEgEgEEAgEEkggkEggkEkAAgAEkAEgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgggAEAkggkgAAkEkEAEEAEgEkAEAAAAAAAAAkgEgkkEkAAgEEkAkEEgAAAAkkEkAgEgAgkAEEgAAkEkkEAAkkEAAgkkkAkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEkEEAAgkEgAAggEkEEkEEggEEgAAAAAAAAAkkAkggEAkgAkgEEkgEgEAAkkEEEAkEgAAkEEAkAkkEgAAkkAEkgEAAEggAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkgkkEkgEAgAEEkgEkEEggkgAAAAAAAAAAAgAEkgAEkgkgkkkkAkAAEEgEEEgAkkAAkAAAEAEEggkgAAAAkgggggkAEEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEEEkEkEkgkEkEAkAEEAEAAAAAAAAAAAAAkEEkgkgEkAAgEgkgEgEgAEgkkkkkkEkAEEgEkEEgkAEkkAgggkAEAgggAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEkAkAgkkEkkEkkgAAkkgkgEAAAAAAAAAAAAkkAkkEgEEggkAgAkAggAEkgkkAkkgAgkAAkkEkkEEEAkgkgkAkAkkEgEkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAgkkEkggEgkkkEEgkAkAkAAAAAAAAAAAAkkkkkAAAAkkEAEkkgkAAEAAAAgAEAkgEgkEEkgkggEgAAAggkEgkAgkkEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEEkEgEgEEgAEkAkkAAgEggAAAAAAAAAAAAEEAgAgkgEEEgAgAggEgEEEAgAEkEkAEEkkgkEEgEAEEggAgkgggkEkEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgkEAAkAAkAAkgAAAAAAAAAAAAAAAAAAAAEkkEAAAkgEAgkggkEkkEEgEAgEgAAEEEkAgAgggAAkgAkkAkAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAggAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAgkgAgggAggkAEEgAgEAkgkkAkgAAAEEkEEEgEEgkggEgkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAgkgAAAEAgAkkEEEgEkggAAEggkkAAkkggEAAkgggAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEkkgkgEggggEgEkAEEEAgAgAkEgkgAgAEkgAkkEkgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAggEkgEgkkgkkEEEkkkAEEEkgkAAAEggAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAgEkgkgAEAgEAkgAAAkggAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAgEAEkAAkkAEgAgAkgkAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEEkkAEEkAAkkkgkEgEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/8QAFREBAQAAAAAAAAAAAAAAAAAAAOD/2gAIAQMBAT8Qv/8Af//EABURAQEAAAAAAAAAAAAAAAAAAADg/9oACAECAQE/EL//AH//xAAtEAEAAgIBAwMEAgMBAQEBAQABABEhMUFRYXEQgZGh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"},2305:at=>{"use strict";at.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iNDgiCiAgIGhlaWdodD0iNDgiCiAgIHZpZXdCb3g9IjAgMCAxMi43IDEyLjciCiAgIHZlcnNpb249IjEuMSIKICAgaWQ9InN2ZzUiCiAgIHhtbDpzcGFjZT0icHJlc2VydmUiCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnMKICAgICBpZD0iZGVmczIiPjxmaWx0ZXIKICAgICAgIHN0eWxlPSJjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM6c1JHQjsiCiAgICAgICBpZD0iZmlsdGVyMTM0NSIKICAgICAgIHg9Ii0wLjIzMTQ0MzgiCiAgICAgICB5PSItMC4yMzE0NDM4IgogICAgICAgd2lkdGg9IjEuNDYyODg3NiIKICAgICAgIGhlaWdodD0iMS40NjI4ODc2Ij48ZmVGbG9vZAogICAgICAgICBmbG9vZC1vcGFjaXR5PSIwLjQ5ODAzOSIKICAgICAgICAgZmxvb2QtY29sb3I9InJnYigwLDAsMCkiCiAgICAgICAgIHJlc3VsdD0iZmxvb2QiCiAgICAgICAgIGlkPSJmZUZsb29kMTMzNSIgLz48ZmVDb21wb3NpdGUKICAgICAgICAgaW49ImZsb29kIgogICAgICAgICBpbjI9IlNvdXJjZUdyYXBoaWMiCiAgICAgICAgIG9wZXJhdG9yPSJpbiIKICAgICAgICAgcmVzdWx0PSJjb21wb3NpdGUxIgogICAgICAgICBpZD0iZmVDb21wb3NpdGUxMzM3IiAvPjxmZUdhdXNzaWFuQmx1cgogICAgICAgICBpbj0iY29tcG9zaXRlMSIKICAgICAgICAgc3RkRGV2aWF0aW9uPSIwLjUiCiAgICAgICAgIHJlc3VsdD0iYmx1ciIKICAgICAgICAgaWQ9ImZlR2F1c3NpYW5CbHVyMTMzOSIgLz48ZmVPZmZzZXQKICAgICAgICAgZHg9IjAiCiAgICAgICAgIGR5PSIwIgogICAgICAgICByZXN1bHQ9Im9mZnNldCIKICAgICAgICAgaWQ9ImZlT2Zmc2V0MTM0MSIgLz48ZmVDb21wb3NpdGUKICAgICAgICAgaW49IlNvdXJjZUdyYXBoaWMiCiAgICAgICAgIGluMj0ib2Zmc2V0IgogICAgICAgICBvcGVyYXRvcj0ib3ZlciIKICAgICAgICAgcmVzdWx0PSJjb21wb3NpdGUyIgogICAgICAgICBpZD0iZmVDb21wb3NpdGUxMzQzIiAvPjwvZmlsdGVyPjxmaWx0ZXIKICAgICAgIHN0eWxlPSJjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM6c1JHQjsiCiAgICAgICBpZD0iZmlsdGVyMTM4OSIKICAgICAgIHg9Ii0wLjE5MDM0NTU2IgogICAgICAgeT0iLTAuMTkwMzQ1NTYiCiAgICAgICB3aWR0aD0iMS4zODA2OTExIgogICAgICAgaGVpZ2h0PSIxLjM4MDY5MTEiPjxmZUZsb29kCiAgICAgICAgIGZsb29kLW9wYWNpdHk9IjAuNDk4MDM5IgogICAgICAgICBmbG9vZC1jb2xvcj0icmdiKDAsMCwwKSIKICAgICAgICAgcmVzdWx0PSJmbG9vZCIKICAgICAgICAgaWQ9ImZlRmxvb2QxMzc5IiAvPjxmZUNvbXBvc2l0ZQogICAgICAgICBpbj0iZmxvb2QiCiAgICAgICAgIGluMj0iU291cmNlR3JhcGhpYyIKICAgICAgICAgb3BlcmF0b3I9ImluIgogICAgICAgICByZXN1bHQ9ImNvbXBvc2l0ZTEiCiAgICAgICAgIGlkPSJmZUNvbXBvc2l0ZTEzODEiIC8+PGZlR2F1c3NpYW5CbHVyCiAgICAgICAgIGluPSJjb21wb3NpdGUxIgogICAgICAgICBzdGREZXZpYXRpb249IjAuNSIKICAgICAgICAgcmVzdWx0PSJibHVyIgogICAgICAgICBpZD0iZmVHYXVzc2lhbkJsdXIxMzgzIiAvPjxmZU9mZnNldAogICAgICAgICBkeD0iMCIKICAgICAgICAgZHk9IjAiCiAgICAgICAgIHJlc3VsdD0ib2Zmc2V0IgogICAgICAgICBpZD0iZmVPZmZzZXQxMzg1IiAvPjxmZUNvbXBvc2l0ZQogICAgICAgICBpbj0iU291cmNlR3JhcGhpYyIKICAgICAgICAgaW4yPSJvZmZzZXQiCiAgICAgICAgIG9wZXJhdG9yPSJvdmVyIgogICAgICAgICByZXN1bHQ9ImNvbXBvc2l0ZTIiCiAgICAgICAgIGlkPSJmZUNvbXBvc2l0ZTEzODciIC8+PC9maWx0ZXI+PC9kZWZzPjxnCiAgICAgaWQ9ImxheWVyMSI+PHBhdGgKICAgICAgIHN0eWxlPSJmaWxsOiNiZjY3NGM7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiNmZmZmZmY7c3Ryb2tlLXdpZHRoOjAuNjYxNDU4O3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjE7ZmlsdGVyOnVybCgjZmlsdGVyMTM4OSkiCiAgICAgICBpZD0icGF0aDYzNDIiCiAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCgtMC4yMzAxOTA4OSwtMC44NTkwOTM3MywwLjg1OTA5MjQ2LC0wLjIzMDE5NTY0LDAuOTYxNzMwODMsMC43NjEzNjk0MykiCiAgICAgICBkPSJNIC0xLjI1Nzg5MjYsMS45MTE3NjY4IEEgOC4wNDE4NDI1LDguMDQxODQyNSAwIDAgMSAtOS4yOTk3MzUxLDkuOTUzNjA5MiBWIDEuOTExNzY2OCBaIiAvPjxjaXJjbGUKICAgICAgIHN0eWxlPSJmaWxsOiNiZTYyMWM7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiNmZmZmZmY7c3Ryb2tlLXdpZHRoOjAuODg3ODc7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MTtmaWx0ZXI6dXJsKCNmaWx0ZXIxMzQ1KSIKICAgICAgIGlkPSJwYXRoODQ2IgogICAgICAgY3g9IjcuOTI3NzA3MiIKICAgICAgIGN5PSI1LjQ3NTg1MjUiCiAgICAgICByPSIzLjU1MTQ3NzciCiAgICAgICB0cmFuc2Zvcm09Im1hdHJpeCgwLjc3MDI0MTc3LDAuNDQ0Njk5MzMsLTAuNDQ0Njk5MzMsMC43NzAyNDE3NywwLjk2MTczMDgzLDAuNzYxMzY5NDMpIiAvPjxnCiAgICAgICBpZD0iZzg5MiIKICAgICAgIHRyYW5zZm9ybT0ibWF0cml4KDEuMTc4NDYzOSwwLDAsMS4xNzg0NjM5LC0wLjgzNjc2ODYyLC0xLjY1OTk1MjIpIj48cGF0aAogICAgICAgICBkPSJNIDMuNTk5NjY3OCw5LjQxMDYyNTIgSCA1Ljc4MjQ4MDMgViA5LjgwNzUwMDEgSCAzLjU5OTY2NzggWiIKICAgICAgICAgaWQ9InBhdGgyNTQiCiAgICAgICAgIHN0eWxlPSJmaWxsOiNmZmZmZmY7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlLXdpZHRoOjAuMjY0NTgzIiAvPjxwYXRoCiAgICAgICAgIGQ9Ik0gNC4xMjgzMDUzLDguMjcwMDA2NCAzLjgzMDExOTksOC4wMDQ4OTM5IDQuMDk1MjMyNCw3LjcwNjcwODUgMy43OTg2MzQ1LDcuNDQyOTE4OSAzLjUzMzUyMiw3Ljc0MTEwNDMgMy4yMzUzMzY2LDcuNDc1OTkxOCAyLjk3MTU0Nyw3Ljc3MjU4OTggMy4yNjk3MzI0LDguMDM3NzAyMyAzLjAwNDYxOTksOC4zMzU4ODc3IDMuMzAxMjE3OCw4LjU5OTY3NzIgMy41NjYzMzAzLDguMzAxNDkxOCAzLjg2NDUxNTcsOC41NjY2MDQzIFoiCiAgICAgICAgIGlkPSJwYXRoMjU2IgogICAgICAgICBzdHlsZT0iZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZS13aWR0aDowLjI2NDU4MyIgLz48cGF0aAogICAgICAgICBkPSJNIDYuMjc4MDQ0OSw3LjcwNjk3MzEgNS45ODE0NDcsNy40NDMxODM1IDUuNzE2MzM0NSw3Ljc0MTM2ODkgNS40MTgxNDkxLDcuNDc2MjU2NCA1LjE1NDM1OTUsNy43NzI4NTQzIDUuNDUyNTQ0OSw4LjAzNzk2NjggNS4xODc0MzI0LDguMzM2MTUyMiA1LjQ4NDAzMDMsOC41OTk5NDE4IDUuNzQ5MTQyOCw4LjMwMTc1NjQgNi4wNDczMjgyLDguNTY2ODY4OSA2LjMxMTExNzgsOC4yNzAyNzEgNi4wMTI5MzI0LDguMDA1MTU4NSBaIgogICAgICAgICBpZD0icGF0aDI1OCIKICAgICAgICAgc3R5bGU9ImZpbGw6I2ZmZmZmZjtmaWxsLW9wYWNpdHk6MTtzdHJva2Utd2lkdGg6MC4yNjQ1ODMiIC8+PC9nPjwvZz48L3N2Zz4K"},6883:at=>{"use strict";at.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgd2lkdGg9IjQ4IgogICBoZWlnaHQ9IjQ4IgogICB2aWV3Qm94PSIwIDAgNDggNDgiCiAgIHZlcnNpb249IjEuMSIKICAgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIgogICB4bWxuczpzdmc9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cGF0aAogICAgIGQ9Im0gOC4wMjIyOTI0LDcuODU5Nzk3NyBhIDIyLjU5NDEwNywyMi41OTQxMDcgMCAwIDEgMzEuOTU1NTYzNiwwLjAwMjcgTCAyNC4wMDE0MDksMjMuODM4OTE2IFoiCiAgICAgc3R5bGU9ImZpbGw6I2JmMzYwYztmaWxsLW9wYWNpdHk6MTtzdHJva2U6I2ZmZmZmZjtzdHJva2Utd2lkdGg6Mi41MDAwMztzdHJva2UtbWl0ZXJsaW1pdDo0O3N0cm9rZS1kYXNoYXJyYXk6bm9uZTtzdHJva2Utb3BhY2l0eToxIiAvPgogIDxjaXJjbGUKICAgICBjeD0iMjQiCiAgICAgY3k9IjI0IgogICAgIHI9IjkuOTc3NzU2NSIKICAgICBzdHlsZT0iZmlsbDojZmY2ZjAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTojZmZmZmZmO3N0cm9rZS13aWR0aDoyLjQ5NDQ5O3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiIC8+Cjwvc3ZnPgo="},270:at=>{"use strict";at.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgd2lkdGg9IjQ4IgogICBoZWlnaHQ9IjQ4IgogICB2aWV3Qm94PSIwIDAgMTIuNyAxMi43IgogICB2ZXJzaW9uPSIxLjEiCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGRlZnMKICAgICBpZD0iZGVmczEiIC8+CiAgPHBhdGgKICAgICBkPSJNLTMuMDA3LS4wMDVhNS45NzggNS45NzggMCAwIDEtNS45NzkgNS45NzhWLS4wMDV6IgogICAgIHN0eWxlPSJmaWxsOiMxYTIzN2U7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOiNmZmY7c3Ryb2tlLXdpZHRoOjAuNjYxNDU4O3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1vcGFjaXR5OjEiCiAgICAgdHJhbnNmb3JtPSJyb3RhdGUoLTEzNSkiLz4KICA8Y2lyY2xlCiAgICAgY3g9IjYuMzUiCiAgICAgY3k9IjYuNTQ1IgogICAgIHI9IjIuNjQiCiAgICAgc3R5bGU9ImZpbGw6IzFlODhlNTtmaWxsLW9wYWNpdHk6MTtzdHJva2U6I2ZmZjtzdHJva2Utd2lkdGg6MC42NjAwMjc7c3Ryb2tlLW1pdGVybGltaXQ6NDtzdHJva2UtZGFzaGFycmF5Om5vbmU7c3Ryb2tlLW9wYWNpdHk6MSIgLz4KPC9zdmc+Cg=="},1760:at=>{"use strict";at.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gQ3JlYXRlZCB3aXRoIElua3NjYXBlIChodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy8pIC0tPgoKPHN2ZwogICB3aWR0aD0iMjQwbW0iCiAgIGhlaWdodD0iMjM5Ljk5ODY5bW0iCiAgIHZpZXdCb3g9IjAgMCAyNDAgMjM5Ljk5ODY5IgogICBpZD0ic3ZnNjc0MyIKICAgdmVyc2lvbj0iMS4xIgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxkZWZzCiAgICAgaWQ9ImRlZnMxIiAvPgogIDxnCiAgICAgaWQ9ImxheWVyMSIKICAgICB0cmFuc2Zvcm09InRyYW5zbGF0ZSgtMzAsLTI3LjAwMDY1NikiPgogICAgPGcKICAgICAgIGlkPSJnNzQyNiIKICAgICAgIHRyYW5zZm9ybT0idHJhbnNsYXRlKDMyMi4xNDIsLTUzLjk3MjkwNikiPgogICAgICA8cGF0aAogICAgICAgICBzdHlsZT0iZGlzcGxheTppbmxpbmU7ZmlsbDojNzZjNTUxO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDozLjYxNTMyIgogICAgICAgICBpZD0icGF0aDMzNDQ5IgogICAgICAgICBkPSJtIC04MS4wNjMwOTUsMjA4Ljk0NjA5IGMgLTExLjkwNjMzOSw5LjkyNDIxIC0yNy4xOTQ4ODUsMTUuODk4NyAtNDMuODYwNjM1LDE1Ljg5ODcgLTQuOTU4NTQsMCAtOS43ODcyOCwtMC41NTE1OCAtMTQuNDUwNTksLTEuNTU1MDQgbCAtNC43OTg0Miw1Ljg0NDYgYyAtMTAuNjY0NDksLTIuODU3MzYgLTIwLjM4NDI5LC03Ljk0MDQzIC0yOC42MzI2LC0xNC43NDU3OCBsIC0xMi44OTU1OSwxMi45MjIxMiAxLjU4MTc3LDkuNTQzNDcgLTQ3Ljk2MzQ3LDQ3Ljk4OTY1IDQuNjM4MjcsMS43Njg1IDQ1LjA0MDMyLC0xNy4xNTY1OCA0NS4wNDAyLDE3LjE1NjU4IDQ1LjA0MDMxMiwtMTcuMTU2NTggMTcuMTU4NTQ0LC00NS4wMzk3NiB6IiAvPgogICAgICA8cGF0aAogICAgICAgICBkPSJtIC0yNzIuNDg0OTUsODkuMjk0NjI2IDE3LjE1ODUsNDUuMDQwMjc0IC0xNy4xNTg1LDQ1LjAzOTkzIDE3LjE1ODUsNDUuMDM5NzIgLTE3LjE1ODUsNDUuMDM5NzcgMTAuNTM2MzQsNC4wMjI2NyA1Ny4yMzg1LC01Ny4yMTEwMiAxMC4yNjc2NCwxLjU4MTY5IDEyLjQ2NjczLC0xMi40NjY2OSBjIC03LjM1NTE5LC04LjUyMjIxIC0xMi44NjE3MywtMTguNjkwMiAtMTUuODcwMjcsLTI5LjkyMDMyIGwgNS44NDQ2LC00Ljc5ODQyIGMgLTEuMDA1MzEsLTQuNjYzMjMgLTEuNTU1MDMsLTkuNDkxODkgLTEuNTU1MDMsLTE0LjQ1MDQ0IDAsLTI0Ljc2OTg0IDEzLjIxMDQzLC00Ni41MzQ3MiAzMi45NDg5MywtNTguNjA2NTM0IGwgLTIxLjc5NjkzLC04LjMxMDYzIC00NS4wNDAxOSwxNy4xNTg1NDQgeiIKICAgICAgICAgaWQ9InBhdGgzMzQ0NyIKICAgICAgICAgc3R5bGU9ImRpc3BsYXk6aW5saW5lO2ZpbGw6Izc2YzU1MTtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6My42MTUzMiIgLz4KICAgICAgPHBhdGgKICAgICAgICAgc3R5bGU9ImRpc3BsYXk6aW5saW5lO2ZpbGw6IzU5YTMzNjtmaWxsLW9wYWNpdHk6MTtmaWxsLXJ1bGU6bm9uemVybztzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6My42MTUzMiIKICAgICAgICAgaWQ9InBhdGgzMzQ1MSIKICAgICAgICAgZD0ibSAtODEuMDYzMDk1LDIwOC45NDYwOSBjIC0xMS45MDYzMzksOS45MjQyMSAtMjcuMTk0ODg1LDE1Ljg5ODcgLTQzLjg2MDYzNSwxNS44OTg3IC00Ljk1ODU0LDAgLTkuNzg3MjgsLTAuNTUxNTggLTE0LjQ1MDU5LC0xLjU1NTA0IGwgLTQuNzk4NDIsNS44NDQ2IC0yOC42Nzc0NCwtMTUuMTEyMjggLTEyLjg1MDc1LDEzLjI4ODYyIDEuNTgxNzcsOS41NDM0NyA0Ni44NTI4NCw3LjA1Nzk5IC0wLjA5ODIsNDIuNzAwMTYgNDUuMDQwMzEzLC0xNy4xNTY1OCAxNy4xNTg1NDQsLTQ1LjAzOTc2IHoiIC8+CiAgICAgIDxlbGxpcHNlCiAgICAgICAgIHN0eWxlPSJvcGFjaXR5OjE7ZmlsbDojZmZmZmZmO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxMi43MDQ4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1kYXNob2Zmc2V0OjA7c3Ryb2tlLW9wYWNpdHk6MTttYXJrZXI6bm9uZSIKICAgICAgICAgaWQ9ImVsbGlwc2UzMzQ1MyIKICAgICAgICAgY3g9Ii0xMjIuODMxNjUiCiAgICAgICAgIGN5PSIxNTUuNzA5NTUiCiAgICAgICAgIHJ4PSI1OS44MDE5MjkiCiAgICAgICAgIHJ5PSI2MC45MjkxOTkiIC8+CiAgICAgIDxwYXRoCiAgICAgICAgIHN0eWxlPSJvcGFjaXR5OjE7ZmlsbDojY2NjY2NjO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxMi43MDQ4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1taXRlcmxpbWl0OjQ7c3Ryb2tlLWRhc2hhcnJheTpub25lO3N0cm9rZS1kYXNob2Zmc2V0OjA7c3Ryb2tlLW9wYWNpdHk6MTttYXJrZXI6bm9uZSIKICAgICAgICAgZD0ibSAtNzAuODY3NTQzLDE3OS43NzEyOCBjIC00LjAyMTYxNSwtNjYuNzcwOTQgLTcwLjE4MjM2NywtODMuMzExMTQyIC0xMTAuNDk5NTY3LC00NS43NzAwNCAyMS4wMzY3NywtMjguNTY3MDkgNDguMDUyNzksLTQ2LjA0NTE5NyA3OC41NjYzOCwtMzMuNDA2MDIgMzAuNTEzNjIsMTIuNjM5MTMgNDEuNzk3NzkzLDQ1Ljk4MTczIDMxLjkzMzE4Nyw3OS4xNzYwNiB6IgogICAgICAgICBpZD0icGF0aDMzNDU1IiAvPgogICAgICA8cGF0aAogICAgICAgICBpZD0icGF0aDMzNDU3IgogICAgICAgICBkPSJtIC03My4zOTU1NzUsMTAyLjIyNzI2IGMgLTI4LjMzODE4NSwtMjguMzM4MjY0IC03NC4yODM2NjUsLTI4LjMzODI2NCAtMTAyLjYyMTg5NSwwIC0xNy45Mzc3OSwxNy45Mzc3NiAtMjQuNDg1MjMsNDIuOTEzMjcgLTE5LjcxNDEzLDY2LjAyODgzIGwgLTExLjI3NDg1LDguMTY5MzcgYyA1LjEzNDc3LDEzLjYxNzU2IDEyLjEzMTcsMjEuODU3NCAxNi45MTI0MSwyNi4yOTYzIGwgLTEwLjIyODM5LDEwLjIyODM0IGggLTEwLjgwMjUyIGwgLTgxLjAxNzA1LDgxLjAxNjU0IDI3LjAwNTgzLDI3LjAwNTYxIDgxLjAxNzAxLC04MS4wMTY4MyB2IC0xMC44MDIyNSBsIDEwLjE5NDY0LC0xMC4xOTQyNSBjIDQuNTYxNjIsNC43NTI0NCAxMi42OTk5NywxMS4zODEzOCAyNS43NTY4NiwxNi4zMDQ2OSBsIDcuODY1NDMsLTEwLjkwMzg2IGMgMjMuMzU4NTgsNS4xMjE5NyA0OC43NDIyNDUsLTEuMzQ3MDEgNjYuOTA2NDk4LC0xOS41MTE1IDI4LjMzODM4NiwtMjguMzM3MzIgMjguMzM4MTksLTc0LjI4Mjc2IDEuNTdlLTQsLTEwMi42MjA5OSB6IG0gLTEyLjk2MjgzNSwxMi45NjI5NiBjIDIxLjE3OTA5NSwyMS4xNzkyMSAyMS4xNzkwOTUsNTUuNTE2ODUgMCw3Ni42OTU3OSAtMjEuMTc5MDIsMjEuMTc4OTcgLTU1LjUxNzIxLDIxLjE3ODk3IC03Ni42OTYzLDAgLTIxLjE3ODk4LC0yMS4xNzg5NCAtMjEuMTc4OTgsLTU1LjUxNjU4IDAsLTc2LjY5NTc5IDIxLjE3OTI5LC0yMS4xNzkyMTYgNTUuNTE3MjgsLTIxLjE3OTIxNiA3Ni42OTYzLDAgeiIKICAgICAgICAgc3R5bGU9ImNvbG9yOiMwMDAwMDA7ZGlzcGxheTppbmxpbmU7b3ZlcmZsb3c6dmlzaWJsZTt2aXNpYmlsaXR5OnZpc2libGU7ZmlsbDojMmYyZjJmO2ZpbGwtb3BhY2l0eToxO2ZpbGwtcnVsZTpub256ZXJvO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDo3Ljc2MDU5O21hcmtlcjpub25lO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGUiIC8+CiAgICA8L2c+CiAgPC9nPgo8L3N2Zz4K"},5940:at=>{"use strict";at.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyNC4wLjIsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4KPHN2ZyB2ZXJzaW9uPSIxLjEiIGlkPSJDYWxxdWVfMSIgeD0iMHB4IiB5PSIwcHgiIHdpZHRoPSIzNDMuMjU3NTdtbSIgaGVpZ2h0PSIzNDMuMjU3NTdtbSIgdmlld0JveD0iMCAwIDEyOTcuMzUxNSAxMjk3LjM1MTMiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iPjxtZXRhZGF0YSBpZD0ibWV0YWRhdGExMTgiPjxyZGY6UkRGPjxjYzpXb3JrIHJkZjphYm91dD0iIj48ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD48ZGM6dHlwZSByZGY6cmVzb3VyY2U9Imh0dHA6Ly9wdXJsLm9yZy9kYy9kY21pdHlwZS9TdGlsbEltYWdlIi8+PC9jYzpXb3JrPjwvcmRmOlJERj48L21ldGFkYXRhPjxkZWZzIGlkPSJkZWZzNzIiPjxyZWN0IHg9IjExNTAuMzg0MyIgeT0iMjI5Mi44MTYyIiB3aWR0aD0iMjEwNy44ODc5IiBoZWlnaHQ9IjcwMS44ODcxNSIgaWQ9InJlY3QxNDE4MjMiLz48cmVjdCB4PSI0MTEuODgyNjkiIHk9IjEyNjEuNjEwOCIgd2lkdGg9IjgxNS4zNDY2OCIgaGVpZ2h0PSIxODEuOTI5MTEiIGlkPSJyZWN0NjY3NzUiLz48cmVjdCB4PSIyNTMuMDIwMDgiIHk9IjEyMTMuMDM1MiIgd2lkdGg9IjIyMDkuNzE5NyIgaGVpZ2h0PSI1ODMuNjU3NjUiIGlkPSJyZWN0NjAyNzkiLz48cmVjdCB4PSIxMTUwLjM4NDMiIHk9IjIyOTIuODE2MiIgd2lkdGg9IjI1NTEuMDA4MSIgaGVpZ2h0PSI3MDEuMzkxMzYiIGlkPSJyZWN0MTQxODIzLTEiLz48bGluZWFyR3JhZGllbnQgeTI9IjYyLjI4ODYwMSIgeDI9IjI0OC42OTE4IiB5MT0iMjMxLjcxMTQiIHgxPSIzNDYuNTA4MjEiIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIiBpZD0iU1ZHSURfMV8iIGdyYWRpZW50VHJhbnNmb3JtPSJtYXRyaXgoNi42MzI2NzYxLDAsMCw2LjYzMjY3NjEsLTEyMjEuNDA3OSwtNzEzLjY0NjY3KSI+CgkJPHN0b3AgaWQ9InN0b3A0IiBzdHlsZT0ic3RvcC1jb2xvcjojOEYyQTg1IiBvZmZzZXQ9IjAiLz4KCQk8c3RvcCBpZD0ic3RvcDYiIHN0eWxlPSJzdG9wLWNvbG9yOiMyNTcwQjYiIG9mZnNldD0iMSIvPgoJPC9saW5lYXJHcmFkaWVudD48L2RlZnM+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyIgaWQ9InN0eWxlMiI+Cgkuc3Qwe2ZpbGw6dXJsKCNTVkdJRF8xXyk7fQoJLnN0MXtmaWxsOiNGRkZGRkY7fQoJLnN0MntkaXNwbGF5Om5vbmU7ZmlsbDpub25lO3N0cm9rZTojRTYyMDU0O3N0cm9rZS13aWR0aDo3LjU7c3Ryb2tlLW1pdGVybGltaXQ6MTA7fQo8L3N0eWxlPgoKPHRleHQgeT0iLTIyNDguODE4OCIgc3R5bGU9ImZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtd2VpZ2h0Om5vcm1hbDtmb250LXNpemU6NDBweDtsaW5lLWhlaWdodDoxMjUlO2ZvbnQtZmFtaWx5OlNhbnM7bGV0dGVyLXNwYWNpbmc6MHB4O3dvcmQtc3BhY2luZzowcHg7d2hpdGUtc3BhY2U6cHJlO3NoYXBlLWluc2lkZTp1cmwoI3JlY3Q2MDI3OSk7ZGlzcGxheTppbmxpbmU7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxcHg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIgaWQ9InRleHQ2MDI3NyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgdHJhbnNmb3JtPSJtYXRyaXgoMC45OTk5OTg4OSwwLDAsMC45OTk5OTg4OSwtMTY0LjcxOTkxLC0xNjUuMTg0NjcpIi8+PHRleHQgeT0iLTQzMjQuMTkzNCIgeD0iMzA0LjA2ODE1IiBzdHlsZT0iZm9udC1zdHlsZTpub3JtYWw7Zm9udC13ZWlnaHQ6bm9ybWFsO2ZvbnQtc2l6ZTo4OS44MDU4cHg7bGluZS1oZWlnaHQ6MjAwJTtmb250LWZhbWlseTpTYW5zO2xldHRlci1zcGFjaW5nOjBweDt3b3JkLXNwYWNpbmc6MHB4O3doaXRlLXNwYWNlOnByZTtzaGFwZS1pbnNpZGU6dXJsKCNyZWN0NjY3NzUpO2Rpc3BsYXk6aW5saW5lO2ZpbGw6IzAwMDAwMDtmaWxsLW9wYWNpdHk6MTtzdHJva2U6bm9uZTtzdHJva2Utd2lkdGg6Mi4yNDUxNXB4O3N0cm9rZS1saW5lY2FwOmJ1dHQ7c3Ryb2tlLWxpbmVqb2luOm1pdGVyO3N0cm9rZS1vcGFjaXR5OjEiIGlkPSJ0ZXh0NjY3NzMiIHhtbDpzcGFjZT0icHJlc2VydmUiIHRyYW5zZm9ybT0ibWF0cml4KDAuOTk5OTk4ODksMCwwLDAuOTk5OTk4ODksLTE2NC43MTk5MSwtMTY1LjE4NDY3KSIvPjx0ZXh0IHk9Ii0yMjQ4LjUxNzMiIHg9Ii0xMjEuNjY4NjkiIHN0eWxlPSJmb250LXN0eWxlOm5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zaXplOjQwcHg7bGluZS1oZWlnaHQ6MDtmb250LWZhbWlseTpTYW5zO2xldHRlci1zcGFjaW5nOjBweDt3b3JkLXNwYWNpbmc6MHB4O3doaXRlLXNwYWNlOnByZTtzaGFwZS1pbnNpZGU6dXJsKCNyZWN0MTQxODIzKTtkaXNwbGF5OmlubGluZTtmaWxsOiMwMDAwMDA7ZmlsbC1vcGFjaXR5OjE7c3Ryb2tlOm5vbmU7c3Ryb2tlLXdpZHRoOjFweDtzdHJva2UtbGluZWNhcDpidXR0O3N0cm9rZS1saW5lam9pbjptaXRlcjtzdHJva2Utb3BhY2l0eToxIiBpZD0idGV4dDE0MTgyMSIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgdHJhbnNmb3JtPSJtYXRyaXgoMC45OTk5OTg4OSwwLDAsMC45OTk5OTg4OSwtMTY0LjcxOTkxLC0xNjUuMTg0NjcpIi8+PHRleHQgeT0iLTMxODEuMTczMSIgeD0iLTE1OC44Mzk4NCIgc3R5bGU9ImZvbnQtc3R5bGU6bm9ybWFsO2ZvbnQtd2VpZ2h0Om5vcm1hbDtmb250LXNpemU6NDBweDtsaW5lLWhlaWdodDowO2ZvbnQtZmFtaWx5OlNhbnM7bGV0dGVyLXNwYWNpbmc6MHB4O3dvcmQtc3BhY2luZzowcHg7d2hpdGUtc3BhY2U6cHJlO3NoYXBlLWluc2lkZTp1cmwoI3JlY3QxNDE4MjMtMSk7ZGlzcGxheTppbmxpbmU7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDoxcHg7c3Ryb2tlLWxpbmVjYXA6YnV0dDtzdHJva2UtbGluZWpvaW46bWl0ZXI7c3Ryb2tlLW9wYWNpdHk6MSIgaWQ9InRleHQxNDE4MjEtMCIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgdHJhbnNmb3JtPSJtYXRyaXgoMC45OTk5OTg4OSwwLDAsMC45OTk5OTg4OSwtMTY0LjcxOTkxLC0xNjUuMTg0NjcpIi8+PHBhdGggc3R5bGU9ImRpc3BsYXk6bm9uZTtmaWxsOm5vbmU7c3Ryb2tlOiNlNjIwNTQ7c3Ryb2tlLXdpZHRoOjQ5Ljc0NTE7c3Ryb2tlLW1pdGVybGltaXQ6MTAiIGlkPSJwYXRoNDkiIGQ9Im0gMTA2NS44NzEsNTAzLjQyMDExIGMgLTE5LjIzNDcsMCAtMzUuMTUzMSwtMTUuOTE4NDIgLTM1LjE1MzEsLTM1LjE1MzE4IFYgMzM0LjI4Njg3IEggODcwLjg3MDMyIGMgLTE5LjIzNDc2LDAgLTM1LjE1MzE5LC0xNS45MTg0MiAtMzUuMTUzMTksLTM1LjE1MzE4IDAsLTE5LjIzNDc2IDE1LjkxODQzLC0zNS4xNTMxOSAzNS4xNTMxOSwtMzUuMTUzMTkgSCAxMDY1Ljg3MSBjIDE5LjIzNDgsMCAzNS4xNTMyLDE1LjkxODQzIDM1LjE1MzIsMzUuMTUzMTkgdiAxNjkuMTMzMjQgYyAwLjY2MzMsMTkuMjM0NzYgLTE1LjI1NTEsMzUuMTUzMTggLTM1LjE1MzIsMzUuMTUzMTggeiIgY2xhc3M9InN0MiIvPjxwYXRoIHN0eWxlPSJkaXNwbGF5Om5vbmU7ZmlsbDpub25lO3N0cm9rZTojZTYyMDU0O3N0cm9rZS13aWR0aDo0OS43NDUxO3N0cm9rZS1taXRlcmxpbWl0OjEwIiBpZD0icGF0aDUzIiBkPSJNIDQyNi40ODEwMiwxMDMyLjcwNzcgSCAyMzEuNDgwMzQgYyAtMTkuMjM0NzYsMCAtMzUuMTUzMTgsLTE1LjkxODUgLTM1LjE1MzE4LC0zNS4xNTMyMiBWIDgyOC40MjEyNCBjIDAsLTE5LjIzNDc2IDE1LjkxODQyLC0zNS4xNTMxOCAzNS4xNTMxOCwtMzUuMTUzMTggMTkuMjM0NzYsMCAzNS4xNTMxOCwxNS45MTg0MiAzNS4xNTMxOCwzNS4xNTMxOCB2IDEzMy4zMTY3OSBoIDE1OS44NDc1IGMgMTkuMjM0NzYsMCAzNS4xNTMxOCwxNS45MTg0MiAzNS4xNTMxOCwzNS4xNTMxOCAwLDE5LjIzNDc5IC0xNS4yNTUxNSwzNS44MTY0OSAtMzUuMTUzMTgsMzUuODE2NDkgeiIgY2xhc3M9InN0MiIvPjxwYXRoIHN0eWxlPSJkaXNwbGF5Om5vbmU7ZmlsbDpub25lO3N0cm9rZTojZTYyMDU0O3N0cm9rZS13aWR0aDo0OS43NDUxO3N0cm9rZS1taXRlcmxpbWl0OjEwIiBpZD0icGF0aDU3IiBkPSJtIDIzMS40ODAzNCw1MDMuNDIwMTEgYyAtMTkuMjM0NzYsMCAtMzUuMTUzMTgsLTE1LjkxODQyIC0zNS4xNTMxOCwtMzUuMTUzMTggViAyOTkuMTMzNjkgYyAwLC0xOS4yMzQ3NiAxNS45MTg0MiwtMzUuMTUzMTkgMzUuMTUzMTgsLTM1LjE1MzE5IGggMTk1LjAwMDY4IGMgMTkuMjM0NzYsMCAzNS4xNTMxOCwxNS45MTg0MyAzNS4xNTMxOCwzNS4xNTMxOSAwLDE5LjIzNDc2IC0xNS45MTg0MiwzNS4xNTMxOCAtMzUuMTUzMTgsMzUuMTUzMTggaCAtMTU5Ljg0NzUgdiAxMzMuMzE2NzkgYyAwLjY2MzI3LDE5Ljg5ODAzIC0xNS4yNTUxNSwzNS44MTY0NSAtMzUuMTUzMTgsMzUuODE2NDUgeiIgY2xhc3M9InN0MiIvPjxwYXRoIHN0eWxlPSJkaXNwbGF5Om5vbmU7ZmlsbDpub25lO3N0cm9rZTojZTYyMDU0O3N0cm9rZS13aWR0aDo0OS43NDUxO3N0cm9rZS1taXRlcmxpbWl0OjEwIiBpZD0icGF0aDYxIiBkPSJNIDEwNjUuODcxLDEwMzIuNzA3NyBIIDg3MC44NzAzMiBjIC0xOS4yMzQ3NiwwIC0zNS4xNTMxOSwtMTUuOTE4NSAtMzUuMTUzMTksLTM1LjE1MzIyIDAsLTE5LjIzNDc2IDE1LjkxODQzLC0zNS4xNTMxOCAzNS4xNTMxOSwtMzUuMTUzMTggSCAxMDMwLjcxNzkgViA4MjkuMDg0NTEgYyAwLC0xOS4yMzQ3NiAxNS45MTg0LC0zNS4xNTMxOSAzNS4xNTMxLC0zNS4xNTMxOSAxOS4yMzQ4LDAgMzUuMTUzMiwxNS45MTg0MyAzNS4xNTMyLDM1LjE1MzE5IHYgMTY5LjEzMzI0IGMgMC42NjMzLDE4LjU3MTQ1IC0xNS4yNTUxLDM0LjQ4OTk1IC0zNS4xNTMyLDM0LjQ4OTk1IHoiIGNsYXNzPSJzdDIiLz48ZyBpZD0iZzEiIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0xMDMuODAwODQsMzg3LjMxOSkiPjxjaXJjbGUgc3R5bGU9ImZpbGw6dXJsKCNTVkdJRF8xXyk7c3Ryb2tlLXdpZHRoOjYuNjMyNjgiIGlkPSJjaXJjbGU5IiByPSI2NDguNjc1NzIiIGN5PSIyNjEuMzU2NzIiIGN4PSI3NTIuNDc2NTYiIGNsYXNzPSJzdDAiLz48cGF0aCBzdHlsZT0iZmlsbDojZmZmZmZmO3N0cm9rZS13aWR0aDo2LjYzMjY4IiBpZD0icGF0aDExIiBkPSJtIDQ2NS4yODE2MywxOTkuNjcyODMgYyAtMC42NjMyNywwIC0xLjMyNjUzLDAgLTEuOTg5OCwwIGwgLTM2LjQ3OTcyLC0xMC42MTIyOCBjIC0yLjY1MzA3LC0wLjY2MzI3IC00LjY0Mjg3LC0zLjMxNjM0IC00LjY0Mjg3LC02LjYzMjY4IHYgLTQ5LjA4MTggYyAwLC0xLjk4OTggMS4zMjY1MywtMy45Nzk2MSAyLjY1MzA3LC01LjMwNjE0IDEuOTg5OCwtMS4zMjY1NCAzLjk3OTYsLTEuMzI2NTQgNS45Njk0MSwtMC42NjMyNyBsIDM2LjQ3OTcyLDEzLjI2NTM1IGMgMi42NTMwNywwLjY2MzI3IDQuNjQyODcsMy4zMTYzNCA0LjY0Mjg3LDUuOTY5NDEgdiA0Ni40Mjg3MyBjIDAsMS45ODk4MSAtMC42NjMyNywzLjk3OTYxIC0yLjY1MzA3LDUuMzA2MTQgLTEuMzI2NTQsMC42NjMyNyAtMi42NTMwNywxLjMyNjU0IC0zLjk3OTYxLDEuMzI2NTQgeiBtIC0yOS44NDcwNCwtMjIuNTUxMSAyMy4yMTQzNyw2LjYzMjY4IHYgLTMzLjE2MzM4IGwgLTIzLjIxNDM3LC04LjYyMjQ4IHoiIGNsYXNzPSJzdDEiLz48cGF0aCBzdHlsZT0iZmlsbDojZmZmZmZmO3N0cm9rZS13aWR0aDo2LjYzMjY4IiBpZD0icGF0aDEzIiBkPSJtIDQ2NS4yODE2MywyOTIuNTMwMjkgYyAtMC42NjMyNywwIC0wLjY2MzI3LDAgLTEuMzI2NTMsMCBsIC0zNi40Nzk3MiwtNy45NTkyMSBjIC0zLjMxNjM0LC0wLjY2MzI2IC01LjMwNjE0LC0zLjMxNjMzIC01LjMwNjE0LC02LjYzMjY3IFYgMjI4Ljg1NjYgYyAwLC0xLjk4OTggMC42NjMyNywtMy45Nzk2IDIuNjUzMDcsLTUuMzA2MTQgMS4zMjY1MywtMS4zMjY1MyAzLjk3OTYsLTEuOTg5OCA1Ljk2OTQxLC0xLjMyNjUzIGwgMzYuNDc5NzIsOS4yODU3NCBjIDIuNjUzMDcsMC42NjMyNyA1LjMwNjE0LDMuMzE2MzQgNS4zMDYxNCw2LjYzMjY4IHYgNDcuNzU1MjcgYyAwLDEuOTg5OCAtMC42NjMyNywzLjk3OTYgLTIuNjUzMDcsNS4zMDYxNCAtMS45ODk4MSwwLjY2MzI3IC0zLjMxNjM0LDEuMzI2NTMgLTQuNjQyODgsMS4zMjY1MyB6IG0gLTI5Ljg0NzA0LC0xOS44OTgwMiAyMy4yMTQzNyw1LjMwNjE0IHYgLTM0LjQ4OTkyIGwgLTIzLjIxNDM3LC01Ljk2OTQxIHoiIGNsYXNzPSJzdDEiLz48cGF0aCBzdHlsZT0iZmlsbDojZmZmZmZmO3N0cm9rZS13aWR0aDo2LjYzMjY4IiBpZD0icGF0aDE1IiBkPSJtIDUyNS42Mzg5OCwzMDYuNDU4OTEgYyAtMC42NjMyNiwwIC0xLjMyNjUzLDAgLTEuMzI2NTMsMCBsIC0zNi40Nzk3MiwtOC42MjI0NyBjIC0zLjMxNjM0LC0wLjY2MzI3IC01LjMwNjE0LC0zLjMxNjM0IC01LjMwNjE0LC02LjYzMjY4IHYgLTQ4LjQxODU0IGMgMCwtMS45ODk4IDAuNjYzMjcsLTMuOTc5NiAyLjY1MzA3LC01LjMwNjE0IDEuOTg5OCwtMS4zMjY1MyAzLjk3OTYxLC0xLjk4OTggNS45Njk0MSwtMS4zMjY1MyBsIDM2LjQ3OTcyLDkuMjg1NzQgYyAyLjY1MzA3LDAuNjYzMjcgNS4zMDYxNCwzLjMxNjM0IDUuMzA2MTQsNi42MzI2OCB2IDQ3Ljc1NTI3IGMgMCwxLjk4OTggLTAuNjYzMjcsMy45Nzk2IC0yLjY1MzA3LDUuMzA2MTQgLTEuOTg5OCwwLjY2MzI3IC0zLjMxNjM0LDEuMzI2NTMgLTQuNjQyODgsMS4zMjY1MyB6IG0gLTI5Ljg0NzA0LC0yMC41NjEyOSAyMy4yMTQzNyw1LjMwNjE0IHYgLTM0LjQ4OTkyIGwgLTIzLjIxNDM3LC01Ljk2OTQxIHoiIGNsYXNzPSJzdDEiLz48cGF0aCBzdHlsZT0iZmlsbDojZmZmZmZmO3N0cm9rZS13aWR0aDo2LjYzMjY4IiBpZD0icGF0aDE3IiBkPSJtIDYwOS44NzM5NywyODUuMjM0MzUgYyAtMC42NjMyNywwIC0xLjMyNjUzLDAgLTEuOTg5OCwwIGwgLTQzLjExMjQsLTE0LjU5MTg5IGMgLTIuNjUzMDcsLTAuNjYzMjYgLTMuOTc5NiwtMy4zMTYzMyAtMy45Nzk2LC01LjMwNjE0IHYgLTMwLjUxMDMxIGMgMCwtMS45ODk4IDAuNjYzMjcsLTMuOTc5NiAyLjY1MzA3LC00LjY0Mjg3IDEuMzI2NTMsLTEuMzI2NTQgMy4zMTYzNCwtMS4zMjY1NCA1LjMwNjE0LC0wLjY2MzI3IGwgNDMuMTEyMzksMTUuOTE4NDIgYyAxLjk4OTgxLDAuNjYzMjcgMy45Nzk2MSwzLjMxNjM0IDMuOTc5NjEsNS4zMDYxNCB2IDI5LjE4Mzc4IGMgMCwxLjk4OTggLTAuNjYzMjcsMy4zMTYzNCAtMi42NTMwNyw0LjY0Mjg3IC0wLjY2MzI3LDAgLTEuOTg5OCwwLjY2MzI3IC0zLjMxNjM0LDAuNjYzMjcgeiBtIC0zNy4xNDI5OCwtMjQuNTQwOSAzMS44MzY4NCwxMC42MTIyOCB2IC0xNy4yNDQ5NiBsIC0zMS44MzY4NCwtMTEuOTM4ODEgeiIgY2xhc3M9InN0MSIvPjxwYXRoIHN0eWxlPSJmaWxsOiNmZmZmZmY7c3Ryb2tlLXdpZHRoOjYuNjMyNjgiIGlkPSJwYXRoMTkiIGQ9Im0gNjM4LjM5NDQ4LDM1MC4yMzQ1OCBjIC0wLjY2MzI3LDAgLTAuNjYzMjcsMCAtMS4zMjY1NCwwIGwgLTQxLjc4NTg2LC05Ljk0OTAyIGMgLTIuNjUzMDcsLTAuNjYzMjcgLTQuNjQyODcsLTIuNjUzMDcgLTQuNjQyODcsLTUuMzA2MTQgdiAtMzEuMTczNTggYyAwLC0xLjk4OTggMC42NjMyNywtMy4zMTYzMyAxLjk4OTgsLTQuNjQyODcgMS4zMjY1NCwtMS4zMjY1MyAzLjMxNjM0LC0xLjMyNjUzIDUuMzA2MTQsLTAuNjYzMjcgbCA0MS43ODU4NiwxMS4yNzU1NSBjIDIuNjUzMDcsMC42NjMyNyAzLjk3OTYxLDIuNjUzMDcgMy45Nzk2MSw1LjMwNjE0IHYgMjkuODQ3MDUgYyAwLDEuOTg5OCAtMC42NjMyNywzLjMxNjMzIC0xLjk4OTgsNC42NDI4NyAtMC42NjMyNywwIC0xLjk4OTgxLDAuNjYzMjcgLTMuMzE2MzQsMC42NjMyNyB6IG0gLTM1LjgxNjQ1LC0yMC41NjEzIDMwLjUxMDMxLDcuMjk1OTQgViAzMTkuMDYxIGwgLTMwLjUxMDMxLC03Ljk1OTIxIHoiIGNsYXNzPSJzdDEiLz48cGF0aCBzdHlsZT0iZmlsbDojZmZmZmZmO3N0cm9rZS13aWR0aDo2LjYzMjY4IiBpZD0icGF0aDIxIiBkPSJtIDUyNS42Mzg5OCwyMTguMjQ0MzIgYyAtMC42NjMyNiwwIC0xLjMyNjUzLDAgLTEuOTg5OCwwIGwgLTM3LjE0Mjk4LC05Ljk0OTAxIGMgLTIuNjUzMDcsLTAuNjYzMjcgLTQuNjQyODgsLTMuMzE2MzQgLTQuNjQyODgsLTYuNjMyNjggdiAtNDkuMDgxOCBjIDAsLTEuOTg5OCAxLjMyNjU0LC0zLjk3OTYxIDIuNjUzMDcsLTUuMzA2MTQgMS45ODk4MSwtMS4zMjY1NCAzLjk3OTYxLC0xLjMyNjU0IDUuOTY5NDEsLTAuNjYzMjcgbCAzNy4xNDI5OSwxMy4yNjUzNSBjIDIuNjUzMDcsMC42NjMyNyA0LjY0Mjg3LDMuMzE2MzQgNC42NDI4Nyw1Ljk2OTQxIHYgNDUuNzY1NDcgYyAwLDEuOTg5OCAtMC42NjMyNywzLjk3OTYgLTIuNjUzMDcsNS4zMDYxNCAtMS4zMjY1MywwLjY2MzI2IC0yLjY1MzA3LDEuMzI2NTMgLTMuOTc5NjEsMS4zMjY1MyB6IG0gLTMwLjUxMDMxLC0yMS44ODc4MyAyMy44Nzc2NCw2LjYzMjY4IHYgLTMyLjUwMDEyIGwgLTIzLjg3NzY0LC04LjYyMjQ3IHoiIGNsYXNzPSJzdDEiLz48cGF0aCBzdHlsZT0iZmlsbDojZmZmZmZmO3N0cm9rZS13aWR0aDo2LjYzMjY4IiBpZD0icGF0aDIzIiBkPSJtIDY5MC43OTI2MiwzNTYuODY3MjUgYyAtOC42MjI0OCwwIC0xNS4yNTUxNiwtNy45NTkyMSAtMTUuMjU1MTYsLTE3LjI0NDk2IDAsLTkuMjg1NzQgNi42MzI2OCwtMTcuMjQ0OTUgMTUuMjU1MTYsLTE3LjI0NDk1IDguNjIyNDgsMCAxNS4yNTUxNSw3Ljk1OTIxIDE1LjI1NTE1LDE3LjI0NDk1IDAsOS4yODU3NSAtNi42MzI2NywxNy4yNDQ5NiAtMTUuMjU1MTUsMTcuMjQ0OTYgeiBtIDAsLTI1LjIwNDE3IGMgLTMuMzE2MzQsMCAtNS45Njk0MSwzLjMxNjM0IC01Ljk2OTQxLDcuOTU5MjEgMCw0LjY0Mjg4IDIuNjUzMDcsNy45NTkyMiA1Ljk2OTQxLDcuOTU5MjIgMy4zMTYzNCwwIDUuOTY5NDEsLTMuMzE2MzQgNS45Njk0MSwtNy45NTkyMiAwLC00LjY0Mjg3IC0yLjY1MzA3LC03Ljk1OTIxIC01Ljk2OTQxLC03Ljk1OTIxIHoiIGNsYXNzPSJzdDEiLz48cGF0aCBzdHlsZT0iZmlsbDojZmZmZmZmO3N0cm9rZS13aWR0aDo2LjYzMjY4IiBpZD0icGF0aDI1IiBkPSJtIDEwNDEuNjYxMiwxOTkuNjcyODMgYyAtMS4zMjY1LDAgLTIuNjUzMSwtMC42NjMyNyAtMy45Nzk2LC0xLjMyNjU0IC0xLjk4OTgsLTEuMzI2NTMgLTIuNjUzMSwtMy4zMTYzMyAtMi42NTMxLC01LjMwNjE0IHYgLTQ2LjQyODczIGMgMCwtMi42NTMwNyAxLjk4OTgsLTUuMzA2MTQgNC42NDI5LC01Ljk2OTQxIGwgMzYuNDc5NywtMTMuMjY1MzUgYyAxLjk4OTgsLTAuNjYzMjcgMy45Nzk2LC0wLjY2MzI3IDUuOTY5NCwwLjY2MzI3IDEuOTg5OCwxLjMyNjUzIDIuNjUzMSwzLjMxNjM0IDIuNjUzMSw1LjMwNjE0IHYgNDkuMDgxOCBjIDAsMi42NTMwNyAtMS45ODk4LDUuMzA2MTQgLTQuNjQyOSw2LjYzMjY4IGwgLTM2LjQ3OTcsMTAuNjEyMjggYyAtMC42NjMzLDAgLTEuMzI2NSwwIC0xLjk4OTgsMCB6IG0gNi42MzI3LC00OC40MTg1NCB2IDMzLjE2MzM4IGwgMjMuMjE0MywtNi42MzI2NyB2IC0zNC40ODk5MiB6IiBjbGFzcz0ic3QxIi8+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZmZmZjtzdHJva2Utd2lkdGg6Ni42MzI2OCIgaWQ9InBhdGgyNyIgZD0ibSAxMDQxLjY2MTIsMjkyLjUzMDI5IGMgLTEuMzI2NSwwIC0yLjY1MzEsLTAuNjYzMjYgLTMuOTc5NiwtMS4zMjY1MyAtMS4zMjY2LC0xLjMyNjU0IC0yLjY1MzEsLTMuMzE2MzQgLTIuNjUzMSwtNS4zMDYxNCB2IC00Ny43NTUyNyBjIDAsLTMuMzE2MzQgMS45ODk4LC01Ljk2OTQxIDUuMzA2MiwtNi42MzI2OCBsIDM2LjQ3OTcsLTkuMjg1NzQgYyAxLjk4OTgsLTAuNjYzMjcgMy45Nzk2LDAgNS45Njk0LDEuMzI2NTMgMS4zMjY1LDEuMzI2NTQgMi42NTMsMy4zMTYzNCAyLjY1Myw1LjMwNjE0IHYgNDkuMDgxODEgYyAwLDMuMzE2MzQgLTEuOTg5OCw1Ljk2OTQxIC01LjMwNjEsNi42MzI2NyBsIC0zNi40Nzk3LDcuOTU5MjEgYyAtMS4zMjY1LDAgLTEuMzI2NSwwIC0xLjk4OTgsMCB6IG0gNi42MzI3LC00OS4wODE4IHYgMzQuNDg5OTIgbCAyMy4yMTQzLC01LjMwNjE0IHYgLTM1LjE1MzE5IHoiIGNsYXNzPSJzdDEiLz48cGF0aCBzdHlsZT0iZmlsbDojZmZmZmZmO3N0cm9rZS13aWR0aDo2LjYzMjY4IiBpZD0icGF0aDI5IiBkPSJtIDk4MS45NjcxLDMwNi40NTg5MSBjIC0xLjMyNjUzLDAgLTIuNjUzMDcsLTAuNjYzMjYgLTMuOTc5NjEsLTEuMzI2NTMgLTEuMzI2NTMsLTEuMzI2NTQgLTIuNjUzMDcsLTMuMzE2MzQgLTIuNjUzMDcsLTUuMzA2MTQgdiAtNDcuNzU1MjcgYyAwLC0zLjMxNjM0IDEuOTg5ODEsLTUuOTY5NDEgNS4zMDYxNSwtNi42MzI2OCBsIDM2LjQ3OTczLC05LjI4NTc0IGMgMS45ODk4LC0wLjY2MzI3IDMuOTc5NiwwIDUuOTY5NCwxLjMyNjUzIDEuMzI2NSwxLjMyNjU0IDIuNjUzMSwzLjMxNjM0IDIuNjUzMSw1LjMwNjE0IHYgNDguNDE4NTQgYyAwLDMuMzE2MzQgLTEuOTg5OCw1Ljk2OTQxIC01LjMwNjIsNi42MzI2OCBsIC0zNi40Nzk3LDguNjIyNDcgYyAtMC42NjMyNiwwIC0xLjMyNjUzLDAgLTEuOTg5OCwwIHogbSA2LjYzMjY4LC00OS4wODE4IHYgMzQuNDg5OTIgbCAyMy4yMTQzMiwtNS4zMDYxNCB2IC0zNC40ODk5MiB6IiBjbGFzcz0ic3QxIi8+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZmZmZjtzdHJva2Utd2lkdGg6Ni42MzI2OCIgaWQ9InBhdGgzMSIgZD0ibSA4OTcuMDY4ODUsMjg1LjIzNDM1IGMgLTEuMzI2NTQsMCAtMi42NTMwNywtMC42NjMyNyAtMy4zMTYzNCwtMS4zMjY1MyAtMS4zMjY1NCwtMS4zMjY1NCAtMi42NTMwNywtMi42NTMwNyAtMi42NTMwNywtNC42NDI4OCB2IC0yOS4xODM3NyBjIDAsLTIuNjUzMDcgMS4zMjY1MywtNC42NDI4OCAzLjk3OTYsLTUuMzA2MTQgbCA0My43NzU2NywtMTUuOTE4NDMgYyAxLjk4OTgsLTAuNjYzMjYgMy45Nzk2LC0wLjY2MzI2IDUuMzA2MTQsMC42NjMyNyAxLjMyNjUzLDEuMzI2NTQgMi42NTMwNywyLjY1MzA3IDIuNjUzMDcsNC42NDI4NyB2IDMwLjUxMDMxIGMgMCwyLjY1MzA4IC0xLjMyNjU0LDQuNjQyODggLTMuOTc5NjEsNS4zMDYxNSBsIC00My43NzU2NiwxNC41OTE4OCBjIC0wLjY2MzI3LDAuNjYzMjcgLTEuMzI2NTQsMC42NjMyNyAtMS45ODk4LDAuNjYzMjcgeiBtIDUuOTY5NCwtMzEuMTczNTggdiAxNy4yNDQ5NiBsIDMyLjUwMDEyLC0xMC42MTIyOCB2IC0xNy45MDgyMyB6IiBjbGFzcz0ic3QxIi8+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZmZmZjtzdHJva2Utd2lkdGg6Ni42MzI2OCIgaWQ9InBhdGgzMyIgZD0ibSA4NjUuODk1MjcsMzQ5LjU3MTMxIGMgLTEuMzI2NTQsLTEuMzI2NTQgLTEuOTg5OCwtMi42NTMwNyAtMS45ODk4LC00LjY0Mjg3IHYgLTI5Ljg0NzA1IGMgMCwtMi42NTMwNyAxLjk4OTgsLTQuNjQyODcgMy45Nzk2LC01LjMwNjE0IGwgNDEuNzg1ODYsLTExLjI3NTU1IGMgMS45ODk4LC0wLjY2MzI2IDMuMzE2MzQsMCA1LjMwNjE0LDAuNjYzMjcgMS4zMjY1NCwxLjMyNjU0IDEuOTg5OCwyLjY1MzA3IDEuOTg5OCw0LjY0Mjg3IHYgMzEuMTczNTggYyAwLDIuNjUzMDcgLTEuOTg5OCw1LjMwNjE0IC00LjY0Mjg3LDUuMzA2MTQgbCAtNDEuNzg1ODYsOS45NDkwMiBjIC0wLjY2MzI3LDAuNjYzMjYgLTMuOTc5NiwwIC00LjY0Mjg3LC0wLjY2MzI3IHogbSA5LjI4NTc1LC0yOS44NDcwNCB2IDE3LjkwODIyIGwgMzAuNTEwMzEsLTcuMjk1OTQgdiAtMTkuMjM0NzYgeiIgY2xhc3M9InN0MSIvPjxwYXRoIHN0eWxlPSJmaWxsOiNmZmZmZmY7c3Ryb2tlLXdpZHRoOjYuNjMyNjgiIGlkPSJwYXRoMzUiIGQ9Im0gOTgxLjk2NzEsMjE4LjI0NDMyIGMgLTEuMzI2NTMsMCAtMi42NTMwNywtMC42NjMyNyAtMy45Nzk2MSwtMS4zMjY1MyAtMS4zMjY1MywtMS4zMjY1NCAtMi42NTMwNywtMy4zMTYzNCAtMi42NTMwNywtNS4zMDYxNCB2IC00NS43NjU0NyBjIDAsLTIuNjUzMDcgMS45ODk4MSwtNS4zMDYxNCA0LjY0Mjg4LC01Ljk2OTQxIGwgMzYuNDc5NywtMTMuMjY1MzUgYyAxLjk4OTgsLTAuNjYzMjcgMy45Nzk2LC0wLjY2MzI3IDUuOTY5NCwwLjY2MzI3IDEuOTg5OCwxLjMyNjUzIDIuNjUzMSwzLjMxNjM0IDIuNjUzMSw1LjMwNjE0IHYgNDkuMDgxOCBjIDAsMy4zMTYzNCAtMS45ODk4LDUuMzA2MTQgLTQuNjQyOSw2LjYzMjY4IGwgLTM2LjQ3OTcsOS45NDkwMSBjIC0wLjY2MzI2LDAgLTEuMzI2NTMsMCAtMS45ODk4LDAgeiBtIDYuNjMyNjgsLTQ3Ljc1NTI3IHYgMzIuNTAwMTIgbCAyMy4yMTQzMiwtNi42MzI2OCB2IC0zNC40ODk5MSB6IiBjbGFzcz0ic3QxIi8+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZmZmZjtzdHJva2Utd2lkdGg6Ni42MzI2OCIgaWQ9InBhdGgzNyIgZD0ibSA4MTYuODEzNDcsMzU2Ljg2NzI1IGMgLTguNjIyNDgsMCAtMTUuMjU1MTYsLTcuOTU5MjEgLTE1LjI1NTE2LC0xNy4yNDQ5NiAwLC05LjI4NTc0IDYuNjMyNjgsLTE3LjI0NDk1IDE1LjI1NTE2LC0xNy4yNDQ5NSA4LjYyMjQ3LDAgMTUuMjU1MTUsNy45NTkyMSAxNS4yNTUxNSwxNy4yNDQ5NSAwLDkuMjg1NzUgLTYuNjMyNjgsMTcuMjQ0OTYgLTE1LjI1NTE1LDE3LjI0NDk2IHogbSAwLC0yNS4yMDQxNyBjIC0zLjMxNjM0LDAgLTUuOTY5NDEsMy4zMTYzNCAtNS45Njk0MSw3Ljk1OTIxIDAsNC42NDI4OCAyLjY1MzA3LDcuOTU5MjIgNS45Njk0MSw3Ljk1OTIyIDMuMzE2MzMsMCA1Ljk2OTQsLTMuMzE2MzQgNS45Njk0LC03Ljk1OTIyIDAsLTQuNjQyODcgLTIuNjUzMDcsLTcuOTU5MjEgLTUuOTY5NCwtNy45NTkyMSB6IiBjbGFzcz0ic3QxIi8+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZmZmZjtzdHJva2Utd2lkdGg6Ni42MzI2OCIgaWQ9InBhdGgzOSIgZD0ibSAxMjc1Ljc5NDcsLTEzLjIzNjA3NCBjIDAsLTEuMzI2NTM1IDAsLTEuOTg5ODAzIDAsLTMuMzE2MzM4IC0xLjMyNjYsLTMuMzE2MzM4IC01LjMwNjIsLTUuMzA2MTQxIC04LjYyMjUsLTMuOTc5NjA2IGwgLTM3LjE0MywxMy45Mjg2MjAzIFYgNy4zMjUyMjIxIDEzLjk1Nzg5OCBsIDMyLjUwMDEsLTE1LjI1NTE1NDkgViA1MjkuMzE2ODMgaCAtMzIuNTAwMSB2IDEzLjI2NTM1IGggMzkuMTMyOCBjIDMuOTc5NiwwIDYuNjMyNywtMi42NTMwNyA3LjI5NTksLTYuNjMyNjcgViAtMTEuOTA5NTM5IGMgMCwwIDAsLTAuNjYzMjY3IC0wLjY2MzIsLTEuMzI2NTM1IHoiIGNsYXNzPSJzdDEiLz48cGF0aCBzdHlsZT0iZmlsbDojZmZmZmZmO3N0cm9rZS13aWR0aDo2LjYzMjY4IiBpZD0icGF0aDQxIiBkPSJtIDExMDguNjUxMiw1My4wOTA2ODcgdiAtMTMuOTI4NjIgbCAtMzMuMTYzNCwxMi42MDIwODUgYyAtMC42NjMyLDAgLTAuNjYzMiwwLjY2MzI2OCAtMS4zMjY1LDAuNjYzMjY4IDAsMCAtMTEzLjQxODc2LDY5LjY0MzEgLTExNS40MDg1Nyw3MC45Njk2MyAtMS45ODk4LDEuMzI2NTQgLTMuOTc5NiwzLjMxNjM0IC0zLjk3OTYsNS45Njk0MSB2IDM3LjgwNjI2IGwgLTEwOS40MzkxNiw2NS4wMDAyMiBjIC0xLjk4OTgsMC42NjMyNyAtMy4zMTYzNCwzLjMxNjM0IC0zLjMxNjM0LDUuMzA2MTQgbCAtMC42NjMyNiwzMS44MzY4NSAtNTkuNjk0MDksMzUuMTUzMTggYyAtMy4zMTYzNCwxLjk4OTggLTEuOTg5OCw2LjYzMjY4IC0xLjk4OTgsOS45NDkwMiAwLDMuMzE2MzMgMCw3Mi4yOTYxNiAwLDcyLjI5NjE2IGwgLTI1LjIwNDE3LC05LjI4NTc0IGMgLTEuMzI2NTQsLTAuNjYzMjcgLTMuMzE2MzQsLTAuNjYzMjcgLTQuNjQyODcsMCBsIC0yMi41NTExLDkuMjg1NzQgYyAwLDAgMCwtNzEuNjMyOSAwLC03Mi4yOTYxNiAwLC0zLjk3OTYxIDAuNjYzMjcsLTcuMjk1OTUgLTIuNjUzMDcsLTkuMjg1NzUgbCAtNTkuNjk0MDksLTM1LjE1MzE4IC0wLjY2MzI2LC0zMS44MzY4NSBjIDAsLTEuOTg5OCAtMS4zMjY1NCwtMy45Nzk2MSAtMy4zMTYzNCwtNS4zMDYxNCBMIDU1Mi4xNjk2OSwxNjguNDk5MjUgdiAtMzkuMTMyNzkgYyAwLC0yLjY1MzA3IC0xLjMyNjU0LC00LjY0Mjg3IC0zLjk3OTYxLC01Ljk2OTQxIGwgLTguNjIyNDgsLTMuOTc5NiAtMTMwLjY2MzcxLC03OC45Mjg4NDcgYyAtMC42NjMyNywwIC0wLjY2MzI3LC0wLjY2MzI2OCAtMS4zMjY1NCwtMC42NjMyNjggbCAtOS4yODU3NSwtMy45Nzk2MDYgdiAxNC41OTE4ODggbCAzLjk3OTYxLDEuOTg5ODAzIDMxLjE3MzU4LDE5Ljg5ODAyOCAtMjUuMjA0MTcsLTExLjI3NTU1IGMgLTAuNjYzMjcsMCAtMC42NjMyNywwIC0wLjY2MzI3LDAgbCAtOS4yODU3NSwtNS4zMDYxNCB2IDE1LjkxODQyMiA0NTguOTgxMTkgMTMuMjY1MzUgaCA1Ljk2OTQxIGMgMS45ODk4LDAgMy4zMTYzNCwtMC42NjMyNyA1LjMwNjE0LC0xLjk4OTggMS45ODk4MSwtMS4zMjY1NCAzNDIuOTA5MzYsLTE1MC41NjE3NSAzNDIuOTA5MzYsLTE1MC41NjE3NSAwLDAgMzQ2Ljg4ODk5LDE1MS44ODgyOCAzNDguODc4NzksMTUyLjU1MTU1IDEuOTg5OCwwLjY2MzI3IDcuMjk1OSwwIDcuMjk1OSwwIFYgNTMwLjY0MzM3IDcxLjY2MjE4IDU3LjczMzU2IGwgLTYwLjM1NzMsMjYuNTMwNzA1IDMxLjgzNjgsLTE5Ljg5ODAyOCB6IE0gNTAyLjQyNDYyLDQ4NS41NDExNyA0NTEuMzUzMDEsNTA4LjA5MjI3IFYgMzQzLjYwMTkgbCA1MS4wNzE2MSw5LjI4NTc1IHogbSAzNS44MTY0NSwtMjkwLjUxMTIxIHYgMjczLjkyOTUyIGwgLTIyLjU1MTEsOS45NDkwMSBWIDM0Ny41ODE1MSBjIDAsLTMuMzE2MzQgLTEuOTg5OCwtNS45Njk0MSAtNS4zMDYxNCwtNi42MzI2OCBsIC02NC4zMzY5NiwtMTEuMjc1NTUgYyAtMS45ODk4LC0wLjY2MzI3IC0zLjk3OTYsMCAtNS4zMDYxNCwxLjMyNjU0IC0xLjk4OTgsMS4zMjY1MyAtMi42NTMwNywzLjMxNjMzIC0yLjY1MzA3LDUuMzA2MTQgdiAxNzcuMDkyNDUgbCAtMjYuNTMwNywxMS45Mzg4MiBWIDc2Ljk2ODMyMSBsIDExOS4zODgxNyw1My4wNjE0MDkgNy4yOTU5NCwzLjk3OTYxIHogbSAxMy45Mjg2MiwtMTEuMjc1NTUgNDcuMDkyLDI3Ljg1NzI0IC00Ny4wOTIsLTIwLjU2MTMgeiBtIDM1LjgxNjQ1LDE4My43MjUxMiAyNy44NTcyNCwzLjk3OTYxIDAuNjYzMjcsNjMuMDEwNDIgLTI3Ljg1NzI0LDExLjkzODgyIHogbSA2MS42ODM4OSwtNzYuOTM5MDQgYyAwLDAuNjYzMjcgMCwxLjk4OTggMCwyLjY1MzA3IHYgMTI2LjY4NDEyIGwgLTIyLjU1MTEsOS45NDkwMSAtMC42NjMyNywtNjMuMDEwNDIgYyAwLC0zLjMxNjM0IC0xLjk4OTgsLTUuMzA2MTQgLTQuNjQyODcsLTUuOTY5NDEgTCA1ODIuNjgsMzU0Ljg3NzQ1IGMgLTEuOTg5OCwwIC0zLjMxNjM0LDAgLTQuNjQyODcsMS4zMjY1MyAtMS4zMjY1NCwxLjMyNjU0IC0xLjk4OTgxLDIuNjUzMDggLTEuOTg5ODEsNC42NDI4OCBsIDAuNjYzMjcsOTAuODY3NjYgLTI0LjU0MDksMTAuNjEyMjggViAyMDQuOTc4OTcgbCA5Ny41MDAzNCw0My4xMTIzOSB6IG0gMTMuMjY1MzUsLTUuOTY5NDEgMTEuOTM4ODIsNy4yOTU5NSAtMTEuOTM4ODIsLTMuOTc5NjEgeiBtIDMzLjE2MzM4LDExNS40MDg1NyAtMTEuMjc1NTUsNS4zMDYxNCB2IC0zMS4xNzM1OCBsIDExLjI3NTU1LDEuMzI2NTQgeiBtIDE3LjkwODIzLC03Ljk1OTIxIC04LjYyMjQ4LDMuMzE2MzMgViAzNzAuMTMyNiBjIDAsLTIuNjUzMDcgLTEuOTg5ODEsLTQuNjQyODcgLTQuNjQyODgsLTQuNjQyODcgbCAtMjAuNTYxMjksLTEuMzI2NTMgYyAtMS4zMjY1NCwwIC0yLjY1MzA3LDAuNjYzMjYgLTMuMzE2MzQsMS4zMjY1MyAtMC42NjMyNywwLjY2MzI3IC0xLjMyNjU0LDEuOTg5OCAtMS4zMjY1NCwzLjMxNjM0IHYgNDAuNDU5MzIgbCAtMTIuNjAyMDgsNS4zMDYxNCBWIDMwMi40NzkzMSBsIDUxLjA3MTYxLDE3LjI0NDk2IHogbSAxMDguMTEyNjIsMTEuOTM4ODEgLTExLjI3NTU1LC01LjMwNjE0IHYgLTI0LjU0MDkgbCAxMS4yNzU1NSwtMC42NjMyNyB6IG0gMjEuODg3ODMsOS45NDkwMiAtMTMuMjY1MzUsLTUuOTY5NDEgdiAtMzkuMTMyNzkgYyAwLC0xLjMyNjU0IC0wLjY2MzI3LC0yLjY1MzA3IC0xLjMyNjU0LC0zLjMxNjM0IC0wLjY2MzI3LC0wLjY2MzI3IC0xLjk4OTgsLTEuMzI2NTMgLTMuMzE2MzQsLTEuMzI2NTMgbCAtMjAuNTYxMjksMS4zMjY1MyBjIC0yLjY1MzA3LDAgLTQuNjQyODgsMS45ODk4IC00LjY0Mjg4LDQuNjQyODcgdiAyNC41NDA5MSBsIC03Ljk1OTIxLC0zLjMxNjM0IHYgLTcyLjk1OTQ0IGwgNTEuMDcxNjEsLTE2LjU4MTY5IHogbSAwLC0xMjUuMzU3NTggLTIyLjU1MTEsNy4yOTU5NCAyMi41NTExLC0xMy4yNjUzNSB6IG0gNzIuMjk2MTcsMTU3LjE5NDQyIC0yNy44NTcyNCwtMTIuNjAyMDggMC42NjMyNywtNjMuNjczNjkgMjcuODU3MjMsLTMuOTc5NjEgeiBtIDM4LjQ2OTUyLDE3LjI0NDk2IC0yNy4xOTM5NywtMTEuOTM4ODIgMC42NjMyNiwtOTEuNTMwOTMgYyAwLC0xLjk4OTggLTAuNjYzMjYsLTMuMzE2MzQgLTEuOTg5OCwtNC42NDI4NyAtMS4zMjY1MywtMS4zMjY1NCAtMi42NTMwNywtMS4zMjY1NCAtNC42NDI4NywtMS4zMjY1NCBsIC0zOS4xMzI3OSw1Ljk2OTQxIGMgLTIuNjUzMDcsMC42NjMyNyAtNC42NDI4NywzLjMxNjM0IC00LjY0Mjg3LDUuOTY5NDEgbCAtMC42NjMyNyw2My4wMTA0MiAtMTkuODk4MDMsLTguNjIyNDcgdiAtMTI2LjY4NDEyIC00NS4xMDIyIGwgOTcuNTAwMzQsLTQzLjExMjM5IHogbSAwLC0yNzEuOTM5NzIgLTU3LjA0MTAyLDI1LjIwNDE3IDU3LjA0MTAyLC0zMy44MjY2NSB6IE0gMTAwMS44NjUxLDQ4NC44Nzc5IFYgMzUwLjg5Nzg0IGwgNTEuMDcxNiwtOC42MjI0NyBWIDUwNi43NjU3MyBaIE0gMTA5NC43MjI2LDc3LjYzMTU4OSBWIDUyNi4wMDA0OSBsIC0yOC41MjA1LC0xMi42MDIwOCBWIDMzNC45Nzk0MiBjIDAsLTEuOTg5OCAtMS4zMjY1LC0zLjk3OTYgLTIuNjUzMSwtNS4zMDYxNCAtMS4zMjY1LC0xLjMyNjUzIC0zLjMxNjMsLTEuOTg5OCAtNS4zMDYxLC0xLjMyNjUzIGwgLTY0LjMzNjk4LDExLjI3NTU0IGMgLTMuMzE2MzQsMC42NjMyNyAtNS4zMDYxNCwzLjMxNjM0IC01LjMwNjE0LDYuNjMyNjggdiAxMzIuNjUzNTIgbCAtMTkuODk4MDMsLTguNjIyNDggLTAuNjYzMjcsLTMzNS42MTM0MSB6IiBjbGFzcz0ic3QxIi8+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZmZmZjtzdHJva2Utd2lkdGg6Ni42MzI2OCIgaWQ9InBhdGg0MyIgZD0iTSAyNDMuMDg2OTgsLTAuNjMzOTg5MjUgMjc0LjkyMzgzLDEzLjk1Nzg5OCBWIDkuOTc4MjkyNSAtMy45NTAzMjczIGwgLTI4LjUyMDUxLC05Ljk0OTAxMzcgLTcuMjk1OTQsLTMuMzE2MzM4IGMgLTIuNjUzMDcsLTAuNjYzMjY4IC00LjY0Mjg4LC0wLjY2MzI2OCAtNi42MzI2OCwwLjY2MzI2NyAtMS45ODk4LDAuNjYzMjY4IC0zLjMxNjM0LDMuMzE2MzM4IC0zLjMxNjM0LDUuMzA2MTQxIFYgNTM2LjYxMjc3IGMgMCwzLjk3OTYxIDIuNjUzMDcsNi42MzI2OCA2LjYzMjY4LDYuNjMyNjggaCAzOS4xMzI3OSBWIDUyOS45ODAxIGggLTMxLjgzNjg1IHoiIGNsYXNzPSJzdDEiLz48cGF0aCBzdHlsZT0iZmlsbDojZmZmZmZmO3N0cm9rZS13aWR0aDo2LjYzMjY4IiBpZD0icGF0aDUxIiBkPSJtIDExNjkuNjcxOCwxMTguMDkwOTEgYyAtMjAuNTYxMywwIC0zNy4xNDMsLTE2LjU4MTY5IC0zNy4xNDMsLTM3LjE0Mjk4MyBWIC01MS4wNDIzMjggSCA5NzQuNjcxMTYgYyAtMjAuNTYxMywwIC0zNy4xNDI5OSwtMTYuNTgxNjkgLTM3LjE0Mjk5LC0zNy4xNDI5ODYgMCwtMjAuNTYxMjk2IDE2LjU4MTY5LC0zNy4xNDI5ODYgMzcuMTQyOTksLTM3LjE0Mjk4NiBoIDE5NS4wMDA2NCBjIDIwLjU2MTMsMCAzNy4xNDMsMTYuNTgxNjkgMzcuMTQzLDM3LjE0Mjk4NiBWIDgwLjk0NzkyNyBjIDAsMjAuNTYxMjkzIC0xNi41ODE3LDM3LjE0Mjk4MyAtMzcuMTQzLDM3LjE0Mjk4MyB6IiBjbGFzcz0ic3QxIi8+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZmZmZjtzdHJva2Utd2lkdGg6Ni42MzI2OCIgaWQ9InBhdGg1NSIgZD0iTSA1MzAuMjgxODYsNjQ3LjM3ODQ3IEggMzM1LjI4MTE4IGMgLTIwLjU2MTMsMCAtMzcuMTQyOTksLTE2LjU4MTY5IC0zNy4xNDI5OSwtMzcuMTQyOTkgViA0NDEuMTAyMjQgYyAwLC0yMC41NjEzIDE2LjU4MTY5LC0zNy4xNDI5OSAzNy4xNDI5OSwtMzcuMTQyOTkgMjAuNTYxMywwIDM3LjE0Mjk5LDE2LjU4MTY5IDM3LjE0Mjk5LDM3LjE0Mjk5IHYgMTMxLjk5MDI1IGggMTU3Ljg1NzY5IGMgMjAuNTYxMjksMCAzNy4xNDI5OCwxNi41ODE2OSAzNy4xNDI5OCwzNy4xNDI5OSAwLDIwLjU2MTMgLTE2LjU4MTY5LDM3LjE0Mjk5IC0zNy4xNDI5OCwzNy4xNDI5OSB6IiBjbGFzcz0ic3QxIi8+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZmZmZjtzdHJva2Utd2lkdGg6Ni42MzI2OCIgaWQ9InBhdGg1OSIgZD0ibSAzMzUuMjgxMTgsMTE4LjA5MDkxIGMgLTIwLjU2MTMsMCAtMzcuMTQyOTksLTE2LjU4MTY5IC0zNy4xNDI5OSwtMzcuMTQyOTgzIFYgLTg4LjE4NTMxNCBjIDAsLTIwLjU2MTI5NiAxNi41ODE2OSwtMzcuMTQyOTg2IDM3LjE0Mjk5LC0zNy4xNDI5ODYgaCAxOTUuMDAwNjggYyAyMC41NjEyOSwwIDM3LjE0Mjk4LDE2LjU4MTY5IDM3LjE0Mjk4LDM3LjE0Mjk4NiAwLDIwLjU2MTI5NiAtMTYuNTgxNjksMzcuMTQyOTg2IC0zNy4xNDI5OCwzNy4xNDI5ODYgSCAzNzIuNDI0MTcgViA4MC45NDc5MjcgYyAwLDIwLjU2MTI5MyAtMTYuNTgxNjksMzcuMTQyOTgzIC0zNy4xNDI5OSwzNy4xNDI5ODMgeiIgY2xhc3M9InN0MSIvPjxwYXRoIHN0eWxlPSJmaWxsOiNmZmZmZmY7c3Ryb2tlLXdpZHRoOjYuNjMyNjgiIGlkPSJwYXRoNjMiIGQ9Ik0gMTE2OS42NzE4LDY0Ny4zNzg0NyBIIDk3NC42NzExNiBjIC0yMC41NjEzLDAgLTM3LjE0Mjk5LC0xNi41ODE2OSAtMzcuMTQyOTksLTM3LjE0Mjk5IDAsLTIwLjU2MTMgMTYuNTgxNjksLTM3LjE0Mjk5IDM3LjE0Mjk5LC0zNy4xNDI5OSBIIDExMzIuNTI4OCBWIDQ0MS4xMDIyNCBjIDAsLTIwLjU2MTMgMTYuNTgxNywtMzcuMTQyOTkgMzcuMTQzLC0zNy4xNDI5OSAyMC41NjEzLDAgMzcuMTQzLDE2LjU4MTY5IDM3LjE0MywzNy4xNDI5OSB2IDE2OS4xMzMyNCBjIDAsMjAuNTYxMyAtMTYuNTgxNywzNy4xNDI5OSAtMzcuMTQzLDM3LjE0Mjk5IHoiIGNsYXNzPSJzdDEiLz48L2c+PC9zdmc+"},1462:at=>{"use strict";at.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgdmVyc2lvbj0iMS4xIgogICB4PSIwcHgiCiAgIHk9IjBweCIKICAgdmlld0JveD0iMCAwIDkwLjQ1NTAwMiA5MC40NTIwMDMiCiAgIGlkPSJzdmcxMCIKICAgd2lkdGg9IjkwLjQ1NTAwMiIKICAgaGVpZ2h0PSI5MC40NTIwMDMiCiAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIKICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgPGRlZnMKICAgICBpZD0iZGVmczEiIC8+CiAgPHBhdGgKICAgICBkPSJtIDIuNTEyLDkwLjQ1IGggOC4wMTIgMTIuODM0IGMgMC4wMDgsMCAwLjAxNCwwLjAwMiAwLjAyLDAuMDAyIGggMTUuNDIzIGMgMC4wMDgsMCAwLjAxNCwtMC4wMDIgMC4wMiwtMC4wMDIgaCAxLjE2NCBjIDEuMzg3LDAgMi41MTIsLTEuMTI1IDIuNTEyLC0yLjUxMiBWIDUyLjgxMyBsIDI3LjUyLC0yNy41MTYgdiAxOS4xMDkgYyAwLDEuMzg2IDEuMTI1LDIuNTEyIDIuNTE0LDIuNTEyIDEuMzg3LDAgMi41MTIsLTEuMTI2IDIuNTEyLC0yLjUxMiBWIDE5LjIzMyBjIDAsLTEuMzg3IC0xLjEyNSwtMi41MTQgLTIuNTEyLC0yLjUxNCBIIDQ3LjM1NiBjIC0xLjM4OSwwIC0yLjUxNCwxLjEyNyAtMi41MTQsMi41MTQgMCwxLjM4NyAxLjEyNSwyLjUxMiAyLjUxNCwyLjUxMiBIIDY2LjQ2MyBMIDQwLjIyNiw0Ny45NzcgYyAtMC4wOCwtMC4wMDggLTAuMTYsLTAuMDIzIC0wLjI0MiwtMC4wMjMgSCAyLjUxMiBDIDEuMTI1LDQ3Ljk1NCAwLDQ5LjA3OSAwLDUwLjQ2NiB2IDEuMTg4IDE1LjQyNCAxMi44NTQgOC4wMDggYyAwLDEuMzg1IDEuMTI1LDIuNTEgMi41MTIsMi41MSB6IE0gNS4wMjUsNzkuOTMgViA2Ny4wNzcgNTIuOTc3IEggMzcuNDcxIFYgODUuNDI0IEggMTAuNTIzIDUuMDI1IFoiCiAgICAgaWQ9InBhdGgxIgogICAgIHN0eWxlPSJmaWxsOiMyOTU0ZTk7ZmlsbC1vcGFjaXR5OjEiIC8+CiAgPHBhdGgKICAgICBkPSJtIDY3LjA3OCw5MC40NTIgYyAxLjM4OSwwIDIuNTE0LC0xLjEyNSAyLjUxNCwtMi41MTQgMCwtMS4zODcgLTEuMTI1LC0yLjUxMiAtMi41MTQsLTIuNTEyIEggNTEuNjU1IGMgLTEuMzg3LDAgLTIuNTEyLDEuMTI1IC0yLjUxMiwyLjUxMiAwLDEuMzg5IDEuMTI1LDIuNTE0IDIuNTEyLDIuNTE0IHoiCiAgICAgaWQ9InBhdGgyIgogICAgIHN0eWxlPSJmaWxsOiMyOTU0ZTk7ZmlsbC1vcGFjaXR5OjEiIC8+CiAgPHBhdGgKICAgICBkPSJtIDkwLjQ1NSw3OS45MyBjIDAsLTEuMzg3IC0xLjEyNSwtMi41MTIgLTIuNTE0LC0yLjUxMiAtMS4zODcsMCAtMi41MTIsMS4xMjUgLTIuNTEyLDIuNTEyIHYgNS40OTYgaCAtNS40OTYgYyAtMS4zODksMCAtMi41MTIsMS4xMjUgLTIuNTEyLDIuNTEyIDAsMS4zODkgMS4xMjMsMi41MTQgMi41MTIsMi41MTQgaCA4LjAwOCBjIDEuMzg5LDAgMi41MTQsLTEuMTI1IDIuNTE0LC0yLjUxNCB6IgogICAgIGlkPSJwYXRoMyIKICAgICBzdHlsZT0iZmlsbDojMjk1NGU5O2ZpbGwtb3BhY2l0eToxIiAvPgogIDxwYXRoCiAgICAgZD0ibSA4Ny45NDIsNDEuMzExIGMgMS4zODcsMCAyLjUxMiwtMS4xMjcgMi41MTIsLTIuNTE0IFYgMjMuMzczIGMgMCwtMS4zODcgLTEuMTI1LC0yLjUxMiAtMi41MTIsLTIuNTEyIC0xLjM4OSwwIC0yLjUxNCwxLjEyNSAtMi41MTQsMi41MTIgdiAxNS40MjQgYyAwLDEuMzg3IDEuMTI1LDIuNTE0IDIuNTE0LDIuNTE0IHoiCiAgICAgaWQ9InBhdGg0IgogICAgIHN0eWxlPSJmaWxsOiMyOTU0ZTk7ZmlsbC1vcGFjaXR5OjEiIC8+CiAgPHBhdGgKICAgICBkPSJtIDg1LjQyOCw2Ny4wNzUgYyAwLDEuMzg3IDEuMTI1LDIuNTEyIDIuNTE0LDIuNTEyIDEuMzg3LDAgMi41MTIsLTEuMTI1IDIuNTEyLC0yLjUxMiBWIDUxLjY1MSBjIDAsLTEuMzg3IC0xLjEyNSwtMi41MTIgLTIuNTEyLC0yLjUxMiAtMS4zODksMCAtMi41MTQsMS4xMjUgLTIuNTE0LDIuNTEyIHoiCiAgICAgaWQ9InBhdGg1IgogICAgIHN0eWxlPSJmaWxsOiMyOTU0ZTk7ZmlsbC1vcGFjaXR5OjEiIC8+CiAgPHBhdGgKICAgICBkPSJtIDg3Ljk0MiwwIGggLTguMDA4IGMgLTEuMzg5LDAgLTIuNTEyLDEuMTI3IC0yLjUxMiwyLjUxNCAwLDEuMzg3IDEuMTIzLDIuNTEyIDIuNTEyLDIuNTEyIGggNS40OTQgdiA1LjQ5NiBjIDAsMS4zODcgMS4xMjUsMi41MTQgMi41MTQsMi41MTQgMS4zODcsMCAyLjUxMiwtMS4xMjcgMi41MTIsLTIuNTE0IFYgMi41MTQgQyA5MC40NTMsMS4xMjcgODkuMzI4LDAgODcuOTQyLDAgWiIKICAgICBpZD0icGF0aDYiCiAgICAgc3R5bGU9ImZpbGw6IzI5NTRlOTtmaWxsLW9wYWNpdHk6MSIgLz4KICA8cGF0aAogICAgIGQ9Im0gMjMuMzc3LDUuMDI0IGggMTUuNDIyIGMgMS4zODksMCAyLjUxNCwtMS4xMjUgMi41MTQsLTIuNTEyIEMgNDEuMzEzLDEuMTI1IDQwLjE4OCwwIDM4Ljc5OSwwIEggMjMuMzc3IGMgLTEuMzg5LDAgLTIuNTE0LDEuMTI1IC0yLjUxNCwyLjUxMiAwLDEuMzg3IDEuMTI1LDIuNTEyIDIuNTE0LDIuNTEyIHoiCiAgICAgaWQ9InBhdGg3IgogICAgIHN0eWxlPSJmaWxsOiMyOTU0ZTk7ZmlsbC1vcGFjaXR5OjEiIC8+CiAgPHBhdGgKICAgICBkPSJtIDUxLjY1Myw1LjAyNCBoIDE1LjQyNCBjIDEuMzg5LDAgMi41MTQsLTEuMTI1IDIuNTE0LC0yLjUxMiBDIDY5LjU5MSwxLjEyNSA2OC40NjYsMCA2Ny4wNzcsMCBIIDUxLjY1MyBjIC0xLjM4NywwIC0yLjUxMiwxLjEyNSAtMi41MTIsMi41MTIgMCwxLjM4NyAxLjEyNSwyLjUxMiAyLjUxMiwyLjUxMiB6IgogICAgIGlkPSJwYXRoOCIKICAgICBzdHlsZT0iZmlsbDojMjk1NGU5O2ZpbGwtb3BhY2l0eToxIiAvPgogIDxwYXRoCiAgICAgZD0ibSAyLjUxMiwxMy4wMzMgYyAxLjM4OSwwIDIuNTE0LC0xLjEyNSAyLjUxNCwtMi41MTQgViA1LjAyNCBoIDUuNDk4IGMgMS4zODcsMCAyLjUxMiwtMS4xMjUgMi41MTIsLTIuNTEyIEMgMTMuMDM2LDEuMTI1IDExLjkxMSwwIDEwLjUyNCwwIEggMi41MTIgQyAxLjEyNSwwIDAsMS4xMjUgMCwyLjUxMiB2IDguMDA4IGMgMCwxLjM4OCAxLjEyNSwyLjUxMyAyLjUxMiwyLjUxMyB6IgogICAgIGlkPSJwYXRoOSIKICAgICBzdHlsZT0iZmlsbDojMjk1NGU5O2ZpbGwtb3BhY2l0eToxIiAvPgogIDxwYXRoCiAgICAgZD0ibSAyLjUxMiw0MS4zMTEgYyAxLjM4OSwwIDIuNTE0LC0xLjEyNSAyLjUxNCwtMi41MTIgViAyMy4zNzUgQyA1LjAyNiwyMS45ODggMy45MDEsMjAuODYzIDIuNTEyLDIwLjg2MyAxLjEyNSwyMC44NjMgMCwyMS45ODggMCwyMy4zNzUgdiAxNS40MjQgYyAwLDEuMzg3IDEuMTI1LDIuNTEyIDIuNTEyLDIuNTEyIHoiCiAgICAgaWQ9InBhdGgxMCIKICAgICBzdHlsZT0iZmlsbDojMjk1NGU5O2ZpbGwtb3BhY2l0eToxIiAvPgo8L3N2Zz4K"},5721:at=>{"use strict";at.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiIHN0YW5kYWxvbmU9Im5vIj8+CjxzdmcKICAgdmVyc2lvbj0iMS4xIgogICB4PSIwcHgiCiAgIHk9IjBweCIKICAgdmlld0JveD0iMCAwIDkwLjE2OTk5OCA5MC4xNzE5OTciCiAgIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDkxIDkxIgogICBpZD0ic3ZnMTIiCiAgIHdpZHRoPSI5MC4xNjk5OTgiCiAgIGhlaWdodD0iOTAuMTcxOTk3IgogICB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiAgIHhtbG5zOnN2Zz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgogIDxkZWZzCiAgICAgaWQ9ImRlZnMxIiAvPgogIDxwYXRoCiAgICAgZD0ibSA0NS44MzIsMTguMDM5IGMgLTEuMzg4LDAgLTIuNTEzLDEuMTI1IC0yLjUxMywyLjUxMiBWIDQ1LjY0IGMgMCwxLjM5IDEuMTI1LDIuNTE1IDIuNTEzLDIuNTE1IGggMjUuMDg5IGMgMS4zODksMCAyLjUxMiwtMS4xMjUgMi41MTIsLTIuNTE1IDAsLTEuMzg2IC0xLjEyMywtMi41MTEgLTIuNTEyLC0yLjUxMSBIIDUxLjg5NCBMIDc5LjM4NiwxNS42MzUgYyAwLjk4MiwtMC45OCAwLjk4MiwtMi41NyAwLC0zLjU1MyAtMC45OCwtMC45OCAtMi41NzIsLTAuOTggLTMuNTUzLDAgTCA0OC4zNDMsMzkuNTc2IFYgMjAuNTUxIGMgMCwtMS4zODcgLTEuMTI1LC0yLjUxMiAtMi41MTEsLTIuNTEyIHoiCiAgICAgaWQ9InBhdGgxIiAvPgogIDxwYXRoCiAgICAgZD0ibSAyLjUxMiw5MC4xNzEgaCAwLjAwMiA3Ljk4MiAxMi44MDggMTUuMzcyIDEuMTgyIGMgMS4zODgsMCAyLjUxNCwtMS4xMjUgMi41MTQsLTIuNTE0IHYgLTM3LjM1IGMgMCwtMS4zODcgLTEuMTI2LC0yLjUxMiAtMi41MTQsLTIuNTEyIEggMi41MTQgYyAtMS4zODksMCAtMi41MTMsMS4xMjUgLTIuNTEzLDIuNTEyIHYgMS4xNyBDIDAuMDAxLDUxLjQ4MSAwLDUxLjQ4NyAwLDUxLjQ5MSB2IDE1LjM3MyBjIDAsMC4wMDYgMC4wMDEsMC4wMSAwLjAwMSwwLjAxNiBWIDc5LjY2MSBDIDAuMDAxLDc5LjY2NSAwLDc5LjY3MSAwLDc5LjY3NSB2IDcuOTgyIGMgMCwxLjM4OSAxLjEyNCwyLjUxNCAyLjUxMiwyLjUxNCB6IE0gNS4wMjYsNTIuODE5IEggMzcuMzQ1IFYgODUuMTQ1IEggMjMuMzA0IDEwLjQ5NyA1LjAyNiBaIgogICAgIGlkPSJwYXRoMiIgLz4KICA8cGF0aAogICAgIGQ9Im0gNTEuNDg3LDg1LjE0NSBjIC0xLjM4OSwwIC0yLjUxNCwxLjEyNSAtMi41MTQsMi41MTIgMCwxLjM4OSAxLjEyNSwyLjUxNCAyLjUxNCwyLjUxNCBIIDY2Ljg2IGMgMS4zODcsMCAyLjUxMiwtMS4xMjUgMi41MTIsLTIuNTE0IDAsLTEuMzg3IC0xLjEyNSwtMi41MTIgLTIuNTEyLC0yLjUxMiB6IgogICAgIGlkPSJwYXRoMyIgLz4KICA8cGF0aAogICAgIGQ9Im0gODcuNjU3LDc3LjE2MyBjIC0xLjM4OSwwIC0yLjUxNCwxLjEyNSAtMi41MTQsMi41MTIgdiA1LjQ3MSBoIC01LjQ2OSBjIC0xLjM4OSwwIC0yLjUxNCwxLjEyNSAtMi41MTQsMi41MTIgMCwxLjM4OSAxLjEyNSwyLjUxNCAyLjUxNCwyLjUxNCBoIDcuOTgzIGMgMS4zODcsMCAyLjUxMiwtMS4xMjUgMi41MTIsLTIuNTE0IHYgLTcuOTgyIGMgMCwtMS4zODggLTEuMTI1LC0yLjUxMyAtMi41MTIsLTIuNTEzIHoiCiAgICAgaWQ9InBhdGg0IiAvPgogIDxwYXRoCiAgICAgZD0ibSA4Ny42NTcsNDguOTc5IGMgLTEuMzg5LDAgLTIuNTE0LDEuMTI1IC0yLjUxNCwyLjUxMiB2IDE1LjM3MyBjIDAsMS4zODcgMS4xMjUsMi41MTQgMi41MTQsMi41MTQgMS4zODcsMCAyLjUxMiwtMS4xMjcgMi41MTIsLTIuNTE0IFYgNTEuNDkxIGMgMCwtMS4zODcgLTEuMTI1LC0yLjUxMiAtMi41MTIsLTIuNTEyIHoiCiAgICAgaWQ9InBhdGg1IiAvPgogIDxwYXRoCiAgICAgZD0ibSA4Ny42NTcsMjAuNzk1IGMgLTEuMzg5LDAgLTIuNTE0LDEuMTI1IC0yLjUxNCwyLjUxMiBWIDM4LjY4IGMgMCwxLjM4NyAxLjEyNSwyLjUxMiAyLjUxNCwyLjUxMiAxLjM4NywwIDIuNTEyLC0xLjEyNSAyLjUxMiwtMi41MTIgViAyMy4zMDcgYyAwLC0xLjM4NyAtMS4xMjUsLTIuNTEyIC0yLjUxMiwtMi41MTIgeiIKICAgICBpZD0icGF0aDYiIC8+CiAgPHBhdGgKICAgICBkPSJtIDg3LjY1NywwLjAwMiBoIC03Ljk4MiBjIC0xLjM4OSwwIC0yLjUxNCwxLjEyNSAtMi41MTQsMi41MTIgMCwxLjM4NyAxLjEyNSwyLjUxMiAyLjUxNCwyLjUxMiBoIDUuNDY5IHYgNS40NzEgYyAwLDEuMzg3IDEuMTI1LDIuNTEyIDIuNTE0LDIuNTEyIDEuMzg3LDAgMi41MTIsLTEuMTI1IDIuNTEyLC0yLjUxMiBWIDIuNTE0IEMgOTAuMTY5LDEuMTI3IDg5LjA0NCwwLjAwMiA4Ny42NTcsMC4wMDIgWiIKICAgICBpZD0icGF0aDciIC8+CiAgPHBhdGgKICAgICBkPSJtIDM4LjY3OCw1LjAyNCBjIDEuMzg5LDAgMi41MTMsLTEuMTI1IDIuNTEzLC0yLjUxMiBDIDQxLjE5MSwxLjEyNSA0MC4wNjcsMCAzOC42NzgsMCBIIDIzLjMwNSBjIC0xLjM4NywwIC0yLjUxMiwxLjEyNSAtMi41MTIsMi41MTIgMCwxLjM4NyAxLjEyNSwyLjUxMiAyLjUxMiwyLjUxMiB6IgogICAgIGlkPSJwYXRoOCIgLz4KICA8cGF0aAogICAgIGQ9Im0gNjYuODYsNS4wMjQgYyAxLjM4OSwwIDIuNTE0LC0xLjEyNSAyLjUxNCwtMi41MTIgQyA2OS4zNzQsMS4xMjUgNjguMjQ5LDAgNjYuODYsMCBIIDUxLjQ4OSBjIC0xLjM4OSwwIC0yLjUxNCwxLjEyNSAtMi41MTQsMi41MTIgMCwxLjM4NyAxLjEyNSwyLjUxMiAyLjUxNCwyLjUxMiB6IgogICAgIGlkPSJwYXRoOSIgLz4KICA8cGF0aAogICAgIGQ9Im0gMi41MTIsMTMuMDA2IGMgMS4zODksMCAyLjUxMywtMS4xMjUgMi41MTMsLTIuNTEyIHYgLTUuNDcgaCA1LjQ2OCBjIDEuMzg5LDAgMi41MTMsLTEuMTI1IDIuNTEzLC0yLjUxMiBDIDEzLjAwNiwxLjEyNSAxMS44ODIsMCAxMC40OTMsMCBIIDIuNTEzIEMgMS4xMjUsMCAxMGUtNCwxLjEyNSAxMGUtNCwyLjUxMiB2IDcuOTgyIEMgMCwxMS44ODEgMS4xMjQsMTMuMDA2IDIuNTEyLDEzLjAwNiBaIgogICAgIGlkPSJwYXRoMTAiIC8+CiAgPHBhdGgKICAgICBkPSJtIDIuNTEyLDQxLjE5MiBjIDEuMzg5LDAgMi41MTMsLTEuMTI1IDIuNTEzLC0yLjUxMiBWIDIzLjMwNyBDIDUuMDI1LDIxLjkyIDMuOTAxLDIwLjc5NSAyLjUxMiwyMC43OTUgMS4xMjQsMjAuNzk1IDAsMjEuOTIgMCwyMy4zMDcgViAzOC42OCBjIDAsMS4zODcgMS4xMjQsMi41MTIgMi41MTIsMi41MTIgeiIKICAgICBpZD0icGF0aDExIiAvPgo8L3N2Zz4K"},7091:at=>{"use strict";at.exports="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAxOCI+PHBhdGggZD0iTTIuNSAxaDF2MTZoLTF6bTIgMGgzdjE2aC0zem00IDBoM3YxNmgtM3oiIGZpbGw9IiM5MDAiLz48cGF0aCBkPSJNMTIuNSAxaDF2MTZoLTF6bTIgMGgxdjE2aC0xem0xMiAwaDF2MTZoLTF6bTIgMGgxdjE2aC0xeiIgZmlsbD0iIzM5NiIvPjxwYXRoIGQ9Ik0xNi41IDFoM3YxNmgtM3ptNCAwaDF2MTZoLTF6bTIgMGgzdjE2aC0zeiIgZmlsbD0iIzA2OSIvPjwvc3ZnPg=="},2968:()=>{
/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.6.0/LICENSE.txt
 */
!function(){"use strict";function t(at,st,ot,ut){return new(ot||(ot=Promise))((function(Hl,rc){function o(at){try{l(ut.next(at))}catch(at){rc(at)}}function a(at){try{l(ut.throw(at))}catch(at){rc(at)}}function l(at){var st;at.done?Hl(at.value):(st=at.value,st instanceof ot?st:new ot((function(at){at(st)}))).then(o,a)}l((ut=ut.apply(at,st||[])).next())}))}function e(at){return at&&at.__esModule&&Object.prototype.hasOwnProperty.call(at,"default")?at.default:at}var at,st;function i(){if(st)return at;function t(at,st){this.x=at,this.y=st}return st=1,at=t,t.prototype={clone:function(){return new t(this.x,this.y)},add:function(at){return this.clone()._add(at)},sub:function(at){return this.clone()._sub(at)},multByPoint:function(at){return this.clone()._multByPoint(at)},divByPoint:function(at){return this.clone()._divByPoint(at)},mult:function(at){return this.clone()._mult(at)},div:function(at){return this.clone()._div(at)},rotate:function(at){return this.clone()._rotate(at)},rotateAround:function(at,st){return this.clone()._rotateAround(at,st)},matMult:function(at){return this.clone()._matMult(at)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(at){return this.x===at.x&&this.y===at.y},dist:function(at){return Math.sqrt(this.distSqr(at))},distSqr:function(at){var st=at.x-this.x,ot=at.y-this.y;return st*st+ot*ot},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(at){return Math.atan2(this.y-at.y,this.x-at.x)},angleWith:function(at){return this.angleWithSep(at.x,at.y)},angleWithSep:function(at,st){return Math.atan2(this.x*st-this.y*at,this.x*at+this.y*st)},_matMult:function(at){var st=at[2]*this.x+at[3]*this.y;return this.x=at[0]*this.x+at[1]*this.y,this.y=st,this},_add:function(at){return this.x+=at.x,this.y+=at.y,this},_sub:function(at){return this.x-=at.x,this.y-=at.y,this},_mult:function(at){return this.x*=at,this.y*=at,this},_div:function(at){return this.x/=at,this.y/=at,this},_multByPoint:function(at){return this.x*=at.x,this.y*=at.y,this},_divByPoint:function(at){return this.x/=at.x,this.y/=at.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var at=this.y;return this.y=this.x,this.x=-at,this},_rotate:function(at){var st=Math.cos(at),ot=Math.sin(at),ut=ot*this.x+st*this.y;return this.x=st*this.x-ot*this.y,this.y=ut,this},_rotateAround:function(at,st){var ot=Math.cos(at),ut=Math.sin(at),Hl=st.y+ut*(this.x-st.x)+ot*(this.y-st.y);return this.x=st.x+ot*(this.x-st.x)-ut*(this.y-st.y),this.y=Hl,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},t.convert=function(at){return at instanceof t?at:Array.isArray(at)?new t(at[0],at[1]):at},at}"function"==typeof SuppressedError&&SuppressedError;var ot,ut,Hl=e(i()),rc=function(){if(ut)return ot;function t(at,st,ot,ut){this.cx=3*at,this.bx=3*(ot-at)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*st,this.by=3*(ut-st)-this.cy,this.ay=1-this.cy-this.by,this.p1x=at,this.p1y=st,this.p2x=ot,this.p2y=ut}return ut=1,ot=t,t.prototype={sampleCurveX:function(at){return((this.ax*at+this.bx)*at+this.cx)*at},sampleCurveY:function(at){return((this.ay*at+this.by)*at+this.cy)*at},sampleCurveDerivativeX:function(at){return(3*this.ax*at+2*this.bx)*at+this.cx},solveCurveX:function(at,st){if(void 0===st&&(st=1e-6),at<0)return 0;if(at>1)return 1;for(var ot=at,ut=0;ut<8;ut++){var Hl=this.sampleCurveX(ot)-at;if(Math.abs(Hl)<st)return ot;var rc=this.sampleCurveDerivativeX(ot);if(Math.abs(rc)<1e-6)break;ot-=Hl/rc}var sc=0,oc=1;for(ot=at,ut=0;ut<20&&(Hl=this.sampleCurveX(ot),!(Math.abs(Hl-at)<st));ut++)at>Hl?sc=ot:oc=ot,ot=.5*(oc-sc)+sc;return ot},solve:function(at,st){return this.sampleCurveY(this.solveCurveX(at,st))}},ot}(),sc=e(rc);let oc,_c;var wc,Sc="undefined"!=typeof Float32Array?Float32Array:Array;function d(at,st,ot){var ut=st[0],Hl=st[1],rc=st[2],sc=st[3];return at[0]=ot[0]*ut+ot[4]*Hl+ot[8]*rc+ot[12]*sc,at[1]=ot[1]*ut+ot[5]*Hl+ot[9]*rc+ot[13]*sc,at[2]=ot[2]*ut+ot[6]*Hl+ot[10]*rc+ot[14]*sc,at[3]=ot[3]*ut+ot[7]*Hl+ot[11]*rc+ot[15]*sc,at}Math.hypot||(Math.hypot=function(){for(var at=0,st=arguments.length;st--;)at+=arguments[st]*arguments[st];return Math.sqrt(at)}),wc=new Sc(4),Sc!=Float32Array&&(wc[0]=0,wc[1]=0,wc[2]=0,wc[3]=0);const iu=8192;function m(at,st,ot){return Math.min(ot,Math.max(st,at))}function g(at){for(var st=arguments.length,ot=new Array(st>1?st-1:0),ut=1;ut<st;ut++)ot[ut-1]=arguments[ut];for(const Hl of ot)for(const st in Hl)at[st]=Hl[st];return at}function x(at,st,ot){const ut={};for(const Hl in at)ut[Hl]=st.call(this,at[Hl],Hl,at);return ut}function v(at){return Array.isArray(at)?at.map(v):"object"==typeof at&&at?x(at,v):at}new sc(.25,.1,.25,1);const su={};function w(at){su[at]||("undefined"!=typeof console&&console.warn(at),su[at]=!0)}function _(at,st,ot){return(ot.y-at.y)*(st.x-at.x)>(st.y-at.y)*(ot.x-at.x)}function S(at){return"undefined"!=typeof WorkerGlobalScope&&void 0!==at&&at instanceof WorkerGlobalScope}function k(at){return"undefined"!=typeof ImageBitmap&&at instanceof ImageBitmap}let lu,cu;function M(at,st,ot,ut){return at.addEventListener(st,ot,ut),{unsubscribe:()=>{at.removeEventListener(st,ot,ut)}}}function z(at){return at*Math.PI/180}class P{constructor(at,st,ot){const ut=this.cells=[];if(at instanceof ArrayBuffer){this.arrayBuffer=at;const Hl=new Int32Array(this.arrayBuffer);at=Hl[0],this.d=(st=Hl[1])+2*(ot=Hl[2]);for(let at=0;at<this.d*this.d;at++){const st=Hl[3+at],ot=Hl[3+at+1];ut.push(st===ot?null:Hl.subarray(st,ot))}const rc=Hl[3+ut.length+1];this.keys=Hl.subarray(Hl[3+ut.length],rc),this.bboxes=Hl.subarray(rc),this.insert=this._insertReadonly}else{this.d=st+2*ot;for(let at=0;at<this.d*this.d;at++)ut.push([]);this.keys=[],this.bboxes=[]}this.n=st,this.extent=at,this.padding=ot,this.scale=st/at,this.uid=0;const Hl=ot/st*at;this.min=-Hl,this.max=at+Hl}insert(at,st,ot,ut,Hl){this._forEachCell(st,ot,ut,Hl,this._insertCell,this.uid++,void 0,void 0),this.keys.push(at),this.bboxes.push(st),this.bboxes.push(ot),this.bboxes.push(ut),this.bboxes.push(Hl)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(at,st,ot,ut,Hl,rc){this.cells[Hl].push(rc)}query(at,st,ot,ut,Hl){const rc=this.min,sc=this.max;if(at<=rc&&st<=rc&&sc<=ot&&sc<=ut&&!Hl)return Array.prototype.slice.call(this.keys);{const rc=[];return this._forEachCell(at,st,ot,ut,this._queryCell,rc,{},Hl),rc}}_queryCell(at,st,ot,ut,Hl,rc,sc,oc){const _c=this.cells[Hl];if(null!==_c){const Hl=this.keys,wc=this.bboxes;for(let Sc=0;Sc<_c.length;Sc++){const iu=_c[Sc];if(void 0===sc[iu]){const _c=4*iu;(oc?oc(wc[_c+0],wc[_c+1],wc[_c+2],wc[_c+3]):at<=wc[_c+2]&&st<=wc[_c+3]&&ot>=wc[_c+0]&&ut>=wc[_c+1])?(sc[iu]=!0,rc.push(Hl[iu])):sc[iu]=!1}}}}_forEachCell(at,st,ot,ut,Hl,rc,sc,oc){const _c=this._convertToCellCoord(at),wc=this._convertToCellCoord(st),Sc=this._convertToCellCoord(ot),iu=this._convertToCellCoord(ut);for(let su=_c;su<=Sc;su++)for(let _c=wc;_c<=iu;_c++){const wc=this.d*_c+su;if((!oc||oc(this._convertFromCellCoord(su),this._convertFromCellCoord(_c),this._convertFromCellCoord(su+1),this._convertFromCellCoord(_c+1)))&&Hl.call(this,at,st,ot,ut,wc,rc,sc,oc))return}}_convertFromCellCoord(at){return(at-this.padding)/this.scale}_convertToCellCoord(at){return Math.max(0,Math.min(this.d-1,Math.floor(at*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const at=this.cells,st=3+this.cells.length+1+1;let ot=0;for(let rc=0;rc<this.cells.length;rc++)ot+=this.cells[rc].length;const ut=new Int32Array(st+ot+this.keys.length+this.bboxes.length);ut[0]=this.extent,ut[1]=this.n,ut[2]=this.padding;let Hl=st;for(let rc=0;rc<at.length;rc++){const st=at[rc];ut[3+rc]=Hl,ut.set(st,Hl),Hl+=st.length}return ut[3+at.length]=Hl,ut.set(this.keys,Hl),Hl+=this.keys.length,ut[3+at.length+1]=Hl,ut.set(this.bboxes,Hl),Hl+=this.bboxes.length,ut.buffer}static serialize(at,st){const ot=at.toArrayBuffer();return st&&st.push(ot),{buffer:ot}}static deserialize(at){return new P(at.buffer)}}var uu={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const pu=["type","source","source-layer","minzoom","maxzoom","filter","layout"];class B{constructor(at,st,ot,ut){this.message=(at?`${at}: `:"")+ot,ut&&(this.identifier=ut),null!=st&&st.__line__&&(this.line=st.__line__)}}function E(at){for(var st=arguments.length,ot=new Array(st>1?st-1:0),ut=1;ut<st;ut++)ot[ut-1]=arguments[ut];for(const Hl of ot)for(const st in Hl)at[st]=Hl[st];return at}class V extends Error{constructor(at,st){super(st),this.message=st,this.key=at}}class F{constructor(at,st){void 0===st&&(st=[]),this.parent=at,this.bindings={};for(const[ot,ut]of st)this.bindings[ot]=ut}concat(at){return new F(this,at)}get(at){if(this.bindings[at])return this.bindings[at];if(this.parent)return this.parent.get(at);throw new Error(`${at} not found in scope.`)}has(at){return!!this.bindings[at]||!!this.parent&&this.parent.has(at)}}const mu={kind:"null"},gu={kind:"number"},Au={kind:"string"},yu={kind:"boolean"},_u={kind:"color"},xu={kind:"projectionDefinition"},Su={kind:"object"},Du={kind:"value"},Lu={kind:"collator"},$u={kind:"formatted"},hh={kind:"padding"},ed={kind:"colorArray"},td={kind:"numberArray"},id={kind:"resolvedImage"},nd={kind:"variableAnchorOffsetCollection"};function W(at,st){return{kind:"array",itemType:at,N:st}}function K(at){if("array"===at.kind){const st=K(at.itemType);return"number"==typeof at.N?`array<${st}, ${at.N}>`:"value"===at.itemType.kind?"array":`array<${st}>`}return at.kind}const rd=[mu,gu,Au,yu,_u,xu,$u,Su,W(Du),hh,td,ed,id,nd];function tt(at,st){if("error"===st.kind)return null;if("array"===at.kind){if("array"===st.kind&&(0===st.N&&"value"===st.itemType.kind||!tt(at.itemType,st.itemType))&&("number"!=typeof at.N||at.N===st.N))return null}else{if(at.kind===st.kind)return null;if("value"===at.kind)for(const at of rd)if(!tt(at,st))return null}return`Expected ${K(at)} but found ${K(st)} instead.`}function et(at,st){return st.some((st=>st.kind===at.kind))}function rt(at,st){return st.some((st=>"null"===st?null===at:"array"===st?Array.isArray(at):"object"===st?at&&!Array.isArray(at)&&"object"==typeof at:st===typeof at))}function nt(at,st){return"array"===at.kind&&"array"===st.kind?at.itemType.kind===st.itemType.kind&&"number"==typeof at.N:at.kind===st.kind}const ad=.96422,sd=.82521,od=4/29,ld=6/29,cd=3*ld*ld,ud=ld*ld*ld,hd=Math.PI/180,dd=180/Math.PI;function pt(at){return(at%=360)<0&&(at+=360),at}function ft(at){let st,ot,[ut,Hl,rc,sc]=at;const oc=yt((.2225045*(ut=dt(ut))+.7168786*(Hl=dt(Hl))+.0606169*(rc=dt(rc)))/1);ut===Hl&&Hl===rc?st=ot=oc:(st=yt((.4360747*ut+.3850649*Hl+.1430804*rc)/ad),ot=yt((.0139322*ut+.0971045*Hl+.7141733*rc)/sd));const _c=116*oc-16;return[_c<0?0:_c,500*(st-oc),200*(oc-ot),sc]}function dt(at){return at<=.04045?at/12.92:Math.pow((at+.055)/1.055,2.4)}function yt(at){return at>ud?Math.pow(at,1/3):at/cd+od}function mt(at){let[st,ot,ut,Hl]=at,rc=(st+16)/116,sc=isNaN(ot)?rc:rc+ot/500,oc=isNaN(ut)?rc:rc-ut/200;return rc=1*xt(rc),sc=ad*xt(sc),oc=sd*xt(oc),[gt(3.1338561*sc-1.6168667*rc-.4906146*oc),gt(-.9787684*sc+1.9161415*rc+.033454*oc),gt(.0719453*sc-.2289914*rc+1.4052427*oc),Hl]}function gt(at){return(at=at<=.00304?12.92*at:1.055*Math.pow(at,1/2.4)-.055)<0?0:at>1?1:at}function xt(at){return at>ld?at*at*at:cd*(at-od)}const pd=Object.hasOwn||function(at,st){return Object.prototype.hasOwnProperty.call(at,st)};function bt(at,st){return pd(at,st)?at[st]:void 0}function wt(at){return parseInt(at.padEnd(2,at),16)/255}function _t(at,st){return St(st?at/100:at,0,1)}function St(at,st,ot){return Math.min(Math.max(st,at),ot)}function kt(at){return!at.some(Number.isNaN)}const md={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function It(at,st,ot){return at+ot*(st-at)}function Mt(at,st,ot){return at.map(((at,ut)=>It(at,st[ut],ot)))}class zt{constructor(at,st,ot,ut,Hl){void 0===ut&&(ut=1),void 0===Hl&&(Hl=!0),this.r=at,this.g=st,this.b=ot,this.a=ut,Hl||(this.r*=ut,this.g*=ut,this.b*=ut,ut||this.overwriteGetter("rgb",[at,st,ot,ut]))}static parse(at){if(at instanceof zt)return at;if("string"!=typeof at)return;const st=function(at){if("transparent"===(at=at.toLowerCase().trim()))return[0,0,0,0];const st=bt(md,at);if(st){const[at,ot,ut]=st;return[at/255,ot/255,ut/255,1]}if(at.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(at)){const st=at.length<6?1:2;let ot=1;return[wt(at.slice(ot,ot+=st)),wt(at.slice(ot,ot+=st)),wt(at.slice(ot,ot+=st)),wt(at.slice(ot,ot+st)||"ff")]}if(at.startsWith("rgb")){const st=at.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(st){const[at,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su]=st,lu=[Hl||" ",oc||" ",Sc].join("");if("  "===lu||"  /"===lu||",,"===lu||",,,"===lu){const at=[ut,sc,wc].join(""),st="%%%"===at?100:""===at?255:0;if(st){const at=[St(+ot/st,0,1),St(+rc/st,0,1),St(+_c/st,0,1),iu?_t(+iu,su):1];if(kt(at))return at}}return}}const ot=at.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(ot){const[at,st,ut,Hl,rc,sc,oc,_c,wc]=ot,Sc=[ut||" ",rc||" ",oc].join("");if("  "===Sc||"  /"===Sc||",,"===Sc||",,,"===Sc){const at=[+st,St(+Hl,0,100),St(+sc,0,100),_c?_t(+_c,wc):1];if(kt(at))return function(at){let[st,ot,ut,Hl]=at;function i(at){const Hl=(at+st/30)%12,rc=ot*Math.min(ut,1-ut);return ut-rc*Math.max(-1,Math.min(Hl-3,9-Hl,1))}return st=pt(st),ot/=100,ut/=100,[i(0),i(8),i(4),Hl]}(at)}}}(at);return st?new zt(...st,!1):void 0}get rgb(){const{r:at,g:st,b:ot,a:ut}=this,Hl=ut||1/0;return this.overwriteGetter("rgb",[at/Hl,st/Hl,ot/Hl,ut])}get hcl(){return this.overwriteGetter("hcl",function(at){const[st,ot,ut,Hl]=ft(at),rc=Math.sqrt(ot*ot+ut*ut);return[Math.round(1e4*rc)?pt(Math.atan2(ut,ot)*dd):NaN,rc,st,Hl]}(this.rgb))}get lab(){return this.overwriteGetter("lab",ft(this.rgb))}overwriteGetter(at,st){return Object.defineProperty(this,at,{value:st}),st}toString(){const[at,st,ot,ut]=this.rgb;return`rgba(${[at,st,ot].map((at=>Math.round(255*at))).join(",")},${ut})`}static interpolate(at,st,ot,ut){switch(void 0===ut&&(ut="rgb"),ut){case"rgb":{const[ut,Hl,rc,sc]=Mt(at.rgb,st.rgb,ot);return new zt(ut,Hl,rc,sc,!1)}case"hcl":{const[ut,Hl,rc,sc]=at.hcl,[oc,_c,wc,Sc]=st.hcl;let iu,su;if(isNaN(ut)||isNaN(oc))isNaN(ut)?isNaN(oc)?iu=NaN:(iu=oc,1!==rc&&0!==rc||(su=_c)):(iu=ut,1!==wc&&0!==wc||(su=Hl));else{let at=oc-ut;oc>ut&&at>180?at-=360:oc<ut&&ut-oc>180&&(at+=360),iu=ut+ot*at}const[lu,cu,uu,pu]=function(at){let[st,ot,ut,Hl]=at;return st=isNaN(st)?0:st*hd,mt([ut,Math.cos(st)*ot,Math.sin(st)*ot,Hl])}([iu,null!=su?su:It(Hl,_c,ot),It(rc,wc,ot),It(sc,Sc,ot)]);return new zt(lu,cu,uu,pu,!1)}case"lab":{const[ut,Hl,rc,sc]=mt(Mt(at.lab,st.lab,ot));return new zt(ut,Hl,rc,sc,!1)}}}}zt.black=new zt(0,0,0,1),zt.white=new zt(1,1,1,1),zt.transparent=new zt(0,0,0,0),zt.red=new zt(1,0,0,1);class Pt{constructor(at,st,ot){this.sensitivity=at?st?"variant":"case":st?"accent":"base",this.locale=ot,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(at,st){return this.collator.compare(at,st)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const gd=["bottom","center","top"];class Ct{constructor(at,st,ot,ut,Hl,rc){this.text=at,this.image=st,this.scale=ot,this.fontStack=ut,this.textColor=Hl,this.verticalAlign=rc}}class Bt{constructor(at){this.sections=at}static fromString(at){return new Bt([new Ct(at,null,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((at=>0!==at.text.length||at.image&&0!==at.image.name.length))}static factory(at){return at instanceof Bt?at:Bt.fromString(at)}toString(){return 0===this.sections.length?"":this.sections.map((at=>at.text)).join("")}}class Et{constructor(at){this.values=at.slice()}static parse(at){if(at instanceof Et)return at;if("number"==typeof at)return new Et([at,at,at,at]);if(Array.isArray(at)&&!(at.length<1||at.length>4)){for(const st of at)if("number"!=typeof st)return;switch(at.length){case 1:at=[at[0],at[0],at[0],at[0]];break;case 2:at=[at[0],at[1],at[0],at[1]];break;case 3:at=[at[0],at[1],at[2],at[1]]}return new Et(at)}}toString(){return JSON.stringify(this.values)}static interpolate(at,st,ot){return new Et(Mt(at.values,st.values,ot))}}class Vt{constructor(at){this.values=at.slice()}static parse(at){if(at instanceof Vt)return at;if("number"==typeof at)return new Vt([at]);if(Array.isArray(at)){for(const st of at)if("number"!=typeof st)return;return new Vt(at)}}toString(){return JSON.stringify(this.values)}static interpolate(at,st,ot){return new Vt(Mt(at.values,st.values,ot))}}class Ft{constructor(at){this.values=at.slice()}static parse(at){if(at instanceof Ft)return at;if("string"==typeof at){const st=zt.parse(at);if(!st)return;return new Ft([st])}if(!Array.isArray(at))return;const st=[];for(const ot of at){if("string"!=typeof ot)return;const at=zt.parse(ot);if(!at)return;st.push(at)}return new Ft(st)}toString(){return JSON.stringify(this.values)}static interpolate(at,st,ot,ut){void 0===ut&&(ut="rgb");const Hl=[];if(at.values.length!=st.values.length)throw new Error(`colorArray: Arrays have mismatched length (${at.values.length} vs. ${st.values.length}), cannot interpolate.`);for(let rc=0;rc<at.values.length;rc++)Hl.push(zt.interpolate(at.values[rc],st.values[rc],ot,ut));return new Ft(Hl)}}class Dt extends Error{constructor(at){super(at),this.name="RuntimeError"}toJSON(){return this.message}}const fd=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class $t{constructor(at){this.values=at.slice()}static parse(at){if(at instanceof $t)return at;if(Array.isArray(at)&&!(at.length<1)&&at.length%2==0){for(let st=0;st<at.length;st+=2){const ot=at[st],ut=at[st+1];if("string"!=typeof ot||!fd.has(ot))return;if(!Array.isArray(ut)||2!==ut.length||"number"!=typeof ut[0]||"number"!=typeof ut[1])return}return new $t(at)}}toString(){return JSON.stringify(this.values)}static interpolate(at,st,ot){const ut=at.values,Hl=st.values;if(ut.length!==Hl.length)throw new Dt(`Cannot interpolate values of different length. from: ${at.toString()}, to: ${st.toString()}`);const rc=[];for(let sc=0;sc<ut.length;sc+=2){if(ut[sc]!==Hl[sc])throw new Dt(`Cannot interpolate values containing mismatched anchors. from[${sc}]: ${ut[sc]}, to[${sc}]: ${Hl[sc]}`);rc.push(ut[sc]);const[at,st]=ut[sc+1],[oc,_c]=Hl[sc+1];rc.push([It(at,oc,ot),It(st,_c,ot)])}return new $t(rc)}}class Ot{constructor(at){this.name=at.name,this.available=at.available}toString(){return this.name}static fromString(at){return at?new Ot({name:at,available:!1}):null}}class Rt{constructor(at,st,ot){this.from=at,this.to=st,this.transition=ot}static interpolate(at,st,ot){return new Rt(at,st,ot)}static parse(at){return at instanceof Rt?at:Array.isArray(at)&&3===at.length&&"string"==typeof at[0]&&"string"==typeof at[1]&&"number"==typeof at[2]?new Rt(at[0],at[1],at[2]):"object"==typeof at&&"string"==typeof at.from&&"string"==typeof at.to&&"number"==typeof at.transition?new Rt(at.from,at.to,at.transition):"string"==typeof at?new Rt(at,at,1):void 0}}function Nt(at,st,ot,ut){return"number"==typeof at&&at>=0&&at<=255&&"number"==typeof st&&st>=0&&st<=255&&"number"==typeof ot&&ot>=0&&ot<=255?void 0===ut||"number"==typeof ut&&ut>=0&&ut<=1?null:`Invalid rgba value [${[at,st,ot,ut].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof ut?[at,st,ot,ut]:[at,st,ot]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function jt(at){if(null===at||"string"==typeof at||"boolean"==typeof at||"number"==typeof at||at instanceof Rt||at instanceof zt||at instanceof Pt||at instanceof Bt||at instanceof Et||at instanceof Vt||at instanceof Ft||at instanceof $t||at instanceof Ot)return!0;if(Array.isArray(at)){for(const st of at)if(!jt(st))return!1;return!0}if("object"==typeof at){for(const st in at)if(!jt(at[st]))return!1;return!0}return!1}function Ut(at){if(null===at)return mu;if("string"==typeof at)return Au;if("boolean"==typeof at)return yu;if("number"==typeof at)return gu;if(at instanceof zt)return _u;if(at instanceof Rt)return xu;if(at instanceof Pt)return Lu;if(at instanceof Bt)return $u;if(at instanceof Et)return hh;if(at instanceof Vt)return td;if(at instanceof Ft)return ed;if(at instanceof $t)return nd;if(at instanceof Ot)return id;if(Array.isArray(at)){const st=at.length;let ot;for(const ut of at){const at=Ut(ut);if(ot){if(ot===at)continue;ot=Du;break}ot=at}return W(ot||Du,st)}return Su}function qt(at){const st=typeof at;return null===at?"":"string"===st||"number"===st||"boolean"===st?String(at):at instanceof zt||at instanceof Rt||at instanceof Bt||at instanceof Et||at instanceof Vt||at instanceof Ft||at instanceof $t||at instanceof Ot?at.toString():JSON.stringify(at)}class Gt{constructor(at,st){this.type=at,this.value=st}static parse(at,st){if(2!==at.length)return st.error(`'literal' expression requires exactly one argument, but found ${at.length-1} instead.`);if(!jt(at[1]))return st.error("invalid value");const ot=at[1];let ut=Ut(ot);const Hl=st.expectedType;return"array"!==ut.kind||0!==ut.N||!Hl||"array"!==Hl.kind||"number"==typeof Hl.N&&0!==Hl.N||(ut=Hl),new Gt(ut,ot)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const Ad={string:Au,number:gu,boolean:yu,object:Su};class Zt{constructor(at,st){this.type=at,this.args=st}static parse(at,st){if(at.length<2)return st.error("Expected at least one argument.");let ot,ut=1;const Hl=at[0];if("array"===Hl){let Hl,rc;if(at.length>2){const ot=at[1];if("string"!=typeof ot||!(ot in Ad)||"object"===ot)return st.error('The item type argument of "array" must be one of string, number, boolean',1);Hl=Ad[ot],ut++}else Hl=Du;if(at.length>3){if(null!==at[2]&&("number"!=typeof at[2]||at[2]<0||at[2]!==Math.floor(at[2])))return st.error('The length argument to "array" must be a positive integer literal',2);rc=at[2],ut++}ot=W(Hl,rc)}else{if(!Ad[Hl])throw new Error(`Types doesn't contain name = ${Hl}`);ot=Ad[Hl]}const rc=[];for(;ut<at.length;ut++){const ot=st.parse(at[ut],ut,Du);if(!ot)return null;rc.push(ot)}return new Zt(ot,rc)}evaluate(at){for(let st=0;st<this.args.length;st++){const ot=this.args[st].evaluate(at);if(!tt(this.type,Ut(ot)))return ot;if(st===this.args.length-1)throw new Dt(`Expected value to be of type ${K(this.type)}, but found ${K(Ut(ot))} instead.`)}throw new Error}eachChild(at){this.args.forEach(at)}outputDefined(){return this.args.every((at=>at.outputDefined()))}}const yd={"to-boolean":yu,"to-color":_u,"to-number":gu,"to-string":Au};class Ht{constructor(at,st){this.type=at,this.args=st}static parse(at,st){if(at.length<2)return st.error("Expected at least one argument.");const ot=at[0];if(!yd[ot])throw new Error(`Can't parse ${ot} as it is not part of the known types`);if(("to-boolean"===ot||"to-string"===ot)&&2!==at.length)return st.error("Expected one argument.");const ut=yd[ot],Hl=[];for(let rc=1;rc<at.length;rc++){const ot=st.parse(at[rc],rc,Du);if(!ot)return null;Hl.push(ot)}return new Ht(ut,Hl)}evaluate(at){switch(this.type.kind){case"boolean":return Boolean(this.args[0].evaluate(at));case"color":{let st,ot;for(const ut of this.args){if(st=ut.evaluate(at),ot=null,st instanceof zt)return st;if("string"==typeof st){const ot=at.parseColor(st);if(ot)return ot}else if(Array.isArray(st)&&(ot=st.length<3||st.length>4?`Invalid rgba value ${JSON.stringify(st)}: expected an array containing either three or four numeric values.`:Nt(st[0],st[1],st[2],st[3]),!ot))return new zt(st[0]/255,st[1]/255,st[2]/255,st[3])}throw new Dt(ot||`Could not parse color from value '${"string"==typeof st?st:JSON.stringify(st)}'`)}case"padding":{let st;for(const ot of this.args){st=ot.evaluate(at);const ut=Et.parse(st);if(ut)return ut}throw new Dt(`Could not parse padding from value '${"string"==typeof st?st:JSON.stringify(st)}'`)}case"numberArray":{let st;for(const ot of this.args){st=ot.evaluate(at);const ut=Vt.parse(st);if(ut)return ut}throw new Dt(`Could not parse numberArray from value '${"string"==typeof st?st:JSON.stringify(st)}'`)}case"colorArray":{let st;for(const ot of this.args){st=ot.evaluate(at);const ut=Ft.parse(st);if(ut)return ut}throw new Dt(`Could not parse colorArray from value '${"string"==typeof st?st:JSON.stringify(st)}'`)}case"variableAnchorOffsetCollection":{let st;for(const ot of this.args){st=ot.evaluate(at);const ut=$t.parse(st);if(ut)return ut}throw new Dt(`Could not parse variableAnchorOffsetCollection from value '${"string"==typeof st?st:JSON.stringify(st)}'`)}case"number":{let st=null;for(const ot of this.args){if(st=ot.evaluate(at),null===st)return 0;const ut=Number(st);if(!isNaN(ut))return ut}throw new Dt(`Could not convert ${JSON.stringify(st)} to number.`)}case"formatted":return Bt.fromString(qt(this.args[0].evaluate(at)));case"resolvedImage":return Ot.fromString(qt(this.args[0].evaluate(at)));case"projectionDefinition":return this.args[0].evaluate(at);default:return qt(this.args[0].evaluate(at))}}eachChild(at){this.args.forEach(at)}outputDefined(){return this.args.every((at=>at.outputDefined()))}}const vd=["Unknown","Point","LineString","Polygon"];class Wt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?vd[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(at){let st=this._parseColorCache.get(at);return st||(st=zt.parse(at),this._parseColorCache.set(at,st)),st}}class Kt{constructor(at,st,ot,ut,Hl,rc){void 0===ot&&(ot=[]),void 0===Hl&&(Hl=new F),void 0===rc&&(rc=[]),this.registry=at,this.path=ot,this.key=ot.map((at=>`[${at}]`)).join(""),this.scope=Hl,this.errors=rc,this.expectedType=ut,this._isConstant=st}parse(at,st,ot,ut,Hl){return void 0===Hl&&(Hl={}),st?this.concat(st,ot,ut)._parse(at,Hl):this._parse(at,Hl)}_parse(at,st){function r(at,st,ot){return"assert"===ot?new Zt(st,[at]):"coerce"===ot?new Ht(st,[at]):at}if(null!==at&&"string"!=typeof at&&"boolean"!=typeof at&&"number"!=typeof at||(at=["literal",at]),Array.isArray(at)){if(0===at.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const ot=at[0];if("string"!=typeof ot)return this.error(`Expression name must be a string, but found ${typeof ot} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const ut=this.registry[ot];if(ut){let ot=ut.parse(at,this);if(!ot)return null;if(this.expectedType){const at=this.expectedType,ut=ot.type;if("string"!==at.kind&&"number"!==at.kind&&"boolean"!==at.kind&&"object"!==at.kind&&"array"!==at.kind||"value"!==ut.kind){if("projectionDefinition"===at.kind&&["string","array"].includes(ut.kind)||["color","formatted","resolvedImage"].includes(at.kind)&&["value","string"].includes(ut.kind)||["padding","numberArray"].includes(at.kind)&&["value","number","array"].includes(ut.kind)||"colorArray"===at.kind&&["value","string","array"].includes(ut.kind)||"variableAnchorOffsetCollection"===at.kind&&["value","array"].includes(ut.kind))ot=r(ot,at,st.typeAnnotation||"coerce");else if(this.checkSubtype(at,ut))return null}else ot=r(ot,at,st.typeAnnotation||"assert")}if(!(ot instanceof Gt)&&"resolvedImage"!==ot.type.kind&&this._isConstant(ot)){const st=new Wt;try{ot=new Gt(ot.type,ot.evaluate(st))}catch(at){return this.error(at.message),null}}return ot}return this.error(`Unknown expression "${ot}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===at?"'undefined' value invalid. Use null instead.":"object"==typeof at?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof at} instead.`)}concat(at,st,ot){const ut="number"==typeof at?this.path.concat(at):this.path,Hl=ot?this.scope.concat(ot):this.scope;return new Kt(this.registry,this._isConstant,ut,st||null,Hl,this.errors)}error(at){for(var st=arguments.length,ot=new Array(st>1?st-1:0),ut=1;ut<st;ut++)ot[ut-1]=arguments[ut];const Hl=`${this.key}${ot.map((at=>`[${at}]`)).join("")}`;this.errors.push(new V(Hl,at))}checkSubtype(at,st){const ot=tt(at,st);return ot&&this.error(ot),ot}}class Qt{constructor(at,st){this.type=st.type,this.bindings=[].concat(at),this.result=st}evaluate(at){return this.result.evaluate(at)}eachChild(at){for(const st of this.bindings)at(st[1]);at(this.result)}static parse(at,st){if(at.length<4)return st.error(`Expected at least 3 arguments, but found ${at.length-1} instead.`);const ot=[];for(let Hl=1;Hl<at.length-1;Hl+=2){const ut=at[Hl];if("string"!=typeof ut)return st.error(`Expected string, but found ${typeof ut} instead.`,Hl);if(/[^a-zA-Z0-9_]/.test(ut))return st.error("Variable names must contain only alphanumeric characters or '_'.",Hl);const rc=st.parse(at[Hl+1],Hl+1);if(!rc)return null;ot.push([ut,rc])}const ut=st.parse(at[at.length-1],at.length-1,st.expectedType,ot);return ut?new Qt(ot,ut):null}outputDefined(){return this.result.outputDefined()}}class te{constructor(at,st){this.type=st.type,this.name=at,this.boundExpression=st}static parse(at,st){if(2!==at.length||"string"!=typeof at[1])return st.error("'var' expression requires exactly one string literal argument.");const ot=at[1];return st.scope.has(ot)?new te(ot,st.scope.get(ot)):st.error(`Unknown variable "${ot}". Make sure "${ot}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(at){return this.boundExpression.evaluate(at)}eachChild(){}outputDefined(){return!1}}class ee{constructor(at,st,ot){this.type=at,this.index=st,this.input=ot}static parse(at,st){if(3!==at.length)return st.error(`Expected 2 arguments, but found ${at.length-1} instead.`);const ot=st.parse(at[1],1,gu),ut=st.parse(at[2],2,W(st.expectedType||Du));return ot&&ut?new ee(ut.type.itemType,ot,ut):null}evaluate(at){const st=this.index.evaluate(at),ot=this.input.evaluate(at);if(st<0)throw new Dt(`Array index out of bounds: ${st} < 0.`);if(st>=ot.length)throw new Dt(`Array index out of bounds: ${st} > ${ot.length-1}.`);if(st!==Math.floor(st))throw new Dt(`Array index must be an integer, but found ${st} instead.`);return ot[st]}eachChild(at){at(this.index),at(this.input)}outputDefined(){return!1}}class re{constructor(at,st){this.type=yu,this.needle=at,this.haystack=st}static parse(at,st){if(3!==at.length)return st.error(`Expected 2 arguments, but found ${at.length-1} instead.`);const ot=st.parse(at[1],1,Du),ut=st.parse(at[2],2,Du);return ot&&ut?et(ot.type,[yu,Au,gu,mu,Du])?new re(ot,ut):st.error(`Expected first argument to be of type boolean, string, number or null, but found ${K(ot.type)} instead`):null}evaluate(at){const st=this.needle.evaluate(at),ot=this.haystack.evaluate(at);if(!ot)return!1;if(!rt(st,["boolean","string","number","null"]))throw new Dt(`Expected first argument to be of type boolean, string, number or null, but found ${K(Ut(st))} instead.`);if(!rt(ot,["string","array"]))throw new Dt(`Expected second argument to be of type array or string, but found ${K(Ut(ot))} instead.`);return ot.indexOf(st)>=0}eachChild(at){at(this.needle),at(this.haystack)}outputDefined(){return!0}}class ne{constructor(at,st,ot){this.type=gu,this.needle=at,this.haystack=st,this.fromIndex=ot}static parse(at,st){if(at.length<=2||at.length>=5)return st.error(`Expected 3 or 4 arguments, but found ${at.length-1} instead.`);const ot=st.parse(at[1],1,Du),ut=st.parse(at[2],2,Du);if(!ot||!ut)return null;if(!et(ot.type,[yu,Au,gu,mu,Du]))return st.error(`Expected first argument to be of type boolean, string, number or null, but found ${K(ot.type)} instead`);if(4===at.length){const Hl=st.parse(at[3],3,gu);return Hl?new ne(ot,ut,Hl):null}return new ne(ot,ut)}evaluate(at){const st=this.needle.evaluate(at),ot=this.haystack.evaluate(at);if(!rt(st,["boolean","string","number","null"]))throw new Dt(`Expected first argument to be of type boolean, string, number or null, but found ${K(Ut(st))} instead.`);let ut;if(this.fromIndex&&(ut=this.fromIndex.evaluate(at)),rt(ot,["string"])){const at=ot.indexOf(st,ut);return-1===at?-1:[...ot.slice(0,at)].length}if(rt(ot,["array"]))return ot.indexOf(st,ut);throw new Dt(`Expected second argument to be of type array or string, but found ${K(Ut(ot))} instead.`)}eachChild(at){at(this.needle),at(this.haystack),this.fromIndex&&at(this.fromIndex)}outputDefined(){return!1}}class ie{constructor(at,st,ot,ut,Hl,rc){this.inputType=at,this.type=st,this.input=ot,this.cases=ut,this.outputs=Hl,this.otherwise=rc}static parse(at,st){if(at.length<5)return st.error(`Expected at least 4 arguments, but found only ${at.length-1}.`);if(at.length%2!=1)return st.error("Expected an even number of arguments.");let ot,ut;st.expectedType&&"value"!==st.expectedType.kind&&(ut=st.expectedType);const Hl={},rc=[];for(let _c=2;_c<at.length-1;_c+=2){let sc=at[_c];const oc=at[_c+1];Array.isArray(sc)||(sc=[sc]);const wc=st.concat(_c);if(0===sc.length)return wc.error("Expected at least one branch label.");for(const at of sc){if("number"!=typeof at&&"string"!=typeof at)return wc.error("Branch labels must be numbers or strings.");if("number"==typeof at&&Math.abs(at)>Number.MAX_SAFE_INTEGER)return wc.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof at&&Math.floor(at)!==at)return wc.error("Numeric branch labels must be integer values.");if(ot){if(wc.checkSubtype(ot,Ut(at)))return null}else ot=Ut(at);if(void 0!==Hl[String(at)])return wc.error("Branch labels must be unique.");Hl[String(at)]=rc.length}const Sc=st.parse(oc,_c,ut);if(!Sc)return null;ut=ut||Sc.type,rc.push(Sc)}const sc=st.parse(at[1],1,Du);if(!sc)return null;const oc=st.parse(at[at.length-1],at.length-1,ut);return oc?"value"!==sc.type.kind&&st.concat(1).checkSubtype(ot,sc.type)?null:new ie(ot,ut,sc,Hl,rc,oc):null}evaluate(at){const st=this.input.evaluate(at);return(Ut(st)===this.inputType&&this.outputs[this.cases[st]]||this.otherwise).evaluate(at)}eachChild(at){at(this.input),this.outputs.forEach(at),at(this.otherwise)}outputDefined(){return this.outputs.every((at=>at.outputDefined()))&&this.otherwise.outputDefined()}}class se{constructor(at,st,ot){this.type=at,this.branches=st,this.otherwise=ot}static parse(at,st){if(at.length<4)return st.error(`Expected at least 3 arguments, but found only ${at.length-1}.`);if(at.length%2!=0)return st.error("Expected an odd number of arguments.");let ot;st.expectedType&&"value"!==st.expectedType.kind&&(ot=st.expectedType);const ut=[];for(let rc=1;rc<at.length-1;rc+=2){const Hl=st.parse(at[rc],rc,yu);if(!Hl)return null;const sc=st.parse(at[rc+1],rc+1,ot);if(!sc)return null;ut.push([Hl,sc]),ot=ot||sc.type}const Hl=st.parse(at[at.length-1],at.length-1,ot);if(!Hl)return null;if(!ot)throw new Error("Can't infer output type");return new se(ot,ut,Hl)}evaluate(at){for(const[st,ot]of this.branches)if(st.evaluate(at))return ot.evaluate(at);return this.otherwise.evaluate(at)}eachChild(at){for(const[st,ot]of this.branches)at(st),at(ot);at(this.otherwise)}outputDefined(){return this.branches.every((at=>{let[st,ot]=at;return ot.outputDefined()}))&&this.otherwise.outputDefined()}}class oe{constructor(at,st,ot,ut){this.type=at,this.input=st,this.beginIndex=ot,this.endIndex=ut}static parse(at,st){if(at.length<=2||at.length>=5)return st.error(`Expected 3 or 4 arguments, but found ${at.length-1} instead.`);const ot=st.parse(at[1],1,Du),ut=st.parse(at[2],2,gu);if(!ot||!ut)return null;if(!et(ot.type,[W(Du),Au,Du]))return st.error(`Expected first argument to be of type array or string, but found ${K(ot.type)} instead`);if(4===at.length){const Hl=st.parse(at[3],3,gu);return Hl?new oe(ot.type,ot,ut,Hl):null}return new oe(ot.type,ot,ut)}evaluate(at){const st=this.input.evaluate(at),ot=this.beginIndex.evaluate(at);let ut;if(this.endIndex&&(ut=this.endIndex.evaluate(at)),rt(st,["string"]))return[...st].slice(ot,ut).join("");if(rt(st,["array"]))return st.slice(ot,ut);throw new Dt(`Expected first argument to be of type array or string, but found ${K(Ut(st))} instead.`)}eachChild(at){at(this.input),at(this.beginIndex),this.endIndex&&at(this.endIndex)}outputDefined(){return!1}}function ae(at,st){const ot=at.length-1;let ut,Hl,rc=0,sc=ot,oc=0;for(;rc<=sc;)if(oc=Math.floor((rc+sc)/2),ut=at[oc],Hl=at[oc+1],ut<=st){if(oc===ot||st<Hl)return oc;rc=oc+1}else{if(!(ut>st))throw new Dt("Input is not a number.");sc=oc-1}return 0}class le{constructor(at,st,ot){this.type=at,this.input=st,this.labels=[],this.outputs=[];for(const[ut,Hl]of ot)this.labels.push(ut),this.outputs.push(Hl)}static parse(at,st){if(at.length-1<4)return st.error(`Expected at least 4 arguments, but found only ${at.length-1}.`);if((at.length-1)%2!=0)return st.error("Expected an even number of arguments.");const ot=st.parse(at[1],1,gu);if(!ot)return null;const ut=[];let Hl=null;st.expectedType&&"value"!==st.expectedType.kind&&(Hl=st.expectedType);for(let rc=1;rc<at.length;rc+=2){const ot=1===rc?-1/0:at[rc],sc=at[rc+1],oc=rc,_c=rc+1;if("number"!=typeof ot)return st.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',oc);if(ut.length&&ut[ut.length-1][0]>=ot)return st.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',oc);const wc=st.parse(sc,_c,Hl);if(!wc)return null;Hl=Hl||wc.type,ut.push([ot,wc])}return new le(Hl,ot,ut)}evaluate(at){const st=this.labels,ot=this.outputs;if(1===st.length)return ot[0].evaluate(at);const ut=this.input.evaluate(at);if(ut<=st[0])return ot[0].evaluate(at);const Hl=st.length;return ut>=st[Hl-1]?ot[Hl-1].evaluate(at):ot[ae(st,ut)].evaluate(at)}eachChild(at){at(this.input);for(const st of this.outputs)at(st)}outputDefined(){return this.outputs.every((at=>at.outputDefined()))}}var _d,xd,bd=function(){if(xd)return _d;function t(at,st,ot,ut){this.cx=3*at,this.bx=3*(ot-at)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*st,this.by=3*(ut-st)-this.cy,this.ay=1-this.cy-this.by,this.p1x=at,this.p1y=st,this.p2x=ot,this.p2y=ut}return xd=1,_d=t,t.prototype={sampleCurveX:function(at){return((this.ax*at+this.bx)*at+this.cx)*at},sampleCurveY:function(at){return((this.ay*at+this.by)*at+this.cy)*at},sampleCurveDerivativeX:function(at){return(3*this.ax*at+2*this.bx)*at+this.cx},solveCurveX:function(at,st){if(void 0===st&&(st=1e-6),at<0)return 0;if(at>1)return 1;for(var ot=at,ut=0;ut<8;ut++){var Hl=this.sampleCurveX(ot)-at;if(Math.abs(Hl)<st)return ot;var rc=this.sampleCurveDerivativeX(ot);if(Math.abs(rc)<1e-6)break;ot-=Hl/rc}var sc=0,oc=1;for(ot=at,ut=0;ut<20&&(Hl=this.sampleCurveX(ot),!(Math.abs(Hl-at)<st));ut++)at>Hl?sc=ot:oc=ot,ot=.5*(oc-sc)+sc;return ot},solve:function(at,st){return this.sampleCurveY(this.solveCurveX(at,st))}},_d}(),wd=function(at){return at&&at.__esModule&&Object.prototype.hasOwnProperty.call(at,"default")?at.default:at}(bd);class de{constructor(at,st,ot,ut,Hl){this.type=at,this.operator=st,this.interpolation=ot,this.input=ut,this.labels=[],this.outputs=[];for(const[rc,sc]of Hl)this.labels.push(rc),this.outputs.push(sc)}static interpolationFactor(at,st,ot,ut){let Hl=0;if("exponential"===at.name)Hl=ye(st,at.base,ot,ut);else if("linear"===at.name)Hl=ye(st,1,ot,ut);else if("cubic-bezier"===at.name){const rc=at.controlPoints;Hl=new wd(rc[0],rc[1],rc[2],rc[3]).solve(ye(st,1,ot,ut))}return Hl}static parse(at,st){let[ot,ut,Hl,...rc]=at;if(!Array.isArray(ut)||0===ut.length)return st.error("Expected an interpolation type expression.",1);if("linear"===ut[0])ut={name:"linear"};else if("exponential"===ut[0]){const at=ut[1];if("number"!=typeof at)return st.error("Exponential interpolation requires a numeric base.",1,1);ut={name:"exponential",base:at}}else{if("cubic-bezier"!==ut[0])return st.error(`Unknown interpolation type ${String(ut[0])}`,1,0);{const at=ut.slice(1);if(4!==at.length||at.some((at=>"number"!=typeof at||at<0||at>1)))return st.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ut={name:"cubic-bezier",controlPoints:at}}}if(at.length-1<4)return st.error(`Expected at least 4 arguments, but found only ${at.length-1}.`);if((at.length-1)%2!=0)return st.error("Expected an even number of arguments.");if(Hl=st.parse(Hl,2,gu),!Hl)return null;const sc=[];let oc=null;"interpolate-hcl"!==ot&&"interpolate-lab"!==ot||st.expectedType==ed?st.expectedType&&"value"!==st.expectedType.kind&&(oc=st.expectedType):oc=_u;for(let _c=0;_c<rc.length;_c+=2){const at=rc[_c],ot=rc[_c+1],ut=_c+3,Hl=_c+4;if("number"!=typeof at)return st.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ut);if(sc.length&&sc[sc.length-1][0]>=at)return st.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ut);const wc=st.parse(ot,Hl,oc);if(!wc)return null;oc=oc||wc.type,sc.push([at,wc])}return nt(oc,gu)||nt(oc,xu)||nt(oc,_u)||nt(oc,hh)||nt(oc,td)||nt(oc,ed)||nt(oc,nd)||nt(oc,W(gu))?new de(oc,ot,ut,Hl,sc):st.error(`Type ${K(oc)} is not interpolatable.`)}evaluate(at){const st=this.labels,ot=this.outputs;if(1===st.length)return ot[0].evaluate(at);const ut=this.input.evaluate(at);if(ut<=st[0])return ot[0].evaluate(at);const Hl=st.length;if(ut>=st[Hl-1])return ot[Hl-1].evaluate(at);const rc=ae(st,ut),sc=de.interpolationFactor(this.interpolation,ut,st[rc],st[rc+1]),oc=ot[rc].evaluate(at),_c=ot[rc+1].evaluate(at);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return It(oc,_c,sc);case"color":return zt.interpolate(oc,_c,sc);case"padding":return Et.interpolate(oc,_c,sc);case"colorArray":return Ft.interpolate(oc,_c,sc);case"numberArray":return Vt.interpolate(oc,_c,sc);case"variableAnchorOffsetCollection":return $t.interpolate(oc,_c,sc);case"array":return Mt(oc,_c,sc);case"projectionDefinition":return Rt.interpolate(oc,_c,sc)}case"interpolate-hcl":switch(this.type.kind){case"color":return zt.interpolate(oc,_c,sc,"hcl");case"colorArray":return Ft.interpolate(oc,_c,sc,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return zt.interpolate(oc,_c,sc,"lab");case"colorArray":return Ft.interpolate(oc,_c,sc,"lab")}}}eachChild(at){at(this.input);for(const st of this.outputs)at(st)}outputDefined(){return this.outputs.every((at=>at.outputDefined()))}}function ye(at,st,ot,ut){const Hl=ut-ot,rc=at-ot;return 0===Hl?0:1===st?rc/Hl:(Math.pow(st,rc)-1)/(Math.pow(st,Hl)-1)}const Ed={color:zt.interpolate,number:It,padding:Et.interpolate,numberArray:Vt.interpolate,colorArray:Ft.interpolate,variableAnchorOffsetCollection:$t.interpolate,array:Mt};class ge{constructor(at,st){this.type=at,this.args=st}static parse(at,st){if(at.length<2)return st.error("Expected at least one argument.");let ot=null;const ut=st.expectedType;ut&&"value"!==ut.kind&&(ot=ut);const Hl=[];for(const sc of at.slice(1)){const at=st.parse(sc,1+Hl.length,ot,void 0,{typeAnnotation:"omit"});if(!at)return null;ot=ot||at.type,Hl.push(at)}if(!ot)throw new Error("No output type");const rc=ut&&Hl.some((at=>tt(ut,at.type)));return new ge(rc?Du:ot,Hl)}evaluate(at){let st,ot=null,ut=0;for(const Hl of this.args)if(ut++,ot=Hl.evaluate(at),ot&&ot instanceof Ot&&!ot.available&&(st||(st=ot.name),ot=null,ut===this.args.length&&(ot=st)),null!==ot)break;return ot}eachChild(at){this.args.forEach(at)}outputDefined(){return this.args.every((at=>at.outputDefined()))}}function xe(at,st){return"=="===at||"!="===at?"boolean"===st.kind||"string"===st.kind||"number"===st.kind||"null"===st.kind||"value"===st.kind:"string"===st.kind||"number"===st.kind||"value"===st.kind}function ve(at,st,ot,ut){return 0===ut.compare(st,ot)}function be(at,st,ot){const ut="=="!==at&&"!="!==at;return class i{constructor(at,st,ot){this.type=yu,this.lhs=at,this.rhs=st,this.collator=ot,this.hasUntypedArgument="value"===at.type.kind||"value"===st.type.kind}static parse(at,st){if(3!==at.length&&4!==at.length)return st.error("Expected two or three arguments.");const ot=at[0];let Hl=st.parse(at[1],1,Du);if(!Hl)return null;if(!xe(ot,Hl.type))return st.concat(1).error(`"${ot}" comparisons are not supported for type '${K(Hl.type)}'.`);let rc=st.parse(at[2],2,Du);if(!rc)return null;if(!xe(ot,rc.type))return st.concat(2).error(`"${ot}" comparisons are not supported for type '${K(rc.type)}'.`);if(Hl.type.kind!==rc.type.kind&&"value"!==Hl.type.kind&&"value"!==rc.type.kind)return st.error(`Cannot compare types '${K(Hl.type)}' and '${K(rc.type)}'.`);ut&&("value"===Hl.type.kind&&"value"!==rc.type.kind?Hl=new Zt(rc.type,[Hl]):"value"!==Hl.type.kind&&"value"===rc.type.kind&&(rc=new Zt(Hl.type,[rc])));let sc=null;if(4===at.length){if("string"!==Hl.type.kind&&"string"!==rc.type.kind&&"value"!==Hl.type.kind&&"value"!==rc.type.kind)return st.error("Cannot use collator to compare non-string types.");if(sc=st.parse(at[3],3,Lu),!sc)return null}return new i(Hl,rc,sc)}evaluate(Hl){const rc=this.lhs.evaluate(Hl),sc=this.rhs.evaluate(Hl);if(ut&&this.hasUntypedArgument){const st=Ut(rc),ot=Ut(sc);if(st.kind!==ot.kind||"string"!==st.kind&&"number"!==st.kind)throw new Dt(`Expected arguments for "${at}" to be (string, string) or (number, number), but found (${st.kind}, ${ot.kind}) instead.`)}if(this.collator&&!ut&&this.hasUntypedArgument){const at=Ut(rc),ot=Ut(sc);if("string"!==at.kind||"string"!==ot.kind)return st(Hl,rc,sc)}return this.collator?ot(Hl,rc,sc,this.collator.evaluate(Hl)):st(Hl,rc,sc)}eachChild(at){at(this.lhs),at(this.rhs),this.collator&&at(this.collator)}outputDefined(){return!0}}}const Md=be("==",(function(at,st,ot){return st===ot}),ve),Sd=be("!=",(function(at,st,ot){return st!==ot}),(function(at,st,ot,ut){return!ve(0,st,ot,ut)})),Td=be("<",(function(at,st,ot){return st<ot}),(function(at,st,ot,ut){return ut.compare(st,ot)<0})),Cd=be(">",(function(at,st,ot){return st>ot}),(function(at,st,ot,ut){return ut.compare(st,ot)>0})),kd=be("<=",(function(at,st,ot){return st<=ot}),(function(at,st,ot,ut){return ut.compare(st,ot)<=0})),Id=be(">=",(function(at,st,ot){return st>=ot}),(function(at,st,ot,ut){return ut.compare(st,ot)>=0}));class Me{constructor(at,st,ot){this.type=Lu,this.locale=ot,this.caseSensitive=at,this.diacriticSensitive=st}static parse(at,st){if(2!==at.length)return st.error("Expected one argument.");const ot=at[1];if("object"!=typeof ot||Array.isArray(ot))return st.error("Collator options argument must be an object.");const ut=st.parse(void 0!==ot["case-sensitive"]&&ot["case-sensitive"],1,yu);if(!ut)return null;const Hl=st.parse(void 0!==ot["diacritic-sensitive"]&&ot["diacritic-sensitive"],1,yu);if(!Hl)return null;let rc=null;return ot.locale&&(rc=st.parse(ot.locale,1,Au),!rc)?null:new Me(ut,Hl,rc)}evaluate(at){return new Pt(this.caseSensitive.evaluate(at),this.diacriticSensitive.evaluate(at),this.locale?this.locale.evaluate(at):null)}eachChild(at){at(this.caseSensitive),at(this.diacriticSensitive),this.locale&&at(this.locale)}outputDefined(){return!1}}class ze{constructor(at,st,ot,ut,Hl){this.type=Au,this.number=at,this.locale=st,this.currency=ot,this.minFractionDigits=ut,this.maxFractionDigits=Hl}static parse(at,st){if(3!==at.length)return st.error("Expected two arguments.");const ot=st.parse(at[1],1,gu);if(!ot)return null;const ut=at[2];if("object"!=typeof ut||Array.isArray(ut))return st.error("NumberFormat options argument must be an object.");let Hl=null;if(ut.locale&&(Hl=st.parse(ut.locale,1,Au),!Hl))return null;let rc=null;if(ut.currency&&(rc=st.parse(ut.currency,1,Au),!rc))return null;let sc=null;if(ut["min-fraction-digits"]&&(sc=st.parse(ut["min-fraction-digits"],1,gu),!sc))return null;let oc=null;return ut["max-fraction-digits"]&&(oc=st.parse(ut["max-fraction-digits"],1,gu),!oc)?null:new ze(ot,Hl,rc,sc,oc)}evaluate(at){return new Intl.NumberFormat(this.locale?this.locale.evaluate(at):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(at):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(at):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(at):void 0}).format(this.number.evaluate(at))}eachChild(at){at(this.number),this.locale&&at(this.locale),this.currency&&at(this.currency),this.minFractionDigits&&at(this.minFractionDigits),this.maxFractionDigits&&at(this.maxFractionDigits)}outputDefined(){return!1}}class Pe{constructor(at){this.type=$u,this.sections=at}static parse(at,st){if(at.length<2)return st.error("Expected at least one argument.");const ot=at[1];if(!Array.isArray(ot)&&"object"==typeof ot)return st.error("First argument must be an image or text section.");const ut=[];let Hl=!1;for(let rc=1;rc<=at.length-1;++rc){const ot=at[rc];if(Hl&&"object"==typeof ot&&!Array.isArray(ot)){Hl=!1;let at=null;if(ot["font-scale"]&&(at=st.parse(ot["font-scale"],1,gu),!at))return null;let rc=null;if(ot["text-font"]&&(rc=st.parse(ot["text-font"],1,W(Au)),!rc))return null;let sc=null;if(ot["text-color"]&&(sc=st.parse(ot["text-color"],1,_u),!sc))return null;let oc=null;if(ot["vertical-align"]){if("string"==typeof ot["vertical-align"]&&!gd.includes(ot["vertical-align"]))return st.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${ot["vertical-align"]}' instead.`);if(oc=st.parse(ot["vertical-align"],1,Au),!oc)return null}const _c=ut[ut.length-1];_c.scale=at,_c.font=rc,_c.textColor=sc,_c.verticalAlign=oc}else{const ot=st.parse(at[rc],1,Du);if(!ot)return null;const sc=ot.type.kind;if("string"!==sc&&"value"!==sc&&"null"!==sc&&"resolvedImage"!==sc)return st.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Hl=!0,ut.push({content:ot,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Pe(ut)}evaluate(at){return new Bt(this.sections.map((st=>{const ot=st.content.evaluate(at);return Ut(ot)===id?new Ct("",ot,null,null,null,st.verticalAlign?st.verticalAlign.evaluate(at):null):new Ct(qt(ot),null,st.scale?st.scale.evaluate(at):null,st.font?st.font.evaluate(at).join(","):null,st.textColor?st.textColor.evaluate(at):null,st.verticalAlign?st.verticalAlign.evaluate(at):null)})))}eachChild(at){for(const st of this.sections)at(st.content),st.scale&&at(st.scale),st.font&&at(st.font),st.textColor&&at(st.textColor),st.verticalAlign&&at(st.verticalAlign)}outputDefined(){return!1}}class Te{constructor(at){this.type=id,this.input=at}static parse(at,st){if(2!==at.length)return st.error("Expected two arguments.");const ot=st.parse(at[1],1,Au);return ot?new Te(ot):st.error("No image name provided.")}evaluate(at){const st=this.input.evaluate(at),ot=Ot.fromString(st);return ot&&at.availableImages&&(ot.available=at.availableImages.indexOf(st)>-1),ot}eachChild(at){at(this.input)}outputDefined(){return!1}}class Ce{constructor(at){this.type=gu,this.input=at}static parse(at,st){if(2!==at.length)return st.error(`Expected 1 argument, but found ${at.length-1} instead.`);const ot=st.parse(at[1],1);return ot?"array"!==ot.type.kind&&"string"!==ot.type.kind&&"value"!==ot.type.kind?st.error(`Expected argument of type string or array, but found ${K(ot.type)} instead.`):new Ce(ot):null}evaluate(at){const st=this.input.evaluate(at);if("string"==typeof st)return[...st].length;if(Array.isArray(st))return st.length;throw new Dt(`Expected value to be of type string or array, but found ${K(Ut(st))} instead.`)}eachChild(at){at(this.input)}outputDefined(){return!1}}const Dd=8192;function Ee(at,st){const ot=(180+at[0])/360,ut=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+at[1]*Math.PI/360)))/360,Hl=Math.pow(2,st.z);return[Math.round(ot*Hl*Dd),Math.round(ut*Hl*Dd)]}function Ve(at,st){const ot=Math.pow(2,st.z);return[(Hl=(at[0]/Dd+st.x)/ot,360*Hl-180),(ut=(at[1]/Dd+st.y)/ot,360/Math.PI*Math.atan(Math.exp((180-360*ut)*Math.PI/180))-90)];var ut,Hl}function Fe(at,st){at[0]=Math.min(at[0],st[0]),at[1]=Math.min(at[1],st[1]),at[2]=Math.max(at[2],st[0]),at[3]=Math.max(at[3],st[1])}function De(at,st){return!(at[0]<=st[0]||at[2]>=st[2]||at[1]<=st[1]||at[3]>=st[3])}function Le(at,st,ot){const ut=at[0]-st[0],Hl=at[1]-st[1],rc=at[0]-ot[0],sc=at[1]-ot[1];return ut*sc-rc*Hl==0&&ut*rc<=0&&Hl*sc<=0}function $e(at,st,ot,ut){return 0!=(Hl=[ut[0]-ot[0],ut[1]-ot[1]])[0]*(rc=[st[0]-at[0],st[1]-at[1]])[1]-Hl[1]*rc[0]&&!(!qe(at,st,ot,ut)||!qe(ot,ut,at,st));var Hl,rc}function Oe(at,st,ot){for(const ut of ot)for(let ot=0;ot<ut.length-1;++ot)if($e(at,st,ut[ot],ut[ot+1]))return!0;return!1}function Re(at,st,ot){void 0===ot&&(ot=!1);let ut=!1;for(const oc of st)for(let st=0;st<oc.length-1;st++){if(Le(at,oc[st],oc[st+1]))return ot;(rc=oc[st])[1]>(Hl=at)[1]!=(sc=oc[st+1])[1]>Hl[1]&&Hl[0]<(sc[0]-rc[0])*(Hl[1]-rc[1])/(sc[1]-rc[1])+rc[0]&&(ut=!ut)}var Hl,rc,sc;return ut}function Ne(at,st){for(const ot of st)if(Re(at,ot))return!0;return!1}function je(at,st){for(const ot of at)if(!Re(ot,st))return!1;for(let ot=0;ot<at.length-1;++ot)if(Oe(at[ot],at[ot+1],st))return!1;return!0}function Ue(at,st){for(const ot of st)if(je(at,ot))return!0;return!1}function qe(at,st,ot,ut){const Hl=ut[0]-ot[0],rc=ut[1]-ot[1],sc=(at[0]-ot[0])*rc-Hl*(at[1]-ot[1]),oc=(st[0]-ot[0])*rc-Hl*(st[1]-ot[1]);return sc>0&&oc<0||sc<0&&oc>0}function Ge(at,st,ot){const ut=[];for(let Hl=0;Hl<at.length;Hl++){const rc=[];for(let ut=0;ut<at[Hl].length;ut++){const sc=Ee(at[Hl][ut],ot);Fe(st,sc),rc.push(sc)}ut.push(rc)}return ut}function Xe(at,st,ot){const ut=[];for(let Hl=0;Hl<at.length;Hl++){const rc=Ge(at[Hl],st,ot);ut.push(rc)}return ut}function Ze(at,st,ot,ut){if(at[0]<ot[0]||at[0]>ot[2]){const st=.5*ut;let Hl=at[0]-ot[0]>st?-ut:ot[0]-at[0]>st?ut:0;0===Hl&&(Hl=at[0]-ot[2]>st?-ut:ot[2]-at[0]>st?ut:0),at[0]+=Hl}Fe(st,at)}function Ye(at,st,ot,ut){const Hl=Math.pow(2,ut.z)*Dd,rc=[ut.x*Dd,ut.y*Dd],sc=[];for(const oc of at)for(const at of oc){const ut=[at.x+rc[0],at.y+rc[1]];Ze(ut,st,ot,Hl),sc.push(ut)}return sc}function He(at,st,ot,ut){const Hl=Math.pow(2,ut.z)*Dd,rc=[ut.x*Dd,ut.y*Dd],sc=[];for(const _c of at){const at=[];for(const ot of _c){const ut=[ot.x+rc[0],ot.y+rc[1]];Fe(st,ut),at.push(ut)}sc.push(at)}if(st[2]-st[0]<=Hl/2){(oc=st)[0]=oc[1]=1/0,oc[2]=oc[3]=-1/0;for(const at of sc)for(const ut of at)Ze(ut,st,ot,Hl)}var oc;return sc}class Je{constructor(at,st){this.type=yu,this.geojson=at,this.geometries=st}static parse(at,st){if(2!==at.length)return st.error(`'within' expression requires exactly one argument, but found ${at.length-1} instead.`);if(jt(at[1])){const st=at[1];if("FeatureCollection"===st.type){const at=[];for(const ot of st.features){const{type:st,coordinates:ut}=ot.geometry;"Polygon"===st&&at.push(ut),"MultiPolygon"===st&&at.push(...ut)}if(at.length)return new Je(st,{type:"MultiPolygon",coordinates:at})}else if("Feature"===st.type){const at=st.geometry.type;if("Polygon"===at||"MultiPolygon"===at)return new Je(st,st.geometry)}else if("Polygon"===st.type||"MultiPolygon"===st.type)return new Je(st,st)}return st.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(at){if(null!=at.geometry()&&null!=at.canonicalID()){if("Point"===at.geometryType())return function(at,st){const ot=[1/0,1/0,-1/0,-1/0],ut=[1/0,1/0,-1/0,-1/0],Hl=at.canonicalID();if("Polygon"===st.type){const rc=Ge(st.coordinates,ut,Hl),sc=Ye(at.geometry(),ot,ut,Hl);if(!De(ot,ut))return!1;for(const at of sc)if(!Re(at,rc))return!1}if("MultiPolygon"===st.type){const rc=Xe(st.coordinates,ut,Hl),sc=Ye(at.geometry(),ot,ut,Hl);if(!De(ot,ut))return!1;for(const at of sc)if(!Ne(at,rc))return!1}return!0}(at,this.geometries);if("LineString"===at.geometryType())return function(at,st){const ot=[1/0,1/0,-1/0,-1/0],ut=[1/0,1/0,-1/0,-1/0],Hl=at.canonicalID();if("Polygon"===st.type){const rc=Ge(st.coordinates,ut,Hl),sc=He(at.geometry(),ot,ut,Hl);if(!De(ot,ut))return!1;for(const at of sc)if(!je(at,rc))return!1}if("MultiPolygon"===st.type){const rc=Xe(st.coordinates,ut,Hl),sc=He(at.geometry(),ot,ut,Hl);if(!De(ot,ut))return!1;for(const at of sc)if(!Ue(at,rc))return!1}return!0}(at,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Ld=class{constructor(at,st){if(void 0===at&&(at=[]),void 0===st&&(st=(at,st)=>at<st?-1:at>st?1:0),this.data=at,this.length=this.data.length,this.compare=st,this.length>0)for(let ot=(this.length>>1)-1;ot>=0;ot--)this._down(ot)}push(at){this.data.push(at),this._up(this.length++)}pop(){if(0===this.length)return;const at=this.data[0],st=this.data.pop();return--this.length>0&&(this.data[0]=st,this._down(0)),at}peek(){return this.data[0]}_up(at){const{data:st,compare:ot}=this,ut=st[at];for(;at>0;){const Hl=at-1>>1,rc=st[Hl];if(ot(ut,rc)>=0)break;st[at]=rc,at=Hl}st[at]=ut}_down(at){const{data:st,compare:ot}=this,ut=this.length>>1,Hl=st[at];for(;at<ut;){let ut=1+(at<<1);const rc=ut+1;if(rc<this.length&&ot(st[rc],st[ut])<0&&(ut=rc),ot(st[ut],Hl)>=0)break;st[at]=st[ut],at=ut}st[at]=Hl}};function Ke(at,st,ot,ut,Hl){for(void 0===ot&&(ot=0),void 0===ut&&(ut=at.length-1),void 0===Hl&&(Hl=tr);ut>ot;){if(ut-ot>600){const rc=ut-ot+1,sc=st-ot+1,oc=Math.log(rc),_c=.5*Math.exp(2*oc/3),wc=.5*Math.sqrt(oc*_c*(rc-_c)/rc)*(sc-rc/2<0?-1:1);Ke(at,st,Math.max(ot,Math.floor(st-sc*_c/rc+wc)),Math.min(ut,Math.floor(st+(rc-sc)*_c/rc+wc)),Hl)}const rc=at[st];let sc=ot,oc=ut;for(Qe(at,ot,st),Hl(at[ut],rc)>0&&Qe(at,ot,ut);sc<oc;){for(Qe(at,sc,oc),sc++,oc--;Hl(at[sc],rc)<0;)sc++;for(;Hl(at[oc],rc)>0;)oc--}0===Hl(at[ot],rc)?Qe(at,ot,oc):(oc++,Qe(at,oc,ut)),oc<=st&&(ot=oc+1),st<=oc&&(ut=oc-1)}}function Qe(at,st,ot){const ut=at[st];at[st]=at[ot],at[ot]=ut}function tr(at,st){return at<st?-1:at>st?1:0}function er(at,st){if(at.length<=1)return[at];const ot=[];let ut,Hl;for(const rc of at){const at=nr(rc);0!==at&&(rc.area=Math.abs(at),void 0===Hl&&(Hl=at<0),Hl===at<0?(ut&&ot.push(ut),ut=[rc]):ut.push(rc))}if(ut&&ot.push(ut),st>1)for(let rc=0;rc<ot.length;rc++)ot[rc].length<=st||(Ke(ot[rc],st,1,ot[rc].length-1,rr),ot[rc]=ot[rc].slice(0,st));return ot}function rr(at,st){return st.area-at.area}function nr(at){let st=0;for(let ot,ut,Hl=0,rc=at.length,sc=rc-1;Hl<rc;sc=Hl++)ot=at[Hl],ut=at[sc],st+=(ut.x-ot.x)*(ot.y+ut.y);return st}const Pd=1/298.257223563,zd=Pd*(2-Pd),Nd=Math.PI/180;class ar{constructor(at){const st=6378.137*Nd*1e3,ot=Math.cos(at*Nd),ut=1/(1-zd*(1-ot*ot)),Hl=Math.sqrt(ut);this.kx=st*Hl*ot,this.ky=st*Hl*ut*(1-zd)}distance(at,st){const ot=this.wrap(at[0]-st[0])*this.kx,ut=(at[1]-st[1])*this.ky;return Math.sqrt(ot*ot+ut*ut)}pointOnLine(at,st){let ot,ut,Hl,rc,sc=1/0;for(let oc=0;oc<at.length-1;oc++){let _c=at[oc][0],wc=at[oc][1],Sc=this.wrap(at[oc+1][0]-_c)*this.kx,iu=(at[oc+1][1]-wc)*this.ky,su=0;0===Sc&&0===iu||(su=(this.wrap(st[0]-_c)*this.kx*Sc+(st[1]-wc)*this.ky*iu)/(Sc*Sc+iu*iu),su>1?(_c=at[oc+1][0],wc=at[oc+1][1]):su>0&&(_c+=Sc/this.kx*su,wc+=iu/this.ky*su)),Sc=this.wrap(st[0]-_c)*this.kx,iu=(st[1]-wc)*this.ky;const lu=Sc*Sc+iu*iu;lu<sc&&(sc=lu,ot=_c,ut=wc,Hl=oc,rc=su)}return{point:[ot,ut],index:Hl,t:Math.max(0,Math.min(1,rc))}}wrap(at){for(;at<-180;)at+=360;for(;at>180;)at-=360;return at}}function lr(at,st){return st[0]-at[0]}function ur(at){return at[1]-at[0]+1}function cr(at,st){return at[1]>=at[0]&&at[1]<st}function hr(at,st){if(at[0]>at[1])return[null,null];const ot=ur(at);if(st){if(2===ot)return[at,null];const st=Math.floor(ot/2);return[[at[0],at[0]+st],[at[0]+st,at[1]]]}if(1===ot)return[at,null];const ut=Math.floor(ot/2)-1;return[[at[0],at[0]+ut],[at[0]+ut+1,at[1]]]}function pr(at,st){if(!cr(st,at.length))return[1/0,1/0,-1/0,-1/0];const ot=[1/0,1/0,-1/0,-1/0];for(let ut=st[0];ut<=st[1];++ut)Fe(ot,at[ut]);return ot}function fr(at){const st=[1/0,1/0,-1/0,-1/0];for(const ot of at)for(const at of ot)Fe(st,at);return st}function dr(at){return at[0]!==-1/0&&at[1]!==-1/0&&at[2]!==1/0&&at[3]!==1/0}function yr(at,st,ot){if(!dr(at)||!dr(st))return NaN;let ut=0,Hl=0;return at[2]<st[0]&&(ut=st[0]-at[2]),at[0]>st[2]&&(ut=at[0]-st[2]),at[1]>st[3]&&(Hl=at[1]-st[3]),at[3]<st[1]&&(Hl=st[1]-at[3]),ot.distance([0,0],[ut,Hl])}function mr(at,st,ot){const ut=ot.pointOnLine(st,at);return ot.distance(at,ut.point)}function gr(at,st,ot,ut,Hl){const rc=Math.min(mr(at,[ot,ut],Hl),mr(st,[ot,ut],Hl)),sc=Math.min(mr(ot,[at,st],Hl),mr(ut,[at,st],Hl));return Math.min(rc,sc)}function xr(at,st,ot,ut,Hl){if(!cr(st,at.length)||!cr(ut,ot.length))return 1/0;let rc=1/0;for(let sc=st[0];sc<st[1];++sc){const st=at[sc],oc=at[sc+1];for(let at=ut[0];at<ut[1];++at){const ut=ot[at],sc=ot[at+1];if($e(st,oc,ut,sc))return 0;rc=Math.min(rc,gr(st,oc,ut,sc,Hl))}}return rc}function vr(at,st,ot,ut,Hl){if(!cr(st,at.length)||!cr(ut,ot.length))return NaN;let rc=1/0;for(let sc=st[0];sc<=st[1];++sc)for(let st=ut[0];st<=ut[1];++st)if(rc=Math.min(rc,Hl.distance(at[sc],ot[st])),0===rc)return rc;return rc}function br(at,st,ot){if(Re(at,st,!0))return 0;let ut=1/0;for(const Hl of st){const st=Hl[0],rc=Hl[Hl.length-1];if(st!==rc&&(ut=Math.min(ut,mr(at,[rc,st],ot)),0===ut))return ut;const sc=ot.pointOnLine(Hl,at);if(ut=Math.min(ut,ot.distance(at,sc.point)),0===ut)return ut}return ut}function wr(at,st,ot,ut){if(!cr(st,at.length))return NaN;for(let rc=st[0];rc<=st[1];++rc)if(Re(at[rc],ot,!0))return 0;let Hl=1/0;for(let rc=st[0];rc<st[1];++rc){const st=at[rc],sc=at[rc+1];for(const at of ot)for(let ot=0,rc=at.length,oc=rc-1;ot<rc;oc=ot++){const rc=at[oc],_c=at[ot];if($e(st,sc,rc,_c))return 0;Hl=Math.min(Hl,gr(st,sc,rc,_c,ut))}}return Hl}function _r(at,st){for(const ot of at)for(const at of ot)if(Re(at,st,!0))return!0;return!1}function Sr(at,st,ot,ut){void 0===ut&&(ut=1/0);const Hl=fr(at),rc=fr(st);if(ut!==1/0&&yr(Hl,rc,ot)>=ut)return ut;if(De(Hl,rc)){if(_r(at,st))return 0}else if(_r(st,at))return 0;let sc=1/0;for(const oc of at)for(let at=0,ut=oc.length,Hl=ut-1;at<ut;Hl=at++){const ut=oc[Hl],rc=oc[at];for(const at of st)for(let st=0,Hl=at.length,oc=Hl-1;st<Hl;oc=st++){const Hl=at[oc],_c=at[st];if($e(ut,rc,Hl,_c))return 0;sc=Math.min(sc,gr(ut,rc,Hl,_c,ot))}}return sc}function kr(at,st,ot,ut,Hl,rc){if(!rc)return;const sc=yr(pr(ut,rc),Hl,ot);sc<st&&at.push([sc,rc,[0,0]])}function Ar(at,st,ot,ut,Hl,rc,sc){if(!rc||!sc)return;const oc=yr(pr(ut,rc),pr(Hl,sc),ot);oc<st&&at.push([oc,rc,sc])}function Ir(at,st,ot,ut,Hl){void 0===Hl&&(Hl=1/0);let rc=Math.min(ut.distance(at[0],ot[0][0]),Hl);if(0===rc)return rc;const sc=new Ld([[0,[0,at.length-1],[0,0]]],lr),oc=fr(ot);for(;sc.length>0;){const Hl=sc.pop();if(Hl[0]>=rc)continue;const _c=Hl[1],wc=st?50:100;if(ur(_c)<=wc){if(!cr(_c,at.length))return NaN;if(st){const st=wr(at,_c,ot,ut);if(isNaN(st)||0===st)return st;rc=Math.min(rc,st)}else for(let st=_c[0];st<=_c[1];++st){const Hl=br(at[st],ot,ut);if(rc=Math.min(rc,Hl),0===rc)return 0}}else{const ot=hr(_c,st);kr(sc,rc,ut,at,oc,ot[0]),kr(sc,rc,ut,at,oc,ot[1])}}return rc}function Mr(at,st,ot,ut,Hl,rc){void 0===rc&&(rc=1/0);let sc=Math.min(rc,Hl.distance(at[0],ot[0]));if(0===sc)return sc;const oc=new Ld([[0,[0,at.length-1],[0,ot.length-1]]],lr);for(;oc.length>0;){const rc=oc.pop();if(rc[0]>=sc)continue;const _c=rc[1],wc=rc[2],Sc=st?50:100,iu=ut?50:100;if(ur(_c)<=Sc&&ur(wc)<=iu){if(!cr(_c,at.length)&&cr(wc,ot.length))return NaN;let rc;if(st&&ut)rc=xr(at,_c,ot,wc,Hl),sc=Math.min(sc,rc);else if(st&&!ut){const st=at.slice(_c[0],_c[1]+1);for(let at=wc[0];at<=wc[1];++at)if(rc=mr(ot[at],st,Hl),sc=Math.min(sc,rc),0===sc)return sc}else if(!st&&ut){const st=ot.slice(wc[0],wc[1]+1);for(let ot=_c[0];ot<=_c[1];++ot)if(rc=mr(at[ot],st,Hl),sc=Math.min(sc,rc),0===sc)return sc}else rc=vr(at,_c,ot,wc,Hl),sc=Math.min(sc,rc)}else{const rc=hr(_c,st),Sc=hr(wc,ut);Ar(oc,sc,Hl,at,ot,rc[0],Sc[0]),Ar(oc,sc,Hl,at,ot,rc[0],Sc[1]),Ar(oc,sc,Hl,at,ot,rc[1],Sc[0]),Ar(oc,sc,Hl,at,ot,rc[1],Sc[1])}}return sc}function zr(at){return"MultiPolygon"===at.type?at.coordinates.map((at=>({type:"Polygon",coordinates:at}))):"MultiLineString"===at.type?at.coordinates.map((at=>({type:"LineString",coordinates:at}))):"MultiPoint"===at.type?at.coordinates.map((at=>({type:"Point",coordinates:at}))):[at]}class Pr{constructor(at,st){this.type=gu,this.geojson=at,this.geometries=st}static parse(at,st){if(2!==at.length)return st.error(`'distance' expression requires exactly one argument, but found ${at.length-1} instead.`);if(jt(at[1])){const st=at[1];if("FeatureCollection"===st.type)return new Pr(st,st.features.map((at=>zr(at.geometry))).flat());if("Feature"===st.type)return new Pr(st,zr(st.geometry));if("type"in st&&"coordinates"in st)return new Pr(st,zr(st))}return st.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(at){if(null!=at.geometry()&&null!=at.canonicalID()){if("Point"===at.geometryType())return function(at,st){const ot=at.geometry(),ut=ot.flat().map((st=>Ve([st.x,st.y],at.canonical)));if(0===ot.length)return NaN;const Hl=new ar(ut[0][1]);let rc=1/0;for(const sc of st){switch(sc.type){case"Point":rc=Math.min(rc,Mr(ut,!1,[sc.coordinates],!1,Hl,rc));break;case"LineString":rc=Math.min(rc,Mr(ut,!1,sc.coordinates,!0,Hl,rc));break;case"Polygon":rc=Math.min(rc,Ir(ut,!1,sc.coordinates,Hl,rc))}if(0===rc)return rc}return rc}(at,this.geometries);if("LineString"===at.geometryType())return function(at,st){const ot=at.geometry(),ut=ot.flat().map((st=>Ve([st.x,st.y],at.canonical)));if(0===ot.length)return NaN;const Hl=new ar(ut[0][1]);let rc=1/0;for(const sc of st){switch(sc.type){case"Point":rc=Math.min(rc,Mr(ut,!0,[sc.coordinates],!1,Hl,rc));break;case"LineString":rc=Math.min(rc,Mr(ut,!0,sc.coordinates,!0,Hl,rc));break;case"Polygon":rc=Math.min(rc,Ir(ut,!0,sc.coordinates,Hl,rc))}if(0===rc)return rc}return rc}(at,this.geometries);if("Polygon"===at.geometryType())return function(at,st){const ot=at.geometry();if(0===ot.length||0===ot[0].length)return NaN;const ut=er(ot,0).map((st=>st.map((st=>st.map((st=>Ve([st.x,st.y],at.canonical))))))),Hl=new ar(ut[0][0][0][1]);let rc=1/0;for(const sc of st)for(const at of ut){switch(sc.type){case"Point":rc=Math.min(rc,Ir([sc.coordinates],!1,at,Hl,rc));break;case"LineString":rc=Math.min(rc,Ir(sc.coordinates,!0,at,Hl,rc));break;case"Polygon":rc=Math.min(rc,Sr(at,sc.coordinates,Hl,rc))}if(0===rc)return rc}return rc}(at,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Tr{constructor(at){this.type=Du,this.key=at}static parse(at,st){if(2!==at.length)return st.error(`Expected 1 argument, but found ${at.length-1} instead.`);const ot=at[1];return null==ot?st.error("Global state property must be defined."):"string"!=typeof ot?st.error(`Global state property must be string, but found ${typeof at[1]} instead.`):new Tr(ot)}evaluate(at){var st;const ot=null===(st=at.globals)||void 0===st?void 0:st.globalState;return ot&&0!==Object.keys(ot).length?bt(ot,this.key):null}eachChild(){}outputDefined(){return!1}}const Rd={"==":Md,"!=":Sd,">":Cd,"<":Td,">=":Id,"<=":kd,array:Zt,at:ee,boolean:Zt,case:se,coalesce:ge,collator:Me,format:Pe,image:Te,in:re,"index-of":ne,interpolate:de,"interpolate-hcl":de,"interpolate-lab":de,length:Ce,let:Qt,literal:Gt,match:ie,number:Zt,"number-format":ze,object:Zt,slice:oe,step:le,string:Zt,"to-boolean":Ht,"to-color":Ht,"to-number":Ht,"to-string":Ht,var:te,within:Je,distance:Pr,"global-state":Tr};class Br{constructor(at,st,ot,ut){this.name=at,this.type=st,this._evaluate=ot,this.args=ut}evaluate(at){return this._evaluate(at,this.args)}eachChild(at){this.args.forEach(at)}outputDefined(){return!1}static parse(at,st){const ot=at[0],ut=Br.definitions[ot];if(!ut)return st.error(`Unknown expression "${ot}". If you wanted a literal array, use ["literal", [...]].`,0);const Hl=Array.isArray(ut)?ut[0]:ut.type,rc=Array.isArray(ut)?[[ut[1],ut[2]]]:ut.overloads,sc=rc.filter((st=>{let[ot]=st;return!Array.isArray(ot)||ot.length===at.length-1}));let oc=null;for(const[_c,wc]of sc){oc=new Kt(st.registry,Lr,st.path,null,st.scope);const ut=[];let rc=!1;for(let st=1;st<at.length;st++){const ot=at[st],Hl=Array.isArray(_c)?_c[st-1]:_c.type,sc=oc.parse(ot,1+ut.length,Hl);if(!sc){rc=!0;break}ut.push(sc)}if(!rc)if(Array.isArray(_c)&&_c.length!==ut.length)oc.error(`Expected ${_c.length} arguments, but found ${ut.length} instead.`);else{for(let at=0;at<ut.length;at++){const st=Array.isArray(_c)?_c[at]:_c.type,ot=ut[at];oc.concat(at+1).checkSubtype(st,ot.type)}if(0===oc.errors.length)return new Br(ot,Hl,wc,ut)}}if(1===sc.length)st.errors.push(...oc.errors);else{const ot=(sc.length?sc:rc).map((at=>{let[st]=at;return ot=st,Array.isArray(ot)?`(${ot.map(K).join(", ")})`:`(${K(ot.type)}...)`;var ot})).join(" | "),ut=[];for(let Hl=1;Hl<at.length;Hl++){const ot=st.parse(at[Hl],1+ut.length);if(!ot)return null;ut.push(K(ot.type))}st.error(`Expected arguments of type ${ot}, but found (${ut.join(", ")}) instead.`)}return null}static register(at,st){Br.definitions=st;for(const ot in st)at[ot]=Br}}function Er(at,st){let[ot,ut,Hl,rc]=st;ot=ot.evaluate(at),ut=ut.evaluate(at),Hl=Hl.evaluate(at);const sc=rc?rc.evaluate(at):1,oc=Nt(ot,ut,Hl,sc);if(oc)throw new Dt(oc);return new zt(ot/255,ut/255,Hl/255,sc,!1)}function Vr(at,st){return at in st}function Fr(at,st){const ot=st[at];return void 0===ot?null:ot}function Dr(at){return{type:at}}function Lr(at){if(at instanceof te)return Lr(at.boundExpression);if(at instanceof Br&&"error"===at.name)return!1;if(at instanceof Me)return!1;if(at instanceof Je)return!1;if(at instanceof Pr)return!1;if(at instanceof Tr)return!1;const st=at instanceof Ht||at instanceof Zt;let ot=!0;return at.eachChild((at=>{ot=st?ot&&Lr(at):ot&&at instanceof Gt})),!!ot&&$r(at)&&Rr(at,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function $r(at){if(at instanceof Br){if("get"===at.name&&1===at.args.length)return!1;if("feature-state"===at.name)return!1;if("has"===at.name&&1===at.args.length)return!1;if("properties"===at.name||"geometry-type"===at.name||"id"===at.name)return!1;if(/^filter-/.test(at.name))return!1}if(at instanceof Je)return!1;if(at instanceof Pr)return!1;let st=!0;return at.eachChild((at=>{st&&!$r(at)&&(st=!1)})),st}function Or(at){if(at instanceof Br&&"feature-state"===at.name)return!1;let st=!0;return at.eachChild((at=>{st&&!Or(at)&&(st=!1)})),st}function Rr(at,st){if(at instanceof Br&&st.indexOf(at.name)>=0)return!1;let ot=!0;return at.eachChild((at=>{ot&&!Rr(at,st)&&(ot=!1)})),ot}function Nr(at){return{result:"success",value:at}}function jr(at){return{result:"error",value:at}}function Ur(at){return"data-driven"===at["property-type"]||"cross-faded-data-driven"===at["property-type"]}function qr(at){return!!at.expression&&at.expression.parameters.indexOf("zoom")>-1}function Gr(at){return!!at.expression&&at.expression.interpolated}function Xr(at){return at instanceof Number?"number":at instanceof String?"string":at instanceof Boolean?"boolean":Array.isArray(at)?"array":null===at?"null":typeof at}function Zr(at){return"object"==typeof at&&null!==at&&!Array.isArray(at)&&Ut(at)===Su}function Yr(at){return at}function Hr(at,st){const ot=at.stops&&"object"==typeof at.stops[0][0],ut=ot||!(ot||void 0!==at.property),Hl=at.type||(Gr(st)?"exponential":"interval"),rc=function(at){switch(at.type){case"color":return zt.parse;case"padding":return Et.parse;case"numberArray":return Vt.parse;case"colorArray":return Ft.parse;default:return null}}(st);if(rc&&((at=E({},at)).stops&&(at.stops=at.stops.map((at=>[at[0],rc(at[1])]))),at.default=rc(at.default?at.default:st.default)),at.colorSpace&&"rgb"!==(sc=at.colorSpace)&&"hcl"!==sc&&"lab"!==sc)throw new Error(`Unknown color space: "${at.colorSpace}"`);var sc;const oc=function(at){switch(at){case"exponential":return Qr;case"interval":return Kr;case"categorical":return Wr;case"identity":return tn;default:throw new Error(`Unknown function type "${at}"`)}}(Hl);let _c,wc;if("categorical"===Hl){_c=Object.create(null);for(const st of at.stops)_c[st[0]]=st[1];wc=typeof at.stops[0][0]}if(ot){const ot={},ut=[];for(let st=0;st<at.stops.length;st++){const Hl=at.stops[st],rc=Hl[0].zoom;void 0===ot[rc]&&(ot[rc]={zoom:rc,type:at.type,property:at.property,default:at.default,stops:[]},ut.push(rc)),ot[rc].stops.push([Hl[0].value,Hl[1]])}const Hl=[];for(const at of ut)Hl.push([ot[at].zoom,Hr(ot[at],st)]);const rc={name:"linear"};return{kind:"composite",interpolationType:rc,interpolationFactor:de.interpolationFactor.bind(void 0,rc),zoomStops:Hl.map((at=>at[0])),evaluate:(ot,ut)=>{let{zoom:rc}=ot;return Qr({stops:Hl,base:at.base},st,rc).evaluate(rc,ut)}}}if(ut){const ot="exponential"===Hl?{name:"exponential",base:void 0!==at.base?at.base:1}:null;return{kind:"camera",interpolationType:ot,interpolationFactor:de.interpolationFactor.bind(void 0,ot),zoomStops:at.stops.map((at=>at[0])),evaluate:ot=>{let{zoom:ut}=ot;return oc(at,st,ut,_c,wc)}}}return{kind:"source",evaluate(ot,ut){const Hl=ut&&ut.properties?ut.properties[at.property]:void 0;return void 0===Hl?Jr(at.default,st.default):oc(at,st,Hl,_c,wc)}}}function Jr(at,st,ot){return void 0!==at?at:void 0!==st?st:void 0!==ot?ot:void 0}function Wr(at,st,ot,ut,Hl){return Jr(typeof ot===Hl?ut[ot]:void 0,at.default,st.default)}function Kr(at,st,ot){if("number"!==Xr(ot))return Jr(at.default,st.default);const ut=at.stops.length;if(1===ut)return at.stops[0][1];if(ot<=at.stops[0][0])return at.stops[0][1];if(ot>=at.stops[ut-1][0])return at.stops[ut-1][1];const Hl=ae(at.stops.map((at=>at[0])),ot);return at.stops[Hl][1]}function Qr(at,st,ot){const ut=void 0!==at.base?at.base:1;if("number"!==Xr(ot))return Jr(at.default,st.default);const Hl=at.stops.length;if(1===Hl)return at.stops[0][1];if(ot<=at.stops[0][0])return at.stops[0][1];if(ot>=at.stops[Hl-1][0])return at.stops[Hl-1][1];const rc=ae(at.stops.map((at=>at[0])),ot),sc=function(at,st,ot,ut){const Hl=ut-ot,rc=at-ot;return 0===Hl?0:1===st?rc/Hl:(Math.pow(st,rc)-1)/(Math.pow(st,Hl)-1)}(ot,ut,at.stops[rc][0],at.stops[rc+1][0]),oc=at.stops[rc][1],_c=at.stops[rc+1][1],wc=Ed[st.type]||Yr;return"function"==typeof oc.evaluate?{evaluate(){for(var st=arguments.length,ot=new Array(st),ut=0;ut<st;ut++)ot[ut]=arguments[ut];const Hl=oc.evaluate.apply(void 0,ot),rc=_c.evaluate.apply(void 0,ot);if(void 0!==Hl&&void 0!==rc)return wc(Hl,rc,sc,at.colorSpace)}}:wc(oc,_c,sc,at.colorSpace)}function tn(at,st,ot){switch(st.type){case"color":ot=zt.parse(ot);break;case"formatted":ot=Bt.fromString(ot.toString());break;case"resolvedImage":ot=Ot.fromString(ot.toString());break;case"padding":ot=Et.parse(ot);break;case"colorArray":ot=Ft.parse(ot);break;case"numberArray":ot=Vt.parse(ot);break;default:Xr(ot)===st.type||"enum"===st.type&&st.values[ot]||(ot=void 0)}return Jr(ot,at.default,st.default)}Br.register(Rd,{error:[{kind:"error"},[Au],(at,st)=>{let[ot]=st;throw new Dt(ot.evaluate(at))}],typeof:[Au,[Du],(at,st)=>{let[ot]=st;return K(Ut(ot.evaluate(at)))}],"to-rgba":[W(gu,4),[_u],(at,st)=>{let[ot]=st;const[ut,Hl,rc,sc]=ot.evaluate(at).rgb;return[255*ut,255*Hl,255*rc,sc]}],rgb:[_u,[gu,gu,gu],Er],rgba:[_u,[gu,gu,gu,gu],Er],has:{type:yu,overloads:[[[Au],(at,st)=>{let[ot]=st;return Vr(ot.evaluate(at),at.properties())}],[[Au,Su],(at,st)=>{let[ot,ut]=st;return Vr(ot.evaluate(at),ut.evaluate(at))}]]},get:{type:Du,overloads:[[[Au],(at,st)=>{let[ot]=st;return Fr(ot.evaluate(at),at.properties())}],[[Au,Su],(at,st)=>{let[ot,ut]=st;return Fr(ot.evaluate(at),ut.evaluate(at))}]]},"feature-state":[Du,[Au],(at,st)=>{let[ot]=st;return Fr(ot.evaluate(at),at.featureState||{})}],properties:[Su,[],at=>at.properties()],"geometry-type":[Au,[],at=>at.geometryType()],id:[Du,[],at=>at.id()],zoom:[gu,[],at=>at.globals.zoom],"heatmap-density":[gu,[],at=>at.globals.heatmapDensity||0],elevation:[gu,[],at=>at.globals.elevation||0],"line-progress":[gu,[],at=>at.globals.lineProgress||0],accumulated:[Du,[],at=>void 0===at.globals.accumulated?null:at.globals.accumulated],"+":[gu,Dr(gu),(at,st)=>{let ot=0;for(const ut of st)ot+=ut.evaluate(at);return ot}],"*":[gu,Dr(gu),(at,st)=>{let ot=1;for(const ut of st)ot*=ut.evaluate(at);return ot}],"-":{type:gu,overloads:[[[gu,gu],(at,st)=>{let[ot,ut]=st;return ot.evaluate(at)-ut.evaluate(at)}],[[gu],(at,st)=>{let[ot]=st;return-ot.evaluate(at)}]]},"/":[gu,[gu,gu],(at,st)=>{let[ot,ut]=st;return ot.evaluate(at)/ut.evaluate(at)}],"%":[gu,[gu,gu],(at,st)=>{let[ot,ut]=st;return ot.evaluate(at)%ut.evaluate(at)}],ln2:[gu,[],()=>Math.LN2],pi:[gu,[],()=>Math.PI],e:[gu,[],()=>Math.E],"^":[gu,[gu,gu],(at,st)=>{let[ot,ut]=st;return Math.pow(ot.evaluate(at),ut.evaluate(at))}],sqrt:[gu,[gu],(at,st)=>{let[ot]=st;return Math.sqrt(ot.evaluate(at))}],log10:[gu,[gu],(at,st)=>{let[ot]=st;return Math.log(ot.evaluate(at))/Math.LN10}],ln:[gu,[gu],(at,st)=>{let[ot]=st;return Math.log(ot.evaluate(at))}],log2:[gu,[gu],(at,st)=>{let[ot]=st;return Math.log(ot.evaluate(at))/Math.LN2}],sin:[gu,[gu],(at,st)=>{let[ot]=st;return Math.sin(ot.evaluate(at))}],cos:[gu,[gu],(at,st)=>{let[ot]=st;return Math.cos(ot.evaluate(at))}],tan:[gu,[gu],(at,st)=>{let[ot]=st;return Math.tan(ot.evaluate(at))}],asin:[gu,[gu],(at,st)=>{let[ot]=st;return Math.asin(ot.evaluate(at))}],acos:[gu,[gu],(at,st)=>{let[ot]=st;return Math.acos(ot.evaluate(at))}],atan:[gu,[gu],(at,st)=>{let[ot]=st;return Math.atan(ot.evaluate(at))}],min:[gu,Dr(gu),(at,st)=>Math.min(...st.map((st=>st.evaluate(at))))],max:[gu,Dr(gu),(at,st)=>Math.max(...st.map((st=>st.evaluate(at))))],abs:[gu,[gu],(at,st)=>{let[ot]=st;return Math.abs(ot.evaluate(at))}],round:[gu,[gu],(at,st)=>{let[ot]=st;const ut=ot.evaluate(at);return ut<0?-Math.round(-ut):Math.round(ut)}],floor:[gu,[gu],(at,st)=>{let[ot]=st;return Math.floor(ot.evaluate(at))}],ceil:[gu,[gu],(at,st)=>{let[ot]=st;return Math.ceil(ot.evaluate(at))}],"filter-==":[yu,[Au,Du],(at,st)=>{let[ot,ut]=st;return at.properties()[ot.value]===ut.value}],"filter-id-==":[yu,[Du],(at,st)=>{let[ot]=st;return at.id()===ot.value}],"filter-type-==":[yu,[Au],(at,st)=>{let[ot]=st;return at.geometryType()===ot.value}],"filter-<":[yu,[Au,Du],(at,st)=>{let[ot,ut]=st;const Hl=at.properties()[ot.value],rc=ut.value;return typeof Hl==typeof rc&&Hl<rc}],"filter-id-<":[yu,[Du],(at,st)=>{let[ot]=st;const ut=at.id(),Hl=ot.value;return typeof ut==typeof Hl&&ut<Hl}],"filter->":[yu,[Au,Du],(at,st)=>{let[ot,ut]=st;const Hl=at.properties()[ot.value],rc=ut.value;return typeof Hl==typeof rc&&Hl>rc}],"filter-id->":[yu,[Du],(at,st)=>{let[ot]=st;const ut=at.id(),Hl=ot.value;return typeof ut==typeof Hl&&ut>Hl}],"filter-<=":[yu,[Au,Du],(at,st)=>{let[ot,ut]=st;const Hl=at.properties()[ot.value],rc=ut.value;return typeof Hl==typeof rc&&Hl<=rc}],"filter-id-<=":[yu,[Du],(at,st)=>{let[ot]=st;const ut=at.id(),Hl=ot.value;return typeof ut==typeof Hl&&ut<=Hl}],"filter->=":[yu,[Au,Du],(at,st)=>{let[ot,ut]=st;const Hl=at.properties()[ot.value],rc=ut.value;return typeof Hl==typeof rc&&Hl>=rc}],"filter-id->=":[yu,[Du],(at,st)=>{let[ot]=st;const ut=at.id(),Hl=ot.value;return typeof ut==typeof Hl&&ut>=Hl}],"filter-has":[yu,[Du],(at,st)=>{let[ot]=st;return ot.value in at.properties()}],"filter-has-id":[yu,[],at=>null!==at.id()&&void 0!==at.id()],"filter-type-in":[yu,[W(Au)],(at,st)=>{let[ot]=st;return ot.value.indexOf(at.geometryType())>=0}],"filter-id-in":[yu,[W(Du)],(at,st)=>{let[ot]=st;return ot.value.indexOf(at.id())>=0}],"filter-in-small":[yu,[Au,W(Du)],(at,st)=>{let[ot,ut]=st;return ut.value.indexOf(at.properties()[ot.value])>=0}],"filter-in-large":[yu,[Au,W(Du)],(at,st)=>{let[ot,ut]=st;return function(at,st,ot,ut){for(;ot<=ut;){const Hl=ot+ut>>1;if(st[Hl]===at)return!0;st[Hl]>at?ut=Hl-1:ot=Hl+1}return!1}(at.properties()[ot.value],ut.value,0,ut.value.length-1)}],all:{type:yu,overloads:[[[yu,yu],(at,st)=>{let[ot,ut]=st;return ot.evaluate(at)&&ut.evaluate(at)}],[Dr(yu),(at,st)=>{for(const ot of st)if(!ot.evaluate(at))return!1;return!0}]]},any:{type:yu,overloads:[[[yu,yu],(at,st)=>{let[ot,ut]=st;return ot.evaluate(at)||ut.evaluate(at)}],[Dr(yu),(at,st)=>{for(const ot of st)if(ot.evaluate(at))return!0;return!1}]]},"!":[yu,[yu],(at,st)=>{let[ot]=st;return!ot.evaluate(at)}],"is-supported-script":[yu,[Au],(at,st)=>{let[ot]=st;const ut=at.globals&&at.globals.isSupportedScript;return!ut||ut(ot.evaluate(at))}],upcase:[Au,[Au],(at,st)=>{let[ot]=st;return ot.evaluate(at).toUpperCase()}],downcase:[Au,[Au],(at,st)=>{let[ot]=st;return ot.evaluate(at).toLowerCase()}],concat:[Au,Dr(Du),(at,st)=>st.map((st=>qt(st.evaluate(at)))).join("")],"resolved-locale":[Au,[Lu],(at,st)=>{let[ot]=st;return ot.evaluate(at).resolvedLocale()}]});class en{constructor(at,st){this.expression=at,this._warningHistory={},this._evaluator=new Wt,this._defaultValue=st?function(at){if("color"===at.type&&Zr(at.default))return new zt(0,0,0,0);switch(at.type){case"color":return zt.parse(at.default)||null;case"padding":return Et.parse(at.default)||null;case"numberArray":return Vt.parse(at.default)||null;case"colorArray":return Ft.parse(at.default)||null;case"variableAnchorOffsetCollection":return $t.parse(at.default)||null;case"projectionDefinition":return Rt.parse(at.default)||null;default:return void 0===at.default?null:at.default}}(st):null,this._enumValues=st&&"enum"===st.type?st.values:null}evaluateWithoutErrorHandling(at,st,ot,ut,Hl,rc){return this._evaluator.globals=at,this._evaluator.feature=st,this._evaluator.featureState=ot,this._evaluator.canonical=ut,this._evaluator.availableImages=Hl||null,this._evaluator.formattedSection=rc,this.expression.evaluate(this._evaluator)}evaluate(at,st,ot,ut,Hl,rc){this._evaluator.globals=at,this._evaluator.feature=st||null,this._evaluator.featureState=ot||null,this._evaluator.canonical=ut,this._evaluator.availableImages=Hl||null,this._evaluator.formattedSection=rc||null;try{const at=this.expression.evaluate(this._evaluator);if(null==at||"number"==typeof at&&at!=at)return this._defaultValue;if(this._enumValues&&!(at in this._enumValues))throw new Dt(`Expected value to be one of ${Object.keys(this._enumValues).map((at=>JSON.stringify(at))).join(", ")}, but found ${JSON.stringify(at)} instead.`);return at}catch(at){return this._warningHistory[at.message]||(this._warningHistory[at.message]=!0,"undefined"!=typeof console&&console.warn(at.message)),this._defaultValue}}}function rn(at){return Array.isArray(at)&&at.length>0&&"string"==typeof at[0]&&at[0]in Rd}function nn(at,st){const ot=new Kt(Rd,Lr,[],st?function(at){const st={color:_u,string:Au,number:gu,enum:Au,boolean:yu,formatted:$u,padding:hh,numberArray:td,colorArray:ed,projectionDefinition:xu,resolvedImage:id,variableAnchorOffsetCollection:nd};return"array"===at.type?W(st[at.value]||Du,at.length):st[at.type]}(st):void 0),ut=ot.parse(at,void 0,void 0,void 0,st&&"string"===st.type?{typeAnnotation:"coerce"}:void 0);return ut?Nr(new en(ut,st)):jr(ot.errors)}class sn{constructor(at,st){this.kind=at,this._styleExpression=st,this.isStateDependent="constant"!==at&&!Or(st.expression),this.globalStateRefs=cn(st.expression)}evaluateWithoutErrorHandling(at,st,ot,ut,Hl,rc){return this._styleExpression.evaluateWithoutErrorHandling(at,st,ot,ut,Hl,rc)}evaluate(at,st,ot,ut,Hl,rc){return this._styleExpression.evaluate(at,st,ot,ut,Hl,rc)}}class on{constructor(at,st,ot,ut){this.kind=at,this.zoomStops=ot,this._styleExpression=st,this.isStateDependent="camera"!==at&&!Or(st.expression),this.globalStateRefs=cn(st.expression),this.interpolationType=ut}evaluateWithoutErrorHandling(at,st,ot,ut,Hl,rc){return this._styleExpression.evaluateWithoutErrorHandling(at,st,ot,ut,Hl,rc)}evaluate(at,st,ot,ut,Hl,rc){return this._styleExpression.evaluate(at,st,ot,ut,Hl,rc)}interpolationFactor(at,st,ot){return this.interpolationType?de.interpolationFactor(this.interpolationType,at,st,ot):0}}function an(at,st){const ot=nn(at,st);if("error"===ot.result)return ot;const ut=ot.value.expression,Hl=$r(ut);if(!Hl&&!Ur(st))return jr([new V("","data expressions not supported")]);const rc=Rr(ut,["zoom"]);if(!rc&&!qr(st))return jr([new V("","zoom expressions not supported")]);const sc=un(ut);return sc||rc?sc instanceof V?jr([sc]):sc instanceof de&&!Gr(st)?jr([new V("",'"interpolate" expressions cannot be used with this property')]):Nr(sc?new on(Hl?"camera":"composite",ot.value,sc.labels,sc instanceof de?sc.interpolation:void 0):new sn(Hl?"constant":"source",ot.value)):jr([new V("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ln{constructor(at,st){this._parameters=at,this._specification=st,E(this,Hr(this._parameters,this._specification))}static deserialize(at){return new ln(at._parameters,at._specification)}static serialize(at){return{_parameters:at._parameters,_specification:at._specification}}}function un(at){let st=null;if(at instanceof Qt)st=un(at.result);else if(at instanceof ge){for(const ot of at.args)if(st=un(ot),st)break}else(at instanceof le||at instanceof de)&&at.input instanceof Br&&"zoom"===at.input.name&&(st=at);return st instanceof V||at.eachChild((at=>{const ot=un(at);ot instanceof V?st=ot:!st&&ot?st=new V("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):st&&ot&&st!==ot&&(st=new V("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),st}function cn(at,st){return void 0===st&&(st=new Set),at instanceof Tr&&st.add(at.key),at.eachChild((at=>{cn(at,st)})),st}function hn(at){if(!0===at||!1===at)return!0;if(!Array.isArray(at)||0===at.length)return!1;switch(at[0]){case"has":return at.length>=2&&"$id"!==at[1]&&"$type"!==at[1];case"in":return at.length>=3&&("string"!=typeof at[1]||Array.isArray(at[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==at.length||Array.isArray(at[1])||Array.isArray(at[2]);case"any":case"all":for(const st of at.slice(1))if(!hn(st)&&"boolean"!=typeof st)return!1;return!0;default:return!0}}const Od={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function fn(at){if(null==at)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};hn(at)||(at=mn(at));const st=nn(at,Od);if("error"===st.result)throw new Error(st.value.map((at=>`${at.key}: ${at.message}`)).join(", "));return{filter:(at,ot,ut)=>st.value.evaluate(at,ot,{},ut),needGeometry:yn(at),getGlobalStateRefs:()=>cn(st.value.expression)}}function dn(at,st){return at<st?-1:at>st?1:0}function yn(at){if(!Array.isArray(at))return!1;if("within"===at[0]||"distance"===at[0])return!0;for(let st=1;st<at.length;st++)if(yn(at[st]))return!0;return!1}function mn(at){if(!at)return!0;const st=at[0];return at.length<=1?"any"!==st:"=="===st?gn(at[1],at[2],"=="):"!="===st?bn(gn(at[1],at[2],"==")):"<"===st||">"===st||"<="===st||">="===st?gn(at[1],at[2],st):"any"===st?(ot=at.slice(1),["any"].concat(ot.map(mn))):"all"===st?["all"].concat(at.slice(1).map(mn)):"none"===st?["all"].concat(at.slice(1).map(mn).map(bn)):"in"===st?xn(at[1],at.slice(2)):"!in"===st?bn(xn(at[1],at.slice(2))):"has"===st?vn(at[1]):"!has"!==st||bn(vn(at[1]));var ot}function gn(at,st,ot){switch(at){case"$type":return[`filter-type-${ot}`,st];case"$id":return[`filter-id-${ot}`,st];default:return[`filter-${ot}`,at,st]}}function xn(at,st){if(0===st.length)return!1;switch(at){case"$type":return["filter-type-in",["literal",st]];case"$id":return["filter-id-in",["literal",st]];default:return st.length>200&&!st.some((at=>typeof at!=typeof st[0]))?["filter-in-large",at,["literal",st.sort(dn)]]:["filter-in-small",at,["literal",st]]}}function vn(at){switch(at){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",at]}}function bn(at){return["!",at]}function wn(at){const st=typeof at;if("number"===st||"boolean"===st||"string"===st||null==at)return JSON.stringify(at);if(Array.isArray(at)){let st="[";for(const ot of at)st+=`${wn(ot)},`;return`${st}]`}const ot=Object.keys(at).sort();let ut="{";for(let Hl=0;Hl<ot.length;Hl++)ut+=`${JSON.stringify(ot[Hl])}:${wn(at[ot[Hl]])},`;return`${ut}}`}function _n(at){let st="";for(const ot of pu)st+=`/${wn(at[ot])}`;return st}function Sn(at){const st=at.value;return st?[new B(at.key,st,"constants have been deprecated as of v8")]:[]}function kn(at){return at instanceof Number||at instanceof String||at instanceof Boolean?at.valueOf():at}function An(at){if(Array.isArray(at))return at.map(An);if(at instanceof Object&&!(at instanceof Number||at instanceof String||at instanceof Boolean)){const st={};for(const ot in at)st[ot]=An(at[ot]);return st}return kn(at)}function In(at){const st=at.key,ot=at.value,ut=at.valueSpec||{},Hl=at.objectElementValidators||{},rc=at.style,sc=at.styleSpec,oc=at.validateSpec;let _c=[];const wc=Xr(ot);if("object"!==wc)return[new B(st,ot,`object expected, ${wc} found`)];for(const Sc in ot){const at=Sc.split(".")[0],wc=bt(ut,at)||ut["*"];let iu;if(bt(Hl,at))iu=Hl[at];else if(bt(ut,at))iu=oc;else if(Hl["*"])iu=Hl["*"];else{if(!ut["*"]){_c.push(new B(st,ot[Sc],`unknown property "${Sc}"`));continue}iu=oc}_c=_c.concat(iu({key:(st?`${st}.`:st)+Sc,value:ot[Sc],valueSpec:wc,style:rc,styleSpec:sc,object:ot,objectKey:Sc,validateSpec:oc},ot))}for(const Sc in ut)Hl[Sc]||ut[Sc].required&&void 0===ut[Sc].default&&void 0===ot[Sc]&&_c.push(new B(st,ot,`missing required property "${Sc}"`));return _c}function Mn(at){const st=at.value,ot=at.valueSpec,ut=at.style,Hl=at.styleSpec,rc=at.key,sc=at.arrayElementValidator||at.validateSpec;if("array"!==Xr(st))return[new B(rc,st,`array expected, ${Xr(st)} found`)];if(ot.length&&st.length!==ot.length)return[new B(rc,st,`array length ${ot.length} expected, length ${st.length} found`)];if(ot["min-length"]&&st.length<ot["min-length"])return[new B(rc,st,`array length at least ${ot["min-length"]} expected, length ${st.length} found`)];let oc={type:ot.value,values:ot.values};Hl.$version<7&&(oc.function=ot.function),"object"===Xr(ot.value)&&(oc=ot.value);let _c=[];for(let wc=0;wc<st.length;wc++)_c=_c.concat(sc({array:st,arrayIndex:wc,value:st[wc],valueSpec:oc,validateSpec:at.validateSpec,style:ut,styleSpec:Hl,key:`${rc}[${wc}]`}));return _c}function zn(at){const st=at.key,ot=at.value,ut=at.valueSpec;let Hl=Xr(ot);return"number"===Hl&&ot!=ot&&(Hl="NaN"),"number"!==Hl?[new B(st,ot,`number expected, ${Hl} found`)]:"minimum"in ut&&ot<ut.minimum?[new B(st,ot,`${ot} is less than the minimum value ${ut.minimum}`)]:"maximum"in ut&&ot>ut.maximum?[new B(st,ot,`${ot} is greater than the maximum value ${ut.maximum}`)]:[]}function Pn(at){const st=at.valueSpec,ot=kn(at.value.type);let ut,Hl,rc,sc={};const oc="categorical"!==ot&&void 0===at.value.property,_c=!oc,wc="array"===Xr(at.value.stops)&&"array"===Xr(at.value.stops[0])&&"object"===Xr(at.value.stops[0][0]),Sc=In({key:at.key,value:at.value,valueSpec:at.styleSpec.function,validateSpec:at.validateSpec,style:at.style,styleSpec:at.styleSpec,objectElementValidators:{stops:function(at){if("identity"===ot)return[new B(at.key,at.value,'identity function may not have a "stops" property')];let st=[];const ut=at.value;return st=st.concat(Mn({key:at.key,value:ut,valueSpec:at.valueSpec,validateSpec:at.validateSpec,style:at.style,styleSpec:at.styleSpec,arrayElementValidator:h})),"array"===Xr(ut)&&0===ut.length&&st.push(new B(at.key,ut,"array must have at least one stop")),st},default:function(at){return at.validateSpec({key:at.key,value:at.value,valueSpec:st,validateSpec:at.validateSpec,style:at.style,styleSpec:at.styleSpec})}}});return"identity"===ot&&oc&&Sc.push(new B(at.key,at.value,'missing required property "property"')),"identity"===ot||at.value.stops||Sc.push(new B(at.key,at.value,'missing required property "stops"')),"exponential"===ot&&at.valueSpec.expression&&!Gr(at.valueSpec)&&Sc.push(new B(at.key,at.value,"exponential functions not supported")),at.styleSpec.$version>=8&&(_c&&!Ur(at.valueSpec)?Sc.push(new B(at.key,at.value,"property functions not supported")):oc&&!qr(at.valueSpec)&&Sc.push(new B(at.key,at.value,"zoom functions not supported"))),"categorical"!==ot&&!wc||void 0!==at.value.property||Sc.push(new B(at.key,at.value,'"property" property is required')),Sc;function h(at){let ot=[];const ut=at.value,oc=at.key;if("array"!==Xr(ut))return[new B(oc,ut,`array expected, ${Xr(ut)} found`)];if(2!==ut.length)return[new B(oc,ut,`array length 2 expected, length ${ut.length} found`)];if(wc){if("object"!==Xr(ut[0]))return[new B(oc,ut,`object expected, ${Xr(ut[0])} found`)];if(void 0===ut[0].zoom)return[new B(oc,ut,"object stop key must have zoom")];if(void 0===ut[0].value)return[new B(oc,ut,"object stop key must have value")];if(rc&&rc>kn(ut[0].zoom))return[new B(oc,ut[0].zoom,"stop zoom values must appear in ascending order")];kn(ut[0].zoom)!==rc&&(rc=kn(ut[0].zoom),Hl=void 0,sc={}),ot=ot.concat(In({key:`${oc}[0]`,value:ut[0],valueSpec:{zoom:{}},validateSpec:at.validateSpec,style:at.style,styleSpec:at.styleSpec,objectElementValidators:{zoom:zn,value:p}}))}else ot=ot.concat(p({key:`${oc}[0]`,value:ut[0],validateSpec:at.validateSpec,style:at.style,styleSpec:at.styleSpec},ut));return rn(An(ut[1]))?ot.concat([new B(`${oc}[1]`,ut[1],"expressions are not allowed in function stops.")]):ot.concat(at.validateSpec({key:`${oc}[1]`,value:ut[1],valueSpec:st,validateSpec:at.validateSpec,style:at.style,styleSpec:at.styleSpec}))}function p(at,rc){const oc=Xr(at.value),_c=kn(at.value),wc=null!==at.value?at.value:rc;if(ut){if(oc!==ut)return[new B(at.key,wc,`${oc} stop domain type must match previous stop domain type ${ut}`)]}else ut=oc;if("number"!==oc&&"string"!==oc&&"boolean"!==oc)return[new B(at.key,wc,"stop domain value must be a number, string, or boolean")];if("number"!==oc&&"categorical"!==ot){let ut=`number expected, ${oc} found`;return Ur(st)&&void 0===ot&&(ut+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new B(at.key,wc,ut)]}return"categorical"!==ot||"number"!==oc||isFinite(_c)&&Math.floor(_c)===_c?"categorical"!==ot&&"number"===oc&&void 0!==Hl&&_c<Hl?[new B(at.key,wc,"stop domain values must appear in ascending order")]:(Hl=_c,"categorical"===ot&&_c in sc?[new B(at.key,wc,"stop domain values must be unique")]:(sc[_c]=!0,[])):[new B(at.key,wc,`integer expected, found ${_c}`)]}}function Tn(at){const st=("property"===at.expressionContext?an:nn)(An(at.value),at.valueSpec);if("error"===st.result)return st.value.map((st=>new B(`${at.key}${st.key}`,at.value,st.message)));const ot=st.value.expression||st.value._styleExpression.expression;if("property"===at.expressionContext&&"text-font"===at.propertyKey&&!ot.outputDefined())return[new B(at.key,at.value,`Invalid data expression for "${at.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===at.expressionContext&&"layout"===at.propertyType&&!Or(ot))return[new B(at.key,at.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===at.expressionContext&&!Or(ot))return[new B(at.key,at.value,'"feature-state" data expressions are not supported with filters.')];if(at.expressionContext&&0===at.expressionContext.indexOf("cluster")){if(!Rr(ot,["zoom","feature-state"]))return[new B(at.key,at.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===at.expressionContext&&!$r(ot))return[new B(at.key,at.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Cn(at){const st=at.key,ot=at.value,ut=Xr(ot);return"string"!==ut?[new B(st,ot,`color expected, ${ut} found`)]:zt.parse(String(ot))?[]:[new B(st,ot,`color expected, "${ot}" found`)]}function Bn(at){const st=at.key,ot=at.value,ut=at.valueSpec,Hl=[];return Array.isArray(ut.values)?-1===ut.values.indexOf(kn(ot))&&Hl.push(new B(st,ot,`expected one of [${ut.values.join(", ")}], ${JSON.stringify(ot)} found`)):-1===Object.keys(ut.values).indexOf(kn(ot))&&Hl.push(new B(st,ot,`expected one of [${Object.keys(ut.values).join(", ")}], ${JSON.stringify(ot)} found`)),Hl}function En(at){return hn(An(at.value))?Tn(E({},at,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Vn(at)}function Vn(at){const st=at.value,ot=at.key;if("array"!==Xr(st))return[new B(ot,st,`array expected, ${Xr(st)} found`)];const ut=at.styleSpec;let Hl,rc=[];if(st.length<1)return[new B(ot,st,"filter array must have at least 1 element")];switch(rc=rc.concat(Bn({key:`${ot}[0]`,value:st[0],valueSpec:ut.filter_operator,style:at.style,styleSpec:at.styleSpec})),kn(st[0])){case"<":case"<=":case">":case">=":st.length>=2&&"$type"===kn(st[1])&&rc.push(new B(ot,st,`"$type" cannot be use with operator "${st[0]}"`));case"==":case"!=":3!==st.length&&rc.push(new B(ot,st,`filter array for operator "${st[0]}" must have 3 elements`));case"in":case"!in":st.length>=2&&(Hl=Xr(st[1]),"string"!==Hl&&rc.push(new B(`${ot}[1]`,st[1],`string expected, ${Hl} found`)));for(let sc=2;sc<st.length;sc++)Hl=Xr(st[sc]),"$type"===kn(st[1])?rc=rc.concat(Bn({key:`${ot}[${sc}]`,value:st[sc],valueSpec:ut.geometry_type,style:at.style,styleSpec:at.styleSpec})):"string"!==Hl&&"number"!==Hl&&"boolean"!==Hl&&rc.push(new B(`${ot}[${sc}]`,st[sc],`string, number, or boolean expected, ${Hl} found`));break;case"any":case"all":case"none":for(let ut=1;ut<st.length;ut++)rc=rc.concat(Vn({key:`${ot}[${ut}]`,value:st[ut],style:at.style,styleSpec:at.styleSpec}));break;case"has":case"!has":Hl=Xr(st[1]),2!==st.length?rc.push(new B(ot,st,`filter array for "${st[0]}" operator must have 2 elements`)):"string"!==Hl&&rc.push(new B(`${ot}[1]`,st[1],`string expected, ${Hl} found`))}return rc}function Fn(at,st){const ot=at.key,ut=at.validateSpec,Hl=at.style,rc=at.styleSpec,sc=at.value,oc=at.objectKey,_c=rc[`${st}_${at.layerType}`];if(!_c)return[];const wc=oc.match(/^(.*)-transition$/);if("paint"===st&&wc&&_c[wc[1]]&&_c[wc[1]].transition)return ut({key:ot,value:sc,valueSpec:rc.transition,style:Hl,styleSpec:rc});const Sc=at.valueSpec||_c[oc];if(!Sc)return[new B(ot,sc,`unknown property "${oc}"`)];let iu;if("string"===Xr(sc)&&Ur(Sc)&&!Sc.tokens&&(iu=/^{([^}]+)}$/.exec(sc)))return[new B(ot,sc,`"${oc}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(iu[1])} }\`.`)];const su=[];return"symbol"===at.layerType&&("text-field"===oc&&Hl&&!Hl.glyphs&&su.push(new B(ot,sc,'use of "text-field" requires a style "glyphs" property')),"text-font"===oc&&Zr(An(sc))&&"identity"===kn(sc.type)&&su.push(new B(ot,sc,'"text-font" does not support identity functions'))),su.concat(ut({key:at.key,value:sc,valueSpec:Sc,style:Hl,styleSpec:rc,expressionContext:"property",propertyType:st,propertyKey:oc}))}function Dn(at){return Fn(at,"paint")}function Ln(at){return Fn(at,"layout")}function $n(at){let st=[];const ot=at.value,ut=at.key,Hl=at.style,rc=at.styleSpec;if("object"!==Xr(ot))return[new B(ut,ot,`object expected, ${Xr(ot)} found`)];ot.type||ot.ref||st.push(new B(ut,ot,'either "type" or "ref" is required'));let sc=kn(ot.type);const oc=kn(ot.ref);if(ot.id){const rc=kn(ot.id);for(let sc=0;sc<at.arrayIndex;sc++){const at=Hl.layers[sc];kn(at.id)===rc&&st.push(new B(ut,ot.id,`duplicate layer id "${ot.id}", previously used at line ${at.id.__line__}`))}}if("ref"in ot){let at;["type","source","source-layer","filter","layout"].forEach((at=>{at in ot&&st.push(new B(ut,ot[at],`"${at}" is prohibited for ref layers`))})),Hl.layers.forEach((st=>{kn(st.id)===oc&&(at=st)})),at?at.ref?st.push(new B(ut,ot.ref,"ref cannot reference another ref layer")):sc=kn(at.type):st.push(new B(ut,ot.ref,`ref layer "${oc}" not found`))}else if("background"!==sc)if(ot.source){const at=Hl.sources&&Hl.sources[ot.source],rc=at&&kn(at.type);at?"vector"===rc&&"raster"===sc?st.push(new B(ut,ot.source,`layer "${ot.id}" requires a raster source`)):"raster-dem"!==rc&&"hillshade"===sc||"raster-dem"!==rc&&"color-relief"===sc?st.push(new B(ut,ot.source,`layer "${ot.id}" requires a raster-dem source`)):"raster"===rc&&"raster"!==sc?st.push(new B(ut,ot.source,`layer "${ot.id}" requires a vector source`)):"vector"!==rc||ot["source-layer"]?"raster-dem"===rc&&"hillshade"!==sc&&"color-relief"!==sc?st.push(new B(ut,ot.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):"line"!==sc||!ot.paint||!ot.paint["line-gradient"]||"geojson"===rc&&at.lineMetrics||st.push(new B(ut,ot,`layer "${ot.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):st.push(new B(ut,ot,`layer "${ot.id}" must specify a "source-layer"`)):st.push(new B(ut,ot.source,`source "${ot.source}" not found`))}else st.push(new B(ut,ot,'missing required property "source"'));return st=st.concat(In({key:ut,value:ot,valueSpec:rc.layer,style:at.style,styleSpec:at.styleSpec,validateSpec:at.validateSpec,objectElementValidators:{"*":()=>[],type:()=>at.validateSpec({key:`${ut}.type`,value:ot.type,valueSpec:rc.layer.type,style:at.style,styleSpec:at.styleSpec,validateSpec:at.validateSpec,object:ot,objectKey:"type"}),filter:En,layout:at=>In({layer:ot,key:at.key,value:at.value,style:at.style,styleSpec:at.styleSpec,validateSpec:at.validateSpec,objectElementValidators:{"*":at=>Ln(E({layerType:sc},at))}}),paint:at=>In({layer:ot,key:at.key,value:at.value,style:at.style,styleSpec:at.styleSpec,validateSpec:at.validateSpec,objectElementValidators:{"*":at=>Dn(E({layerType:sc},at))}})}})),st}function On(at){const st=at.value,ot=at.key,ut=Xr(st);return"string"!==ut?[new B(ot,st,`string expected, ${ut} found`)]:[]}const Bd={promoteId:function(at){let{key:st,value:ot}=at;if("string"===Xr(ot))return On({key:st,value:ot});{const at=[];for(const ut in ot)at.push(...On({key:`${st}.${ut}`,value:ot[ut]}));return at}}};function Nn(at){const st=at.value,ot=at.key,ut=at.styleSpec,Hl=at.style,rc=at.validateSpec;if(!st.type)return[new B(ot,st,'"type" is required')];const sc=kn(st.type);let oc;switch(sc){case"vector":case"raster":return oc=In({key:ot,value:st,valueSpec:ut[`source_${sc.replace("-","_")}`],style:at.style,styleSpec:ut,objectElementValidators:Bd,validateSpec:rc}),oc;case"raster-dem":return oc=function(at){var st;const ot=null!==(st=at.sourceName)&&void 0!==st?st:"",ut=at.value,Hl=at.styleSpec,rc=Hl.source_raster_dem,sc=at.style;let oc=[];const _c=Xr(ut);if(void 0===ut)return oc;if("object"!==_c)return oc.push(new B("source_raster_dem",ut,`object expected, ${_c} found`)),oc;const wc="custom"===kn(ut.encoding),Sc=["redFactor","greenFactor","blueFactor","baseShift"],iu=at.value.encoding?`"${at.value.encoding}"`:"Default";for(const su in ut)!wc&&Sc.includes(su)?oc.push(new B(su,ut[su],`In "${ot}": "${su}" is only valid when "encoding" is set to "custom". ${iu} encoding found`)):rc[su]?oc=oc.concat(at.validateSpec({key:su,value:ut[su],valueSpec:rc[su],validateSpec:at.validateSpec,style:sc,styleSpec:Hl})):oc.push(new B(su,ut[su],`unknown property "${su}"`));return oc}({sourceName:ot,value:st,style:at.style,styleSpec:ut,validateSpec:rc}),oc;case"geojson":if(oc=In({key:ot,value:st,valueSpec:ut.source_geojson,style:Hl,styleSpec:ut,validateSpec:rc,objectElementValidators:Bd}),st.cluster)for(const at in st.clusterProperties){const[ut,Hl]=st.clusterProperties[at],rc="string"==typeof ut?[ut,["accumulated"],["get",at]]:ut;oc.push(...Tn({key:`${ot}.${at}.map`,value:Hl,expressionContext:"cluster-map"})),oc.push(...Tn({key:`${ot}.${at}.reduce`,value:rc,expressionContext:"cluster-reduce"}))}return oc;case"video":return In({key:ot,value:st,valueSpec:ut.source_video,style:Hl,validateSpec:rc,styleSpec:ut});case"image":return In({key:ot,value:st,valueSpec:ut.source_image,style:Hl,validateSpec:rc,styleSpec:ut});case"canvas":return[new B(ot,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Bn({key:`${ot}.type`,value:st.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function jn(at){const st=at.value,ot=at.styleSpec,ut=ot.light,Hl=at.style;let rc=[];const sc=Xr(st);if(void 0===st)return rc;if("object"!==sc)return rc=rc.concat([new B("light",st,`object expected, ${sc} found`)]),rc;for(const oc in st){const sc=oc.match(/^(.*)-transition$/);rc=rc.concat(sc&&ut[sc[1]]&&ut[sc[1]].transition?at.validateSpec({key:oc,value:st[oc],valueSpec:ot.transition,validateSpec:at.validateSpec,style:Hl,styleSpec:ot}):ut[oc]?at.validateSpec({key:oc,value:st[oc],valueSpec:ut[oc],validateSpec:at.validateSpec,style:Hl,styleSpec:ot}):[new B(oc,st[oc],`unknown property "${oc}"`)])}return rc}function Un(at){const st=at.value,ot=at.styleSpec,ut=ot.sky,Hl=at.style,rc=Xr(st);if(void 0===st)return[];if("object"!==rc)return[new B("sky",st,`object expected, ${rc} found`)];let sc=[];for(const oc in st)sc=sc.concat(ut[oc]?at.validateSpec({key:oc,value:st[oc],valueSpec:ut[oc],style:Hl,styleSpec:ot}):[new B(oc,st[oc],`unknown property "${oc}"`)]);return sc}function qn(at){const st=at.value,ot=at.styleSpec,ut=ot.terrain,Hl=at.style;let rc=[];const sc=Xr(st);if(void 0===st)return rc;if("object"!==sc)return rc=rc.concat([new B("terrain",st,`object expected, ${sc} found`)]),rc;for(const oc in st)rc=rc.concat(ut[oc]?at.validateSpec({key:oc,value:st[oc],valueSpec:ut[oc],validateSpec:at.validateSpec,style:Hl,styleSpec:ot}):[new B(oc,st[oc],`unknown property "${oc}"`)]);return rc}function Gn(at){let st=[];const ot=at.value,ut=at.key;if(Array.isArray(ot)){const Hl=[],rc=[];for(const sc in ot)ot[sc].id&&Hl.includes(ot[sc].id)&&st.push(new B(ut,ot,`all the sprites' ids must be unique, but ${ot[sc].id} is duplicated`)),Hl.push(ot[sc].id),ot[sc].url&&rc.includes(ot[sc].url)&&st.push(new B(ut,ot,`all the sprites' URLs must be unique, but ${ot[sc].url} is duplicated`)),rc.push(ot[sc].url),st=st.concat(In({key:`${ut}[${sc}]`,value:ot[sc],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:at.validateSpec}));return st}return On({key:ut,value:ot})}function Xn(at){return st=at.value,Boolean(st)&&st.constructor===Object?[]:[new B(at.key,at.value,`object expected, ${Xr(at.value)} found`)];var st}const Fd={"*":()=>[],array:Mn,boolean:function(at){const st=at.value,ot=at.key,ut=Xr(st);return"boolean"!==ut?[new B(ot,st,`boolean expected, ${ut} found`)]:[]},number:zn,color:Cn,constants:Sn,enum:Bn,filter:En,function:Pn,layer:$n,object:In,source:Nn,light:jn,sky:Un,terrain:qn,projection:function(at){const st=at.value,ot=at.styleSpec,ut=ot.projection,Hl=at.style,rc=Xr(st);if(void 0===st)return[];if("object"!==rc)return[new B("projection",st,`object expected, ${rc} found`)];let sc=[];for(const oc in st)sc=sc.concat(ut[oc]?at.validateSpec({key:oc,value:st[oc],valueSpec:ut[oc],style:Hl,styleSpec:ot}):[new B(oc,st[oc],`unknown property "${oc}"`)]);return sc},projectionDefinition:function(at){const st=at.key;let ot=at.value;ot=ot instanceof String?ot.valueOf():ot;const ut=Xr(ot);return"array"!==ut||function(at){return Array.isArray(at)&&3===at.length&&"string"==typeof at[0]&&"string"==typeof at[1]&&"number"==typeof at[2]}(ot)||function(at){return!!["interpolate","step","literal"].includes(at[0])}(ot)?["array","string"].includes(ut)?[]:[new B(st,ot,`projection expected, invalid type "${ut}" found`)]:[new B(st,ot,`projection expected, invalid array ${JSON.stringify(ot)} found`)]},string:On,formatted:function(at){return 0===On(at).length?[]:Tn(at)},resolvedImage:function(at){return 0===On(at).length?[]:Tn(at)},padding:function(at){const st=at.key,ot=at.value;if("array"===Xr(ot)){if(ot.length<1||ot.length>4)return[new B(st,ot,`padding requires 1 to 4 values; ${ot.length} values found`)];const ut={type:"number"};let Hl=[];for(let rc=0;rc<ot.length;rc++)Hl=Hl.concat(at.validateSpec({key:`${st}[${rc}]`,value:ot[rc],validateSpec:at.validateSpec,valueSpec:ut}));return Hl}return zn({key:st,value:ot,valueSpec:{}})},numberArray:function(at){const st=at.key,ot=at.value;if("array"===Xr(ot)){const ut={type:"number"};if(ot.length<1)return[new B(st,ot,"array length at least 1 expected, length 0 found")];let Hl=[];for(let rc=0;rc<ot.length;rc++)Hl=Hl.concat(at.validateSpec({key:`${st}[${rc}]`,value:ot[rc],validateSpec:at.validateSpec,valueSpec:ut}));return Hl}return zn({key:st,value:ot,valueSpec:{}})},colorArray:function(at){const st=at.key,ot=at.value;if("array"===Xr(ot)){if(ot.length<1)return[new B(st,ot,"array length at least 1 expected, length 0 found")];let at=[];for(let ut=0;ut<ot.length;ut++)at=at.concat(Cn({key:`${st}[${ut}]`,value:ot[ut]}));return at}return Cn({key:st,value:ot})},variableAnchorOffsetCollection:function(at){const st=at.key,ot=at.value,ut=Xr(ot),Hl=at.styleSpec;if("array"!==ut||ot.length<1||ot.length%2!=0)return[new B(st,ot,"variableAnchorOffsetCollection requires a non-empty array of even length")];let rc=[];for(let sc=0;sc<ot.length;sc+=2)rc=rc.concat(Bn({key:`${st}[${sc}]`,value:ot[sc],valueSpec:Hl.layout_symbol["text-anchor"]})),rc=rc.concat(Mn({key:`${st}[${sc+1}]`,value:ot[sc+1],valueSpec:{length:2,value:"number"},validateSpec:at.validateSpec,style:at.style,styleSpec:Hl}));return rc},sprite:Gn,state:Xn};function Yn(at){const st=at.value,ot=at.valueSpec,ut=at.styleSpec;return at.validateSpec=Yn,ot.expression&&Zr(kn(st))?Pn(at):ot.expression&&rn(An(st))?Tn(at):ot.type&&Fd[ot.type]?Fd[ot.type](at):In(E({},at,{valueSpec:ot.type?ut[ot.type]:ot}))}function Hn(at){const st=at.value,ot=at.key,ut=On(at);return ut.length||(-1===st.indexOf("{fontstack}")&&ut.push(new B(ot,st,'"glyphs" url must include a "{fontstack}" token')),-1===st.indexOf("{range}")&&ut.push(new B(ot,st,'"glyphs" url must include a "{range}" token'))),ut}function Jn(at,st){void 0===st&&(st=uu);let ot=[];return ot=ot.concat(Yn({key:"",value:at,valueSpec:st.$root,styleSpec:st,style:at,validateSpec:Yn,objectElementValidators:{glyphs:Hn,"*":()=>[]}})),at.constants&&(ot=ot.concat(Sn({key:"constants",value:at.constants}))),Kn(ot)}function Wn(at){return function(st){return at({...st,validateSpec:Yn})}}function Kn(at){return[].concat(at).sort(((at,st)=>at.line-st.line))}function Qn(at){return function(){for(var st=arguments.length,ot=new Array(st),ut=0;ut<st;ut++)ot[ut]=arguments[ut];return Kn(at.apply(this,ot))}}Jn.source=Qn(Wn(Nn)),Jn.sprite=Qn(Wn(Gn)),Jn.glyphs=Qn(Wn(Hn)),Jn.light=Qn(Wn(jn)),Jn.sky=Qn(Wn(Un)),Jn.terrain=Qn(Wn(qn)),Jn.state=Qn(Wn(Xn)),Jn.layer=Qn(Wn($n)),Jn.filter=Qn(Wn(En)),Jn.paintProperty=Qn(Wn(Dn)),Jn.layoutProperty=Qn(Wn(Ln));const jd="AbortError";function ei(){return new Error(jd)}const Ud={REGISTERED_PROTOCOLS:{}};function ni(at,st){Ud.REGISTERED_PROTOCOLS[at]=st}function ii(at){delete Ud.REGISTERED_PROTOCOLS[at]}const Vd="global-dispatcher";class oi extends Error{constructor(at,st,ot,ut){super(`AJAXError: ${st} (${at}): ${ot}`),this.status=at,this.statusText=st,this.url=ot,this.body=ut}}const ai=()=>S(self)?self.worker&&self.worker.referrer:("blob:"===window.location.protocol?window.parent:window).location.href,li=function(at,st){if(/:\/\//.test(at.url)&&!/^https?:|^file:/.test(at.url)){const ut=Ud.REGISTERED_PROTOCOLS[(ot=at.url).substring(0,ot.indexOf("://"))];if(ut)return ut(at,st);if(S(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:at,targetMapId:Vd},st)}var ot;if(!(at=>/^file:/.test(at)||/^file:/.test(ai())&&!/^\w+:/.test(at))(at.url)){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(at,st){return t(this,void 0,void 0,(function*(){const ot=new Request(at.url,{method:at.method||"GET",body:at.body,credentials:at.credentials,headers:at.headers,cache:at.cache,referrer:ai(),signal:st.signal});let ut,Hl;"json"!==at.type||ot.headers.has("Accept")||ot.headers.set("Accept","application/json");try{ut=yield fetch(ot)}catch(ot){throw new oi(0,ot.message,at.url,new Blob)}if(!ut.ok){const st=yield ut.blob();throw new oi(ut.status,ut.statusText,at.url,st)}Hl="arrayBuffer"===at.type||"image"===at.type?ut.arrayBuffer():"json"===at.type?ut.json():ut.text();const rc=yield Hl;if(st.signal.aborted)throw ei();return{data:rc,cacheControl:ut.headers.get("Cache-Control"),expires:ut.headers.get("Expires")}}))}(at,st);if(S(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:at,mustQueue:!0,targetMapId:Vd},st)}return function(at,st){return new Promise(((ot,ut)=>{var Hl;const rc=new XMLHttpRequest;rc.open(at.method||"GET",at.url,!0),"arrayBuffer"!==at.type&&"image"!==at.type||(rc.responseType="arraybuffer");for(const st in at.headers)rc.setRequestHeader(st,at.headers[st]);"json"===at.type&&(rc.responseType="text",(null===(Hl=at.headers)||void 0===Hl?void 0:Hl.Accept)||rc.setRequestHeader("Accept","application/json")),rc.withCredentials="include"===at.credentials,rc.onerror=()=>{ut(new Error(rc.statusText))},rc.onload=()=>{if(!st.signal.aborted)if((rc.status>=200&&rc.status<300||0===rc.status)&&null!==rc.response){let st=rc.response;if("json"===at.type)try{st=JSON.parse(rc.response)}catch(at){return void ut(at)}ot({data:st,cacheControl:rc.getResponseHeader("Cache-Control"),expires:rc.getResponseHeader("Expires")})}else{const st=new Blob([rc.response],{type:rc.getResponseHeader("Content-Type")});ut(new oi(rc.status,rc.statusText,at.url,st))}},st.signal.addEventListener("abort",(()=>{rc.abort(),ut(ei())})),rc.send(at.body)}))}(at,st)},Gd={};function ci(at,st,ot){if(void 0===ot&&(ot={}),Gd[at])throw new Error(`${at} is already registered.`);Object.defineProperty(st,"_classRegistryKey",{value:at,writeable:!1}),Gd[at]={klass:st,omit:ot.omit||[],shallow:ot.shallow||[]}}ci("Object",Object),ci("Set",Set),ci("TransferableGridIndex",P),ci("Color",zt),ci("Error",Error),ci("AJAXError",oi),ci("ResolvedImage",Ot),ci("StylePropertyFunction",ln),ci("StyleExpression",en,{omit:["_evaluator"]}),ci("ZoomDependentExpression",on),ci("ZoomConstantExpression",sn),ci("CompoundExpression",Br,{omit:["_evaluate"]});for(const kg in Rd)Rd[kg]._classRegistryKey||ci(`Expression_${kg}`,Rd[kg]);function hi(at){return at&&"undefined"!=typeof ArrayBuffer&&(at instanceof ArrayBuffer||at.constructor&&"ArrayBuffer"===at.constructor.name)}function pi(at){return at.$name||at.constructor._classRegistryKey}function fi(at){return!function(at){if(null===at||"object"!=typeof at)return!1;const st=pi(at);return!(!st||"Object"===st)}(at)&&(null==at||"boolean"==typeof at||"number"==typeof at||"string"==typeof at||at instanceof Boolean||at instanceof Number||at instanceof String||at instanceof Date||at instanceof RegExp||at instanceof Blob||at instanceof Error||hi(at)||k(at)||ArrayBuffer.isView(at)||at instanceof ImageData)}function di(at,st){if(fi(at))return(hi(at)||k(at))&&st&&st.push(at),ArrayBuffer.isView(at)&&st&&st.push(at.buffer),at instanceof ImageData&&st&&st.push(at.data.buffer),at;if(Array.isArray(at)){const ot=[];for(const ut of at)ot.push(di(ut,st));return ot}if("object"!=typeof at)throw new Error("can't serialize object of type "+typeof at);const ot=pi(at);if(!ot)throw new Error(`can't serialize object of unregistered class ${at.constructor.name}`);if(!Gd[ot])throw new Error(`${ot} is not registered.`);const{klass:ut}=Gd[ot],Hl=ut.serialize?ut.serialize(at,st):{};if(ut.serialize){if(st&&Hl===st[st.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const ut in at){if(!at.hasOwnProperty(ut))continue;if(Gd[ot].omit.indexOf(ut)>=0)continue;const rc=at[ut];Hl[ut]=Gd[ot].shallow.indexOf(ut)>=0?rc:di(rc,st)}at instanceof Error&&(Hl.message=at.message)}if(Hl.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==ot&&(Hl.$name=ot),Hl}function yi(at){if(fi(at))return at;if(Array.isArray(at))return at.map(yi);if("object"!=typeof at)throw new Error("can't deserialize object of type "+typeof at);const st=pi(at)||"Object";if(!Gd[st])throw new Error(`can't deserialize unregistered class ${st}`);const{klass:ot}=Gd[st];if(!ot)throw new Error(`can't deserialize unregistered class ${st}`);if(ot.deserialize)return ot.deserialize(at);const ut=Object.create(ot.prototype);for(const Hl of Object.keys(at)){if("$name"===Hl)continue;const ot=at[Hl];ut[Hl]=Gd[st].shallow.indexOf(Hl)>=0?ot:yi(ot)}return ut}class mi{constructor(at){this._methodToThrottle=at,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Zd={once:!0};class xi{constructor(at,st){this.target=at,this.mapId=st,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new mi((()=>this.process())),this.subscription=M(this.target,"message",(at=>this.receive(at)),!1),this.globalScope=S(self)?at:window}registerMessageHandler(at,st){this.messageHandlers[at]=st}sendAsync(at,st){return new Promise(((ot,ut)=>{const Hl=Math.round(1e18*Math.random()).toString(36).substring(0,10),rc=st?M(st.signal,"abort",(()=>{null==rc||rc.unsubscribe(),delete this.resolveRejects[Hl];const st={id:Hl,type:"<cancel>",origin:location.origin,targetMapId:at.targetMapId,sourceMapId:this.mapId};this.target.postMessage(st)}),Zd):null;this.resolveRejects[Hl]={resolve:at=>{null==rc||rc.unsubscribe(),ot(at)},reject:at=>{null==rc||rc.unsubscribe(),ut(at)}};const sc=[],oc=Object.assign(Object.assign({},at),{id:Hl,sourceMapId:this.mapId,origin:location.origin,data:di(at.data,sc)});this.target.postMessage(oc,{transfer:sc})}))}receive(at){const st=at.data,ot=st.id;if(!("file://"!==st.origin&&"file://"!==location.origin&&"resource://android"!==st.origin&&"resource://android"!==location.origin&&st.origin!==location.origin||st.targetMapId&&this.mapId!==st.targetMapId)){if("<cancel>"===st.type){delete this.tasks[ot];const at=this.abortControllers[ot];return delete this.abortControllers[ot],void(at&&at.abort())}if(S(self)||st.mustQueue)return this.tasks[ot]=st,this.taskQueue.push(ot),void this.invoker.trigger();this.processTask(ot,st)}}process(){if(0===this.taskQueue.length)return;const at=this.taskQueue.shift(),st=this.tasks[at];delete this.tasks[at],this.taskQueue.length>0&&this.invoker.trigger(),st&&this.processTask(at,st)}processTask(at,st){return t(this,void 0,void 0,(function*(){if("<response>"===st.type){const ot=this.resolveRejects[at];if(delete this.resolveRejects[at],!ot)return;return void(st.error?ot.reject(yi(st.error)):ot.resolve(yi(st.data)))}if(!this.messageHandlers[st.type])return void this.completeTask(at,new Error(`Could not find a registered handler for ${st.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const ot=yi(st.data),ut=new AbortController;this.abortControllers[at]=ut;try{const Hl=yield this.messageHandlers[st.type](st.sourceMapId,ot,ut);this.completeTask(at,null,Hl)}catch(ot){this.completeTask(at,ot)}}))}completeTask(at,st,ot){const ut=[];delete this.abortControllers[at];const Hl={id:at,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:st?di(st):null,data:di(ot,ut)};this.target.postMessage(Hl,{transfer:ut})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}}function vi(at,st,ot){ot[at]&&-1!==ot[at].indexOf(st)||(ot[at]=ot[at]||[],ot[at].push(st))}function bi(at,st,ot){if(ot&&ot[at]){const ut=ot[at].indexOf(st);-1!==ut&&ot[at].splice(ut,1)}}class wi{constructor(at,st){void 0===st&&(st={}),g(this,st),this.type=at}}class _i extends wi{constructor(at,st){void 0===st&&(st={}),super("error",g({error:at},st))}}class Si{on(at,st){return this._listeners=this._listeners||{},vi(at,st,this._listeners),{unsubscribe:()=>{this.off(at,st)}}}off(at,st){return bi(at,st,this._listeners),bi(at,st,this._oneTimeListeners),this}once(at,st){return st?(this._oneTimeListeners=this._oneTimeListeners||{},vi(at,st,this._oneTimeListeners),this):new Promise((st=>this.once(at,st)))}fire(at,st){"string"==typeof at&&(at=new wi(at,st||{}));const ot=at.type;if(this.listens(ot)){at.target=this;const st=this._listeners&&this._listeners[ot]?this._listeners[ot].slice():[];for(const ot of st)ot.call(this,at);const ut=this._oneTimeListeners&&this._oneTimeListeners[ot]?this._oneTimeListeners[ot].slice():[];for(const rc of ut)bi(ot,rc,this._oneTimeListeners),rc.call(this,at);const Hl=this._eventedParent;Hl&&(g(at,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),Hl.fire(at))}else at instanceof _i&&console.error(at.error);return this}listens(at){return this._listeners&&this._listeners[at]&&this._listeners[at].length>0||this._oneTimeListeners&&this._oneTimeListeners[at]&&this._oneTimeListeners[at].length>0||this._eventedParent&&this._eventedParent.listens(at)}setEventedParent(at,st){return this._eventedParent=at,this._eventedParentData=st,this}}const Hd=Jn,Wd=Hd.paintProperty,qd=Hd.layoutProperty;class Mi{constructor(){this.first=!0}update(at,st){const ot=Math.floor(at);return this.first?(this.first=!1,this.lastIntegerZoom=ot,this.lastIntegerZoomTime=0,this.lastZoom=at,this.lastFloorZoom=ot,!0):(this.lastFloorZoom>ot?(this.lastIntegerZoom=ot+1,this.lastIntegerZoomTime=st):this.lastFloorZoom<ot&&(this.lastIntegerZoom=ot,this.lastIntegerZoomTime=st),at!==this.lastZoom&&(this.lastZoom=at,this.lastFloorZoom=ot,!0))}}const zi=at=>at>=12272&&at<=12287,Pi=at=>at>=12288&&at<=12351,Ti=at=>at>=12448&&at<=12543,Ci=at=>at>=12736&&at<=12783,Bi=at=>at>=12800&&at<=13055,Ei=at=>at>=13056&&at<=13311,Vi=at=>at>=65040&&at<=65055,Fi=at=>at>=65072&&at<=65103,Di=at=>at>=65104&&at<=65135,Li=at=>at>=65280&&at<=65519;function $i(at){for(const st of at)if(qi(st.charCodeAt(0)))return!0;return!1}function Oi(at){for(const st of at)if(!ji(st.charCodeAt(0)))return!1;return!0}function Ri(at){const st=at.map((at=>{try{return new RegExp(`\\p{sc=${at}}`,"u").source}catch(at){return null}})).filter((at=>at));return new RegExp(st.join("|"),"u")}const Yd=Ri(["Arab","Dupl","Mong","Ougr","Syrc"]);function ji(at){return!Yd.test(String.fromCodePoint(at))}const Qd=Ri(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function qi(at){return!(746!==at&&747!==at&&(at<4352||!(Fi(at)&&!(at>=65097&&at<=65103)||Ei(at)||Ci(at)||!(!Pi(at)||at>=12296&&at<=12305||at>=12308&&at<=12319||12336===at)||Bi(at)||zi(at)||(at=>at>=12688&&at<=12703)(at)||Ti(at)&&12540!==at||!(!Li(at)||65288===at||65289===at||65293===at||at>=65306&&at<=65310||65339===at||65341===at||65343===at||at>=65371&&at<=65503||65507===at||at>=65512&&at<=65519)||!(!Di(at)||at>=65112&&at<=65118||at>=65123&&at<=65126)||Vi(at)||(at=>at>=19904&&at<=19967)(at)||/\p{sc=Cans}/u.test(String.fromCodePoint(at))||/\p{sc=Hang}/u.test(String.fromCodePoint(at))||Qd.test(String.fromCodePoint(at)))))}function Gi(at){return!(qi(at)||function(at){return!!((at=>at>=128&&at<=255)(at)&&(167===at||169===at||174===at||177===at||188===at||189===at||190===at||215===at||247===at)||(at=>at>=8192&&at<=8303)(at)&&(8214===at||8224===at||8225===at||8240===at||8241===at||8251===at||8252===at||8258===at||8263===at||8264===at||8265===at||8273===at)||(at=>at>=8448&&at<=8527)(at)||(at=>at>=8528&&at<=8591)(at)||(at=>at>=8960&&at<=9215)(at)&&(at>=8960&&at<=8967||at>=8972&&at<=8991||at>=8996&&at<=9e3||9003===at||at>=9085&&at<=9114||at>=9150&&at<=9165||9167===at||at>=9169&&at<=9179||at>=9186&&at<=9215)||(at=>at>=9216&&at<=9279)(at)&&9251!==at||(at=>at>=9280&&at<=9311)(at)||(at=>at>=9312&&at<=9471)(at)||(at=>at>=9632&&at<=9727)(at)||(at=>at>=9728&&at<=9983)(at)&&!(at>=9754&&at<=9759)||(at=>at>=11008&&at<=11263)(at)&&(at>=11026&&at<=11055||at>=11088&&at<=11097||at>=11192&&at<=11243)||Pi(at)||Ti(at)||(at=>at>=57344&&at<=63743)(at)||Fi(at)||Di(at)||Li(at)||8734===at||8756===at||8757===at||at>=9984&&at<=10087||at>=10102&&at<=10131||65532===at||65533===at)}(at))}const Kd=Ri(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Zi(at){return Kd.test(String.fromCodePoint(at))}function Yi(at,st){return!(!st&&Zi(at)||at>=2304&&at<=3583||at>=3840&&at<=4255||(at=>at>=6016&&at<=6143)(at))}function Hi(at){for(const st of at)if(Zi(st.charCodeAt(0)))return!0;return!1}const Xd=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(at){this.pluginStatus=at.pluginStatus,this.pluginURL=at.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(at){if(Xd.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=at.applyArabicShaping,this.processBidirectionalText=at.processBidirectionalText,this.processStyledBidirectionalText=at.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return null!=this.applyArabicShaping&&null!=this.processBidirectionalText&&null!=this.processStyledBidirectionalText}getRTLTextPluginStatus(){return this.pluginStatus}syncState(at,st){return t(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if("loading"!==at.pluginStatus)return this.setState(at),at;const ot=at.pluginURL,ut=new Promise((at=>{this.loadScriptResolve=at}));st(ot);const Hl=new Promise((at=>setTimeout((()=>at()),this.TIMEOUT)));if(yield Promise.race([ut,Hl]),this.isParsed()){const at={pluginStatus:"loaded",pluginURL:ot};return this.setState(at),at}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${ot}`)}))}};class Wi{constructor(at,st){this.zoom=at,st?(this.now=st.now||0,this.fadeDuration=st.fadeDuration||0,this.zoomHistory=st.zoomHistory||new Mi,this.transition=st.transition||{},this.globalState=st.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Mi,this.transition={},this.globalState={})}isSupportedScript(at){return function(at,st){for(const ot of at)if(!Yi(ot.charCodeAt(0),st))return!1;return!0}(at,"loaded"===Xd.getRTLTextPluginStatus())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const at=this.zoom,st=at-Math.floor(at),ot=this.crossFadingFactor();return at>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:st+(1-st)*ot}:{fromScale:.5,toScale:1,t:1-(1-ot)*st}}}class Ki{constructor(at,st){this.property=at,this.value=st,this.expression=function(at,st){if(Zr(at))return new ln(at,st);if(rn(at)){const ot=an(at,st);if("error"===ot.result)throw new Error(ot.value.map((at=>`${at.key}: ${at.message}`)).join(", "));return ot.value}{let ot=at;return"color"===st.type&&"string"==typeof at?ot=zt.parse(at):"padding"!==st.type||"number"!=typeof at&&!Array.isArray(at)?"numberArray"!==st.type||"number"!=typeof at&&!Array.isArray(at)?"colorArray"!==st.type||"string"!=typeof at&&!Array.isArray(at)?"variableAnchorOffsetCollection"===st.type&&Array.isArray(at)?ot=$t.parse(at):"projectionDefinition"===st.type&&"string"==typeof at&&(ot=Rt.parse(at)):ot=Ft.parse(at):ot=Vt.parse(at):ot=Et.parse(at),{globalStateRefs:new Set,kind:"constant",evaluate:()=>ot}}}(void 0===st?at.specification.default:st,at.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(at,st,ot){return this.property.possiblyEvaluate(this,at,st,ot)}}class Qi{constructor(at){this.property=at,this.value=new Ki(at,void 0)}transitioned(at,st){return new es(this.property,this.value,st,g({},at.transition,this.transition),at.now)}untransitioned(){return new es(this.property,this.value,null,{},0)}}class ts{constructor(at){this._properties=at,this._values=Object.create(at.defaultTransitionablePropertyValues)}getValue(at){return v(this._values[at].value.value)}setValue(at,st){Object.prototype.hasOwnProperty.call(this._values,at)||(this._values[at]=new Qi(this._values[at].property)),this._values[at].value=new Ki(this._values[at].property,null===st?void 0:v(st))}getTransition(at){return v(this._values[at].transition)}setTransition(at,st){Object.prototype.hasOwnProperty.call(this._values,at)||(this._values[at]=new Qi(this._values[at].property)),this._values[at].transition=v(st)||void 0}serialize(){const at={};for(const st of Object.keys(this._values)){const ot=this.getValue(st);void 0!==ot&&(at[st]=ot);const ut=this.getTransition(st);void 0!==ut&&(at[`${st}-transition`]=ut)}return at}transitioned(at,st){const ot=new rs(this._properties);for(const ut of Object.keys(this._values))ot._values[ut]=this._values[ut].transitioned(at,st._values[ut]);return ot}untransitioned(){const at=new rs(this._properties);for(const st of Object.keys(this._values))at._values[st]=this._values[st].untransitioned();return at}}class es{constructor(at,st,ot,ut,Hl){this.property=at,this.value=st,this.begin=Hl+ut.delay||0,this.end=this.begin+ut.duration||0,at.specification.transition&&(ut.delay||ut.duration)&&(this.prior=ot)}possiblyEvaluate(at,st,ot){const ut=at.now||0,Hl=this.value.possiblyEvaluate(at,st,ot),rc=this.prior;if(rc){if(ut>this.end)return this.prior=null,Hl;if(this.value.isDataDriven())return this.prior=null,Hl;if(ut<this.begin)return rc.possiblyEvaluate(at,st,ot);{const sc=(ut-this.begin)/(this.end-this.begin);return this.property.interpolate(rc.possiblyEvaluate(at,st,ot),Hl,function(at){if(at<=0)return 0;if(at>=1)return 1;const st=at*at,ot=st*at;return 4*(at<.5?ot:3*(at-st)+ot-.75)}(sc))}}return Hl}}class rs{constructor(at){this._properties=at,this._values=Object.create(at.defaultTransitioningPropertyValues)}possiblyEvaluate(at,st,ot){const ut=new ss(this._properties);for(const Hl of Object.keys(this._values))ut._values[Hl]=this._values[Hl].possiblyEvaluate(at,st,ot);return ut}hasTransition(){for(const at of Object.keys(this._values))if(this._values[at].prior)return!0;return!1}}class ns{constructor(at){this._properties=at,this._values=Object.create(at.defaultPropertyValues)}hasValue(at){return void 0!==this._values[at].value}getValue(at){return v(this._values[at].value)}setValue(at,st){this._values[at]=new Ki(this._values[at].property,null===st?void 0:v(st))}serialize(){const at={};for(const st of Object.keys(this._values)){const ot=this.getValue(st);void 0!==ot&&(at[st]=ot)}return at}possiblyEvaluate(at,st,ot){const ut=new ss(this._properties);for(const Hl of Object.keys(this._values))ut._values[Hl]=this._values[Hl].possiblyEvaluate(at,st,ot);return ut}}class is{constructor(at,st,ot){this.property=at,this.value=st,this.parameters=ot}isConstant(){return"constant"===this.value.kind}constantOr(at){return"constant"===this.value.kind?this.value.value:at}evaluate(at,st,ot,ut){return this.property.evaluate(this.value,this.parameters,at,st,ot,ut)}}class ss{constructor(at){this._properties=at,this._values=Object.create(at.defaultPossiblyEvaluatedValues)}get(at){return this._values[at]}}class os{constructor(at){this.specification=at}possiblyEvaluate(at,st){if(at.isDataDriven())throw new Error("Value should not be data driven");return at.expression.evaluate(st)}interpolate(at,st,ot){const ut=Ed[this.specification.type];return ut?ut(at,st,ot):at}}class as{constructor(at,st){this.specification=at,this.overrides=st}possiblyEvaluate(at,st,ot,ut){return new is(this,"constant"===at.expression.kind||"camera"===at.expression.kind?{kind:"constant",value:at.expression.evaluate(st,null,{},ot,ut)}:at.expression,st)}interpolate(at,st,ot){if("constant"!==at.value.kind||"constant"!==st.value.kind)return at;if(void 0===at.value.value||void 0===st.value.value)return new is(this,{kind:"constant",value:void 0},at.parameters);const ut=Ed[this.specification.type];if(ut){const Hl=ut(at.value.value,st.value.value,ot);return new is(this,{kind:"constant",value:Hl},at.parameters)}return at}evaluate(at,st,ot,ut,Hl,rc){return"constant"===at.kind?at.value:at.evaluate(st,ot,ut,Hl,rc)}}class ls extends as{possiblyEvaluate(at,st,ot,ut){if(void 0===at.value)return new is(this,{kind:"constant",value:void 0},st);if("constant"===at.expression.kind){const Hl=at.expression.evaluate(st,null,{},ot,ut),rc="resolvedImage"===at.property.specification.type&&"string"!=typeof Hl?Hl.name:Hl,sc=this._calculate(rc,rc,rc,st);return new is(this,{kind:"constant",value:sc},st)}if("camera"===at.expression.kind){const ot=this._calculate(at.expression.evaluate({zoom:st.zoom-1}),at.expression.evaluate({zoom:st.zoom}),at.expression.evaluate({zoom:st.zoom+1}),st);return new is(this,{kind:"constant",value:ot},st)}return new is(this,at.expression,st)}evaluate(at,st,ot,ut,Hl,rc){if("source"===at.kind){const sc=at.evaluate(st,ot,ut,Hl,rc);return this._calculate(sc,sc,sc,st)}return"composite"===at.kind?this._calculate(at.evaluate({zoom:Math.floor(st.zoom)-1},ot,ut),at.evaluate({zoom:Math.floor(st.zoom)},ot,ut),at.evaluate({zoom:Math.floor(st.zoom)+1},ot,ut),st):at.value}_calculate(at,st,ot,ut){return ut.zoom>ut.zoomHistory.lastIntegerZoom?{from:at,to:st}:{from:ot,to:st}}interpolate(at){return at}}class us{constructor(at){this.specification=at}possiblyEvaluate(at,st,ot,ut){if(void 0!==at.value){if("constant"===at.expression.kind){const Hl=at.expression.evaluate(st,null,{},ot,ut);return this._calculate(Hl,Hl,Hl,st)}return this._calculate(at.expression.evaluate(new Wi(Math.floor(st.zoom-1),st)),at.expression.evaluate(new Wi(Math.floor(st.zoom),st)),at.expression.evaluate(new Wi(Math.floor(st.zoom+1),st)),st)}}_calculate(at,st,ot,ut){return ut.zoom>ut.zoomHistory.lastIntegerZoom?{from:at,to:st}:{from:ot,to:st}}interpolate(at){return at}}class cs{constructor(at){this.specification=at}possiblyEvaluate(at,st,ot,ut){return!!at.expression.evaluate(st,null,{},ot,ut)}interpolate(){return!1}}class hs{constructor(at){this.properties=at,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const st in at){const ot=at[st];ot.specification.overridable&&this.overridableProperties.push(st);const ut=this.defaultPropertyValues[st]=new Ki(ot,void 0),Hl=this.defaultTransitionablePropertyValues[st]=new Qi(ot);this.defaultTransitioningPropertyValues[st]=Hl.untransitioned(),this.defaultPossiblyEvaluatedValues[st]=ut.possiblyEvaluate({})}}}ci("DataDrivenProperty",as),ci("DataConstantProperty",os),ci("CrossFadedDataDrivenProperty",ls),ci("CrossFadedProperty",us),ci("ColorRampProperty",cs);const Jd="-transition";class fs extends Si{constructor(at,st){if(super(),this.id=at.id,this.type=at.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},"custom"!==at.type&&(this.metadata=at.metadata,this.minzoom=at.minzoom,this.maxzoom=at.maxzoom,"background"!==at.type&&(this.source=at.source,this.sourceLayer=at["source-layer"],this.filter=at.filter,this._featureFilter=fn(at.filter)),st.layout&&(this._unevaluatedLayout=new ns(st.layout)),st.paint)){this._transitionablePaint=new ts(st.paint);for(const st in at.paint)this.setPaintProperty(st,at.paint[st],{validate:!1});for(const st in at.layout)this.setLayoutProperty(st,at.layout[st],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new ss(st.paint)}}setFilter(at){this.filter=at,this._featureFilter=fn(at)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(at){return"visibility"===at?this.visibility:this._unevaluatedLayout.getValue(at)}getLayoutAffectingGlobalStateRefs(){const at=new Set;if(this._unevaluatedLayout)for(const st in this._unevaluatedLayout._values){const ot=this._unevaluatedLayout._values[st];for(const st of ot.getGlobalStateRefs())at.add(st)}for(const st of this._featureFilter.getGlobalStateRefs())at.add(st);return at}setLayoutProperty(at,st,ot){void 0===ot&&(ot={}),null!=st&&this._validate(qd,`layers.${this.id}.layout.${at}`,at,st,ot)||("visibility"!==at?this._unevaluatedLayout.setValue(at,st):this.visibility=st)}getPaintProperty(at){return at.endsWith(Jd)?this._transitionablePaint.getTransition(at.slice(0,-11)):this._transitionablePaint.getValue(at)}setPaintProperty(at,st,ot){if(void 0===ot&&(ot={}),null!=st&&this._validate(Wd,`layers.${this.id}.paint.${at}`,at,st,ot))return!1;if(at.endsWith(Jd))return this._transitionablePaint.setTransition(at.slice(0,-11),st||void 0),!1;{const ot=this._transitionablePaint._values[at],ut="cross-faded-data-driven"===ot.property.specification["property-type"],Hl=ot.value.isDataDriven(),rc=ot.value;this._transitionablePaint.setValue(at,st),this._handleSpecialPaintPropertyUpdate(at);const sc=this._transitionablePaint._values[at].value;return sc.isDataDriven()||Hl||ut||this._handleOverridablePaintPropertyUpdate(at,rc,sc)}}_handleSpecialPaintPropertyUpdate(at){}_handleOverridablePaintPropertyUpdate(at,st,ot){return!1}isHidden(at){return!!(this.minzoom&&at<this.minzoom)||!!(this.maxzoom&&at>=this.maxzoom)||"none"===this.visibility}updateTransitions(at){this._transitioningPaint=this._transitionablePaint.transitioned(at,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(at,st){at.getCrossfadeParameters&&(this._crossfadeParameters=at.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(at,void 0,st)),this.paint=this._transitioningPaint.possiblyEvaluate(at,void 0,st)}serialize(){const at={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(at.layout=at.layout||{},at.layout.visibility=this.visibility),function(at,st){const ot={};for(const ut in at)st.call(this,at[ut],ut,at)&&(ot[ut]=at[ut]);return ot}(at,((at,st)=>!(void 0===at||"layout"===st&&!Object.keys(at).length||"paint"===st&&!Object.keys(at).length)))}_validate(at,st,ot,ut,Hl){return void 0===Hl&&(Hl={}),(!Hl||!1!==Hl.validate)&&function(at,st){let ot=!1;if(st&&st.length)for(const ut of st)at.fire(new _i(new Error(ut.message))),ot=!0;return ot}(this,at.call(Hd,{key:st,layerType:this.type,objectKey:ot,value:ut,styleSpec:uu,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const at in this.paint._values){const st=this.paint.get(at);if(st instanceof is&&Ur(st.property.specification)&&("source"===st.value.kind||"composite"===st.value.kind)&&st.value.isStateDependent)return!0}return!1}}const $d={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class ys{constructor(at,st){this._structArray=at,this._pos1=st*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ms{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(at,st){return at._trim(),st&&(at.isTransferred=!0,st.push(at.arrayBuffer)),{length:at.length,arrayBuffer:at.arrayBuffer}}static deserialize(at){const st=Object.create(this.prototype);return st.arrayBuffer=at.arrayBuffer,st.length=at.length,st.capacity=at.arrayBuffer.byteLength/st.bytesPerElement,st._refreshViews(),st}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(at){this.reserve(at),this.length=at}reserve(at){if(at>this.capacity){this.capacity=Math.max(at,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const st=this.uint8;this._refreshViews(),st&&this.uint8.set(st)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function gs(at,st){void 0===st&&(st=1);let ot=0,ut=0;return{members:at.map((at=>{const Hl=$d[at.type].BYTES_PER_ELEMENT,rc=ot=xs(ot,Math.max(st,Hl)),sc=at.components||1;return ut=Math.max(ut,Hl),ot+=Hl*sc,{name:at.name,type:at.type,components:sc,offset:rc}})),size:xs(ot,Math.max(ut,st)),alignment:st}}function xs(at,st){return Math.ceil(at/st)*st}class vs extends ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(at,st){const ot=this.length;return this.resize(ot+1),this.emplace(ot,at,st)}emplace(at,st,ot){const ut=2*at;return this.int16[ut+0]=st,this.int16[ut+1]=ot,at}}vs.prototype.bytesPerElement=4,ci("StructArrayLayout2i4",vs);class bs extends ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(at,st,ot){const ut=this.length;return this.resize(ut+1),this.emplace(ut,at,st,ot)}emplace(at,st,ot,ut){const Hl=3*at;return this.int16[Hl+0]=st,this.int16[Hl+1]=ot,this.int16[Hl+2]=ut,at}}bs.prototype.bytesPerElement=6,ci("StructArrayLayout3i6",bs);class ws extends ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(at,st,ot,ut){const Hl=this.length;return this.resize(Hl+1),this.emplace(Hl,at,st,ot,ut)}emplace(at,st,ot,ut,Hl){const rc=4*at;return this.int16[rc+0]=st,this.int16[rc+1]=ot,this.int16[rc+2]=ut,this.int16[rc+3]=Hl,at}}ws.prototype.bytesPerElement=8,ci("StructArrayLayout4i8",ws);class _s extends ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(at,st,ot,ut,Hl,rc){const sc=this.length;return this.resize(sc+1),this.emplace(sc,at,st,ot,ut,Hl,rc)}emplace(at,st,ot,ut,Hl,rc,sc){const oc=6*at;return this.int16[oc+0]=st,this.int16[oc+1]=ot,this.int16[oc+2]=ut,this.int16[oc+3]=Hl,this.int16[oc+4]=rc,this.int16[oc+5]=sc,at}}_s.prototype.bytesPerElement=12,ci("StructArrayLayout2i4i12",_s);class Ss extends ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(at,st,ot,ut,Hl,rc){const sc=this.length;return this.resize(sc+1),this.emplace(sc,at,st,ot,ut,Hl,rc)}emplace(at,st,ot,ut,Hl,rc,sc){const oc=4*at,_c=8*at;return this.int16[oc+0]=st,this.int16[oc+1]=ot,this.uint8[_c+4]=ut,this.uint8[_c+5]=Hl,this.uint8[_c+6]=rc,this.uint8[_c+7]=sc,at}}Ss.prototype.bytesPerElement=8,ci("StructArrayLayout2i4ub8",Ss);class ks extends ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(at,st){const ot=this.length;return this.resize(ot+1),this.emplace(ot,at,st)}emplace(at,st,ot){const ut=2*at;return this.float32[ut+0]=st,this.float32[ut+1]=ot,at}}ks.prototype.bytesPerElement=8,ci("StructArrayLayout2f8",ks);class As extends ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(at,st,ot,ut,Hl,rc,sc,oc,_c,wc){const Sc=this.length;return this.resize(Sc+1),this.emplace(Sc,at,st,ot,ut,Hl,rc,sc,oc,_c,wc)}emplace(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc){const iu=10*at;return this.uint16[iu+0]=st,this.uint16[iu+1]=ot,this.uint16[iu+2]=ut,this.uint16[iu+3]=Hl,this.uint16[iu+4]=rc,this.uint16[iu+5]=sc,this.uint16[iu+6]=oc,this.uint16[iu+7]=_c,this.uint16[iu+8]=wc,this.uint16[iu+9]=Sc,at}}As.prototype.bytesPerElement=20,ci("StructArrayLayout10ui20",As);class Is extends ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu){const su=this.length;return this.resize(su+1),this.emplace(su,at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu)}emplace(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su){const lu=12*at;return this.int16[lu+0]=st,this.int16[lu+1]=ot,this.int16[lu+2]=ut,this.int16[lu+3]=Hl,this.uint16[lu+4]=rc,this.uint16[lu+5]=sc,this.uint16[lu+6]=oc,this.uint16[lu+7]=_c,this.int16[lu+8]=wc,this.int16[lu+9]=Sc,this.int16[lu+10]=iu,this.int16[lu+11]=su,at}}Is.prototype.bytesPerElement=24,ci("StructArrayLayout4i4ui4i24",Is);class Ms extends ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(at,st,ot){const ut=this.length;return this.resize(ut+1),this.emplace(ut,at,st,ot)}emplace(at,st,ot,ut){const Hl=3*at;return this.float32[Hl+0]=st,this.float32[Hl+1]=ot,this.float32[Hl+2]=ut,at}}Ms.prototype.bytesPerElement=12,ci("StructArrayLayout3f12",Ms);class zs extends ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(at){const st=this.length;return this.resize(st+1),this.emplace(st,at)}emplace(at,st){return this.uint32[1*at+0]=st,at}}zs.prototype.bytesPerElement=4,ci("StructArrayLayout1ul4",zs);class Ps extends ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(at,st,ot,ut,Hl,rc,sc,oc,_c){const wc=this.length;return this.resize(wc+1),this.emplace(wc,at,st,ot,ut,Hl,rc,sc,oc,_c)}emplace(at,st,ot,ut,Hl,rc,sc,oc,_c,wc){const Sc=10*at,iu=5*at;return this.int16[Sc+0]=st,this.int16[Sc+1]=ot,this.int16[Sc+2]=ut,this.int16[Sc+3]=Hl,this.int16[Sc+4]=rc,this.int16[Sc+5]=sc,this.uint32[iu+3]=oc,this.uint16[Sc+8]=_c,this.uint16[Sc+9]=wc,at}}Ps.prototype.bytesPerElement=20,ci("StructArrayLayout6i1ul2ui20",Ps);class Ts extends ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(at,st,ot,ut,Hl,rc){const sc=this.length;return this.resize(sc+1),this.emplace(sc,at,st,ot,ut,Hl,rc)}emplace(at,st,ot,ut,Hl,rc,sc){const oc=6*at;return this.int16[oc+0]=st,this.int16[oc+1]=ot,this.int16[oc+2]=ut,this.int16[oc+3]=Hl,this.int16[oc+4]=rc,this.int16[oc+5]=sc,at}}Ts.prototype.bytesPerElement=12,ci("StructArrayLayout2i2i2i12",Ts);class Cs extends ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(at,st,ot,ut,Hl){const rc=this.length;return this.resize(rc+1),this.emplace(rc,at,st,ot,ut,Hl)}emplace(at,st,ot,ut,Hl,rc){const sc=4*at,oc=8*at;return this.float32[sc+0]=st,this.float32[sc+1]=ot,this.float32[sc+2]=ut,this.int16[oc+6]=Hl,this.int16[oc+7]=rc,at}}Cs.prototype.bytesPerElement=16,ci("StructArrayLayout2f1f2i16",Cs);class Bs extends ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(at,st,ot,ut,Hl,rc){const sc=this.length;return this.resize(sc+1),this.emplace(sc,at,st,ot,ut,Hl,rc)}emplace(at,st,ot,ut,Hl,rc,sc){const oc=16*at,_c=4*at,wc=8*at;return this.uint8[oc+0]=st,this.uint8[oc+1]=ot,this.float32[_c+1]=ut,this.float32[_c+2]=Hl,this.int16[wc+6]=rc,this.int16[wc+7]=sc,at}}Bs.prototype.bytesPerElement=16,ci("StructArrayLayout2ub2f2i16",Bs);class Es extends ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(at,st,ot){const ut=this.length;return this.resize(ut+1),this.emplace(ut,at,st,ot)}emplace(at,st,ot,ut){const Hl=3*at;return this.uint16[Hl+0]=st,this.uint16[Hl+1]=ot,this.uint16[Hl+2]=ut,at}}Es.prototype.bytesPerElement=6,ci("StructArrayLayout3ui6",Es);class Vs extends ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu,pu){const mu=this.length;return this.resize(mu+1),this.emplace(mu,at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu,pu)}emplace(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu,pu,mu){const gu=24*at,Au=12*at,yu=48*at;return this.int16[gu+0]=st,this.int16[gu+1]=ot,this.uint16[gu+2]=ut,this.uint16[gu+3]=Hl,this.uint32[Au+2]=rc,this.uint32[Au+3]=sc,this.uint32[Au+4]=oc,this.uint16[gu+10]=_c,this.uint16[gu+11]=wc,this.uint16[gu+12]=Sc,this.float32[Au+7]=iu,this.float32[Au+8]=su,this.uint8[yu+36]=lu,this.uint8[yu+37]=cu,this.uint8[yu+38]=uu,this.uint32[Au+10]=pu,this.int16[gu+22]=mu,at}}Vs.prototype.bytesPerElement=48,ci("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Vs);class Fs extends ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu,pu,mu,gu,Au,yu,_u,xu,Su,Du,Lu,$u,hh){const ed=this.length;return this.resize(ed+1),this.emplace(ed,at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu,pu,mu,gu,Au,yu,_u,xu,Su,Du,Lu,$u,hh)}emplace(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu,pu,mu,gu,Au,yu,_u,xu,Su,Du,Lu,$u,hh,ed){const td=32*at,id=16*at;return this.int16[td+0]=st,this.int16[td+1]=ot,this.int16[td+2]=ut,this.int16[td+3]=Hl,this.int16[td+4]=rc,this.int16[td+5]=sc,this.int16[td+6]=oc,this.int16[td+7]=_c,this.uint16[td+8]=wc,this.uint16[td+9]=Sc,this.uint16[td+10]=iu,this.uint16[td+11]=su,this.uint16[td+12]=lu,this.uint16[td+13]=cu,this.uint16[td+14]=uu,this.uint16[td+15]=pu,this.uint16[td+16]=mu,this.uint16[td+17]=gu,this.uint16[td+18]=Au,this.uint16[td+19]=yu,this.uint16[td+20]=_u,this.uint16[td+21]=xu,this.uint16[td+22]=Su,this.uint32[id+12]=Du,this.float32[id+13]=Lu,this.float32[id+14]=$u,this.uint16[td+30]=hh,this.uint16[td+31]=ed,at}}Fs.prototype.bytesPerElement=64,ci("StructArrayLayout8i15ui1ul2f2ui64",Fs);class Ds extends ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(at){const st=this.length;return this.resize(st+1),this.emplace(st,at)}emplace(at,st){return this.float32[1*at+0]=st,at}}Ds.prototype.bytesPerElement=4,ci("StructArrayLayout1f4",Ds);class Ls extends ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(at,st,ot){const ut=this.length;return this.resize(ut+1),this.emplace(ut,at,st,ot)}emplace(at,st,ot,ut){const Hl=3*at;return this.uint16[6*at+0]=st,this.float32[Hl+1]=ot,this.float32[Hl+2]=ut,at}}Ls.prototype.bytesPerElement=12,ci("StructArrayLayout1ui2f12",Ls);class $s extends ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(at,st,ot){const ut=this.length;return this.resize(ut+1),this.emplace(ut,at,st,ot)}emplace(at,st,ot,ut){const Hl=4*at;return this.uint32[2*at+0]=st,this.uint16[Hl+2]=ot,this.uint16[Hl+3]=ut,at}}$s.prototype.bytesPerElement=8,ci("StructArrayLayout1ul2ui8",$s);class Os extends ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(at,st){const ot=this.length;return this.resize(ot+1),this.emplace(ot,at,st)}emplace(at,st,ot){const ut=2*at;return this.uint16[ut+0]=st,this.uint16[ut+1]=ot,at}}Os.prototype.bytesPerElement=4,ci("StructArrayLayout2ui4",Os);class Rs extends ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(at){const st=this.length;return this.resize(st+1),this.emplace(st,at)}emplace(at,st){return this.uint16[1*at+0]=st,at}}Rs.prototype.bytesPerElement=2,ci("StructArrayLayout1ui2",Rs);class Ns extends ms{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(at,st,ot,ut){const Hl=this.length;return this.resize(Hl+1),this.emplace(Hl,at,st,ot,ut)}emplace(at,st,ot,ut,Hl){const rc=4*at;return this.float32[rc+0]=st,this.float32[rc+1]=ot,this.float32[rc+2]=ut,this.float32[rc+3]=Hl,at}}Ns.prototype.bytesPerElement=16,ci("StructArrayLayout4f16",Ns);class js extends ys{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new Hl(this.anchorPointX,this.anchorPointY)}}js.prototype.size=20;class Us extends Ps{get(at){return new js(this,at)}}ci("CollisionBoxArray",Us);class qs extends ys{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(at){this._structArray.uint8[this._pos1+37]=at}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(at){this._structArray.uint8[this._pos1+38]=at}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(at){this._structArray.uint32[this._pos4+10]=at}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}qs.prototype.size=48;class Gs extends Vs{get(at){return new qs(this,at)}}ci("PlacedSymbolArray",Gs);class Xs extends ys{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(at){this._structArray.uint32[this._pos4+12]=at}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}Xs.prototype.size=64;class Zs extends Fs{get(at){return new Xs(this,at)}}ci("SymbolInstanceArray",Zs);class Ys extends Ds{getoffsetX(at){return this.float32[1*at+0]}}ci("GlyphOffsetArray",Ys);class Hs extends bs{getx(at){return this.int16[3*at+0]}gety(at){return this.int16[3*at+1]}gettileUnitDistanceFromAnchor(at){return this.int16[3*at+2]}}ci("SymbolLineVertexArray",Hs);class Js extends ys{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Js.prototype.size=12;class Ws extends Ls{get(at){return new Js(this,at)}}ci("TextAnchorOffsetArray",Ws);class Ks extends ys{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ks.prototype.size=8;class Qs extends $s{get(at){return new Ks(this,at)}}ci("FeatureIndexArray",Qs);class to extends vs{}class eo extends vs{}class ro extends vs{}class no extends _s{}class io extends Ss{}class so extends ks{}class oo extends As{}class ao extends Is{}class lo extends Ms{}class uo extends zs{}class co extends Ts{}class ho extends Bs{}class po extends Es{}class fo extends Os{}const Ap=gs([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ep}=Ap;class go{constructor(at){void 0===at&&(at=[]),this._forceNewSegmentOnNextPrepare=!1,this.segments=at}prepareSegment(at,st,ot,ut){const Hl=this.segments[this.segments.length-1];return at>go.MAX_VERTEX_ARRAY_LENGTH&&w(`Max vertices per segment is ${go.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${at}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${go.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!Hl||Hl.vertexLength+at>go.MAX_VERTEX_ARRAY_LENGTH||Hl.sortKey!==ut?this.createNewSegment(st,ot,ut):Hl}createNewSegment(at,st,ot){const ut={vertexOffset:at.length,primitiveOffset:st.length,vertexLength:0,primitiveLength:0,vaos:{}};return void 0!==ot&&(ut.sortKey=ot),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(ut),ut}getOrCreateLatestSegment(at,st,ot){return this.prepareSegment(0,at,st,ot)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const at of this.segments)for(const st in at.vaos)at.vaos[st].destroy()}static simpleSegment(at,st,ot,ut){return new go([{vertexOffset:at,primitiveOffset:st,vertexLength:ot,primitiveLength:ut,vaos:{},sortKey:0}])}}function xo(at,st){return 256*(at=m(Math.floor(at),0,255))+m(Math.floor(st),0,255)}go.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,ci("SegmentVector",go);const Dp=gs([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Lp,Np,Rp,Op={exports:{}},Fp={exports:{}},jp={exports:{}},Up=function(){if(Rp)return Op.exports;Rp=1;var at=(Lp||(Lp=1,Fp.exports=function(at,st){var ot,ut,Hl,rc,sc,oc,_c,wc;for(ut=at.length-(ot=3&at.length),Hl=st,sc=3432918353,oc=461845907,wc=0;wc<ut;)_c=255&at.charCodeAt(wc)|(255&at.charCodeAt(++wc))<<8|(255&at.charCodeAt(++wc))<<16|(255&at.charCodeAt(++wc))<<24,++wc,Hl=27492+(65535&(rc=5*(65535&(Hl=(Hl^=_c=(65535&(_c=(_c=(65535&_c)*sc+(((_c>>>16)*sc&65535)<<16)&4294967295)<<15|_c>>>17))*oc+(((_c>>>16)*oc&65535)<<16)&4294967295)<<13|Hl>>>19))+((5*(Hl>>>16)&65535)<<16)&4294967295))+((58964+(rc>>>16)&65535)<<16);switch(_c=0,ot){case 3:_c^=(255&at.charCodeAt(wc+2))<<16;case 2:_c^=(255&at.charCodeAt(wc+1))<<8;case 1:Hl^=_c=(65535&(_c=(_c=(65535&(_c^=255&at.charCodeAt(wc)))*sc+(((_c>>>16)*sc&65535)<<16)&4294967295)<<15|_c>>>17))*oc+(((_c>>>16)*oc&65535)<<16)&4294967295}return Hl^=at.length,Hl=2246822507*(65535&(Hl^=Hl>>>16))+((2246822507*(Hl>>>16)&65535)<<16)&4294967295,Hl=3266489909*(65535&(Hl^=Hl>>>13))+((3266489909*(Hl>>>16)&65535)<<16)&4294967295,(Hl^=Hl>>>16)>>>0}),Fp.exports),st=(Np||(Np=1,jp.exports=function(at,st){for(var ot,ut=at.length,Hl=st^ut,rc=0;ut>=4;)ot=1540483477*(65535&(ot=255&at.charCodeAt(rc)|(255&at.charCodeAt(++rc))<<8|(255&at.charCodeAt(++rc))<<16|(255&at.charCodeAt(++rc))<<24))+((1540483477*(ot>>>16)&65535)<<16),Hl=1540483477*(65535&Hl)+((1540483477*(Hl>>>16)&65535)<<16)^(ot=1540483477*(65535&(ot^=ot>>>24))+((1540483477*(ot>>>16)&65535)<<16)),ut-=4,++rc;switch(ut){case 3:Hl^=(255&at.charCodeAt(rc+2))<<16;case 2:Hl^=(255&at.charCodeAt(rc+1))<<8;case 1:Hl=1540483477*(65535&(Hl^=255&at.charCodeAt(rc)))+((1540483477*(Hl>>>16)&65535)<<16)}return Hl=1540483477*(65535&(Hl^=Hl>>>13))+((1540483477*(Hl>>>16)&65535)<<16),(Hl^=Hl>>>15)>>>0}),jp.exports);return Op.exports=at,Op.exports.murmur3=at,Op.exports.murmur2=st,Op.exports}(),Vp=e(Up);class zo{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(at,st,ot,ut){this.ids.push(Po(at)),this.positions.push(st,ot,ut)}getPositions(at){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const st=Po(at);let ot=0,ut=this.ids.length-1;for(;ot<ut;){const at=ot+ut>>1;this.ids[at]>=st?ut=at:ot=at+1}const Hl=[];for(;this.ids[ot]===st;)Hl.push({index:this.positions[3*ot],start:this.positions[3*ot+1],end:this.positions[3*ot+2]}),ot++;return Hl}static serialize(at,st){const ot=new Float64Array(at.ids),ut=new Uint32Array(at.positions);return To(ot,ut,0,ot.length-1),st&&st.push(ot.buffer,ut.buffer),{ids:ot,positions:ut}}static deserialize(at){const st=new zo;return st.ids=at.ids,st.positions=at.positions,st.indexed=!0,st}}function Po(at){const st=+at;return!isNaN(st)&&st<=Number.MAX_SAFE_INTEGER?st:Vp(String(at))}function To(at,st,ot,ut){for(;ot<ut;){const Hl=at[ot+ut>>1];let rc=ot-1,sc=ut+1;for(;;){do{rc++}while(at[rc]<Hl);do{sc--}while(at[sc]>Hl);if(rc>=sc)break;Co(at,rc,sc),Co(st,3*rc,3*sc),Co(st,3*rc+1,3*sc+1),Co(st,3*rc+2,3*sc+2)}sc-ot<ut-sc?(To(at,st,ot,sc),ot=sc+1):(To(at,st,sc+1,ut),ut=sc)}}function Co(at,st,ot){const ut=at[st];at[st]=at[ot],at[ot]=ut}ci("FeaturePositionMap",zo);class Bo{constructor(at,st){this.gl=at.gl,this.location=st}}class Eo extends Bo{constructor(at,st){super(at,st),this.current=0}set(at){this.current!==at&&(this.current=at,this.gl.uniform1f(this.location,at))}}class Vo extends Bo{constructor(at,st){super(at,st),this.current=[0,0,0,0]}set(at){at[0]===this.current[0]&&at[1]===this.current[1]&&at[2]===this.current[2]&&at[3]===this.current[3]||(this.current=at,this.gl.uniform4f(this.location,at[0],at[1],at[2],at[3]))}}class Fo extends Bo{constructor(at,st){super(at,st),this.current=zt.transparent}set(at){at.r===this.current.r&&at.g===this.current.g&&at.b===this.current.b&&at.a===this.current.a||(this.current=at,this.gl.uniform4f(this.location,at.r,at.g,at.b,at.a))}}function Do(at){return[xo(255*at.r,255*at.g),xo(255*at.b,255*at.a)]}class Lo{constructor(at,st,ot){this.value=at,this.uniformNames=st.map((at=>`u_${at}`)),this.type=ot}setUniform(at,st,ot){at.set(ot.constantOr(this.value))}getBinding(at,st,ot){return"color"===this.type?new Fo(at,st):new Eo(at,st)}}class $o{constructor(at,st){this.uniformNames=st.map((at=>`u_${at}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(at,st){this.pixelRatioFrom=st.pixelRatio,this.pixelRatioTo=at.pixelRatio,this.patternFrom=st.tlbr,this.patternTo=at.tlbr}setUniform(at,st,ot,ut){const Hl="u_pattern_to"===ut?this.patternTo:"u_pattern_from"===ut?this.patternFrom:"u_pixel_ratio_to"===ut?this.pixelRatioTo:"u_pixel_ratio_from"===ut?this.pixelRatioFrom:null;Hl&&at.set(Hl)}getBinding(at,st,ot){return"u_pattern"===ot.substr(0,9)?new Vo(at,st):new Eo(at,st)}}class Oo{constructor(at,st,ot,ut){this.expression=at,this.type=ot,this.maxValue=0,this.paintVertexAttributes=st.map((at=>({name:`a_${at}`,type:"Float32",components:"color"===ot?2:1,offset:0}))),this.paintVertexArray=new ut}populatePaintArray(at,st,ot,ut,Hl){const rc=this.paintVertexArray.length,sc=this.expression.evaluate(new Wi(0),st,{},ut,[],Hl);this.paintVertexArray.resize(at),this._setPaintValue(rc,at,sc)}updatePaintArray(at,st,ot,ut){const Hl=this.expression.evaluate({zoom:0},ot,ut);this._setPaintValue(at,st,Hl)}_setPaintValue(at,st,ot){if("color"===this.type){const ut=Do(ot);for(let ot=at;ot<st;ot++)this.paintVertexArray.emplace(ot,ut[0],ut[1])}else{for(let ut=at;ut<st;ut++)this.paintVertexArray.emplace(ut,ot);this.maxValue=Math.max(this.maxValue,Math.abs(ot))}}upload(at){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=at.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ro{constructor(at,st,ot,ut,Hl,rc){this.expression=at,this.uniformNames=st.map((at=>`u_${at}_t`)),this.type=ot,this.useIntegerZoom=ut,this.zoom=Hl,this.maxValue=0,this.paintVertexAttributes=st.map((at=>({name:`a_${at}`,type:"Float32",components:"color"===ot?4:2,offset:0}))),this.paintVertexArray=new rc}populatePaintArray(at,st,ot,ut,Hl){const rc=this.expression.evaluate(new Wi(this.zoom),st,{},ut,[],Hl),sc=this.expression.evaluate(new Wi(this.zoom+1),st,{},ut,[],Hl),oc=this.paintVertexArray.length;this.paintVertexArray.resize(at),this._setPaintValue(oc,at,rc,sc)}updatePaintArray(at,st,ot,ut){const Hl=this.expression.evaluate({zoom:this.zoom},ot,ut),rc=this.expression.evaluate({zoom:this.zoom+1},ot,ut);this._setPaintValue(at,st,Hl,rc)}_setPaintValue(at,st,ot,ut){if("color"===this.type){const Hl=Do(ot),rc=Do(ut);for(let ot=at;ot<st;ot++)this.paintVertexArray.emplace(ot,Hl[0],Hl[1],rc[0],rc[1])}else{for(let Hl=at;Hl<st;Hl++)this.paintVertexArray.emplace(Hl,ot,ut);this.maxValue=Math.max(this.maxValue,Math.abs(ot),Math.abs(ut))}}upload(at){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=at.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(at,st){const ot=this.useIntegerZoom?Math.floor(st.zoom):st.zoom,ut=m(this.expression.interpolationFactor(ot,this.zoom,this.zoom+1),0,1);at.set(ut)}getBinding(at,st,ot){return new Eo(at,st)}}class No{constructor(at,st,ot,ut,Hl,rc){this.expression=at,this.type=st,this.useIntegerZoom=ot,this.zoom=ut,this.layerId=rc,this.zoomInPaintVertexArray=new Hl,this.zoomOutPaintVertexArray=new Hl}populatePaintArray(at,st,ot){const ut=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(at),this.zoomOutPaintVertexArray.resize(at),this._setPaintValues(ut,at,st.patterns&&st.patterns[this.layerId],ot)}updatePaintArray(at,st,ot,ut,Hl){this._setPaintValues(at,st,ot.patterns&&ot.patterns[this.layerId],Hl)}_setPaintValues(at,st,ot,ut){if(!ut||!ot)return;const{min:Hl,mid:rc,max:sc}=ot,oc=ut[Hl],_c=ut[rc],wc=ut[sc];if(oc&&_c&&wc)for(let Sc=at;Sc<st;Sc++)this.zoomInPaintVertexArray.emplace(Sc,_c.tl[0],_c.tl[1],_c.br[0],_c.br[1],oc.tl[0],oc.tl[1],oc.br[0],oc.br[1],_c.pixelRatio,oc.pixelRatio),this.zoomOutPaintVertexArray.emplace(Sc,_c.tl[0],_c.tl[1],_c.br[0],_c.br[1],wc.tl[0],wc.tl[1],wc.br[0],wc.br[1],_c.pixelRatio,wc.pixelRatio)}upload(at){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=at.createVertexBuffer(this.zoomInPaintVertexArray,Dp.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=at.createVertexBuffer(this.zoomOutPaintVertexArray,Dp.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class jo{constructor(at,st,ot){this.binders={},this._buffers=[];const ut=[];for(const Hl in at.paint._values){if(!ot(Hl))continue;const rc=at.paint.get(Hl);if(!(rc instanceof is&&Ur(rc.property.specification)))continue;const sc=qo(Hl,at.type),oc=rc.value,_c=rc.property.specification.type,wc=rc.property.useIntegerZoom,Sc=rc.property.specification["property-type"],iu="cross-faded"===Sc||"cross-faded-data-driven"===Sc;if("constant"===oc.kind)this.binders[Hl]=iu?new $o(oc.value,sc):new Lo(oc.value,sc,_c),ut.push(`/u_${Hl}`);else if("source"===oc.kind||iu){const ot=Go(Hl,_c,"source");this.binders[Hl]=iu?new No(oc,_c,wc,st,ot,at.id):new Oo(oc,sc,_c,ot),ut.push(`/a_${Hl}`)}else{const at=Go(Hl,_c,"composite");this.binders[Hl]=new Ro(oc,sc,_c,wc,st,at),ut.push(`/z_${Hl}`)}}this.cacheKey=ut.sort().join("")}getMaxValue(at){const st=this.binders[at];return st instanceof Oo||st instanceof Ro?st.maxValue:0}populatePaintArrays(at,st,ot,ut,Hl){for(const rc in this.binders){const sc=this.binders[rc];(sc instanceof Oo||sc instanceof Ro||sc instanceof No)&&sc.populatePaintArray(at,st,ot,ut,Hl)}}setConstantPatternPositions(at,st){for(const ot in this.binders){const ut=this.binders[ot];ut instanceof $o&&ut.setConstantPatternPositions(at,st)}}updatePaintArrays(at,st,ot,ut,Hl){let rc=!1;for(const sc in at){const oc=st.getPositions(sc);for(const st of oc){const oc=ot.feature(st.index);for(const ot in this.binders){const _c=this.binders[ot];if((_c instanceof Oo||_c instanceof Ro||_c instanceof No)&&!0===_c.expression.isStateDependent){const wc=ut.paint.get(ot);_c.expression=wc.value,_c.updatePaintArray(st.start,st.end,oc,at[sc],Hl),rc=!0}}}}return rc}defines(){const at=[];for(const st in this.binders){const ot=this.binders[st];(ot instanceof Lo||ot instanceof $o)&&at.push(...ot.uniformNames.map((at=>`#define HAS_UNIFORM_${at}`)))}return at}getBinderAttributes(){const at=[];for(const st in this.binders){const ot=this.binders[st];if(ot instanceof Oo||ot instanceof Ro)for(let st=0;st<ot.paintVertexAttributes.length;st++)at.push(ot.paintVertexAttributes[st].name);else if(ot instanceof No)for(let st=0;st<Dp.members.length;st++)at.push(Dp.members[st].name)}return at}getBinderUniforms(){const at=[];for(const st in this.binders){const ot=this.binders[st];if(ot instanceof Lo||ot instanceof $o||ot instanceof Ro)for(const st of ot.uniformNames)at.push(st)}return at}getPaintVertexBuffers(){return this._buffers}getUniforms(at,st){const ot=[];for(const ut in this.binders){const Hl=this.binders[ut];if(Hl instanceof Lo||Hl instanceof $o||Hl instanceof Ro)for(const rc of Hl.uniformNames)if(st[rc]){const sc=Hl.getBinding(at,st[rc],rc);ot.push({name:rc,property:ut,binding:sc})}}return ot}setUniforms(at,st,ot,ut){for(const{name:Hl,property:rc,binding:sc}of st)this.binders[rc].setUniform(sc,ut,ot.get(rc),Hl)}updatePaintBuffers(at){this._buffers=[];for(const st in this.binders){const ot=this.binders[st];if(at&&ot instanceof No){const st=2===at.fromScale?ot.zoomInPaintVertexBuffer:ot.zoomOutPaintVertexBuffer;st&&this._buffers.push(st)}else(ot instanceof Oo||ot instanceof Ro)&&ot.paintVertexBuffer&&this._buffers.push(ot.paintVertexBuffer)}}upload(at){for(const st in this.binders){const ot=this.binders[st];(ot instanceof Oo||ot instanceof Ro||ot instanceof No)&&ot.upload(at)}this.updatePaintBuffers()}destroy(){for(const at in this.binders){const st=this.binders[at];(st instanceof Oo||st instanceof Ro||st instanceof No)&&st.destroy()}}}class Uo{constructor(at,st,ot){void 0===ot&&(ot=()=>!0),this.programConfigurations={};for(const ut of at)this.programConfigurations[ut.id]=new jo(ut,st,ot);this.needsUpload=!1,this._featureMap=new zo,this._bufferOffset=0}populatePaintArrays(at,st,ot,ut,Hl,rc){for(const sc in this.programConfigurations)this.programConfigurations[sc].populatePaintArrays(at,st,ut,Hl,rc);void 0!==st.id&&this._featureMap.add(st.id,ot,this._bufferOffset,at),this._bufferOffset=at,this.needsUpload=!0}updatePaintArrays(at,st,ot,ut){for(const Hl of ot)this.needsUpload=this.programConfigurations[Hl.id].updatePaintArrays(at,this._featureMap,st,Hl,ut)||this.needsUpload}get(at){return this.programConfigurations[at]}upload(at){if(this.needsUpload){for(const st in this.programConfigurations)this.programConfigurations[st].upload(at);this.needsUpload=!1}}destroy(){for(const at in this.programConfigurations)this.programConfigurations[at].destroy()}}function qo(at,st){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[at]||[at.replace(`${st}-`,"").replace(/-/g,"_")]}function Go(at,st,ot){const ut={color:{source:ks,composite:Ns},number:{source:Ds,composite:ks}},Hl=function(at){return{"line-pattern":{source:oo,composite:oo},"fill-pattern":{source:oo,composite:oo},"fill-extrusion-pattern":{source:oo,composite:oo}}[at]}(at);return Hl&&Hl[ot]||ut[st][ot]}ci("ConstantBinder",Lo),ci("CrossFadedConstantBinder",$o),ci("SourceExpressionBinder",Oo),ci("CrossFadedCompositeBinder",No),ci("CompositeExpressionBinder",Ro),ci("ProgramConfiguration",jo,{omit:["_buffers"]}),ci("ProgramConfigurationSet",Uo);const Gp=Math.pow(2,14)-1,Zp=-Gp-1;function Yo(at){const st=iu/at.extent,ot=at.loadGeometry();for(let ut=0;ut<ot.length;ut++){const at=ot[ut];for(let ot=0;ot<at.length;ot++){const ut=at[ot],Hl=Math.round(ut.x*st),rc=Math.round(ut.y*st);ut.x=m(Hl,Zp,Gp),ut.y=m(rc,Zp,Gp),(Hl<ut.x||Hl>ut.x+1||rc<ut.y||rc>ut.y+1)&&w("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return ot}function Ho(at,st){return{type:at.type,id:at.id,properties:at.properties,geometry:st?Yo(at):[]}}const Hp=-32768;function Wo(at,st,ot,ut,Hl){at.emplaceBack(Hp+8*st+ut,Hp+8*ot+Hl)}class Ko{constructor(at){this.zoom=at.zoom,this.globalState=at.globalState,this.overscaling=at.overscaling,this.layers=at.layers,this.layerIds=this.layers.map((at=>at.id)),this.index=at.index,this.hasPattern=!1,this.layoutVertexArray=new eo,this.indexArray=new po,this.segments=new go,this.programConfigurations=new Uo(at.layers,at.zoom),this.stateDependentLayerIds=this.layers.filter((at=>at.isStateDependent())).map((at=>at.id))}populate(at,st,ot){const ut=this.layers[0],Hl=[];let rc=null,sc=!1,oc="heatmap"===ut.type;if("circle"===ut.type){const at=ut;rc=at.layout.get("circle-sort-key"),sc=!rc.isConstant(),oc=oc||"map"===at.paint.get("circle-pitch-alignment")}const _c=oc?st.subdivisionGranularity.circle:1;for(const{feature:wc,id:Sc,index:iu,sourceLayerIndex:su}of at){const at=this.layers[0]._featureFilter.needGeometry,st=Ho(wc,at);if(!this.layers[0]._featureFilter.filter(new Wi(this.zoom,{globalState:this.globalState}),st,ot))continue;const ut=sc?rc.evaluate(st,{},ot):void 0,oc={id:Sc,properties:wc.properties,type:wc.type,sourceLayerIndex:su,index:iu,geometry:at?st.geometry:Yo(wc),patterns:{},sortKey:ut};Hl.push(oc)}sc&&Hl.sort(((at,st)=>at.sortKey-st.sortKey));for(const wc of Hl){const{geometry:ut,index:Hl,sourceLayerIndex:rc}=wc,sc=at[Hl].feature;this.addFeature(wc,ut,Hl,ot,_c),st.featureIndex.insert(sc,ut,Hl,rc,this.index)}}update(at,st,ot){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(at,st,this.stateDependentLayers,ot)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(at){this.uploaded||(this.layoutVertexBuffer=at.createVertexBuffer(this.layoutVertexArray,Ep),this.indexBuffer=at.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(at),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(at,st,ot,ut,Hl){let rc;switch(void 0===Hl&&(Hl=1),Hl){case 1:rc=[0,7];break;case 3:rc=[0,2,5,7];break;case 5:rc=[0,1,3,4,6,7];break;case 7:rc=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${Hl}; valid values are 1, 3, 5, 7.`)}const sc=rc.length;for(const oc of st)for(const st of oc){const ot=st.x,ut=st.y;if(ot<0||ot>=iu||ut<0||ut>=iu)continue;const Hl=this.segments.prepareSegment(sc*sc,this.layoutVertexArray,this.indexArray,at.sortKey),oc=Hl.vertexLength;for(let at=0;at<sc;at++)for(let st=0;st<sc;st++)Wo(this.layoutVertexArray,ot,ut,rc[st],rc[at]);for(let at=0;at<sc-1;at++)for(let st=0;st<sc-1;st++){const ot=oc+at*sc+st,ut=oc+(at+1)*sc+st;this.indexArray.emplaceBack(ot,ut+1,ot+1),this.indexArray.emplaceBack(ot,ut,ut+1)}Hl.vertexLength+=sc*sc,Hl.primitiveLength+=(sc-1)*(sc-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,at,ot,{},ut)}}function Qo(at,st){for(let ot=0;ot<at.length;ot++)if(la(st,at[ot]))return!0;for(let ot=0;ot<st.length;ot++)if(la(at,st[ot]))return!0;return!!na(at,st)}function ta(at,st,ot){return!!la(at,st)||!!sa(st,at,ot)}function ea(at,st){if(1===at.length)return aa(st,at[0]);for(let ot=0;ot<st.length;ot++){const ut=st[ot];for(let st=0;st<ut.length;st++)if(la(at,ut[st]))return!0}for(let ot=0;ot<at.length;ot++)if(aa(st,at[ot]))return!0;for(let ot=0;ot<st.length;ot++)if(na(at,st[ot]))return!0;return!1}function ra(at,st,ot){if(at.length>1){if(na(at,st))return!0;for(let ut=0;ut<st.length;ut++)if(sa(st[ut],at,ot))return!0}for(let ut=0;ut<at.length;ut++)if(sa(at[ut],st,ot))return!0;return!1}function na(at,st){if(0===at.length||0===st.length)return!1;for(let ot=0;ot<at.length-1;ot++){const ut=at[ot],Hl=at[ot+1];for(let at=0;at<st.length-1;at++)if(ia(ut,Hl,st[at],st[at+1]))return!0}return!1}function ia(at,st,ot,ut){return _(at,ot,ut)!==_(st,ot,ut)&&_(at,st,ot)!==_(at,st,ut)}function sa(at,st,ot){const ut=ot*ot;if(1===st.length)return at.distSqr(st[0])<ut;for(let Hl=1;Hl<st.length;Hl++)if(oa(at,st[Hl-1],st[Hl])<ut)return!0;return!1}function oa(at,st,ot){const ut=st.distSqr(ot);if(0===ut)return at.distSqr(st);const Hl=((at.x-st.x)*(ot.x-st.x)+(at.y-st.y)*(ot.y-st.y))/ut;return at.distSqr(Hl<0?st:Hl>1?ot:ot.sub(st)._mult(Hl)._add(st))}function aa(at,st){let ot,ut,Hl,rc=!1;for(let sc=0;sc<at.length;sc++){ot=at[sc];for(let at=0,sc=ot.length-1;at<ot.length;sc=at++)ut=ot[at],Hl=ot[sc],ut.y>st.y!=Hl.y>st.y&&st.x<(Hl.x-ut.x)*(st.y-ut.y)/(Hl.y-ut.y)+ut.x&&(rc=!rc)}return rc}function la(at,st){let ot=!1;for(let ut=0,Hl=at.length-1;ut<at.length;Hl=ut++){const rc=at[ut],sc=at[Hl];rc.y>st.y!=sc.y>st.y&&st.x<(sc.x-rc.x)*(st.y-rc.y)/(sc.y-rc.y)+rc.x&&(ot=!ot)}return ot}function ua(at,st,ot){const ut=ot[0],Hl=ot[2];if(at.x<ut.x&&st.x<ut.x||at.x>Hl.x&&st.x>Hl.x||at.y<ut.y&&st.y<ut.y||at.y>Hl.y&&st.y>Hl.y)return!1;const rc=_(at,st,ot[0]);return rc!==_(at,st,ot[1])||rc!==_(at,st,ot[2])||rc!==_(at,st,ot[3])}function ca(at,st,ot){const ut=st.paint.get(at).value;return"constant"===ut.kind?ut.value:ot.programConfigurations.get(st.id).getMaxValue(at)}function ha(at){return Math.sqrt(at[0]*at[0]+at[1]*at[1])}function pa(at,st,ot,ut,rc){if(!st[0]&&!st[1])return at;const sc=Hl.convert(st)._mult(rc);"viewport"===ot&&sc._rotate(-ut);const oc=[];for(let Hl=0;Hl<at.length;Hl++)oc.push(at[Hl].sub(sc));return oc}let Wp,qp;ci("CircleBucket",Ko,{omit:["layers"]});var Yp={get paint(){return qp=qp||new hs({"circle-radius":new as(uu.paint_circle["circle-radius"]),"circle-color":new as(uu.paint_circle["circle-color"]),"circle-blur":new as(uu.paint_circle["circle-blur"]),"circle-opacity":new as(uu.paint_circle["circle-opacity"]),"circle-translate":new os(uu.paint_circle["circle-translate"]),"circle-translate-anchor":new os(uu.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new os(uu.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new os(uu.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new as(uu.paint_circle["circle-stroke-width"]),"circle-stroke-color":new as(uu.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new as(uu.paint_circle["circle-stroke-opacity"])})},get layout(){return Wp=Wp||new hs({"circle-sort-key":new as(uu.layout_circle["circle-sort-key"])})}};class ma extends fs{constructor(at){super(at,Yp)}createBucket(at){return new Ko(at)}queryRadius(at){const st=at;return ca("circle-radius",this,st)+ca("circle-stroke-width",this,st)+ha(this.paint.get("circle-translate"))}queryIntersectsFeature(at){let{queryGeometry:st,feature:ot,featureState:ut,geometry:Hl,transform:rc,pixelsToTileUnits:sc,unwrappedTileID:oc,getElevation:_c}=at;const wc=pa(st,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-rc.bearingInRadians,sc),Sc=this.paint.get("circle-radius").evaluate(ot,ut)+this.paint.get("circle-stroke-width").evaluate(ot,ut),iu="map"===this.paint.get("circle-pitch-alignment"),su=iu?wc:function(at,st,ot,ut){return at.map((at=>ga(at,st,ot,ut)))}(wc,rc,oc,_c),lu=iu?Sc*sc:Sc;for(const cu of Hl)for(const at of cu){const st=iu?at:ga(at,rc,oc,_c);let ot=lu;const ut=rc.projectTileCoordinates(at.x,at.y,oc,_c).signedDistanceFromCamera;if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?ot*=ut/rc.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(ot*=rc.cameraToCenterDistance/ut),ta(su,st,ot))return!0}return!1}}function ga(at,st,ot,ut){const rc=st.projectTileCoordinates(at.x,at.y,ot,ut).point;return new Hl((.5*rc.x+.5)*st.width,(.5*-rc.y+.5)*st.height)}class xa extends Ko{}let Qp;ci("HeatmapBucket",xa,{omit:["layers"]});var Kp={get paint(){return Qp=Qp||new hs({"heatmap-radius":new as(uu.paint_heatmap["heatmap-radius"]),"heatmap-weight":new as(uu.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new os(uu.paint_heatmap["heatmap-intensity"]),"heatmap-color":new cs(uu.paint_heatmap["heatmap-color"]),"heatmap-opacity":new os(uu.paint_heatmap["heatmap-opacity"])})}};function wa(at,st,ot,ut){let{width:Hl,height:rc}=st;if(ut){if(ut instanceof Uint8ClampedArray)ut=new Uint8Array(ut.buffer);else if(ut.length!==Hl*rc*ot)throw new RangeError(`mismatched image size. expected: ${ut.length} but got: ${Hl*rc*ot}`)}else ut=new Uint8Array(Hl*rc*ot);return at.width=Hl,at.height=rc,at.data=ut,at}function _a(at,st,ot){let{width:ut,height:Hl}=st;if(ut===at.width&&Hl===at.height)return;const rc=wa({},{width:ut,height:Hl},ot);Sa(at,rc,{x:0,y:0},{x:0,y:0},{width:Math.min(at.width,ut),height:Math.min(at.height,Hl)},ot),at.width=ut,at.height=Hl,at.data=rc.data}function Sa(at,st,ot,ut,Hl,rc){if(0===Hl.width||0===Hl.height)return st;if(Hl.width>at.width||Hl.height>at.height||ot.x>at.width-Hl.width||ot.y>at.height-Hl.height)throw new RangeError("out of range source coordinates for image copy");if(Hl.width>st.width||Hl.height>st.height||ut.x>st.width-Hl.width||ut.y>st.height-Hl.height)throw new RangeError("out of range destination coordinates for image copy");const sc=at.data,oc=st.data;if(sc===oc)throw new Error("srcData equals dstData, so image is already copied");for(let _c=0;_c<Hl.height;_c++){const wc=((ot.y+_c)*at.width+ot.x)*rc,Sc=((ut.y+_c)*st.width+ut.x)*rc;for(let at=0;at<Hl.width*rc;at++)oc[Sc+at]=sc[wc+at]}return st}class ka{constructor(at,st){wa(this,at,1,st)}resize(at){_a(this,at,1)}clone(){return new ka({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(at,st,ot,ut,Hl){Sa(at,st,ot,ut,Hl,1)}}class Aa{constructor(at,st){wa(this,at,4,st)}resize(at){_a(this,at,4)}replace(at,st){st?this.data.set(at):this.data=at instanceof Uint8ClampedArray?new Uint8Array(at.buffer):at}clone(){return new Aa({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(at,st,ot,ut,Hl){Sa(at,st,ot,ut,Hl,4)}setPixel(at,st,ot){const ut=4*(at*this.width+st);this.data[ut+0]=Math.round(255*ot.r/ot.a),this.data[ut+1]=Math.round(255*ot.g/ot.a),this.data[ut+2]=Math.round(255*ot.b/ot.a),this.data[ut+3]=Math.round(255*ot.a)}}ci("AlphaImage",ka),ci("RGBAImage",Aa);const Xp="big-fb";class Ma extends fs{createBucket(at){return new xa(at)}constructor(at){super(at,Kp),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(at){"heatmap-color"===at&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=function(at){const st={},ot=at.resolution||256,ut=at.clips?at.clips.length:1,Hl=at.image||new Aa({width:ot,height:ut});if(Math.log(ot)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${ot}`);const s=(ut,rc,sc)=>{st[at.evaluationKey]=sc;const oc=at.expression.evaluate(st);Hl.setPixel(ut/4/ot,rc/4,oc)};if(at.clips)for(let rc=0,sc=0;rc<ut;++rc,sc+=4*ot)for(let st=0,ut=0;st<ot;st++,ut+=4){const Hl=st/(ot-1),{start:oc,end:_c}=at.clips[rc];s(sc,ut,oc*(1-Hl)+_c*Hl)}else for(let rc=0,sc=0;rc<ot;rc++,sc+=4)s(0,sc,rc/(ot-1));return Hl}({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(Xp)&&this.heatmapFbos.delete(Xp)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}let Jp;var $p={get paint(){return Jp=Jp||new hs({"hillshade-illumination-direction":new os(uu.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new os(uu.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new os(uu.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new os(uu.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new os(uu.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new os(uu.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new os(uu.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new os(uu.paint_hillshade["hillshade-method"])})}};class Ta extends fs{constructor(at){super(at,$p),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let at=this.paint.get("hillshade-illumination-direction").values,st=this.paint.get("hillshade-illumination-altitude").values,ot=this.paint.get("hillshade-highlight-color").values,ut=this.paint.get("hillshade-shadow-color").values;const Hl=Math.max(at.length,st.length,ot.length,ut.length);at=at.concat(Array(Hl-at.length).fill(at.at(-1))),st=st.concat(Array(Hl-st.length).fill(st.at(-1))),ot=ot.concat(Array(Hl-ot.length).fill(ot.at(-1))),ut=ut.concat(Array(Hl-ut.length).fill(ut.at(-1)));const rc=st.map(z);return{directionRadians:at.map(z),altitudeRadians:rc,shadowColor:ut,highlightColor:ot}}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}let em;var tm={get paint(){return em=em||new hs({"color-relief-opacity":new os(uu["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new cs(uu["paint_color-relief"]["color-relief-color"])})}};class Ea{constructor(at,st,ot,ut){this.context=at,this.format=ot,this.texture=at.gl.createTexture(),this.update(st,ut)}update(at,st,ot){const{width:ut,height:Hl}=at,rc=!(this.size&&this.size[0]===ut&&this.size[1]===Hl||ot),{context:sc}=this,{gl:oc}=sc;if(this.useMipmap=Boolean(st&&st.useMipmap),oc.bindTexture(oc.TEXTURE_2D,this.texture),sc.pixelStoreUnpackFlipY.set(!1),sc.pixelStoreUnpack.set(1),sc.pixelStoreUnpackPremultiplyAlpha.set(this.format===oc.RGBA&&(!st||!1!==st.premultiply)),rc)this.size=[ut,Hl],at instanceof HTMLImageElement||at instanceof HTMLCanvasElement||at instanceof HTMLVideoElement||at instanceof ImageData||k(at)?oc.texImage2D(oc.TEXTURE_2D,0,this.format,this.format,oc.UNSIGNED_BYTE,at):oc.texImage2D(oc.TEXTURE_2D,0,this.format,ut,Hl,0,this.format,oc.UNSIGNED_BYTE,at.data);else{const{x:st,y:rc}=ot||{x:0,y:0};at instanceof HTMLImageElement||at instanceof HTMLCanvasElement||at instanceof HTMLVideoElement||at instanceof ImageData||k(at)?oc.texSubImage2D(oc.TEXTURE_2D,0,st,rc,oc.RGBA,oc.UNSIGNED_BYTE,at):oc.texSubImage2D(oc.TEXTURE_2D,0,st,rc,ut,Hl,oc.RGBA,oc.UNSIGNED_BYTE,at.data)}this.useMipmap&&this.isSizePowerOfTwo()&&oc.generateMipmap(oc.TEXTURE_2D),sc.pixelStoreUnpackFlipY.setDefault(),sc.pixelStoreUnpack.setDefault(),sc.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(at,st,ot){const{context:ut}=this,{gl:Hl}=ut;Hl.bindTexture(Hl.TEXTURE_2D,this.texture),ot!==Hl.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(ot=Hl.LINEAR),at!==this.filter&&(Hl.texParameteri(Hl.TEXTURE_2D,Hl.TEXTURE_MAG_FILTER,at),Hl.texParameteri(Hl.TEXTURE_2D,Hl.TEXTURE_MIN_FILTER,ot||at),this.filter=at),st!==this.wrap&&(Hl.texParameteri(Hl.TEXTURE_2D,Hl.TEXTURE_WRAP_S,st),Hl.texParameteri(Hl.TEXTURE_2D,Hl.TEXTURE_WRAP_T,st),this.wrap=st)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:at}=this.context;at.deleteTexture(this.texture),this.texture=null}}class Va{constructor(at,st,ot,ut,Hl,rc,sc){if(void 0===ut&&(ut=1),void 0===Hl&&(Hl=1),void 0===rc&&(rc=1),void 0===sc&&(sc=0),this.uid=at,st.height!==st.width)throw new RangeError("DEM tiles must be square");if(ot&&!["mapbox","terrarium","custom"].includes(ot))return void w(`"${ot}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=st.height;const oc=this.dim=st.height-2;switch(this.data=new Uint32Array(st.data.buffer),ot){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=ut,this.greenFactor=Hl,this.blueFactor=rc,this.baseShift=sc;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let _c=0;_c<oc;_c++)this.data[this._idx(-1,_c)]=this.data[this._idx(0,_c)],this.data[this._idx(oc,_c)]=this.data[this._idx(oc-1,_c)],this.data[this._idx(_c,-1)]=this.data[this._idx(_c,0)],this.data[this._idx(_c,oc)]=this.data[this._idx(_c,oc-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(oc,-1)]=this.data[this._idx(oc-1,0)],this.data[this._idx(-1,oc)]=this.data[this._idx(0,oc-1)],this.data[this._idx(oc,oc)]=this.data[this._idx(oc-1,oc-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let _c=0;_c<oc;_c++)for(let at=0;at<oc;at++){const st=this.get(_c,at);st>this.max&&(this.max=st),st<this.min&&(this.min=st)}}get(at,st){const ot=new Uint8Array(this.data.buffer),ut=4*this._idx(at,st);return this.unpack(ot[ut],ot[ut+1],ot[ut+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(at,st){if(at<-1||at>=this.dim+1||st<-1||st>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(st+1)*this.stride+(at+1)}unpack(at,st,ot){return at*this.redFactor+st*this.greenFactor+ot*this.blueFactor-this.baseShift}pack(at){return Fa(at,this.getUnpackVector())}getPixels(){return new Aa({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(at,st,ot){if(this.dim!==at.dim)throw new Error("dem dimension mismatch");let ut=st*this.dim,Hl=st*this.dim+this.dim,rc=ot*this.dim,sc=ot*this.dim+this.dim;switch(st){case-1:ut=Hl-1;break;case 1:Hl=ut+1}switch(ot){case-1:rc=sc-1;break;case 1:sc=rc+1}const oc=-st*this.dim,_c=-ot*this.dim;for(let wc=rc;wc<sc;wc++)for(let st=ut;st<Hl;st++)this.data[this._idx(st,wc)]=at.data[this._idx(st+oc,wc+_c)]}}function Fa(at,st){const ot=st[0],ut=st[1],Hl=st[2],rc=st[3],sc=Math.min(ot,ut,Hl),oc=Math.round((at+rc)/sc);return{r:Math.floor(oc*sc/ot)%256,g:Math.floor(oc*sc/ut)%256,b:Math.floor(oc*sc/Hl)%256}}ci("DEMData",Va);class Da extends fs{constructor(at){super(at,tm)}_createColorRamp(at){const st={elevationStops:[],colorStops:[]},ot=this._transitionablePaint._values["color-relief-color"].value.expression;if(ot instanceof sn&&ot._styleExpression.expression instanceof de){this.colorRampExpression=ot;const at=ot._styleExpression.expression;st.elevationStops=at.labels,st.colorStops=[];for(const ot of st.elevationStops)st.colorStops.push(at.evaluate({globals:{elevation:ot}}))}if(st.elevationStops.length<1&&(st.elevationStops=[0],st.colorStops=[zt.transparent]),st.elevationStops.length<2&&(st.elevationStops.push(st.elevationStops[0]+1),st.colorStops.push(st.colorStops[0])),st.elevationStops.length<=at)return st;const ut={elevationStops:[],colorStops:[]},Hl=(st.elevationStops.length-1)/(at-1);for(let rc=0;rc<st.elevationStops.length-.5;rc+=Hl)ut.elevationStops.push(st.elevationStops[Math.round(rc)]),ut.colorStops.push(st.colorStops[Math.round(rc)]);return w(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),ut}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(at,st,ot){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const ut=this._createColorRamp(st),Hl=new Aa({width:ut.colorStops.length,height:1}),rc=new Aa({width:ut.colorStops.length,height:1});for(let sc=0;sc<ut.elevationStops.length;sc++){const at=Fa(ut.elevationStops[sc],ot);rc.setPixel(0,sc,new zt(at.r/255,at.g/255,at.b/255,1)),Hl.setPixel(0,sc,ut.colorStops[sc])}return this.colorRampTextures={elevationTexture:new Ea(at,rc,at.gl.RGBA),colorTexture:new Ea(at,Hl,at.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return"none"!==this.visibility&&!!this.colorRampTextures}}const im=gs([{name:"a_pos",components:2,type:"Int16"}],4),{members:nm}=im;function Oa(at,st,ot){const ut=ot.patternDependencies;let Hl=!1;for(const rc of st){const st=rc.paint.get(`${at}-pattern`);st.isConstant()||(Hl=!0);const ot=st.constantOr(null);ot&&(Hl=!0,ut[ot.to]=!0,ut[ot.from]=!0)}return Hl}function Ra(at,st,ot,ut,Hl){const rc=Hl.patternDependencies;for(const sc of st){const st=sc.paint.get(`${at}-pattern`).value;if("constant"!==st.kind){let at=st.evaluate({zoom:ut-1},ot,{},Hl.availableImages),oc=st.evaluate({zoom:ut},ot,{},Hl.availableImages),_c=st.evaluate({zoom:ut+1},ot,{},Hl.availableImages);at=at&&at.name?at.name:at,oc=oc&&oc.name?oc.name:oc,_c=_c&&_c.name?_c.name:_c,rc[at]=!0,rc[oc]=!0,rc[_c]=!0,ot.patterns[sc.id]={min:at,mid:oc,max:_c}}}return ot}function Na(at,st,ot,ut,Hl){let rc;if(Hl===function(at,st,ot,ut){let Hl=0;for(let rc=st,sc=ot-ut;rc<ot;rc+=ut)Hl+=(at[sc]-at[rc])*(at[rc+1]+at[sc+1]),sc=rc;return Hl}(at,st,ot,ut)>0)for(let sc=st;sc<ot;sc+=ut)rc=ul(sc/ut|0,at[sc],at[sc+1],rc);else for(let sc=ot-ut;sc>=st;sc-=ut)rc=ul(sc/ut|0,at[sc],at[sc+1],rc);return rc&&nl(rc,rc.next)&&(cl(rc),rc=rc.next),rc}function ja(at,st){if(!at)return at;st||(st=at);let ot,ut=at;do{if(ot=!1,ut.steiner||!nl(ut,ut.next)&&0!==rl(ut.prev,ut,ut.next))ut=ut.next;else{if(cl(ut),ut=st=ut.prev,ut===ut.next)break;ot=!0}}while(ot||ut!==st);return st}function Ua(at,st,ot,ut,Hl,rc,sc){if(!at)return;!sc&&rc&&function(at,st,ot,ut){let Hl=at;do{0===Hl.z&&(Hl.z=Wa(Hl.x,Hl.y,st,ot,ut)),Hl.prevZ=Hl.prev,Hl.nextZ=Hl.next,Hl=Hl.next}while(Hl!==at);Hl.prevZ.nextZ=null,Hl.prevZ=null,function(at){let st,ot=1;do{let ut,Hl=at;at=null;let rc=null;for(st=0;Hl;){st++;let sc=Hl,oc=0;for(let at=0;at<ot&&(oc++,sc=sc.nextZ,sc);at++);let _c=ot;for(;oc>0||_c>0&&sc;)0!==oc&&(0===_c||!sc||Hl.z<=sc.z)?(ut=Hl,Hl=Hl.nextZ,oc--):(ut=sc,sc=sc.nextZ,_c--),rc?rc.nextZ=ut:at=ut,ut.prevZ=rc,rc=ut;Hl=sc}rc.nextZ=null,ot*=2}while(st>1)}(Hl)}(at,ut,Hl,rc);let oc=at;for(;at.prev!==at.next;){const _c=at.prev,wc=at.next;if(rc?Ga(at,ut,Hl,rc):qa(at))st.push(_c.i,at.i,wc.i),cl(at),at=wc.next,oc=wc.next;else if((at=wc)===oc){sc?1===sc?Ua(at=Xa(ja(at),st),st,ot,ut,Hl,rc,2):2===sc&&Za(at,st,ot,ut,Hl,rc):Ua(ja(at),st,ot,ut,Hl,rc,1);break}}}function qa(at){const st=at.prev,ot=at,ut=at.next;if(rl(st,ot,ut)>=0)return!1;const Hl=st.x,rc=ot.x,sc=ut.x,oc=st.y,_c=ot.y,wc=ut.y,Sc=Math.min(Hl,rc,sc),iu=Math.min(oc,_c,wc),su=Math.max(Hl,rc,sc),lu=Math.max(oc,_c,wc);let cu=ut.next;for(;cu!==st;){if(cu.x>=Sc&&cu.x<=su&&cu.y>=iu&&cu.y<=lu&&tl(Hl,oc,rc,_c,sc,wc,cu.x,cu.y)&&rl(cu.prev,cu,cu.next)>=0)return!1;cu=cu.next}return!0}function Ga(at,st,ot,ut){const Hl=at.prev,rc=at,sc=at.next;if(rl(Hl,rc,sc)>=0)return!1;const oc=Hl.x,_c=rc.x,wc=sc.x,Sc=Hl.y,iu=rc.y,su=sc.y,lu=Math.min(oc,_c,wc),cu=Math.min(Sc,iu,su),uu=Math.max(oc,_c,wc),pu=Math.max(Sc,iu,su),mu=Wa(lu,cu,st,ot,ut),gu=Wa(uu,pu,st,ot,ut);let Au=at.prevZ,yu=at.nextZ;for(;Au&&Au.z>=mu&&yu&&yu.z<=gu;){if(Au.x>=lu&&Au.x<=uu&&Au.y>=cu&&Au.y<=pu&&Au!==Hl&&Au!==sc&&tl(oc,Sc,_c,iu,wc,su,Au.x,Au.y)&&rl(Au.prev,Au,Au.next)>=0)return!1;if(Au=Au.prevZ,yu.x>=lu&&yu.x<=uu&&yu.y>=cu&&yu.y<=pu&&yu!==Hl&&yu!==sc&&tl(oc,Sc,_c,iu,wc,su,yu.x,yu.y)&&rl(yu.prev,yu,yu.next)>=0)return!1;yu=yu.nextZ}for(;Au&&Au.z>=mu;){if(Au.x>=lu&&Au.x<=uu&&Au.y>=cu&&Au.y<=pu&&Au!==Hl&&Au!==sc&&tl(oc,Sc,_c,iu,wc,su,Au.x,Au.y)&&rl(Au.prev,Au,Au.next)>=0)return!1;Au=Au.prevZ}for(;yu&&yu.z<=gu;){if(yu.x>=lu&&yu.x<=uu&&yu.y>=cu&&yu.y<=pu&&yu!==Hl&&yu!==sc&&tl(oc,Sc,_c,iu,wc,su,yu.x,yu.y)&&rl(yu.prev,yu,yu.next)>=0)return!1;yu=yu.nextZ}return!0}function Xa(at,st){let ot=at;do{const ut=ot.prev,Hl=ot.next.next;!nl(ut,Hl)&&il(ut,ot,ot.next,Hl)&&al(ut,Hl)&&al(Hl,ut)&&(st.push(ut.i,ot.i,Hl.i),cl(ot),cl(ot.next),ot=at=Hl),ot=ot.next}while(ot!==at);return ja(ot)}function Za(at,st,ot,ut,Hl,rc){let sc=at;do{let at=sc.next.next;for(;at!==sc.prev;){if(sc.i!==at.i&&el(sc,at)){let oc=ll(sc,at);return sc=ja(sc,sc.next),oc=ja(oc,oc.next),Ua(sc,st,ot,ut,Hl,rc,0),void Ua(oc,st,ot,ut,Hl,rc,0)}at=at.next}sc=sc.next}while(sc!==at)}function Ya(at,st){let ot=at.x-st.x;return 0===ot&&(ot=at.y-st.y,0===ot)&&(ot=(at.next.y-at.y)/(at.next.x-at.x)-(st.next.y-st.y)/(st.next.x-st.x)),ot}function Ha(at,st){const ot=function(at,st){let ot=st;const ut=at.x,Hl=at.y;let rc,sc=-1/0;if(nl(at,ot))return ot;do{if(nl(at,ot.next))return ot.next;if(Hl<=ot.y&&Hl>=ot.next.y&&ot.next.y!==ot.y){const at=ot.x+(Hl-ot.y)*(ot.next.x-ot.x)/(ot.next.y-ot.y);if(at<=ut&&at>sc&&(sc=at,rc=ot.x<ot.next.x?ot:ot.next,at===ut))return rc}ot=ot.next}while(ot!==st);if(!rc)return null;const oc=rc,_c=rc.x,wc=rc.y;let Sc=1/0;ot=rc;do{if(ut>=ot.x&&ot.x>=_c&&ut!==ot.x&&Qa(Hl<wc?ut:sc,Hl,_c,wc,Hl<wc?sc:ut,Hl,ot.x,ot.y)){const st=Math.abs(Hl-ot.y)/(ut-ot.x);al(ot,at)&&(st<Sc||st===Sc&&(ot.x>rc.x||ot.x===rc.x&&Ja(rc,ot)))&&(rc=ot,Sc=st)}ot=ot.next}while(ot!==oc);return rc}(at,st);if(!ot)return st;const ut=ll(ot,at);return ja(ut,ut.next),ja(ot,ot.next)}function Ja(at,st){return rl(at.prev,at,st.prev)<0&&rl(st.next,at,at.next)<0}function Wa(at,st,ot,ut,Hl){return(at=1431655765&((at=858993459&((at=252645135&((at=16711935&((at=(at-ot)*Hl|0)|at<<8))|at<<4))|at<<2))|at<<1))|(st=1431655765&((st=858993459&((st=252645135&((st=16711935&((st=(st-ut)*Hl|0)|st<<8))|st<<4))|st<<2))|st<<1))<<1}function Ka(at){let st=at,ot=at;do{(st.x<ot.x||st.x===ot.x&&st.y<ot.y)&&(ot=st),st=st.next}while(st!==at);return ot}function Qa(at,st,ot,ut,Hl,rc,sc,oc){return(Hl-sc)*(st-oc)>=(at-sc)*(rc-oc)&&(at-sc)*(ut-oc)>=(ot-sc)*(st-oc)&&(ot-sc)*(rc-oc)>=(Hl-sc)*(ut-oc)}function tl(at,st,ot,ut,Hl,rc,sc,oc){return!(at===sc&&st===oc)&&Qa(at,st,ot,ut,Hl,rc,sc,oc)}function el(at,st){return at.next.i!==st.i&&at.prev.i!==st.i&&!function(at,st){let ot=at;do{if(ot.i!==at.i&&ot.next.i!==at.i&&ot.i!==st.i&&ot.next.i!==st.i&&il(ot,ot.next,at,st))return!0;ot=ot.next}while(ot!==at);return!1}(at,st)&&(al(at,st)&&al(st,at)&&function(at,st){let ot=at,ut=!1;const Hl=(at.x+st.x)/2,rc=(at.y+st.y)/2;do{ot.y>rc!=ot.next.y>rc&&ot.next.y!==ot.y&&Hl<(ot.next.x-ot.x)*(rc-ot.y)/(ot.next.y-ot.y)+ot.x&&(ut=!ut),ot=ot.next}while(ot!==at);return ut}(at,st)&&(rl(at.prev,at,st.prev)||rl(at,st.prev,st))||nl(at,st)&&rl(at.prev,at,at.next)>0&&rl(st.prev,st,st.next)>0)}function rl(at,st,ot){return(st.y-at.y)*(ot.x-st.x)-(st.x-at.x)*(ot.y-st.y)}function nl(at,st){return at.x===st.x&&at.y===st.y}function il(at,st,ot,ut){const Hl=ol(rl(at,st,ot)),rc=ol(rl(at,st,ut)),sc=ol(rl(ot,ut,at)),oc=ol(rl(ot,ut,st));return Hl!==rc&&sc!==oc||!(0!==Hl||!sl(at,ot,st))||!(0!==rc||!sl(at,ut,st))||!(0!==sc||!sl(ot,at,ut))||!(0!==oc||!sl(ot,st,ut))}function sl(at,st,ot){return st.x<=Math.max(at.x,ot.x)&&st.x>=Math.min(at.x,ot.x)&&st.y<=Math.max(at.y,ot.y)&&st.y>=Math.min(at.y,ot.y)}function ol(at){return at>0?1:at<0?-1:0}function al(at,st){return rl(at.prev,at,at.next)<0?rl(at,st,at.next)>=0&&rl(at,at.prev,st)>=0:rl(at,st,at.prev)<0||rl(at,at.next,st)<0}function ll(at,st){const ot=hl(at.i,at.x,at.y),ut=hl(st.i,st.x,st.y),Hl=at.next,rc=st.prev;return at.next=st,st.prev=at,ot.next=Hl,Hl.prev=ot,ut.next=ot,ot.prev=ut,rc.next=ut,ut.prev=rc,ut}function ul(at,st,ot,ut){const Hl=hl(at,st,ot);return ut?(Hl.next=ut.next,Hl.prev=ut,ut.next.prev=Hl,ut.next=Hl):(Hl.prev=Hl,Hl.next=Hl),Hl}function cl(at){at.next.prev=at.prev,at.prev.next=at.next,at.prevZ&&(at.prevZ.nextZ=at.nextZ),at.nextZ&&(at.nextZ.prevZ=at.prevZ)}function hl(at,st,ot){return{i:at,x:st,y:ot,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class pl{constructor(at,st){if(st>at)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=at,this._minGranularity=st}getGranularityForZoomLevel(at){return Math.max(Math.floor(this._baseZoomGranularity/(1<<at)),this._minGranularity,1)}}class fl{constructor(at){this.fill=at.fill,this.line=at.line,this.tile=at.tile,this.stencil=at.stencil,this.circle=at.circle}}fl.noSubdivision=new fl({fill:new pl(0,0),line:new pl(0,0),tile:new pl(0,0),stencil:new pl(0,0),circle:1}),ci("SubdivisionGranularityExpression",pl),ci("SubdivisionGranularitySetting",fl);const rm=-32768,am=32767;class ml{constructor(at,st){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=at,this._granularityCellSize=iu/at,this._canonical=st}_getKey(at,st){return(at+=32768)<<16|st+32768}_vertexToIndex(at,st){if(at<-32768||st<-32768||at>32767||st>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const ot=0|Math.round(at),ut=0|Math.round(st),Hl=this._getKey(ot,ut);if(this._vertexDictionary.has(Hl))return this._vertexDictionary.get(Hl);const rc=this._vertexBuffer.length/2;return this._vertexDictionary.set(Hl,rc),this._vertexBuffer.push(ot,ut),rc}_subdivideTrianglesScanline(at){if(this._granularity<2)return function(at,st){const ot=[];for(let ut=0;ut<st.length;ut+=3){const Hl=st[ut],rc=st[ut+1],sc=st[ut+2],oc=at[2*Hl],_c=at[2*Hl+1];(at[2*rc]-oc)*(at[2*sc+1]-_c)-(at[2*rc+1]-_c)*(at[2*sc]-oc)>0?(ot.push(Hl),ot.push(sc),ot.push(rc)):(ot.push(Hl),ot.push(rc),ot.push(sc))}return ot}(this._vertexBuffer,at);const st=[],ot=at.length;for(let ut=0;ut<ot;ut+=3){const ot=[at[ut+0],at[ut+1],at[ut+2]],Hl=[this._vertexBuffer[2*at[ut+0]+0],this._vertexBuffer[2*at[ut+0]+1],this._vertexBuffer[2*at[ut+1]+0],this._vertexBuffer[2*at[ut+1]+1],this._vertexBuffer[2*at[ut+2]+0],this._vertexBuffer[2*at[ut+2]+1]];let rc=1/0,sc=1/0,oc=-1/0,_c=-1/0;for(let at=0;at<3;at++){const st=Hl[2*at],ot=Hl[2*at+1];rc=Math.min(rc,st),oc=Math.max(oc,st),sc=Math.min(sc,ot),_c=Math.max(_c,ot)}if(rc===oc||sc===_c)continue;const wc=Math.floor(rc/this._granularityCellSize),Sc=Math.ceil(oc/this._granularityCellSize),iu=Math.floor(sc/this._granularityCellSize),su=Math.ceil(_c/this._granularityCellSize);if(wc!==Sc||iu!==su)for(let at=iu;at<su;at++){const ut=this._scanlineGenerateVertexRingForCellRow(at,Hl,ot);vl(this._vertexBuffer,ut,st)}else st.push(...ot)}return st}_scanlineGenerateVertexRingForCellRow(at,st,ot){const ut=at*this._granularityCellSize,Hl=ut+this._granularityCellSize,rc=[];for(let sc=0;sc<3;sc++){const at=st[2*sc],oc=st[2*sc+1],_c=st[2*(sc+1)%6],wc=st[(2*(sc+1)+1)%6],Sc=st[2*(sc+2)%6],iu=st[(2*(sc+2)+1)%6],su=_c-at,lu=wc-oc,cu=0===su,uu=0===lu,pu=(ut-oc)/lu,mu=(Hl-oc)/lu,gu=Math.min(pu,mu),Au=Math.max(pu,mu);if(!uu&&(gu>=1||Au<=0)||uu&&(oc<ut||oc>Hl)){wc>=ut&&wc<=Hl&&rc.push(ot[(sc+1)%3]);continue}!uu&&gu>0&&rc.push(this._vertexToIndex(at+su*gu,oc+lu*gu));const yu=at+su*Math.max(gu,0),_u=at+su*Math.min(Au,1);cu||this._generateIntraEdgeVertices(rc,at,oc,_c,wc,yu,_u),!uu&&Au<1&&rc.push(this._vertexToIndex(at+su*Au,oc+lu*Au)),(uu||wc>=ut&&wc<=Hl)&&rc.push(ot[(sc+1)%3]),!uu&&(wc<=ut||wc>=Hl)&&this._generateInterEdgeVertices(rc,at,oc,_c,wc,Sc,iu,_u,ut,Hl)}return rc}_generateIntraEdgeVertices(at,st,ot,ut,Hl,rc,sc){const oc=ut-st,_c=Hl-ot,wc=0===_c,Sc=wc?Math.min(st,ut):Math.min(rc,sc),iu=wc?Math.max(st,ut):Math.max(rc,sc),su=Math.floor(Sc/this._granularityCellSize)+1,lu=Math.ceil(iu/this._granularityCellSize)-1;if(wc?st<ut:rc<sc)for(let cu=su;cu<=lu;cu++){const ut=cu*this._granularityCellSize;at.push(this._vertexToIndex(ut,ot+_c*(ut-st)/oc))}else for(let cu=lu;cu>=su;cu--){const ut=cu*this._granularityCellSize;at.push(this._vertexToIndex(ut,ot+_c*(ut-st)/oc))}}_generateInterEdgeVertices(at,st,ot,ut,Hl,rc,sc,oc,_c,wc){const Sc=Hl-ot,iu=rc-ut,su=sc-Hl,lu=(_c-Hl)/su,cu=(wc-Hl)/su,uu=Math.min(lu,cu),pu=Math.max(lu,cu),mu=ut+iu*uu;let gu=Math.floor(Math.min(mu,oc)/this._granularityCellSize)+1,Au=Math.ceil(Math.max(mu,oc)/this._granularityCellSize)-1,yu=oc<mu;const _u=0===su;if(_u&&(sc===_c||sc===wc))return;if(_u||uu>=1||pu<=0){const at=ot-sc,ut=rc+(st-rc)*Math.min((_c-sc)/at,(wc-sc)/at);gu=Math.floor(Math.min(ut,oc)/this._granularityCellSize)+1,Au=Math.ceil(Math.max(ut,oc)/this._granularityCellSize)-1,yu=oc<ut}const xu=Sc>0?wc:_c;if(yu)for(let Su=gu;Su<=Au;Su++)at.push(this._vertexToIndex(Su*this._granularityCellSize,xu));else for(let Su=Au;Su>=gu;Su--)at.push(this._vertexToIndex(Su*this._granularityCellSize,xu))}_generateOutline(at){const st=[];for(const ot of at){const at=xl(ot,this._granularity,!0),ut=this._pointArrayToIndices(at),Hl=[];for(let st=1;st<ut.length;st++)Hl.push(ut[st-1]),Hl.push(ut[st]);st.push(Hl)}return st}_handlePoles(at){let st=!1,ot=!1;this._canonical&&(0===this._canonical.y&&(st=!0),this._canonical.y===(1<<this._canonical.z)-1&&(ot=!0)),(st||ot)&&this._fillPoles(at,st,ot)}_ensureNoPoleVertices(){const at=this._vertexBuffer;for(let st=0;st<at.length;st+=2){const ot=at[st+1];ot===rm&&(at[st+1]=-32767),ot===am&&(at[st+1]=32766)}}_generatePoleQuad(at,st,ot,ut,Hl,rc){ut>Hl!=(rc===rm)?(at.push(st),at.push(ot),at.push(this._vertexToIndex(ut,rc)),at.push(ot),at.push(this._vertexToIndex(Hl,rc)),at.push(this._vertexToIndex(ut,rc))):(at.push(ot),at.push(st),at.push(this._vertexToIndex(ut,rc)),at.push(this._vertexToIndex(Hl,rc)),at.push(ot),at.push(this._vertexToIndex(ut,rc)))}_fillPoles(at,st,ot){const ut=this._vertexBuffer,Hl=iu,rc=at.length;for(let sc=2;sc<rc;sc+=3){const rc=at[sc-2],oc=at[sc-1],_c=at[sc],wc=ut[2*rc],Sc=ut[2*rc+1],iu=ut[2*oc],su=ut[2*oc+1],lu=ut[2*_c],cu=ut[2*_c+1];st&&(0===Sc&&0===su&&this._generatePoleQuad(at,rc,oc,wc,iu,rm),0===su&&0===cu&&this._generatePoleQuad(at,oc,_c,iu,lu,rm),0===cu&&0===Sc&&this._generatePoleQuad(at,_c,rc,lu,wc,rm)),ot&&(Sc===Hl&&su===Hl&&this._generatePoleQuad(at,rc,oc,wc,iu,am),su===Hl&&cu===Hl&&this._generatePoleQuad(at,oc,_c,iu,lu,am),cu===Hl&&Sc===Hl&&this._generatePoleQuad(at,_c,rc,lu,wc,am))}}_initializeVertices(at){for(let st=0;st<at.length;st+=2)this._vertexToIndex(at[st],at[st+1])}subdividePolygonInternal(at,st){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:ot,holeIndices:ut}=function(at){const st=[],ot=[];for(const ut of at)if(0!==ut.length){ut!==at[0]&&st.push(ot.length/2);for(let at=0;at<ut.length;at++)ot.push(ut[at].x),ot.push(ut[at].y)}return{flattened:ot,holeIndices:st}}(at);let Hl;this._initializeVertices(ot);try{const at=function(at,st,ot){void 0===ot&&(ot=2);const ut=st&&st.length,Hl=ut?st[0]*ot:at.length;let rc=Na(at,0,Hl,ot,!0);const sc=[];if(!rc||rc.next===rc.prev)return sc;let oc,_c,wc;if(ut&&(rc=function(at,st,ot,ut){const Hl=[];for(let rc=0,sc=st.length;rc<sc;rc++){const ot=Na(at,st[rc]*ut,rc<sc-1?st[rc+1]*ut:at.length,ut,!1);ot===ot.next&&(ot.steiner=!0),Hl.push(Ka(ot))}Hl.sort(Ya);for(let rc=0;rc<Hl.length;rc++)ot=Ha(Hl[rc],ot);return ot}(at,st,rc,ot)),at.length>80*ot){oc=1/0,_c=1/0;let st=-1/0,ut=-1/0;for(let rc=ot;rc<Hl;rc+=ot){const ot=at[rc],Hl=at[rc+1];ot<oc&&(oc=ot),Hl<_c&&(_c=Hl),ot>st&&(st=ot),Hl>ut&&(ut=Hl)}wc=Math.max(st-oc,ut-_c),wc=0!==wc?32767/wc:0}return Ua(rc,sc,ot,oc,_c,wc,0),sc}(ot,ut),st=this._convertIndices(ot,at);Hl=this._subdivideTrianglesScanline(st)}catch(at){console.error(at)}let rc=[];return st&&(rc=this._generateOutline(at)),this._ensureNoPoleVertices(),this._handlePoles(Hl),{verticesFlattened:this._vertexBuffer,indicesTriangles:Hl,indicesLineList:rc}}_convertIndices(at,st){const ot=[];for(let ut=0;ut<st.length;ut++)ot.push(this._vertexToIndex(at[2*st[ut]],at[2*st[ut]+1]));return ot}_pointArrayToIndices(at){const st=[];for(let ot=0;ot<at.length;ot++){const ut=at[ot];st.push(this._vertexToIndex(ut.x,ut.y))}return st}}function gl(at,st,ot,ut){return void 0===ut&&(ut=!0),new ml(ot,st).subdividePolygonInternal(at,ut)}function xl(at,st,ot){if(void 0===ot&&(ot=!1),!at||at.length<1)return[];if(at.length<2)return[];const ut=at[0],rc=at[at.length-1],sc=ot&&(ut.x!==rc.x||ut.y!==rc.y);if(st<2)return sc?[...at,at[0]]:[...at];const oc=Math.floor(iu/st),_c=[];_c.push(new Hl(at[0].x,at[0].y));const wc=at.length,Sc=sc?wc:wc-1;for(let iu=0;iu<Sc;iu++){const st=at[iu],ot=iu<wc-1?at[iu+1]:at[0],ut=st.x,rc=st.y,sc=ot.x,Sc=ot.y,su=ut!==sc,lu=rc!==Sc;if(!su&&!lu)continue;const cu=sc-ut,uu=Sc-rc,pu=Math.abs(cu),mu=Math.abs(uu);let gu=ut,Au=rc;for(;;){const at=cu>0?(Math.floor(gu/oc)+1)*oc:(Math.ceil(gu/oc)-1)*oc,st=uu>0?(Math.floor(Au/oc)+1)*oc:(Math.ceil(Au/oc)-1)*oc,ot=Math.abs(gu-at),ut=Math.abs(Au-st),rc=Math.abs(gu-sc),wc=Math.abs(Au-Sc),iu=su?ot/pu:Number.POSITIVE_INFINITY,yu=lu?ut/mu:Number.POSITIVE_INFINITY;if((rc<=ot||!su)&&(wc<=ut||!lu))break;if(iu<yu&&su||!lu){gu=at,Au+=uu*iu;const st=new Hl(gu,Math.round(Au));_c[_c.length-1].x===st.x&&_c[_c.length-1].y===st.y||_c.push(st)}else{gu+=cu*yu,Au=st;const at=new Hl(Math.round(gu),Au);_c[_c.length-1].x===at.x&&_c[_c.length-1].y===at.y||_c.push(at)}}const yu=new Hl(sc,Sc);_c[_c.length-1].x===yu.x&&_c[_c.length-1].y===yu.y||_c.push(yu)}return _c}function vl(at,st,ot){if(0===st.length)throw new Error("Subdivision vertex ring is empty.");let ut=0,Hl=at[2*st[0]];for(let _c=1;_c<st.length;_c++){const ot=at[2*st[_c]];ot<Hl&&(Hl=ot,ut=_c)}const rc=st.length;let sc=ut,oc=(sc+1)%rc;for(;;){const ut=sc-1>=0?sc-1:rc-1,Hl=(oc+1)%rc,_c=at[2*st[ut]],wc=at[2*st[Hl]],Sc=at[2*st[sc]],iu=at[2*st[sc]+1],su=at[2*st[oc]+1];let lu=!1;if(_c<wc)lu=!0;else if(_c>wc)lu=!1;else{const ot=su-iu,rc=-(at[2*st[oc]]-Sc),sc=iu<su?1:-1;((_c-Sc)*ot+(at[2*st[ut]+1]-iu)*rc)*sc>((wc-Sc)*ot+(at[2*st[Hl]+1]-iu)*rc)*sc&&(lu=!0)}if(lu){const at=st[ut],Hl=st[sc],_c=st[oc];at!==Hl&&at!==_c&&Hl!==_c&&ot.push(_c,Hl,at),sc--,sc<0&&(sc=rc-1)}else{const at=st[Hl],ut=st[sc],_c=st[oc];at!==ut&&at!==_c&&ut!==_c&&ot.push(_c,ut,at),oc++,oc>=rc&&(oc=0)}if(ut===Hl)break}}function bl(at,st,ot,ut,Hl,rc,sc,oc,_c){const wc=Hl.length/2,Sc=sc&&oc&&_c;if(wc<go.MAX_VERTEX_ARRAY_LENGTH){const iu=st.prepareSegment(wc,ot,ut),su=iu.vertexLength;for(let at=0;at<rc.length;at+=3)ut.emplaceBack(su+rc[at],su+rc[at+1],su+rc[at+2]);let lu,cu;iu.vertexLength+=wc,iu.primitiveLength+=rc.length/3,Sc&&(cu=sc.prepareSegment(wc,ot,oc),lu=cu.vertexLength,cu.vertexLength+=wc);for(let st=0;st<Hl.length;st+=2)at(Hl[st],Hl[st+1]);if(Sc)for(let at=0;at<_c.length;at++){const st=_c[at];for(let at=1;at<st.length;at+=2)oc.emplaceBack(lu+st[at-1],lu+st[at]);cu.primitiveLength+=st.length/2}}else!function(at,st,ot,ut,Hl,rc){const sc=[];for(let iu=0;iu<ut.length/2;iu++)sc.push(-1);const oc={count:0};let _c=0,wc=at.getOrCreateLatestSegment(st,ot),Sc=wc.vertexLength;for(let iu=2;iu<Hl.length;iu+=3){const su=Hl[iu-2],lu=Hl[iu-1],cu=Hl[iu];let uu=sc[su]<_c,pu=sc[lu]<_c,mu=sc[cu]<_c;wc.vertexLength+((uu?1:0)+(pu?1:0)+(mu?1:0))>go.MAX_VERTEX_ARRAY_LENGTH&&(wc=at.createNewSegment(st,ot),_c=oc.count,uu=!0,pu=!0,mu=!0,Sc=0);const gu=wl(sc,ut,rc,oc,su,uu,wc),Au=wl(sc,ut,rc,oc,lu,pu,wc),yu=wl(sc,ut,rc,oc,cu,mu,wc);ot.emplaceBack(Sc+gu-_c,Sc+Au-_c,Sc+yu-_c),wc.primitiveLength++}}(st,ot,ut,Hl,rc,at),Sc&&function(at,st,ot,ut,Hl,rc){const sc=[];for(let iu=0;iu<ut.length/2;iu++)sc.push(-1);const oc={count:0};let _c=0,wc=at.getOrCreateLatestSegment(st,ot),Sc=wc.vertexLength;for(let iu=0;iu<Hl.length;iu++){const su=Hl[iu];for(let lu=1;lu<Hl[iu].length;lu+=2){const Hl=su[lu-1],iu=su[lu];let cu=sc[Hl]<_c,uu=sc[iu]<_c;wc.vertexLength+((cu?1:0)+(uu?1:0))>go.MAX_VERTEX_ARRAY_LENGTH&&(wc=at.createNewSegment(st,ot),_c=oc.count,cu=!0,uu=!0,Sc=0);const pu=wl(sc,ut,rc,oc,Hl,cu,wc),mu=wl(sc,ut,rc,oc,iu,uu,wc);ot.emplaceBack(Sc+pu-_c,Sc+mu-_c),wc.primitiveLength++}}}(sc,ot,oc,Hl,_c,at),st.forceNewSegmentOnNextPrepare(),null==sc||sc.forceNewSegmentOnNextPrepare()}function wl(at,st,ot,ut,Hl,rc,sc){if(rc){const rc=ut.count;return ot(st[2*Hl],st[2*Hl+1]),at[Hl]=ut.count,ut.count++,sc.vertexLength++,rc}return at[Hl]}class _l{constructor(at){this.zoom=at.zoom,this.globalState=at.globalState,this.overscaling=at.overscaling,this.layers=at.layers,this.layerIds=this.layers.map((at=>at.id)),this.index=at.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new ro,this.indexArray=new po,this.indexArray2=new fo,this.programConfigurations=new Uo(at.layers,at.zoom),this.segments=new go,this.segments2=new go,this.stateDependentLayerIds=this.layers.filter((at=>at.isStateDependent())).map((at=>at.id))}populate(at,st,ot){this.hasPattern=Oa("fill",this.layers,st);const ut=this.layers[0].layout.get("fill-sort-key"),Hl=!ut.isConstant(),rc=[];for(const{feature:sc,id:oc,index:_c,sourceLayerIndex:wc}of at){const at=this.layers[0]._featureFilter.needGeometry,Sc=Ho(sc,at);if(!this.layers[0]._featureFilter.filter(new Wi(this.zoom,{globalState:this.globalState}),Sc,ot))continue;const iu=Hl?ut.evaluate(Sc,{},ot,st.availableImages):void 0,su={id:oc,properties:sc.properties,type:sc.type,sourceLayerIndex:wc,index:_c,geometry:at?Sc.geometry:Yo(sc),patterns:{},sortKey:iu};rc.push(su)}Hl&&rc.sort(((at,st)=>at.sortKey-st.sortKey));for(const sc of rc){const{geometry:ut,index:Hl,sourceLayerIndex:rc}=sc;if(this.hasPattern){const at=Ra("fill",this.layers,sc,this.zoom,st);this.patternFeatures.push(at)}else this.addFeature(sc,ut,Hl,ot,{},st.subdivisionGranularity);st.featureIndex.insert(at[Hl].feature,ut,Hl,rc,this.index)}}update(at,st,ot){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(at,st,this.stateDependentLayers,ot)}addFeatures(at,st,ot){for(const ut of this.patternFeatures)this.addFeature(ut,ut.geometry,ut.index,st,ot,at.subdivisionGranularity)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(at){this.uploaded||(this.layoutVertexBuffer=at.createVertexBuffer(this.layoutVertexArray,nm),this.indexBuffer=at.createIndexBuffer(this.indexArray),this.indexBuffer2=at.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(at),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(at,st,ot,ut,Hl,rc){for(const sc of er(st,500)){const at=gl(sc,ut,rc.fill.getGranularityForZoomLevel(ut.z)),st=this.layoutVertexArray;bl(((at,ot)=>{st.emplaceBack(at,ot)}),this.segments,this.layoutVertexArray,this.indexArray,at.verticesFlattened,at.indicesTriangles,this.segments2,this.indexArray2,at.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,at,ot,Hl,ut)}}let sm,om;ci("FillBucket",_l,{omit:["layers","patternFeatures"]});var lm={get paint(){return om=om||new hs({"fill-antialias":new os(uu.paint_fill["fill-antialias"]),"fill-opacity":new as(uu.paint_fill["fill-opacity"]),"fill-color":new as(uu.paint_fill["fill-color"]),"fill-outline-color":new as(uu.paint_fill["fill-outline-color"]),"fill-translate":new os(uu.paint_fill["fill-translate"]),"fill-translate-anchor":new os(uu.paint_fill["fill-translate-anchor"]),"fill-pattern":new ls(uu.paint_fill["fill-pattern"])})},get layout(){return sm=sm||new hs({"fill-sort-key":new as(uu.layout_fill["fill-sort-key"])})}};class Il extends fs{constructor(at){super(at,lm)}recalculate(at,st){super.recalculate(at,st);const ot=this.paint._values["fill-outline-color"];"constant"===ot.value.kind&&void 0===ot.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(at){return new _l(at)}queryRadius(){return ha(this.paint.get("fill-translate"))}queryIntersectsFeature(at){let{queryGeometry:st,geometry:ot,transform:ut,pixelsToTileUnits:Hl}=at;return ea(pa(st,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-ut.bearingInRadians,Hl),ot)}isTileClipped(){return!0}}const cm=gs([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),um=gs([{name:"a_centroid",components:2,type:"Int16"}],4),{members:hm}=cm;var dm,pm,mm,gm,fm,Am,ym,vm={};function $l(){if(pm)return dm;pm=1;var at=i();function e(at,st,ot,ut,Hl){this.properties={},this.extent=ot,this.type=0,this._pbf=at,this._geometry=-1,this._keys=ut,this._values=Hl,at.readFields(r,this,st)}function r(at,st,ot){1==at?st.id=ot.readVarint():2==at?function(at,st){for(var ot=at.readVarint()+at.pos;at.pos<ot;){var ut=st._keys[at.readVarint()],Hl=st._values[at.readVarint()];st.properties[ut]=Hl}}(ot,st):3==at?st.type=ot.readVarint():4==at&&(st._geometry=ot.pos)}function n(at){for(var st,ot,ut=0,Hl=0,rc=at.length,sc=rc-1;Hl<rc;sc=Hl++)ut+=((ot=at[sc]).x-(st=at[Hl]).x)*(st.y+ot.y);return ut}return dm=e,e.types=["Unknown","Point","LineString","Polygon"],e.prototype.loadGeometry=function(){var st=this._pbf;st.pos=this._geometry;for(var ot,ut=st.readVarint()+st.pos,Hl=1,rc=0,sc=0,oc=0,_c=[];st.pos<ut;){if(rc<=0){var wc=st.readVarint();Hl=7&wc,rc=wc>>3}if(rc--,1===Hl||2===Hl)sc+=st.readSVarint(),oc+=st.readSVarint(),1===Hl&&(ot&&_c.push(ot),ot=[]),ot.push(new at(sc,oc));else{if(7!==Hl)throw new Error("unknown command "+Hl);ot&&ot.push(ot[0].clone())}}return ot&&_c.push(ot),_c},e.prototype.bbox=function(){var at=this._pbf;at.pos=this._geometry;for(var st=at.readVarint()+at.pos,ot=1,ut=0,Hl=0,rc=0,sc=1/0,oc=-1/0,_c=1/0,wc=-1/0;at.pos<st;){if(ut<=0){var Sc=at.readVarint();ot=7&Sc,ut=Sc>>3}if(ut--,1===ot||2===ot)(Hl+=at.readSVarint())<sc&&(sc=Hl),Hl>oc&&(oc=Hl),(rc+=at.readSVarint())<_c&&(_c=rc),rc>wc&&(wc=rc);else if(7!==ot)throw new Error("unknown command "+ot)}return[sc,_c,oc,wc]},e.prototype.toGeoJSON=function(at,st,ot){var ut,Hl,rc=this.extent*Math.pow(2,ot),sc=this.extent*at,oc=this.extent*st,_c=this.loadGeometry(),wc=e.types[this.type];function p(at){for(var st=0;st<at.length;st++){var ot=at[st];at[st]=[360*(ot.x+sc)/rc-180,360/Math.PI*Math.atan(Math.exp((180-360*(ot.y+oc)/rc)*Math.PI/180))-90]}}switch(this.type){case 1:var Sc=[];for(ut=0;ut<_c.length;ut++)Sc[ut]=_c[ut][0];p(_c=Sc);break;case 2:for(ut=0;ut<_c.length;ut++)p(_c[ut]);break;case 3:for(_c=function(at){var st=at.length;if(st<=1)return[at];for(var ot,ut,Hl=[],rc=0;rc<st;rc++){var sc=n(at[rc]);0!==sc&&(void 0===ut&&(ut=sc<0),ut===sc<0?(ot&&Hl.push(ot),ot=[at[rc]]):ot.push(at[rc]))}return ot&&Hl.push(ot),Hl}(_c),ut=0;ut<_c.length;ut++)for(Hl=0;Hl<_c[ut].length;Hl++)p(_c[ut][Hl])}1===_c.length?_c=_c[0]:wc="Multi"+wc;var iu={type:"Feature",geometry:{type:wc,coordinates:_c},properties:this.properties};return"id"in this&&(iu.id=this.id),iu},dm}function Ol(){if(gm)return mm;gm=1;var at=$l();function e(at,st){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=at,this._keys=[],this._values=[],this._features=[],at.readFields(r,this,st),this.length=this._features.length}function r(at,st,ot){15===at?st.version=ot.readVarint():1===at?st.name=ot.readString():5===at?st.extent=ot.readVarint():2===at?st._features.push(ot.pos):3===at?st._keys.push(ot.readString()):4===at&&st._values.push(function(at){for(var st=null,ot=at.readVarint()+at.pos;at.pos<ot;){var ut=at.readVarint()>>3;st=1===ut?at.readString():2===ut?at.readFloat():3===ut?at.readDouble():4===ut?at.readVarint64():5===ut?at.readVarint():6===ut?at.readSVarint():7===ut?at.readBoolean():null}return st}(ot))}return mm=e,e.prototype.feature=function(st){if(st<0||st>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[st];var ot=this._pbf.readVarint()+this._pbf.pos;return new at(this._pbf,ot,this.extent,this._keys,this._values)},mm}function Rl(){return ym||(ym=1,vm.VectorTile=function(){if(Am)return fm;Am=1;var at=Ol();function e(st,ot,ut){if(3===st){var Hl=new at(ut,ut.readVarint()+ut.pos);Hl.length&&(ot[Hl.name]=Hl)}}return fm=function(at,st){this.layers=at.readFields(e,{},st)},fm}(),vm.VectorTileFeature=$l(),vm.VectorTileLayer=Ol()),vm}var _m=e(Rl());const xm=_m.VectorTileFeature.types,bm=Math.pow(2,13);function ql(at,st,ot,ut,Hl,rc,sc,oc){at.emplaceBack(st,ot,2*Math.floor(ut*bm)+sc,Hl*bm*2,rc*bm*2,Math.round(oc))}class Gl{constructor(at){this.zoom=at.zoom,this.globalState=at.globalState,this.overscaling=at.overscaling,this.layers=at.layers,this.layerIds=this.layers.map((at=>at.id)),this.index=at.index,this.hasPattern=!1,this.layoutVertexArray=new no,this.centroidVertexArray=new to,this.indexArray=new po,this.programConfigurations=new Uo(at.layers,at.zoom),this.segments=new go,this.stateDependentLayerIds=this.layers.filter((at=>at.isStateDependent())).map((at=>at.id))}populate(at,st,ot){this.features=[],this.hasPattern=Oa("fill-extrusion",this.layers,st);for(const{feature:ut,id:Hl,index:rc,sourceLayerIndex:sc}of at){const at=this.layers[0]._featureFilter.needGeometry,oc=Ho(ut,at);if(!this.layers[0]._featureFilter.filter(new Wi(this.zoom,{globalState:this.globalState}),oc,ot))continue;const _c={id:Hl,sourceLayerIndex:sc,index:rc,geometry:at?oc.geometry:Yo(ut),properties:ut.properties,type:ut.type,patterns:{}};this.hasPattern?this.features.push(Ra("fill-extrusion",this.layers,_c,this.zoom,st)):this.addFeature(_c,_c.geometry,rc,ot,{},st.subdivisionGranularity),st.featureIndex.insert(ut,_c.geometry,rc,sc,this.index,!0)}}addFeatures(at,st,ot){for(const ut of this.features){const{geometry:Hl}=ut;this.addFeature(ut,Hl,ut.index,st,ot,at.subdivisionGranularity)}}update(at,st,ot){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(at,st,this.stateDependentLayers,ot)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(at){this.uploaded||(this.layoutVertexBuffer=at.createVertexBuffer(this.layoutVertexArray,hm),this.centroidVertexBuffer=at.createVertexBuffer(this.centroidVertexArray,um.members,!0),this.indexBuffer=at.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(at),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(at,st,ot,ut,Hl,rc){for(const sc of er(st,500)){const st={x:0,y:0,sampleCount:0},ot=this.layoutVertexArray.length;this.processPolygon(st,ut,at,sc,rc);const Hl=this.layoutVertexArray.length-ot,oc=Math.floor(st.x/st.sampleCount),_c=Math.floor(st.y/st.sampleCount);for(let at=0;at<Hl;at++)this.centroidVertexArray.emplaceBack(oc,_c)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,at,ot,Hl,ut)}processPolygon(at,st,ot,ut,Hl){if(ut.length<1)return;if(Yl(ut[0]))return;for(const Sc of ut)0!==Sc.length&&Xl(at,Sc);const rc={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},sc=Hl.fill.getGranularityForZoomLevel(st.z),oc="Polygon"===xm[ot.type];for(const Sc of ut){if(0===Sc.length)continue;if(Yl(Sc))continue;const at=xl(Sc,sc,oc);this._generateSideFaces(at,rc)}if(!oc)return;const _c=gl(ut,st,sc,!1),wc=this.layoutVertexArray;bl(((at,st)=>{ql(wc,at,st,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,_c.verticesFlattened,_c.indicesTriangles)}_generateSideFaces(at,st){let ot=0;for(let ut=1;ut<at.length;ut++){const Hl=at[ut],rc=at[ut-1];if(Zl(Hl,rc))continue;st.segment.vertexLength+4>go.MAX_VERTEX_ARRAY_LENGTH&&(st.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const sc=Hl.sub(rc)._perp()._unit(),oc=rc.dist(Hl);ot+oc>32768&&(ot=0),ql(this.layoutVertexArray,Hl.x,Hl.y,sc.x,sc.y,0,0,ot),ql(this.layoutVertexArray,Hl.x,Hl.y,sc.x,sc.y,0,1,ot),ot+=oc,ql(this.layoutVertexArray,rc.x,rc.y,sc.x,sc.y,0,0,ot),ql(this.layoutVertexArray,rc.x,rc.y,sc.x,sc.y,0,1,ot);const _c=st.segment.vertexLength;this.indexArray.emplaceBack(_c,_c+2,_c+1),this.indexArray.emplaceBack(_c+1,_c+2,_c+3),st.segment.vertexLength+=4,st.segment.primitiveLength+=2}}}function Xl(at,st){for(let ot=0;ot<st.length;ot++){const ut=st[ot];ot===st.length-1&&st[0].x===ut.x&&st[0].y===ut.y||(at.x+=ut.x,at.y+=ut.y,at.sampleCount++)}}function Zl(at,st){return at.x===st.x&&(at.x<0||at.x>iu)||at.y===st.y&&(at.y<0||at.y>iu)}function Yl(at){return at.every((at=>at.x<0))||at.every((at=>at.x>iu))||at.every((at=>at.y<0))||at.every((at=>at.y>iu))}let wm;ci("FillExtrusionBucket",Gl,{omit:["layers","features"]});var Em={get paint(){return wm=wm||new hs({"fill-extrusion-opacity":new os(uu["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new as(uu["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new os(uu["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new os(uu["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new ls(uu["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new as(uu["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new as(uu["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new os(uu["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Wl extends fs{constructor(at){super(at,Em)}createBucket(at){return new Gl(at)}queryRadius(){return ha(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature(at){let{queryGeometry:st,feature:ot,featureState:ut,geometry:rc,transform:sc,pixelsToTileUnits:oc,pixelPosMatrix:_c}=at;const wc=pa(st,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-sc.bearingInRadians,oc),Sc=this.paint.get("fill-extrusion-height").evaluate(ot,ut),iu=this.paint.get("fill-extrusion-base").evaluate(ot,ut),su=function(at,st){const ot=[];for(const ut of at){const at=[ut.x,ut.y,0,1];d(at,at,st),ot.push(new Hl(at[0]/at[3],at[1]/at[3]))}return ot}(wc,_c),lu=function(at,st,ot,ut){const rc=[],sc=[],oc=ut[8]*st,_c=ut[9]*st,wc=ut[10]*st,Sc=ut[11]*st,iu=ut[8]*ot,su=ut[9]*ot,lu=ut[10]*ot,cu=ut[11]*ot;for(const uu of at){const at=[],st=[];for(const ot of uu){const rc=ot.x,sc=ot.y,uu=ut[0]*rc+ut[4]*sc+ut[12],pu=ut[1]*rc+ut[5]*sc+ut[13],mu=ut[2]*rc+ut[6]*sc+ut[14],gu=ut[3]*rc+ut[7]*sc+ut[15],Au=mu+wc,yu=gu+Sc,_u=uu+iu,xu=pu+su,Su=mu+lu,Du=gu+cu,Lu=new Hl((uu+oc)/yu,(pu+_c)/yu);Lu.z=Au/yu,at.push(Lu);const $u=new Hl(_u/Du,xu/Du);$u.z=Su/Du,st.push($u)}rc.push(at),sc.push(st)}return[rc,sc]}(rc,iu,Sc,_c);return function(at,st,ot){let ut=1/0;ea(ot,st)&&(ut=Ql(ot,st[0]));for(let Hl=0;Hl<st.length;Hl++){const rc=st[Hl],sc=at[Hl];for(let at=0;at<rc.length-1;at++){const st=rc[at],Hl=[st,rc[at+1],sc[at+1],sc[at],st];Qo(ot,Hl)&&(ut=Math.min(ut,Ql(ot,Hl)))}}return ut!==1/0&&ut}(lu[0],lu[1],su)}}function Kl(at,st){return at.x*st.x+at.y*st.y}function Ql(at,st){if(1===at.length){let ot=0;const ut=st[ot++];let Hl;for(;!Hl||ut.equals(Hl);)if(Hl=st[ot++],!Hl)return 1/0;for(;ot<st.length;ot++){const rc=st[ot],sc=at[0],oc=Hl.sub(ut),_c=rc.sub(ut),wc=sc.sub(ut),Sc=Kl(oc,oc),iu=Kl(oc,_c),su=Kl(_c,_c),lu=Kl(wc,oc),cu=Kl(wc,_c),uu=Sc*su-iu*iu,pu=(su*lu-iu*cu)/uu,mu=(Sc*cu-iu*lu)/uu,gu=ut.z*(1-pu-mu)+Hl.z*pu+rc.z*mu;if(isFinite(gu))return gu}return 1/0}{let at=1/0;for(const ot of st)at=Math.min(at,ot.z);return at}}const Mm=gs([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Sm}=Mm,Tm=gs([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Cm}=Tm,km=_m.VectorTileFeature.types,Im=Math.cos(Math.PI/180*37.5),Dm=Math.pow(2,14)/.5;class au{constructor(at){this.zoom=at.zoom,this.globalState=at.globalState,this.overscaling=at.overscaling,this.layers=at.layers,this.layerIds=this.layers.map((at=>at.id)),this.index=at.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((at=>{this.gradients[at.id]={}})),this.layoutVertexArray=new io,this.layoutVertexArray2=new so,this.indexArray=new po,this.programConfigurations=new Uo(at.layers,at.zoom),this.segments=new go,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((at=>at.isStateDependent())).map((at=>at.id))}populate(at,st,ot){this.hasPattern=Oa("line",this.layers,st);const ut=this.layers[0].layout.get("line-sort-key"),Hl=!ut.isConstant(),rc=[];for(const{feature:sc,id:oc,index:_c,sourceLayerIndex:wc}of at){const at=this.layers[0]._featureFilter.needGeometry,st=Ho(sc,at);if(!this.layers[0]._featureFilter.filter(new Wi(this.zoom,{globalState:this.globalState}),st,ot))continue;const Sc=Hl?ut.evaluate(st,{},ot):void 0,iu={id:oc,properties:sc.properties,type:sc.type,sourceLayerIndex:wc,index:_c,geometry:at?st.geometry:Yo(sc),patterns:{},sortKey:Sc};rc.push(iu)}Hl&&rc.sort(((at,st)=>at.sortKey-st.sortKey));for(const sc of rc){const{geometry:ut,index:Hl,sourceLayerIndex:rc}=sc;if(this.hasPattern){const at=Ra("line",this.layers,sc,this.zoom,st);this.patternFeatures.push(at)}else this.addFeature(sc,ut,Hl,ot,{},st.subdivisionGranularity);st.featureIndex.insert(at[Hl].feature,ut,Hl,rc,this.index)}}update(at,st,ot){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(at,st,this.stateDependentLayers,ot)}addFeatures(at,st,ot){for(const ut of this.patternFeatures)this.addFeature(ut,ut.geometry,ut.index,st,ot,at.subdivisionGranularity)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(at){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=at.createVertexBuffer(this.layoutVertexArray2,Cm)),this.layoutVertexBuffer=at.createVertexBuffer(this.layoutVertexArray,Sm),this.indexBuffer=at.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(at),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(at){if(at.properties&&Object.prototype.hasOwnProperty.call(at.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(at.properties,"mapbox_clip_end"))return{start:+at.properties.mapbox_clip_start,end:+at.properties.mapbox_clip_end}}addFeature(at,st,ot,ut,Hl,rc){const sc=this.layers[0].layout,oc=sc.get("line-join").evaluate(at,{}),_c=sc.get("line-cap"),wc=sc.get("line-miter-limit"),Sc=sc.get("line-round-limit");this.lineClips=this.lineFeatureClips(at);for(const iu of st)this.addLine(iu,at,oc,_c,wc,Sc,ut,rc);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,at,ot,Hl,ut)}addLine(at,st,ot,ut,Hl,rc,sc,oc){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,at=xl(at,sc?oc.line.getGranularityForZoomLevel(sc.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let st=0;st<at.length-1;st++)this.totalDistance+=at[st].dist(at[st+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const _c="Polygon"===km[st.type];let wc=at.length;for(;wc>=2&&at[wc-1].equals(at[wc-2]);)wc--;let Sc=0;for(;Sc<wc-1&&at[Sc].equals(at[Sc+1]);)Sc++;if(wc<(_c?3:2))return;"bevel"===ot&&(Hl=1.05);const iu=this.overscaling<=16?122880/(512*this.overscaling):0,su=this.segments.prepareSegment(10*wc,this.layoutVertexArray,this.indexArray);let lu,cu,uu,pu,mu;this.e1=this.e2=-1,_c&&(lu=at[wc-2],mu=at[Sc].sub(lu)._unit()._perp());for(let gu=Sc;gu<wc;gu++){if(uu=gu===wc-1?_c?at[Sc+1]:void 0:at[gu+1],uu&&at[gu].equals(uu))continue;mu&&(pu=mu),lu&&(cu=lu),lu=at[gu],mu=uu?uu.sub(lu)._unit()._perp():pu,pu=pu||mu;let st=pu.add(mu);0===st.x&&0===st.y||st._unit();const sc=pu.x*mu.x+pu.y*mu.y,oc=st.x*mu.x+st.y*mu.y,Au=0!==oc?1/oc:1/0,yu=2*Math.sqrt(2-2*oc),_u=oc<Im&&cu&&uu,xu=pu.x*mu.y-pu.y*mu.x>0;if(_u&&gu>Sc){const at=lu.dist(cu);if(at>2*iu){const st=lu.sub(lu.sub(cu)._mult(iu/at)._round());this.updateDistance(cu,st),this.addCurrentVertex(st,pu,0,0,su),cu=st}}const Su=cu&&uu;let Du=Su?ot:_c?"butt":ut;if(Su&&"round"===Du&&(Au<rc?Du="miter":Au<=2&&(Du="fakeround")),"miter"===Du&&Au>Hl&&(Du="bevel"),"bevel"===Du&&(Au>2&&(Du="flipbevel"),Au<Hl&&(Du="miter")),cu&&this.updateDistance(cu,lu),"miter"===Du)st._mult(Au),this.addCurrentVertex(lu,st,0,0,su);else if("flipbevel"===Du){if(Au>100)st=mu.mult(-1);else{const at=Au*pu.add(mu).mag()/pu.sub(mu).mag();st._perp()._mult(at*(xu?-1:1))}this.addCurrentVertex(lu,st,0,0,su),this.addCurrentVertex(lu,st.mult(-1),0,0,su)}else if("bevel"===Du||"fakeround"===Du){const at=-Math.sqrt(Au*Au-1),st=xu?at:0,ot=xu?0:at;if(cu&&this.addCurrentVertex(lu,pu,st,ot,su),"fakeround"===Du){const at=Math.round(180*yu/Math.PI/20);for(let st=1;st<at;st++){let ot=st/at;if(.5!==ot){const at=ot-.5;ot+=ot*at*(ot-1)*((1.0904+sc*(sc*(3.55645-1.43519*sc)-3.2452))*at*at+(.848013+sc*(.215638*sc-1.06021)))}const ut=mu.sub(pu)._mult(ot)._add(pu)._unit()._mult(xu?-1:1);this.addHalfVertex(lu,ut.x,ut.y,!1,xu,0,su)}}uu&&this.addCurrentVertex(lu,mu,-st,-ot,su)}else if("butt"===Du)this.addCurrentVertex(lu,st,0,0,su);else if("square"===Du){const at=cu?1:-1;this.addCurrentVertex(lu,st,at,at,su)}else"round"===Du&&(cu&&(this.addCurrentVertex(lu,pu,0,0,su),this.addCurrentVertex(lu,pu,1,1,su,!0)),uu&&(this.addCurrentVertex(lu,mu,-1,-1,su,!0),this.addCurrentVertex(lu,mu,0,0,su)));if(_u&&gu<wc-1){const at=lu.dist(uu);if(at>2*iu){const st=lu.add(uu.sub(lu)._mult(iu/at)._round());this.updateDistance(lu,st),this.addCurrentVertex(st,mu,0,0,su),lu=st}}}}addCurrentVertex(at,st,ot,ut,Hl,rc){void 0===rc&&(rc=!1);const sc=st.y*ut-st.x,oc=-st.y-st.x*ut;this.addHalfVertex(at,st.x+st.y*ot,st.y-st.x*ot,rc,!1,ot,Hl),this.addHalfVertex(at,sc,oc,rc,!0,-ut,Hl),this.distance>Dm/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(at,st,ot,ut,Hl,rc))}addHalfVertex(at,st,ot,ut,Hl,rc,sc){let{x:oc,y:_c}=at;const wc=.5*(this.lineClips?this.scaledDistance*(Dm-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((oc<<1)+(ut?1:0),(_c<<1)+(Hl?1:0),Math.round(63*st)+128,Math.round(63*ot)+128,1+(0===rc?0:rc<0?-1:1)|(63&wc)<<2,wc>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const Sc=sc.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,Sc,this.e2),sc.primitiveLength++),Hl?this.e2=Sc:this.e1=Sc}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(at,st){this.distance+=at.dist(st),this.updateScaledDistance()}}let Lm,Pm;ci("LineBucket",au,{omit:["layers","patternFeatures"]});var zm={get paint(){return Pm=Pm||new hs({"line-opacity":new as(uu.paint_line["line-opacity"]),"line-color":new as(uu.paint_line["line-color"]),"line-translate":new os(uu.paint_line["line-translate"]),"line-translate-anchor":new os(uu.paint_line["line-translate-anchor"]),"line-width":new as(uu.paint_line["line-width"]),"line-gap-width":new as(uu.paint_line["line-gap-width"]),"line-offset":new as(uu.paint_line["line-offset"]),"line-blur":new as(uu.paint_line["line-blur"]),"line-dasharray":new us(uu.paint_line["line-dasharray"]),"line-pattern":new ls(uu.paint_line["line-pattern"]),"line-gradient":new cs(uu.paint_line["line-gradient"])})},get layout(){return Lm=Lm||new hs({"line-cap":new os(uu.layout_line["line-cap"]),"line-join":new as(uu.layout_line["line-join"]),"line-miter-limit":new os(uu.layout_line["line-miter-limit"]),"line-round-limit":new os(uu.layout_line["line-round-limit"]),"line-sort-key":new as(uu.layout_line["line-sort-key"])})}};class hu extends as{possiblyEvaluate(at,st){return st=new Wi(Math.floor(st.zoom),{now:st.now,fadeDuration:st.fadeDuration,zoomHistory:st.zoomHistory,transition:st.transition}),super.possiblyEvaluate(at,st)}evaluate(at,st,ot,ut){return st=g({},st,{zoom:Math.floor(st.zoom)}),super.evaluate(at,st,ot,ut)}}let Nm;class fu extends fs{constructor(at){super(at,zm),this.gradientVersion=0,Nm||(Nm=new hu(zm.paint.properties["line-width"].specification),Nm.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(at){if("line-gradient"===at){const at=this.gradientExpression();this.stepInterpolant=!!function(at){return void 0!==at._styleExpression}(at)&&at._styleExpression.expression instanceof le,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(at,st){super.recalculate(at,st),this.paint._values["line-floorwidth"]=Nm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,at)}createBucket(at){return new au(at)}queryRadius(at){const st=at,ot=du(ca("line-width",this,st),ca("line-gap-width",this,st)),ut=ca("line-offset",this,st);return ot/2+Math.abs(ut)+ha(this.paint.get("line-translate"))}queryIntersectsFeature(at){let{queryGeometry:st,feature:ot,featureState:ut,geometry:rc,transform:sc,pixelsToTileUnits:oc}=at;const _c=pa(st,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-sc.bearingInRadians,oc),wc=oc/2*du(this.paint.get("line-width").evaluate(ot,ut),this.paint.get("line-gap-width").evaluate(ot,ut)),Sc=this.paint.get("line-offset").evaluate(ot,ut);return Sc&&(rc=function(at,st){const ot=[];for(let ut=0;ut<at.length;ut++){const rc=at[ut],sc=[];for(let at=0;at<rc.length;at++){const ot=rc[at-1],ut=rc[at],oc=rc[at+1],_c=0===at?new Hl(0,0):ut.sub(ot)._unit()._perp(),wc=at===rc.length-1?new Hl(0,0):oc.sub(ut)._unit()._perp(),Sc=_c._add(wc)._unit(),iu=Sc.x*wc.x+Sc.y*wc.y;0!==iu&&Sc._mult(1/iu),sc.push(Sc._mult(st)._add(ut))}ot.push(sc)}return ot}(rc,Sc*oc)),function(at,st,ot){for(let ut=0;ut<st.length;ut++){const Hl=st[ut];if(at.length>=3)for(let st=0;st<Hl.length;st++)if(la(at,Hl[st]))return!0;if(ra(at,Hl,ot))return!0}return!1}(_c,rc,wc)}isTileClipped(){return!0}}function du(at,st){return st>0?st+2*at:at}const Rm=gs([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Om=gs([{name:"a_projected_pos",components:3,type:"Float32"}],4);gs([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Bm=gs([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);gs([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Fm=gs([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4);function vu(at,st,ot){return at.sections.forEach((at=>{at.text=function(at,st,ot){const ut=st.layout.get("text-transform").evaluate(ot,{});return"uppercase"===ut?at=at.toLocaleUpperCase():"lowercase"===ut&&(at=at.toLocaleLowerCase()),Xd.applyArabicShaping&&(at=Xd.applyArabicShaping(at)),at}(at.text,st,ot)})),at}gs([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4),gs([{name:"triangle",components:3,type:"Uint16"}]),gs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),gs([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),gs([{type:"Float32",name:"offsetX"}]),gs([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),gs([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const jm={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var Um,Vm,Gm,Zm=24,Hm={};function Mu(){if(Gm)return Vm;Gm=1,Vm=e;var at=(Um||(Um=1,Hm.read=function(at,st,ot,ut,Hl){var rc,sc,oc=8*Hl-ut-1,_c=(1<<oc)-1,wc=_c>>1,Sc=-7,iu=ot?Hl-1:0,su=ot?-1:1,lu=at[st+iu];for(iu+=su,rc=lu&(1<<-Sc)-1,lu>>=-Sc,Sc+=oc;Sc>0;rc=256*rc+at[st+iu],iu+=su,Sc-=8);for(sc=rc&(1<<-Sc)-1,rc>>=-Sc,Sc+=ut;Sc>0;sc=256*sc+at[st+iu],iu+=su,Sc-=8);if(0===rc)rc=1-wc;else{if(rc===_c)return sc?NaN:1/0*(lu?-1:1);sc+=Math.pow(2,ut),rc-=wc}return(lu?-1:1)*sc*Math.pow(2,rc-ut)},Hm.write=function(at,st,ot,ut,Hl,rc){var sc,oc,_c,wc=8*rc-Hl-1,Sc=(1<<wc)-1,iu=Sc>>1,su=23===Hl?Math.pow(2,-24)-Math.pow(2,-77):0,lu=ut?0:rc-1,cu=ut?1:-1,uu=st<0||0===st&&1/st<0?1:0;for(st=Math.abs(st),isNaN(st)||st===1/0?(oc=isNaN(st)?1:0,sc=Sc):(sc=Math.floor(Math.log(st)/Math.LN2),st*(_c=Math.pow(2,-sc))<1&&(sc--,_c*=2),(st+=sc+iu>=1?su/_c:su*Math.pow(2,1-iu))*_c>=2&&(sc++,_c/=2),sc+iu>=Sc?(oc=0,sc=Sc):sc+iu>=1?(oc=(st*_c-1)*Math.pow(2,Hl),sc+=iu):(oc=st*Math.pow(2,iu-1)*Math.pow(2,Hl),sc=0));Hl>=8;at[ot+lu]=255&oc,lu+=cu,oc/=256,Hl-=8);for(sc=sc<<Hl|oc,wc+=Hl;wc>0;at[ot+lu]=255&sc,lu+=cu,sc/=256,wc-=8);at[ot+lu-cu]|=128*uu}),Hm);function e(at){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(at)?at:new Uint8Array(at||0),this.pos=0,this.type=0,this.length=this.buf.length}e.Varint=0,e.Fixed64=1,e.Bytes=2,e.Fixed32=5;var st=4294967296,ot=1/st,ut="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8");function s(at){return at.type===e.Bytes?at.readVarint()+at.pos:at.pos+1}function o(at,st,ot){return ot?4294967296*st+(at>>>0):4294967296*(st>>>0)+(at>>>0)}function a(at,st,ot){var ut=st<=16383?1:st<=2097151?2:st<=268435455?3:Math.floor(Math.log(st)/(7*Math.LN2));ot.realloc(ut);for(var Hl=ot.pos-1;Hl>=at;Hl--)ot.buf[Hl+ut]=ot.buf[Hl]}function l(at,st){for(var ot=0;ot<at.length;ot++)st.writeVarint(at[ot])}function u(at,st){for(var ot=0;ot<at.length;ot++)st.writeSVarint(at[ot])}function c(at,st){for(var ot=0;ot<at.length;ot++)st.writeFloat(at[ot])}function h(at,st){for(var ot=0;ot<at.length;ot++)st.writeDouble(at[ot])}function p(at,st){for(var ot=0;ot<at.length;ot++)st.writeBoolean(at[ot])}function f(at,st){for(var ot=0;ot<at.length;ot++)st.writeFixed32(at[ot])}function d(at,st){for(var ot=0;ot<at.length;ot++)st.writeSFixed32(at[ot])}function y(at,st){for(var ot=0;ot<at.length;ot++)st.writeFixed64(at[ot])}function m(at,st){for(var ot=0;ot<at.length;ot++)st.writeSFixed64(at[ot])}function g(at,st){return(at[st]|at[st+1]<<8|at[st+2]<<16)+16777216*at[st+3]}function x(at,st,ot){at[ot]=st,at[ot+1]=st>>>8,at[ot+2]=st>>>16,at[ot+3]=st>>>24}function v(at,st){return(at[st]|at[st+1]<<8|at[st+2]<<16)+(at[st+3]<<24)}return e.prototype={destroy:function(){this.buf=null},readFields:function(at,st,ot){for(ot=ot||this.length;this.pos<ot;){var ut=this.readVarint(),Hl=ut>>3,rc=this.pos;this.type=7&ut,at(Hl,st,this),this.pos===rc&&this.skip(ut)}return st},readMessage:function(at,st){return this.readFields(at,st,this.readVarint()+this.pos)},readFixed32:function(){var at=g(this.buf,this.pos);return this.pos+=4,at},readSFixed32:function(){var at=v(this.buf,this.pos);return this.pos+=4,at},readFixed64:function(){var at=g(this.buf,this.pos)+g(this.buf,this.pos+4)*st;return this.pos+=8,at},readSFixed64:function(){var at=g(this.buf,this.pos)+v(this.buf,this.pos+4)*st;return this.pos+=8,at},readFloat:function(){var st=at.read(this.buf,this.pos,!0,23,4);return this.pos+=4,st},readDouble:function(){var st=at.read(this.buf,this.pos,!0,52,8);return this.pos+=8,st},readVarint:function(at){var st,ot,ut=this.buf;return st=127&(ot=ut[this.pos++]),ot<128?st:(st|=(127&(ot=ut[this.pos++]))<<7,ot<128?st:(st|=(127&(ot=ut[this.pos++]))<<14,ot<128?st:(st|=(127&(ot=ut[this.pos++]))<<21,ot<128?st:function(at,st,ot){var ut,Hl,rc=ot.buf;if(ut=(112&(Hl=rc[ot.pos++]))>>4,Hl<128)return o(at,ut,st);if(ut|=(127&(Hl=rc[ot.pos++]))<<3,Hl<128)return o(at,ut,st);if(ut|=(127&(Hl=rc[ot.pos++]))<<10,Hl<128)return o(at,ut,st);if(ut|=(127&(Hl=rc[ot.pos++]))<<17,Hl<128)return o(at,ut,st);if(ut|=(127&(Hl=rc[ot.pos++]))<<24,Hl<128)return o(at,ut,st);if(ut|=(1&(Hl=rc[ot.pos++]))<<31,Hl<128)return o(at,ut,st);throw new Error("Expected varint not more than 10 bytes")}(st|=(15&(ot=ut[this.pos]))<<28,at,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var at=this.readVarint();return at%2==1?(at+1)/-2:at/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var at=this.readVarint()+this.pos,st=this.pos;return this.pos=at,at-st>=12&&ut?function(at,st,ot){return ut.decode(at.subarray(st,ot))}(this.buf,st,at):function(at,st,ot){for(var ut="",Hl=st;Hl<ot;){var rc,sc,oc,_c=at[Hl],wc=null,Sc=_c>239?4:_c>223?3:_c>191?2:1;if(Hl+Sc>ot)break;1===Sc?_c<128&&(wc=_c):2===Sc?128==(192&(rc=at[Hl+1]))&&(wc=(31&_c)<<6|63&rc)<=127&&(wc=null):3===Sc?(sc=at[Hl+2],128==(192&(rc=at[Hl+1]))&&128==(192&sc)&&((wc=(15&_c)<<12|(63&rc)<<6|63&sc)<=2047||wc>=55296&&wc<=57343)&&(wc=null)):4===Sc&&(sc=at[Hl+2],oc=at[Hl+3],128==(192&(rc=at[Hl+1]))&&128==(192&sc)&&128==(192&oc)&&((wc=(15&_c)<<18|(63&rc)<<12|(63&sc)<<6|63&oc)<=65535||wc>=1114112)&&(wc=null)),null===wc?(wc=65533,Sc=1):wc>65535&&(wc-=65536,ut+=String.fromCharCode(wc>>>10&1023|55296),wc=56320|1023&wc),ut+=String.fromCharCode(wc),Hl+=Sc}return ut}(this.buf,st,at)},readBytes:function(){var at=this.readVarint()+this.pos,st=this.buf.subarray(this.pos,at);return this.pos=at,st},readPackedVarint:function(at,st){if(this.type!==e.Bytes)return at.push(this.readVarint(st));var ot=s(this);for(at=at||[];this.pos<ot;)at.push(this.readVarint(st));return at},readPackedSVarint:function(at){if(this.type!==e.Bytes)return at.push(this.readSVarint());var st=s(this);for(at=at||[];this.pos<st;)at.push(this.readSVarint());return at},readPackedBoolean:function(at){if(this.type!==e.Bytes)return at.push(this.readBoolean());var st=s(this);for(at=at||[];this.pos<st;)at.push(this.readBoolean());return at},readPackedFloat:function(at){if(this.type!==e.Bytes)return at.push(this.readFloat());var st=s(this);for(at=at||[];this.pos<st;)at.push(this.readFloat());return at},readPackedDouble:function(at){if(this.type!==e.Bytes)return at.push(this.readDouble());var st=s(this);for(at=at||[];this.pos<st;)at.push(this.readDouble());return at},readPackedFixed32:function(at){if(this.type!==e.Bytes)return at.push(this.readFixed32());var st=s(this);for(at=at||[];this.pos<st;)at.push(this.readFixed32());return at},readPackedSFixed32:function(at){if(this.type!==e.Bytes)return at.push(this.readSFixed32());var st=s(this);for(at=at||[];this.pos<st;)at.push(this.readSFixed32());return at},readPackedFixed64:function(at){if(this.type!==e.Bytes)return at.push(this.readFixed64());var st=s(this);for(at=at||[];this.pos<st;)at.push(this.readFixed64());return at},readPackedSFixed64:function(at){if(this.type!==e.Bytes)return at.push(this.readSFixed64());var st=s(this);for(at=at||[];this.pos<st;)at.push(this.readSFixed64());return at},skip:function(at){var st=7&at;if(st===e.Varint)for(;this.buf[this.pos++]>127;);else if(st===e.Bytes)this.pos=this.readVarint()+this.pos;else if(st===e.Fixed32)this.pos+=4;else{if(st!==e.Fixed64)throw new Error("Unimplemented type: "+st);this.pos+=8}},writeTag:function(at,st){this.writeVarint(at<<3|st)},realloc:function(at){for(var st=this.length||16;st<this.pos+at;)st*=2;if(st!==this.length){var ot=new Uint8Array(st);ot.set(this.buf),this.buf=ot,this.length=st}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(at){this.realloc(4),x(this.buf,at,this.pos),this.pos+=4},writeSFixed32:function(at){this.realloc(4),x(this.buf,at,this.pos),this.pos+=4},writeFixed64:function(at){this.realloc(8),x(this.buf,-1&at,this.pos),x(this.buf,Math.floor(at*ot),this.pos+4),this.pos+=8},writeSFixed64:function(at){this.realloc(8),x(this.buf,-1&at,this.pos),x(this.buf,Math.floor(at*ot),this.pos+4),this.pos+=8},writeVarint:function(at){(at=+at||0)>268435455||at<0?function(at,st){var ot,ut;if(at>=0?(ot=at%4294967296|0,ut=at/4294967296|0):(ut=~(-at/4294967296),4294967295^(ot=~(-at%4294967296))?ot=ot+1|0:(ot=0,ut=ut+1|0)),at>=0x10000000000000000||at<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");st.realloc(10),function(at,st,ot){ot.buf[ot.pos++]=127&at|128,at>>>=7,ot.buf[ot.pos++]=127&at|128,at>>>=7,ot.buf[ot.pos++]=127&at|128,at>>>=7,ot.buf[ot.pos++]=127&at|128,ot.buf[ot.pos]=127&(at>>>=7)}(ot,0,st),function(at,st){var ot=(7&at)<<4;st.buf[st.pos++]|=ot|((at>>>=3)?128:0),at&&(st.buf[st.pos++]=127&at|((at>>>=7)?128:0),at&&(st.buf[st.pos++]=127&at|((at>>>=7)?128:0),at&&(st.buf[st.pos++]=127&at|((at>>>=7)?128:0),at&&(st.buf[st.pos++]=127&at|((at>>>=7)?128:0),at&&(st.buf[st.pos++]=127&at)))))}(ut,st)}(at,this):(this.realloc(4),this.buf[this.pos++]=127&at|(at>127?128:0),at<=127||(this.buf[this.pos++]=127&(at>>>=7)|(at>127?128:0),at<=127||(this.buf[this.pos++]=127&(at>>>=7)|(at>127?128:0),at<=127||(this.buf[this.pos++]=at>>>7&127))))},writeSVarint:function(at){this.writeVarint(at<0?2*-at-1:2*at)},writeBoolean:function(at){this.writeVarint(Boolean(at))},writeString:function(at){at=String(at),this.realloc(4*at.length),this.pos++;var st=this.pos;this.pos=function(at,st,ot){for(var ut,Hl,rc=0;rc<st.length;rc++){if((ut=st.charCodeAt(rc))>55295&&ut<57344){if(!Hl){ut>56319||rc+1===st.length?(at[ot++]=239,at[ot++]=191,at[ot++]=189):Hl=ut;continue}if(ut<56320){at[ot++]=239,at[ot++]=191,at[ot++]=189,Hl=ut;continue}ut=Hl-55296<<10|ut-56320|65536,Hl=null}else Hl&&(at[ot++]=239,at[ot++]=191,at[ot++]=189,Hl=null);ut<128?at[ot++]=ut:(ut<2048?at[ot++]=ut>>6|192:(ut<65536?at[ot++]=ut>>12|224:(at[ot++]=ut>>18|240,at[ot++]=ut>>12&63|128),at[ot++]=ut>>6&63|128),at[ot++]=63&ut|128)}return ot}(this.buf,at,this.pos);var ot=this.pos-st;ot>=128&&a(st,ot,this),this.pos=st-1,this.writeVarint(ot),this.pos+=ot},writeFloat:function(st){this.realloc(4),at.write(this.buf,st,this.pos,!0,23,4),this.pos+=4},writeDouble:function(st){this.realloc(8),at.write(this.buf,st,this.pos,!0,52,8),this.pos+=8},writeBytes:function(at){var st=at.length;this.writeVarint(st),this.realloc(st);for(var ot=0;ot<st;ot++)this.buf[this.pos++]=at[ot]},writeRawMessage:function(at,st){this.pos++;var ot=this.pos;at(st,this);var ut=this.pos-ot;ut>=128&&a(ot,ut,this),this.pos=ot-1,this.writeVarint(ut),this.pos+=ut},writeMessage:function(at,st,ot){this.writeTag(at,e.Bytes),this.writeRawMessage(st,ot)},writePackedVarint:function(at,st){st.length&&this.writeMessage(at,l,st)},writePackedSVarint:function(at,st){st.length&&this.writeMessage(at,u,st)},writePackedBoolean:function(at,st){st.length&&this.writeMessage(at,p,st)},writePackedFloat:function(at,st){st.length&&this.writeMessage(at,c,st)},writePackedDouble:function(at,st){st.length&&this.writeMessage(at,h,st)},writePackedFixed32:function(at,st){st.length&&this.writeMessage(at,f,st)},writePackedSFixed32:function(at,st){st.length&&this.writeMessage(at,d,st)},writePackedFixed64:function(at,st){st.length&&this.writeMessage(at,y,st)},writePackedSFixed64:function(at,st){st.length&&this.writeMessage(at,m,st)},writeBytesField:function(at,st){this.writeTag(at,e.Bytes),this.writeBytes(st)},writeFixed32Field:function(at,st){this.writeTag(at,e.Fixed32),this.writeFixed32(st)},writeSFixed32Field:function(at,st){this.writeTag(at,e.Fixed32),this.writeSFixed32(st)},writeFixed64Field:function(at,st){this.writeTag(at,e.Fixed64),this.writeFixed64(st)},writeSFixed64Field:function(at,st){this.writeTag(at,e.Fixed64),this.writeSFixed64(st)},writeVarintField:function(at,st){this.writeTag(at,e.Varint),this.writeVarint(st)},writeSVarintField:function(at,st){this.writeTag(at,e.Varint),this.writeSVarint(st)},writeStringField:function(at,st){this.writeTag(at,e.Bytes),this.writeString(st)},writeFloatField:function(at,st){this.writeTag(at,e.Fixed32),this.writeFloat(st)},writeDoubleField:function(at,st){this.writeTag(at,e.Fixed64),this.writeDouble(st)},writeBooleanField:function(at,st){this.writeVarintField(at,Boolean(st))}},Vm}var Wm,qm=e(Mu());function Tu(at){let st=0,ot=0;for(const sc of at)st+=sc.w*sc.h,ot=Math.max(ot,sc.w);at.sort(((at,st)=>st.h-at.h));const ut=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(st/.95)),ot),h:1/0}];let Hl=0,rc=0;for(const sc of at)for(let at=ut.length-1;at>=0;at--){const st=ut[at];if(!(sc.w>st.w||sc.h>st.h)){if(sc.x=st.x,sc.y=st.y,rc=Math.max(rc,sc.y+sc.h),Hl=Math.max(Hl,sc.x+sc.w),sc.w===st.w&&sc.h===st.h){const st=ut.pop();at<ut.length&&(ut[at]=st)}else sc.h===st.h?(st.x+=sc.w,st.w-=sc.w):sc.w===st.w?(st.y+=sc.h,st.h-=sc.h):(ut.push({x:st.x+sc.w,y:st.y,w:st.w-sc.w,h:sc.h}),st.y+=sc.h,st.h-=sc.h);break}}return{w:Hl,h:rc,fill:st/(Hl*rc)||0}}class Cu{constructor(at,st){let{pixelRatio:ot,version:ut,stretchX:Hl,stretchY:rc,content:sc,textFitWidth:oc,textFitHeight:_c}=st;this.paddedRect=at,this.pixelRatio=ot,this.stretchX=Hl,this.stretchY=rc,this.content=sc,this.version=ut,this.textFitWidth=oc,this.textFitHeight=_c}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class Bu{constructor(at,st){const ot={},ut={};this.haveRenderCallbacks=[];const Hl=[];this.addImages(at,ot,Hl),this.addImages(st,ut,Hl);const{w:rc,h:sc}=Tu(Hl),oc=new Aa({width:rc||1,height:sc||1});for(const _c in at){const st=at[_c],ut=ot[_c].paddedRect;Aa.copy(st.data,oc,{x:0,y:0},{x:ut.x+1,y:ut.y+1},st.data)}for(const _c in st){const at=st[_c],ot=ut[_c].paddedRect,Hl=ot.x+1,rc=ot.y+1,sc=at.data.width,wc=at.data.height;Aa.copy(at.data,oc,{x:0,y:0},{x:Hl,y:rc},at.data),Aa.copy(at.data,oc,{x:0,y:wc-1},{x:Hl,y:rc-1},{width:sc,height:1}),Aa.copy(at.data,oc,{x:0,y:0},{x:Hl,y:rc+wc},{width:sc,height:1}),Aa.copy(at.data,oc,{x:sc-1,y:0},{x:Hl-1,y:rc},{width:1,height:wc}),Aa.copy(at.data,oc,{x:0,y:0},{x:Hl+sc,y:rc},{width:1,height:wc})}this.image=oc,this.iconPositions=ot,this.patternPositions=ut}addImages(at,st,ot){for(const ut in at){const Hl=at[ut],rc={x:0,y:0,w:Hl.data.width+2,h:Hl.data.height+2};ot.push(rc),st[ut]=new Cu(rc,Hl),Hl.hasRenderCallback&&this.haveRenderCallbacks.push(ut)}}patchUpdatedImages(at,st){at.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const ot in at.updatedImages)this.patchUpdatedImage(this.iconPositions[ot],at.getImage(ot),st),this.patchUpdatedImage(this.patternPositions[ot],at.getImage(ot),st)}patchUpdatedImage(at,st,ot){if(!at||!st)return;if(at.version===st.version)return;at.version=st.version;const[ut,Hl]=at.tl;ot.update(st.data,void 0,{x:ut,y:Hl})}}ci("ImagePosition",Cu),ci("ImageAtlas",Bu),function(at){at[at.none=0]="none",at[at.horizontal=1]="horizontal",at[at.vertical=2]="vertical",at[at.horizontalOnly=3]="horizontalOnly"}(Wm||(Wm={}));class Eu{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(at,st,ot){const ut=new Eu;return ut.scale=at||1,ut.fontStack=st,ut.verticalAlign=ot||"bottom",ut}static forImage(at,st){const ot=new Eu;return ot.imageName=at,ot.verticalAlign=st||"bottom",ot}}class Vu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(at,st){const ot=new Vu;for(let ut=0;ut<at.sections.length;ut++){const Hl=at.sections[ut];Hl.image?ot.addImageSection(Hl):ot.addTextSection(Hl,st)}return ot}length(){return this.text.length}getSection(at){return this.sections[this.sectionIndex[at]]}getSectionIndex(at){return this.sectionIndex[at]}getCharCode(at){return this.text.charCodeAt(at)}verticalizePunctuation(){this.text=function(at){let st="";for(let ot=0;ot<at.length;ot++){const ut=at.charCodeAt(ot+1)||null,Hl=at.charCodeAt(ot-1)||null;st+=ut&&Gi(ut)&&!jm[at[ot+1]]||Hl&&Gi(Hl)&&!jm[at[ot-1]]||!jm[at[ot]]?at[ot]:jm[at[ot]]}return st}(this.text)}trim(){let at=0;for(let ot=0;ot<this.text.length&&Ym[this.text.charCodeAt(ot)];ot++)at++;let st=this.text.length;for(let ot=this.text.length-1;ot>=0&&ot>=at&&Ym[this.text.charCodeAt(ot)];ot--)st--;this.text=this.text.substring(at,st),this.sectionIndex=this.sectionIndex.slice(at,st)}substring(at,st){const ot=new Vu;return ot.text=this.text.substring(at,st),ot.sectionIndex=this.sectionIndex.slice(at,st),ot.sections=this.sections,ot}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((at,st)=>Math.max(at,this.sections[st].scale)),0)}getMaxImageSize(at){let st=0,ot=0;for(let ut=0;ut<this.length();ut++){const Hl=this.getSection(ut);if(Hl.imageName){const ut=at[Hl.imageName];if(!ut)continue;const rc=ut.displaySize;st=Math.max(st,rc[0]),ot=Math.max(ot,rc[1])}}return{maxImageWidth:st,maxImageHeight:ot}}addTextSection(at,st){this.text+=at.text,this.sections.push(Eu.forText(at.scale,at.fontStack||st,at.verticalAlign));const ot=this.sections.length-1;for(let ut=0;ut<at.text.length;++ut)this.sectionIndex.push(ot)}addImageSection(at){const st=at.image?at.image.name:"";if(0===st.length)return void w("Can't add FormattedSection with an empty image.");const ot=this.getNextImageSectionCharCode();ot?(this.text+=String.fromCharCode(ot),this.sections.push(Eu.forImage(st,at.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):w("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Fu(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu){const uu=Vu.fromFeature(at,Hl);let pu;iu===Wm.vertical&&uu.verticalizePunctuation();const{processBidirectionalText:mu,processStyledBidirectionalText:gu}=Xd;if(mu&&1===uu.sections.length){pu=[];const at=mu(uu.toString(),qu(uu,wc,rc,st,ut,lu));for(const st of at){const at=new Vu;at.text=st,at.sections=uu.sections;for(let ot=0;ot<st.length;ot++)at.sectionIndex.push(0);pu.push(at)}}else if(gu){pu=[];const at=gu(uu.text,uu.sectionIndex,qu(uu,wc,rc,st,ut,lu));for(const st of at){const at=new Vu;at.text=st[0],at.sectionIndex=st[1],at.sections=uu.sections,pu.push(at)}}else pu=function(at,st){const ot=[],ut=at.text;let Hl=0;for(const rc of st)ot.push(at.substring(Hl,rc)),Hl=rc;return Hl<ut.length&&ot.push(at.substring(Hl,ut.length)),ot}(uu,qu(uu,wc,rc,st,ut,lu));const Au=[],yu={positionedLines:Au,text:uu.toString(),top:Sc[1],bottom:Sc[1],left:Sc[0],right:Sc[0],writingMode:iu,iconsInText:!1,verticalizable:!1};return function(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu){let su=0,lu=0,cu=0,uu=0;const pu="right"===oc?1:"left"===oc?0:.5,mu=Zm/iu;let gu=0;for(const _u of Hl){_u.trim();const Hl=_u.getMaxScale(),sc={positionedGlyphs:[],lineOffset:0};at.positionedLines[gu]=sc;const oc=sc.positionedGlyphs;let iu=0;if(!_u.length()){lu+=rc,++gu;continue}const Au=Xu(ut,_u,mu);for(let rc=0;rc<_u.length();rc++){const sc=_u.getSection(rc),cu=_u.getSectionIndex(rc),uu=_u.getCharCode(rc),pu=Yu(_c,Sc,uu);let gu;if(sc.imageName){if(at.iconsInText=!0,sc.scale=sc.scale*mu,gu=Ju(sc,pu,Hl,Au,ut),!gu)continue;iu=Math.max(iu,gu.imageOffset)}else if(gu=Hu(sc,uu,pu,Au,st,ot),!gu)continue;const{rect:yu,metrics:xu,baselineOffset:Su}=gu;oc.push({glyph:uu,imageName:sc.imageName,x:su,y:lu+Su+-17,vertical:pu,scale:sc.scale,fontStack:sc.fontStack,sectionIndex:cu,metrics:xu,rect:yu}),pu?(at.verticalizable=!0,su+=(sc.imageName?xu.advance:Zm)*sc.scale+wc):su+=xu.advance*sc.scale+wc}0!==oc.length&&(cu=Math.max(su-wc,cu),Wu(oc,0,oc.length-1,pu)),su=0,sc.lineOffset=Math.max(iu,(Hl-1)*Zm);const yu=rc*Hl+iu;lu+=yu,uu=Math.max(yu,uu),++gu}const{horizontalAlign:Au,verticalAlign:yu}=Gu(sc);(function(at,st,ot,ut,Hl,rc,sc,oc,_c){const wc=(st-ot)*Hl;let Sc=0;Sc=rc!==sc?-oc*ut- -17:-ut*_c*sc+.5*sc;for(const iu of at)for(const at of iu.positionedGlyphs)at.x+=wc,at.y+=Sc})(at.positionedLines,pu,Au,yu,cu,uu,rc,lu,Hl.length),at.top+=-yu*lu,at.bottom=at.top+lu,at.left+=-Au*cu,at.right=at.left+cu}(yu,st,ot,ut,pu,sc,oc,_c,iu,wc,su,cu),!function(at){for(const st of at)if(0!==st.positionedGlyphs.length)return!1;return!0}(Au)&&yu}const Ym={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Qm={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Km={40:!0};function Ou(at,st,ot,ut,Hl,rc){if(st.imageName){const at=ut[st.imageName];return at?at.displaySize[0]*st.scale*Zm/rc+Hl:0}{const ut=ot[st.fontStack],rc=ut&&ut[at];return rc?rc.metrics.advance*st.scale+Hl:0}}function Ru(at,st,ot,ut){const Hl=Math.pow(at-st,2);return ut?at<st?Hl/2:2*Hl:Hl+Math.abs(ot)*ot}function Nu(at,st,ot){let ut=0;return 10===at&&(ut-=1e4),ot&&(ut+=150),40!==at&&65288!==at||(ut+=50),41!==st&&65289!==st||(ut+=50),ut}function ju(at,st,ot,ut,Hl,rc){let sc=null,oc=Ru(st,ot,Hl,rc);for(const _c of ut){const at=Ru(st-_c.x,ot,Hl,rc)+_c.badness;at<=oc&&(sc=_c,oc=at)}return{index:at,x:st,priorBreak:sc,badness:oc}}function Uu(at){return at?Uu(at.priorBreak).concat(at.index):[]}function qu(at,st,ot,ut,Hl,rc){if(!at)return[];const sc=[],oc=function(at,st,ot,ut,Hl,rc){let sc=0;for(let oc=0;oc<at.length();oc++){const ot=at.getSection(oc);sc+=Ou(at.getCharCode(oc),ot,ut,Hl,st,rc)}return sc/Math.max(1,Math.ceil(sc/ot))}(at,st,ot,ut,Hl,rc),_c=at.text.indexOf("\u200b")>=0;let wc=0;for(let iu=0;iu<at.length();iu++){const ot=at.getSection(iu),su=at.getCharCode(iu);if(Ym[su]||(wc+=Ou(su,ot,ut,Hl,st,rc)),iu<at.length()-1){const st=!((Sc=su)<11904)&&(!!Fi(Sc)||!!Ei(Sc)||!!Ci(Sc)||!!Pi(Sc)||!!Bi(Sc)||!!Li(Sc)||!!zi(Sc)||!!Vi(Sc)||Qd.test(String.fromCodePoint(Sc)));(Qm[su]||st||ot.imageName||iu!==at.length()-2&&Km[at.getCharCode(iu+1)])&&sc.push(ju(iu+1,wc,oc,sc,Nu(su,at.getCharCode(iu+1),st&&_c),!1))}}var Sc;return Uu(ju(at.length(),wc,oc,sc,0,!0))}function Gu(at){let st=.5,ot=.5;switch(at){case"right":case"top-right":case"bottom-right":st=1;break;case"left":case"top-left":case"bottom-left":st=0}switch(at){case"bottom":case"bottom-right":case"bottom-left":ot=1;break;case"top":case"top-right":case"top-left":ot=0}return{horizontalAlign:st,verticalAlign:ot}}function Xu(at,st,ot){const ut=st.getMaxScale()*Zm,{maxImageWidth:Hl,maxImageHeight:rc}=st.getMaxImageSize(at),sc=Math.max(ut,rc*ot);return{verticalLineContentWidth:Math.max(ut,Hl*ot),horizontalLineContentHeight:sc}}function Zu(at){switch(at){case"top":return 0;case"center":return.5;default:return 1}}function Yu(at,st,ot){return!(at===Wm.horizontal||!st&&!qi(ot)||st&&(Ym[ot]||(ut=ot,/\p{sc=Arab}/u.test(String.fromCodePoint(ut)))));var ut}function Hu(at,st,ot,ut,Hl,rc){const sc=rc[at.fontStack],oc=function(at,st,ot,ut){if(at&&at.rect)return at;const Hl=st[ot.fontStack],rc=Hl&&Hl[ut];return rc?{rect:null,metrics:rc.metrics}:null}(sc&&sc[st],Hl,at,st);if(null===oc)return null;let _c;if(ot)_c=ut.verticalLineContentWidth-at.scale*Zm;else{const st=Zu(at.verticalAlign);_c=(ut.horizontalLineContentHeight-at.scale*Zm)*st}return{rect:oc.rect,metrics:oc.metrics,baselineOffset:_c}}function Ju(at,st,ot,ut,Hl){const rc=Hl[at.imageName];if(!rc)return null;const sc=rc.paddedRect,oc=rc.displaySize,_c={width:oc[0],height:oc[1],left:1,top:-3,advance:st?oc[1]:oc[0]};let wc;if(st)wc=ut.verticalLineContentWidth-oc[1]*at.scale;else{const st=Zu(at.verticalAlign);wc=(ut.horizontalLineContentHeight-oc[1]*at.scale)*st}return{rect:sc,metrics:_c,baselineOffset:wc,imageOffset:(st?oc[0]:oc[1])*at.scale-Zm*ot}}function Wu(at,st,ot,ut){if(0===ut)return;const Hl=at[ot],rc=(at[ot].x+Hl.metrics.advance*Hl.scale)*ut;for(let sc=st;sc<=ot;sc++)at[sc].x-=rc}function Ku(at,st,ot){const{horizontalAlign:ut,verticalAlign:Hl}=Gu(ot),rc=st[0]-at.displaySize[0]*ut,sc=st[1]-at.displaySize[1]*Hl;return{image:at,top:sc,bottom:sc+at.displaySize[1],left:rc,right:rc+at.displaySize[0]}}function Qu(at){var st,ot;let ut=at.left,Hl=at.top,rc=at.right-ut,sc=at.bottom-Hl;const oc=null!==(st=at.image.textFitWidth)&&void 0!==st?st:"stretchOrShrink",_c=null!==(ot=at.image.textFitHeight)&&void 0!==ot?ot:"stretchOrShrink",wc=(at.image.content[2]-at.image.content[0])/(at.image.content[3]-at.image.content[1]);if("proportional"===_c){if("stretchOnly"===oc&&rc/sc<wc||"proportional"===oc){const at=Math.ceil(sc*wc);ut*=at/rc,rc=at}}else if("proportional"===oc&&"stretchOnly"===_c&&0!==wc&&rc/sc>wc){const at=Math.ceil(rc/wc);Hl*=at/sc,sc=at}return{x1:ut,y1:Hl,x2:ut+rc,y2:Hl+sc}}function tc(at,st,ot,ut,Hl,rc){const sc=at.image;let oc;if(sc.content){const at=sc.content,st=sc.pixelRatio||1;oc=[at[0]/st,at[1]/st,sc.displaySize[0]-at[2]/st,sc.displaySize[1]-at[3]/st]}const _c=st.left*rc,wc=st.right*rc;let Sc,iu,su,lu;"width"===ot||"both"===ot?(lu=Hl[0]+_c-ut[3],iu=Hl[0]+wc+ut[1]):(lu=Hl[0]+(_c+wc-sc.displaySize[0])/2,iu=lu+sc.displaySize[0]);const cu=st.top*rc,uu=st.bottom*rc;return"height"===ot||"both"===ot?(Sc=Hl[1]+cu-ut[0],su=Hl[1]+uu+ut[2]):(Sc=Hl[1]+(cu+uu-sc.displaySize[1])/2,su=Sc+sc.displaySize[1]),{image:sc,top:Sc,right:iu,bottom:su,left:lu,collisionPadding:oc}}const Xm=128,Jm=32640;function nc(at,st){const{expression:ot}=st;if("constant"===ot.kind)return{kind:"constant",layoutSize:ot.evaluate(new Wi(at+1))};if("source"===ot.kind)return{kind:"source"};{const{zoomStops:st,interpolationType:ut}=ot;let Hl=0;for(;Hl<st.length&&st[Hl]<=at;)Hl++;Hl=Math.max(0,Hl-1);let rc=Hl;for(;rc<st.length&&st[rc]<at+1;)rc++;rc=Math.min(st.length-1,rc);const sc=st[Hl],oc=st[rc];return"composite"===ot.kind?{kind:"composite",minZoom:sc,maxZoom:oc,interpolationType:ut}:{kind:"camera",minZoom:sc,maxZoom:oc,minSize:ot.evaluate(new Wi(sc)),maxSize:ot.evaluate(new Wi(oc)),interpolationType:ut}}}function ic(at,st,ot){let ut="never";const Hl=at.get(st);return Hl?ut=Hl:at.get(ot)&&(ut="always"),ut}const $m=_m.VectorTileFeature.types,eg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function ac(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su){const lu=oc?Math.min(Jm,Math.round(oc[0])):0,cu=oc?Math.min(Jm,Math.round(oc[1])):0;at.emplaceBack(st,ot,Math.round(32*ut),Math.round(32*Hl),rc,sc,(lu<<1)+(_c?1:0),cu,16*wc,16*Sc,256*iu,256*su)}function lc(at,st,ot){at.emplaceBack(st.x,st.y,ot),at.emplaceBack(st.x,st.y,ot),at.emplaceBack(st.x,st.y,ot),at.emplaceBack(st.x,st.y,ot)}function uc(at){for(const st of at.sections)if(Hi(st.text))return!0;return!1}class cc{constructor(at){this.layoutVertexArray=new ao,this.indexArray=new po,this.programConfigurations=at,this.segments=new go,this.dynamicLayoutVertexArray=new lo,this.opacityVertexArray=new uo,this.hasVisibleVertices=!1,this.placedSymbolArray=new Gs}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(at,st,ot,ut){this.isEmpty()||(ot&&(this.layoutVertexBuffer=at.createVertexBuffer(this.layoutVertexArray,Rm.members),this.indexBuffer=at.createIndexBuffer(this.indexArray,st),this.dynamicLayoutVertexBuffer=at.createVertexBuffer(this.dynamicLayoutVertexArray,Om.members,!0),this.opacityVertexBuffer=at.createVertexBuffer(this.opacityVertexArray,eg,!0),this.opacityVertexBuffer.itemSize=1),(ot||ut)&&this.programConfigurations.upload(at))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}ci("SymbolBuffers",cc);class hc{constructor(at,st,ot){this.layoutVertexArray=new at,this.layoutAttributes=st,this.indexArray=new ot,this.segments=new go,this.collisionVertexArray=new ho}upload(at){this.layoutVertexBuffer=at.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=at.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=at.createVertexBuffer(this.collisionVertexArray,Bm.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}ci("CollisionBuffers",hc);class pc{constructor(at){this.collisionBoxArray=at.collisionBoxArray,this.zoom=at.zoom,this.globalState=at.globalState,this.overscaling=at.overscaling,this.layers=at.layers,this.layerIds=this.layers.map((at=>at.id)),this.index=at.index,this.pixelRatio=at.pixelRatio,this.sourceLayerIndex=at.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const st=this.layers[0]._unevaluatedLayout._values;this.textSizeData=nc(this.zoom,st["text-size"]),this.iconSizeData=nc(this.zoom,st["icon-size"]);const ot=this.layers[0].layout,ut=ot.get("symbol-sort-key"),Hl=ot.get("symbol-z-order");this.canOverlap="never"!==ic(ot,"text-overlap","text-allow-overlap")||"never"!==ic(ot,"icon-overlap","icon-allow-overlap")||ot.get("text-ignore-placement")||ot.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==Hl&&!ut.isConstant(),this.sortFeaturesByY=("viewport-y"===Hl||"auto"===Hl&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===ot.get("symbol-placement")&&(this.writingModes=ot.get("text-writing-mode").map((at=>Wm[at]))),this.stateDependentLayerIds=this.layers.filter((at=>at.isStateDependent())).map((at=>at.id)),this.sourceID=at.sourceID}createArrays(){this.text=new cc(new Uo(this.layers,this.zoom,(at=>/^text/.test(at)))),this.icon=new cc(new Uo(this.layers,this.zoom,(at=>/^icon/.test(at)))),this.glyphOffsetArray=new Ys,this.lineVertexArray=new Hs,this.symbolInstances=new Zs,this.textAnchorOffsets=new Ws}calculateGlyphDependencies(at,st,ot,ut,Hl){for(let rc=0;rc<at.length;rc++)if(st[at.charCodeAt(rc)]=!0,(ot||ut)&&Hl){const ot=jm[at.charAt(rc)];ot&&(st[ot.charCodeAt(0)]=!0)}}populate(at,st,ot){const ut=this.layers[0],Hl=ut.layout,rc=Hl.get("text-font"),sc=Hl.get("text-field"),oc=Hl.get("icon-image"),_c=("constant"!==sc.value.kind||sc.value.value instanceof Bt&&!sc.value.value.isEmpty()||sc.value.value.toString().length>0)&&("constant"!==rc.value.kind||rc.value.value.length>0),wc="constant"!==oc.value.kind||!!oc.value.value||Object.keys(oc.parameters).length>0,Sc=Hl.get("symbol-sort-key");if(this.features=[],!_c&&!wc)return;const iu=st.iconDependencies,su=st.glyphDependencies,lu=st.availableImages,cu=new Wi(this.zoom,{globalState:this.globalState});for(const{feature:uu,id:pu,index:mu,sourceLayerIndex:gu}of at){const at=ut._featureFilter.needGeometry,st=Ho(uu,at);if(!ut._featureFilter.filter(cu,st,ot))continue;let sc,oc;if(at||(st.geometry=Yo(uu)),_c){const at=ut.getValueAndResolveTokens("text-field",st,ot,lu),Hl=Bt.factory(at),rc=this.hasRTLText=this.hasRTLText||uc(Hl);(!rc||"unavailable"===Xd.getRTLTextPluginStatus()||rc&&Xd.isParsed())&&(sc=vu(Hl,ut,st))}if(wc){const at=ut.getValueAndResolveTokens("icon-image",st,ot,lu);oc=at instanceof Ot?at:Ot.fromString(at)}if(!sc&&!oc)continue;const Au=this.sortFeaturesByKey?Sc.evaluate(st,{},ot):void 0;if(this.features.push({id:pu,text:sc,icon:oc,index:mu,sourceLayerIndex:gu,geometry:st.geometry,properties:uu.properties,type:$m[uu.type],sortKey:Au}),oc&&(iu[oc.name]=!0),sc){const at=rc.evaluate(st,{},ot).join(","),ut="viewport"!==Hl.get("text-rotation-alignment")&&"point"!==Hl.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Wm.vertical)>=0;for(const st of sc.sections)if(st.image)iu[st.image.name]=!0;else{const ot=$i(sc.toString()),Hl=st.fontStack||at,rc=su[Hl]=su[Hl]||{};this.calculateGlyphDependencies(st.text,rc,ut,this.allowVerticalPlacement,ot)}}}"line"===Hl.get("symbol-placement")&&(this.features=function(at){const st={},ot={},ut=[];let Hl=0;function s(st){ut.push(at[st]),Hl++}function o(at,st,Hl){const rc=ot[at];return delete ot[at],ot[st]=rc,ut[rc].geometry[0].pop(),ut[rc].geometry[0]=ut[rc].geometry[0].concat(Hl[0]),rc}function a(at,ot,Hl){const rc=st[ot];return delete st[ot],st[at]=rc,ut[rc].geometry[0].shift(),ut[rc].geometry[0]=Hl[0].concat(ut[rc].geometry[0]),rc}function l(at,st,ot){const ut=ot?st[0][st[0].length-1]:st[0][0];return`${at}:${ut.x}:${ut.y}`}for(let rc=0;rc<at.length;rc++){const sc=at[rc],oc=sc.geometry,_c=sc.text?sc.text.toString():null;if(!_c){s(rc);continue}const wc=l(_c,oc),Sc=l(_c,oc,!0);if(wc in ot&&Sc in st&&ot[wc]!==st[Sc]){const at=a(wc,Sc,oc),Hl=o(wc,Sc,ut[at].geometry);delete st[wc],delete ot[Sc],ot[l(_c,ut[Hl].geometry,!0)]=Hl,ut[at].geometry=null}else wc in ot?o(wc,Sc,oc):Sc in st?a(wc,Sc,oc):(s(rc),st[wc]=Hl-1,ot[Sc]=Hl-1)}return ut.filter((at=>at.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((at,st)=>at.sortKey-st.sortKey))}update(at,st,ot){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(at,st,this.layers,ot),this.icon.programConfigurations.updatePaintArrays(at,st,this.layers,ot))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(at){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(at),this.iconCollisionBox.upload(at)),this.text.upload(at,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(at,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(at,st){const ot=this.lineVertexArray.length;if(void 0!==at.segment){let ot=at.dist(st[at.segment+1]),ut=at.dist(st[at.segment]);const Hl={};for(let rc=at.segment+1;rc<st.length;rc++)Hl[rc]={x:st[rc].x,y:st[rc].y,tileUnitDistanceFromAnchor:ot},rc<st.length-1&&(ot+=st[rc+1].dist(st[rc]));for(let rc=at.segment||0;rc>=0;rc--)Hl[rc]={x:st[rc].x,y:st[rc].y,tileUnitDistanceFromAnchor:ut},rc>0&&(ut+=st[rc-1].dist(st[rc]));for(let at=0;at<st.length;at++){const st=Hl[at];this.lineVertexArray.emplaceBack(st.x,st.y,st.tileUnitDistanceFromAnchor)}}return{lineStartIndex:ot,lineLength:this.lineVertexArray.length-ot}}addSymbols(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu){const su=at.indexArray,lu=at.layoutVertexArray,cu=at.segments.prepareSegment(4*st.length,lu,su,this.canOverlap?rc.sortKey:void 0),uu=this.glyphOffsetArray.length,pu=cu.vertexLength,mu=this.allowVerticalPlacement&&sc===Wm.vertical?Math.PI/2:0,gu=rc.text&&rc.text.sections;for(let Au=0;Au<st.length;Au++){const{tl:ut,tr:Hl,bl:sc,br:_c,tex:wc,pixelOffsetTL:Sc,pixelOffsetBR:uu,minFontScaleX:pu,minFontScaleY:yu,glyphOffset:_u,isSDF:xu,sectionIndex:Su}=st[Au],Du=cu.vertexLength,Lu=_u[1];ac(lu,oc.x,oc.y,ut.x,Lu+ut.y,wc.x,wc.y,ot,xu,Sc.x,Sc.y,pu,yu),ac(lu,oc.x,oc.y,Hl.x,Lu+Hl.y,wc.x+wc.w,wc.y,ot,xu,uu.x,Sc.y,pu,yu),ac(lu,oc.x,oc.y,sc.x,Lu+sc.y,wc.x,wc.y+wc.h,ot,xu,Sc.x,uu.y,pu,yu),ac(lu,oc.x,oc.y,_c.x,Lu+_c.y,wc.x+wc.w,wc.y+wc.h,ot,xu,uu.x,uu.y,pu,yu),lc(at.dynamicLayoutVertexArray,oc,mu),su.emplaceBack(Du,Du+2,Du+1),su.emplaceBack(Du+1,Du+2,Du+3),cu.vertexLength+=4,cu.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(_u[0]),Au!==st.length-1&&Su===st[Au+1].sectionIndex||at.programConfigurations.populatePaintArrays(lu.length,rc,rc.index,{},iu,gu&&gu[Su])}at.placedSymbolArray.emplaceBack(oc.x,oc.y,uu,this.glyphOffsetArray.length-uu,pu,_c,wc,oc.segment,ot?ot[0]:0,ot?ot[1]:0,ut[0],ut[1],sc,0,!1,0,Sc)}_addCollisionDebugVertex(at,st,ot,ut,Hl,rc){return st.emplaceBack(0,0),at.emplaceBack(ot.x,ot.y,ut,Hl,Math.round(rc.x),Math.round(rc.y))}addCollisionDebugVertices(at,st,ot,ut,rc,sc,oc){const _c=rc.segments.prepareSegment(4,rc.layoutVertexArray,rc.indexArray),wc=_c.vertexLength,Sc=rc.layoutVertexArray,iu=rc.collisionVertexArray,su=oc.anchorX,lu=oc.anchorY;this._addCollisionDebugVertex(Sc,iu,sc,su,lu,new Hl(at,st)),this._addCollisionDebugVertex(Sc,iu,sc,su,lu,new Hl(ot,st)),this._addCollisionDebugVertex(Sc,iu,sc,su,lu,new Hl(ot,ut)),this._addCollisionDebugVertex(Sc,iu,sc,su,lu,new Hl(at,ut)),_c.vertexLength+=4;const cu=rc.indexArray;cu.emplaceBack(wc,wc+1),cu.emplaceBack(wc+1,wc+2),cu.emplaceBack(wc+2,wc+3),cu.emplaceBack(wc+3,wc),_c.primitiveLength+=4}addDebugCollisionBoxes(at,st,ot,ut){for(let Hl=at;Hl<st;Hl++){const at=this.collisionBoxArray.get(Hl);this.addCollisionDebugVertices(at.x1,at.y1,at.x2,at.y2,ut?this.textCollisionBox:this.iconCollisionBox,at.anchorPoint,ot)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new hc(co,Fm.members,fo),this.iconCollisionBox=new hc(co,Fm.members,fo);for(let at=0;at<this.symbolInstances.length;at++){const st=this.symbolInstances.get(at);this.addDebugCollisionBoxes(st.textBoxStartIndex,st.textBoxEndIndex,st,!0),this.addDebugCollisionBoxes(st.verticalTextBoxStartIndex,st.verticalTextBoxEndIndex,st,!0),this.addDebugCollisionBoxes(st.iconBoxStartIndex,st.iconBoxEndIndex,st,!1),this.addDebugCollisionBoxes(st.verticalIconBoxStartIndex,st.verticalIconBoxEndIndex,st,!1)}}_deserializeCollisionBoxesForSymbol(at,st,ot,ut,Hl,rc,sc,oc,_c){const wc={};for(let Sc=st;Sc<ot;Sc++){const st=at.get(Sc);wc.textBox={x1:st.x1,y1:st.y1,x2:st.x2,y2:st.y2,anchorPointX:st.anchorPointX,anchorPointY:st.anchorPointY},wc.textFeatureIndex=st.featureIndex;break}for(let Sc=ut;Sc<Hl;Sc++){const st=at.get(Sc);wc.verticalTextBox={x1:st.x1,y1:st.y1,x2:st.x2,y2:st.y2,anchorPointX:st.anchorPointX,anchorPointY:st.anchorPointY},wc.verticalTextFeatureIndex=st.featureIndex;break}for(let Sc=rc;Sc<sc;Sc++){const st=at.get(Sc);wc.iconBox={x1:st.x1,y1:st.y1,x2:st.x2,y2:st.y2,anchorPointX:st.anchorPointX,anchorPointY:st.anchorPointY},wc.iconFeatureIndex=st.featureIndex;break}for(let Sc=oc;Sc<_c;Sc++){const st=at.get(Sc);wc.verticalIconBox={x1:st.x1,y1:st.y1,x2:st.x2,y2:st.y2,anchorPointX:st.anchorPointX,anchorPointY:st.anchorPointY},wc.verticalIconFeatureIndex=st.featureIndex;break}return wc}deserializeCollisionBoxes(at){this.collisionArrays=[];for(let st=0;st<this.symbolInstances.length;st++){const ot=this.symbolInstances.get(st);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(at,ot.textBoxStartIndex,ot.textBoxEndIndex,ot.verticalTextBoxStartIndex,ot.verticalTextBoxEndIndex,ot.iconBoxStartIndex,ot.iconBoxEndIndex,ot.verticalIconBoxStartIndex,ot.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(at,st){const ot=at.placedSymbolArray.get(st),ut=ot.vertexStartIndex+4*ot.numGlyphs;for(let Hl=ot.vertexStartIndex;Hl<ut;Hl+=4)at.indexArray.emplaceBack(Hl,Hl+2,Hl+1),at.indexArray.emplaceBack(Hl+1,Hl+2,Hl+3)}getSortedSymbolIndexes(at){if(this.sortedAngle===at&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const st=Math.sin(at),ot=Math.cos(at),ut=[],Hl=[],rc=[];for(let sc=0;sc<this.symbolInstances.length;++sc){rc.push(sc);const at=this.symbolInstances.get(sc);ut.push(0|Math.round(st*at.anchorX+ot*at.anchorY)),Hl.push(at.featureIndex)}return rc.sort(((at,st)=>ut[at]-ut[st]||Hl[st]-Hl[at])),rc}addToSortKeyRanges(at,st){const ot=this.sortKeyRanges[this.sortKeyRanges.length-1];ot&&ot.sortKey===st?ot.symbolInstanceEnd=at+1:this.sortKeyRanges.push({sortKey:st,symbolInstanceStart:at,symbolInstanceEnd:at+1})}sortFeatures(at){if(this.sortFeaturesByY&&this.sortedAngle!==at&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(at),this.sortedAngle=at,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const at of this.symbolInstanceIndexes){const st=this.symbolInstances.get(at);this.featureSortOrder.push(st.featureIndex),[st.rightJustifiedTextSymbolIndex,st.centerJustifiedTextSymbolIndex,st.leftJustifiedTextSymbolIndex].forEach(((at,st,ot)=>{at>=0&&ot.indexOf(at)===st&&this.addIndicesForPlacedSymbol(this.text,at)})),st.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,st.verticalPlacedTextSymbolIndex),st.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,st.placedIconSymbolIndex),st.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,st.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let tg,ig;ci("SymbolBucket",pc,{omit:["layers","collisionBoxArray","features","compareText"]}),pc.MAX_GLYPHS=65535,pc.addDynamicAttributes=lc;var ng={get paint(){return ig=ig||new hs({"icon-opacity":new as(uu.paint_symbol["icon-opacity"]),"icon-color":new as(uu.paint_symbol["icon-color"]),"icon-halo-color":new as(uu.paint_symbol["icon-halo-color"]),"icon-halo-width":new as(uu.paint_symbol["icon-halo-width"]),"icon-halo-blur":new as(uu.paint_symbol["icon-halo-blur"]),"icon-translate":new os(uu.paint_symbol["icon-translate"]),"icon-translate-anchor":new os(uu.paint_symbol["icon-translate-anchor"]),"text-opacity":new as(uu.paint_symbol["text-opacity"]),"text-color":new as(uu.paint_symbol["text-color"],{runtimeType:_u,getOverride:at=>at.textColor,hasOverride:at=>!!at.textColor}),"text-halo-color":new as(uu.paint_symbol["text-halo-color"]),"text-halo-width":new as(uu.paint_symbol["text-halo-width"]),"text-halo-blur":new as(uu.paint_symbol["text-halo-blur"]),"text-translate":new os(uu.paint_symbol["text-translate"]),"text-translate-anchor":new os(uu.paint_symbol["text-translate-anchor"])})},get layout(){return tg=tg||new hs({"symbol-placement":new os(uu.layout_symbol["symbol-placement"]),"symbol-spacing":new os(uu.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new os(uu.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new as(uu.layout_symbol["symbol-sort-key"]),"symbol-z-order":new os(uu.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new os(uu.layout_symbol["icon-allow-overlap"]),"icon-overlap":new os(uu.layout_symbol["icon-overlap"]),"icon-ignore-placement":new os(uu.layout_symbol["icon-ignore-placement"]),"icon-optional":new os(uu.layout_symbol["icon-optional"]),"icon-rotation-alignment":new os(uu.layout_symbol["icon-rotation-alignment"]),"icon-size":new as(uu.layout_symbol["icon-size"]),"icon-text-fit":new os(uu.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new os(uu.layout_symbol["icon-text-fit-padding"]),"icon-image":new as(uu.layout_symbol["icon-image"]),"icon-rotate":new as(uu.layout_symbol["icon-rotate"]),"icon-padding":new as(uu.layout_symbol["icon-padding"]),"icon-keep-upright":new os(uu.layout_symbol["icon-keep-upright"]),"icon-offset":new as(uu.layout_symbol["icon-offset"]),"icon-anchor":new as(uu.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new os(uu.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new os(uu.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new os(uu.layout_symbol["text-rotation-alignment"]),"text-field":new as(uu.layout_symbol["text-field"]),"text-font":new as(uu.layout_symbol["text-font"]),"text-size":new as(uu.layout_symbol["text-size"]),"text-max-width":new as(uu.layout_symbol["text-max-width"]),"text-line-height":new os(uu.layout_symbol["text-line-height"]),"text-letter-spacing":new as(uu.layout_symbol["text-letter-spacing"]),"text-justify":new as(uu.layout_symbol["text-justify"]),"text-radial-offset":new as(uu.layout_symbol["text-radial-offset"]),"text-variable-anchor":new os(uu.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new as(uu.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new as(uu.layout_symbol["text-anchor"]),"text-max-angle":new os(uu.layout_symbol["text-max-angle"]),"text-writing-mode":new os(uu.layout_symbol["text-writing-mode"]),"text-rotate":new as(uu.layout_symbol["text-rotate"]),"text-padding":new os(uu.layout_symbol["text-padding"]),"text-keep-upright":new os(uu.layout_symbol["text-keep-upright"]),"text-transform":new as(uu.layout_symbol["text-transform"]),"text-offset":new as(uu.layout_symbol["text-offset"]),"text-allow-overlap":new os(uu.layout_symbol["text-allow-overlap"]),"text-overlap":new os(uu.layout_symbol["text-overlap"]),"text-ignore-placement":new os(uu.layout_symbol["text-ignore-placement"]),"text-optional":new os(uu.layout_symbol["text-optional"])})}};class mc{constructor(at){if(void 0===at.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=at.property.overrides?at.property.overrides.runtimeType:mu,this.defaultValue=at}evaluate(at){if(at.formattedSection){const st=this.defaultValue.property.overrides;if(st&&st.hasOverride(at.formattedSection))return st.getOverride(at.formattedSection)}return at.feature&&at.featureState?this.defaultValue.evaluate(at.feature,at.featureState):this.defaultValue.property.specification.default}eachChild(at){this.defaultValue.isConstant()||at(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}ci("FormatSectionOverride",mc,{omit:["defaultValue"]});class gc extends fs{constructor(at){super(at,ng)}recalculate(at,st){if(super.recalculate(at,st),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const at=this.layout.get("text-writing-mode");if(at){const st=[];for(const ot of at)st.indexOf(ot)<0&&st.push(ot);this.layout._values["text-writing-mode"]=st}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(at,st,ot,ut){const Hl=this.layout.get(at).evaluate(st,{},ot,ut),rc=this._unevaluatedLayout._values[at];return rc.isDataDriven()||rn(rc.value)||!Hl?Hl:function(at,st){return st.replace(/{([^{}]+)}/g,((st,ot)=>at&&ot in at?String(at[ot]):""))}(st.properties,Hl)}createBucket(at){return new pc(at)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const at of ng.paint.overridableProperties){if(!gc.hasPaintOverride(this.layout,at))continue;const st=this.paint.get(at),ot=new mc(st),ut=new en(ot,st.property.specification);let Hl=null;Hl="constant"===st.value.kind||"source"===st.value.kind?new sn("source",ut):new on("composite",ut,st.value.zoomStops),this.paint._values[at]=new is(st.property,Hl,st.parameters)}}_handleOverridablePaintPropertyUpdate(at,st,ot){return!(!this.layout||st.isDataDriven()||ot.isDataDriven())&&gc.hasPaintOverride(this.layout,at)}static hasPaintOverride(at,st){const ot=at.get("text-field"),ut=ng.paint.properties[st];let Hl=!1;const s=at=>{for(const st of at)if(ut.overrides&&ut.overrides.hasOverride(st))return void(Hl=!0)};if("constant"===ot.value.kind&&ot.value.value instanceof Bt)s(ot.value.value.sections);else if("source"===ot.value.kind){const t=at=>{Hl||(at instanceof Gt&&Ut(at.value)===$u?s(at.value.sections):at instanceof Pe?s(at.sections):at.eachChild(t))},at=ot.value;at._styleExpression&&t(at._styleExpression.expression)}return Hl}}let rg;var ag={get paint(){return rg=rg||new hs({"background-color":new os(uu.paint_background["background-color"]),"background-pattern":new us(uu.paint_background["background-pattern"]),"background-opacity":new os(uu.paint_background["background-opacity"])})}};class bc extends fs{constructor(at){super(at,ag)}}let sg;var og,lg={get paint(){return sg=sg||new hs({"raster-opacity":new os(uu.paint_raster["raster-opacity"]),"raster-hue-rotate":new os(uu.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new os(uu.paint_raster["raster-brightness-min"]),"raster-brightness-max":new os(uu.paint_raster["raster-brightness-max"]),"raster-saturation":new os(uu.paint_raster["raster-saturation"]),"raster-contrast":new os(uu.paint_raster["raster-contrast"]),"raster-resampling":new os(uu.paint_raster["raster-resampling"]),"raster-fade-duration":new os(uu.paint_raster["raster-fade-duration"])})}};class kc extends fs{constructor(at){super(at,lg)}}class Ac extends fs{constructor(at){super(at,{}),this.onAdd=at=>{this.implementation.onAdd&&this.implementation.onAdd(at,at.painter.context.gl)},this.onRemove=at=>{this.implementation.onRemove&&this.implementation.onRemove(at,at.painter.context.gl)},this.implementation=at}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}function Ic(at){if("custom"===at.type)return new Ac(at);switch(at.type){case"background":return new bc(at);case"circle":return new ma(at);case"color-relief":return new Da(at);case"fill":return new Il(at);case"fill-extrusion":return new Wl(at);case"heatmap":return new Ma(at);case"hillshade":return new Ta(at);case"line":return new fu(at);case"raster":return new kc(at);case"symbol":return new gc(at)}}class Mc{constructor(at){this.keyCache={},at&&this.replace(at)}replace(at){this._layerConfigs={},this._layers={},this.update(at,[])}update(at,st){for(const ut of at){this._layerConfigs[ut.id]=ut;const at=this._layers[ut.id]=Ic(ut);at._featureFilter=fn(at.filter),this.keyCache[ut.id]&&delete this.keyCache[ut.id]}for(const ut of st)delete this.keyCache[ut],delete this._layerConfigs[ut],delete this._layers[ut];this.familiesBySource={};const ot=function(at,st){const ot={};for(let Hl=0;Hl<at.length;Hl++){const ut=st&&st[at[Hl].id]||_n(at[Hl]);st&&(st[at[Hl].id]=ut);let rc=ot[ut];rc||(rc=ot[ut]=[]),rc.push(at[Hl])}const ut=[];for(const Hl in ot)ut.push(ot[Hl]);return ut}(Object.values(this._layerConfigs),this.keyCache);for(const ut of ot){const at=ut.map((at=>this._layers[at.id])),st=at[0];if("none"===st.visibility)continue;const ot=st.source||"";let Hl=this.familiesBySource[ot];Hl||(Hl=this.familiesBySource[ot]={});const rc=st.sourceLayer||"_geojsonTileLayer";let sc=Hl[rc];sc||(sc=Hl[rc]=[]),sc.push(at)}}}class zc{constructor(at){this._stringToNumber={},this._numberToString=[];for(let st=0;st<at.length;st++){const ot=at[st];this._stringToNumber[ot]=st,this._numberToString[st]=ot}}encode(at){return this._stringToNumber[at]}decode(at){if(at>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${at} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[at]}}class Pc{constructor(at,st,ot,ut,Hl){this.type="Feature",this._vectorTileFeature=at,at._z=st,at._x=ot,at._y=ut,this.properties=at.properties,this.id=Hl}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(at){this._geometry=at}toJSON(){const at={geometry:this.geometry};for(const st in this)"_geometry"!==st&&"_vectorTileFeature"!==st&&(at[st]=this[st]);return at}}class Tc{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(at){return this.minX=Math.min(this.minX,at.x),this.minY=Math.min(this.minY,at.y),this.maxX=Math.max(this.maxX,at.x),this.maxY=Math.max(this.maxY,at.y),this}expandBy(at){return this.minX-=at,this.minY-=at,this.maxX+=at,this.maxY+=at,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(at){return this.expandBy(-at)}map(at){const st=new Tc;return st.extend(at(new Hl(this.minX,this.minY))),st.extend(at(new Hl(this.maxX,this.minY))),st.extend(at(new Hl(this.minX,this.maxY))),st.extend(at(new Hl(this.maxX,this.maxY))),st}static fromPoints(at){const st=new Tc;for(const ot of at)st.extend(ot);return st}contains(at){return at.x>=this.minX&&at.x<=this.maxX&&at.y>=this.minY&&at.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(at){return!this.empty()&&!at.empty()&&at.minX>=this.minX&&at.maxX<=this.maxX&&at.minY>=this.minY&&at.maxY<=this.maxY}intersects(at){return!this.empty()&&!at.empty()&&at.minX<=this.maxX&&at.maxX>=this.minX&&at.minY<=this.maxY&&at.maxY>=this.minY}}class Cc{constructor(at,st){this.tileID=at,this.x=at.canonical.x,this.y=at.canonical.y,this.z=at.canonical.z,this.grid=new P(iu,16,0),this.grid3D=new P(iu,16,0),this.featureIndexArray=new Qs,this.promoteId=st}insert(at,st,ot,ut,Hl,rc){const sc=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(ot,ut,Hl);const oc=rc?this.grid3D:this.grid;for(let _c=0;_c<st.length;_c++){const at=st[_c],ot=[1/0,1/0,-1/0,-1/0];for(let st=0;st<at.length;st++){const ut=at[st];ot[0]=Math.min(ot[0],ut.x),ot[1]=Math.min(ot[1],ut.y),ot[2]=Math.max(ot[2],ut.x),ot[3]=Math.max(ot[3],ut.y)}ot[0]<iu&&ot[1]<iu&&ot[2]>=0&&ot[3]>=0&&oc.insert(sc,ot[0],ot[1],ot[2],ot[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new _m.VectorTile(new qm(this.rawTileData)).layers,this.sourceLayerCoder=new zc(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(at,st,ot,ut){this.loadVTLayers();const rc=at.params,sc=iu/at.tileSize/at.scale,oc=fn(rc.filter),_c=at.queryGeometry,wc=at.queryPadding*sc,Sc=Tc.fromPoints(_c),su=this.grid.query(Sc.minX-wc,Sc.minY-wc,Sc.maxX+wc,Sc.maxY+wc),lu=Tc.fromPoints(at.cameraQueryGeometry).expandBy(wc),cu=this.grid3D.query(lu.minX,lu.minY,lu.maxX,lu.maxY,((st,ot,ut,rc)=>function(at,st,ot,ut,rc){for(const Hl of at)if(st<=Hl.x&&ot<=Hl.y&&ut>=Hl.x&&rc>=Hl.y)return!0;const sc=[new Hl(st,ot),new Hl(st,rc),new Hl(ut,rc),new Hl(ut,ot)];if(at.length>2)for(const Hl of sc)if(la(at,Hl))return!0;for(let Hl=0;Hl<at.length-1;Hl++)if(ua(at[Hl],at[Hl+1],sc))return!0;return!1}(at.cameraQueryGeometry,st-wc,ot-wc,ut+wc,rc+wc)));for(const Hl of cu)su.push(Hl);su.sort(Ec);const uu={};let pu;for(let Hl=0;Hl<su.length;Hl++){const wc=su[Hl];if(wc===pu)continue;pu=wc;const Sc=this.featureIndexArray.get(wc);let iu=null;this.loadMatchingFeature(uu,Sc.bucketIndex,Sc.sourceLayerIndex,Sc.featureIndex,oc,rc.layers,rc.availableImages,st,ot,ut,((st,ot,ut)=>(iu||(iu=Yo(st)),ot.queryIntersectsFeature({queryGeometry:_c,feature:st,featureState:ut,geometry:iu,zoom:this.z,transform:at.transform,pixelsToTileUnits:sc,pixelPosMatrix:at.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:at.getElevation}))))}return uu}loadMatchingFeature(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc){const iu=this.bucketLayerIDs[st];if(rc&&!iu.some((at=>rc.has(at))))return;const su=this.sourceLayerCoder.decode(ot),lu=this.vtLayers[su].feature(ut);if(Hl.needGeometry){const at=Ho(lu,!0);if(!Hl.filter(new Wi(this.tileID.overscaledZ),at,this.tileID.canonical))return}else if(!Hl.filter(new Wi(this.tileID.overscaledZ),lu))return;const cu=this.getId(lu,su);for(let uu=0;uu<iu.length;uu++){const st=iu[uu];if(rc&&!rc.has(st))continue;const ot=oc[st];if(!ot)continue;let Hl={};cu&&wc&&(Hl=wc.getState(ot.sourceLayer||"_geojsonTileLayer",cu));const su=g({},_c[st]);su.paint=Bc(su.paint,ot.paint,lu,Hl,sc),su.layout=Bc(su.layout,ot.layout,lu,Hl,sc);const pu=!Sc||Sc(lu,ot,Hl);if(!pu)continue;const mu=new Pc(lu,this.z,this.x,this.y,cu);mu.layer=su;let gu=at[st];void 0===gu&&(gu=at[st]=[]),gu.push({featureIndex:ut,feature:mu,intersectionZ:pu})}}lookupSymbolFeatures(at,st,ot,ut,Hl,rc,sc,oc){const _c={};this.loadVTLayers();const wc=fn(Hl);for(const Sc of at)this.loadMatchingFeature(_c,ot,ut,Sc,wc,rc,sc,oc,st);return _c}hasLayer(at){for(const st of this.bucketLayerIDs)for(const ot of st)if(at===ot)return!0;return!1}getId(at,st){var ot;let ut=at.id;return this.promoteId&&(ut=at.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[st]],"boolean"==typeof ut&&(ut=Number(ut)),void 0===ut&&(null===(ot=at.properties)||void 0===ot?void 0:ot.cluster)&&this.promoteId&&(ut=Number(at.properties.cluster_id))),ut}}function Bc(at,st,ot,ut,Hl){return x(at,((at,rc)=>{const sc=st instanceof ss?st.get(rc):null;return sc&&sc.evaluate?sc.evaluate(ot,ut,Hl):sc}))}function Ec(at,st){return st-at}ci("FeatureIndex",Cc,{omit:["rawTileData","sourceLayerCoder"]});class Vc extends Hl{constructor(at,st,ot,ut){super(at,st),this.angle=ot,void 0!==ut&&(this.segment=ut)}clone(){return new Vc(this.x,this.y,this.angle,this.segment)}}function Fc(at,st,ot,ut,Hl){if(void 0===st.segment||0===ot)return!0;let rc=st,sc=st.segment+1,oc=0;for(;oc>-ot/2;){if(sc--,sc<0)return!1;oc-=at[sc].dist(rc),rc=at[sc]}oc+=at[sc].dist(at[sc+1]),sc++;const _c=[];let wc=0;for(;oc<ot/2;){const st=at[sc],ot=at[sc+1];if(!ot)return!1;let rc=at[sc-1].angleTo(st)-st.angleTo(ot);for(rc=Math.abs((rc+3*Math.PI)%(2*Math.PI)-Math.PI),_c.push({distance:oc,angleDelta:rc}),wc+=rc;oc-_c[0].distance>ut;)wc-=_c.shift().angleDelta;if(wc>Hl)return!1;sc++,oc+=st.dist(ot)}return!0}function Dc(at){let st=0;for(let ot=0;ot<at.length-1;ot++)st+=at[ot].dist(at[ot+1]);return st}function Lc(at,st,ot){return at?.6*st*ot:0}function $c(at,st){return Math.max(at?at.right-at.left:0,st?st.right-st.left:0)}function Oc(at,st,ot,ut,Hl,rc){const sc=Lc(ot,Hl,rc),oc=$c(ot,ut)*rc;let _c=0;const wc=Dc(at)/2;for(let Sc=0;Sc<at.length-1;Sc++){const ot=at[Sc],ut=at[Sc+1],Hl=ot.dist(ut);if(_c+Hl>wc){const rc=(wc-_c)/Hl,iu=Ed.number(ot.x,ut.x,rc),su=Ed.number(ot.y,ut.y,rc),lu=new Vc(iu,su,ut.angleTo(ot),Sc);return lu._round(),!sc||Fc(at,lu,oc,sc,st)?lu:void 0}_c+=Hl}}function Rc(at,st,ot,ut,Hl,rc,sc,oc,_c){const wc=Lc(ut,rc,sc),Sc=$c(ut,Hl),iu=Sc*sc,su=0===at[0].x||at[0].x===_c||0===at[0].y||at[0].y===_c;return st-iu<st/4&&(st=iu+st/4),Nc(at,su?st/2*oc%st:(Sc/2+2*rc)*sc*oc%st,st,wc,ot,iu,su,!1,_c)}function Nc(at,st,ot,ut,Hl,rc,sc,oc,_c){const wc=rc/2,Sc=Dc(at);let iu=0,su=st-ot,lu=[];for(let cu=0;cu<at.length-1;cu++){const st=at[cu],sc=at[cu+1],oc=st.dist(sc),uu=sc.angleTo(st);for(;su+ot<iu+oc;){su+=ot;const pu=(su-iu)/oc,mu=Ed.number(st.x,sc.x,pu),gu=Ed.number(st.y,sc.y,pu);if(mu>=0&&mu<_c&&gu>=0&&gu<_c&&su-wc>=0&&su+wc<=Sc){const st=new Vc(mu,gu,uu,cu);st._round(),ut&&!Fc(at,st,rc,ut,Hl)||lu.push(st)}}iu+=oc}return oc||lu.length||sc||(lu=Nc(at,iu/2,ot,ut,Hl,rc,sc,!0,_c)),lu}function jc(at,st,ot,ut){const rc=[],sc=at.image,oc=sc.pixelRatio,_c=sc.paddedRect.w-2,wc=sc.paddedRect.h-2;let Sc={x1:at.left,y1:at.top,x2:at.right,y2:at.bottom};const iu=sc.stretchX||[[0,_c]],su=sc.stretchY||[[0,wc]],f=(at,st)=>at+st[1]-st[0],lu=iu.reduce(f,0),cu=su.reduce(f,0),uu=_c-lu,pu=wc-cu;let mu=0,gu=lu,Au=0,yu=cu,_u=0,xu=uu,Su=0,Du=pu;if(sc.content&&ut){const st=sc.content,ot=st[2]-st[0],ut=st[3]-st[1];(sc.textFitWidth||sc.textFitHeight)&&(Sc=Qu(at)),mu=Uc(iu,0,st[0]),Au=Uc(su,0,st[1]),gu=Uc(iu,st[0],st[2]),yu=Uc(su,st[1],st[3]),_u=st[0]-mu,Su=st[1]-Au,xu=ot-gu,Du=ut-yu}const Lu=Sc.x1,$u=Sc.y1,hh=Sc.x2-Lu,ed=Sc.y2-$u,T=(at,ut,rc,_c)=>{const wc=Gc(at.stretch-mu,gu,hh,Lu),Sc=Xc(at.fixed-_u,xu,at.stretch,lu),iu=Gc(ut.stretch-Au,yu,ed,$u),su=Xc(ut.fixed-Su,Du,ut.stretch,cu),uu=Gc(rc.stretch-mu,gu,hh,Lu),pu=Xc(rc.fixed-_u,xu,rc.stretch,lu),td=Gc(_c.stretch-Au,yu,ed,$u),id=Xc(_c.fixed-Su,Du,_c.stretch,cu),nd=new Hl(wc,iu),rd=new Hl(uu,iu),ad=new Hl(uu,td),sd=new Hl(wc,td),od=new Hl(Sc/oc,su/oc),ld=new Hl(pu/oc,id/oc),cd=st*Math.PI/180;if(cd){const at=Math.sin(cd),st=Math.cos(cd),ot=[st,-at,at,st];nd._matMult(ot),rd._matMult(ot),sd._matMult(ot),ad._matMult(ot)}const ud=at.stretch+at.fixed,hd=ut.stretch+ut.fixed;return{tl:nd,tr:rd,bl:sd,br:ad,tex:{x:sc.paddedRect.x+1+ud,y:sc.paddedRect.y+1+hd,w:rc.stretch+rc.fixed-ud,h:_c.stretch+_c.fixed-hd},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:od,pixelOffsetBR:ld,minFontScaleX:xu/oc/hh,minFontScaleY:Du/oc/ed,isSDF:ot}};if(ut&&(sc.stretchX||sc.stretchY)){const at=qc(iu,uu,lu),st=qc(su,pu,cu);for(let ot=0;ot<at.length-1;ot++){const ut=at[ot],Hl=at[ot+1];for(let at=0;at<st.length-1;at++)rc.push(T(ut,st[at],Hl,st[at+1]))}}else rc.push(T({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:_c+1},{fixed:0,stretch:wc+1}));return rc}function Uc(at,st,ot){let ut=0;for(const Hl of at)ut+=Math.max(st,Math.min(ot,Hl[1]))-Math.max(st,Math.min(ot,Hl[0]));return ut}function qc(at,st,ot){const ut=[{fixed:-1,stretch:0}];for(const[Hl,rc]of at){const at=ut[ut.length-1];ut.push({fixed:Hl-at.stretch,stretch:at.stretch}),ut.push({fixed:Hl-at.stretch,stretch:at.stretch+(rc-Hl)})}return ut.push({fixed:st+1,stretch:ot}),ut}function Gc(at,st,ot,ut){return at/st*ot+ut}function Xc(at,st,ot,ut){return at-st*ot/ut}ci("Anchor",Vc);class Zc{constructor(at,st,ot,ut,rc,sc,oc,_c,wc,Sc){var iu;if(this.boxStartIndex=at.length,wc){let at=sc.top,st=sc.bottom;const ot=sc.collisionPadding;ot&&(at-=ot[1],st+=ot[3]);let ut=st-at;ut>0&&(ut=Math.max(10,ut),this.circleDiameter=ut)}else{const wc=(null===(iu=sc.image)||void 0===iu?void 0:iu.content)&&(sc.image.textFitWidth||sc.image.textFitHeight)?Qu(sc):{x1:sc.left,y1:sc.top,x2:sc.right,y2:sc.bottom};wc.y1=wc.y1*oc-_c[0],wc.y2=wc.y2*oc+_c[2],wc.x1=wc.x1*oc-_c[3],wc.x2=wc.x2*oc+_c[1];const su=sc.collisionPadding;if(su&&(wc.x1-=su[0]*oc,wc.y1-=su[1]*oc,wc.x2+=su[2]*oc,wc.y2+=su[3]*oc),Sc){const at=new Hl(wc.x1,wc.y1),st=new Hl(wc.x2,wc.y1),ot=new Hl(wc.x1,wc.y2),ut=new Hl(wc.x2,wc.y2),rc=Sc*Math.PI/180;at._rotate(rc),st._rotate(rc),ot._rotate(rc),ut._rotate(rc),wc.x1=Math.min(at.x,st.x,ot.x,ut.x),wc.x2=Math.max(at.x,st.x,ot.x,ut.x),wc.y1=Math.min(at.y,st.y,ot.y,ut.y),wc.y2=Math.max(at.y,st.y,ot.y,ut.y)}at.emplaceBack(st.x,st.y,wc.x1,wc.y1,wc.x2,wc.y2,ot,ut,rc)}this.boxEndIndex=at.length}}class Yc{constructor(at,st){if(void 0===at&&(at=[]),void 0===st&&(st=(at,st)=>at<st?-1:at>st?1:0),this.data=at,this.length=this.data.length,this.compare=st,this.length>0)for(let ot=(this.length>>1)-1;ot>=0;ot--)this._down(ot)}push(at){this.data.push(at),this._up(this.length++)}pop(){if(0===this.length)return;const at=this.data[0],st=this.data.pop();return--this.length>0&&(this.data[0]=st,this._down(0)),at}peek(){return this.data[0]}_up(at){const{data:st,compare:ot}=this,ut=st[at];for(;at>0;){const Hl=at-1>>1,rc=st[Hl];if(ot(ut,rc)>=0)break;st[at]=rc,at=Hl}st[at]=ut}_down(at){const{data:st,compare:ot}=this,ut=this.length>>1,Hl=st[at];for(;at<ut;){let ut=1+(at<<1);const rc=ut+1;if(rc<this.length&&ot(st[rc],st[ut])<0&&(ut=rc),ot(st[ut],Hl)>=0)break;st[at]=st[ut],at=ut}st[at]=Hl}}function Hc(at,st,ot){void 0===st&&(st=1),void 0===ot&&(ot=!1);const ut=Tc.fromPoints(at[0]),rc=Math.min(ut.width(),ut.height());let sc=rc/2;const oc=new Yc([],Jc),{minX:_c,minY:wc,maxX:Sc,maxY:iu}=ut;if(0===rc)return new Hl(_c,wc);for(let Hl=_c;Hl<Sc;Hl+=rc)for(let st=wc;st<iu;st+=rc)oc.push(new Wc(Hl+sc,st+sc,sc,at));let su=function(at){let st=0,ot=0,ut=0;const Hl=at[0];for(let rc=0,sc=Hl.length,oc=sc-1;rc<sc;oc=rc++){const at=Hl[rc],sc=Hl[oc],_c=at.x*sc.y-sc.x*at.y;ot+=(at.x+sc.x)*_c,ut+=(at.y+sc.y)*_c,st+=3*_c}return new Wc(ot/st,ut/st,0,at)}(at),lu=oc.length;for(;oc.length;){const ut=oc.pop();(ut.d>su.d||!su.d)&&(su=ut,ot&&console.log("found best %d after %d probes",Math.round(1e4*ut.d)/1e4,lu)),ut.max-su.d<=st||(sc=ut.h/2,oc.push(new Wc(ut.p.x-sc,ut.p.y-sc,sc,at)),oc.push(new Wc(ut.p.x+sc,ut.p.y-sc,sc,at)),oc.push(new Wc(ut.p.x-sc,ut.p.y+sc,sc,at)),oc.push(new Wc(ut.p.x+sc,ut.p.y+sc,sc,at)),lu+=4)}return ot&&(console.log(`num probes: ${lu}`),console.log(`best distance: ${su.d}`)),su.p}function Jc(at,st){return st.max-at.max}function Wc(at,st,ot,ut){this.p=new Hl(at,st),this.h=ot,this.d=function(at,st){let ot=!1,ut=1/0;for(let Hl=0;Hl<st.length;Hl++){const rc=st[Hl];for(let st=0,Hl=rc.length,sc=Hl-1;st<Hl;sc=st++){const Hl=rc[st],oc=rc[sc];Hl.y>at.y!=oc.y>at.y&&at.x<(oc.x-Hl.x)*(at.y-Hl.y)/(oc.y-Hl.y)+Hl.x&&(ot=!ot),ut=Math.min(ut,oa(at,Hl,oc))}}return(ot?1:-1)*Math.sqrt(ut)}(this.p,ut),this.max=this.d+this.h*Math.SQRT2}!function(at){at[at.center=1]="center",at[at.left=2]="left",at[at.right=3]="right",at[at.top=4]="top",at[at.bottom=5]="bottom",at[at["top-left"]=6]="top-left",at[at["top-right"]=7]="top-right",at[at["bottom-left"]=8]="bottom-left",at[at["bottom-right"]=9]="bottom-right"}(og||(og={}));const cg=Number.POSITIVE_INFINITY;function Qc(at,st){return st[1]!==cg?function(at,st,ot){let ut=0,Hl=0;switch(st=Math.abs(st),ot=Math.abs(ot),at){case"top-right":case"top-left":case"top":Hl=ot-7;break;case"bottom-right":case"bottom-left":case"bottom":Hl=7-ot}switch(at){case"top-right":case"bottom-right":case"right":ut=-st;break;case"top-left":case"bottom-left":case"left":ut=st}return[ut,Hl]}(at,st[0],st[1]):function(at,st){let ot=0,ut=0;st<0&&(st=0);const Hl=st/Math.SQRT2;switch(at){case"top-right":case"top-left":ut=Hl-7;break;case"bottom-right":case"bottom-left":ut=7-Hl;break;case"bottom":ut=7-st;break;case"top":ut=st-7}switch(at){case"top-right":case"bottom-right":ot=-Hl;break;case"top-left":case"bottom-left":ot=Hl;break;case"left":ot=st;break;case"right":ot=-st}return[ot,ut]}(at,st[0])}function th(at,st,ot){var ut;const Hl=at.layout,rc=null===(ut=Hl.get("text-variable-anchor-offset"))||void 0===ut?void 0:ut.evaluate(st,{},ot);if(rc){const at=rc.values,st=[];for(let ot=0;ot<at.length;ot+=2){const ut=st[ot]=at[ot],Hl=at[ot+1].map((at=>at*Zm));ut.startsWith("top")?Hl[1]-=7:ut.startsWith("bottom")&&(Hl[1]+=7),st[ot+1]=Hl}return new $t(st)}const sc=Hl.get("text-variable-anchor");if(sc){let ut;ut=void 0!==at._unevaluatedLayout.getValue("text-radial-offset")?[Hl.get("text-radial-offset").evaluate(st,{},ot)*Zm,cg]:Hl.get("text-offset").evaluate(st,{},ot).map((at=>at*Zm));const rc=[];for(const at of sc)rc.push(at,Qc(at,ut));return new $t(rc)}return null}function eh(at){at.bucket.createArrays(),at.bucket.tilePixelRatio=iu/(512*at.bucket.overscaling),at.bucket.compareText={},at.bucket.iconsNeedLinear=!1;const st=at.bucket.layers[0],ot=st.layout,ut=st._unevaluatedLayout._values,Hl={layoutIconSize:ut["icon-size"].possiblyEvaluate(new Wi(at.bucket.zoom+1),at.canonical),layoutTextSize:ut["text-size"].possiblyEvaluate(new Wi(at.bucket.zoom+1),at.canonical),textMaxSize:ut["text-size"].possiblyEvaluate(new Wi(18))};if("composite"===at.bucket.textSizeData.kind){const{minZoom:st,maxZoom:ot}=at.bucket.textSizeData;Hl.compositeTextSizes=[ut["text-size"].possiblyEvaluate(new Wi(st),at.canonical),ut["text-size"].possiblyEvaluate(new Wi(ot),at.canonical)]}if("composite"===at.bucket.iconSizeData.kind){const{minZoom:st,maxZoom:ot}=at.bucket.iconSizeData;Hl.compositeIconSizes=[ut["icon-size"].possiblyEvaluate(new Wi(st),at.canonical),ut["icon-size"].possiblyEvaluate(new Wi(ot),at.canonical)]}const rc=ot.get("text-line-height")*Zm,sc="viewport"!==ot.get("text-rotation-alignment")&&"point"!==ot.get("symbol-placement"),oc=ot.get("text-keep-upright"),_c=ot.get("text-size");for(const wc of at.bucket.features){const ut=ot.get("text-font").evaluate(wc,{},at.canonical).join(","),Sc=_c.evaluate(wc,{},at.canonical),iu=Hl.layoutTextSize.evaluate(wc,{},at.canonical),su=Hl.layoutIconSize.evaluate(wc,{},at.canonical),lu={horizontal:{},vertical:void 0},cu=wc.text;let uu,pu=[0,0];if(cu){const Hl=cu.toString(),_c=ot.get("text-letter-spacing").evaluate(wc,{},at.canonical)*Zm,su=Oi(Hl)?_c:0,uu=ot.get("text-anchor").evaluate(wc,{},at.canonical),mu=th(st,wc,at.canonical);if(!mu){const st=ot.get("text-radial-offset").evaluate(wc,{},at.canonical);pu=st?Qc(uu,[st*Zm,cg]):ot.get("text-offset").evaluate(wc,{},at.canonical).map((at=>at*Zm))}let gu=sc?"center":ot.get("text-justify").evaluate(wc,{},at.canonical);const Au="point"===ot.get("symbol-placement")?ot.get("text-max-width").evaluate(wc,{},at.canonical)*Zm:1/0,b=()=>{at.bucket.allowVerticalPlacement&&$i(Hl)&&(lu.vertical=Fu(cu,at.glyphMap,at.glyphPositions,at.imagePositions,ut,Au,rc,uu,"left",su,pu,Wm.vertical,!0,iu,Sc))};if(!sc&&mu){const st=new Set;if("auto"===gu)for(let at=0;at<mu.values.length;at+=2)st.add(rh(mu.values[at]));else st.add(gu);let ot=!1;for(const Hl of st)if(!lu.horizontal[Hl])if(ot)lu.horizontal[Hl]=lu.horizontal[0];else{const st=Fu(cu,at.glyphMap,at.glyphPositions,at.imagePositions,ut,Au,rc,"center",Hl,su,pu,Wm.horizontal,!1,iu,Sc);st&&(lu.horizontal[Hl]=st,ot=1===st.positionedLines.length)}b()}else{"auto"===gu&&(gu=rh(uu));const st=Fu(cu,at.glyphMap,at.glyphPositions,at.imagePositions,ut,Au,rc,uu,gu,su,pu,Wm.horizontal,!1,iu,Sc);st&&(lu.horizontal[gu]=st),b(),$i(Hl)&&sc&&oc&&(lu.vertical=Fu(cu,at.glyphMap,at.glyphPositions,at.imagePositions,ut,Au,rc,uu,gu,su,pu,Wm.vertical,!1,iu,Sc))}}let mu=!1;if(wc.icon&&wc.icon.name){const st=at.imageMap[wc.icon.name];st&&(uu=Ku(at.imagePositions[wc.icon.name],ot.get("icon-offset").evaluate(wc,{},at.canonical),ot.get("icon-anchor").evaluate(wc,{},at.canonical)),mu=!!st.sdf,void 0===at.bucket.sdfIcons?at.bucket.sdfIcons=mu:at.bucket.sdfIcons!==mu&&w("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(st.pixelRatio!==at.bucket.pixelRatio||0!==ot.get("icon-rotate").constantOr(1))&&(at.bucket.iconsNeedLinear=!0))}const gu=sh(lu.horizontal)||lu.vertical;at.bucket.iconsInText=!!gu&&gu.iconsInText,(gu||uu)&&nh(at.bucket,wc,lu,uu,at.imageMap,Hl,iu,su,pu,mu,at.canonical,at.subdivisionGranularity)}at.showCollisionBoxes&&at.bucket.generateCollisionDebugBuffers()}function rh(at){switch(at){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function nh(at,st,ot,ut,rc,sc,oc,_c,wc,Sc,su,lu){let cu=sc.textMaxSize.evaluate(st,{});void 0===cu&&(cu=oc);const uu=at.layers[0].layout,pu=uu.get("icon-offset").evaluate(st,{},su),mu=sh(ot.horizontal),gu=oc/24,Au=at.tilePixelRatio*gu,yu=at.tilePixelRatio*cu/24,_u=at.tilePixelRatio*_c,xu=at.tilePixelRatio*uu.get("symbol-spacing"),Su=uu.get("text-padding")*at.tilePixelRatio,Du=function(at,st,ot,ut){void 0===ut&&(ut=1);const Hl=at.get("icon-padding").evaluate(st,{},ot),rc=Hl&&Hl.values;return[rc[0]*ut,rc[1]*ut,rc[2]*ut,rc[3]*ut]}(uu,st,su,at.tilePixelRatio),Lu=uu.get("text-max-angle")/180*Math.PI,$u="viewport"!==uu.get("text-rotation-alignment")&&"point"!==uu.get("symbol-placement"),hh="map"===uu.get("icon-rotation-alignment")&&"point"!==uu.get("symbol-placement"),ed=uu.get("symbol-placement"),td=xu/2,id=uu.get("icon-text-fit");let nd;ut&&"none"!==id&&(at.allowVerticalPlacement&&ot.vertical&&(nd=tc(ut,ot.vertical,id,uu.get("icon-text-fit-padding"),pu,gu)),mu&&(ut=tc(ut,mu,id,uu.get("icon-text-fit-padding"),pu,gu)));const rd=su?lu.line.getGranularityForZoomLevel(su.z):1,V=(Hl,_c)=>{_c.x<0||_c.x>=iu||_c.y<0||_c.y>=iu||function(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu,pu,mu,gu,Au,yu,_u,xu,Su,Du){const Lu=at.addToLineVertexArray(st,ot);let $u,hh,ed,td,id=0,nd=0,rd=0,ad=0,sd=-1,od=-1;const ld={};let cd=Vp("");if(at.allowVerticalPlacement&&ut.vertical){const at=oc.layout.get("text-rotate").evaluate(yu,{},Su)+90;ed=new Zc(_c,st,wc,Sc,iu,ut.vertical,su,lu,cu,at),sc&&(td=new Zc(_c,st,wc,Sc,iu,sc,pu,mu,cu,at))}if(Hl){const ot=oc.layout.get("icon-rotate").evaluate(yu,{}),ut="none"!==oc.layout.get("icon-text-fit"),rc=jc(Hl,ot,xu,ut),su=sc?jc(sc,ot,xu,ut):void 0;hh=new Zc(_c,st,wc,Sc,iu,Hl,pu,mu,!1,ot),id=4*rc.length;const lu=at.iconSizeData;let cu=null;"source"===lu.kind?(cu=[Xm*oc.layout.get("icon-size").evaluate(yu,{})],cu[0]>Jm&&w(`${at.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===lu.kind&&(cu=[Xm*_u.compositeIconSizes[0].evaluate(yu,{},Su),Xm*_u.compositeIconSizes[1].evaluate(yu,{},Su)],(cu[0]>Jm||cu[1]>Jm)&&w(`${at.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),at.addSymbols(at.icon,rc,cu,Au,gu,yu,Wm.none,st,Lu.lineStartIndex,Lu.lineLength,-1,Su),sd=at.icon.placedSymbolArray.length-1,su&&(nd=4*su.length,at.addSymbols(at.icon,su,cu,Au,gu,yu,Wm.vertical,st,Lu.lineStartIndex,Lu.lineLength,-1,Su),od=at.icon.placedSymbolArray.length-1)}const ud=Object.keys(ut.horizontal);for(const Ed of ud){const ot=ut.horizontal[Ed];if(!$u){cd=Vp(ot.text);const at=oc.layout.get("text-rotate").evaluate(yu,{},Su);$u=new Zc(_c,st,wc,Sc,iu,ot,su,lu,cu,at)}const Hl=1===ot.positionedLines.length;if(rd+=ih(at,st,ot,rc,oc,cu,yu,uu,Lu,ut.vertical?Wm.horizontal:Wm.horizontalOnly,Hl?ud:[Ed],ld,sd,_u,Su),Hl)break}ut.vertical&&(ad+=ih(at,st,ut.vertical,rc,oc,cu,yu,uu,Lu,Wm.vertical,["vertical"],ld,od,_u,Su));const hd=$u?$u.boxStartIndex:at.collisionBoxArray.length,dd=$u?$u.boxEndIndex:at.collisionBoxArray.length,pd=ed?ed.boxStartIndex:at.collisionBoxArray.length,md=ed?ed.boxEndIndex:at.collisionBoxArray.length,gd=hh?hh.boxStartIndex:at.collisionBoxArray.length,fd=hh?hh.boxEndIndex:at.collisionBoxArray.length,Ad=td?td.boxStartIndex:at.collisionBoxArray.length,yd=td?td.boxEndIndex:at.collisionBoxArray.length;let vd=-1;const H=(at,st)=>at&&at.circleDiameter?Math.max(at.circleDiameter,st):st;vd=H($u,vd),vd=H(ed,vd),vd=H(hh,vd),vd=H(td,vd);const _d=vd>-1?1:0;_d&&(vd*=Du/Zm),at.glyphOffsetArray.length>=pc.MAX_GLYPHS&&w("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==yu.sortKey&&at.addToSortKeyRanges(at.symbolInstances.length,yu.sortKey);const xd=th(oc,yu,Su),[bd,wd]=function(at,st){const ot=at.length,ut=null==st?void 0:st.values;if((null==ut?void 0:ut.length)>0)for(let Hl=0;Hl<ut.length;Hl+=2){const st=ut[Hl+1];at.emplaceBack(og[ut[Hl]],st[0],st[1])}return[ot,at.length]}(at.textAnchorOffsets,xd);at.symbolInstances.emplaceBack(st.x,st.y,ld.right>=0?ld.right:-1,ld.center>=0?ld.center:-1,ld.left>=0?ld.left:-1,ld.vertical||-1,sd,od,cd,hd,dd,pd,md,gd,fd,Ad,yd,wc,rd,ad,id,nd,_d,0,su,vd,bd,wd)}(at,_c,Hl,ot,ut,rc,nd,at.layers[0],at.collisionBoxArray,st.index,st.sourceLayerIndex,at.index,Au,[Su,Su,Su,Su],$u,wc,_u,Du,hh,pu,st,sc,Sc,su,oc)};if("line"===ed)for(const ad of function(at,st,ot,ut,rc){const sc=[];for(let oc=0;oc<at.length;oc++){const st=at[oc];let ot;for(let at=0;at<st.length-1;at++){let oc=st[at],_c=st[at+1];oc.x<0&&_c.x<0||(oc.x<0?oc=new Hl(0,oc.y+(0-oc.x)/(_c.x-oc.x)*(_c.y-oc.y))._round():_c.x<0&&(_c=new Hl(0,oc.y+(0-oc.x)/(_c.x-oc.x)*(_c.y-oc.y))._round()),oc.y<0&&_c.y<0||(oc.y<0?oc=new Hl(oc.x+(0-oc.y)/(_c.y-oc.y)*(_c.x-oc.x),0)._round():_c.y<0&&(_c=new Hl(oc.x+(0-oc.y)/(_c.y-oc.y)*(_c.x-oc.x),0)._round()),oc.x>=ut&&_c.x>=ut||(oc.x>=ut?oc=new Hl(ut,oc.y+(ut-oc.x)/(_c.x-oc.x)*(_c.y-oc.y))._round():_c.x>=ut&&(_c=new Hl(ut,oc.y+(ut-oc.x)/(_c.x-oc.x)*(_c.y-oc.y))._round()),oc.y>=rc&&_c.y>=rc||(oc.y>=rc?oc=new Hl(oc.x+(rc-oc.y)/(_c.y-oc.y)*(_c.x-oc.x),rc)._round():_c.y>=rc&&(_c=new Hl(oc.x+(rc-oc.y)/(_c.y-oc.y)*(_c.x-oc.x),rc)._round()),ot&&oc.equals(ot[ot.length-1])||(ot=[oc],sc.push(ot)),ot.push(_c)))))}}return sc}(st.geometry,0,0,iu,iu)){const st=xl(ad,rd),Hl=Rc(st,xu,Lu,ot.vertical||mu,ut,24,yu,at.overscaling,iu);for(const ot of Hl)mu&&oh(at,mu.text,td,ot)||V(st,ot)}else if("line-center"===ed){for(const Hl of st.geometry)if(Hl.length>1){const at=xl(Hl,rd),st=Oc(at,Lu,ot.vertical||mu,ut,24,yu);st&&V(at,st)}}else if("Polygon"===st.type)for(const Hl of er(st.geometry,0)){const at=Hc(Hl,16);V(xl(Hl[0],rd,!0),new Vc(at.x,at.y,0))}else if("LineString"===st.type)for(const Hl of st.geometry){const at=xl(Hl,rd);V(at,new Vc(at[0].x,at[0].y,0))}else if("Point"===st.type)for(const Hl of st.geometry)for(const at of Hl)V([at],new Vc(at.x,at.y,0))}function ih(at,st,ot,ut,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu){const pu=function(at,st,ot,ut,rc,sc,oc,_c){const wc=ut.layout.get("text-rotate").evaluate(sc,{})*Math.PI/180,Sc=[];for(const iu of st.positionedLines)for(const at of iu.positionedGlyphs){if(!at.rect)continue;const ut=at.rect||{};let sc=4,su=!0,lu=1,cu=0;const uu=(rc||_c)&&at.vertical,pu=at.metrics.advance*at.scale/2;if(_c&&st.verticalizable&&(cu=iu.lineOffset/2-(at.imageName?-(Zm-at.metrics.width*at.scale)/2:(at.scale-1)*Zm)),at.imageName){const st=oc[at.imageName];su=st.sdf,lu=st.pixelRatio,sc=1/lu}const mu=rc?[at.x+pu,at.y]:[0,0];let gu=rc?[0,0]:[at.x+pu+ot[0],at.y+ot[1]-cu],Au=[0,0];uu&&(Au=gu,gu=[0,0]);const yu=at.metrics.isDoubleResolution?2:1,_u=(at.metrics.left-sc)*at.scale-pu+gu[0],xu=(-at.metrics.top-sc)*at.scale+gu[1],Su=_u+ut.w/yu*at.scale/lu,Du=xu+ut.h/yu*at.scale/lu,Lu=new Hl(_u,xu),$u=new Hl(Su,xu),hh=new Hl(_u,Du),ed=new Hl(Su,Du);if(uu){const st=new Hl(-pu,pu- -17),ot=-Math.PI/2,ut=12-pu,rc=new Hl(22-ut,-(at.imageName?ut:0)),sc=new Hl(...Au);Lu._rotateAround(ot,st)._add(rc)._add(sc),$u._rotateAround(ot,st)._add(rc)._add(sc),hh._rotateAround(ot,st)._add(rc)._add(sc),ed._rotateAround(ot,st)._add(rc)._add(sc)}if(wc){const at=Math.sin(wc),st=Math.cos(wc),ot=[st,-at,at,st];Lu._matMult(ot),$u._matMult(ot),hh._matMult(ot),ed._matMult(ot)}const td=new Hl(0,0),id=new Hl(0,0);Sc.push({tl:Lu,tr:$u,bl:hh,br:ed,tex:ut,writingMode:st.writingMode,glyphOffset:mu,sectionIndex:at.sectionIndex,isSDF:su,pixelOffsetTL:td,pixelOffsetBR:id,minFontScaleX:0,minFontScaleY:0})}return Sc}(0,ot,_c,rc,sc,oc,ut,at.allowVerticalPlacement),mu=at.textSizeData;let gu=null;"source"===mu.kind?(gu=[Xm*rc.layout.get("text-size").evaluate(oc,{})],gu[0]>Jm&&w(`${at.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===mu.kind&&(gu=[Xm*cu.compositeTextSizes[0].evaluate(oc,{},uu),Xm*cu.compositeTextSizes[1].evaluate(oc,{},uu)],(gu[0]>Jm||gu[1]>Jm)&&w(`${at.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),at.addSymbols(at.text,pu,gu,_c,sc,oc,Sc,st,wc.lineStartIndex,wc.lineLength,lu,uu);for(const Hl of iu)su[Hl]=at.text.placedSymbolArray.length-1;return 4*pu.length}function sh(at){for(const st in at)return at[st];return null}function oh(at,st,ot,ut){const Hl=at.compareText;if(st in Hl){const at=Hl[st];for(let st=at.length-1;st>=0;st--)if(ut.dist(at[st])<ot)return!0}else Hl[st]=[];return Hl[st].push(ut),!1}class ah{constructor(at){const st={},ot=[];for(const sc in at){const ut=at[sc],Hl=st[sc]={};for(const at in ut){const st=ut[+at];if(!st||0===st.bitmap.width||0===st.bitmap.height)continue;const rc={x:0,y:0,w:st.bitmap.width+2,h:st.bitmap.height+2};ot.push(rc),Hl[at]={rect:rc,metrics:st.metrics}}}const{w:ut,h:Hl}=Tu(ot),rc=new ka({width:ut||1,height:Hl||1});for(const sc in at){const ot=at[sc];for(const at in ot){const ut=ot[+at];if(!ut||0===ut.bitmap.width||0===ut.bitmap.height)continue;const Hl=st[sc][at].rect;ka.copy(ut.bitmap,rc,{x:0,y:0},{x:Hl.x+1,y:Hl.y+1},ut.bitmap)}}this.image=rc,this.positions=st}}function lh(at,st,ot){var ut=2*Math.PI*6378137/256/Math.pow(2,ot);return[at*ut-2*Math.PI*6378137/2,st*ut-2*Math.PI*6378137/2]}ci("GlyphAtlas",ah);const ug=6371008.8;class ch{constructor(at,st){if(isNaN(at)||isNaN(st))throw new Error(`Invalid LngLat object: (${at}, ${st})`);if(this.lng=+at,this.lat=+st,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new ch(function(at,st){const ot=((at-st)%360+360)%360+st;return ot===st?180:ot}(this.lng,-180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(at){const st=Math.PI/180,ot=this.lat*st,ut=at.lat*st,Hl=Math.sin(ot)*Math.sin(ut)+Math.cos(ot)*Math.cos(ut)*Math.cos((at.lng-this.lng)*st);return ug*Math.acos(Math.min(Hl,1))}static convert(at){if(at instanceof ch)return at;if(Array.isArray(at)&&(2===at.length||3===at.length))return new ch(Number(at[0]),Number(at[1]));if(!Array.isArray(at)&&"object"==typeof at&&null!==at)return new ch(Number("lng"in at?at.lng:at.lon),Number(at.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const hg=2*Math.PI*ug;function ph(at){return hg*Math.cos(at*Math.PI/180)}function fh(at){return 360/Math.PI*Math.atan(Math.exp((180-360*at)*Math.PI/180))-90}class dh{constructor(at,st,ot){void 0===ot&&(ot=0),this.x=+at,this.y=+st,this.z=+ot}static fromLngLat(at,st){void 0===st&&(st=0);const ot=ch.convert(at);return new dh((180+ot.lng)/360,(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+ot.lat*Math.PI/360)))/360,function(at,st){return at/ph(st)}(st,ot.lat))}toLngLat(){return new ch(360*this.x-180,fh(this.y))}toAltitude(){return this.z*ph(fh(this.y))}meterInMercatorCoordinateUnits(){return 1/hg*(at=fh(this.y),1/Math.cos(at*Math.PI/180));var at}}class yh{constructor(at,st,ot){if(!function(at,st,ot){return!(at<0||at>25||ot<0||ot>=Math.pow(2,at)||st<0||st>=Math.pow(2,at))}(at,st,ot))throw new Error(`x=${st}, y=${ot}, z=${at} outside of bounds. 0<=x<${Math.pow(2,at)}, 0<=y<${Math.pow(2,at)} 0<=z<=25 `);this.z=at,this.x=st,this.y=ot,this.key=xh(0,at,at,st,ot)}equals(at){return this.z===at.z&&this.x===at.x&&this.y===at.y}url(at,st,ot){const ut=(rc=this.y,sc=this.z,oc=lh(256*(Hl=this.x),256*(rc=Math.pow(2,sc)-rc-1),sc),_c=lh(256*(Hl+1),256*(rc+1),sc),oc[0]+","+oc[1]+","+_c[0]+","+_c[1]);var Hl,rc,sc,oc,_c;const wc=function(at,st,ot){let ut,Hl="";for(let rc=at;rc>0;rc--)ut=1<<rc-1,Hl+=(st&ut?1:0)+(ot&ut?2:0);return Hl}(this.z,this.x,this.y);return at[(this.x+this.y)%at.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===ot?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,st>1?"@2x":"").replace(/{quadkey}/g,wc).replace(/{bbox-epsg-3857}/g,ut)}isChildOf(at){const st=this.z-at.z;return st>0&&at.x===this.x>>st&&at.y===this.y>>st}getTilePoint(at){const st=Math.pow(2,this.z);return new Hl((at.x*st-this.x)*iu,(at.y*st-this.y)*iu)}toString(){return`${this.z}/${this.x}/${this.y}`}}class mh{constructor(at,st){this.wrap=at,this.canonical=st,this.key=xh(at,st.z,st.z,st.x,st.y)}}class gh{constructor(at,st,ot,ut,Hl){if(this.terrainRttPosMatrix32f=null,at<ot)throw new Error(`overscaledZ should be >= z; overscaledZ = ${at}; z = ${ot}`);this.overscaledZ=at,this.wrap=st,this.canonical=new yh(ot,+ut,+Hl),this.key=xh(st,at,ot,ut,Hl)}clone(){return new gh(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(at){return this.overscaledZ===at.overscaledZ&&this.wrap===at.wrap&&this.canonical.equals(at.canonical)}scaledTo(at){if(at>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${at}; overscaledZ = ${this.overscaledZ}`);const st=this.canonical.z-at;return at>this.canonical.z?new gh(at,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new gh(at,this.wrap,at,this.canonical.x>>st,this.canonical.y>>st)}calculateScaledKey(at,st){if(at>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${at}; overscaledZ = ${this.overscaledZ}`);const ot=this.canonical.z-at;return at>this.canonical.z?xh(this.wrap*+st,at,this.canonical.z,this.canonical.x,this.canonical.y):xh(this.wrap*+st,at,at,this.canonical.x>>ot,this.canonical.y>>ot)}isChildOf(at){if(at.wrap!==this.wrap)return!1;const st=this.canonical.z-at.canonical.z;return 0===at.overscaledZ||at.overscaledZ<this.overscaledZ&&at.canonical.x===this.canonical.x>>st&&at.canonical.y===this.canonical.y>>st}children(at){if(this.overscaledZ>=at)return[new gh(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const st=this.canonical.z+1,ot=2*this.canonical.x,ut=2*this.canonical.y;return[new gh(st,this.wrap,st,ot,ut),new gh(st,this.wrap,st,ot+1,ut),new gh(st,this.wrap,st,ot,ut+1),new gh(st,this.wrap,st,ot+1,ut+1)]}isLessThan(at){return this.wrap<at.wrap||!(this.wrap>at.wrap)&&(this.overscaledZ<at.overscaledZ||!(this.overscaledZ>at.overscaledZ)&&(this.canonical.x<at.canonical.x||!(this.canonical.x>at.canonical.x)&&this.canonical.y<at.canonical.y))}wrapped(){return new gh(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(at){return new gh(this.overscaledZ,at,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new mh(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(at){return this.canonical.getTilePoint(new dh(at.x-this.wrap,at.y))}}function xh(at,st,ot,ut,Hl){(at*=2)<0&&(at=-1*at-1);const rc=1<<ot;return(rc*rc*at+rc*Hl+ut).toString(36)+ot.toString(36)+st.toString(36)}ci("CanonicalTileID",yh),ci("OverscaledTileID",gh,{omit:["terrainRttPosMatrix32f"]});class vh{constructor(at){this.tileID=new gh(at.tileID.overscaledZ,at.tileID.wrap,at.tileID.canonical.z,at.tileID.canonical.x,at.tileID.canonical.y),this.uid=at.uid,this.zoom=at.zoom,this.pixelRatio=at.pixelRatio,this.tileSize=at.tileSize,this.source=at.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=at.showCollisionBoxes,this.collectResourceTiming=!!at.collectResourceTiming,this.returnDependencies=!!at.returnDependencies,this.promoteId=at.promoteId,this.inFlightDependencies=[],this.globalState=at.globalState}parse(at,st,ot,ut,Hl){return t(this,void 0,void 0,(function*(){this.status="parsing",this.data=at,this.collisionBoxArray=new Us;const rc=new zc(Object.keys(at.layers).sort()),sc=new Cc(this.tileID,this.promoteId);sc.bucketLayerIDs=[];const oc={},_c={featureIndex:sc,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ot,subdivisionGranularity:Hl},wc=st.familiesBySource[this.source];for(const st in wc){const ut=at.layers[st];if(!ut)continue;1===ut.version&&w(`Vector tile source "${this.source}" layer "${st}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Hl=rc.encode(st),Sc=[];for(let at=0;at<ut.length;at++){const ot=ut.feature(at),rc=sc.getId(ot,st);Sc.push({feature:ot,id:rc,index:at,sourceLayerIndex:Hl})}for(const at of wc[st]){const st=at[0];st.source!==this.source&&w(`layer.source = ${st.source} does not equal this.source = ${this.source}`),st.minzoom&&this.zoom<Math.floor(st.minzoom)||st.maxzoom&&this.zoom>=st.maxzoom||"none"!==st.visibility&&(bh(at,this.zoom,ot),(oc[st.id]=st.createBucket({index:sc.bucketLayerIDs.length,layers:at,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Hl,sourceID:this.source,globalState:this.globalState})).populate(Sc,_c,this.tileID.canonical),sc.bucketLayerIDs.push(at.map((at=>at.id))))}}const Sc=x(_c.glyphDependencies,(at=>Object.keys(at).map(Number)));this.inFlightDependencies.forEach((at=>null==at?void 0:at.abort())),this.inFlightDependencies=[];let iu=Promise.resolve({});if(Object.keys(Sc).length){const at=new AbortController;this.inFlightDependencies.push(at),iu=ut.sendAsync({type:"GG",data:{stacks:Sc,source:this.source,tileID:this.tileID,type:"glyphs"}},at)}const su=Object.keys(_c.iconDependencies);let lu=Promise.resolve({});if(su.length){const at=new AbortController;this.inFlightDependencies.push(at),lu=ut.sendAsync({type:"GI",data:{icons:su,source:this.source,tileID:this.tileID,type:"icons"}},at)}const cu=Object.keys(_c.patternDependencies);let uu=Promise.resolve({});if(cu.length){const at=new AbortController;this.inFlightDependencies.push(at),uu=ut.sendAsync({type:"GI",data:{icons:cu,source:this.source,tileID:this.tileID,type:"patterns"}},at)}const[pu,mu,gu]=yield Promise.all([iu,lu,uu]),Au=new ah(pu),yu=new Bu(mu,gu);for(const at in oc){const st=oc[at];st instanceof pc?(bh(st.layers,this.zoom,ot),eh({bucket:st,glyphMap:pu,glyphPositions:Au.positions,imageMap:mu,imagePositions:yu.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:_c.subdivisionGranularity})):st.hasPattern&&(st instanceof au||st instanceof _l||st instanceof Gl)&&(bh(st.layers,this.zoom,ot),st.addFeatures(_c,this.tileID.canonical,yu.patternPositions))}return this.status="done",{buckets:Object.values(oc).filter((at=>!at.isEmpty())),featureIndex:sc,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Au.image,imageAtlas:yu,glyphMap:this.returnDependencies?pu:null,iconMap:this.returnDependencies?mu:null,glyphPositions:this.returnDependencies?Au.positions:null}}))}}function bh(at,st,ot){const ut=new Wi(st);for(const Hl of at)Hl.recalculate(ut,ot)}var dg,pg,mg;!function(at){at.create="create",at.load="load",at.fullLoad="fullLoad"}(dg||(dg={}));class kh{constructor(at){this._marks={start:[at.url,"start"].join("#"),end:[at.url,"end"].join("#"),measure:at.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let at=performance.getEntriesByName(this._marks.measure);return 0===at.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),at=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),at}}class Ah{constructor(at,st,ot){this.actor=at,this.layerIndex=st,this.availableImages=ot,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(at,st){return t(this,void 0,void 0,(function*(){const ot=yield((at,st)=>li(g(at,{type:"arrayBuffer"}),st))(at.request,st);try{return{vectorTile:new _m.VectorTile(new qm(ot.data)),rawData:ot.data,cacheControl:ot.cacheControl,expires:ot.expires}}catch(st){const Hl=new Uint8Array(ot.data);let rc=`Unable to parse the tile at ${at.request.url}, `;throw rc+=31===Hl[0]&&139===Hl[1]?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${st.message}`,new Error(rc)}}))}loadTile(at){return t(this,void 0,void 0,(function*(){const st=at.uid,ot=!!(at&&at.request&&at.request.collectResourceTiming)&&new kh(at.request),ut=new vh(at);this.loading[st]=ut;const Hl=new AbortController;ut.abort=Hl;try{const rc=yield this.loadVectorTile(at,Hl);if(delete this.loading[st],!rc)return null;const sc=rc.rawData,oc={};rc.expires&&(oc.expires=rc.expires),rc.cacheControl&&(oc.cacheControl=rc.cacheControl);const _c={};if(ot){const at=ot.finish();at&&(_c.resourceTiming=JSON.parse(JSON.stringify(at)))}ut.vectorTile=rc.vectorTile;const wc=ut.parse(rc.vectorTile,this.layerIndex,this.availableImages,this.actor,at.subdivisionGranularity);this.loaded[st]=ut,this.fetching[st]={rawTileData:sc,cacheControl:oc,resourceTiming:_c};try{const at=yield wc;return g({rawTileData:sc.slice(0)},at,oc,_c)}finally{delete this.fetching[st]}}catch(at){throw delete this.loading[st],ut.status="done",this.loaded[st]=ut,at}}))}reloadTile(at){return t(this,void 0,void 0,(function*(){const st=at.uid;if(!this.loaded||!this.loaded[st])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ot=this.loaded[st];if(ot.showCollisionBoxes=at.showCollisionBoxes,ot.globalState=at.globalState,"parsing"===ot.status){const ut=yield ot.parse(ot.vectorTile,this.layerIndex,this.availableImages,this.actor,at.subdivisionGranularity);let Hl;if(this.fetching[st]){const{rawTileData:at,cacheControl:ot,resourceTiming:rc}=this.fetching[st];delete this.fetching[st],Hl=g({rawTileData:at.slice(0)},ut,ot,rc)}else Hl=ut;return Hl}if("done"===ot.status&&ot.vectorTile)return ot.parse(ot.vectorTile,this.layerIndex,this.availableImages,this.actor,at.subdivisionGranularity)}))}abortTile(at){return t(this,void 0,void 0,(function*(){const st=this.loading,ot=at.uid;st&&st[ot]&&st[ot].abort&&(st[ot].abort.abort(),delete st[ot])}))}removeTile(at){return t(this,void 0,void 0,(function*(){this.loaded&&this.loaded[at.uid]&&delete this.loaded[at.uid]}))}}class Ih{constructor(){this.loaded={}}loadTile(at){return t(this,void 0,void 0,(function*(){const{uid:st,encoding:ot,rawImageData:ut,redFactor:Hl,greenFactor:rc,blueFactor:sc,baseShift:wc}=at,Sc=ut.width+2,iu=ut.height+2,su=k(ut)?new Aa({width:Sc,height:iu},yield function(at,st,ot,ut,Hl){return t(this,void 0,void 0,(function*(){if(function(){if(null==_c&&(_c=!1,null==oc&&(oc="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),oc)){const at=5,st=new OffscreenCanvas(at,at).getContext("2d",{willReadFrequently:!0});if(st){for(let ut=0;ut<at*at;ut++){const ot=4*ut;st.fillStyle=`rgb(${ot},${ot+1},${ot+2})`,st.fillRect(ut%at,Math.floor(ut/at),1,1)}const ot=st.getImageData(0,0,at,at).data;for(let st=0;st<at*at*4;st++)if(st%4!=3&&ot[st]!==st){_c=!0;break}}}return _c||!1}())try{return yield function(at,st,ot,ut,Hl){return t(this,void 0,void 0,(function*(){if("undefined"==typeof VideoFrame)throw new Error("VideoFrame not supported");const st=new VideoFrame(at,{timestamp:0});try{const ot=null==st?void 0:st.format;if(!ot||!ot.startsWith("BGR")&&!ot.startsWith("RGB"))throw new Error(`Unrecognized format ${ot}`);const rc=ot.startsWith("BGR"),sc=new Uint8ClampedArray(ut*Hl*4);if(yield st.copyTo(sc,function(at,st,ot,ut,Hl){const rc=4*Math.max(1,0),sc=(Math.max(0,-1)- -1)*ut*4+rc,oc=4*ut,_c=Math.max(0,-1),wc=Math.max(0,-1);return{rect:{x:_c,y:wc,width:Math.min(at.width,-1+ut)-_c,height:Math.min(at.height,-1+Hl)-wc},layout:[{offset:sc,stride:oc}]}}(at,0,0,ut,Hl)),rc)for(let at=0;at<sc.length;at+=4){const st=sc[at];sc[at]=sc[at+2],sc[at+2]=st}return sc}finally{st.close()}}))}(at,0,0,ut,Hl)}catch(t){}return function(at,st,ot,ut,Hl){const rc=at.width,sc=at.height;lu&&cu||(lu=new OffscreenCanvas(rc,sc),cu=lu.getContext("2d",{willReadFrequently:!0})),lu.width=rc,lu.height=sc,cu.drawImage(at,0,0,rc,sc);const oc=cu.getImageData(-1,-1,ut,Hl);return cu.clearRect(0,0,rc,sc),oc.data}(at,0,0,ut,Hl)}))}(ut,0,0,Sc,iu)):ut,uu=new Va(st,su,ot,Hl,rc,sc,wc);return this.loaded=this.loaded||{},this.loaded[st]=uu,uu}))}removeTile(at){const st=this.loaded,ot=at.uid;st&&st[ot]&&delete st[ot]}}var gg=function(){if(mg)return pg;function t(at,st){if(0!==at.length){e(at[0],st);for(var ot=1;ot<at.length;ot++)e(at[ot],!st)}}function e(at,st){for(var ot=0,ut=0,Hl=0,rc=at.length,sc=rc-1;Hl<rc;sc=Hl++){var oc=(at[Hl][0]-at[sc][0])*(at[sc][1]+at[Hl][1]),_c=ot+oc;ut+=Math.abs(ot)>=Math.abs(oc)?ot-_c+oc:oc-_c+ot,ot=_c}ot+ut>=0!=!!st&&at.reverse()}return mg=1,pg=function e(at,st){var ot,ut=at&&at.type;if("FeatureCollection"===ut)for(ot=0;ot<at.features.length;ot++)e(at.features[ot],st);else if("GeometryCollection"===ut)for(ot=0;ot<at.geometries.length;ot++)e(at.geometries[ot],st);else if("Feature"===ut)e(at.geometry,st);else if("Polygon"===ut)t(at.coordinates,st);else if("MultiPolygon"===ut)for(ot=0;ot<at.coordinates.length;ot++)t(at.coordinates[ot],st);return at}}(),fg=e(gg);const Ag=_m.VectorTileFeature.prototype.toGeoJSON;class Th{constructor(at){this._feature=at,this.extent=iu,this.type=at.type,this.properties=at.tags,"id"in at&&!isNaN(at.id)&&(this.id=parseInt(at.id,10))}loadGeometry(){if(1===this._feature.type){const at=[];for(const st of this._feature.geometry)at.push([new Hl(st[0],st[1])]);return at}{const at=[];for(const st of this._feature.geometry){const ot=[];for(const at of st)ot.push(new Hl(at[0],at[1]));at.push(ot)}return at}}toGeoJSON(at,st,ot){return Ag.call(this,at,st,ot)}}class Ch{constructor(at){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=iu,this.length=at.length,this._features=at}feature(at){return new Th(this._features[at])}}var yg,vg,_g,xg={exports:{}},bg=function(){if(_g)return xg.exports;_g=1;var at=Mu(),st=function(){if(vg)return yg;vg=1;var at=i(),st=Rl().VectorTileFeature;function r(at,st){this.options=st||{},this.features=at,this.length=at.length}function n(at,st){this.id="number"==typeof at.id?at.id:void 0,this.type=at.type,this.rawGeometry=1===at.type?[at.geometry]:at.geometry,this.properties=at.tags,this.extent=st||4096}return yg=r,r.prototype.feature=function(at){return new n(this.features[at],this.options.extent)},n.prototype.loadGeometry=function(){var st=this.rawGeometry;this.geometry=[];for(var ot=0;ot<st.length;ot++){for(var ut=st[ot],Hl=[],rc=0;rc<ut.length;rc++)Hl.push(new at(ut[rc][0],ut[rc][1]));this.geometry.push(Hl)}return this.geometry},n.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var at=this.geometry,st=1/0,ot=-1/0,ut=1/0,Hl=-1/0,rc=0;rc<at.length;rc++)for(var sc=at[rc],oc=0;oc<sc.length;oc++){var _c=sc[oc];st=Math.min(st,_c.x),ot=Math.max(ot,_c.x),ut=Math.min(ut,_c.y),Hl=Math.max(Hl,_c.y)}return[st,ut,ot,Hl]},n.prototype.toGeoJSON=st.prototype.toGeoJSON,yg}();function r(st){var ot=new at;return function(at,st){for(var ot in at.layers)st.writeMessage(3,n,at.layers[ot])}(st,ot),ot.finish()}function n(at,st){var ot;st.writeVarintField(15,at.version||1),st.writeStringField(1,at.name||""),st.writeVarintField(5,at.extent||4096);var ut={keys:[],values:[],keycache:{},valuecache:{}};for(ot=0;ot<at.length;ot++)ut.feature=at.feature(ot),st.writeMessage(2,s,ut);var Hl=ut.keys;for(ot=0;ot<Hl.length;ot++)st.writeStringField(3,Hl[ot]);var rc=ut.values;for(ot=0;ot<rc.length;ot++)st.writeMessage(4,c,rc[ot])}function s(at,st){var ot=at.feature;void 0!==ot.id&&st.writeVarintField(1,ot.id),st.writeMessage(2,o,at),st.writeVarintField(3,ot.type),st.writeMessage(4,u,ot)}function o(at,st){var ot=at.feature,ut=at.keys,Hl=at.values,rc=at.keycache,sc=at.valuecache;for(var oc in ot.properties){var _c=ot.properties[oc],wc=rc[oc];if(null!==_c){void 0===wc&&(ut.push(oc),rc[oc]=wc=ut.length-1),st.writeVarint(wc);var Sc=typeof _c;"string"!==Sc&&"boolean"!==Sc&&"number"!==Sc&&(_c=JSON.stringify(_c));var iu=Sc+":"+_c,su=sc[iu];void 0===su&&(Hl.push(_c),sc[iu]=su=Hl.length-1),st.writeVarint(su)}}}function a(at,st){return(st<<3)+(7&at)}function l(at){return at<<1^at>>31}function u(at,st){for(var ot=at.loadGeometry(),ut=at.type,Hl=0,rc=0,sc=ot.length,oc=0;oc<sc;oc++){var _c=ot[oc],wc=1;1===ut&&(wc=_c.length),st.writeVarint(a(1,wc));for(var Sc=3===ut?_c.length-1:_c.length,iu=0;iu<Sc;iu++){1===iu&&1!==ut&&st.writeVarint(a(2,Sc-1));var su=_c[iu].x-Hl,lu=_c[iu].y-rc;st.writeVarint(l(su)),st.writeVarint(l(lu)),Hl+=su,rc+=lu}3===ut&&st.writeVarint(a(7,1))}}function c(at,st){var ot=typeof at;"string"===ot?st.writeStringField(1,at):"boolean"===ot?st.writeBooleanField(7,at):"number"===ot&&(at%1!=0?st.writeDoubleField(3,at):at<0?st.writeSVarintField(6,at):st.writeVarintField(5,at))}return xg.exports=r,xg.exports.fromVectorTileJs=r,xg.exports.fromGeojsonVt=function(at,ot){ot=ot||{};var ut={};for(var Hl in at)ut[Hl]=new st(at[Hl].features,ot),ut[Hl].name=Hl,ut[Hl].version=ot.version,ut[Hl].extent=ot.extent;return r({layers:ut})},xg.exports.GeoJSONWrapper=st,xg.exports}(),wg=e(bg);const Eg=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class Oh{static from(at){if(!(at instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[st,ot]=new Uint8Array(at,0,2);if(219!==st)throw new Error("Data does not appear to be in a KDBush format.");const ut=ot>>4;if(1!==ut)throw new Error(`Got v${ut} data when expected v1.`);const Hl=Eg[15&ot];if(!Hl)throw new Error("Unrecognized array type.");const[rc]=new Uint16Array(at,2,1),[sc]=new Uint32Array(at,4,1);return new Oh(sc,rc,Hl,at)}constructor(at,st,ot,ut){if(void 0===st&&(st=64),void 0===ot&&(ot=Float64Array),isNaN(at)||at<0)throw new Error(`Unpexpected numItems value: ${at}.`);this.numItems=+at,this.nodeSize=Math.min(Math.max(+st,2),65535),this.ArrayType=ot,this.IndexArrayType=at<65536?Uint16Array:Uint32Array;const Hl=Eg.indexOf(this.ArrayType),rc=2*at*this.ArrayType.BYTES_PER_ELEMENT,sc=at*this.IndexArrayType.BYTES_PER_ELEMENT,oc=(8-sc%8)%8;if(Hl<0)throw new Error(`Unexpected typed array class: ${ot}.`);ut&&ut instanceof ArrayBuffer?(this.data=ut,this.ids=new this.IndexArrayType(this.data,8,at),this.coords=new this.ArrayType(this.data,8+sc+oc,2*at),this._pos=2*at,this._finished=!0):(this.data=new ArrayBuffer(8+rc+sc+oc),this.ids=new this.IndexArrayType(this.data,8,at),this.coords=new this.ArrayType(this.data,8+sc+oc,2*at),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+Hl]),new Uint16Array(this.data,2,1)[0]=st,new Uint32Array(this.data,4,1)[0]=at)}add(at,st){const ot=this._pos>>1;return this.ids[ot]=ot,this.coords[this._pos++]=at,this.coords[this._pos++]=st,ot}finish(){const at=this._pos>>1;if(at!==this.numItems)throw new Error(`Added ${at} items when expected ${this.numItems}.`);return Rh(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(at,st,ot,ut){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:Hl,coords:rc,nodeSize:sc}=this,oc=[0,Hl.length-1,0],_c=[];for(;oc.length;){const wc=oc.pop()||0,Sc=oc.pop()||0,iu=oc.pop()||0;if(Sc-iu<=sc){for(let sc=iu;sc<=Sc;sc++){const oc=rc[2*sc],wc=rc[2*sc+1];oc>=at&&oc<=ot&&wc>=st&&wc<=ut&&_c.push(Hl[sc])}continue}const su=iu+Sc>>1,lu=rc[2*su],cu=rc[2*su+1];lu>=at&&lu<=ot&&cu>=st&&cu<=ut&&_c.push(Hl[su]),(0===wc?at<=lu:st<=cu)&&(oc.push(iu),oc.push(su-1),oc.push(1-wc)),(0===wc?ot>=lu:ut>=cu)&&(oc.push(su+1),oc.push(Sc),oc.push(1-wc))}return _c}within(at,st,ot){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:ut,coords:Hl,nodeSize:rc}=this,sc=[0,ut.length-1,0],oc=[],_c=ot*ot;for(;sc.length;){const wc=sc.pop()||0,Sc=sc.pop()||0,iu=sc.pop()||0;if(Sc-iu<=rc){for(let ot=iu;ot<=Sc;ot++)qh(Hl[2*ot],Hl[2*ot+1],at,st)<=_c&&oc.push(ut[ot]);continue}const su=iu+Sc>>1,lu=Hl[2*su],cu=Hl[2*su+1];qh(lu,cu,at,st)<=_c&&oc.push(ut[su]),(0===wc?at-ot<=lu:st-ot<=cu)&&(sc.push(iu),sc.push(su-1),sc.push(1-wc)),(0===wc?at+ot>=lu:st+ot>=cu)&&(sc.push(su+1),sc.push(Sc),sc.push(1-wc))}return oc}}function Rh(at,st,ot,ut,Hl,rc){if(Hl-ut<=ot)return;const sc=ut+Hl>>1;Nh(at,st,sc,ut,Hl,rc),Rh(at,st,ot,ut,sc-1,1-rc),Rh(at,st,ot,sc+1,Hl,1-rc)}function Nh(at,st,ot,ut,Hl,rc){for(;Hl>ut;){if(Hl-ut>600){const sc=Hl-ut+1,oc=ot-ut+1,_c=Math.log(sc),wc=.5*Math.exp(2*_c/3),Sc=.5*Math.sqrt(_c*wc*(sc-wc)/sc)*(oc-sc/2<0?-1:1);Nh(at,st,ot,Math.max(ut,Math.floor(ot-oc*wc/sc+Sc)),Math.min(Hl,Math.floor(ot+(sc-oc)*wc/sc+Sc)),rc)}const sc=st[2*ot+rc];let oc=ut,_c=Hl;for(jh(at,st,ut,ot),st[2*Hl+rc]>sc&&jh(at,st,ut,Hl);oc<_c;){for(jh(at,st,oc,_c),oc++,_c--;st[2*oc+rc]<sc;)oc++;for(;st[2*_c+rc]>sc;)_c--}st[2*ut+rc]===sc?jh(at,st,ut,_c):(_c++,jh(at,st,_c,Hl)),_c<=ot&&(ut=_c+1),ot<=_c&&(Hl=_c-1)}}function jh(at,st,ot,ut){Uh(at,ot,ut),Uh(st,2*ot,2*ut),Uh(st,2*ot+1,2*ut+1)}function Uh(at,st,ot){const ut=at[st];at[st]=at[ot],at[ot]=ut}function qh(at,st,ot,ut){const Hl=at-ot,rc=st-ut;return Hl*Hl+rc*rc}const Mg={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:at=>at},Sg=Math.fround||(Tg=new Float32Array(1),at=>(Tg[0]=+at,Tg[0]));var Tg;class Yh{constructor(at){this.options=Object.assign(Object.create(Mg),at),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(at){const{log:st,minZoom:ot,maxZoom:ut}=this.options;st&&console.time("total time");const Hl=`prepare ${at.length} points`;st&&console.time(Hl),this.points=at;const rc=[];for(let oc=0;oc<at.length;oc++){const st=at[oc];if(!st.geometry)continue;const[ot,ut]=st.geometry.coordinates,Hl=Sg(Wh(ot)),sc=Sg(Kh(ut));rc.push(Hl,sc,1/0,oc,-1,1),this.options.reduce&&rc.push(0)}let sc=this.trees[ut+1]=this._createTree(rc);st&&console.timeEnd(Hl);for(let oc=ut;oc>=ot;oc--){const at=+Date.now();sc=this.trees[oc]=this._createTree(this._cluster(sc,oc)),st&&console.log("z%d: %d clusters in %dms",oc,sc.numItems,+Date.now()-at)}return st&&console.timeEnd("total time"),this}getClusters(at,st){let ot=((at[0]+180)%360+360)%360-180;const ut=Math.max(-90,Math.min(90,at[1]));let Hl=180===at[2]?180:((at[2]+180)%360+360)%360-180;const rc=Math.max(-90,Math.min(90,at[3]));if(at[2]-at[0]>=360)ot=-180,Hl=180;else if(ot>Hl){const at=this.getClusters([ot,ut,180,rc],st),sc=this.getClusters([-180,ut,Hl,rc],st);return at.concat(sc)}const sc=this.trees[this._limitZoom(st)],oc=sc.range(Wh(ot),Kh(rc),Wh(Hl),Kh(ut)),_c=sc.data,wc=[];for(const Sc of oc){const at=this.stride*Sc;wc.push(_c[at+5]>1?Hh(_c,at,this.clusterProps):this.points[_c[at+3]])}return wc}getChildren(at){const st=this._getOriginId(at),ot=this._getOriginZoom(at),ut="No cluster with the specified id.",Hl=this.trees[ot];if(!Hl)throw new Error(ut);const rc=Hl.data;if(st*this.stride>=rc.length)throw new Error(ut);const sc=this.options.radius/(this.options.extent*Math.pow(2,ot-1)),oc=Hl.within(rc[st*this.stride],rc[st*this.stride+1],sc),_c=[];for(const wc of oc){const st=wc*this.stride;rc[st+4]===at&&_c.push(rc[st+5]>1?Hh(rc,st,this.clusterProps):this.points[rc[st+3]])}if(0===_c.length)throw new Error(ut);return _c}getLeaves(at,st,ot){const ut=[];return this._appendLeaves(ut,at,st=st||10,ot=ot||0,0),ut}getTile(at,st,ot){const ut=this.trees[this._limitZoom(at)],Hl=Math.pow(2,at),{extent:rc,radius:sc}=this.options,oc=sc/rc,_c=(ot-oc)/Hl,wc=(ot+1+oc)/Hl,Sc={features:[]};return this._addTileFeatures(ut.range((st-oc)/Hl,_c,(st+1+oc)/Hl,wc),ut.data,st,ot,Hl,Sc),0===st&&this._addTileFeatures(ut.range(1-oc/Hl,_c,1,wc),ut.data,Hl,ot,Hl,Sc),st===Hl-1&&this._addTileFeatures(ut.range(0,_c,oc/Hl,wc),ut.data,-1,ot,Hl,Sc),Sc.features.length?Sc:null}getClusterExpansionZoom(at){let st=this._getOriginZoom(at)-1;for(;st<=this.options.maxZoom;){const ot=this.getChildren(at);if(st++,1!==ot.length)break;at=ot[0].properties.cluster_id}return st}_appendLeaves(at,st,ot,ut,Hl){const rc=this.getChildren(st);for(const sc of rc){const st=sc.properties;if(st&&st.cluster?Hl+st.point_count<=ut?Hl+=st.point_count:Hl=this._appendLeaves(at,st.cluster_id,ot,ut,Hl):Hl<ut?Hl++:at.push(sc),at.length===ot)break}return Hl}_createTree(at){const st=new Oh(at.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ot=0;ot<at.length;ot+=this.stride)st.add(at[ot],at[ot+1]);return st.finish(),st.data=at,st}_addTileFeatures(at,st,ot,ut,Hl,rc){for(const sc of at){const at=sc*this.stride,oc=st[at+5]>1;let _c,wc,Sc;if(oc)_c=Jh(st,at,this.clusterProps),wc=st[at],Sc=st[at+1];else{const ot=this.points[st[at+3]];_c=ot.properties;const[ut,Hl]=ot.geometry.coordinates;wc=Wh(ut),Sc=Kh(Hl)}const iu={type:1,geometry:[[Math.round(this.options.extent*(wc*Hl-ot)),Math.round(this.options.extent*(Sc*Hl-ut))]],tags:_c};let su;su=oc||this.options.generateId?st[at+3]:this.points[st[at+3]].id,void 0!==su&&(iu.id=su),rc.features.push(iu)}}_limitZoom(at){return Math.max(this.options.minZoom,Math.min(Math.floor(+at),this.options.maxZoom+1))}_cluster(at,st){const{radius:ot,extent:ut,reduce:Hl,minPoints:rc}=this.options,sc=ot/(ut*Math.pow(2,st)),oc=at.data,_c=[],wc=this.stride;for(let Sc=0;Sc<oc.length;Sc+=wc){if(oc[Sc+2]<=st)continue;oc[Sc+2]=st;const ot=oc[Sc],ut=oc[Sc+1],iu=at.within(oc[Sc],oc[Sc+1],sc),su=oc[Sc+5];let lu=su;for(const at of iu){const ot=at*wc;oc[ot+2]>st&&(lu+=oc[ot+5])}if(lu>su&&lu>=rc){let at,rc=ot*su,sc=ut*su,cu=-1;const uu=(Sc/wc<<5)+(st+1)+this.points.length;for(const ot of iu){const ut=ot*wc;if(oc[ut+2]<=st)continue;oc[ut+2]=st;const _c=oc[ut+5];rc+=oc[ut]*_c,sc+=oc[ut+1]*_c,oc[ut+4]=uu,Hl&&(at||(at=this._map(oc,Sc,!0),cu=this.clusterProps.length,this.clusterProps.push(at)),Hl(at,this._map(oc,ut)))}oc[Sc+4]=uu,_c.push(rc/lu,sc/lu,1/0,uu,-1,lu),Hl&&_c.push(cu)}else{for(let at=0;at<wc;at++)_c.push(oc[Sc+at]);if(lu>1)for(const at of iu){const ot=at*wc;if(!(oc[ot+2]<=st)){oc[ot+2]=st;for(let at=0;at<wc;at++)_c.push(oc[ot+at])}}}}return _c}_getOriginId(at){return at-this.points.length>>5}_getOriginZoom(at){return(at-this.points.length)%32}_map(at,st,ot){if(at[st+5]>1){const ut=this.clusterProps[at[st+6]];return ot?Object.assign({},ut):ut}const ut=this.points[at[st+3]].properties,Hl=this.options.map(ut);return ot&&Hl===ut?Object.assign({},Hl):Hl}}function Hh(at,st,ot){return{type:"Feature",id:at[st+3],properties:Jh(at,st,ot),geometry:{type:"Point",coordinates:[(ut=at[st],360*(ut-.5)),Qh(at[st+1])]}};var ut}function Jh(at,st,ot){const ut=at[st+5],Hl=ut>=1e4?`${Math.round(ut/1e3)}k`:ut>=1e3?Math.round(ut/100)/10+"k":ut,rc=at[st+6],sc=-1===rc?{}:Object.assign({},ot[rc]);return Object.assign(sc,{cluster:!0,cluster_id:at[st+3],point_count:ut,point_count_abbreviated:Hl})}function Wh(at){return at/360+.5}function Kh(at){const st=Math.sin(at*Math.PI/180),ot=.5-.25*Math.log((1+st)/(1-st))/Math.PI;return ot<0?0:ot>1?1:ot}function Qh(at){const st=(180-360*at)*Math.PI/180;return 360*Math.atan(Math.exp(st))/Math.PI-90}function tp(at,st,ot,ut){let Hl=ut;const rc=st+(ot-st>>1);let sc,oc=ot-st;const _c=at[st],wc=at[st+1],Sc=at[ot],iu=at[ot+1];for(let su=st+3;su<ot;su+=3){const st=ep(at[su],at[su+1],_c,wc,Sc,iu);if(st>Hl)sc=su,Hl=st;else if(st===Hl){const at=Math.abs(su-rc);at<oc&&(sc=su,oc=at)}}Hl>ut&&(sc-st>3&&tp(at,st,sc,ut),at[sc+2]=Hl,ot-sc>3&&tp(at,sc,ot,ut))}function ep(at,st,ot,ut,Hl,rc){let sc=Hl-ot,oc=rc-ut;if(0!==sc||0!==oc){const _c=((at-ot)*sc+(st-ut)*oc)/(sc*sc+oc*oc);_c>1?(ot=Hl,ut=rc):_c>0&&(ot+=sc*_c,ut+=oc*_c)}return sc=at-ot,oc=st-ut,sc*sc+oc*oc}function rp(at,st,ot,ut){const Hl={id:null==at?null:at,type:st,geometry:ot,tags:ut,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if("Point"===st||"MultiPoint"===st||"LineString"===st)np(Hl,ot);else if("Polygon"===st)np(Hl,ot[0]);else if("MultiLineString"===st)for(const rc of ot)np(Hl,rc);else if("MultiPolygon"===st)for(const rc of ot)np(Hl,rc[0]);return Hl}function np(at,st){for(let ot=0;ot<st.length;ot+=3)at.minX=Math.min(at.minX,st[ot]),at.minY=Math.min(at.minY,st[ot+1]),at.maxX=Math.max(at.maxX,st[ot]),at.maxY=Math.max(at.maxY,st[ot+1])}function ip(at,st,ot,ut){if(!st.geometry)return;const Hl=st.geometry.coordinates;if(Hl&&0===Hl.length)return;const rc=st.geometry.type,sc=Math.pow(ot.tolerance/((1<<ot.maxZoom)*ot.extent),2);let oc=[],_c=st.id;if(ot.promoteId?_c=st.properties[ot.promoteId]:ot.generateId&&(_c=ut||0),"Point"===rc)sp(Hl,oc);else if("MultiPoint"===rc)for(const wc of Hl)sp(wc,oc);else if("LineString"===rc)op(Hl,oc,sc,!1);else if("MultiLineString"===rc){if(ot.lineMetrics){for(const ot of Hl)oc=[],op(ot,oc,sc,!1),at.push(rp(_c,"LineString",oc,st.properties));return}ap(Hl,oc,sc,!1)}else if("Polygon"===rc)ap(Hl,oc,sc,!0);else{if("MultiPolygon"!==rc){if("GeometryCollection"===rc){for(const Hl of st.geometry.geometries)ip(at,{id:_c,geometry:Hl,properties:st.properties},ot,ut);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const at of Hl){const st=[];ap(at,st,sc,!0),oc.push(st)}}at.push(rp(_c,rc,oc,st.properties))}function sp(at,st){st.push(lp(at[0]),up(at[1]),0)}function op(at,st,ot,ut){let Hl,rc,sc=0;for(let _c=0;_c<at.length;_c++){const ot=lp(at[_c][0]),oc=up(at[_c][1]);st.push(ot,oc,0),_c>0&&(sc+=ut?(Hl*oc-ot*rc)/2:Math.sqrt(Math.pow(ot-Hl,2)+Math.pow(oc-rc,2))),Hl=ot,rc=oc}const oc=st.length-3;st[2]=1,tp(st,0,oc,ot),st[oc+2]=1,st.size=Math.abs(sc),st.start=0,st.end=st.size}function ap(at,st,ot,ut){for(let Hl=0;Hl<at.length;Hl++){const rc=[];op(at[Hl],rc,ot,ut),st.push(rc)}}function lp(at){return at/360+.5}function up(at){const st=Math.sin(at*Math.PI/180),ot=.5-.25*Math.log((1+st)/(1-st))/Math.PI;return ot<0?0:ot>1?1:ot}function cp(at,st,ot,ut,Hl,rc,sc,oc){if(ut/=st,rc>=(ot/=st)&&sc<ut)return at;if(sc<ot||rc>=ut)return null;const _c=[];for(const wc of at){const at=wc.geometry;let st=wc.type;const rc=0===Hl?wc.minX:wc.minY,sc=0===Hl?wc.maxX:wc.maxY;if(rc>=ot&&sc<ut){_c.push(wc);continue}if(sc<ot||rc>=ut)continue;let Sc=[];if("Point"===st||"MultiPoint"===st)hp(at,Sc,ot,ut,Hl);else if("LineString"===st)pp(at,Sc,ot,ut,Hl,!1,oc.lineMetrics);else if("MultiLineString"===st)dp(at,Sc,ot,ut,Hl,!1);else if("Polygon"===st)dp(at,Sc,ot,ut,Hl,!0);else if("MultiPolygon"===st)for(const oc of at){const at=[];dp(oc,at,ot,ut,Hl,!0),at.length&&Sc.push(at)}if(Sc.length){if(oc.lineMetrics&&"LineString"===st){for(const at of Sc)_c.push(rp(wc.id,st,at,wc.tags));continue}"LineString"!==st&&"MultiLineString"!==st||(1===Sc.length?(st="LineString",Sc=Sc[0]):st="MultiLineString"),"Point"!==st&&"MultiPoint"!==st||(st=3===Sc.length?"Point":"MultiPoint"),_c.push(rp(wc.id,st,Sc,wc.tags))}}return _c.length?_c:null}function hp(at,st,ot,ut,Hl){for(let rc=0;rc<at.length;rc+=3){const sc=at[rc+Hl];sc>=ot&&sc<=ut&&yp(st,at[rc],at[rc+1],at[rc+2])}}function pp(at,st,ot,ut,Hl,rc,sc){let oc=fp(at);const _c=0===Hl?mp:gp;let wc,Sc,iu=at.start;for(let pu=0;pu<at.length-3;pu+=3){const su=at[pu],lu=at[pu+1],cu=at[pu+2],uu=at[pu+3],mu=at[pu+4],gu=0===Hl?su:lu,Au=0===Hl?uu:mu;let yu=!1;sc&&(wc=Math.sqrt(Math.pow(su-uu,2)+Math.pow(lu-mu,2))),gu<ot?Au>ot&&(Sc=_c(oc,su,lu,uu,mu,ot),sc&&(oc.start=iu+wc*Sc)):gu>ut?Au<ut&&(Sc=_c(oc,su,lu,uu,mu,ut),sc&&(oc.start=iu+wc*Sc)):yp(oc,su,lu,cu),Au<ot&&gu>=ot&&(Sc=_c(oc,su,lu,uu,mu,ot),yu=!0),Au>ut&&gu<=ut&&(Sc=_c(oc,su,lu,uu,mu,ut),yu=!0),!rc&&yu&&(sc&&(oc.end=iu+wc*Sc),st.push(oc),oc=fp(at)),sc&&(iu+=wc)}let su=at.length-3;const lu=at[su],cu=at[su+1],uu=0===Hl?lu:cu;uu>=ot&&uu<=ut&&yp(oc,lu,cu,at[su+2]),su=oc.length-3,rc&&su>=3&&(oc[su]!==oc[0]||oc[su+1]!==oc[1])&&yp(oc,oc[0],oc[1],oc[2]),oc.length&&st.push(oc)}function fp(at){const st=[];return st.size=at.size,st.start=at.start,st.end=at.end,st}function dp(at,st,ot,ut,Hl,rc){for(const sc of at)pp(sc,st,ot,ut,Hl,rc,!1)}function yp(at,st,ot,ut){at.push(st,ot,ut)}function mp(at,st,ot,ut,Hl,rc){const sc=(rc-st)/(ut-st);return yp(at,rc,ot+(Hl-ot)*sc,1),sc}function gp(at,st,ot,ut,Hl,rc){const sc=(rc-ot)/(Hl-ot);return yp(at,st+(ut-st)*sc,rc,1),sc}function xp(at,st){const ot=[];for(let ut=0;ut<at.length;ut++){const Hl=at[ut],rc=Hl.type;let sc;if("Point"===rc||"MultiPoint"===rc||"LineString"===rc)sc=vp(Hl.geometry,st);else if("MultiLineString"===rc||"Polygon"===rc){sc=[];for(const at of Hl.geometry)sc.push(vp(at,st))}else if("MultiPolygon"===rc){sc=[];for(const at of Hl.geometry){const ot=[];for(const ut of at)ot.push(vp(ut,st));sc.push(ot)}}ot.push(rp(Hl.id,rc,sc,Hl.tags))}return ot}function vp(at,st){const ot=[];ot.size=at.size,void 0!==at.start&&(ot.start=at.start,ot.end=at.end);for(let ut=0;ut<at.length;ut+=3)ot.push(at[ut]+st,at[ut+1],at[ut+2]);return ot}function bp(at,st){if(at.transformed)return at;const ot=1<<at.z,ut=at.x,Hl=at.y;for(const rc of at.features){const at=rc.geometry,sc=rc.type;if(rc.geometry=[],1===sc)for(let oc=0;oc<at.length;oc+=2)rc.geometry.push(wp(at[oc],at[oc+1],st,ot,ut,Hl));else for(let oc=0;oc<at.length;oc++){const sc=[];for(let rc=0;rc<at[oc].length;rc+=2)sc.push(wp(at[oc][rc],at[oc][rc+1],st,ot,ut,Hl));rc.geometry.push(sc)}}return at.transformed=!0,at}function wp(at,st,ot,ut,Hl,rc){return[Math.round(ot*(at*ut-Hl)),Math.round(ot*(st*ut-rc))]}function _p(at,st,ot,ut,Hl){const rc=st===Hl.maxZoom?0:Hl.tolerance/((1<<st)*Hl.extent),sc={features:[],numPoints:0,numSimplified:0,numFeatures:at.length,source:null,x:ot,y:ut,z:st,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const oc of at)Sp(sc,oc,rc,Hl);return sc}function Sp(at,st,ot,ut){const Hl=st.geometry,rc=st.type,sc=[];if(at.minX=Math.min(at.minX,st.minX),at.minY=Math.min(at.minY,st.minY),at.maxX=Math.max(at.maxX,st.maxX),at.maxY=Math.max(at.maxY,st.maxY),"Point"===rc||"MultiPoint"===rc)for(let oc=0;oc<Hl.length;oc+=3)sc.push(Hl[oc],Hl[oc+1]),at.numPoints++,at.numSimplified++;else if("LineString"===rc)kp(sc,Hl,at,ot,!1,!1);else if("MultiLineString"===rc||"Polygon"===rc)for(let oc=0;oc<Hl.length;oc++)kp(sc,Hl[oc],at,ot,"Polygon"===rc,0===oc);else if("MultiPolygon"===rc)for(let oc=0;oc<Hl.length;oc++){const st=Hl[oc];for(let ut=0;ut<st.length;ut++)kp(sc,st[ut],at,ot,!0,0===ut)}if(sc.length){let ot=st.tags||null;if("LineString"===rc&&ut.lineMetrics){ot={};for(const at in st.tags)ot[at]=st.tags[at];ot.mapbox_clip_start=Hl.start/Hl.size,ot.mapbox_clip_end=Hl.end/Hl.size}const oc={geometry:sc,type:"Polygon"===rc||"MultiPolygon"===rc?3:"LineString"===rc||"MultiLineString"===rc?2:1,tags:ot};null!==st.id&&(oc.id=st.id),at.features.push(oc)}}function kp(at,st,ot,ut,Hl,rc){const sc=ut*ut;if(ut>0&&st.size<(Hl?sc:ut))return void(ot.numPoints+=st.length/3);const oc=[];for(let _c=0;_c<st.length;_c+=3)(0===ut||st[_c+2]>sc)&&(ot.numSimplified++,oc.push(st[_c],st[_c+1])),ot.numPoints++;Hl&&function(at,st){let ot=0;for(let ut=0,Hl=at.length,rc=Hl-2;ut<Hl;rc=ut,ut+=2)ot+=(at[ut]-at[rc])*(at[ut+1]+at[rc+1]);if(ot>0===st)for(let ut=0,Hl=at.length;ut<Hl/2;ut+=2){const st=at[ut],ot=at[ut+1];at[ut]=at[Hl-2-ut],at[ut+1]=at[Hl-1-ut],at[Hl-2-ut]=st,at[Hl-1-ut]=ot}}(oc,rc),at.push(oc)}const Cg={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class Ip{constructor(at,st){const ot=(st=this.options=function(at,st){for(const ot in st)at[ot]=st[ot];return at}(Object.create(Cg),st)).debug;if(ot&&console.time("preprocess data"),st.maxZoom<0||st.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(st.promoteId&&st.generateId)throw new Error("promoteId and generateId cannot be used together.");let ut=function(at,st){const ot=[];if("FeatureCollection"===at.type)for(let ut=0;ut<at.features.length;ut++)ip(ot,at.features[ut],st,ut);else ip(ot,"Feature"===at.type?at:{geometry:at},st);return ot}(at,st);this.tiles={},this.tileCoords=[],ot&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",st.indexMaxZoom,st.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ut=function(at,st){const ot=st.buffer/st.extent;let ut=at;const Hl=cp(at,1,-1-ot,ot,0,-1,2,st),rc=cp(at,1,1-ot,2+ot,0,-1,2,st);return(Hl||rc)&&(ut=cp(at,1,-ot,1+ot,0,-1,2,st)||[],Hl&&(ut=xp(Hl,1).concat(ut)),rc&&(ut=ut.concat(xp(rc,-1)))),ut}(ut,st),ut.length&&this.splitTile(ut,0,0,0),ot&&(ut.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(at,st,ot,ut,Hl,rc,sc){const oc=[at,st,ot,ut],_c=this.options,wc=_c.debug;for(;oc.length;){ut=oc.pop(),ot=oc.pop(),st=oc.pop(),at=oc.pop();const Sc=1<<st,iu=Mp(st,ot,ut);let su=this.tiles[iu];if(!su&&(wc>1&&console.time("creation"),su=this.tiles[iu]=_p(at,st,ot,ut,_c),this.tileCoords.push({z:st,x:ot,y:ut}),wc)){wc>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",st,ot,ut,su.numFeatures,su.numPoints,su.numSimplified),console.timeEnd("creation"));const at=`z${st}`;this.stats[at]=(this.stats[at]||0)+1,this.total++}if(su.source=at,null==Hl){if(st===_c.indexMaxZoom||su.numPoints<=_c.indexMaxPoints)continue}else{if(st===_c.maxZoom||st===Hl)continue;if(null!=Hl){const at=Hl-st;if(ot!==rc>>at||ut!==sc>>at)continue}}if(su.source=null,0===at.length)continue;wc>1&&console.time("clipping");const lu=.5*_c.buffer/_c.extent,cu=.5-lu,uu=.5+lu,pu=1+lu;let mu=null,gu=null,Au=null,yu=null,_u=cp(at,Sc,ot-lu,ot+uu,0,su.minX,su.maxX,_c),xu=cp(at,Sc,ot+cu,ot+pu,0,su.minX,su.maxX,_c);at=null,_u&&(mu=cp(_u,Sc,ut-lu,ut+uu,1,su.minY,su.maxY,_c),gu=cp(_u,Sc,ut+cu,ut+pu,1,su.minY,su.maxY,_c),_u=null),xu&&(Au=cp(xu,Sc,ut-lu,ut+uu,1,su.minY,su.maxY,_c),yu=cp(xu,Sc,ut+cu,ut+pu,1,su.minY,su.maxY,_c),xu=null),wc>1&&console.timeEnd("clipping"),oc.push(mu||[],st+1,2*ot,2*ut),oc.push(gu||[],st+1,2*ot,2*ut+1),oc.push(Au||[],st+1,2*ot+1,2*ut),oc.push(yu||[],st+1,2*ot+1,2*ut+1)}}getTile(at,st,ot){at=+at,st=+st,ot=+ot;const ut=this.options,{extent:Hl,debug:rc}=ut;if(at<0||at>24)return null;const sc=1<<at,oc=Mp(at,st=st+sc&sc-1,ot);if(this.tiles[oc])return bp(this.tiles[oc],Hl);rc>1&&console.log("drilling down to z%d-%d-%d",at,st,ot);let _c,wc=at,Sc=st,iu=ot;for(;!_c&&wc>0;)wc--,Sc>>=1,iu>>=1,_c=this.tiles[Mp(wc,Sc,iu)];return _c&&_c.source?(rc>1&&(console.log("found parent tile z%d-%d-%d",wc,Sc,iu),console.time("drilling down")),this.splitTile(_c.source,wc,Sc,iu,at,st,ot),rc>1&&console.timeEnd("drilling down"),this.tiles[oc]?bp(this.tiles[oc],Hl):null):null}}function Mp(at,st,ot){return 32*((1<<at)*ot+st)+at}function zp(at,st){return st?at.properties[st]:at.id}function Pp(at,st){if(null==at)return!0;if("Feature"===at.type)return null!=zp(at,st);if("FeatureCollection"===at.type){const ot=new Set;for(const ut of at.features){const at=zp(ut,st);if(null==at)return!1;if(ot.has(at))return!1;ot.add(at)}return!0}return!1}function Tp(at,st){const ot=new Map;if(null==at);else if("Feature"===at.type)ot.set(zp(at,st),at);else for(const ut of at.features)ot.set(zp(ut,st),ut);return ot}class Cp extends Ah{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(at,st){return t(this,void 0,void 0,(function*(){const st=at.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const ot=this._geoJSONIndex.getTile(st.z,st.x,st.y);if(!ot)return null;const ut=new Ch(ot.features);let Hl=wg(ut);return 0===Hl.byteOffset&&Hl.byteLength===Hl.buffer.byteLength||(Hl=new Uint8Array(Hl)),{vectorTile:ut,rawData:Hl.buffer}}))}loadData(at){return t(this,void 0,void 0,(function*(){var st;null===(st=this._pendingRequest)||void 0===st||st.abort();const ot=!!(at&&at.request&&at.request.collectResourceTiming)&&new kh(at.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(at,this._pendingRequest),this._geoJSONIndex=at.cluster?new Yh(function(at){let{superclusterOptions:st,clusterProperties:ot}=at;if(!ot||!st)return st;const ut={},Hl={},rc={accumulated:null,zoom:0},sc={properties:null},oc=Object.keys(ot);for(const _c of oc){const[at,st]=ot[_c],rc=nn(st),sc=nn("string"==typeof at?[at,["accumulated"],["get",_c]]:at);ut[_c]=rc.value,Hl[_c]=sc.value}return st.map=at=>{sc.properties=at;const st={};for(const ot of oc)st[ot]=ut[ot].evaluate(rc,sc);return st},st.reduce=(at,st)=>{sc.properties=st;for(const ot of oc)rc.accumulated=at[ot],at[ot]=Hl[ot].evaluate(rc,sc)},st}(at)).load((yield this._pendingData).features):(ut=yield this._pendingData,new Ip(ut,at.geojsonVtOptions)),this.loaded={};const st={};if(ot){const ut=ot.finish();ut&&(st.resourceTiming={},st.resourceTiming[at.source]=JSON.parse(JSON.stringify(ut)))}return st}catch(st){if(delete this._pendingRequest,function(at){return at.message===jd}(st))return{abandoned:!0};throw st}var ut}))}getData(){return t(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(at){const st=this.loaded;return st&&st[at.uid]?super.reloadTile(at):this.loadTile(at)}loadAndProcessGeoJSON(at,st){return t(this,void 0,void 0,(function*(){let ot=yield this.loadGeoJSON(at,st);if(delete this._pendingRequest,"object"!=typeof ot)throw new Error(`Input data given to '${at.source}' is not a valid GeoJSON object.`);if(fg(ot,!0),at.filter){const st=nn(at.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===st.result)throw new Error(st.value.map((at=>`${at.key}: ${at.message}`)).join(", "));const ut=ot.features.filter((at=>st.value.evaluate({zoom:0},at)));ot={type:"FeatureCollection",features:ut}}return ot}))}loadGeoJSON(at,st){return t(this,void 0,void 0,(function*(){const{promoteId:ot}=at;if(at.request){const ut=yield((at,st)=>li(g(at,{type:"json"}),st))(at.request,st);return this._dataUpdateable=Pp(ut.data,ot)?Tp(ut.data,ot):void 0,ut.data}if("string"==typeof at.data)try{const st=JSON.parse(at.data);return this._dataUpdateable=Pp(st,ot)?Tp(st,ot):void 0,st}catch(ot){throw new Error(`Input data given to '${at.source}' is not a valid GeoJSON object.`)}if(!at.dataDiff)throw new Error(`Input data given to '${at.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${at.source}`);return function(at,st,ot){var ut,Hl,rc,sc;if(st.removeAll&&at.clear(),st.remove)for(const oc of st.remove)at.delete(oc);if(st.add)for(const oc of st.add){const st=zp(oc,ot);null!=st&&at.set(st,oc)}if(st.update)for(const oc of st.update){let st=at.get(oc.id);if(null==st)continue;const ot=!oc.removeAllProperties&&((null===(ut=oc.removeProperties)||void 0===ut?void 0:ut.length)>0||(null===(Hl=oc.addOrUpdateProperties)||void 0===Hl?void 0:Hl.length)>0);if((oc.newGeometry||oc.removeAllProperties||ot)&&(st=Object.assign({},st),at.set(oc.id,st),ot&&(st.properties=Object.assign({},st.properties))),oc.newGeometry&&(st.geometry=oc.newGeometry),oc.removeAllProperties)st.properties={};else if((null===(rc=oc.removeProperties)||void 0===rc?void 0:rc.length)>0)for(const at of oc.removeProperties)Object.prototype.hasOwnProperty.call(st.properties,at)&&delete st.properties[at];if((null===(sc=oc.addOrUpdateProperties)||void 0===sc?void 0:sc.length)>0)for(const{key:at,value:ut}of oc.addOrUpdateProperties)st.properties[at]=ut}}(this._dataUpdateable,at.dataDiff,ot),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(at){return t(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(at){return this._geoJSONIndex.getClusterExpansionZoom(at.clusterId)}getClusterChildren(at){return this._geoJSONIndex.getChildren(at.clusterId)}getClusterLeaves(at){return this._geoJSONIndex.getLeaves(at.clusterId,at.limit,at.offset)}}class Bp{constructor(at){this.self=at,this.actor=new xi(at),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(at,st)=>{if(this.externalWorkerSourceTypes[at])throw new Error(`Worker source with name "${at}" already registered.`);this.externalWorkerSourceTypes[at]=st},this.self.addProtocol=ni,this.self.removeProtocol=ii,this.self.registerRTLTextPlugin=at=>{Xd.setMethods(at)},this.actor.registerMessageHandler("LDT",((at,st)=>this._getDEMWorkerSource(at,st.source).loadTile(st))),this.actor.registerMessageHandler("RDT",((at,st)=>t(this,void 0,void 0,(function*(){this._getDEMWorkerSource(at,st.source).removeTile(st)})))),this.actor.registerMessageHandler("GCEZ",((at,st)=>t(this,void 0,void 0,(function*(){return this._getWorkerSource(at,st.type,st.source).getClusterExpansionZoom(st)})))),this.actor.registerMessageHandler("GCC",((at,st)=>t(this,void 0,void 0,(function*(){return this._getWorkerSource(at,st.type,st.source).getClusterChildren(st)})))),this.actor.registerMessageHandler("GCL",((at,st)=>t(this,void 0,void 0,(function*(){return this._getWorkerSource(at,st.type,st.source).getClusterLeaves(st)})))),this.actor.registerMessageHandler("LD",((at,st)=>this._getWorkerSource(at,st.type,st.source).loadData(st))),this.actor.registerMessageHandler("GD",((at,st)=>this._getWorkerSource(at,st.type,st.source).getData())),this.actor.registerMessageHandler("LT",((at,st)=>this._getWorkerSource(at,st.type,st.source).loadTile(st))),this.actor.registerMessageHandler("RT",((at,st)=>this._getWorkerSource(at,st.type,st.source).reloadTile(st))),this.actor.registerMessageHandler("AT",((at,st)=>this._getWorkerSource(at,st.type,st.source).abortTile(st))),this.actor.registerMessageHandler("RMT",((at,st)=>this._getWorkerSource(at,st.type,st.source).removeTile(st))),this.actor.registerMessageHandler("RS",((at,st)=>t(this,void 0,void 0,(function*(){if(!this.workerSources[at]||!this.workerSources[at][st.type]||!this.workerSources[at][st.type][st.source])return;const ot=this.workerSources[at][st.type][st.source];delete this.workerSources[at][st.type][st.source],void 0!==ot.removeSource&&ot.removeSource(st)})))),this.actor.registerMessageHandler("RM",(at=>t(this,void 0,void 0,(function*(){delete this.layerIndexes[at],delete this.availableImages[at],delete this.workerSources[at],delete this.demWorkerSources[at]})))),this.actor.registerMessageHandler("SR",((at,st)=>t(this,void 0,void 0,(function*(){this.referrer=st})))),this.actor.registerMessageHandler("SRPS",((at,st)=>this._syncRTLPluginState(at,st))),this.actor.registerMessageHandler("IS",((at,st)=>t(this,void 0,void 0,(function*(){this.self.importScripts(st)})))),this.actor.registerMessageHandler("SI",((at,st)=>this._setImages(at,st))),this.actor.registerMessageHandler("UL",((at,st)=>t(this,void 0,void 0,(function*(){this._getLayerIndex(at).update(st.layers,st.removedIds)})))),this.actor.registerMessageHandler("SL",((at,st)=>t(this,void 0,void 0,(function*(){this._getLayerIndex(at).replace(st)}))))}_setImages(at,st){return t(this,void 0,void 0,(function*(){this.availableImages[at]=st;for(const ot in this.workerSources[at]){const ut=this.workerSources[at][ot];for(const at in ut)ut[at].availableImages=st}}))}_syncRTLPluginState(at,st){return t(this,void 0,void 0,(function*(){return yield Xd.syncState(st,this.self.importScripts)}))}_getAvailableImages(at){let st=this.availableImages[at];return st||(st=[]),st}_getLayerIndex(at){let st=this.layerIndexes[at];return st||(st=this.layerIndexes[at]=new Mc),st}_getWorkerSource(at,st,ot){if(this.workerSources[at]||(this.workerSources[at]={}),this.workerSources[at][st]||(this.workerSources[at][st]={}),!this.workerSources[at][st][ot]){const ut={sendAsync:(st,ot)=>(st.targetMapId=at,this.actor.sendAsync(st,ot))};switch(st){case"vector":this.workerSources[at][st][ot]=new Ah(ut,this._getLayerIndex(at),this._getAvailableImages(at));break;case"geojson":this.workerSources[at][st][ot]=new Cp(ut,this._getLayerIndex(at),this._getAvailableImages(at));break;default:this.workerSources[at][st][ot]=new this.externalWorkerSourceTypes[st](ut,this._getLayerIndex(at),this._getAvailableImages(at))}}return this.workerSources[at][st][ot]}_getDEMWorkerSource(at,st){return this.demWorkerSources[at]||(this.demWorkerSources[at]={}),this.demWorkerSources[at][st]||(this.demWorkerSources[at][st]=new Ih),this.demWorkerSources[at][st]}}S(self)&&(self.worker=new Bp(self))}()},927:function(at){
/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.6.0/LICENSE.txt
 */
at.exports=function(){"use strict";var at={},st={};function define(ot,ut,Hl){if(st[ot]=Hl,"index"===ot){var rc="var sharedModule = {}; ("+st.shared+")(sharedModule); ("+st.worker+")(sharedModule);",sc={};return st.shared(sc),st.index(at,sc),"undefined"!==typeof window&&at.setWorkerUrl(window.URL.createObjectURL(new Blob([rc],{type:"text/javascript"}))),at}}return define("shared",["exports"],(function(at){function e(at,st,ot,ut){return new(ot||(ot=Promise))((function(Hl,rc){function a(at){try{l(ut.next(at))}catch(at){rc(at)}}function o(at){try{l(ut.throw(at))}catch(at){rc(at)}}function l(at){var st;at.done?Hl(at.value):(st=at.value,st instanceof ot?st:new ot((function(at){at(st)}))).then(a,o)}l((ut=ut.apply(at,st||[])).next())}))}function r(at){return at&&at.__esModule&&Object.prototype.hasOwnProperty.call(at,"default")?at.default:at}var st,ot;function s(){if(ot)return st;function t(at,st){this.x=at,this.y=st}return ot=1,st=t,t.prototype={clone:function(){return new t(this.x,this.y)},add:function(at){return this.clone()._add(at)},sub:function(at){return this.clone()._sub(at)},multByPoint:function(at){return this.clone()._multByPoint(at)},divByPoint:function(at){return this.clone()._divByPoint(at)},mult:function(at){return this.clone()._mult(at)},div:function(at){return this.clone()._div(at)},rotate:function(at){return this.clone()._rotate(at)},rotateAround:function(at,st){return this.clone()._rotateAround(at,st)},matMult:function(at){return this.clone()._matMult(at)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(at){return this.x===at.x&&this.y===at.y},dist:function(at){return Math.sqrt(this.distSqr(at))},distSqr:function(at){var st=at.x-this.x,ot=at.y-this.y;return st*st+ot*ot},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(at){return Math.atan2(this.y-at.y,this.x-at.x)},angleWith:function(at){return this.angleWithSep(at.x,at.y)},angleWithSep:function(at,st){return Math.atan2(this.x*st-this.y*at,this.x*at+this.y*st)},_matMult:function(at){var st=at[2]*this.x+at[3]*this.y;return this.x=at[0]*this.x+at[1]*this.y,this.y=st,this},_add:function(at){return this.x+=at.x,this.y+=at.y,this},_sub:function(at){return this.x-=at.x,this.y-=at.y,this},_mult:function(at){return this.x*=at,this.y*=at,this},_div:function(at){return this.x/=at,this.y/=at,this},_multByPoint:function(at){return this.x*=at.x,this.y*=at.y,this},_divByPoint:function(at){return this.x/=at.x,this.y/=at.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var at=this.y;return this.y=this.x,this.x=-at,this},_rotate:function(at){var st=Math.cos(at),ot=Math.sin(at),ut=ot*this.x+st*this.y;return this.x=st*this.x-ot*this.y,this.y=ut,this},_rotateAround:function(at,st){var ot=Math.cos(at),ut=Math.sin(at),Hl=st.y+ut*(this.x-st.x)+ot*(this.y-st.y);return this.x=st.x+ot*(this.x-st.x)-ut*(this.y-st.y),this.y=Hl,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},t.convert=function(at){return at instanceof t?at:Array.isArray(at)?new t(at[0],at[1]):at},st}"function"==typeof SuppressedError&&SuppressedError;var ut,Hl,rc=r(s()),sc=function(){if(Hl)return ut;function t(at,st,ot,ut){this.cx=3*at,this.bx=3*(ot-at)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*st,this.by=3*(ut-st)-this.cy,this.ay=1-this.cy-this.by,this.p1x=at,this.p1y=st,this.p2x=ot,this.p2y=ut}return Hl=1,ut=t,t.prototype={sampleCurveX:function(at){return((this.ax*at+this.bx)*at+this.cx)*at},sampleCurveY:function(at){return((this.ay*at+this.by)*at+this.cy)*at},sampleCurveDerivativeX:function(at){return(3*this.ax*at+2*this.bx)*at+this.cx},solveCurveX:function(at,st){if(void 0===st&&(st=1e-6),at<0)return 0;if(at>1)return 1;for(var ot=at,ut=0;ut<8;ut++){var Hl=this.sampleCurveX(ot)-at;if(Math.abs(Hl)<st)return ot;var rc=this.sampleCurveDerivativeX(ot);if(Math.abs(rc)<1e-6)break;ot-=Hl/rc}var sc=0,oc=1;for(ot=at,ut=0;ut<20&&(Hl=this.sampleCurveX(ot),!(Math.abs(Hl-at)<st));ut++)at>Hl?sc=ot:oc=ot,ot=.5*(oc-sc)+sc;return ot},solve:function(at,st){return this.sampleCurveY(this.solveCurveX(at,st))}},ut}(),oc=r(sc);let _c,wc;function f(){return null==_c&&(_c="undefined"!=typeof OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&"function"==typeof createImageBitmap),_c}function d(){if(null==wc&&(wc=!1,f())){const at=5,st=new OffscreenCanvas(at,at).getContext("2d",{willReadFrequently:!0});if(st){for(let ut=0;ut<at*at;ut++){const ot=4*ut;st.fillStyle=`rgb(${ot},${ot+1},${ot+2})`,st.fillRect(ut%at,Math.floor(ut/at),1,1)}const ot=st.getImageData(0,0,at,at).data;for(let st=0;st<at*at*4;st++)if(st%4!=3&&ot[st]!==st){wc=!0;break}}}return wc||!1}var Sc=1e-6,iu="undefined"!=typeof Float32Array?Float32Array:Array;function g(){var at=new iu(9);return iu!=Float32Array&&(at[1]=0,at[2]=0,at[3]=0,at[5]=0,at[6]=0,at[7]=0),at[0]=1,at[4]=1,at[8]=1,at}function x(at){return at[0]=1,at[1]=0,at[2]=0,at[3]=0,at[4]=0,at[5]=1,at[6]=0,at[7]=0,at[8]=0,at[9]=0,at[10]=1,at[11]=0,at[12]=0,at[13]=0,at[14]=0,at[15]=1,at}function v(){var at=new iu(3);return iu!=Float32Array&&(at[0]=0,at[1]=0,at[2]=0),at}function b(at){return Math.hypot(at[0],at[1],at[2])}function w(at,st,ot){var ut=new iu(3);return ut[0]=at,ut[1]=st,ut[2]=ot,ut}function _(at,st,ot){return at[0]=st[0]+ot[0],at[1]=st[1]+ot[1],at[2]=st[2]+ot[2],at}function S(at,st,ot){return at[0]=st[0]*ot,at[1]=st[1]*ot,at[2]=st[2]*ot,at}function A(at,st,ot){var ut=st[0],Hl=st[1],rc=st[2],sc=ot[0],oc=ot[1],_c=ot[2];return at[0]=Hl*_c-rc*oc,at[1]=rc*sc-ut*_c,at[2]=ut*oc-Hl*sc,at}Math.hypot||(Math.hypot=function(){for(var at=0,st=arguments.length;st--;)at+=arguments[st]*arguments[st];return Math.sqrt(at)});var su,lu=b;function I(at,st,ot){var ut=st[0],Hl=st[1],rc=st[2],sc=st[3];return at[0]=ot[0]*ut+ot[4]*Hl+ot[8]*rc+ot[12]*sc,at[1]=ot[1]*ut+ot[5]*Hl+ot[9]*rc+ot[13]*sc,at[2]=ot[2]*ut+ot[6]*Hl+ot[10]*rc+ot[14]*sc,at[3]=ot[3]*ut+ot[7]*Hl+ot[11]*rc+ot[15]*sc,at}function z(){var at=new iu(4);return iu!=Float32Array&&(at[0]=0,at[1]=0,at[2]=0),at[3]=1,at}function P(at,st,ot,ut){var Hl=.5*Math.PI/180;st*=Hl,ot*=Hl,ut*=Hl;var rc=Math.sin(st),sc=Math.cos(st),oc=Math.sin(ot),_c=Math.cos(ot),wc=Math.sin(ut),Sc=Math.cos(ut);return at[0]=rc*_c*Sc-sc*oc*wc,at[1]=sc*oc*Sc+rc*_c*wc,at[2]=sc*_c*wc-rc*oc*Sc,at[3]=sc*_c*Sc+rc*oc*wc,at}function C(){var at=new iu(2);return iu!=Float32Array&&(at[0]=0,at[1]=0),at}function B(at,st){var ot=new iu(2);return ot[0]=at,ot[1]=st,ot}v(),su=new iu(4),iu!=Float32Array&&(su[0]=0,su[1]=0,su[2]=0,su[3]=0),v(),w(1,0,0),w(0,1,0),z(),z(),g(),C();const cu=8192;function T(at,st,ot){return st*(cu/(at.tileSize*Math.pow(2,ot-at.tileID.overscaledZ)))}function V(at,st){return(at%st+st)%st}function F(at,st,ot){return at*(1-ot)+st*ot}function L(at){if(at<=0)return 0;if(at>=1)return 1;const st=at*at,ot=st*at;return 4*(at<.5?ot:3*(at-st)+ot-.75)}function $(at,st,ot,ut){const Hl=new oc(at,st,ot,ut);return at=>Hl.solve(at)}const uu=$(.25,.1,.25,1);function O(at,st,ot){return Math.min(ot,Math.max(st,at))}function R(at,st,ot){const ut=ot-st,Hl=((at-st)%ut+ut)%ut+st;return Hl===st?ot:Hl}function j(at,...st){for(const ot of st)for(const st in ot)at[st]=ot[st];return at}let pu=1;function U(at,st,ot){const ut={};for(const Hl in at)ut[Hl]=st.call(this,at[Hl],Hl,at);return ut}function q(at,st,ot){const ut={};for(const Hl in at)st.call(this,at[Hl],Hl,at)&&(ut[Hl]=at[Hl]);return ut}function G(at){return Array.isArray(at)?at.map(G):"object"==typeof at&&at?U(at,G):at}const mu={};function Z(at){mu[at]||("undefined"!=typeof console&&console.warn(at),mu[at]=!0)}function Y(at,st,ot){return(ot.y-at.y)*(st.x-at.x)>(st.y-at.y)*(ot.x-at.x)}function H(at){return"undefined"!=typeof WorkerGlobalScope&&void 0!==at&&at instanceof WorkerGlobalScope}let gu=null;function J(at){return"undefined"!=typeof ImageBitmap&&at instanceof ImageBitmap}const Au="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Q(at,st,ot,ut,Hl){return e(this,void 0,void 0,(function*(){if("undefined"==typeof VideoFrame)throw new Error("VideoFrame not supported");const rc=new VideoFrame(at,{timestamp:0});try{const sc=null==rc?void 0:rc.format;if(!sc||!sc.startsWith("BGR")&&!sc.startsWith("RGB"))throw new Error(`Unrecognized format ${sc}`);const oc=sc.startsWith("BGR"),_c=new Uint8ClampedArray(ut*Hl*4);if(yield rc.copyTo(_c,function(at,st,ot,ut,Hl){const rc=4*Math.max(1,0),sc=(Math.max(0,ot)-ot)*ut*4+rc,oc=4*ut,_c=Math.max(0,st),wc=Math.max(0,ot);return{rect:{x:_c,y:wc,width:Math.min(at.width,st+ut)-_c,height:Math.min(at.height,ot+Hl)-wc},layout:[{offset:sc,stride:oc}]}}(at,st,ot,ut,Hl)),oc)for(let at=0;at<_c.length;at+=4){const st=_c[at];_c[at]=_c[at+2],_c[at+2]=st}return _c}finally{rc.close()}}))}let yu,_u;function rt(at,st,ot,ut){return at.addEventListener(st,ot,ut),{unsubscribe:()=>{at.removeEventListener(st,ot,ut)}}}function nt(at){return at*Math.PI/180}function it(at){return at/Math.PI*180}const xu={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Su={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Du="AbortError";function lt(){return new Error(Du)}const Lu={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ct(at){return Lu.REGISTERED_PROTOCOLS[at.substring(0,at.indexOf("://"))]}const $u="global-dispatcher";class pt extends Error{constructor(at,st,ot,ut){super(`AJAXError: ${st} (${at}): ${ot}`),this.status=at,this.statusText=st,this.url=ot,this.body=ut}}const ft=()=>H(self)?self.worker&&self.worker.referrer:("blob:"===window.location.protocol?window.parent:window).location.href,dt=function(at,st){if(/:\/\//.test(at.url)&&!/^https?:|^file:/.test(at.url)){const ot=ct(at.url);if(ot)return ot(at,st);if(H(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:at,targetMapId:$u},st)}if(!(/^file:/.test(ot=at.url)||/^file:/.test(ft())&&!/^\w+:/.test(ot))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(at,st){return e(this,void 0,void 0,(function*(){const ot=new Request(at.url,{method:at.method||"GET",body:at.body,credentials:at.credentials,headers:at.headers,cache:at.cache,referrer:ft(),signal:st.signal});let ut,Hl;"json"!==at.type||ot.headers.has("Accept")||ot.headers.set("Accept","application/json");try{ut=yield fetch(ot)}catch(ot){throw new pt(0,ot.message,at.url,new Blob)}if(!ut.ok){const st=yield ut.blob();throw new pt(ut.status,ut.statusText,at.url,st)}Hl="arrayBuffer"===at.type||"image"===at.type?ut.arrayBuffer():"json"===at.type?ut.json():ut.text();const rc=yield Hl;if(st.signal.aborted)throw lt();return{data:rc,cacheControl:ut.headers.get("Cache-Control"),expires:ut.headers.get("Expires")}}))}(at,st);if(H(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:at,mustQueue:!0,targetMapId:$u},st)}var ot;return function(at,st){return new Promise(((ot,ut)=>{var Hl;const rc=new XMLHttpRequest;rc.open(at.method||"GET",at.url,!0),"arrayBuffer"!==at.type&&"image"!==at.type||(rc.responseType="arraybuffer");for(const st in at.headers)rc.setRequestHeader(st,at.headers[st]);"json"===at.type&&(rc.responseType="text",(null===(Hl=at.headers)||void 0===Hl?void 0:Hl.Accept)||rc.setRequestHeader("Accept","application/json")),rc.withCredentials="include"===at.credentials,rc.onerror=()=>{ut(new Error(rc.statusText))},rc.onload=()=>{if(!st.signal.aborted)if((rc.status>=200&&rc.status<300||0===rc.status)&&null!==rc.response){let st=rc.response;if("json"===at.type)try{st=JSON.parse(rc.response)}catch(at){return void ut(at)}ot({data:st,cacheControl:rc.getResponseHeader("Cache-Control"),expires:rc.getResponseHeader("Expires")})}else{const st=new Blob([rc.response],{type:rc.getResponseHeader("Content-Type")});ut(new pt(rc.status,rc.statusText,at.url,st))}},st.signal.addEventListener("abort",(()=>{rc.abort(),ut(lt())})),rc.send(at.body)}))}(at,st)};function yt(at){if(!at||at.indexOf("://")<=0||0===at.indexOf("data:image/")||0===at.indexOf("blob:"))return!0;const st=new URL(at),ot=window.location;return st.protocol===ot.protocol&&st.host===ot.host}function mt(at,st,ot){ot[at]&&-1!==ot[at].indexOf(st)||(ot[at]=ot[at]||[],ot[at].push(st))}function gt(at,st,ot){if(ot&&ot[at]){const ut=ot[at].indexOf(st);-1!==ut&&ot[at].splice(ut,1)}}class xt{constructor(at,st={}){j(this,st),this.type=at}}class vt extends xt{constructor(at,st={}){super("error",j({error:at},st))}}class bt{on(at,st){return this._listeners=this._listeners||{},mt(at,st,this._listeners),{unsubscribe:()=>{this.off(at,st)}}}off(at,st){return gt(at,st,this._listeners),gt(at,st,this._oneTimeListeners),this}once(at,st){return st?(this._oneTimeListeners=this._oneTimeListeners||{},mt(at,st,this._oneTimeListeners),this):new Promise((st=>this.once(at,st)))}fire(at,st){"string"==typeof at&&(at=new xt(at,st||{}));const ot=at.type;if(this.listens(ot)){at.target=this;const st=this._listeners&&this._listeners[ot]?this._listeners[ot].slice():[];for(const ot of st)ot.call(this,at);const ut=this._oneTimeListeners&&this._oneTimeListeners[ot]?this._oneTimeListeners[ot].slice():[];for(const rc of ut)gt(ot,rc,this._oneTimeListeners),rc.call(this,at);const Hl=this._eventedParent;Hl&&(j(at,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData),Hl.fire(at))}else at instanceof vt&&console.error(at.error);return this}listens(at){return this._listeners&&this._listeners[at]&&this._listeners[at].length>0||this._oneTimeListeners&&this._oneTimeListeners[at]&&this._oneTimeListeners[at].length>0||this._eventedParent&&this._eventedParent.listens(at)}setEventedParent(at,st){return this._eventedParent=at,this._eventedParentData=st,this}}var hh={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const ed=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function St(at,st){const ot={};for(const ut in at)"ref"!==ut&&(ot[ut]=at[ut]);return ed.forEach((at=>{at in st&&(ot[at]=st[at])})),ot}function At(at,st){if(Array.isArray(at)){if(!Array.isArray(st)||at.length!==st.length)return!1;for(let ot=0;ot<at.length;ot++)if(!At(at[ot],st[ot]))return!1;return!0}if("object"==typeof at&&null!==at&&null!==st){if("object"!=typeof st)return!1;if(Object.keys(at).length!==Object.keys(st).length)return!1;for(const ot in at)if(!At(at[ot],st[ot]))return!1;return!0}return at===st}function kt(at,st){at.push(st)}function Mt(at,st,ot){kt(ot,{command:"addSource",args:[at,st[at]]})}function It(at,st,ot){kt(st,{command:"removeSource",args:[at]}),ot[at]=!0}function zt(at,st,ot,ut){It(at,ot,ut),Mt(at,st,ot)}function Pt(at,st,ot){let ut;for(ut in at[ot])if(Object.prototype.hasOwnProperty.call(at[ot],ut)&&"data"!==ut&&!At(at[ot][ut],st[ot][ut]))return!1;for(ut in st[ot])if(Object.prototype.hasOwnProperty.call(st[ot],ut)&&"data"!==ut&&!At(at[ot][ut],st[ot][ut]))return!1;return!0}function Ct(at,st,ot,ut,Hl,rc){at=at||{},st=st||{};for(const sc in at)Object.prototype.hasOwnProperty.call(at,sc)&&(At(at[sc],st[sc])||ot.push({command:rc,args:[ut,sc,st[sc],Hl]}));for(const sc in st)Object.prototype.hasOwnProperty.call(st,sc)&&!Object.prototype.hasOwnProperty.call(at,sc)&&(At(at[sc],st[sc])||ot.push({command:rc,args:[ut,sc,st[sc],Hl]}))}function Bt(at){return at.id}function Et(at,st){return at[st.id]=st,at}class Tt{constructor(at,st,ot,ut){this.message=(at?`${at}: `:"")+ot,ut&&(this.identifier=ut),null!=st&&st.__line__&&(this.line=st.__line__)}}function Vt(at,...st){for(const ot of st)for(const st in ot)at[st]=ot[st];return at}class Ft extends Error{constructor(at,st){super(st),this.message=st,this.key=at}}class Lt{constructor(at,st=[]){this.parent=at,this.bindings={};for(const[ot,ut]of st)this.bindings[ot]=ut}concat(at){return new Lt(this,at)}get(at){if(this.bindings[at])return this.bindings[at];if(this.parent)return this.parent.get(at);throw new Error(`${at} not found in scope.`)}has(at){return!!this.bindings[at]||!!this.parent&&this.parent.has(at)}}const td={kind:"null"},id={kind:"number"},nd={kind:"string"},rd={kind:"boolean"},ad={kind:"color"},sd={kind:"projectionDefinition"},od={kind:"object"},ld={kind:"value"},cd={kind:"collator"},ud={kind:"formatted"},hd={kind:"padding"},dd={kind:"colorArray"},pd={kind:"numberArray"},md={kind:"resolvedImage"},gd={kind:"variableAnchorOffsetCollection"};function Wt(at,st){return{kind:"array",itemType:at,N:st}}function Qt(at){if("array"===at.kind){const st=Qt(at.itemType);return"number"==typeof at.N?`array<${st}, ${at.N}>`:"value"===at.itemType.kind?"array":`array<${st}>`}return at.kind}const fd=[td,id,nd,rd,ad,sd,ud,od,Wt(ld),hd,pd,dd,md,gd];function ee(at,st){if("error"===st.kind)return null;if("array"===at.kind){if("array"===st.kind&&(0===st.N&&"value"===st.itemType.kind||!ee(at.itemType,st.itemType))&&("number"!=typeof at.N||at.N===st.N))return null}else{if(at.kind===st.kind)return null;if("value"===at.kind)for(const at of fd)if(!ee(at,st))return null}return`Expected ${Qt(at)} but found ${Qt(st)} instead.`}function re(at,st){return st.some((st=>st.kind===at.kind))}function ne(at,st){return st.some((st=>"null"===st?null===at:"array"===st?Array.isArray(at):"object"===st?at&&!Array.isArray(at)&&"object"==typeof at:st===typeof at))}function ie(at,st){return"array"===at.kind&&"array"===st.kind?at.itemType.kind===st.itemType.kind&&"number"==typeof at.N:at.kind===st.kind}const Ad=.96422,yd=.82521,vd=4/29,_d=6/29,xd=3*_d*_d,bd=_d*_d*_d,wd=Math.PI/180,Ed=180/Math.PI;function fe(at){return(at%=360)<0&&(at+=360),at}function de([at,st,ot,ut]){let Hl,rc;const sc=me((.2225045*(at=ye(at))+.7168786*(st=ye(st))+.0606169*(ot=ye(ot)))/1);at===st&&st===ot?Hl=rc=sc:(Hl=me((.4360747*at+.3850649*st+.1430804*ot)/Ad),rc=me((.0139322*at+.0971045*st+.7141733*ot)/yd));const oc=116*sc-16;return[oc<0?0:oc,500*(Hl-sc),200*(sc-rc),ut]}function ye(at){return at<=.04045?at/12.92:Math.pow((at+.055)/1.055,2.4)}function me(at){return at>bd?Math.pow(at,1/3):at/xd+vd}function ge([at,st,ot,ut]){let Hl=(at+16)/116,rc=isNaN(st)?Hl:Hl+st/500,sc=isNaN(ot)?Hl:Hl-ot/200;return Hl=1*ve(Hl),rc=Ad*ve(rc),sc=yd*ve(sc),[xe(3.1338561*rc-1.6168667*Hl-.4906146*sc),xe(-.9787684*rc+1.9161415*Hl+.033454*sc),xe(.0719453*rc-.2289914*Hl+1.4052427*sc),ut]}function xe(at){return(at=at<=.00304?12.92*at:1.055*Math.pow(at,1/2.4)-.055)<0?0:at>1?1:at}function ve(at){return at>_d?at*at*at:xd*(at-vd)}const Md=Object.hasOwn||function(at,st){return Object.prototype.hasOwnProperty.call(at,st)};function we(at,st){return Md(at,st)?at[st]:void 0}function _e(at){return parseInt(at.padEnd(2,at),16)/255}function Se(at,st){return Ae(st?at/100:at,0,1)}function Ae(at,st,ot){return Math.min(Math.max(st,at),ot)}function ke(at){return!at.some(Number.isNaN)}const Sd={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Ie(at,st,ot){return at+ot*(st-at)}function ze(at,st,ot){return at.map(((at,ut)=>Ie(at,st[ut],ot)))}class Pe{constructor(at,st,ot,ut=1,Hl=!0){this.r=at,this.g=st,this.b=ot,this.a=ut,Hl||(this.r*=ut,this.g*=ut,this.b*=ut,ut||this.overwriteGetter("rgb",[at,st,ot,ut]))}static parse(at){if(at instanceof Pe)return at;if("string"!=typeof at)return;const st=function(at){if("transparent"===(at=at.toLowerCase().trim()))return[0,0,0,0];const st=we(Sd,at);if(st){const[at,ot,ut]=st;return[at/255,ot/255,ut/255,1]}if(at.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(at)){const st=at.length<6?1:2;let ot=1;return[_e(at.slice(ot,ot+=st)),_e(at.slice(ot,ot+=st)),_e(at.slice(ot,ot+=st)),_e(at.slice(ot,ot+st)||"ff")]}if(at.startsWith("rgb")){const st=at.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(st){const[at,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su]=st,lu=[Hl||" ",oc||" ",Sc].join("");if("  "===lu||"  /"===lu||",,"===lu||",,,"===lu){const at=[ut,sc,wc].join(""),st="%%%"===at?100:""===at?255:0;if(st){const at=[Ae(+ot/st,0,1),Ae(+rc/st,0,1),Ae(+_c/st,0,1),iu?Se(+iu,su):1];if(ke(at))return at}}return}}const ot=at.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(ot){const[at,st,ut,Hl,rc,sc,oc,_c,wc]=ot,Sc=[ut||" ",rc||" ",oc].join("");if("  "===Sc||"  /"===Sc||",,"===Sc||",,,"===Sc){const at=[+st,Ae(+Hl,0,100),Ae(+sc,0,100),_c?Se(+_c,wc):1];if(ke(at))return function([at,st,ot,ut]){function i(ut){const Hl=(ut+at/30)%12,rc=st*Math.min(ot,1-ot);return ot-rc*Math.max(-1,Math.min(Hl-3,9-Hl,1))}return at=fe(at),st/=100,ot/=100,[i(0),i(8),i(4),ut]}(at)}}}(at);return st?new Pe(...st,!1):void 0}get rgb(){const{r:at,g:st,b:ot,a:ut}=this,Hl=ut||1/0;return this.overwriteGetter("rgb",[at/Hl,st/Hl,ot/Hl,ut])}get hcl(){return this.overwriteGetter("hcl",function(at){const[st,ot,ut,Hl]=de(at),rc=Math.sqrt(ot*ot+ut*ut);return[Math.round(1e4*rc)?fe(Math.atan2(ut,ot)*Ed):NaN,rc,st,Hl]}(this.rgb))}get lab(){return this.overwriteGetter("lab",de(this.rgb))}overwriteGetter(at,st){return Object.defineProperty(this,at,{value:st}),st}toString(){const[at,st,ot,ut]=this.rgb;return`rgba(${[at,st,ot].map((at=>Math.round(255*at))).join(",")},${ut})`}static interpolate(at,st,ot,ut="rgb"){switch(ut){case"rgb":{const[ut,Hl,rc,sc]=ze(at.rgb,st.rgb,ot);return new Pe(ut,Hl,rc,sc,!1)}case"hcl":{const[ut,Hl,rc,sc]=at.hcl,[oc,_c,wc,Sc]=st.hcl;let iu,su;if(isNaN(ut)||isNaN(oc))isNaN(ut)?isNaN(oc)?iu=NaN:(iu=oc,1!==rc&&0!==rc||(su=_c)):(iu=ut,1!==wc&&0!==wc||(su=Hl));else{let at=oc-ut;oc>ut&&at>180?at-=360:oc<ut&&ut-oc>180&&(at+=360),iu=ut+ot*at}const[lu,cu,uu,pu]=function([at,st,ot,ut]){return at=isNaN(at)?0:at*wd,ge([ot,Math.cos(at)*st,Math.sin(at)*st,ut])}([iu,null!=su?su:Ie(Hl,_c,ot),Ie(rc,wc,ot),Ie(sc,Sc,ot)]);return new Pe(lu,cu,uu,pu,!1)}case"lab":{const[ut,Hl,rc,sc]=ge(ze(at.lab,st.lab,ot));return new Pe(ut,Hl,rc,sc,!1)}}}}Pe.black=new Pe(0,0,0,1),Pe.white=new Pe(1,1,1,1),Pe.transparent=new Pe(0,0,0,0),Pe.red=new Pe(1,0,0,1);class Ce{constructor(at,st,ot){this.sensitivity=at?st?"variant":"case":st?"accent":"base",this.locale=ot,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(at,st){return this.collator.compare(at,st)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Td=["bottom","center","top"];class Ee{constructor(at,st,ot,ut,Hl,rc){this.text=at,this.image=st,this.scale=ot,this.fontStack=ut,this.textColor=Hl,this.verticalAlign=rc}}class Te{constructor(at){this.sections=at}static fromString(at){return new Te([new Ee(at,null,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((at=>0!==at.text.length||at.image&&0!==at.image.name.length))}static factory(at){return at instanceof Te?at:Te.fromString(at)}toString(){return 0===this.sections.length?"":this.sections.map((at=>at.text)).join("")}}class Ve{constructor(at){this.values=at.slice()}static parse(at){if(at instanceof Ve)return at;if("number"==typeof at)return new Ve([at,at,at,at]);if(Array.isArray(at)&&!(at.length<1||at.length>4)){for(const st of at)if("number"!=typeof st)return;switch(at.length){case 1:at=[at[0],at[0],at[0],at[0]];break;case 2:at=[at[0],at[1],at[0],at[1]];break;case 3:at=[at[0],at[1],at[2],at[1]]}return new Ve(at)}}toString(){return JSON.stringify(this.values)}static interpolate(at,st,ot){return new Ve(ze(at.values,st.values,ot))}}class Fe{constructor(at){this.values=at.slice()}static parse(at){if(at instanceof Fe)return at;if("number"==typeof at)return new Fe([at]);if(Array.isArray(at)){for(const st of at)if("number"!=typeof st)return;return new Fe(at)}}toString(){return JSON.stringify(this.values)}static interpolate(at,st,ot){return new Fe(ze(at.values,st.values,ot))}}class Le{constructor(at){this.values=at.slice()}static parse(at){if(at instanceof Le)return at;if("string"==typeof at){const st=Pe.parse(at);if(!st)return;return new Le([st])}if(!Array.isArray(at))return;const st=[];for(const ot of at){if("string"!=typeof ot)return;const at=Pe.parse(ot);if(!at)return;st.push(at)}return new Le(st)}toString(){return JSON.stringify(this.values)}static interpolate(at,st,ot,ut="rgb"){const Hl=[];if(at.values.length!=st.values.length)throw new Error(`colorArray: Arrays have mismatched length (${at.values.length} vs. ${st.values.length}), cannot interpolate.`);for(let rc=0;rc<at.values.length;rc++)Hl.push(Pe.interpolate(at.values[rc],st.values[rc],ot,ut));return new Le(Hl)}}class $e extends Error{constructor(at){super(at),this.name="RuntimeError"}toJSON(){return this.message}}const Cd=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Oe{constructor(at){this.values=at.slice()}static parse(at){if(at instanceof Oe)return at;if(Array.isArray(at)&&!(at.length<1)&&at.length%2==0){for(let st=0;st<at.length;st+=2){const ot=at[st],ut=at[st+1];if("string"!=typeof ot||!Cd.has(ot))return;if(!Array.isArray(ut)||2!==ut.length||"number"!=typeof ut[0]||"number"!=typeof ut[1])return}return new Oe(at)}}toString(){return JSON.stringify(this.values)}static interpolate(at,st,ot){const ut=at.values,Hl=st.values;if(ut.length!==Hl.length)throw new $e(`Cannot interpolate values of different length. from: ${at.toString()}, to: ${st.toString()}`);const rc=[];for(let sc=0;sc<ut.length;sc+=2){if(ut[sc]!==Hl[sc])throw new $e(`Cannot interpolate values containing mismatched anchors. from[${sc}]: ${ut[sc]}, to[${sc}]: ${Hl[sc]}`);rc.push(ut[sc]);const[at,st]=ut[sc+1],[oc,_c]=Hl[sc+1];rc.push([Ie(at,oc,ot),Ie(st,_c,ot)])}return new Oe(rc)}}class Re{constructor(at){this.name=at.name,this.available=at.available}toString(){return this.name}static fromString(at){return at?new Re({name:at,available:!1}):null}}class je{constructor(at,st,ot){this.from=at,this.to=st,this.transition=ot}static interpolate(at,st,ot){return new je(at,st,ot)}static parse(at){return at instanceof je?at:Array.isArray(at)&&3===at.length&&"string"==typeof at[0]&&"string"==typeof at[1]&&"number"==typeof at[2]?new je(at[0],at[1],at[2]):"object"==typeof at&&"string"==typeof at.from&&"string"==typeof at.to&&"number"==typeof at.transition?new je(at.from,at.to,at.transition):"string"==typeof at?new je(at,at,1):void 0}}function Ne(at,st,ot,ut){return"number"==typeof at&&at>=0&&at<=255&&"number"==typeof st&&st>=0&&st<=255&&"number"==typeof ot&&ot>=0&&ot<=255?void 0===ut||"number"==typeof ut&&ut>=0&&ut<=1?null:`Invalid rgba value [${[at,st,ot,ut].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${("number"==typeof ut?[at,st,ot,ut]:[at,st,ot]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function Ue(at){if(null===at||"string"==typeof at||"boolean"==typeof at||"number"==typeof at||at instanceof je||at instanceof Pe||at instanceof Ce||at instanceof Te||at instanceof Ve||at instanceof Fe||at instanceof Le||at instanceof Oe||at instanceof Re)return!0;if(Array.isArray(at)){for(const st of at)if(!Ue(st))return!1;return!0}if("object"==typeof at){for(const st in at)if(!Ue(at[st]))return!1;return!0}return!1}function qe(at){if(null===at)return td;if("string"==typeof at)return nd;if("boolean"==typeof at)return rd;if("number"==typeof at)return id;if(at instanceof Pe)return ad;if(at instanceof je)return sd;if(at instanceof Ce)return cd;if(at instanceof Te)return ud;if(at instanceof Ve)return hd;if(at instanceof Fe)return pd;if(at instanceof Le)return dd;if(at instanceof Oe)return gd;if(at instanceof Re)return md;if(Array.isArray(at)){const st=at.length;let ot;for(const ut of at){const at=qe(ut);if(ot){if(ot===at)continue;ot=ld;break}ot=at}return Wt(ot||ld,st)}return od}function Ge(at){const st=typeof at;return null===at?"":"string"===st||"number"===st||"boolean"===st?String(at):at instanceof Pe||at instanceof je||at instanceof Te||at instanceof Ve||at instanceof Fe||at instanceof Le||at instanceof Oe||at instanceof Re?at.toString():JSON.stringify(at)}class Xe{constructor(at,st){this.type=at,this.value=st}static parse(at,st){if(2!==at.length)return st.error(`'literal' expression requires exactly one argument, but found ${at.length-1} instead.`);if(!Ue(at[1]))return st.error("invalid value");const ot=at[1];let ut=qe(ot);const Hl=st.expectedType;return"array"!==ut.kind||0!==ut.N||!Hl||"array"!==Hl.kind||"number"==typeof Hl.N&&0!==Hl.N||(ut=Hl),new Xe(ut,ot)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const kd={string:nd,number:id,boolean:rd,object:od};class Ye{constructor(at,st){this.type=at,this.args=st}static parse(at,st){if(at.length<2)return st.error("Expected at least one argument.");let ot,ut=1;const Hl=at[0];if("array"===Hl){let Hl,rc;if(at.length>2){const ot=at[1];if("string"!=typeof ot||!(ot in kd)||"object"===ot)return st.error('The item type argument of "array" must be one of string, number, boolean',1);Hl=kd[ot],ut++}else Hl=ld;if(at.length>3){if(null!==at[2]&&("number"!=typeof at[2]||at[2]<0||at[2]!==Math.floor(at[2])))return st.error('The length argument to "array" must be a positive integer literal',2);rc=at[2],ut++}ot=Wt(Hl,rc)}else{if(!kd[Hl])throw new Error(`Types doesn't contain name = ${Hl}`);ot=kd[Hl]}const rc=[];for(;ut<at.length;ut++){const ot=st.parse(at[ut],ut,ld);if(!ot)return null;rc.push(ot)}return new Ye(ot,rc)}evaluate(at){for(let st=0;st<this.args.length;st++){const ot=this.args[st].evaluate(at);if(!ee(this.type,qe(ot)))return ot;if(st===this.args.length-1)throw new $e(`Expected value to be of type ${Qt(this.type)}, but found ${Qt(qe(ot))} instead.`)}throw new Error}eachChild(at){this.args.forEach(at)}outputDefined(){return this.args.every((at=>at.outputDefined()))}}const Id={"to-boolean":rd,"to-color":ad,"to-number":id,"to-string":nd};class Ke{constructor(at,st){this.type=at,this.args=st}static parse(at,st){if(at.length<2)return st.error("Expected at least one argument.");const ot=at[0];if(!Id[ot])throw new Error(`Can't parse ${ot} as it is not part of the known types`);if(("to-boolean"===ot||"to-string"===ot)&&2!==at.length)return st.error("Expected one argument.");const ut=Id[ot],Hl=[];for(let rc=1;rc<at.length;rc++){const ot=st.parse(at[rc],rc,ld);if(!ot)return null;Hl.push(ot)}return new Ke(ut,Hl)}evaluate(at){switch(this.type.kind){case"boolean":return Boolean(this.args[0].evaluate(at));case"color":{let st,ot;for(const ut of this.args){if(st=ut.evaluate(at),ot=null,st instanceof Pe)return st;if("string"==typeof st){const ot=at.parseColor(st);if(ot)return ot}else if(Array.isArray(st)&&(ot=st.length<3||st.length>4?`Invalid rgba value ${JSON.stringify(st)}: expected an array containing either three or four numeric values.`:Ne(st[0],st[1],st[2],st[3]),!ot))return new Pe(st[0]/255,st[1]/255,st[2]/255,st[3])}throw new $e(ot||`Could not parse color from value '${"string"==typeof st?st:JSON.stringify(st)}'`)}case"padding":{let st;for(const ot of this.args){st=ot.evaluate(at);const ut=Ve.parse(st);if(ut)return ut}throw new $e(`Could not parse padding from value '${"string"==typeof st?st:JSON.stringify(st)}'`)}case"numberArray":{let st;for(const ot of this.args){st=ot.evaluate(at);const ut=Fe.parse(st);if(ut)return ut}throw new $e(`Could not parse numberArray from value '${"string"==typeof st?st:JSON.stringify(st)}'`)}case"colorArray":{let st;for(const ot of this.args){st=ot.evaluate(at);const ut=Le.parse(st);if(ut)return ut}throw new $e(`Could not parse colorArray from value '${"string"==typeof st?st:JSON.stringify(st)}'`)}case"variableAnchorOffsetCollection":{let st;for(const ot of this.args){st=ot.evaluate(at);const ut=Oe.parse(st);if(ut)return ut}throw new $e(`Could not parse variableAnchorOffsetCollection from value '${"string"==typeof st?st:JSON.stringify(st)}'`)}case"number":{let st=null;for(const ot of this.args){if(st=ot.evaluate(at),null===st)return 0;const ut=Number(st);if(!isNaN(ut))return ut}throw new $e(`Could not convert ${JSON.stringify(st)} to number.`)}case"formatted":return Te.fromString(Ge(this.args[0].evaluate(at)));case"resolvedImage":return Re.fromString(Ge(this.args[0].evaluate(at)));case"projectionDefinition":return this.args[0].evaluate(at);default:return Ge(this.args[0].evaluate(at))}}eachChild(at){this.args.forEach(at)}outputDefined(){return this.args.every((at=>at.outputDefined()))}}const Dd=["Unknown","Point","LineString","Polygon"];class We{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?Dd[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(at){let st=this._parseColorCache.get(at);return st||(st=Pe.parse(at),this._parseColorCache.set(at,st)),st}}class Qe{constructor(at,st,ot=[],ut,Hl=new Lt,rc=[]){this.registry=at,this.path=ot,this.key=ot.map((at=>`[${at}]`)).join(""),this.scope=Hl,this.errors=rc,this.expectedType=ut,this._isConstant=st}parse(at,st,ot,ut,Hl={}){return st?this.concat(st,ot,ut)._parse(at,Hl):this._parse(at,Hl)}_parse(at,st){function r(at,st,ot){return"assert"===ot?new Ye(st,[at]):"coerce"===ot?new Ke(st,[at]):at}if(null!==at&&"string"!=typeof at&&"boolean"!=typeof at&&"number"!=typeof at||(at=["literal",at]),Array.isArray(at)){if(0===at.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const ot=at[0];if("string"!=typeof ot)return this.error(`Expression name must be a string, but found ${typeof ot} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const ut=this.registry[ot];if(ut){let ot=ut.parse(at,this);if(!ot)return null;if(this.expectedType){const at=this.expectedType,ut=ot.type;if("string"!==at.kind&&"number"!==at.kind&&"boolean"!==at.kind&&"object"!==at.kind&&"array"!==at.kind||"value"!==ut.kind){if("projectionDefinition"===at.kind&&["string","array"].includes(ut.kind)||["color","formatted","resolvedImage"].includes(at.kind)&&["value","string"].includes(ut.kind)||["padding","numberArray"].includes(at.kind)&&["value","number","array"].includes(ut.kind)||"colorArray"===at.kind&&["value","string","array"].includes(ut.kind)||"variableAnchorOffsetCollection"===at.kind&&["value","array"].includes(ut.kind))ot=r(ot,at,st.typeAnnotation||"coerce");else if(this.checkSubtype(at,ut))return null}else ot=r(ot,at,st.typeAnnotation||"assert")}if(!(ot instanceof Xe)&&"resolvedImage"!==ot.type.kind&&this._isConstant(ot)){const st=new We;try{ot=new Xe(ot.type,ot.evaluate(st))}catch(at){return this.error(at.message),null}}return ot}return this.error(`Unknown expression "${ot}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(void 0===at?"'undefined' value invalid. Use null instead.":"object"==typeof at?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof at} instead.`)}concat(at,st,ot){const ut="number"==typeof at?this.path.concat(at):this.path,Hl=ot?this.scope.concat(ot):this.scope;return new Qe(this.registry,this._isConstant,ut,st||null,Hl,this.errors)}error(at,...st){const ot=`${this.key}${st.map((at=>`[${at}]`)).join("")}`;this.errors.push(new Ft(ot,at))}checkSubtype(at,st){const ot=ee(at,st);return ot&&this.error(ot),ot}}class tr{constructor(at,st){this.type=st.type,this.bindings=[].concat(at),this.result=st}evaluate(at){return this.result.evaluate(at)}eachChild(at){for(const st of this.bindings)at(st[1]);at(this.result)}static parse(at,st){if(at.length<4)return st.error(`Expected at least 3 arguments, but found ${at.length-1} instead.`);const ot=[];for(let Hl=1;Hl<at.length-1;Hl+=2){const ut=at[Hl];if("string"!=typeof ut)return st.error(`Expected string, but found ${typeof ut} instead.`,Hl);if(/[^a-zA-Z0-9_]/.test(ut))return st.error("Variable names must contain only alphanumeric characters or '_'.",Hl);const rc=st.parse(at[Hl+1],Hl+1);if(!rc)return null;ot.push([ut,rc])}const ut=st.parse(at[at.length-1],at.length-1,st.expectedType,ot);return ut?new tr(ot,ut):null}outputDefined(){return this.result.outputDefined()}}class er{constructor(at,st){this.type=st.type,this.name=at,this.boundExpression=st}static parse(at,st){if(2!==at.length||"string"!=typeof at[1])return st.error("'var' expression requires exactly one string literal argument.");const ot=at[1];return st.scope.has(ot)?new er(ot,st.scope.get(ot)):st.error(`Unknown variable "${ot}". Make sure "${ot}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(at){return this.boundExpression.evaluate(at)}eachChild(){}outputDefined(){return!1}}class rr{constructor(at,st,ot){this.type=at,this.index=st,this.input=ot}static parse(at,st){if(3!==at.length)return st.error(`Expected 2 arguments, but found ${at.length-1} instead.`);const ot=st.parse(at[1],1,id),ut=st.parse(at[2],2,Wt(st.expectedType||ld));return ot&&ut?new rr(ut.type.itemType,ot,ut):null}evaluate(at){const st=this.index.evaluate(at),ot=this.input.evaluate(at);if(st<0)throw new $e(`Array index out of bounds: ${st} < 0.`);if(st>=ot.length)throw new $e(`Array index out of bounds: ${st} > ${ot.length-1}.`);if(st!==Math.floor(st))throw new $e(`Array index must be an integer, but found ${st} instead.`);return ot[st]}eachChild(at){at(this.index),at(this.input)}outputDefined(){return!1}}class nr{constructor(at,st){this.type=rd,this.needle=at,this.haystack=st}static parse(at,st){if(3!==at.length)return st.error(`Expected 2 arguments, but found ${at.length-1} instead.`);const ot=st.parse(at[1],1,ld),ut=st.parse(at[2],2,ld);return ot&&ut?re(ot.type,[rd,nd,id,td,ld])?new nr(ot,ut):st.error(`Expected first argument to be of type boolean, string, number or null, but found ${Qt(ot.type)} instead`):null}evaluate(at){const st=this.needle.evaluate(at),ot=this.haystack.evaluate(at);if(!ot)return!1;if(!ne(st,["boolean","string","number","null"]))throw new $e(`Expected first argument to be of type boolean, string, number or null, but found ${Qt(qe(st))} instead.`);if(!ne(ot,["string","array"]))throw new $e(`Expected second argument to be of type array or string, but found ${Qt(qe(ot))} instead.`);return ot.indexOf(st)>=0}eachChild(at){at(this.needle),at(this.haystack)}outputDefined(){return!0}}class ir{constructor(at,st,ot){this.type=id,this.needle=at,this.haystack=st,this.fromIndex=ot}static parse(at,st){if(at.length<=2||at.length>=5)return st.error(`Expected 3 or 4 arguments, but found ${at.length-1} instead.`);const ot=st.parse(at[1],1,ld),ut=st.parse(at[2],2,ld);if(!ot||!ut)return null;if(!re(ot.type,[rd,nd,id,td,ld]))return st.error(`Expected first argument to be of type boolean, string, number or null, but found ${Qt(ot.type)} instead`);if(4===at.length){const Hl=st.parse(at[3],3,id);return Hl?new ir(ot,ut,Hl):null}return new ir(ot,ut)}evaluate(at){const st=this.needle.evaluate(at),ot=this.haystack.evaluate(at);if(!ne(st,["boolean","string","number","null"]))throw new $e(`Expected first argument to be of type boolean, string, number or null, but found ${Qt(qe(st))} instead.`);let ut;if(this.fromIndex&&(ut=this.fromIndex.evaluate(at)),ne(ot,["string"])){const at=ot.indexOf(st,ut);return-1===at?-1:[...ot.slice(0,at)].length}if(ne(ot,["array"]))return ot.indexOf(st,ut);throw new $e(`Expected second argument to be of type array or string, but found ${Qt(qe(ot))} instead.`)}eachChild(at){at(this.needle),at(this.haystack),this.fromIndex&&at(this.fromIndex)}outputDefined(){return!1}}class sr{constructor(at,st,ot,ut,Hl,rc){this.inputType=at,this.type=st,this.input=ot,this.cases=ut,this.outputs=Hl,this.otherwise=rc}static parse(at,st){if(at.length<5)return st.error(`Expected at least 4 arguments, but found only ${at.length-1}.`);if(at.length%2!=1)return st.error("Expected an even number of arguments.");let ot,ut;st.expectedType&&"value"!==st.expectedType.kind&&(ut=st.expectedType);const Hl={},rc=[];for(let _c=2;_c<at.length-1;_c+=2){let sc=at[_c];const oc=at[_c+1];Array.isArray(sc)||(sc=[sc]);const wc=st.concat(_c);if(0===sc.length)return wc.error("Expected at least one branch label.");for(const at of sc){if("number"!=typeof at&&"string"!=typeof at)return wc.error("Branch labels must be numbers or strings.");if("number"==typeof at&&Math.abs(at)>Number.MAX_SAFE_INTEGER)return wc.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof at&&Math.floor(at)!==at)return wc.error("Numeric branch labels must be integer values.");if(ot){if(wc.checkSubtype(ot,qe(at)))return null}else ot=qe(at);if(void 0!==Hl[String(at)])return wc.error("Branch labels must be unique.");Hl[String(at)]=rc.length}const Sc=st.parse(oc,_c,ut);if(!Sc)return null;ut=ut||Sc.type,rc.push(Sc)}const sc=st.parse(at[1],1,ld);if(!sc)return null;const oc=st.parse(at[at.length-1],at.length-1,ut);return oc?"value"!==sc.type.kind&&st.concat(1).checkSubtype(ot,sc.type)?null:new sr(ot,ut,sc,Hl,rc,oc):null}evaluate(at){const st=this.input.evaluate(at);return(qe(st)===this.inputType&&this.outputs[this.cases[st]]||this.otherwise).evaluate(at)}eachChild(at){at(this.input),this.outputs.forEach(at),at(this.otherwise)}outputDefined(){return this.outputs.every((at=>at.outputDefined()))&&this.otherwise.outputDefined()}}class ar{constructor(at,st,ot){this.type=at,this.branches=st,this.otherwise=ot}static parse(at,st){if(at.length<4)return st.error(`Expected at least 3 arguments, but found only ${at.length-1}.`);if(at.length%2!=0)return st.error("Expected an odd number of arguments.");let ot;st.expectedType&&"value"!==st.expectedType.kind&&(ot=st.expectedType);const ut=[];for(let rc=1;rc<at.length-1;rc+=2){const Hl=st.parse(at[rc],rc,rd);if(!Hl)return null;const sc=st.parse(at[rc+1],rc+1,ot);if(!sc)return null;ut.push([Hl,sc]),ot=ot||sc.type}const Hl=st.parse(at[at.length-1],at.length-1,ot);if(!Hl)return null;if(!ot)throw new Error("Can't infer output type");return new ar(ot,ut,Hl)}evaluate(at){for(const[st,ot]of this.branches)if(st.evaluate(at))return ot.evaluate(at);return this.otherwise.evaluate(at)}eachChild(at){for(const[st,ot]of this.branches)at(st),at(ot);at(this.otherwise)}outputDefined(){return this.branches.every((([at,st])=>st.outputDefined()))&&this.otherwise.outputDefined()}}class or{constructor(at,st,ot,ut){this.type=at,this.input=st,this.beginIndex=ot,this.endIndex=ut}static parse(at,st){if(at.length<=2||at.length>=5)return st.error(`Expected 3 or 4 arguments, but found ${at.length-1} instead.`);const ot=st.parse(at[1],1,ld),ut=st.parse(at[2],2,id);if(!ot||!ut)return null;if(!re(ot.type,[Wt(ld),nd,ld]))return st.error(`Expected first argument to be of type array or string, but found ${Qt(ot.type)} instead`);if(4===at.length){const Hl=st.parse(at[3],3,id);return Hl?new or(ot.type,ot,ut,Hl):null}return new or(ot.type,ot,ut)}evaluate(at){const st=this.input.evaluate(at),ot=this.beginIndex.evaluate(at);let ut;if(this.endIndex&&(ut=this.endIndex.evaluate(at)),ne(st,["string"]))return[...st].slice(ot,ut).join("");if(ne(st,["array"]))return st.slice(ot,ut);throw new $e(`Expected first argument to be of type array or string, but found ${Qt(qe(st))} instead.`)}eachChild(at){at(this.input),at(this.beginIndex),this.endIndex&&at(this.endIndex)}outputDefined(){return!1}}function lr(at,st){const ot=at.length-1;let ut,Hl,rc=0,sc=ot,oc=0;for(;rc<=sc;)if(oc=Math.floor((rc+sc)/2),ut=at[oc],Hl=at[oc+1],ut<=st){if(oc===ot||st<Hl)return oc;rc=oc+1}else{if(!(ut>st))throw new $e("Input is not a number.");sc=oc-1}return 0}class ur{constructor(at,st,ot){this.type=at,this.input=st,this.labels=[],this.outputs=[];for(const[ut,Hl]of ot)this.labels.push(ut),this.outputs.push(Hl)}static parse(at,st){if(at.length-1<4)return st.error(`Expected at least 4 arguments, but found only ${at.length-1}.`);if((at.length-1)%2!=0)return st.error("Expected an even number of arguments.");const ot=st.parse(at[1],1,id);if(!ot)return null;const ut=[];let Hl=null;st.expectedType&&"value"!==st.expectedType.kind&&(Hl=st.expectedType);for(let rc=1;rc<at.length;rc+=2){const ot=1===rc?-1/0:at[rc],sc=at[rc+1],oc=rc,_c=rc+1;if("number"!=typeof ot)return st.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',oc);if(ut.length&&ut[ut.length-1][0]>=ot)return st.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',oc);const wc=st.parse(sc,_c,Hl);if(!wc)return null;Hl=Hl||wc.type,ut.push([ot,wc])}return new ur(Hl,ot,ut)}evaluate(at){const st=this.labels,ot=this.outputs;if(1===st.length)return ot[0].evaluate(at);const ut=this.input.evaluate(at);if(ut<=st[0])return ot[0].evaluate(at);const Hl=st.length;return ut>=st[Hl-1]?ot[Hl-1].evaluate(at):ot[lr(st,ut)].evaluate(at)}eachChild(at){at(this.input);for(const st of this.outputs)at(st)}outputDefined(){return this.outputs.every((at=>at.outputDefined()))}}function cr(at){return at&&at.__esModule&&Object.prototype.hasOwnProperty.call(at,"default")?at.default:at}var Ld,Pd,zd=function(){if(Pd)return Ld;function t(at,st,ot,ut){this.cx=3*at,this.bx=3*(ot-at)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*st,this.by=3*(ut-st)-this.cy,this.ay=1-this.cy-this.by,this.p1x=at,this.p1y=st,this.p2x=ot,this.p2y=ut}return Pd=1,Ld=t,t.prototype={sampleCurveX:function(at){return((this.ax*at+this.bx)*at+this.cx)*at},sampleCurveY:function(at){return((this.ay*at+this.by)*at+this.cy)*at},sampleCurveDerivativeX:function(at){return(3*this.ax*at+2*this.bx)*at+this.cx},solveCurveX:function(at,st){if(void 0===st&&(st=1e-6),at<0)return 0;if(at>1)return 1;for(var ot=at,ut=0;ut<8;ut++){var Hl=this.sampleCurveX(ot)-at;if(Math.abs(Hl)<st)return ot;var rc=this.sampleCurveDerivativeX(ot);if(Math.abs(rc)<1e-6)break;ot-=Hl/rc}var sc=0,oc=1;for(ot=at,ut=0;ut<20&&(Hl=this.sampleCurveX(ot),!(Math.abs(Hl-at)<st));ut++)at>Hl?sc=ot:oc=ot,ot=.5*(oc-sc)+sc;return ot},solve:function(at,st){return this.sampleCurveY(this.solveCurveX(at,st))}},Ld}(),Nd=cr(zd);class yr{constructor(at,st,ot,ut,Hl){this.type=at,this.operator=st,this.interpolation=ot,this.input=ut,this.labels=[],this.outputs=[];for(const[rc,sc]of Hl)this.labels.push(rc),this.outputs.push(sc)}static interpolationFactor(at,st,ot,ut){let Hl=0;if("exponential"===at.name)Hl=mr(st,at.base,ot,ut);else if("linear"===at.name)Hl=mr(st,1,ot,ut);else if("cubic-bezier"===at.name){const rc=at.controlPoints;Hl=new Nd(rc[0],rc[1],rc[2],rc[3]).solve(mr(st,1,ot,ut))}return Hl}static parse(at,st){let[ot,ut,Hl,...rc]=at;if(!Array.isArray(ut)||0===ut.length)return st.error("Expected an interpolation type expression.",1);if("linear"===ut[0])ut={name:"linear"};else if("exponential"===ut[0]){const at=ut[1];if("number"!=typeof at)return st.error("Exponential interpolation requires a numeric base.",1,1);ut={name:"exponential",base:at}}else{if("cubic-bezier"!==ut[0])return st.error(`Unknown interpolation type ${String(ut[0])}`,1,0);{const at=ut.slice(1);if(4!==at.length||at.some((at=>"number"!=typeof at||at<0||at>1)))return st.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);ut={name:"cubic-bezier",controlPoints:at}}}if(at.length-1<4)return st.error(`Expected at least 4 arguments, but found only ${at.length-1}.`);if((at.length-1)%2!=0)return st.error("Expected an even number of arguments.");if(Hl=st.parse(Hl,2,id),!Hl)return null;const sc=[];let oc=null;"interpolate-hcl"!==ot&&"interpolate-lab"!==ot||st.expectedType==dd?st.expectedType&&"value"!==st.expectedType.kind&&(oc=st.expectedType):oc=ad;for(let _c=0;_c<rc.length;_c+=2){const at=rc[_c],ot=rc[_c+1],ut=_c+3,Hl=_c+4;if("number"!=typeof at)return st.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ut);if(sc.length&&sc[sc.length-1][0]>=at)return st.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ut);const wc=st.parse(ot,Hl,oc);if(!wc)return null;oc=oc||wc.type,sc.push([at,wc])}return ie(oc,id)||ie(oc,sd)||ie(oc,ad)||ie(oc,hd)||ie(oc,pd)||ie(oc,dd)||ie(oc,gd)||ie(oc,Wt(id))?new yr(oc,ot,ut,Hl,sc):st.error(`Type ${Qt(oc)} is not interpolatable.`)}evaluate(at){const st=this.labels,ot=this.outputs;if(1===st.length)return ot[0].evaluate(at);const ut=this.input.evaluate(at);if(ut<=st[0])return ot[0].evaluate(at);const Hl=st.length;if(ut>=st[Hl-1])return ot[Hl-1].evaluate(at);const rc=lr(st,ut),sc=yr.interpolationFactor(this.interpolation,ut,st[rc],st[rc+1]),oc=ot[rc].evaluate(at),_c=ot[rc+1].evaluate(at);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Ie(oc,_c,sc);case"color":return Pe.interpolate(oc,_c,sc);case"padding":return Ve.interpolate(oc,_c,sc);case"colorArray":return Le.interpolate(oc,_c,sc);case"numberArray":return Fe.interpolate(oc,_c,sc);case"variableAnchorOffsetCollection":return Oe.interpolate(oc,_c,sc);case"array":return ze(oc,_c,sc);case"projectionDefinition":return je.interpolate(oc,_c,sc)}case"interpolate-hcl":switch(this.type.kind){case"color":return Pe.interpolate(oc,_c,sc,"hcl");case"colorArray":return Le.interpolate(oc,_c,sc,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Pe.interpolate(oc,_c,sc,"lab");case"colorArray":return Le.interpolate(oc,_c,sc,"lab")}}}eachChild(at){at(this.input);for(const st of this.outputs)at(st)}outputDefined(){return this.outputs.every((at=>at.outputDefined()))}}function mr(at,st,ot,ut){const Hl=ut-ot,rc=at-ot;return 0===Hl?0:1===st?rc/Hl:(Math.pow(st,rc)-1)/(Math.pow(st,Hl)-1)}const Rd={color:Pe.interpolate,number:Ie,padding:Ve.interpolate,numberArray:Fe.interpolate,colorArray:Le.interpolate,variableAnchorOffsetCollection:Oe.interpolate,array:ze};class xr{constructor(at,st){this.type=at,this.args=st}static parse(at,st){if(at.length<2)return st.error("Expected at least one argument.");let ot=null;const ut=st.expectedType;ut&&"value"!==ut.kind&&(ot=ut);const Hl=[];for(const sc of at.slice(1)){const at=st.parse(sc,1+Hl.length,ot,void 0,{typeAnnotation:"omit"});if(!at)return null;ot=ot||at.type,Hl.push(at)}if(!ot)throw new Error("No output type");const rc=ut&&Hl.some((at=>ee(ut,at.type)));return new xr(rc?ld:ot,Hl)}evaluate(at){let st,ot=null,ut=0;for(const Hl of this.args)if(ut++,ot=Hl.evaluate(at),ot&&ot instanceof Re&&!ot.available&&(st||(st=ot.name),ot=null,ut===this.args.length&&(ot=st)),null!==ot)break;return ot}eachChild(at){this.args.forEach(at)}outputDefined(){return this.args.every((at=>at.outputDefined()))}}function vr(at,st){return"=="===at||"!="===at?"boolean"===st.kind||"string"===st.kind||"number"===st.kind||"null"===st.kind||"value"===st.kind:"string"===st.kind||"number"===st.kind||"value"===st.kind}function br(at,st,ot,ut){return 0===ut.compare(st,ot)}function wr(at,st,ot){const ut="=="!==at&&"!="!==at;return class i{constructor(at,st,ot){this.type=rd,this.lhs=at,this.rhs=st,this.collator=ot,this.hasUntypedArgument="value"===at.type.kind||"value"===st.type.kind}static parse(at,st){if(3!==at.length&&4!==at.length)return st.error("Expected two or three arguments.");const ot=at[0];let Hl=st.parse(at[1],1,ld);if(!Hl)return null;if(!vr(ot,Hl.type))return st.concat(1).error(`"${ot}" comparisons are not supported for type '${Qt(Hl.type)}'.`);let rc=st.parse(at[2],2,ld);if(!rc)return null;if(!vr(ot,rc.type))return st.concat(2).error(`"${ot}" comparisons are not supported for type '${Qt(rc.type)}'.`);if(Hl.type.kind!==rc.type.kind&&"value"!==Hl.type.kind&&"value"!==rc.type.kind)return st.error(`Cannot compare types '${Qt(Hl.type)}' and '${Qt(rc.type)}'.`);ut&&("value"===Hl.type.kind&&"value"!==rc.type.kind?Hl=new Ye(rc.type,[Hl]):"value"!==Hl.type.kind&&"value"===rc.type.kind&&(rc=new Ye(Hl.type,[rc])));let sc=null;if(4===at.length){if("string"!==Hl.type.kind&&"string"!==rc.type.kind&&"value"!==Hl.type.kind&&"value"!==rc.type.kind)return st.error("Cannot use collator to compare non-string types.");if(sc=st.parse(at[3],3,cd),!sc)return null}return new i(Hl,rc,sc)}evaluate(Hl){const rc=this.lhs.evaluate(Hl),sc=this.rhs.evaluate(Hl);if(ut&&this.hasUntypedArgument){const st=qe(rc),ot=qe(sc);if(st.kind!==ot.kind||"string"!==st.kind&&"number"!==st.kind)throw new $e(`Expected arguments for "${at}" to be (string, string) or (number, number), but found (${st.kind}, ${ot.kind}) instead.`)}if(this.collator&&!ut&&this.hasUntypedArgument){const at=qe(rc),ot=qe(sc);if("string"!==at.kind||"string"!==ot.kind)return st(Hl,rc,sc)}return this.collator?ot(Hl,rc,sc,this.collator.evaluate(Hl)):st(Hl,rc,sc)}eachChild(at){at(this.lhs),at(this.rhs),this.collator&&at(this.collator)}outputDefined(){return!0}}}const Od=wr("==",(function(at,st,ot){return st===ot}),br),Bd=wr("!=",(function(at,st,ot){return st!==ot}),(function(at,st,ot,ut){return!br(0,st,ot,ut)})),Fd=wr("<",(function(at,st,ot){return st<ot}),(function(at,st,ot,ut){return ut.compare(st,ot)<0})),jd=wr(">",(function(at,st,ot){return st>ot}),(function(at,st,ot,ut){return ut.compare(st,ot)>0})),Ud=wr("<=",(function(at,st,ot){return st<=ot}),(function(at,st,ot,ut){return ut.compare(st,ot)<=0})),Vd=wr(">=",(function(at,st,ot){return st>=ot}),(function(at,st,ot,ut){return ut.compare(st,ot)>=0}));class zr{constructor(at,st,ot){this.type=cd,this.locale=ot,this.caseSensitive=at,this.diacriticSensitive=st}static parse(at,st){if(2!==at.length)return st.error("Expected one argument.");const ot=at[1];if("object"!=typeof ot||Array.isArray(ot))return st.error("Collator options argument must be an object.");const ut=st.parse(void 0!==ot["case-sensitive"]&&ot["case-sensitive"],1,rd);if(!ut)return null;const Hl=st.parse(void 0!==ot["diacritic-sensitive"]&&ot["diacritic-sensitive"],1,rd);if(!Hl)return null;let rc=null;return ot.locale&&(rc=st.parse(ot.locale,1,nd),!rc)?null:new zr(ut,Hl,rc)}evaluate(at){return new Ce(this.caseSensitive.evaluate(at),this.diacriticSensitive.evaluate(at),this.locale?this.locale.evaluate(at):null)}eachChild(at){at(this.caseSensitive),at(this.diacriticSensitive),this.locale&&at(this.locale)}outputDefined(){return!1}}class Pr{constructor(at,st,ot,ut,Hl){this.type=nd,this.number=at,this.locale=st,this.currency=ot,this.minFractionDigits=ut,this.maxFractionDigits=Hl}static parse(at,st){if(3!==at.length)return st.error("Expected two arguments.");const ot=st.parse(at[1],1,id);if(!ot)return null;const ut=at[2];if("object"!=typeof ut||Array.isArray(ut))return st.error("NumberFormat options argument must be an object.");let Hl=null;if(ut.locale&&(Hl=st.parse(ut.locale,1,nd),!Hl))return null;let rc=null;if(ut.currency&&(rc=st.parse(ut.currency,1,nd),!rc))return null;let sc=null;if(ut["min-fraction-digits"]&&(sc=st.parse(ut["min-fraction-digits"],1,id),!sc))return null;let oc=null;return ut["max-fraction-digits"]&&(oc=st.parse(ut["max-fraction-digits"],1,id),!oc)?null:new Pr(ot,Hl,rc,sc,oc)}evaluate(at){return new Intl.NumberFormat(this.locale?this.locale.evaluate(at):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(at):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(at):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(at):void 0}).format(this.number.evaluate(at))}eachChild(at){at(this.number),this.locale&&at(this.locale),this.currency&&at(this.currency),this.minFractionDigits&&at(this.minFractionDigits),this.maxFractionDigits&&at(this.maxFractionDigits)}outputDefined(){return!1}}class Cr{constructor(at){this.type=ud,this.sections=at}static parse(at,st){if(at.length<2)return st.error("Expected at least one argument.");const ot=at[1];if(!Array.isArray(ot)&&"object"==typeof ot)return st.error("First argument must be an image or text section.");const ut=[];let Hl=!1;for(let rc=1;rc<=at.length-1;++rc){const ot=at[rc];if(Hl&&"object"==typeof ot&&!Array.isArray(ot)){Hl=!1;let at=null;if(ot["font-scale"]&&(at=st.parse(ot["font-scale"],1,id),!at))return null;let rc=null;if(ot["text-font"]&&(rc=st.parse(ot["text-font"],1,Wt(nd)),!rc))return null;let sc=null;if(ot["text-color"]&&(sc=st.parse(ot["text-color"],1,ad),!sc))return null;let oc=null;if(ot["vertical-align"]){if("string"==typeof ot["vertical-align"]&&!Td.includes(ot["vertical-align"]))return st.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${ot["vertical-align"]}' instead.`);if(oc=st.parse(ot["vertical-align"],1,nd),!oc)return null}const _c=ut[ut.length-1];_c.scale=at,_c.font=rc,_c.textColor=sc,_c.verticalAlign=oc}else{const ot=st.parse(at[rc],1,ld);if(!ot)return null;const sc=ot.type.kind;if("string"!==sc&&"value"!==sc&&"null"!==sc&&"resolvedImage"!==sc)return st.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");Hl=!0,ut.push({content:ot,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Cr(ut)}evaluate(at){return new Te(this.sections.map((st=>{const ot=st.content.evaluate(at);return qe(ot)===md?new Ee("",ot,null,null,null,st.verticalAlign?st.verticalAlign.evaluate(at):null):new Ee(Ge(ot),null,st.scale?st.scale.evaluate(at):null,st.font?st.font.evaluate(at).join(","):null,st.textColor?st.textColor.evaluate(at):null,st.verticalAlign?st.verticalAlign.evaluate(at):null)})))}eachChild(at){for(const st of this.sections)at(st.content),st.scale&&at(st.scale),st.font&&at(st.font),st.textColor&&at(st.textColor),st.verticalAlign&&at(st.verticalAlign)}outputDefined(){return!1}}class Br{constructor(at){this.type=md,this.input=at}static parse(at,st){if(2!==at.length)return st.error("Expected two arguments.");const ot=st.parse(at[1],1,nd);return ot?new Br(ot):st.error("No image name provided.")}evaluate(at){const st=this.input.evaluate(at),ot=Re.fromString(st);return ot&&at.availableImages&&(ot.available=at.availableImages.indexOf(st)>-1),ot}eachChild(at){at(this.input)}outputDefined(){return!1}}class Er{constructor(at){this.type=id,this.input=at}static parse(at,st){if(2!==at.length)return st.error(`Expected 1 argument, but found ${at.length-1} instead.`);const ot=st.parse(at[1],1);return ot?"array"!==ot.type.kind&&"string"!==ot.type.kind&&"value"!==ot.type.kind?st.error(`Expected argument of type string or array, but found ${Qt(ot.type)} instead.`):new Er(ot):null}evaluate(at){const st=this.input.evaluate(at);if("string"==typeof st)return[...st].length;if(Array.isArray(st))return st.length;throw new $e(`Expected value to be of type string or array, but found ${Qt(qe(st))} instead.`)}eachChild(at){at(this.input)}outputDefined(){return!1}}const Gd=8192;function Vr(at,st){const ot=(180+at[0])/360,ut=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+at[1]*Math.PI/360)))/360,Hl=Math.pow(2,st.z);return[Math.round(ot*Hl*Gd),Math.round(ut*Hl*Gd)]}function Fr(at,st){const ot=Math.pow(2,st.z);return[(Hl=(at[0]/Gd+st.x)/ot,360*Hl-180),(ut=(at[1]/Gd+st.y)/ot,360/Math.PI*Math.atan(Math.exp((180-360*ut)*Math.PI/180))-90)];var ut,Hl}function Lr(at,st){at[0]=Math.min(at[0],st[0]),at[1]=Math.min(at[1],st[1]),at[2]=Math.max(at[2],st[0]),at[3]=Math.max(at[3],st[1])}function $r(at,st){return!(at[0]<=st[0]||at[2]>=st[2]||at[1]<=st[1]||at[3]>=st[3])}function Dr(at,st,ot){const ut=at[0]-st[0],Hl=at[1]-st[1],rc=at[0]-ot[0],sc=at[1]-ot[1];return ut*sc-rc*Hl==0&&ut*rc<=0&&Hl*sc<=0}function Or(at,st,ot,ut){return 0!=(Hl=[ut[0]-ot[0],ut[1]-ot[1]])[0]*(rc=[st[0]-at[0],st[1]-at[1]])[1]-Hl[1]*rc[0]&&!(!Gr(at,st,ot,ut)||!Gr(ot,ut,at,st));var Hl,rc}function Rr(at,st,ot){for(const ut of ot)for(let ot=0;ot<ut.length-1;++ot)if(Or(at,st,ut[ot],ut[ot+1]))return!0;return!1}function jr(at,st,ot=!1){let ut=!1;for(const oc of st)for(let st=0;st<oc.length-1;st++){if(Dr(at,oc[st],oc[st+1]))return ot;(rc=oc[st])[1]>(Hl=at)[1]!=(sc=oc[st+1])[1]>Hl[1]&&Hl[0]<(sc[0]-rc[0])*(Hl[1]-rc[1])/(sc[1]-rc[1])+rc[0]&&(ut=!ut)}var Hl,rc,sc;return ut}function Nr(at,st){for(const ot of st)if(jr(at,ot))return!0;return!1}function Ur(at,st){for(const ot of at)if(!jr(ot,st))return!1;for(let ot=0;ot<at.length-1;++ot)if(Rr(at[ot],at[ot+1],st))return!1;return!0}function qr(at,st){for(const ot of st)if(Ur(at,ot))return!0;return!1}function Gr(at,st,ot,ut){const Hl=ut[0]-ot[0],rc=ut[1]-ot[1],sc=(at[0]-ot[0])*rc-Hl*(at[1]-ot[1]),oc=(st[0]-ot[0])*rc-Hl*(st[1]-ot[1]);return sc>0&&oc<0||sc<0&&oc>0}function Xr(at,st,ot){const ut=[];for(let Hl=0;Hl<at.length;Hl++){const rc=[];for(let ut=0;ut<at[Hl].length;ut++){const sc=Vr(at[Hl][ut],ot);Lr(st,sc),rc.push(sc)}ut.push(rc)}return ut}function Zr(at,st,ot){const ut=[];for(let Hl=0;Hl<at.length;Hl++){const rc=Xr(at[Hl],st,ot);ut.push(rc)}return ut}function Yr(at,st,ot,ut){if(at[0]<ot[0]||at[0]>ot[2]){const st=.5*ut;let Hl=at[0]-ot[0]>st?-ut:ot[0]-at[0]>st?ut:0;0===Hl&&(Hl=at[0]-ot[2]>st?-ut:ot[2]-at[0]>st?ut:0),at[0]+=Hl}Lr(st,at)}function Hr(at,st,ot,ut){const Hl=Math.pow(2,ut.z)*Gd,rc=[ut.x*Gd,ut.y*Gd],sc=[];for(const oc of at)for(const at of oc){const ut=[at.x+rc[0],at.y+rc[1]];Yr(ut,st,ot,Hl),sc.push(ut)}return sc}function Kr(at,st,ot,ut){const Hl=Math.pow(2,ut.z)*Gd,rc=[ut.x*Gd,ut.y*Gd],sc=[];for(const _c of at){const at=[];for(const ot of _c){const ut=[ot.x+rc[0],ot.y+rc[1]];Lr(st,ut),at.push(ut)}sc.push(at)}if(st[2]-st[0]<=Hl/2){(oc=st)[0]=oc[1]=1/0,oc[2]=oc[3]=-1/0;for(const at of sc)for(const ut of at)Yr(ut,st,ot,Hl)}var oc;return sc}class Jr{constructor(at,st){this.type=rd,this.geojson=at,this.geometries=st}static parse(at,st){if(2!==at.length)return st.error(`'within' expression requires exactly one argument, but found ${at.length-1} instead.`);if(Ue(at[1])){const st=at[1];if("FeatureCollection"===st.type){const at=[];for(const ot of st.features){const{type:st,coordinates:ut}=ot.geometry;"Polygon"===st&&at.push(ut),"MultiPolygon"===st&&at.push(...ut)}if(at.length)return new Jr(st,{type:"MultiPolygon",coordinates:at})}else if("Feature"===st.type){const at=st.geometry.type;if("Polygon"===at||"MultiPolygon"===at)return new Jr(st,st.geometry)}else if("Polygon"===st.type||"MultiPolygon"===st.type)return new Jr(st,st)}return st.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(at){if(null!=at.geometry()&&null!=at.canonicalID()){if("Point"===at.geometryType())return function(at,st){const ot=[1/0,1/0,-1/0,-1/0],ut=[1/0,1/0,-1/0,-1/0],Hl=at.canonicalID();if("Polygon"===st.type){const rc=Xr(st.coordinates,ut,Hl),sc=Hr(at.geometry(),ot,ut,Hl);if(!$r(ot,ut))return!1;for(const at of sc)if(!jr(at,rc))return!1}if("MultiPolygon"===st.type){const rc=Zr(st.coordinates,ut,Hl),sc=Hr(at.geometry(),ot,ut,Hl);if(!$r(ot,ut))return!1;for(const at of sc)if(!Nr(at,rc))return!1}return!0}(at,this.geometries);if("LineString"===at.geometryType())return function(at,st){const ot=[1/0,1/0,-1/0,-1/0],ut=[1/0,1/0,-1/0,-1/0],Hl=at.canonicalID();if("Polygon"===st.type){const rc=Xr(st.coordinates,ut,Hl),sc=Kr(at.geometry(),ot,ut,Hl);if(!$r(ot,ut))return!1;for(const at of sc)if(!Ur(at,rc))return!1}if("MultiPolygon"===st.type){const rc=Zr(st.coordinates,ut,Hl),sc=Kr(at.geometry(),ot,ut,Hl);if(!$r(ot,ut))return!1;for(const at of sc)if(!qr(at,rc))return!1}return!0}(at,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Zd=class{constructor(at=[],st=(at,st)=>at<st?-1:at>st?1:0){if(this.data=at,this.length=this.data.length,this.compare=st,this.length>0)for(let ot=(this.length>>1)-1;ot>=0;ot--)this._down(ot)}push(at){this.data.push(at),this._up(this.length++)}pop(){if(0===this.length)return;const at=this.data[0],st=this.data.pop();return--this.length>0&&(this.data[0]=st,this._down(0)),at}peek(){return this.data[0]}_up(at){const{data:st,compare:ot}=this,ut=st[at];for(;at>0;){const Hl=at-1>>1,rc=st[Hl];if(ot(ut,rc)>=0)break;st[at]=rc,at=Hl}st[at]=ut}_down(at){const{data:st,compare:ot}=this,ut=this.length>>1,Hl=st[at];for(;at<ut;){let ut=1+(at<<1);const rc=ut+1;if(rc<this.length&&ot(st[rc],st[ut])<0&&(ut=rc),ot(st[ut],Hl)>=0)break;st[at]=st[ut],at=ut}st[at]=Hl}};function Qr(at,st,ot=0,ut=at.length-1,Hl=en){for(;ut>ot;){if(ut-ot>600){const rc=ut-ot+1,sc=st-ot+1,oc=Math.log(rc),_c=.5*Math.exp(2*oc/3),wc=.5*Math.sqrt(oc*_c*(rc-_c)/rc)*(sc-rc/2<0?-1:1);Qr(at,st,Math.max(ot,Math.floor(st-sc*_c/rc+wc)),Math.min(ut,Math.floor(st+(rc-sc)*_c/rc+wc)),Hl)}const rc=at[st];let sc=ot,oc=ut;for(tn(at,ot,st),Hl(at[ut],rc)>0&&tn(at,ot,ut);sc<oc;){for(tn(at,sc,oc),sc++,oc--;Hl(at[sc],rc)<0;)sc++;for(;Hl(at[oc],rc)>0;)oc--}0===Hl(at[ot],rc)?tn(at,ot,oc):(oc++,tn(at,oc,ut)),oc<=st&&(ot=oc+1),st<=oc&&(ut=oc-1)}}function tn(at,st,ot){const ut=at[st];at[st]=at[ot],at[ot]=ut}function en(at,st){return at<st?-1:at>st?1:0}function rn(at,st){if(at.length<=1)return[at];const ot=[];let ut,Hl;for(const rc of at){const at=sn(rc);0!==at&&(rc.area=Math.abs(at),void 0===Hl&&(Hl=at<0),Hl===at<0?(ut&&ot.push(ut),ut=[rc]):ut.push(rc))}if(ut&&ot.push(ut),st>1)for(let rc=0;rc<ot.length;rc++)ot[rc].length<=st||(Qr(ot[rc],st,1,ot[rc].length-1,nn),ot[rc]=ot[rc].slice(0,st));return ot}function nn(at,st){return st.area-at.area}function sn(at){let st=0;for(let ot,ut,Hl=0,rc=at.length,sc=rc-1;Hl<rc;sc=Hl++)ot=at[Hl],ut=at[sc],st+=(ut.x-ot.x)*(ot.y+ut.y);return st}const Hd=1/298.257223563,Wd=Hd*(2-Hd),qd=Math.PI/180;class un{constructor(at){const st=6378.137*qd*1e3,ot=Math.cos(at*qd),ut=1/(1-Wd*(1-ot*ot)),Hl=Math.sqrt(ut);this.kx=st*Hl*ot,this.ky=st*Hl*ut*(1-Wd)}distance(at,st){const ot=this.wrap(at[0]-st[0])*this.kx,ut=(at[1]-st[1])*this.ky;return Math.sqrt(ot*ot+ut*ut)}pointOnLine(at,st){let ot,ut,Hl,rc,sc=1/0;for(let oc=0;oc<at.length-1;oc++){let _c=at[oc][0],wc=at[oc][1],Sc=this.wrap(at[oc+1][0]-_c)*this.kx,iu=(at[oc+1][1]-wc)*this.ky,su=0;0===Sc&&0===iu||(su=(this.wrap(st[0]-_c)*this.kx*Sc+(st[1]-wc)*this.ky*iu)/(Sc*Sc+iu*iu),su>1?(_c=at[oc+1][0],wc=at[oc+1][1]):su>0&&(_c+=Sc/this.kx*su,wc+=iu/this.ky*su)),Sc=this.wrap(st[0]-_c)*this.kx,iu=(st[1]-wc)*this.ky;const lu=Sc*Sc+iu*iu;lu<sc&&(sc=lu,ot=_c,ut=wc,Hl=oc,rc=su)}return{point:[ot,ut],index:Hl,t:Math.max(0,Math.min(1,rc))}}wrap(at){for(;at<-180;)at+=360;for(;at>180;)at-=360;return at}}function cn(at,st){return st[0]-at[0]}function hn(at){return at[1]-at[0]+1}function pn(at,st){return at[1]>=at[0]&&at[1]<st}function fn(at,st){if(at[0]>at[1])return[null,null];const ot=hn(at);if(st){if(2===ot)return[at,null];const st=Math.floor(ot/2);return[[at[0],at[0]+st],[at[0]+st,at[1]]]}if(1===ot)return[at,null];const ut=Math.floor(ot/2)-1;return[[at[0],at[0]+ut],[at[0]+ut+1,at[1]]]}function dn(at,st){if(!pn(st,at.length))return[1/0,1/0,-1/0,-1/0];const ot=[1/0,1/0,-1/0,-1/0];for(let ut=st[0];ut<=st[1];++ut)Lr(ot,at[ut]);return ot}function yn(at){const st=[1/0,1/0,-1/0,-1/0];for(const ot of at)for(const at of ot)Lr(st,at);return st}function mn(at){return at[0]!==-1/0&&at[1]!==-1/0&&at[2]!==1/0&&at[3]!==1/0}function gn(at,st,ot){if(!mn(at)||!mn(st))return NaN;let ut=0,Hl=0;return at[2]<st[0]&&(ut=st[0]-at[2]),at[0]>st[2]&&(ut=at[0]-st[2]),at[1]>st[3]&&(Hl=at[1]-st[3]),at[3]<st[1]&&(Hl=st[1]-at[3]),ot.distance([0,0],[ut,Hl])}function xn(at,st,ot){const ut=ot.pointOnLine(st,at);return ot.distance(at,ut.point)}function vn(at,st,ot,ut,Hl){const rc=Math.min(xn(at,[ot,ut],Hl),xn(st,[ot,ut],Hl)),sc=Math.min(xn(ot,[at,st],Hl),xn(ut,[at,st],Hl));return Math.min(rc,sc)}function bn(at,st,ot,ut,Hl){if(!pn(st,at.length)||!pn(ut,ot.length))return 1/0;let rc=1/0;for(let sc=st[0];sc<st[1];++sc){const st=at[sc],oc=at[sc+1];for(let at=ut[0];at<ut[1];++at){const ut=ot[at],sc=ot[at+1];if(Or(st,oc,ut,sc))return 0;rc=Math.min(rc,vn(st,oc,ut,sc,Hl))}}return rc}function wn(at,st,ot,ut,Hl){if(!pn(st,at.length)||!pn(ut,ot.length))return NaN;let rc=1/0;for(let sc=st[0];sc<=st[1];++sc)for(let st=ut[0];st<=ut[1];++st)if(rc=Math.min(rc,Hl.distance(at[sc],ot[st])),0===rc)return rc;return rc}function _n(at,st,ot){if(jr(at,st,!0))return 0;let ut=1/0;for(const Hl of st){const st=Hl[0],rc=Hl[Hl.length-1];if(st!==rc&&(ut=Math.min(ut,xn(at,[rc,st],ot)),0===ut))return ut;const sc=ot.pointOnLine(Hl,at);if(ut=Math.min(ut,ot.distance(at,sc.point)),0===ut)return ut}return ut}function Sn(at,st,ot,ut){if(!pn(st,at.length))return NaN;for(let rc=st[0];rc<=st[1];++rc)if(jr(at[rc],ot,!0))return 0;let Hl=1/0;for(let rc=st[0];rc<st[1];++rc){const st=at[rc],sc=at[rc+1];for(const at of ot)for(let ot=0,rc=at.length,oc=rc-1;ot<rc;oc=ot++){const rc=at[oc],_c=at[ot];if(Or(st,sc,rc,_c))return 0;Hl=Math.min(Hl,vn(st,sc,rc,_c,ut))}}return Hl}function An(at,st){for(const ot of at)for(const at of ot)if(jr(at,st,!0))return!0;return!1}function kn(at,st,ot,ut=1/0){const Hl=yn(at),rc=yn(st);if(ut!==1/0&&gn(Hl,rc,ot)>=ut)return ut;if($r(Hl,rc)){if(An(at,st))return 0}else if(An(st,at))return 0;let sc=1/0;for(const oc of at)for(let at=0,ut=oc.length,Hl=ut-1;at<ut;Hl=at++){const ut=oc[Hl],rc=oc[at];for(const at of st)for(let st=0,Hl=at.length,oc=Hl-1;st<Hl;oc=st++){const Hl=at[oc],_c=at[st];if(Or(ut,rc,Hl,_c))return 0;sc=Math.min(sc,vn(ut,rc,Hl,_c,ot))}}return sc}function Mn(at,st,ot,ut,Hl,rc){if(!rc)return;const sc=gn(dn(ut,rc),Hl,ot);sc<st&&at.push([sc,rc,[0,0]])}function In(at,st,ot,ut,Hl,rc,sc){if(!rc||!sc)return;const oc=gn(dn(ut,rc),dn(Hl,sc),ot);oc<st&&at.push([oc,rc,sc])}function zn(at,st,ot,ut,Hl=1/0){let rc=Math.min(ut.distance(at[0],ot[0][0]),Hl);if(0===rc)return rc;const sc=new Zd([[0,[0,at.length-1],[0,0]]],cn),oc=yn(ot);for(;sc.length>0;){const Hl=sc.pop();if(Hl[0]>=rc)continue;const _c=Hl[1],wc=st?50:100;if(hn(_c)<=wc){if(!pn(_c,at.length))return NaN;if(st){const st=Sn(at,_c,ot,ut);if(isNaN(st)||0===st)return st;rc=Math.min(rc,st)}else for(let st=_c[0];st<=_c[1];++st){const Hl=_n(at[st],ot,ut);if(rc=Math.min(rc,Hl),0===rc)return 0}}else{const ot=fn(_c,st);Mn(sc,rc,ut,at,oc,ot[0]),Mn(sc,rc,ut,at,oc,ot[1])}}return rc}function Pn(at,st,ot,ut,Hl,rc=1/0){let sc=Math.min(rc,Hl.distance(at[0],ot[0]));if(0===sc)return sc;const oc=new Zd([[0,[0,at.length-1],[0,ot.length-1]]],cn);for(;oc.length>0;){const rc=oc.pop();if(rc[0]>=sc)continue;const _c=rc[1],wc=rc[2],Sc=st?50:100,iu=ut?50:100;if(hn(_c)<=Sc&&hn(wc)<=iu){if(!pn(_c,at.length)&&pn(wc,ot.length))return NaN;let rc;if(st&&ut)rc=bn(at,_c,ot,wc,Hl),sc=Math.min(sc,rc);else if(st&&!ut){const st=at.slice(_c[0],_c[1]+1);for(let at=wc[0];at<=wc[1];++at)if(rc=xn(ot[at],st,Hl),sc=Math.min(sc,rc),0===sc)return sc}else if(!st&&ut){const st=ot.slice(wc[0],wc[1]+1);for(let ot=_c[0];ot<=_c[1];++ot)if(rc=xn(at[ot],st,Hl),sc=Math.min(sc,rc),0===sc)return sc}else rc=wn(at,_c,ot,wc,Hl),sc=Math.min(sc,rc)}else{const rc=fn(_c,st),Sc=fn(wc,ut);In(oc,sc,Hl,at,ot,rc[0],Sc[0]),In(oc,sc,Hl,at,ot,rc[0],Sc[1]),In(oc,sc,Hl,at,ot,rc[1],Sc[0]),In(oc,sc,Hl,at,ot,rc[1],Sc[1])}}return sc}function Cn(at){return"MultiPolygon"===at.type?at.coordinates.map((at=>({type:"Polygon",coordinates:at}))):"MultiLineString"===at.type?at.coordinates.map((at=>({type:"LineString",coordinates:at}))):"MultiPoint"===at.type?at.coordinates.map((at=>({type:"Point",coordinates:at}))):[at]}class Bn{constructor(at,st){this.type=id,this.geojson=at,this.geometries=st}static parse(at,st){if(2!==at.length)return st.error(`'distance' expression requires exactly one argument, but found ${at.length-1} instead.`);if(Ue(at[1])){const st=at[1];if("FeatureCollection"===st.type)return new Bn(st,st.features.map((at=>Cn(at.geometry))).flat());if("Feature"===st.type)return new Bn(st,Cn(st.geometry));if("type"in st&&"coordinates"in st)return new Bn(st,Cn(st))}return st.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(at){if(null!=at.geometry()&&null!=at.canonicalID()){if("Point"===at.geometryType())return function(at,st){const ot=at.geometry(),ut=ot.flat().map((st=>Fr([st.x,st.y],at.canonical)));if(0===ot.length)return NaN;const Hl=new un(ut[0][1]);let rc=1/0;for(const sc of st){switch(sc.type){case"Point":rc=Math.min(rc,Pn(ut,!1,[sc.coordinates],!1,Hl,rc));break;case"LineString":rc=Math.min(rc,Pn(ut,!1,sc.coordinates,!0,Hl,rc));break;case"Polygon":rc=Math.min(rc,zn(ut,!1,sc.coordinates,Hl,rc))}if(0===rc)return rc}return rc}(at,this.geometries);if("LineString"===at.geometryType())return function(at,st){const ot=at.geometry(),ut=ot.flat().map((st=>Fr([st.x,st.y],at.canonical)));if(0===ot.length)return NaN;const Hl=new un(ut[0][1]);let rc=1/0;for(const sc of st){switch(sc.type){case"Point":rc=Math.min(rc,Pn(ut,!0,[sc.coordinates],!1,Hl,rc));break;case"LineString":rc=Math.min(rc,Pn(ut,!0,sc.coordinates,!0,Hl,rc));break;case"Polygon":rc=Math.min(rc,zn(ut,!0,sc.coordinates,Hl,rc))}if(0===rc)return rc}return rc}(at,this.geometries);if("Polygon"===at.geometryType())return function(at,st){const ot=at.geometry();if(0===ot.length||0===ot[0].length)return NaN;const ut=rn(ot,0).map((st=>st.map((st=>st.map((st=>Fr([st.x,st.y],at.canonical))))))),Hl=new un(ut[0][0][0][1]);let rc=1/0;for(const sc of st)for(const at of ut){switch(sc.type){case"Point":rc=Math.min(rc,zn([sc.coordinates],!1,at,Hl,rc));break;case"LineString":rc=Math.min(rc,zn(sc.coordinates,!0,at,Hl,rc));break;case"Polygon":rc=Math.min(rc,kn(at,sc.coordinates,Hl,rc))}if(0===rc)return rc}return rc}(at,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class En{constructor(at){this.type=ld,this.key=at}static parse(at,st){if(2!==at.length)return st.error(`Expected 1 argument, but found ${at.length-1} instead.`);const ot=at[1];return null==ot?st.error("Global state property must be defined."):"string"!=typeof ot?st.error(`Global state property must be string, but found ${typeof at[1]} instead.`):new En(ot)}evaluate(at){var st;const ot=null===(st=at.globals)||void 0===st?void 0:st.globalState;return ot&&0!==Object.keys(ot).length?we(ot,this.key):null}eachChild(){}outputDefined(){return!1}}const Yd={"==":Od,"!=":Bd,">":jd,"<":Fd,">=":Vd,"<=":Ud,array:Ye,at:rr,boolean:Ye,case:ar,coalesce:xr,collator:zr,format:Cr,image:Br,in:nr,"index-of":ir,interpolate:yr,"interpolate-hcl":yr,"interpolate-lab":yr,length:Er,let:tr,literal:Xe,match:sr,number:Ye,"number-format":Pr,object:Ye,slice:or,step:ur,string:Ye,"to-boolean":Ke,"to-color":Ke,"to-number":Ke,"to-string":Ke,var:er,within:Jr,distance:Bn,"global-state":En};class Vn{constructor(at,st,ot,ut){this.name=at,this.type=st,this._evaluate=ot,this.args=ut}evaluate(at){return this._evaluate(at,this.args)}eachChild(at){this.args.forEach(at)}outputDefined(){return!1}static parse(at,st){const ot=at[0],ut=Vn.definitions[ot];if(!ut)return st.error(`Unknown expression "${ot}". If you wanted a literal array, use ["literal", [...]].`,0);const Hl=Array.isArray(ut)?ut[0]:ut.type,rc=Array.isArray(ut)?[[ut[1],ut[2]]]:ut.overloads,sc=rc.filter((([st])=>!Array.isArray(st)||st.length===at.length-1));let oc=null;for(const[_c,wc]of sc){oc=new Qe(st.registry,On,st.path,null,st.scope);const ut=[];let rc=!1;for(let st=1;st<at.length;st++){const ot=at[st],Hl=Array.isArray(_c)?_c[st-1]:_c.type,sc=oc.parse(ot,1+ut.length,Hl);if(!sc){rc=!0;break}ut.push(sc)}if(!rc)if(Array.isArray(_c)&&_c.length!==ut.length)oc.error(`Expected ${_c.length} arguments, but found ${ut.length} instead.`);else{for(let at=0;at<ut.length;at++){const st=Array.isArray(_c)?_c[at]:_c.type,ot=ut[at];oc.concat(at+1).checkSubtype(st,ot.type)}if(0===oc.errors.length)return new Vn(ot,Hl,wc,ut)}}if(1===sc.length)st.errors.push(...oc.errors);else{const ot=(sc.length?sc:rc).map((([at])=>{return st=at,Array.isArray(st)?`(${st.map(Qt).join(", ")})`:`(${Qt(st.type)}...)`;var st})).join(" | "),ut=[];for(let Hl=1;Hl<at.length;Hl++){const ot=st.parse(at[Hl],1+ut.length);if(!ot)return null;ut.push(Qt(ot.type))}st.error(`Expected arguments of type ${ot}, but found (${ut.join(", ")}) instead.`)}return null}static register(at,st){Vn.definitions=st;for(const ot in st)at[ot]=Vn}}function Fn(at,[st,ot,ut,Hl]){st=st.evaluate(at),ot=ot.evaluate(at),ut=ut.evaluate(at);const rc=Hl?Hl.evaluate(at):1,sc=Ne(st,ot,ut,rc);if(sc)throw new $e(sc);return new Pe(st/255,ot/255,ut/255,rc,!1)}function Ln(at,st){return at in st}function $n(at,st){const ot=st[at];return void 0===ot?null:ot}function Dn(at){return{type:at}}function On(at){if(at instanceof er)return On(at.boundExpression);if(at instanceof Vn&&"error"===at.name)return!1;if(at instanceof zr)return!1;if(at instanceof Jr)return!1;if(at instanceof Bn)return!1;if(at instanceof En)return!1;const st=at instanceof Ke||at instanceof Ye;let ot=!0;return at.eachChild((at=>{ot=st?ot&&On(at):ot&&at instanceof Xe})),!!ot&&Rn(at)&&Nn(at,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function Rn(at){if(at instanceof Vn){if("get"===at.name&&1===at.args.length)return!1;if("feature-state"===at.name)return!1;if("has"===at.name&&1===at.args.length)return!1;if("properties"===at.name||"geometry-type"===at.name||"id"===at.name)return!1;if(/^filter-/.test(at.name))return!1}if(at instanceof Jr)return!1;if(at instanceof Bn)return!1;let st=!0;return at.eachChild((at=>{st&&!Rn(at)&&(st=!1)})),st}function jn(at){if(at instanceof Vn&&"feature-state"===at.name)return!1;let st=!0;return at.eachChild((at=>{st&&!jn(at)&&(st=!1)})),st}function Nn(at,st){if(at instanceof Vn&&st.indexOf(at.name)>=0)return!1;let ot=!0;return at.eachChild((at=>{ot&&!Nn(at,st)&&(ot=!1)})),ot}function Un(at){return{result:"success",value:at}}function qn(at){return{result:"error",value:at}}function Gn(at){return"data-driven"===at["property-type"]||"cross-faded-data-driven"===at["property-type"]}function Xn(at){return!!at.expression&&at.expression.parameters.indexOf("zoom")>-1}function Zn(at){return!!at.expression&&at.expression.interpolated}function Yn(at){return at instanceof Number?"number":at instanceof String?"string":at instanceof Boolean?"boolean":Array.isArray(at)?"array":null===at?"null":typeof at}function Hn(at){return"object"==typeof at&&null!==at&&!Array.isArray(at)&&qe(at)===od}function Kn(at){return at}function Jn(at,st){const ot=at.stops&&"object"==typeof at.stops[0][0],ut=ot||!(ot||void 0!==at.property),Hl=at.type||(Zn(st)?"exponential":"interval"),rc=function(at){switch(at.type){case"color":return Pe.parse;case"padding":return Ve.parse;case"numberArray":return Fe.parse;case"colorArray":return Le.parse;default:return null}}(st);if(rc&&((at=Vt({},at)).stops&&(at.stops=at.stops.map((at=>[at[0],rc(at[1])]))),at.default=rc(at.default?at.default:st.default)),at.colorSpace&&"rgb"!==(sc=at.colorSpace)&&"hcl"!==sc&&"lab"!==sc)throw new Error(`Unknown color space: "${at.colorSpace}"`);var sc;const oc=function(at){switch(at){case"exponential":return ei;case"interval":return ti;case"categorical":return Qn;case"identity":return ri;default:throw new Error(`Unknown function type "${at}"`)}}(Hl);let _c,wc;if("categorical"===Hl){_c=Object.create(null);for(const st of at.stops)_c[st[0]]=st[1];wc=typeof at.stops[0][0]}if(ot){const ot={},ut=[];for(let st=0;st<at.stops.length;st++){const Hl=at.stops[st],rc=Hl[0].zoom;void 0===ot[rc]&&(ot[rc]={zoom:rc,type:at.type,property:at.property,default:at.default,stops:[]},ut.push(rc)),ot[rc].stops.push([Hl[0].value,Hl[1]])}const Hl=[];for(const at of ut)Hl.push([ot[at].zoom,Jn(ot[at],st)]);const rc={name:"linear"};return{kind:"composite",interpolationType:rc,interpolationFactor:yr.interpolationFactor.bind(void 0,rc),zoomStops:Hl.map((at=>at[0])),evaluate:({zoom:ot},ut)=>ei({stops:Hl,base:at.base},st,ot).evaluate(ot,ut)}}if(ut){const ot="exponential"===Hl?{name:"exponential",base:void 0!==at.base?at.base:1}:null;return{kind:"camera",interpolationType:ot,interpolationFactor:yr.interpolationFactor.bind(void 0,ot),zoomStops:at.stops.map((at=>at[0])),evaluate:({zoom:ot})=>oc(at,st,ot,_c,wc)}}return{kind:"source",evaluate(ot,ut){const Hl=ut&&ut.properties?ut.properties[at.property]:void 0;return void 0===Hl?Wn(at.default,st.default):oc(at,st,Hl,_c,wc)}}}function Wn(at,st,ot){return void 0!==at?at:void 0!==st?st:void 0!==ot?ot:void 0}function Qn(at,st,ot,ut,Hl){return Wn(typeof ot===Hl?ut[ot]:void 0,at.default,st.default)}function ti(at,st,ot){if("number"!==Yn(ot))return Wn(at.default,st.default);const ut=at.stops.length;if(1===ut)return at.stops[0][1];if(ot<=at.stops[0][0])return at.stops[0][1];if(ot>=at.stops[ut-1][0])return at.stops[ut-1][1];const Hl=lr(at.stops.map((at=>at[0])),ot);return at.stops[Hl][1]}function ei(at,st,ot){const ut=void 0!==at.base?at.base:1;if("number"!==Yn(ot))return Wn(at.default,st.default);const Hl=at.stops.length;if(1===Hl)return at.stops[0][1];if(ot<=at.stops[0][0])return at.stops[0][1];if(ot>=at.stops[Hl-1][0])return at.stops[Hl-1][1];const rc=lr(at.stops.map((at=>at[0])),ot),sc=function(at,st,ot,ut){const Hl=ut-ot,rc=at-ot;return 0===Hl?0:1===st?rc/Hl:(Math.pow(st,rc)-1)/(Math.pow(st,Hl)-1)}(ot,ut,at.stops[rc][0],at.stops[rc+1][0]),oc=at.stops[rc][1],_c=at.stops[rc+1][1],wc=Rd[st.type]||Kn;return"function"==typeof oc.evaluate?{evaluate(...st){const ot=oc.evaluate.apply(void 0,st),ut=_c.evaluate.apply(void 0,st);if(void 0!==ot&&void 0!==ut)return wc(ot,ut,sc,at.colorSpace)}}:wc(oc,_c,sc,at.colorSpace)}function ri(at,st,ot){switch(st.type){case"color":ot=Pe.parse(ot);break;case"formatted":ot=Te.fromString(ot.toString());break;case"resolvedImage":ot=Re.fromString(ot.toString());break;case"padding":ot=Ve.parse(ot);break;case"colorArray":ot=Le.parse(ot);break;case"numberArray":ot=Fe.parse(ot);break;default:Yn(ot)===st.type||"enum"===st.type&&st.values[ot]||(ot=void 0)}return Wn(ot,at.default,st.default)}Vn.register(Yd,{error:[{kind:"error"},[nd],(at,[st])=>{throw new $e(st.evaluate(at))}],typeof:[nd,[ld],(at,[st])=>Qt(qe(st.evaluate(at)))],"to-rgba":[Wt(id,4),[ad],(at,[st])=>{const[ot,ut,Hl,rc]=st.evaluate(at).rgb;return[255*ot,255*ut,255*Hl,rc]}],rgb:[ad,[id,id,id],Fn],rgba:[ad,[id,id,id,id],Fn],has:{type:rd,overloads:[[[nd],(at,[st])=>Ln(st.evaluate(at),at.properties())],[[nd,od],(at,[st,ot])=>Ln(st.evaluate(at),ot.evaluate(at))]]},get:{type:ld,overloads:[[[nd],(at,[st])=>$n(st.evaluate(at),at.properties())],[[nd,od],(at,[st,ot])=>$n(st.evaluate(at),ot.evaluate(at))]]},"feature-state":[ld,[nd],(at,[st])=>$n(st.evaluate(at),at.featureState||{})],properties:[od,[],at=>at.properties()],"geometry-type":[nd,[],at=>at.geometryType()],id:[ld,[],at=>at.id()],zoom:[id,[],at=>at.globals.zoom],"heatmap-density":[id,[],at=>at.globals.heatmapDensity||0],elevation:[id,[],at=>at.globals.elevation||0],"line-progress":[id,[],at=>at.globals.lineProgress||0],accumulated:[ld,[],at=>void 0===at.globals.accumulated?null:at.globals.accumulated],"+":[id,Dn(id),(at,st)=>{let ot=0;for(const ut of st)ot+=ut.evaluate(at);return ot}],"*":[id,Dn(id),(at,st)=>{let ot=1;for(const ut of st)ot*=ut.evaluate(at);return ot}],"-":{type:id,overloads:[[[id,id],(at,[st,ot])=>st.evaluate(at)-ot.evaluate(at)],[[id],(at,[st])=>-st.evaluate(at)]]},"/":[id,[id,id],(at,[st,ot])=>st.evaluate(at)/ot.evaluate(at)],"%":[id,[id,id],(at,[st,ot])=>st.evaluate(at)%ot.evaluate(at)],ln2:[id,[],()=>Math.LN2],pi:[id,[],()=>Math.PI],e:[id,[],()=>Math.E],"^":[id,[id,id],(at,[st,ot])=>Math.pow(st.evaluate(at),ot.evaluate(at))],sqrt:[id,[id],(at,[st])=>Math.sqrt(st.evaluate(at))],log10:[id,[id],(at,[st])=>Math.log(st.evaluate(at))/Math.LN10],ln:[id,[id],(at,[st])=>Math.log(st.evaluate(at))],log2:[id,[id],(at,[st])=>Math.log(st.evaluate(at))/Math.LN2],sin:[id,[id],(at,[st])=>Math.sin(st.evaluate(at))],cos:[id,[id],(at,[st])=>Math.cos(st.evaluate(at))],tan:[id,[id],(at,[st])=>Math.tan(st.evaluate(at))],asin:[id,[id],(at,[st])=>Math.asin(st.evaluate(at))],acos:[id,[id],(at,[st])=>Math.acos(st.evaluate(at))],atan:[id,[id],(at,[st])=>Math.atan(st.evaluate(at))],min:[id,Dn(id),(at,st)=>Math.min(...st.map((st=>st.evaluate(at))))],max:[id,Dn(id),(at,st)=>Math.max(...st.map((st=>st.evaluate(at))))],abs:[id,[id],(at,[st])=>Math.abs(st.evaluate(at))],round:[id,[id],(at,[st])=>{const ot=st.evaluate(at);return ot<0?-Math.round(-ot):Math.round(ot)}],floor:[id,[id],(at,[st])=>Math.floor(st.evaluate(at))],ceil:[id,[id],(at,[st])=>Math.ceil(st.evaluate(at))],"filter-==":[rd,[nd,ld],(at,[st,ot])=>at.properties()[st.value]===ot.value],"filter-id-==":[rd,[ld],(at,[st])=>at.id()===st.value],"filter-type-==":[rd,[nd],(at,[st])=>at.geometryType()===st.value],"filter-<":[rd,[nd,ld],(at,[st,ot])=>{const ut=at.properties()[st.value],Hl=ot.value;return typeof ut==typeof Hl&&ut<Hl}],"filter-id-<":[rd,[ld],(at,[st])=>{const ot=at.id(),ut=st.value;return typeof ot==typeof ut&&ot<ut}],"filter->":[rd,[nd,ld],(at,[st,ot])=>{const ut=at.properties()[st.value],Hl=ot.value;return typeof ut==typeof Hl&&ut>Hl}],"filter-id->":[rd,[ld],(at,[st])=>{const ot=at.id(),ut=st.value;return typeof ot==typeof ut&&ot>ut}],"filter-<=":[rd,[nd,ld],(at,[st,ot])=>{const ut=at.properties()[st.value],Hl=ot.value;return typeof ut==typeof Hl&&ut<=Hl}],"filter-id-<=":[rd,[ld],(at,[st])=>{const ot=at.id(),ut=st.value;return typeof ot==typeof ut&&ot<=ut}],"filter->=":[rd,[nd,ld],(at,[st,ot])=>{const ut=at.properties()[st.value],Hl=ot.value;return typeof ut==typeof Hl&&ut>=Hl}],"filter-id->=":[rd,[ld],(at,[st])=>{const ot=at.id(),ut=st.value;return typeof ot==typeof ut&&ot>=ut}],"filter-has":[rd,[ld],(at,[st])=>st.value in at.properties()],"filter-has-id":[rd,[],at=>null!==at.id()&&void 0!==at.id()],"filter-type-in":[rd,[Wt(nd)],(at,[st])=>st.value.indexOf(at.geometryType())>=0],"filter-id-in":[rd,[Wt(ld)],(at,[st])=>st.value.indexOf(at.id())>=0],"filter-in-small":[rd,[nd,Wt(ld)],(at,[st,ot])=>ot.value.indexOf(at.properties()[st.value])>=0],"filter-in-large":[rd,[nd,Wt(ld)],(at,[st,ot])=>function(at,st,ot,ut){for(;ot<=ut;){const Hl=ot+ut>>1;if(st[Hl]===at)return!0;st[Hl]>at?ut=Hl-1:ot=Hl+1}return!1}(at.properties()[st.value],ot.value,0,ot.value.length-1)],all:{type:rd,overloads:[[[rd,rd],(at,[st,ot])=>st.evaluate(at)&&ot.evaluate(at)],[Dn(rd),(at,st)=>{for(const ot of st)if(!ot.evaluate(at))return!1;return!0}]]},any:{type:rd,overloads:[[[rd,rd],(at,[st,ot])=>st.evaluate(at)||ot.evaluate(at)],[Dn(rd),(at,st)=>{for(const ot of st)if(ot.evaluate(at))return!0;return!1}]]},"!":[rd,[rd],(at,[st])=>!st.evaluate(at)],"is-supported-script":[rd,[nd],(at,[st])=>{const ot=at.globals&&at.globals.isSupportedScript;return!ot||ot(st.evaluate(at))}],upcase:[nd,[nd],(at,[st])=>st.evaluate(at).toUpperCase()],downcase:[nd,[nd],(at,[st])=>st.evaluate(at).toLowerCase()],concat:[nd,Dn(ld),(at,st)=>st.map((st=>Ge(st.evaluate(at)))).join("")],"resolved-locale":[nd,[cd],(at,[st])=>st.evaluate(at).resolvedLocale()]});class ni{constructor(at,st){this.expression=at,this._warningHistory={},this._evaluator=new We,this._defaultValue=st?function(at){if("color"===at.type&&Hn(at.default))return new Pe(0,0,0,0);switch(at.type){case"color":return Pe.parse(at.default)||null;case"padding":return Ve.parse(at.default)||null;case"numberArray":return Fe.parse(at.default)||null;case"colorArray":return Le.parse(at.default)||null;case"variableAnchorOffsetCollection":return Oe.parse(at.default)||null;case"projectionDefinition":return je.parse(at.default)||null;default:return void 0===at.default?null:at.default}}(st):null,this._enumValues=st&&"enum"===st.type?st.values:null}evaluateWithoutErrorHandling(at,st,ot,ut,Hl,rc){return this._evaluator.globals=at,this._evaluator.feature=st,this._evaluator.featureState=ot,this._evaluator.canonical=ut,this._evaluator.availableImages=Hl||null,this._evaluator.formattedSection=rc,this.expression.evaluate(this._evaluator)}evaluate(at,st,ot,ut,Hl,rc){this._evaluator.globals=at,this._evaluator.feature=st||null,this._evaluator.featureState=ot||null,this._evaluator.canonical=ut,this._evaluator.availableImages=Hl||null,this._evaluator.formattedSection=rc||null;try{const at=this.expression.evaluate(this._evaluator);if(null==at||"number"==typeof at&&at!=at)return this._defaultValue;if(this._enumValues&&!(at in this._enumValues))throw new $e(`Expected value to be one of ${Object.keys(this._enumValues).map((at=>JSON.stringify(at))).join(", ")}, but found ${JSON.stringify(at)} instead.`);return at}catch(at){return this._warningHistory[at.message]||(this._warningHistory[at.message]=!0,"undefined"!=typeof console&&console.warn(at.message)),this._defaultValue}}}function ii(at){return Array.isArray(at)&&at.length>0&&"string"==typeof at[0]&&at[0]in Yd}function si(at,st){const ot=new Qe(Yd,On,[],st?function(at){const st={color:ad,string:nd,number:id,enum:nd,boolean:rd,formatted:ud,padding:hd,numberArray:pd,colorArray:dd,projectionDefinition:sd,resolvedImage:md,variableAnchorOffsetCollection:gd};return"array"===at.type?Wt(st[at.value]||ld,at.length):st[at.type]}(st):void 0),ut=ot.parse(at,void 0,void 0,void 0,st&&"string"===st.type?{typeAnnotation:"coerce"}:void 0);return ut?Un(new ni(ut,st)):qn(ot.errors)}class ai{constructor(at,st){this.kind=at,this._styleExpression=st,this.isStateDependent="constant"!==at&&!jn(st.expression),this.globalStateRefs=hi(st.expression)}evaluateWithoutErrorHandling(at,st,ot,ut,Hl,rc){return this._styleExpression.evaluateWithoutErrorHandling(at,st,ot,ut,Hl,rc)}evaluate(at,st,ot,ut,Hl,rc){return this._styleExpression.evaluate(at,st,ot,ut,Hl,rc)}}class oi{constructor(at,st,ot,ut){this.kind=at,this.zoomStops=ot,this._styleExpression=st,this.isStateDependent="camera"!==at&&!jn(st.expression),this.globalStateRefs=hi(st.expression),this.interpolationType=ut}evaluateWithoutErrorHandling(at,st,ot,ut,Hl,rc){return this._styleExpression.evaluateWithoutErrorHandling(at,st,ot,ut,Hl,rc)}evaluate(at,st,ot,ut,Hl,rc){return this._styleExpression.evaluate(at,st,ot,ut,Hl,rc)}interpolationFactor(at,st,ot){return this.interpolationType?yr.interpolationFactor(this.interpolationType,at,st,ot):0}}function li(at,st){const ot=si(at,st);if("error"===ot.result)return ot;const ut=ot.value.expression,Hl=Rn(ut);if(!Hl&&!Gn(st))return qn([new Ft("","data expressions not supported")]);const rc=Nn(ut,["zoom"]);if(!rc&&!Xn(st))return qn([new Ft("","zoom expressions not supported")]);const sc=ci(ut);return sc||rc?sc instanceof Ft?qn([sc]):sc instanceof yr&&!Zn(st)?qn([new Ft("",'"interpolate" expressions cannot be used with this property')]):Un(sc?new oi(Hl?"camera":"composite",ot.value,sc.labels,sc instanceof yr?sc.interpolation:void 0):new ai(Hl?"constant":"source",ot.value)):qn([new Ft("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class ui{constructor(at,st){this._parameters=at,this._specification=st,Vt(this,Jn(this._parameters,this._specification))}static deserialize(at){return new ui(at._parameters,at._specification)}static serialize(at){return{_parameters:at._parameters,_specification:at._specification}}}function ci(at){let st=null;if(at instanceof tr)st=ci(at.result);else if(at instanceof xr){for(const ot of at.args)if(st=ci(ot),st)break}else(at instanceof ur||at instanceof yr)&&at.input instanceof Vn&&"zoom"===at.input.name&&(st=at);return st instanceof Ft||at.eachChild((at=>{const ot=ci(at);ot instanceof Ft?st=ot:!st&&ot?st=new Ft("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):st&&ot&&st!==ot&&(st=new Ft("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),st}function hi(at,st=new Set){return at instanceof En&&st.add(at.key),at.eachChild((at=>{hi(at,st)})),st}function pi(at){if(!0===at||!1===at)return!0;if(!Array.isArray(at)||0===at.length)return!1;switch(at[0]){case"has":return at.length>=2&&"$id"!==at[1]&&"$type"!==at[1];case"in":return at.length>=3&&("string"!=typeof at[1]||Array.isArray(at[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==at.length||Array.isArray(at[1])||Array.isArray(at[2]);case"any":case"all":for(const st of at.slice(1))if(!pi(st)&&"boolean"!=typeof st)return!1;return!0;default:return!0}}const Qd={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function di(at){if(null==at)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};pi(at)||(at=gi(at));const st=si(at,Qd);if("error"===st.result)throw new Error(st.value.map((at=>`${at.key}: ${at.message}`)).join(", "));return{filter:(at,ot,ut)=>st.value.evaluate(at,ot,{},ut),needGeometry:mi(at),getGlobalStateRefs:()=>hi(st.value.expression)}}function yi(at,st){return at<st?-1:at>st?1:0}function mi(at){if(!Array.isArray(at))return!1;if("within"===at[0]||"distance"===at[0])return!0;for(let st=1;st<at.length;st++)if(mi(at[st]))return!0;return!1}function gi(at){if(!at)return!0;const st=at[0];return at.length<=1?"any"!==st:"=="===st?xi(at[1],at[2],"=="):"!="===st?wi(xi(at[1],at[2],"==")):"<"===st||">"===st||"<="===st||">="===st?xi(at[1],at[2],st):"any"===st?(ot=at.slice(1),["any"].concat(ot.map(gi))):"all"===st?["all"].concat(at.slice(1).map(gi)):"none"===st?["all"].concat(at.slice(1).map(gi).map(wi)):"in"===st?vi(at[1],at.slice(2)):"!in"===st?wi(vi(at[1],at.slice(2))):"has"===st?bi(at[1]):"!has"!==st||wi(bi(at[1]));var ot}function xi(at,st,ot){switch(at){case"$type":return[`filter-type-${ot}`,st];case"$id":return[`filter-id-${ot}`,st];default:return[`filter-${ot}`,at,st]}}function vi(at,st){if(0===st.length)return!1;switch(at){case"$type":return["filter-type-in",["literal",st]];case"$id":return["filter-id-in",["literal",st]];default:return st.length>200&&!st.some((at=>typeof at!=typeof st[0]))?["filter-in-large",at,["literal",st.sort(yi)]]:["filter-in-small",at,["literal",st]]}}function bi(at){switch(at){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",at]}}function wi(at){return["!",at]}function _i(at){const st=typeof at;if("number"===st||"boolean"===st||"string"===st||null==at)return JSON.stringify(at);if(Array.isArray(at)){let st="[";for(const ot of at)st+=`${_i(ot)},`;return`${st}]`}const ot=Object.keys(at).sort();let ut="{";for(let Hl=0;Hl<ot.length;Hl++)ut+=`${JSON.stringify(ot[Hl])}:${_i(at[ot[Hl]])},`;return`${ut}}`}function Si(at){let st="";for(const ot of ed)st+=`/${_i(at[ot])}`;return st}function Ai(at){const st=at.value;return st?[new Tt(at.key,st,"constants have been deprecated as of v8")]:[]}function ki(at){return at instanceof Number||at instanceof String||at instanceof Boolean?at.valueOf():at}function Mi(at){if(Array.isArray(at))return at.map(Mi);if(at instanceof Object&&!(at instanceof Number||at instanceof String||at instanceof Boolean)){const st={};for(const ot in at)st[ot]=Mi(at[ot]);return st}return ki(at)}function Ii(at){const st=at.key,ot=at.value,ut=at.valueSpec||{},Hl=at.objectElementValidators||{},rc=at.style,sc=at.styleSpec,oc=at.validateSpec;let _c=[];const wc=Yn(ot);if("object"!==wc)return[new Tt(st,ot,`object expected, ${wc} found`)];for(const Sc in ot){const at=Sc.split(".")[0],wc=we(ut,at)||ut["*"];let iu;if(we(Hl,at))iu=Hl[at];else if(we(ut,at))iu=oc;else if(Hl["*"])iu=Hl["*"];else{if(!ut["*"]){_c.push(new Tt(st,ot[Sc],`unknown property "${Sc}"`));continue}iu=oc}_c=_c.concat(iu({key:(st?`${st}.`:st)+Sc,value:ot[Sc],valueSpec:wc,style:rc,styleSpec:sc,object:ot,objectKey:Sc,validateSpec:oc},ot))}for(const Sc in ut)Hl[Sc]||ut[Sc].required&&void 0===ut[Sc].default&&void 0===ot[Sc]&&_c.push(new Tt(st,ot,`missing required property "${Sc}"`));return _c}function zi(at){const st=at.value,ot=at.valueSpec,ut=at.style,Hl=at.styleSpec,rc=at.key,sc=at.arrayElementValidator||at.validateSpec;if("array"!==Yn(st))return[new Tt(rc,st,`array expected, ${Yn(st)} found`)];if(ot.length&&st.length!==ot.length)return[new Tt(rc,st,`array length ${ot.length} expected, length ${st.length} found`)];if(ot["min-length"]&&st.length<ot["min-length"])return[new Tt(rc,st,`array length at least ${ot["min-length"]} expected, length ${st.length} found`)];let oc={type:ot.value,values:ot.values};Hl.$version<7&&(oc.function=ot.function),"object"===Yn(ot.value)&&(oc=ot.value);let _c=[];for(let wc=0;wc<st.length;wc++)_c=_c.concat(sc({array:st,arrayIndex:wc,value:st[wc],valueSpec:oc,validateSpec:at.validateSpec,style:ut,styleSpec:Hl,key:`${rc}[${wc}]`}));return _c}function Pi(at){const st=at.key,ot=at.value,ut=at.valueSpec;let Hl=Yn(ot);return"number"===Hl&&ot!=ot&&(Hl="NaN"),"number"!==Hl?[new Tt(st,ot,`number expected, ${Hl} found`)]:"minimum"in ut&&ot<ut.minimum?[new Tt(st,ot,`${ot} is less than the minimum value ${ut.minimum}`)]:"maximum"in ut&&ot>ut.maximum?[new Tt(st,ot,`${ot} is greater than the maximum value ${ut.maximum}`)]:[]}function Ci(at){const st=at.valueSpec,ot=ki(at.value.type);let ut,Hl,rc,sc={};const oc="categorical"!==ot&&void 0===at.value.property,_c=!oc,wc="array"===Yn(at.value.stops)&&"array"===Yn(at.value.stops[0])&&"object"===Yn(at.value.stops[0][0]),Sc=Ii({key:at.key,value:at.value,valueSpec:at.styleSpec.function,validateSpec:at.validateSpec,style:at.style,styleSpec:at.styleSpec,objectElementValidators:{stops:function(at){if("identity"===ot)return[new Tt(at.key,at.value,'identity function may not have a "stops" property')];let st=[];const ut=at.value;return st=st.concat(zi({key:at.key,value:ut,valueSpec:at.valueSpec,validateSpec:at.validateSpec,style:at.style,styleSpec:at.styleSpec,arrayElementValidator:h})),"array"===Yn(ut)&&0===ut.length&&st.push(new Tt(at.key,ut,"array must have at least one stop")),st},default:function(at){return at.validateSpec({key:at.key,value:at.value,valueSpec:st,validateSpec:at.validateSpec,style:at.style,styleSpec:at.styleSpec})}}});return"identity"===ot&&oc&&Sc.push(new Tt(at.key,at.value,'missing required property "property"')),"identity"===ot||at.value.stops||Sc.push(new Tt(at.key,at.value,'missing required property "stops"')),"exponential"===ot&&at.valueSpec.expression&&!Zn(at.valueSpec)&&Sc.push(new Tt(at.key,at.value,"exponential functions not supported")),at.styleSpec.$version>=8&&(_c&&!Gn(at.valueSpec)?Sc.push(new Tt(at.key,at.value,"property functions not supported")):oc&&!Xn(at.valueSpec)&&Sc.push(new Tt(at.key,at.value,"zoom functions not supported"))),"categorical"!==ot&&!wc||void 0!==at.value.property||Sc.push(new Tt(at.key,at.value,'"property" property is required')),Sc;function h(at){let ot=[];const ut=at.value,oc=at.key;if("array"!==Yn(ut))return[new Tt(oc,ut,`array expected, ${Yn(ut)} found`)];if(2!==ut.length)return[new Tt(oc,ut,`array length 2 expected, length ${ut.length} found`)];if(wc){if("object"!==Yn(ut[0]))return[new Tt(oc,ut,`object expected, ${Yn(ut[0])} found`)];if(void 0===ut[0].zoom)return[new Tt(oc,ut,"object stop key must have zoom")];if(void 0===ut[0].value)return[new Tt(oc,ut,"object stop key must have value")];if(rc&&rc>ki(ut[0].zoom))return[new Tt(oc,ut[0].zoom,"stop zoom values must appear in ascending order")];ki(ut[0].zoom)!==rc&&(rc=ki(ut[0].zoom),Hl=void 0,sc={}),ot=ot.concat(Ii({key:`${oc}[0]`,value:ut[0],valueSpec:{zoom:{}},validateSpec:at.validateSpec,style:at.style,styleSpec:at.styleSpec,objectElementValidators:{zoom:Pi,value:p}}))}else ot=ot.concat(p({key:`${oc}[0]`,value:ut[0],validateSpec:at.validateSpec,style:at.style,styleSpec:at.styleSpec},ut));return ii(Mi(ut[1]))?ot.concat([new Tt(`${oc}[1]`,ut[1],"expressions are not allowed in function stops.")]):ot.concat(at.validateSpec({key:`${oc}[1]`,value:ut[1],valueSpec:st,validateSpec:at.validateSpec,style:at.style,styleSpec:at.styleSpec}))}function p(at,rc){const oc=Yn(at.value),_c=ki(at.value),wc=null!==at.value?at.value:rc;if(ut){if(oc!==ut)return[new Tt(at.key,wc,`${oc} stop domain type must match previous stop domain type ${ut}`)]}else ut=oc;if("number"!==oc&&"string"!==oc&&"boolean"!==oc)return[new Tt(at.key,wc,"stop domain value must be a number, string, or boolean")];if("number"!==oc&&"categorical"!==ot){let ut=`number expected, ${oc} found`;return Gn(st)&&void 0===ot&&(ut+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Tt(at.key,wc,ut)]}return"categorical"!==ot||"number"!==oc||isFinite(_c)&&Math.floor(_c)===_c?"categorical"!==ot&&"number"===oc&&void 0!==Hl&&_c<Hl?[new Tt(at.key,wc,"stop domain values must appear in ascending order")]:(Hl=_c,"categorical"===ot&&_c in sc?[new Tt(at.key,wc,"stop domain values must be unique")]:(sc[_c]=!0,[])):[new Tt(at.key,wc,`integer expected, found ${_c}`)]}}function Bi(at){const st=("property"===at.expressionContext?li:si)(Mi(at.value),at.valueSpec);if("error"===st.result)return st.value.map((st=>new Tt(`${at.key}${st.key}`,at.value,st.message)));const ot=st.value.expression||st.value._styleExpression.expression;if("property"===at.expressionContext&&"text-font"===at.propertyKey&&!ot.outputDefined())return[new Tt(at.key,at.value,`Invalid data expression for "${at.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===at.expressionContext&&"layout"===at.propertyType&&!jn(ot))return[new Tt(at.key,at.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===at.expressionContext&&!jn(ot))return[new Tt(at.key,at.value,'"feature-state" data expressions are not supported with filters.')];if(at.expressionContext&&0===at.expressionContext.indexOf("cluster")){if(!Nn(ot,["zoom","feature-state"]))return[new Tt(at.key,at.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===at.expressionContext&&!Rn(ot))return[new Tt(at.key,at.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Ei(at){const st=at.key,ot=at.value,ut=Yn(ot);return"string"!==ut?[new Tt(st,ot,`color expected, ${ut} found`)]:Pe.parse(String(ot))?[]:[new Tt(st,ot,`color expected, "${ot}" found`)]}function Ti(at){const st=at.key,ot=at.value,ut=at.valueSpec,Hl=[];return Array.isArray(ut.values)?-1===ut.values.indexOf(ki(ot))&&Hl.push(new Tt(st,ot,`expected one of [${ut.values.join(", ")}], ${JSON.stringify(ot)} found`)):-1===Object.keys(ut.values).indexOf(ki(ot))&&Hl.push(new Tt(st,ot,`expected one of [${Object.keys(ut.values).join(", ")}], ${JSON.stringify(ot)} found`)),Hl}function Vi(at){return pi(Mi(at.value))?Bi(Vt({},at,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Fi(at)}function Fi(at){const st=at.value,ot=at.key;if("array"!==Yn(st))return[new Tt(ot,st,`array expected, ${Yn(st)} found`)];const ut=at.styleSpec;let Hl,rc=[];if(st.length<1)return[new Tt(ot,st,"filter array must have at least 1 element")];switch(rc=rc.concat(Ti({key:`${ot}[0]`,value:st[0],valueSpec:ut.filter_operator,style:at.style,styleSpec:at.styleSpec})),ki(st[0])){case"<":case"<=":case">":case">=":st.length>=2&&"$type"===ki(st[1])&&rc.push(new Tt(ot,st,`"$type" cannot be use with operator "${st[0]}"`));case"==":case"!=":3!==st.length&&rc.push(new Tt(ot,st,`filter array for operator "${st[0]}" must have 3 elements`));case"in":case"!in":st.length>=2&&(Hl=Yn(st[1]),"string"!==Hl&&rc.push(new Tt(`${ot}[1]`,st[1],`string expected, ${Hl} found`)));for(let sc=2;sc<st.length;sc++)Hl=Yn(st[sc]),"$type"===ki(st[1])?rc=rc.concat(Ti({key:`${ot}[${sc}]`,value:st[sc],valueSpec:ut.geometry_type,style:at.style,styleSpec:at.styleSpec})):"string"!==Hl&&"number"!==Hl&&"boolean"!==Hl&&rc.push(new Tt(`${ot}[${sc}]`,st[sc],`string, number, or boolean expected, ${Hl} found`));break;case"any":case"all":case"none":for(let ut=1;ut<st.length;ut++)rc=rc.concat(Fi({key:`${ot}[${ut}]`,value:st[ut],style:at.style,styleSpec:at.styleSpec}));break;case"has":case"!has":Hl=Yn(st[1]),2!==st.length?rc.push(new Tt(ot,st,`filter array for "${st[0]}" operator must have 2 elements`)):"string"!==Hl&&rc.push(new Tt(`${ot}[1]`,st[1],`string expected, ${Hl} found`))}return rc}function Li(at,st){const ot=at.key,ut=at.validateSpec,Hl=at.style,rc=at.styleSpec,sc=at.value,oc=at.objectKey,_c=rc[`${st}_${at.layerType}`];if(!_c)return[];const wc=oc.match(/^(.*)-transition$/);if("paint"===st&&wc&&_c[wc[1]]&&_c[wc[1]].transition)return ut({key:ot,value:sc,valueSpec:rc.transition,style:Hl,styleSpec:rc});const Sc=at.valueSpec||_c[oc];if(!Sc)return[new Tt(ot,sc,`unknown property "${oc}"`)];let iu;if("string"===Yn(sc)&&Gn(Sc)&&!Sc.tokens&&(iu=/^{([^}]+)}$/.exec(sc)))return[new Tt(ot,sc,`"${oc}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(iu[1])} }\`.`)];const su=[];return"symbol"===at.layerType&&("text-field"===oc&&Hl&&!Hl.glyphs&&su.push(new Tt(ot,sc,'use of "text-field" requires a style "glyphs" property')),"text-font"===oc&&Hn(Mi(sc))&&"identity"===ki(sc.type)&&su.push(new Tt(ot,sc,'"text-font" does not support identity functions'))),su.concat(ut({key:at.key,value:sc,valueSpec:Sc,style:Hl,styleSpec:rc,expressionContext:"property",propertyType:st,propertyKey:oc}))}function $i(at){return Li(at,"paint")}function Di(at){return Li(at,"layout")}function Oi(at){let st=[];const ot=at.value,ut=at.key,Hl=at.style,rc=at.styleSpec;if("object"!==Yn(ot))return[new Tt(ut,ot,`object expected, ${Yn(ot)} found`)];ot.type||ot.ref||st.push(new Tt(ut,ot,'either "type" or "ref" is required'));let sc=ki(ot.type);const oc=ki(ot.ref);if(ot.id){const rc=ki(ot.id);for(let sc=0;sc<at.arrayIndex;sc++){const at=Hl.layers[sc];ki(at.id)===rc&&st.push(new Tt(ut,ot.id,`duplicate layer id "${ot.id}", previously used at line ${at.id.__line__}`))}}if("ref"in ot){let at;["type","source","source-layer","filter","layout"].forEach((at=>{at in ot&&st.push(new Tt(ut,ot[at],`"${at}" is prohibited for ref layers`))})),Hl.layers.forEach((st=>{ki(st.id)===oc&&(at=st)})),at?at.ref?st.push(new Tt(ut,ot.ref,"ref cannot reference another ref layer")):sc=ki(at.type):st.push(new Tt(ut,ot.ref,`ref layer "${oc}" not found`))}else if("background"!==sc)if(ot.source){const at=Hl.sources&&Hl.sources[ot.source],rc=at&&ki(at.type);at?"vector"===rc&&"raster"===sc?st.push(new Tt(ut,ot.source,`layer "${ot.id}" requires a raster source`)):"raster-dem"!==rc&&"hillshade"===sc||"raster-dem"!==rc&&"color-relief"===sc?st.push(new Tt(ut,ot.source,`layer "${ot.id}" requires a raster-dem source`)):"raster"===rc&&"raster"!==sc?st.push(new Tt(ut,ot.source,`layer "${ot.id}" requires a vector source`)):"vector"!==rc||ot["source-layer"]?"raster-dem"===rc&&"hillshade"!==sc&&"color-relief"!==sc?st.push(new Tt(ut,ot.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):"line"!==sc||!ot.paint||!ot.paint["line-gradient"]||"geojson"===rc&&at.lineMetrics||st.push(new Tt(ut,ot,`layer "${ot.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):st.push(new Tt(ut,ot,`layer "${ot.id}" must specify a "source-layer"`)):st.push(new Tt(ut,ot.source,`source "${ot.source}" not found`))}else st.push(new Tt(ut,ot,'missing required property "source"'));return st=st.concat(Ii({key:ut,value:ot,valueSpec:rc.layer,style:at.style,styleSpec:at.styleSpec,validateSpec:at.validateSpec,objectElementValidators:{"*":()=>[],type:()=>at.validateSpec({key:`${ut}.type`,value:ot.type,valueSpec:rc.layer.type,style:at.style,styleSpec:at.styleSpec,validateSpec:at.validateSpec,object:ot,objectKey:"type"}),filter:Vi,layout:at=>Ii({layer:ot,key:at.key,value:at.value,style:at.style,styleSpec:at.styleSpec,validateSpec:at.validateSpec,objectElementValidators:{"*":at=>Di(Vt({layerType:sc},at))}}),paint:at=>Ii({layer:ot,key:at.key,value:at.value,style:at.style,styleSpec:at.styleSpec,validateSpec:at.validateSpec,objectElementValidators:{"*":at=>$i(Vt({layerType:sc},at))}})}})),st}function Ri(at){const st=at.value,ot=at.key,ut=Yn(st);return"string"!==ut?[new Tt(ot,st,`string expected, ${ut} found`)]:[]}const Kd={promoteId:function({key:at,value:st}){if("string"===Yn(st))return Ri({key:at,value:st});{const ot=[];for(const ut in st)ot.push(...Ri({key:`${at}.${ut}`,value:st[ut]}));return ot}}};function Ni(at){const st=at.value,ot=at.key,ut=at.styleSpec,Hl=at.style,rc=at.validateSpec;if(!st.type)return[new Tt(ot,st,'"type" is required')];const sc=ki(st.type);let oc;switch(sc){case"vector":case"raster":return oc=Ii({key:ot,value:st,valueSpec:ut[`source_${sc.replace("-","_")}`],style:at.style,styleSpec:ut,objectElementValidators:Kd,validateSpec:rc}),oc;case"raster-dem":return oc=function(at){var st;const ot=null!==(st=at.sourceName)&&void 0!==st?st:"",ut=at.value,Hl=at.styleSpec,rc=Hl.source_raster_dem,sc=at.style;let oc=[];const _c=Yn(ut);if(void 0===ut)return oc;if("object"!==_c)return oc.push(new Tt("source_raster_dem",ut,`object expected, ${_c} found`)),oc;const wc="custom"===ki(ut.encoding),Sc=["redFactor","greenFactor","blueFactor","baseShift"],iu=at.value.encoding?`"${at.value.encoding}"`:"Default";for(const su in ut)!wc&&Sc.includes(su)?oc.push(new Tt(su,ut[su],`In "${ot}": "${su}" is only valid when "encoding" is set to "custom". ${iu} encoding found`)):rc[su]?oc=oc.concat(at.validateSpec({key:su,value:ut[su],valueSpec:rc[su],validateSpec:at.validateSpec,style:sc,styleSpec:Hl})):oc.push(new Tt(su,ut[su],`unknown property "${su}"`));return oc}({sourceName:ot,value:st,style:at.style,styleSpec:ut,validateSpec:rc}),oc;case"geojson":if(oc=Ii({key:ot,value:st,valueSpec:ut.source_geojson,style:Hl,styleSpec:ut,validateSpec:rc,objectElementValidators:Kd}),st.cluster)for(const at in st.clusterProperties){const[ut,Hl]=st.clusterProperties[at],rc="string"==typeof ut?[ut,["accumulated"],["get",at]]:ut;oc.push(...Bi({key:`${ot}.${at}.map`,value:Hl,expressionContext:"cluster-map"})),oc.push(...Bi({key:`${ot}.${at}.reduce`,value:rc,expressionContext:"cluster-reduce"}))}return oc;case"video":return Ii({key:ot,value:st,valueSpec:ut.source_video,style:Hl,validateSpec:rc,styleSpec:ut});case"image":return Ii({key:ot,value:st,valueSpec:ut.source_image,style:Hl,validateSpec:rc,styleSpec:ut});case"canvas":return[new Tt(ot,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Ti({key:`${ot}.type`,value:st.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Ui(at){const st=at.value,ot=at.styleSpec,ut=ot.light,Hl=at.style;let rc=[];const sc=Yn(st);if(void 0===st)return rc;if("object"!==sc)return rc=rc.concat([new Tt("light",st,`object expected, ${sc} found`)]),rc;for(const oc in st){const sc=oc.match(/^(.*)-transition$/);rc=rc.concat(sc&&ut[sc[1]]&&ut[sc[1]].transition?at.validateSpec({key:oc,value:st[oc],valueSpec:ot.transition,validateSpec:at.validateSpec,style:Hl,styleSpec:ot}):ut[oc]?at.validateSpec({key:oc,value:st[oc],valueSpec:ut[oc],validateSpec:at.validateSpec,style:Hl,styleSpec:ot}):[new Tt(oc,st[oc],`unknown property "${oc}"`)])}return rc}function qi(at){const st=at.value,ot=at.styleSpec,ut=ot.sky,Hl=at.style,rc=Yn(st);if(void 0===st)return[];if("object"!==rc)return[new Tt("sky",st,`object expected, ${rc} found`)];let sc=[];for(const oc in st)sc=sc.concat(ut[oc]?at.validateSpec({key:oc,value:st[oc],valueSpec:ut[oc],style:Hl,styleSpec:ot}):[new Tt(oc,st[oc],`unknown property "${oc}"`)]);return sc}function Gi(at){const st=at.value,ot=at.styleSpec,ut=ot.terrain,Hl=at.style;let rc=[];const sc=Yn(st);if(void 0===st)return rc;if("object"!==sc)return rc=rc.concat([new Tt("terrain",st,`object expected, ${sc} found`)]),rc;for(const oc in st)rc=rc.concat(ut[oc]?at.validateSpec({key:oc,value:st[oc],valueSpec:ut[oc],validateSpec:at.validateSpec,style:Hl,styleSpec:ot}):[new Tt(oc,st[oc],`unknown property "${oc}"`)]);return rc}function Xi(at){let st=[];const ot=at.value,ut=at.key;if(Array.isArray(ot)){const Hl=[],rc=[];for(const sc in ot)ot[sc].id&&Hl.includes(ot[sc].id)&&st.push(new Tt(ut,ot,`all the sprites' ids must be unique, but ${ot[sc].id} is duplicated`)),Hl.push(ot[sc].id),ot[sc].url&&rc.includes(ot[sc].url)&&st.push(new Tt(ut,ot,`all the sprites' URLs must be unique, but ${ot[sc].url} is duplicated`)),rc.push(ot[sc].url),st=st.concat(Ii({key:`${ut}[${sc}]`,value:ot[sc],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:at.validateSpec}));return st}return Ri({key:ut,value:ot})}function Zi(at){return st=at.value,Boolean(st)&&st.constructor===Object?[]:[new Tt(at.key,at.value,`object expected, ${Yn(at.value)} found`)];var st}const Xd={"*":()=>[],array:zi,boolean:function(at){const st=at.value,ot=at.key,ut=Yn(st);return"boolean"!==ut?[new Tt(ot,st,`boolean expected, ${ut} found`)]:[]},number:Pi,color:Ei,constants:Ai,enum:Ti,filter:Vi,function:Ci,layer:Oi,object:Ii,source:Ni,light:Ui,sky:qi,terrain:Gi,projection:function(at){const st=at.value,ot=at.styleSpec,ut=ot.projection,Hl=at.style,rc=Yn(st);if(void 0===st)return[];if("object"!==rc)return[new Tt("projection",st,`object expected, ${rc} found`)];let sc=[];for(const oc in st)sc=sc.concat(ut[oc]?at.validateSpec({key:oc,value:st[oc],valueSpec:ut[oc],style:Hl,styleSpec:ot}):[new Tt(oc,st[oc],`unknown property "${oc}"`)]);return sc},projectionDefinition:function(at){const st=at.key;let ot=at.value;ot=ot instanceof String?ot.valueOf():ot;const ut=Yn(ot);return"array"!==ut||function(at){return Array.isArray(at)&&3===at.length&&"string"==typeof at[0]&&"string"==typeof at[1]&&"number"==typeof at[2]}(ot)||function(at){return!!["interpolate","step","literal"].includes(at[0])}(ot)?["array","string"].includes(ut)?[]:[new Tt(st,ot,`projection expected, invalid type "${ut}" found`)]:[new Tt(st,ot,`projection expected, invalid array ${JSON.stringify(ot)} found`)]},string:Ri,formatted:function(at){return 0===Ri(at).length?[]:Bi(at)},resolvedImage:function(at){return 0===Ri(at).length?[]:Bi(at)},padding:function(at){const st=at.key,ot=at.value;if("array"===Yn(ot)){if(ot.length<1||ot.length>4)return[new Tt(st,ot,`padding requires 1 to 4 values; ${ot.length} values found`)];const ut={type:"number"};let Hl=[];for(let rc=0;rc<ot.length;rc++)Hl=Hl.concat(at.validateSpec({key:`${st}[${rc}]`,value:ot[rc],validateSpec:at.validateSpec,valueSpec:ut}));return Hl}return Pi({key:st,value:ot,valueSpec:{}})},numberArray:function(at){const st=at.key,ot=at.value;if("array"===Yn(ot)){const ut={type:"number"};if(ot.length<1)return[new Tt(st,ot,"array length at least 1 expected, length 0 found")];let Hl=[];for(let rc=0;rc<ot.length;rc++)Hl=Hl.concat(at.validateSpec({key:`${st}[${rc}]`,value:ot[rc],validateSpec:at.validateSpec,valueSpec:ut}));return Hl}return Pi({key:st,value:ot,valueSpec:{}})},colorArray:function(at){const st=at.key,ot=at.value;if("array"===Yn(ot)){if(ot.length<1)return[new Tt(st,ot,"array length at least 1 expected, length 0 found")];let at=[];for(let ut=0;ut<ot.length;ut++)at=at.concat(Ei({key:`${st}[${ut}]`,value:ot[ut]}));return at}return Ei({key:st,value:ot})},variableAnchorOffsetCollection:function(at){const st=at.key,ot=at.value,ut=Yn(ot),Hl=at.styleSpec;if("array"!==ut||ot.length<1||ot.length%2!=0)return[new Tt(st,ot,"variableAnchorOffsetCollection requires a non-empty array of even length")];let rc=[];for(let sc=0;sc<ot.length;sc+=2)rc=rc.concat(Ti({key:`${st}[${sc}]`,value:ot[sc],valueSpec:Hl.layout_symbol["text-anchor"]})),rc=rc.concat(zi({key:`${st}[${sc+1}]`,value:ot[sc+1],valueSpec:{length:2,value:"number"},validateSpec:at.validateSpec,style:at.style,styleSpec:Hl}));return rc},sprite:Xi,state:Zi};function Hi(at){const st=at.value,ot=at.valueSpec,ut=at.styleSpec;return at.validateSpec=Hi,ot.expression&&Hn(ki(st))?Ci(at):ot.expression&&ii(Mi(st))?Bi(at):ot.type&&Xd[ot.type]?Xd[ot.type](at):Ii(Vt({},at,{valueSpec:ot.type?ut[ot.type]:ot}))}function Ki(at){const st=at.value,ot=at.key,ut=Ri(at);return ut.length||(-1===st.indexOf("{fontstack}")&&ut.push(new Tt(ot,st,'"glyphs" url must include a "{fontstack}" token')),-1===st.indexOf("{range}")&&ut.push(new Tt(ot,st,'"glyphs" url must include a "{range}" token'))),ut}function Ji(at,st=hh){let ot=[];return ot=ot.concat(Hi({key:"",value:at,valueSpec:st.$root,styleSpec:st,style:at,validateSpec:Hi,objectElementValidators:{glyphs:Ki,"*":()=>[]}})),at.constants&&(ot=ot.concat(Ai({key:"constants",value:at.constants}))),Qi(ot)}function Wi(at){return function(st){return at({...st,validateSpec:Hi})}}function Qi(at){return[].concat(at).sort(((at,st)=>at.line-st.line))}function ts(at){return function(...st){return Qi(at.apply(this,st))}}Ji.source=ts(Wi(Ni)),Ji.sprite=ts(Wi(Xi)),Ji.glyphs=ts(Wi(Ki)),Ji.light=ts(Wi(Ui)),Ji.sky=ts(Wi(qi)),Ji.terrain=ts(Wi(Gi)),Ji.state=ts(Wi(Zi)),Ji.layer=ts(Wi(Oi)),Ji.filter=ts(Wi(Vi)),Ji.paintProperty=ts(Wi($i)),Ji.layoutProperty=ts(Wi(Di));const Jd=Ji,$d=Jd.light,Ap=Jd.sky,Ep=Jd.paintProperty,Dp=Jd.layoutProperty;function as(at,st){let ot=!1;if(st&&st.length)for(const ut of st)at.fire(new vt(new Error(ut.message))),ot=!0;return ot}class os{constructor(at,st,ot){const ut=this.cells=[];if(at instanceof ArrayBuffer){this.arrayBuffer=at;const Hl=new Int32Array(this.arrayBuffer);at=Hl[0],this.d=(st=Hl[1])+2*(ot=Hl[2]);for(let at=0;at<this.d*this.d;at++){const st=Hl[3+at],ot=Hl[3+at+1];ut.push(st===ot?null:Hl.subarray(st,ot))}const rc=Hl[3+ut.length+1];this.keys=Hl.subarray(Hl[3+ut.length],rc),this.bboxes=Hl.subarray(rc),this.insert=this._insertReadonly}else{this.d=st+2*ot;for(let at=0;at<this.d*this.d;at++)ut.push([]);this.keys=[],this.bboxes=[]}this.n=st,this.extent=at,this.padding=ot,this.scale=st/at,this.uid=0;const Hl=ot/st*at;this.min=-Hl,this.max=at+Hl}insert(at,st,ot,ut,Hl){this._forEachCell(st,ot,ut,Hl,this._insertCell,this.uid++,void 0,void 0),this.keys.push(at),this.bboxes.push(st),this.bboxes.push(ot),this.bboxes.push(ut),this.bboxes.push(Hl)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(at,st,ot,ut,Hl,rc){this.cells[Hl].push(rc)}query(at,st,ot,ut,Hl){const rc=this.min,sc=this.max;if(at<=rc&&st<=rc&&sc<=ot&&sc<=ut&&!Hl)return Array.prototype.slice.call(this.keys);{const rc=[];return this._forEachCell(at,st,ot,ut,this._queryCell,rc,{},Hl),rc}}_queryCell(at,st,ot,ut,Hl,rc,sc,oc){const _c=this.cells[Hl];if(null!==_c){const Hl=this.keys,wc=this.bboxes;for(let Sc=0;Sc<_c.length;Sc++){const iu=_c[Sc];if(void 0===sc[iu]){const _c=4*iu;(oc?oc(wc[_c+0],wc[_c+1],wc[_c+2],wc[_c+3]):at<=wc[_c+2]&&st<=wc[_c+3]&&ot>=wc[_c+0]&&ut>=wc[_c+1])?(sc[iu]=!0,rc.push(Hl[iu])):sc[iu]=!1}}}}_forEachCell(at,st,ot,ut,Hl,rc,sc,oc){const _c=this._convertToCellCoord(at),wc=this._convertToCellCoord(st),Sc=this._convertToCellCoord(ot),iu=this._convertToCellCoord(ut);for(let su=_c;su<=Sc;su++)for(let _c=wc;_c<=iu;_c++){const wc=this.d*_c+su;if((!oc||oc(this._convertFromCellCoord(su),this._convertFromCellCoord(_c),this._convertFromCellCoord(su+1),this._convertFromCellCoord(_c+1)))&&Hl.call(this,at,st,ot,ut,wc,rc,sc,oc))return}}_convertFromCellCoord(at){return(at-this.padding)/this.scale}_convertToCellCoord(at){return Math.max(0,Math.min(this.d-1,Math.floor(at*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const at=this.cells,st=3+this.cells.length+1+1;let ot=0;for(let rc=0;rc<this.cells.length;rc++)ot+=this.cells[rc].length;const ut=new Int32Array(st+ot+this.keys.length+this.bboxes.length);ut[0]=this.extent,ut[1]=this.n,ut[2]=this.padding;let Hl=st;for(let rc=0;rc<at.length;rc++){const st=at[rc];ut[3+rc]=Hl,ut.set(st,Hl),Hl+=st.length}return ut[3+at.length]=Hl,ut.set(this.keys,Hl),Hl+=this.keys.length,ut[3+at.length+1]=Hl,ut.set(this.bboxes,Hl),Hl+=this.bboxes.length,ut.buffer}static serialize(at,st){const ot=at.toArrayBuffer();return st&&st.push(ot),{buffer:ot}}static deserialize(at){return new os(at.buffer)}}const Lp={};function us(at,st,ot={}){if(Lp[at])throw new Error(`${at} is already registered.`);Object.defineProperty(st,"_classRegistryKey",{value:at,writeable:!1}),Lp[at]={klass:st,omit:ot.omit||[],shallow:ot.shallow||[]}}us("Object",Object),us("Set",Set),us("TransferableGridIndex",os),us("Color",Pe),us("Error",Error),us("AJAXError",pt),us("ResolvedImage",Re),us("StylePropertyFunction",ui),us("StyleExpression",ni,{omit:["_evaluator"]}),us("ZoomDependentExpression",oi),us("ZoomConstantExpression",ai),us("CompoundExpression",Vn,{omit:["_evaluate"]});for(const zg in Yd)Yd[zg]._classRegistryKey||us(`Expression_${zg}`,Yd[zg]);function cs(at){return at&&"undefined"!=typeof ArrayBuffer&&(at instanceof ArrayBuffer||at.constructor&&"ArrayBuffer"===at.constructor.name)}function hs(at){return at.$name||at.constructor._classRegistryKey}function ps(at){return!function(at){if(null===at||"object"!=typeof at)return!1;const st=hs(at);return!(!st||"Object"===st)}(at)&&(null==at||"boolean"==typeof at||"number"==typeof at||"string"==typeof at||at instanceof Boolean||at instanceof Number||at instanceof String||at instanceof Date||at instanceof RegExp||at instanceof Blob||at instanceof Error||cs(at)||J(at)||ArrayBuffer.isView(at)||at instanceof ImageData)}function fs(at,st){if(ps(at))return(cs(at)||J(at))&&st&&st.push(at),ArrayBuffer.isView(at)&&st&&st.push(at.buffer),at instanceof ImageData&&st&&st.push(at.data.buffer),at;if(Array.isArray(at)){const ot=[];for(const ut of at)ot.push(fs(ut,st));return ot}if("object"!=typeof at)throw new Error("can't serialize object of type "+typeof at);const ot=hs(at);if(!ot)throw new Error(`can't serialize object of unregistered class ${at.constructor.name}`);if(!Lp[ot])throw new Error(`${ot} is not registered.`);const{klass:ut}=Lp[ot],Hl=ut.serialize?ut.serialize(at,st):{};if(ut.serialize){if(st&&Hl===st[st.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const ut in at){if(!at.hasOwnProperty(ut))continue;if(Lp[ot].omit.indexOf(ut)>=0)continue;const rc=at[ut];Hl[ut]=Lp[ot].shallow.indexOf(ut)>=0?rc:fs(rc,st)}at instanceof Error&&(Hl.message=at.message)}if(Hl.$name)throw new Error("$name property is reserved for worker serialization logic.");return"Object"!==ot&&(Hl.$name=ot),Hl}function ds(at){if(ps(at))return at;if(Array.isArray(at))return at.map(ds);if("object"!=typeof at)throw new Error("can't deserialize object of type "+typeof at);const st=hs(at)||"Object";if(!Lp[st])throw new Error(`can't deserialize unregistered class ${st}`);const{klass:ot}=Lp[st];if(!ot)throw new Error(`can't deserialize unregistered class ${st}`);if(ot.deserialize)return ot.deserialize(at);const ut=Object.create(ot.prototype);for(const Hl of Object.keys(at)){if("$name"===Hl)continue;const ot=at[Hl];ut[Hl]=Lp[st].shallow.indexOf(Hl)>=0?ot:ds(ot)}return ut}class ys{constructor(){this.first=!0}update(at,st){const ot=Math.floor(at);return this.first?(this.first=!1,this.lastIntegerZoom=ot,this.lastIntegerZoomTime=0,this.lastZoom=at,this.lastFloorZoom=ot,!0):(this.lastFloorZoom>ot?(this.lastIntegerZoom=ot+1,this.lastIntegerZoomTime=st):this.lastFloorZoom<ot&&(this.lastIntegerZoom=ot,this.lastIntegerZoomTime=st),at!==this.lastZoom&&(this.lastZoom=at,this.lastFloorZoom=ot,!0))}}const Np={"Latin-1 Supplement":at=>at>=128&&at<=255,"Hangul Jamo":at=>at>=4352&&at<=4607,Khmer:at=>at>=6016&&at<=6143,"General Punctuation":at=>at>=8192&&at<=8303,"Letterlike Symbols":at=>at>=8448&&at<=8527,"Number Forms":at=>at>=8528&&at<=8591,"Miscellaneous Technical":at=>at>=8960&&at<=9215,"Control Pictures":at=>at>=9216&&at<=9279,"Optical Character Recognition":at=>at>=9280&&at<=9311,"Enclosed Alphanumerics":at=>at>=9312&&at<=9471,"Geometric Shapes":at=>at>=9632&&at<=9727,"Miscellaneous Symbols":at=>at>=9728&&at<=9983,"Miscellaneous Symbols and Arrows":at=>at>=11008&&at<=11263,"Ideographic Description Characters":at=>at>=12272&&at<=12287,"CJK Symbols and Punctuation":at=>at>=12288&&at<=12351,Hiragana:at=>at>=12352&&at<=12447,Katakana:at=>at>=12448&&at<=12543,Kanbun:at=>at>=12688&&at<=12703,"CJK Strokes":at=>at>=12736&&at<=12783,"Enclosed CJK Letters and Months":at=>at>=12800&&at<=13055,"CJK Compatibility":at=>at>=13056&&at<=13311,"Yijing Hexagram Symbols":at=>at>=19904&&at<=19967,"CJK Unified Ideographs":at=>at>=19968&&at<=40959,"Hangul Syllables":at=>at>=44032&&at<=55215,"Private Use Area":at=>at>=57344&&at<=63743,"Vertical Forms":at=>at>=65040&&at<=65055,"CJK Compatibility Forms":at=>at>=65072&&at<=65103,"Small Form Variants":at=>at>=65104&&at<=65135,"Halfwidth and Fullwidth Forms":at=>at>=65280&&at<=65519};function gs(at){for(const st of at)if(Ss(st.charCodeAt(0)))return!0;return!1}function xs(at){for(const st of at)if(!ws(st.charCodeAt(0)))return!1;return!0}function vs(at){const st=at.map((at=>{try{return new RegExp(`\\p{sc=${at}}`,"u").source}catch(at){return null}})).filter((at=>at));return new RegExp(st.join("|"),"u")}const Rp=vs(["Arab","Dupl","Mong","Ougr","Syrc"]);function ws(at){return!Rp.test(String.fromCodePoint(at))}const Op=vs(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Ss(at){return!(746!==at&&747!==at&&(at<4352||!(Np["CJK Compatibility Forms"](at)&&!(at>=65097&&at<=65103)||Np["CJK Compatibility"](at)||Np["CJK Strokes"](at)||!(!Np["CJK Symbols and Punctuation"](at)||at>=12296&&at<=12305||at>=12308&&at<=12319||12336===at)||Np["Enclosed CJK Letters and Months"](at)||Np["Ideographic Description Characters"](at)||Np.Kanbun(at)||Np.Katakana(at)&&12540!==at||!(!Np["Halfwidth and Fullwidth Forms"](at)||65288===at||65289===at||65293===at||at>=65306&&at<=65310||65339===at||65341===at||65343===at||at>=65371&&at<=65503||65507===at||at>=65512&&at<=65519)||!(!Np["Small Form Variants"](at)||at>=65112&&at<=65118||at>=65123&&at<=65126)||Np["Vertical Forms"](at)||Np["Yijing Hexagram Symbols"](at)||/\p{sc=Cans}/u.test(String.fromCodePoint(at))||/\p{sc=Hang}/u.test(String.fromCodePoint(at))||Op.test(String.fromCodePoint(at)))))}function As(at){return!(Ss(at)||function(at){return!!(Np["Latin-1 Supplement"](at)&&(167===at||169===at||174===at||177===at||188===at||189===at||190===at||215===at||247===at)||Np["General Punctuation"](at)&&(8214===at||8224===at||8225===at||8240===at||8241===at||8251===at||8252===at||8258===at||8263===at||8264===at||8265===at||8273===at)||Np["Letterlike Symbols"](at)||Np["Number Forms"](at)||Np["Miscellaneous Technical"](at)&&(at>=8960&&at<=8967||at>=8972&&at<=8991||at>=8996&&at<=9e3||9003===at||at>=9085&&at<=9114||at>=9150&&at<=9165||9167===at||at>=9169&&at<=9179||at>=9186&&at<=9215)||Np["Control Pictures"](at)&&9251!==at||Np["Optical Character Recognition"](at)||Np["Enclosed Alphanumerics"](at)||Np["Geometric Shapes"](at)||Np["Miscellaneous Symbols"](at)&&!(at>=9754&&at<=9759)||Np["Miscellaneous Symbols and Arrows"](at)&&(at>=11026&&at<=11055||at>=11088&&at<=11097||at>=11192&&at<=11243)||Np["CJK Symbols and Punctuation"](at)||Np.Katakana(at)||Np["Private Use Area"](at)||Np["CJK Compatibility Forms"](at)||Np["Small Form Variants"](at)||Np["Halfwidth and Fullwidth Forms"](at)||8734===at||8756===at||8757===at||at>=9984&&at<=10087||at>=10102&&at<=10131||65532===at||65533===at)}(at))}const Fp=vs(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Ms(at){return Fp.test(String.fromCodePoint(at))}function Is(at,st){return!(!st&&Ms(at)||at>=2304&&at<=3583||at>=3840&&at<=4255||Np.Khmer(at))}function zs(at){for(const st of at)if(Ms(st.charCodeAt(0)))return!0;return!1}const jp=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(at){this.pluginStatus=at.pluginStatus,this.pluginURL=at.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(at){if(jp.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=at.applyArabicShaping,this.processBidirectionalText=at.processBidirectionalText,this.processStyledBidirectionalText=at.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return null!=this.applyArabicShaping&&null!=this.processBidirectionalText&&null!=this.processStyledBidirectionalText}getRTLTextPluginStatus(){return this.pluginStatus}syncState(at,st){return e(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if("loading"!==at.pluginStatus)return this.setState(at),at;const ot=at.pluginURL,ut=new Promise((at=>{this.loadScriptResolve=at}));st(ot);const Hl=new Promise((at=>setTimeout((()=>at()),this.TIMEOUT)));if(yield Promise.race([ut,Hl]),this.isParsed()){const at={pluginStatus:"loaded",pluginURL:ot};return this.setState(at),at}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${ot}`)}))}};class Cs{constructor(at,st){this.zoom=at,st?(this.now=st.now||0,this.fadeDuration=st.fadeDuration||0,this.zoomHistory=st.zoomHistory||new ys,this.transition=st.transition||{},this.globalState=st.globalState||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new ys,this.transition={},this.globalState={})}isSupportedScript(at){return function(at,st){for(const ot of at)if(!Is(ot.charCodeAt(0),st))return!1;return!0}(at,"loaded"===jp.getRTLTextPluginStatus())}crossFadingFactor(){return 0===this.fadeDuration?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const at=this.zoom,st=at-Math.floor(at),ot=this.crossFadingFactor();return at>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:st+(1-st)*ot}:{fromScale:.5,toScale:1,t:1-(1-ot)*st}}}class Bs{constructor(at,st){this.property=at,this.value=st,this.expression=function(at,st){if(Hn(at))return new ui(at,st);if(ii(at)){const ot=li(at,st);if("error"===ot.result)throw new Error(ot.value.map((at=>`${at.key}: ${at.message}`)).join(", "));return ot.value}{let ot=at;return"color"===st.type&&"string"==typeof at?ot=Pe.parse(at):"padding"!==st.type||"number"!=typeof at&&!Array.isArray(at)?"numberArray"!==st.type||"number"!=typeof at&&!Array.isArray(at)?"colorArray"!==st.type||"string"!=typeof at&&!Array.isArray(at)?"variableAnchorOffsetCollection"===st.type&&Array.isArray(at)?ot=Oe.parse(at):"projectionDefinition"===st.type&&"string"==typeof at&&(ot=je.parse(at)):ot=Le.parse(at):ot=Fe.parse(at):ot=Ve.parse(at),{globalStateRefs:new Set,kind:"constant",evaluate:()=>ot}}}(void 0===st?at.specification.default:st,at.specification)}isDataDriven(){return"source"===this.expression.kind||"composite"===this.expression.kind}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(at,st,ot){return this.property.possiblyEvaluate(this,at,st,ot)}}class Es{constructor(at){this.property=at,this.value=new Bs(at,void 0)}transitioned(at,st){return new Vs(this.property,this.value,st,j({},at.transition,this.transition),at.now)}untransitioned(){return new Vs(this.property,this.value,null,{},0)}}class Ts{constructor(at){this._properties=at,this._values=Object.create(at.defaultTransitionablePropertyValues)}getValue(at){return G(this._values[at].value.value)}setValue(at,st){Object.prototype.hasOwnProperty.call(this._values,at)||(this._values[at]=new Es(this._values[at].property)),this._values[at].value=new Bs(this._values[at].property,null===st?void 0:G(st))}getTransition(at){return G(this._values[at].transition)}setTransition(at,st){Object.prototype.hasOwnProperty.call(this._values,at)||(this._values[at]=new Es(this._values[at].property)),this._values[at].transition=G(st)||void 0}serialize(){const at={};for(const st of Object.keys(this._values)){const ot=this.getValue(st);void 0!==ot&&(at[st]=ot);const ut=this.getTransition(st);void 0!==ut&&(at[`${st}-transition`]=ut)}return at}transitioned(at,st){const ot=new Fs(this._properties);for(const ut of Object.keys(this._values))ot._values[ut]=this._values[ut].transitioned(at,st._values[ut]);return ot}untransitioned(){const at=new Fs(this._properties);for(const st of Object.keys(this._values))at._values[st]=this._values[st].untransitioned();return at}}class Vs{constructor(at,st,ot,ut,Hl){this.property=at,this.value=st,this.begin=Hl+ut.delay||0,this.end=this.begin+ut.duration||0,at.specification.transition&&(ut.delay||ut.duration)&&(this.prior=ot)}possiblyEvaluate(at,st,ot){const ut=at.now||0,Hl=this.value.possiblyEvaluate(at,st,ot),rc=this.prior;if(rc){if(ut>this.end)return this.prior=null,Hl;if(this.value.isDataDriven())return this.prior=null,Hl;if(ut<this.begin)return rc.possiblyEvaluate(at,st,ot);{const sc=(ut-this.begin)/(this.end-this.begin);return this.property.interpolate(rc.possiblyEvaluate(at,st,ot),Hl,L(sc))}}return Hl}}class Fs{constructor(at){this._properties=at,this._values=Object.create(at.defaultTransitioningPropertyValues)}possiblyEvaluate(at,st,ot){const ut=new Ds(this._properties);for(const Hl of Object.keys(this._values))ut._values[Hl]=this._values[Hl].possiblyEvaluate(at,st,ot);return ut}hasTransition(){for(const at of Object.keys(this._values))if(this._values[at].prior)return!0;return!1}}class Ls{constructor(at){this._properties=at,this._values=Object.create(at.defaultPropertyValues)}hasValue(at){return void 0!==this._values[at].value}getValue(at){return G(this._values[at].value)}setValue(at,st){this._values[at]=new Bs(this._values[at].property,null===st?void 0:G(st))}serialize(){const at={};for(const st of Object.keys(this._values)){const ot=this.getValue(st);void 0!==ot&&(at[st]=ot)}return at}possiblyEvaluate(at,st,ot){const ut=new Ds(this._properties);for(const Hl of Object.keys(this._values))ut._values[Hl]=this._values[Hl].possiblyEvaluate(at,st,ot);return ut}}class $s{constructor(at,st,ot){this.property=at,this.value=st,this.parameters=ot}isConstant(){return"constant"===this.value.kind}constantOr(at){return"constant"===this.value.kind?this.value.value:at}evaluate(at,st,ot,ut){return this.property.evaluate(this.value,this.parameters,at,st,ot,ut)}}class Ds{constructor(at){this._properties=at,this._values=Object.create(at.defaultPossiblyEvaluatedValues)}get(at){return this._values[at]}}class Os{constructor(at){this.specification=at}possiblyEvaluate(at,st){if(at.isDataDriven())throw new Error("Value should not be data driven");return at.expression.evaluate(st)}interpolate(at,st,ot){const ut=Rd[this.specification.type];return ut?ut(at,st,ot):at}}class Rs{constructor(at,st){this.specification=at,this.overrides=st}possiblyEvaluate(at,st,ot,ut){return new $s(this,"constant"===at.expression.kind||"camera"===at.expression.kind?{kind:"constant",value:at.expression.evaluate(st,null,{},ot,ut)}:at.expression,st)}interpolate(at,st,ot){if("constant"!==at.value.kind||"constant"!==st.value.kind)return at;if(void 0===at.value.value||void 0===st.value.value)return new $s(this,{kind:"constant",value:void 0},at.parameters);const ut=Rd[this.specification.type];if(ut){const Hl=ut(at.value.value,st.value.value,ot);return new $s(this,{kind:"constant",value:Hl},at.parameters)}return at}evaluate(at,st,ot,ut,Hl,rc){return"constant"===at.kind?at.value:at.evaluate(st,ot,ut,Hl,rc)}}class js extends Rs{possiblyEvaluate(at,st,ot,ut){if(void 0===at.value)return new $s(this,{kind:"constant",value:void 0},st);if("constant"===at.expression.kind){const Hl=at.expression.evaluate(st,null,{},ot,ut),rc="resolvedImage"===at.property.specification.type&&"string"!=typeof Hl?Hl.name:Hl,sc=this._calculate(rc,rc,rc,st);return new $s(this,{kind:"constant",value:sc},st)}if("camera"===at.expression.kind){const ot=this._calculate(at.expression.evaluate({zoom:st.zoom-1}),at.expression.evaluate({zoom:st.zoom}),at.expression.evaluate({zoom:st.zoom+1}),st);return new $s(this,{kind:"constant",value:ot},st)}return new $s(this,at.expression,st)}evaluate(at,st,ot,ut,Hl,rc){if("source"===at.kind){const sc=at.evaluate(st,ot,ut,Hl,rc);return this._calculate(sc,sc,sc,st)}return"composite"===at.kind?this._calculate(at.evaluate({zoom:Math.floor(st.zoom)-1},ot,ut),at.evaluate({zoom:Math.floor(st.zoom)},ot,ut),at.evaluate({zoom:Math.floor(st.zoom)+1},ot,ut),st):at.value}_calculate(at,st,ot,ut){return ut.zoom>ut.zoomHistory.lastIntegerZoom?{from:at,to:st}:{from:ot,to:st}}interpolate(at){return at}}class Ns{constructor(at){this.specification=at}possiblyEvaluate(at,st,ot,ut){if(void 0!==at.value){if("constant"===at.expression.kind){const Hl=at.expression.evaluate(st,null,{},ot,ut);return this._calculate(Hl,Hl,Hl,st)}return this._calculate(at.expression.evaluate(new Cs(Math.floor(st.zoom-1),st)),at.expression.evaluate(new Cs(Math.floor(st.zoom),st)),at.expression.evaluate(new Cs(Math.floor(st.zoom+1),st)),st)}}_calculate(at,st,ot,ut){return ut.zoom>ut.zoomHistory.lastIntegerZoom?{from:at,to:st}:{from:ot,to:st}}interpolate(at){return at}}class Us{constructor(at){this.specification=at}possiblyEvaluate(at,st,ot,ut){return!!at.expression.evaluate(st,null,{},ot,ut)}interpolate(){return!1}}class qs{constructor(at){this.properties=at,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const st in at){const ot=at[st];ot.specification.overridable&&this.overridableProperties.push(st);const ut=this.defaultPropertyValues[st]=new Bs(ot,void 0),Hl=this.defaultTransitionablePropertyValues[st]=new Es(ot);this.defaultTransitioningPropertyValues[st]=Hl.untransitioned(),this.defaultPossiblyEvaluatedValues[st]=ut.possiblyEvaluate({})}}}us("DataDrivenProperty",Rs),us("DataConstantProperty",Os),us("CrossFadedDataDrivenProperty",js),us("CrossFadedProperty",Ns),us("ColorRampProperty",Us);const Up="-transition";class Xs extends bt{constructor(at,st){if(super(),this.id=at.id,this.type=at.type,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},"custom"!==at.type&&(this.metadata=at.metadata,this.minzoom=at.minzoom,this.maxzoom=at.maxzoom,"background"!==at.type&&(this.source=at.source,this.sourceLayer=at["source-layer"],this.filter=at.filter,this._featureFilter=di(at.filter)),st.layout&&(this._unevaluatedLayout=new Ls(st.layout)),st.paint)){this._transitionablePaint=new Ts(st.paint);for(const st in at.paint)this.setPaintProperty(st,at.paint[st],{validate:!1});for(const st in at.layout)this.setLayoutProperty(st,at.layout[st],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Ds(st.paint)}}setFilter(at){this.filter=at,this._featureFilter=di(at)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(at){return"visibility"===at?this.visibility:this._unevaluatedLayout.getValue(at)}getLayoutAffectingGlobalStateRefs(){const at=new Set;if(this._unevaluatedLayout)for(const st in this._unevaluatedLayout._values){const ot=this._unevaluatedLayout._values[st];for(const st of ot.getGlobalStateRefs())at.add(st)}for(const st of this._featureFilter.getGlobalStateRefs())at.add(st);return at}setLayoutProperty(at,st,ot={}){null!=st&&this._validate(Dp,`layers.${this.id}.layout.${at}`,at,st,ot)||("visibility"!==at?this._unevaluatedLayout.setValue(at,st):this.visibility=st)}getPaintProperty(at){return at.endsWith(Up)?this._transitionablePaint.getTransition(at.slice(0,-11)):this._transitionablePaint.getValue(at)}setPaintProperty(at,st,ot={}){if(null!=st&&this._validate(Ep,`layers.${this.id}.paint.${at}`,at,st,ot))return!1;if(at.endsWith(Up))return this._transitionablePaint.setTransition(at.slice(0,-11),st||void 0),!1;{const ot=this._transitionablePaint._values[at],ut="cross-faded-data-driven"===ot.property.specification["property-type"],Hl=ot.value.isDataDriven(),rc=ot.value;this._transitionablePaint.setValue(at,st),this._handleSpecialPaintPropertyUpdate(at);const sc=this._transitionablePaint._values[at].value;return sc.isDataDriven()||Hl||ut||this._handleOverridablePaintPropertyUpdate(at,rc,sc)}}_handleSpecialPaintPropertyUpdate(at){}_handleOverridablePaintPropertyUpdate(at,st,ot){return!1}isHidden(at){return!!(this.minzoom&&at<this.minzoom)||!!(this.maxzoom&&at>=this.maxzoom)||"none"===this.visibility}updateTransitions(at){this._transitioningPaint=this._transitionablePaint.transitioned(at,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(at,st){at.getCrossfadeParameters&&(this._crossfadeParameters=at.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(at,void 0,st)),this.paint=this._transitioningPaint.possiblyEvaluate(at,void 0,st)}serialize(){const at={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(at.layout=at.layout||{},at.layout.visibility=this.visibility),q(at,((at,st)=>!(void 0===at||"layout"===st&&!Object.keys(at).length||"paint"===st&&!Object.keys(at).length)))}_validate(at,st,ot,ut,Hl={}){return(!Hl||!1!==Hl.validate)&&as(this,at.call(Jd,{key:st,layerType:this.type,objectKey:ot,value:ut,styleSpec:hh,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const at in this.paint._values){const st=this.paint.get(at);if(st instanceof $s&&Gn(st.property.specification)&&("source"===st.value.kind||"composite"===st.value.kind)&&st.value.isStateDependent)return!0}return!1}}const Vp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Ys{constructor(at,st){this._structArray=at,this._pos1=st*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Hs{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(at,st){return at._trim(),st&&(at.isTransferred=!0,st.push(at.arrayBuffer)),{length:at.length,arrayBuffer:at.arrayBuffer}}static deserialize(at){const st=Object.create(this.prototype);return st.arrayBuffer=at.arrayBuffer,st.length=at.length,st.capacity=at.arrayBuffer.byteLength/st.bytesPerElement,st._refreshViews(),st}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(at){this.reserve(at),this.length=at}reserve(at){if(at>this.capacity){this.capacity=Math.max(at,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const st=this.uint8;this._refreshViews(),st&&this.uint8.set(st)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Ks(at,st=1){let ot=0,ut=0;return{members:at.map((at=>{const Hl=Vp[at.type].BYTES_PER_ELEMENT,rc=ot=Js(ot,Math.max(st,Hl)),sc=at.components||1;return ut=Math.max(ut,Hl),ot+=Hl*sc,{name:at.name,type:at.type,components:sc,offset:rc}})),size:Js(ot,Math.max(ut,st)),alignment:st}}function Js(at,st){return Math.ceil(at/st)*st}class Ws extends Hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(at,st){const ot=this.length;return this.resize(ot+1),this.emplace(ot,at,st)}emplace(at,st,ot){const ut=2*at;return this.int16[ut+0]=st,this.int16[ut+1]=ot,at}}Ws.prototype.bytesPerElement=4,us("StructArrayLayout2i4",Ws);class Qs extends Hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(at,st,ot){const ut=this.length;return this.resize(ut+1),this.emplace(ut,at,st,ot)}emplace(at,st,ot,ut){const Hl=3*at;return this.int16[Hl+0]=st,this.int16[Hl+1]=ot,this.int16[Hl+2]=ut,at}}Qs.prototype.bytesPerElement=6,us("StructArrayLayout3i6",Qs);class ta extends Hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(at,st,ot,ut){const Hl=this.length;return this.resize(Hl+1),this.emplace(Hl,at,st,ot,ut)}emplace(at,st,ot,ut,Hl){const rc=4*at;return this.int16[rc+0]=st,this.int16[rc+1]=ot,this.int16[rc+2]=ut,this.int16[rc+3]=Hl,at}}ta.prototype.bytesPerElement=8,us("StructArrayLayout4i8",ta);class ea extends Hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(at,st,ot,ut,Hl,rc){const sc=this.length;return this.resize(sc+1),this.emplace(sc,at,st,ot,ut,Hl,rc)}emplace(at,st,ot,ut,Hl,rc,sc){const oc=6*at;return this.int16[oc+0]=st,this.int16[oc+1]=ot,this.int16[oc+2]=ut,this.int16[oc+3]=Hl,this.int16[oc+4]=rc,this.int16[oc+5]=sc,at}}ea.prototype.bytesPerElement=12,us("StructArrayLayout2i4i12",ea);class ra extends Hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(at,st,ot,ut,Hl,rc){const sc=this.length;return this.resize(sc+1),this.emplace(sc,at,st,ot,ut,Hl,rc)}emplace(at,st,ot,ut,Hl,rc,sc){const oc=4*at,_c=8*at;return this.int16[oc+0]=st,this.int16[oc+1]=ot,this.uint8[_c+4]=ut,this.uint8[_c+5]=Hl,this.uint8[_c+6]=rc,this.uint8[_c+7]=sc,at}}ra.prototype.bytesPerElement=8,us("StructArrayLayout2i4ub8",ra);class na extends Hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(at,st){const ot=this.length;return this.resize(ot+1),this.emplace(ot,at,st)}emplace(at,st,ot){const ut=2*at;return this.float32[ut+0]=st,this.float32[ut+1]=ot,at}}na.prototype.bytesPerElement=8,us("StructArrayLayout2f8",na);class ia extends Hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(at,st,ot,ut,Hl,rc,sc,oc,_c,wc){const Sc=this.length;return this.resize(Sc+1),this.emplace(Sc,at,st,ot,ut,Hl,rc,sc,oc,_c,wc)}emplace(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc){const iu=10*at;return this.uint16[iu+0]=st,this.uint16[iu+1]=ot,this.uint16[iu+2]=ut,this.uint16[iu+3]=Hl,this.uint16[iu+4]=rc,this.uint16[iu+5]=sc,this.uint16[iu+6]=oc,this.uint16[iu+7]=_c,this.uint16[iu+8]=wc,this.uint16[iu+9]=Sc,at}}ia.prototype.bytesPerElement=20,us("StructArrayLayout10ui20",ia);class sa extends Hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu){const su=this.length;return this.resize(su+1),this.emplace(su,at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu)}emplace(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su){const lu=12*at;return this.int16[lu+0]=st,this.int16[lu+1]=ot,this.int16[lu+2]=ut,this.int16[lu+3]=Hl,this.uint16[lu+4]=rc,this.uint16[lu+5]=sc,this.uint16[lu+6]=oc,this.uint16[lu+7]=_c,this.int16[lu+8]=wc,this.int16[lu+9]=Sc,this.int16[lu+10]=iu,this.int16[lu+11]=su,at}}sa.prototype.bytesPerElement=24,us("StructArrayLayout4i4ui4i24",sa);class aa extends Hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(at,st,ot){const ut=this.length;return this.resize(ut+1),this.emplace(ut,at,st,ot)}emplace(at,st,ot,ut){const Hl=3*at;return this.float32[Hl+0]=st,this.float32[Hl+1]=ot,this.float32[Hl+2]=ut,at}}aa.prototype.bytesPerElement=12,us("StructArrayLayout3f12",aa);class oa extends Hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(at){const st=this.length;return this.resize(st+1),this.emplace(st,at)}emplace(at,st){return this.uint32[1*at+0]=st,at}}oa.prototype.bytesPerElement=4,us("StructArrayLayout1ul4",oa);class la extends Hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(at,st,ot,ut,Hl,rc,sc,oc,_c){const wc=this.length;return this.resize(wc+1),this.emplace(wc,at,st,ot,ut,Hl,rc,sc,oc,_c)}emplace(at,st,ot,ut,Hl,rc,sc,oc,_c,wc){const Sc=10*at,iu=5*at;return this.int16[Sc+0]=st,this.int16[Sc+1]=ot,this.int16[Sc+2]=ut,this.int16[Sc+3]=Hl,this.int16[Sc+4]=rc,this.int16[Sc+5]=sc,this.uint32[iu+3]=oc,this.uint16[Sc+8]=_c,this.uint16[Sc+9]=wc,at}}la.prototype.bytesPerElement=20,us("StructArrayLayout6i1ul2ui20",la);class ua extends Hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(at,st,ot,ut,Hl,rc){const sc=this.length;return this.resize(sc+1),this.emplace(sc,at,st,ot,ut,Hl,rc)}emplace(at,st,ot,ut,Hl,rc,sc){const oc=6*at;return this.int16[oc+0]=st,this.int16[oc+1]=ot,this.int16[oc+2]=ut,this.int16[oc+3]=Hl,this.int16[oc+4]=rc,this.int16[oc+5]=sc,at}}ua.prototype.bytesPerElement=12,us("StructArrayLayout2i2i2i12",ua);class ca extends Hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(at,st,ot,ut,Hl){const rc=this.length;return this.resize(rc+1),this.emplace(rc,at,st,ot,ut,Hl)}emplace(at,st,ot,ut,Hl,rc){const sc=4*at,oc=8*at;return this.float32[sc+0]=st,this.float32[sc+1]=ot,this.float32[sc+2]=ut,this.int16[oc+6]=Hl,this.int16[oc+7]=rc,at}}ca.prototype.bytesPerElement=16,us("StructArrayLayout2f1f2i16",ca);class ha extends Hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(at,st,ot,ut,Hl,rc){const sc=this.length;return this.resize(sc+1),this.emplace(sc,at,st,ot,ut,Hl,rc)}emplace(at,st,ot,ut,Hl,rc,sc){const oc=16*at,_c=4*at,wc=8*at;return this.uint8[oc+0]=st,this.uint8[oc+1]=ot,this.float32[_c+1]=ut,this.float32[_c+2]=Hl,this.int16[wc+6]=rc,this.int16[wc+7]=sc,at}}ha.prototype.bytesPerElement=16,us("StructArrayLayout2ub2f2i16",ha);class pa extends Hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(at,st,ot){const ut=this.length;return this.resize(ut+1),this.emplace(ut,at,st,ot)}emplace(at,st,ot,ut){const Hl=3*at;return this.uint16[Hl+0]=st,this.uint16[Hl+1]=ot,this.uint16[Hl+2]=ut,at}}pa.prototype.bytesPerElement=6,us("StructArrayLayout3ui6",pa);class fa extends Hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu,pu){const mu=this.length;return this.resize(mu+1),this.emplace(mu,at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu,pu)}emplace(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu,pu,mu){const gu=24*at,Au=12*at,yu=48*at;return this.int16[gu+0]=st,this.int16[gu+1]=ot,this.uint16[gu+2]=ut,this.uint16[gu+3]=Hl,this.uint32[Au+2]=rc,this.uint32[Au+3]=sc,this.uint32[Au+4]=oc,this.uint16[gu+10]=_c,this.uint16[gu+11]=wc,this.uint16[gu+12]=Sc,this.float32[Au+7]=iu,this.float32[Au+8]=su,this.uint8[yu+36]=lu,this.uint8[yu+37]=cu,this.uint8[yu+38]=uu,this.uint32[Au+10]=pu,this.int16[gu+22]=mu,at}}fa.prototype.bytesPerElement=48,us("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",fa);class da extends Hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu,pu,mu,gu,Au,yu,_u,xu,Su,Du,Lu,$u,hh){const ed=this.length;return this.resize(ed+1),this.emplace(ed,at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu,pu,mu,gu,Au,yu,_u,xu,Su,Du,Lu,$u,hh)}emplace(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu,pu,mu,gu,Au,yu,_u,xu,Su,Du,Lu,$u,hh,ed){const td=32*at,id=16*at;return this.int16[td+0]=st,this.int16[td+1]=ot,this.int16[td+2]=ut,this.int16[td+3]=Hl,this.int16[td+4]=rc,this.int16[td+5]=sc,this.int16[td+6]=oc,this.int16[td+7]=_c,this.uint16[td+8]=wc,this.uint16[td+9]=Sc,this.uint16[td+10]=iu,this.uint16[td+11]=su,this.uint16[td+12]=lu,this.uint16[td+13]=cu,this.uint16[td+14]=uu,this.uint16[td+15]=pu,this.uint16[td+16]=mu,this.uint16[td+17]=gu,this.uint16[td+18]=Au,this.uint16[td+19]=yu,this.uint16[td+20]=_u,this.uint16[td+21]=xu,this.uint16[td+22]=Su,this.uint32[id+12]=Du,this.float32[id+13]=Lu,this.float32[id+14]=$u,this.uint16[td+30]=hh,this.uint16[td+31]=ed,at}}da.prototype.bytesPerElement=64,us("StructArrayLayout8i15ui1ul2f2ui64",da);class ya extends Hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(at){const st=this.length;return this.resize(st+1),this.emplace(st,at)}emplace(at,st){return this.float32[1*at+0]=st,at}}ya.prototype.bytesPerElement=4,us("StructArrayLayout1f4",ya);class ma extends Hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(at,st,ot){const ut=this.length;return this.resize(ut+1),this.emplace(ut,at,st,ot)}emplace(at,st,ot,ut){const Hl=3*at;return this.uint16[6*at+0]=st,this.float32[Hl+1]=ot,this.float32[Hl+2]=ut,at}}ma.prototype.bytesPerElement=12,us("StructArrayLayout1ui2f12",ma);class ga extends Hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(at,st,ot){const ut=this.length;return this.resize(ut+1),this.emplace(ut,at,st,ot)}emplace(at,st,ot,ut){const Hl=4*at;return this.uint32[2*at+0]=st,this.uint16[Hl+2]=ot,this.uint16[Hl+3]=ut,at}}ga.prototype.bytesPerElement=8,us("StructArrayLayout1ul2ui8",ga);class xa extends Hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(at,st){const ot=this.length;return this.resize(ot+1),this.emplace(ot,at,st)}emplace(at,st,ot){const ut=2*at;return this.uint16[ut+0]=st,this.uint16[ut+1]=ot,at}}xa.prototype.bytesPerElement=4,us("StructArrayLayout2ui4",xa);class va extends Hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(at){const st=this.length;return this.resize(st+1),this.emplace(st,at)}emplace(at,st){return this.uint16[1*at+0]=st,at}}va.prototype.bytesPerElement=2,us("StructArrayLayout1ui2",va);class ba extends Hs{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(at,st,ot,ut){const Hl=this.length;return this.resize(Hl+1),this.emplace(Hl,at,st,ot,ut)}emplace(at,st,ot,ut,Hl){const rc=4*at;return this.float32[rc+0]=st,this.float32[rc+1]=ot,this.float32[rc+2]=ut,this.float32[rc+3]=Hl,at}}ba.prototype.bytesPerElement=16,us("StructArrayLayout4f16",ba);class wa extends Ys{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new rc(this.anchorPointX,this.anchorPointY)}}wa.prototype.size=20;class _a extends la{get(at){return new wa(this,at)}}us("CollisionBoxArray",_a);class Sa extends Ys{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(at){this._structArray.uint8[this._pos1+37]=at}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(at){this._structArray.uint8[this._pos1+38]=at}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(at){this._structArray.uint32[this._pos4+10]=at}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Sa.prototype.size=48;class Aa extends fa{get(at){return new Sa(this,at)}}us("PlacedSymbolArray",Aa);class ka extends Ys{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(at){this._structArray.uint32[this._pos4+12]=at}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ka.prototype.size=64;class Ma extends da{get(at){return new ka(this,at)}}us("SymbolInstanceArray",Ma);class Ia extends ya{getoffsetX(at){return this.float32[1*at+0]}}us("GlyphOffsetArray",Ia);class za extends Qs{getx(at){return this.int16[3*at+0]}gety(at){return this.int16[3*at+1]}gettileUnitDistanceFromAnchor(at){return this.int16[3*at+2]}}us("SymbolLineVertexArray",za);class Pa extends Ys{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}Pa.prototype.size=12;class Ca extends ma{get(at){return new Pa(this,at)}}us("TextAnchorOffsetArray",Ca);class Ba extends Ys{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}Ba.prototype.size=8;class Ea extends ga{get(at){return new Ba(this,at)}}us("FeatureIndexArray",Ea);class Ta extends Ws{}class Va extends Ws{}class Fa extends Ws{}class La extends ea{}class $a extends ra{}class Da extends na{}class Oa extends ia{}class Ra extends sa{}class ja extends aa{}class Na extends oa{}class Ua extends ua{}class qa extends ha{}class Ga extends pa{}class Xa extends xa{}const Gp=Ks([{name:"a_pos",components:2,type:"Int16"}],4),{members:Zp}=Gp;class Ha{constructor(at=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=at}prepareSegment(at,st,ot,ut){const Hl=this.segments[this.segments.length-1];return at>Ha.MAX_VERTEX_ARRAY_LENGTH&&Z(`Max vertices per segment is ${Ha.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${at}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Ha.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!Hl||Hl.vertexLength+at>Ha.MAX_VERTEX_ARRAY_LENGTH||Hl.sortKey!==ut?this.createNewSegment(st,ot,ut):Hl}createNewSegment(at,st,ot){const ut={vertexOffset:at.length,primitiveOffset:st.length,vertexLength:0,primitiveLength:0,vaos:{}};return void 0!==ot&&(ut.sortKey=ot),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(ut),ut}getOrCreateLatestSegment(at,st,ot){return this.prepareSegment(0,at,st,ot)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const at of this.segments)for(const st in at.vaos)at.vaos[st].destroy()}static simpleSegment(at,st,ot,ut){return new Ha([{vertexOffset:at,primitiveOffset:st,vertexLength:ot,primitiveLength:ut,vaos:{},sortKey:0}])}}function Ka(at,st){return 256*(at=O(Math.floor(at),0,255))+O(Math.floor(st),0,255)}Ha.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,us("SegmentVector",Ha);const Hp=Ks([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Wp,qp,Yp,Qp={exports:{}},Kp={exports:{}},Xp={exports:{}},Jp=function(){if(Yp)return Qp.exports;Yp=1;var at=(Wp||(Wp=1,Kp.exports=function(at,st){var ot,ut,Hl,rc,sc,oc,_c,wc;for(ut=at.length-(ot=3&at.length),Hl=st,sc=3432918353,oc=461845907,wc=0;wc<ut;)_c=255&at.charCodeAt(wc)|(255&at.charCodeAt(++wc))<<8|(255&at.charCodeAt(++wc))<<16|(255&at.charCodeAt(++wc))<<24,++wc,Hl=27492+(65535&(rc=5*(65535&(Hl=(Hl^=_c=(65535&(_c=(_c=(65535&_c)*sc+(((_c>>>16)*sc&65535)<<16)&4294967295)<<15|_c>>>17))*oc+(((_c>>>16)*oc&65535)<<16)&4294967295)<<13|Hl>>>19))+((5*(Hl>>>16)&65535)<<16)&4294967295))+((58964+(rc>>>16)&65535)<<16);switch(_c=0,ot){case 3:_c^=(255&at.charCodeAt(wc+2))<<16;case 2:_c^=(255&at.charCodeAt(wc+1))<<8;case 1:Hl^=_c=(65535&(_c=(_c=(65535&(_c^=255&at.charCodeAt(wc)))*sc+(((_c>>>16)*sc&65535)<<16)&4294967295)<<15|_c>>>17))*oc+(((_c>>>16)*oc&65535)<<16)&4294967295}return Hl^=at.length,Hl=2246822507*(65535&(Hl^=Hl>>>16))+((2246822507*(Hl>>>16)&65535)<<16)&4294967295,Hl=3266489909*(65535&(Hl^=Hl>>>13))+((3266489909*(Hl>>>16)&65535)<<16)&4294967295,(Hl^=Hl>>>16)>>>0}),Kp.exports),st=(qp||(qp=1,Xp.exports=function(at,st){for(var ot,ut=at.length,Hl=st^ut,rc=0;ut>=4;)ot=1540483477*(65535&(ot=255&at.charCodeAt(rc)|(255&at.charCodeAt(++rc))<<8|(255&at.charCodeAt(++rc))<<16|(255&at.charCodeAt(++rc))<<24))+((1540483477*(ot>>>16)&65535)<<16),Hl=1540483477*(65535&Hl)+((1540483477*(Hl>>>16)&65535)<<16)^(ot=1540483477*(65535&(ot^=ot>>>24))+((1540483477*(ot>>>16)&65535)<<16)),ut-=4,++rc;switch(ut){case 3:Hl^=(255&at.charCodeAt(rc+2))<<16;case 2:Hl^=(255&at.charCodeAt(rc+1))<<8;case 1:Hl=1540483477*(65535&(Hl^=255&at.charCodeAt(rc)))+((1540483477*(Hl>>>16)&65535)<<16)}return Hl=1540483477*(65535&(Hl^=Hl>>>13))+((1540483477*(Hl>>>16)&65535)<<16),(Hl^=Hl>>>15)>>>0}),Xp.exports);return Qp.exports=at,Qp.exports.murmur3=at,Qp.exports.murmur2=st,Qp.exports}(),$p=r(Jp);class ao{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(at,st,ot,ut){this.ids.push(oo(at)),this.positions.push(st,ot,ut)}getPositions(at){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const st=oo(at);let ot=0,ut=this.ids.length-1;for(;ot<ut;){const at=ot+ut>>1;this.ids[at]>=st?ut=at:ot=at+1}const Hl=[];for(;this.ids[ot]===st;)Hl.push({index:this.positions[3*ot],start:this.positions[3*ot+1],end:this.positions[3*ot+2]}),ot++;return Hl}static serialize(at,st){const ot=new Float64Array(at.ids),ut=new Uint32Array(at.positions);return lo(ot,ut,0,ot.length-1),st&&st.push(ot.buffer,ut.buffer),{ids:ot,positions:ut}}static deserialize(at){const st=new ao;return st.ids=at.ids,st.positions=at.positions,st.indexed=!0,st}}function oo(at){const st=+at;return!isNaN(st)&&st<=Number.MAX_SAFE_INTEGER?st:$p(String(at))}function lo(at,st,ot,ut){for(;ot<ut;){const Hl=at[ot+ut>>1];let rc=ot-1,sc=ut+1;for(;;){do{rc++}while(at[rc]<Hl);do{sc--}while(at[sc]>Hl);if(rc>=sc)break;uo(at,rc,sc),uo(st,3*rc,3*sc),uo(st,3*rc+1,3*sc+1),uo(st,3*rc+2,3*sc+2)}sc-ot<ut-sc?(lo(at,st,ot,sc),ot=sc+1):(lo(at,st,sc+1,ut),ut=sc)}}function uo(at,st,ot){const ut=at[st];at[st]=at[ot],at[ot]=ut}us("FeaturePositionMap",ao);class co{constructor(at,st){this.gl=at.gl,this.location=st}}class ho extends co{constructor(at,st){super(at,st),this.current=0}set(at){this.current!==at&&(this.current=at,this.gl.uniform1f(this.location,at))}}class po extends co{constructor(at,st){super(at,st),this.current=[0,0,0,0]}set(at){at[0]===this.current[0]&&at[1]===this.current[1]&&at[2]===this.current[2]&&at[3]===this.current[3]||(this.current=at,this.gl.uniform4f(this.location,at[0],at[1],at[2],at[3]))}}class fo extends co{constructor(at,st){super(at,st),this.current=Pe.transparent}set(at){at.r===this.current.r&&at.g===this.current.g&&at.b===this.current.b&&at.a===this.current.a||(this.current=at,this.gl.uniform4f(this.location,at.r,at.g,at.b,at.a))}}const em=new Float32Array(16);function mo(at){return[Ka(255*at.r,255*at.g),Ka(255*at.b,255*at.a)]}class go{constructor(at,st,ot){this.value=at,this.uniformNames=st.map((at=>`u_${at}`)),this.type=ot}setUniform(at,st,ot){at.set(ot.constantOr(this.value))}getBinding(at,st,ot){return"color"===this.type?new fo(at,st):new ho(at,st)}}class xo{constructor(at,st){this.uniformNames=st.map((at=>`u_${at}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(at,st){this.pixelRatioFrom=st.pixelRatio,this.pixelRatioTo=at.pixelRatio,this.patternFrom=st.tlbr,this.patternTo=at.tlbr}setUniform(at,st,ot,ut){const Hl="u_pattern_to"===ut?this.patternTo:"u_pattern_from"===ut?this.patternFrom:"u_pixel_ratio_to"===ut?this.pixelRatioTo:"u_pixel_ratio_from"===ut?this.pixelRatioFrom:null;Hl&&at.set(Hl)}getBinding(at,st,ot){return"u_pattern"===ot.substr(0,9)?new po(at,st):new ho(at,st)}}class vo{constructor(at,st,ot,ut){this.expression=at,this.type=ot,this.maxValue=0,this.paintVertexAttributes=st.map((at=>({name:`a_${at}`,type:"Float32",components:"color"===ot?2:1,offset:0}))),this.paintVertexArray=new ut}populatePaintArray(at,st,ot,ut,Hl){const rc=this.paintVertexArray.length,sc=this.expression.evaluate(new Cs(0),st,{},ut,[],Hl);this.paintVertexArray.resize(at),this._setPaintValue(rc,at,sc)}updatePaintArray(at,st,ot,ut){const Hl=this.expression.evaluate({zoom:0},ot,ut);this._setPaintValue(at,st,Hl)}_setPaintValue(at,st,ot){if("color"===this.type){const ut=mo(ot);for(let ot=at;ot<st;ot++)this.paintVertexArray.emplace(ot,ut[0],ut[1])}else{for(let ut=at;ut<st;ut++)this.paintVertexArray.emplace(ut,ot);this.maxValue=Math.max(this.maxValue,Math.abs(ot))}}upload(at){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=at.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class bo{constructor(at,st,ot,ut,Hl,rc){this.expression=at,this.uniformNames=st.map((at=>`u_${at}_t`)),this.type=ot,this.useIntegerZoom=ut,this.zoom=Hl,this.maxValue=0,this.paintVertexAttributes=st.map((at=>({name:`a_${at}`,type:"Float32",components:"color"===ot?4:2,offset:0}))),this.paintVertexArray=new rc}populatePaintArray(at,st,ot,ut,Hl){const rc=this.expression.evaluate(new Cs(this.zoom),st,{},ut,[],Hl),sc=this.expression.evaluate(new Cs(this.zoom+1),st,{},ut,[],Hl),oc=this.paintVertexArray.length;this.paintVertexArray.resize(at),this._setPaintValue(oc,at,rc,sc)}updatePaintArray(at,st,ot,ut){const Hl=this.expression.evaluate({zoom:this.zoom},ot,ut),rc=this.expression.evaluate({zoom:this.zoom+1},ot,ut);this._setPaintValue(at,st,Hl,rc)}_setPaintValue(at,st,ot,ut){if("color"===this.type){const Hl=mo(ot),rc=mo(ut);for(let ot=at;ot<st;ot++)this.paintVertexArray.emplace(ot,Hl[0],Hl[1],rc[0],rc[1])}else{for(let Hl=at;Hl<st;Hl++)this.paintVertexArray.emplace(Hl,ot,ut);this.maxValue=Math.max(this.maxValue,Math.abs(ot),Math.abs(ut))}}upload(at){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=at.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(at,st){const ot=this.useIntegerZoom?Math.floor(st.zoom):st.zoom,ut=O(this.expression.interpolationFactor(ot,this.zoom,this.zoom+1),0,1);at.set(ut)}getBinding(at,st,ot){return new ho(at,st)}}class wo{constructor(at,st,ot,ut,Hl,rc){this.expression=at,this.type=st,this.useIntegerZoom=ot,this.zoom=ut,this.layerId=rc,this.zoomInPaintVertexArray=new Hl,this.zoomOutPaintVertexArray=new Hl}populatePaintArray(at,st,ot){const ut=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(at),this.zoomOutPaintVertexArray.resize(at),this._setPaintValues(ut,at,st.patterns&&st.patterns[this.layerId],ot)}updatePaintArray(at,st,ot,ut,Hl){this._setPaintValues(at,st,ot.patterns&&ot.patterns[this.layerId],Hl)}_setPaintValues(at,st,ot,ut){if(!ut||!ot)return;const{min:Hl,mid:rc,max:sc}=ot,oc=ut[Hl],_c=ut[rc],wc=ut[sc];if(oc&&_c&&wc)for(let Sc=at;Sc<st;Sc++)this.zoomInPaintVertexArray.emplace(Sc,_c.tl[0],_c.tl[1],_c.br[0],_c.br[1],oc.tl[0],oc.tl[1],oc.br[0],oc.br[1],_c.pixelRatio,oc.pixelRatio),this.zoomOutPaintVertexArray.emplace(Sc,_c.tl[0],_c.tl[1],_c.br[0],_c.br[1],wc.tl[0],wc.tl[1],wc.br[0],wc.br[1],_c.pixelRatio,wc.pixelRatio)}upload(at){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=at.createVertexBuffer(this.zoomInPaintVertexArray,Hp.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=at.createVertexBuffer(this.zoomOutPaintVertexArray,Hp.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class _o{constructor(at,st,ot){this.binders={},this._buffers=[];const ut=[];for(const Hl in at.paint._values){if(!ot(Hl))continue;const rc=at.paint.get(Hl);if(!(rc instanceof $s&&Gn(rc.property.specification)))continue;const sc=Ao(Hl,at.type),oc=rc.value,_c=rc.property.specification.type,wc=rc.property.useIntegerZoom,Sc=rc.property.specification["property-type"],iu="cross-faded"===Sc||"cross-faded-data-driven"===Sc;if("constant"===oc.kind)this.binders[Hl]=iu?new xo(oc.value,sc):new go(oc.value,sc,_c),ut.push(`/u_${Hl}`);else if("source"===oc.kind||iu){const ot=ko(Hl,_c,"source");this.binders[Hl]=iu?new wo(oc,_c,wc,st,ot,at.id):new vo(oc,sc,_c,ot),ut.push(`/a_${Hl}`)}else{const at=ko(Hl,_c,"composite");this.binders[Hl]=new bo(oc,sc,_c,wc,st,at),ut.push(`/z_${Hl}`)}}this.cacheKey=ut.sort().join("")}getMaxValue(at){const st=this.binders[at];return st instanceof vo||st instanceof bo?st.maxValue:0}populatePaintArrays(at,st,ot,ut,Hl){for(const rc in this.binders){const sc=this.binders[rc];(sc instanceof vo||sc instanceof bo||sc instanceof wo)&&sc.populatePaintArray(at,st,ot,ut,Hl)}}setConstantPatternPositions(at,st){for(const ot in this.binders){const ut=this.binders[ot];ut instanceof xo&&ut.setConstantPatternPositions(at,st)}}updatePaintArrays(at,st,ot,ut,Hl){let rc=!1;for(const sc in at){const oc=st.getPositions(sc);for(const st of oc){const oc=ot.feature(st.index);for(const ot in this.binders){const _c=this.binders[ot];if((_c instanceof vo||_c instanceof bo||_c instanceof wo)&&!0===_c.expression.isStateDependent){const wc=ut.paint.get(ot);_c.expression=wc.value,_c.updatePaintArray(st.start,st.end,oc,at[sc],Hl),rc=!0}}}}return rc}defines(){const at=[];for(const st in this.binders){const ot=this.binders[st];(ot instanceof go||ot instanceof xo)&&at.push(...ot.uniformNames.map((at=>`#define HAS_UNIFORM_${at}`)))}return at}getBinderAttributes(){const at=[];for(const st in this.binders){const ot=this.binders[st];if(ot instanceof vo||ot instanceof bo)for(let st=0;st<ot.paintVertexAttributes.length;st++)at.push(ot.paintVertexAttributes[st].name);else if(ot instanceof wo)for(let st=0;st<Hp.members.length;st++)at.push(Hp.members[st].name)}return at}getBinderUniforms(){const at=[];for(const st in this.binders){const ot=this.binders[st];if(ot instanceof go||ot instanceof xo||ot instanceof bo)for(const st of ot.uniformNames)at.push(st)}return at}getPaintVertexBuffers(){return this._buffers}getUniforms(at,st){const ot=[];for(const ut in this.binders){const Hl=this.binders[ut];if(Hl instanceof go||Hl instanceof xo||Hl instanceof bo)for(const rc of Hl.uniformNames)if(st[rc]){const sc=Hl.getBinding(at,st[rc],rc);ot.push({name:rc,property:ut,binding:sc})}}return ot}setUniforms(at,st,ot,ut){for(const{name:Hl,property:rc,binding:sc}of st)this.binders[rc].setUniform(sc,ut,ot.get(rc),Hl)}updatePaintBuffers(at){this._buffers=[];for(const st in this.binders){const ot=this.binders[st];if(at&&ot instanceof wo){const st=2===at.fromScale?ot.zoomInPaintVertexBuffer:ot.zoomOutPaintVertexBuffer;st&&this._buffers.push(st)}else(ot instanceof vo||ot instanceof bo)&&ot.paintVertexBuffer&&this._buffers.push(ot.paintVertexBuffer)}}upload(at){for(const st in this.binders){const ot=this.binders[st];(ot instanceof vo||ot instanceof bo||ot instanceof wo)&&ot.upload(at)}this.updatePaintBuffers()}destroy(){for(const at in this.binders){const st=this.binders[at];(st instanceof vo||st instanceof bo||st instanceof wo)&&st.destroy()}}}class So{constructor(at,st,ot=()=>!0){this.programConfigurations={};for(const ut of at)this.programConfigurations[ut.id]=new _o(ut,st,ot);this.needsUpload=!1,this._featureMap=new ao,this._bufferOffset=0}populatePaintArrays(at,st,ot,ut,Hl,rc){for(const sc in this.programConfigurations)this.programConfigurations[sc].populatePaintArrays(at,st,ut,Hl,rc);void 0!==st.id&&this._featureMap.add(st.id,ot,this._bufferOffset,at),this._bufferOffset=at,this.needsUpload=!0}updatePaintArrays(at,st,ot,ut){for(const Hl of ot)this.needsUpload=this.programConfigurations[Hl.id].updatePaintArrays(at,this._featureMap,st,Hl,ut)||this.needsUpload}get(at){return this.programConfigurations[at]}upload(at){if(this.needsUpload){for(const st in this.programConfigurations)this.programConfigurations[st].upload(at);this.needsUpload=!1}}destroy(){for(const at in this.programConfigurations)this.programConfigurations[at].destroy()}}function Ao(at,st){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[at]||[at.replace(`${st}-`,"").replace(/-/g,"_")]}function ko(at,st,ot){const ut={color:{source:na,composite:ba},number:{source:ya,composite:na}},Hl=function(at){return{"line-pattern":{source:Oa,composite:Oa},"fill-pattern":{source:Oa,composite:Oa},"fill-extrusion-pattern":{source:Oa,composite:Oa}}[at]}(at);return Hl&&Hl[ot]||ut[st][ot]}us("ConstantBinder",go),us("CrossFadedConstantBinder",xo),us("SourceExpressionBinder",vo),us("CrossFadedCompositeBinder",wo),us("CompositeExpressionBinder",bo),us("ProgramConfiguration",_o,{omit:["_buffers"]}),us("ProgramConfigurationSet",So);const tm=Math.pow(2,14)-1,im=-tm-1;function zo(at){const st=cu/at.extent,ot=at.loadGeometry();for(let ut=0;ut<ot.length;ut++){const at=ot[ut];for(let ot=0;ot<at.length;ot++){const ut=at[ot],Hl=Math.round(ut.x*st),rc=Math.round(ut.y*st);ut.x=O(Hl,im,tm),ut.y=O(rc,im,tm),(Hl<ut.x||Hl>ut.x+1||rc<ut.y||rc>ut.y+1)&&Z("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return ot}function Po(at,st){return{type:at.type,id:at.id,properties:at.properties,geometry:st?zo(at):[]}}const nm=-32768;function Bo(at,st,ot,ut,Hl){at.emplaceBack(nm+8*st+ut,nm+8*ot+Hl)}class Eo{constructor(at){this.zoom=at.zoom,this.globalState=at.globalState,this.overscaling=at.overscaling,this.layers=at.layers,this.layerIds=this.layers.map((at=>at.id)),this.index=at.index,this.hasPattern=!1,this.layoutVertexArray=new Va,this.indexArray=new Ga,this.segments=new Ha,this.programConfigurations=new So(at.layers,at.zoom),this.stateDependentLayerIds=this.layers.filter((at=>at.isStateDependent())).map((at=>at.id))}populate(at,st,ot){const ut=this.layers[0],Hl=[];let rc=null,sc=!1,oc="heatmap"===ut.type;if("circle"===ut.type){const at=ut;rc=at.layout.get("circle-sort-key"),sc=!rc.isConstant(),oc=oc||"map"===at.paint.get("circle-pitch-alignment")}const _c=oc?st.subdivisionGranularity.circle:1;for(const{feature:wc,id:Sc,index:iu,sourceLayerIndex:su}of at){const at=this.layers[0]._featureFilter.needGeometry,st=Po(wc,at);if(!this.layers[0]._featureFilter.filter(new Cs(this.zoom,{globalState:this.globalState}),st,ot))continue;const ut=sc?rc.evaluate(st,{},ot):void 0,oc={id:Sc,properties:wc.properties,type:wc.type,sourceLayerIndex:su,index:iu,geometry:at?st.geometry:zo(wc),patterns:{},sortKey:ut};Hl.push(oc)}sc&&Hl.sort(((at,st)=>at.sortKey-st.sortKey));for(const wc of Hl){const{geometry:ut,index:Hl,sourceLayerIndex:rc}=wc,sc=at[Hl].feature;this.addFeature(wc,ut,Hl,ot,_c),st.featureIndex.insert(sc,ut,Hl,rc,this.index)}}update(at,st,ot){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(at,st,this.stateDependentLayers,ot)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(at){this.uploaded||(this.layoutVertexBuffer=at.createVertexBuffer(this.layoutVertexArray,Zp),this.indexBuffer=at.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(at),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(at,st,ot,ut,Hl=1){let rc;switch(Hl){case 1:rc=[0,7];break;case 3:rc=[0,2,5,7];break;case 5:rc=[0,1,3,4,6,7];break;case 7:rc=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${Hl}; valid values are 1, 3, 5, 7.`)}const sc=rc.length;for(const oc of st)for(const st of oc){const ot=st.x,ut=st.y;if(ot<0||ot>=cu||ut<0||ut>=cu)continue;const Hl=this.segments.prepareSegment(sc*sc,this.layoutVertexArray,this.indexArray,at.sortKey),oc=Hl.vertexLength;for(let at=0;at<sc;at++)for(let st=0;st<sc;st++)Bo(this.layoutVertexArray,ot,ut,rc[st],rc[at]);for(let at=0;at<sc-1;at++)for(let st=0;st<sc-1;st++){const ot=oc+at*sc+st,ut=oc+(at+1)*sc+st;this.indexArray.emplaceBack(ot,ut+1,ot+1),this.indexArray.emplaceBack(ot,ut,ut+1)}Hl.vertexLength+=sc*sc,Hl.primitiveLength+=(sc-1)*(sc-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,at,ot,{},ut)}}function To(at,st){for(let ot=0;ot<at.length;ot++)if(No(st,at[ot]))return!0;for(let ot=0;ot<st.length;ot++)if(No(at,st[ot]))return!0;return!!$o(at,st)}function Vo(at,st,ot){return!!No(at,st)||!!Oo(st,at,ot)}function Fo(at,st){if(1===at.length)return jo(st,at[0]);for(let ot=0;ot<st.length;ot++){const ut=st[ot];for(let st=0;st<ut.length;st++)if(No(at,ut[st]))return!0}for(let ot=0;ot<at.length;ot++)if(jo(st,at[ot]))return!0;for(let ot=0;ot<st.length;ot++)if($o(at,st[ot]))return!0;return!1}function Lo(at,st,ot){if(at.length>1){if($o(at,st))return!0;for(let ut=0;ut<st.length;ut++)if(Oo(st[ut],at,ot))return!0}for(let ut=0;ut<at.length;ut++)if(Oo(at[ut],st,ot))return!0;return!1}function $o(at,st){if(0===at.length||0===st.length)return!1;for(let ot=0;ot<at.length-1;ot++){const ut=at[ot],Hl=at[ot+1];for(let at=0;at<st.length-1;at++)if(Do(ut,Hl,st[at],st[at+1]))return!0}return!1}function Do(at,st,ot,ut){return Y(at,ot,ut)!==Y(st,ot,ut)&&Y(at,st,ot)!==Y(at,st,ut)}function Oo(at,st,ot){const ut=ot*ot;if(1===st.length)return at.distSqr(st[0])<ut;for(let Hl=1;Hl<st.length;Hl++)if(Ro(at,st[Hl-1],st[Hl])<ut)return!0;return!1}function Ro(at,st,ot){const ut=st.distSqr(ot);if(0===ut)return at.distSqr(st);const Hl=((at.x-st.x)*(ot.x-st.x)+(at.y-st.y)*(ot.y-st.y))/ut;return at.distSqr(Hl<0?st:Hl>1?ot:ot.sub(st)._mult(Hl)._add(st))}function jo(at,st){let ot,ut,Hl,rc=!1;for(let sc=0;sc<at.length;sc++){ot=at[sc];for(let at=0,sc=ot.length-1;at<ot.length;sc=at++)ut=ot[at],Hl=ot[sc],ut.y>st.y!=Hl.y>st.y&&st.x<(Hl.x-ut.x)*(st.y-ut.y)/(Hl.y-ut.y)+ut.x&&(rc=!rc)}return rc}function No(at,st){let ot=!1;for(let ut=0,Hl=at.length-1;ut<at.length;Hl=ut++){const rc=at[ut],sc=at[Hl];rc.y>st.y!=sc.y>st.y&&st.x<(sc.x-rc.x)*(st.y-rc.y)/(sc.y-rc.y)+rc.x&&(ot=!ot)}return ot}function Uo(at,st,ot){const ut=ot[0],Hl=ot[2];if(at.x<ut.x&&st.x<ut.x||at.x>Hl.x&&st.x>Hl.x||at.y<ut.y&&st.y<ut.y||at.y>Hl.y&&st.y>Hl.y)return!1;const rc=Y(at,st,ot[0]);return rc!==Y(at,st,ot[1])||rc!==Y(at,st,ot[2])||rc!==Y(at,st,ot[3])}function qo(at,st,ot){const ut=st.paint.get(at).value;return"constant"===ut.kind?ut.value:ot.programConfigurations.get(st.id).getMaxValue(at)}function Go(at){return Math.sqrt(at[0]*at[0]+at[1]*at[1])}function Xo(at,st,ot,ut,Hl){if(!st[0]&&!st[1])return at;const sc=rc.convert(st)._mult(Hl);"viewport"===ot&&sc._rotate(-ut);const oc=[];for(let rc=0;rc<at.length;rc++)oc.push(at[rc].sub(sc));return oc}let rm,am;us("CircleBucket",Eo,{omit:["layers"]});var sm={get paint(){return am=am||new qs({"circle-radius":new Rs(hh.paint_circle["circle-radius"]),"circle-color":new Rs(hh.paint_circle["circle-color"]),"circle-blur":new Rs(hh.paint_circle["circle-blur"]),"circle-opacity":new Rs(hh.paint_circle["circle-opacity"]),"circle-translate":new Os(hh.paint_circle["circle-translate"]),"circle-translate-anchor":new Os(hh.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Os(hh.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Os(hh.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Rs(hh.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Rs(hh.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Rs(hh.paint_circle["circle-stroke-opacity"])})},get layout(){return rm=rm||new qs({"circle-sort-key":new Rs(hh.layout_circle["circle-sort-key"])})}};class Ko extends Xs{constructor(at){super(at,sm)}createBucket(at){return new Eo(at)}queryRadius(at){const st=at;return qo("circle-radius",this,st)+qo("circle-stroke-width",this,st)+Go(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:at,feature:st,featureState:ot,geometry:ut,transform:Hl,pixelsToTileUnits:rc,unwrappedTileID:sc,getElevation:oc}){const _c=Xo(at,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-Hl.bearingInRadians,rc),wc=this.paint.get("circle-radius").evaluate(st,ot)+this.paint.get("circle-stroke-width").evaluate(st,ot),Sc="map"===this.paint.get("circle-pitch-alignment"),iu=Sc?_c:function(at,st,ot,ut){return at.map((at=>Jo(at,st,ot,ut)))}(_c,Hl,sc,oc),su=Sc?wc*rc:wc;for(const lu of ut)for(const at of lu){const st=Sc?at:Jo(at,Hl,sc,oc);let ot=su;const ut=Hl.projectTileCoordinates(at.x,at.y,sc,oc).signedDistanceFromCamera;if("viewport"===this.paint.get("circle-pitch-scale")&&"map"===this.paint.get("circle-pitch-alignment")?ot*=ut/Hl.cameraToCenterDistance:"map"===this.paint.get("circle-pitch-scale")&&"viewport"===this.paint.get("circle-pitch-alignment")&&(ot*=Hl.cameraToCenterDistance/ut),Vo(iu,st,ot))return!0}return!1}}function Jo(at,st,ot,ut){const Hl=st.projectTileCoordinates(at.x,at.y,ot,ut).point;return new rc((.5*Hl.x+.5)*st.width,(.5*-Hl.y+.5)*st.height)}class Wo extends Eo{}let om;us("HeatmapBucket",Wo,{omit:["layers"]});var lm={get paint(){return om=om||new qs({"heatmap-radius":new Rs(hh.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Rs(hh.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Os(hh.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Us(hh.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Os(hh.paint_heatmap["heatmap-opacity"])})}};function el(at,{width:st,height:ot},ut,Hl){if(Hl){if(Hl instanceof Uint8ClampedArray)Hl=new Uint8Array(Hl.buffer);else if(Hl.length!==st*ot*ut)throw new RangeError(`mismatched image size. expected: ${Hl.length} but got: ${st*ot*ut}`)}else Hl=new Uint8Array(st*ot*ut);return at.width=st,at.height=ot,at.data=Hl,at}function rl(at,{width:st,height:ot},ut){if(st===at.width&&ot===at.height)return;const Hl=el({},{width:st,height:ot},ut);nl(at,Hl,{x:0,y:0},{x:0,y:0},{width:Math.min(at.width,st),height:Math.min(at.height,ot)},ut),at.width=st,at.height=ot,at.data=Hl.data}function nl(at,st,ot,ut,Hl,rc){if(0===Hl.width||0===Hl.height)return st;if(Hl.width>at.width||Hl.height>at.height||ot.x>at.width-Hl.width||ot.y>at.height-Hl.height)throw new RangeError("out of range source coordinates for image copy");if(Hl.width>st.width||Hl.height>st.height||ut.x>st.width-Hl.width||ut.y>st.height-Hl.height)throw new RangeError("out of range destination coordinates for image copy");const sc=at.data,oc=st.data;if(sc===oc)throw new Error("srcData equals dstData, so image is already copied");for(let _c=0;_c<Hl.height;_c++){const wc=((ot.y+_c)*at.width+ot.x)*rc,Sc=((ut.y+_c)*st.width+ut.x)*rc;for(let at=0;at<Hl.width*rc;at++)oc[Sc+at]=sc[wc+at]}return st}class il{constructor(at,st){el(this,at,1,st)}resize(at){rl(this,at,1)}clone(){return new il({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(at,st,ot,ut,Hl){nl(at,st,ot,ut,Hl,1)}}class sl{constructor(at,st){el(this,at,4,st)}resize(at){rl(this,at,4)}replace(at,st){st?this.data.set(at):this.data=at instanceof Uint8ClampedArray?new Uint8Array(at.buffer):at}clone(){return new sl({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(at,st,ot,ut,Hl){nl(at,st,ot,ut,Hl,4)}setPixel(at,st,ot){const ut=4*(at*this.width+st);this.data[ut+0]=Math.round(255*ot.r/ot.a),this.data[ut+1]=Math.round(255*ot.g/ot.a),this.data[ut+2]=Math.round(255*ot.b/ot.a),this.data[ut+3]=Math.round(255*ot.a)}}function al(at){const st={},ot=at.resolution||256,ut=at.clips?at.clips.length:1,Hl=at.image||new sl({width:ot,height:ut});if(Math.log(ot)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${ot}`);const s=(ut,rc,sc)=>{st[at.evaluationKey]=sc;const oc=at.expression.evaluate(st);Hl.setPixel(ut/4/ot,rc/4,oc)};if(at.clips)for(let rc=0,sc=0;rc<ut;++rc,sc+=4*ot)for(let st=0,ut=0;st<ot;st++,ut+=4){const Hl=st/(ot-1),{start:oc,end:_c}=at.clips[rc];s(sc,ut,oc*(1-Hl)+_c*Hl)}else for(let rc=0,sc=0;rc<ot;rc++,sc+=4)s(0,sc,rc/(ot-1));return Hl}us("AlphaImage",il),us("RGBAImage",sl);const cm="big-fb";class ll extends Xs{createBucket(at){return new Wo(at)}constructor(at){super(at,lm),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(at){"heatmap-color"===at&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=al({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(cm)&&this.heatmapFbos.delete(cm)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return 0!==this.paint.get("heatmap-opacity")&&"none"!==this.visibility}}let um;var hm={get paint(){return um=um||new qs({"hillshade-illumination-direction":new Os(hh.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new Os(hh.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new Os(hh.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Os(hh.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Os(hh.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Os(hh.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Os(hh.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new Os(hh.paint_hillshade["hillshade-method"])})}};class hl extends Xs{constructor(at){super(at,hm),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let at=this.paint.get("hillshade-illumination-direction").values,st=this.paint.get("hillshade-illumination-altitude").values,ot=this.paint.get("hillshade-highlight-color").values,ut=this.paint.get("hillshade-shadow-color").values;const Hl=Math.max(at.length,st.length,ot.length,ut.length);at=at.concat(Array(Hl-at.length).fill(at.at(-1))),st=st.concat(Array(Hl-st.length).fill(st.at(-1))),ot=ot.concat(Array(Hl-ot.length).fill(ot.at(-1))),ut=ut.concat(Array(Hl-ut.length).fill(ut.at(-1)));const rc=st.map(nt);return{directionRadians:at.map(nt),altitudeRadians:rc,shadowColor:ut,highlightColor:ot}}hasOffscreenPass(){return 0!==this.paint.get("hillshade-exaggeration")&&"none"!==this.visibility}}let dm;var pm={get paint(){return dm=dm||new qs({"color-relief-opacity":new Os(hh["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new Us(hh["paint_color-relief"]["color-relief-color"])})}};class dl{constructor(at,st,ot,ut){this.context=at,this.format=ot,this.texture=at.gl.createTexture(),this.update(st,ut)}update(at,st,ot){const{width:ut,height:Hl}=at,rc=!(this.size&&this.size[0]===ut&&this.size[1]===Hl||ot),{context:sc}=this,{gl:oc}=sc;if(this.useMipmap=Boolean(st&&st.useMipmap),oc.bindTexture(oc.TEXTURE_2D,this.texture),sc.pixelStoreUnpackFlipY.set(!1),sc.pixelStoreUnpack.set(1),sc.pixelStoreUnpackPremultiplyAlpha.set(this.format===oc.RGBA&&(!st||!1!==st.premultiply)),rc)this.size=[ut,Hl],at instanceof HTMLImageElement||at instanceof HTMLCanvasElement||at instanceof HTMLVideoElement||at instanceof ImageData||J(at)?oc.texImage2D(oc.TEXTURE_2D,0,this.format,this.format,oc.UNSIGNED_BYTE,at):oc.texImage2D(oc.TEXTURE_2D,0,this.format,ut,Hl,0,this.format,oc.UNSIGNED_BYTE,at.data);else{const{x:st,y:rc}=ot||{x:0,y:0};at instanceof HTMLImageElement||at instanceof HTMLCanvasElement||at instanceof HTMLVideoElement||at instanceof ImageData||J(at)?oc.texSubImage2D(oc.TEXTURE_2D,0,st,rc,oc.RGBA,oc.UNSIGNED_BYTE,at):oc.texSubImage2D(oc.TEXTURE_2D,0,st,rc,ut,Hl,oc.RGBA,oc.UNSIGNED_BYTE,at.data)}this.useMipmap&&this.isSizePowerOfTwo()&&oc.generateMipmap(oc.TEXTURE_2D),sc.pixelStoreUnpackFlipY.setDefault(),sc.pixelStoreUnpack.setDefault(),sc.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(at,st,ot){const{context:ut}=this,{gl:Hl}=ut;Hl.bindTexture(Hl.TEXTURE_2D,this.texture),ot!==Hl.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(ot=Hl.LINEAR),at!==this.filter&&(Hl.texParameteri(Hl.TEXTURE_2D,Hl.TEXTURE_MAG_FILTER,at),Hl.texParameteri(Hl.TEXTURE_2D,Hl.TEXTURE_MIN_FILTER,ot||at),this.filter=at),st!==this.wrap&&(Hl.texParameteri(Hl.TEXTURE_2D,Hl.TEXTURE_WRAP_S,st),Hl.texParameteri(Hl.TEXTURE_2D,Hl.TEXTURE_WRAP_T,st),this.wrap=st)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:at}=this.context;at.deleteTexture(this.texture),this.texture=null}}class yl{constructor(at,st,ot,ut=1,Hl=1,rc=1,sc=0){if(this.uid=at,st.height!==st.width)throw new RangeError("DEM tiles must be square");if(ot&&!["mapbox","terrarium","custom"].includes(ot))return void Z(`"${ot}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=st.height;const oc=this.dim=st.height-2;switch(this.data=new Uint32Array(st.data.buffer),ot){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=ut,this.greenFactor=Hl,this.blueFactor=rc,this.baseShift=sc;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let _c=0;_c<oc;_c++)this.data[this._idx(-1,_c)]=this.data[this._idx(0,_c)],this.data[this._idx(oc,_c)]=this.data[this._idx(oc-1,_c)],this.data[this._idx(_c,-1)]=this.data[this._idx(_c,0)],this.data[this._idx(_c,oc)]=this.data[this._idx(_c,oc-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(oc,-1)]=this.data[this._idx(oc-1,0)],this.data[this._idx(-1,oc)]=this.data[this._idx(0,oc-1)],this.data[this._idx(oc,oc)]=this.data[this._idx(oc-1,oc-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let _c=0;_c<oc;_c++)for(let at=0;at<oc;at++){const st=this.get(_c,at);st>this.max&&(this.max=st),st<this.min&&(this.min=st)}}get(at,st){const ot=new Uint8Array(this.data.buffer),ut=4*this._idx(at,st);return this.unpack(ot[ut],ot[ut+1],ot[ut+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(at,st){if(at<-1||at>=this.dim+1||st<-1||st>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(st+1)*this.stride+(at+1)}unpack(at,st,ot){return at*this.redFactor+st*this.greenFactor+ot*this.blueFactor-this.baseShift}pack(at){return ml(at,this.getUnpackVector())}getPixels(){return new sl({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(at,st,ot){if(this.dim!==at.dim)throw new Error("dem dimension mismatch");let ut=st*this.dim,Hl=st*this.dim+this.dim,rc=ot*this.dim,sc=ot*this.dim+this.dim;switch(st){case-1:ut=Hl-1;break;case 1:Hl=ut+1}switch(ot){case-1:rc=sc-1;break;case 1:sc=rc+1}const oc=-st*this.dim,_c=-ot*this.dim;for(let wc=rc;wc<sc;wc++)for(let st=ut;st<Hl;st++)this.data[this._idx(st,wc)]=at.data[this._idx(st+oc,wc+_c)]}}function ml(at,st){const ot=st[0],ut=st[1],Hl=st[2],rc=st[3],sc=Math.min(ot,ut,Hl),oc=Math.round((at+rc)/sc);return{r:Math.floor(oc*sc/ot)%256,g:Math.floor(oc*sc/ut)%256,b:Math.floor(oc*sc/Hl)%256}}us("DEMData",yl);class gl extends Xs{constructor(at){super(at,pm)}_createColorRamp(at){const st={elevationStops:[],colorStops:[]},ot=this._transitionablePaint._values["color-relief-color"].value.expression;if(ot instanceof ai&&ot._styleExpression.expression instanceof yr){this.colorRampExpression=ot;const at=ot._styleExpression.expression;st.elevationStops=at.labels,st.colorStops=[];for(const ot of st.elevationStops)st.colorStops.push(at.evaluate({globals:{elevation:ot}}))}if(st.elevationStops.length<1&&(st.elevationStops=[0],st.colorStops=[Pe.transparent]),st.elevationStops.length<2&&(st.elevationStops.push(st.elevationStops[0]+1),st.colorStops.push(st.colorStops[0])),st.elevationStops.length<=at)return st;const ut={elevationStops:[],colorStops:[]},Hl=(st.elevationStops.length-1)/(at-1);for(let rc=0;rc<st.elevationStops.length-.5;rc+=Hl)ut.elevationStops.push(st.elevationStops[Math.round(rc)]),ut.colorStops.push(st.colorStops[Math.round(rc)]);return Z(`Too many colors in specification of ${this.id} color-relief layer, may not render properly.`),ut}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(at,st,ot){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const ut=this._createColorRamp(st),Hl=new sl({width:ut.colorStops.length,height:1}),rc=new sl({width:ut.colorStops.length,height:1});for(let sc=0;sc<ut.elevationStops.length;sc++){const at=ml(ut.elevationStops[sc],ot);rc.setPixel(0,sc,new Pe(at.r/255,at.g/255,at.b/255,1)),Hl.setPixel(0,sc,ut.colorStops[sc])}return this.colorRampTextures={elevationTexture:new dl(at,rc,at.gl.RGBA),colorTexture:new dl(at,Hl,at.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return"none"!==this.visibility&&!!this.colorRampTextures}}const mm=Ks([{name:"a_pos",components:2,type:"Int16"}],4),{members:gm}=mm;function bl(at,st,ot){const ut=ot.patternDependencies;let Hl=!1;for(const rc of st){const st=rc.paint.get(`${at}-pattern`);st.isConstant()||(Hl=!0);const ot=st.constantOr(null);ot&&(Hl=!0,ut[ot.to]=!0,ut[ot.from]=!0)}return Hl}function wl(at,st,ot,ut,Hl){const rc=Hl.patternDependencies;for(const sc of st){const st=sc.paint.get(`${at}-pattern`).value;if("constant"!==st.kind){let at=st.evaluate({zoom:ut-1},ot,{},Hl.availableImages),oc=st.evaluate({zoom:ut},ot,{},Hl.availableImages),_c=st.evaluate({zoom:ut+1},ot,{},Hl.availableImages);at=at&&at.name?at.name:at,oc=oc&&oc.name?oc.name:oc,_c=_c&&_c.name?_c.name:_c,rc[at]=!0,rc[oc]=!0,rc[_c]=!0,ot.patterns[sc.id]={min:at,mid:oc,max:_c}}}return ot}function _l(at,st,ot,ut,Hl){let rc;if(Hl===function(at,st,ot,ut){let Hl=0;for(let rc=st,sc=ot-ut;rc<ot;rc+=ut)Hl+=(at[sc]-at[rc])*(at[rc+1]+at[sc+1]),sc=rc;return Hl}(at,st,ot,ut)>0)for(let sc=st;sc<ot;sc+=ut)rc=ql(sc/ut|0,at[sc],at[sc+1],rc);else for(let sc=ot-ut;sc>=st;sc-=ut)rc=ql(sc/ut|0,at[sc],at[sc+1],rc);return rc&&Dl(rc,rc.next)&&(Gl(rc),rc=rc.next),rc}function Sl(at,st){if(!at)return at;st||(st=at);let ot,ut=at;do{if(ot=!1,ut.steiner||!Dl(ut,ut.next)&&0!==$l(ut.prev,ut,ut.next))ut=ut.next;else{if(Gl(ut),ut=st=ut.prev,ut===ut.next)break;ot=!0}}while(ot||ut!==st);return st}function Al(at,st,ot,ut,Hl,rc,sc){if(!at)return;!sc&&rc&&function(at,st,ot,ut){let Hl=at;do{0===Hl.z&&(Hl.z=El(Hl.x,Hl.y,st,ot,ut)),Hl.prevZ=Hl.prev,Hl.nextZ=Hl.next,Hl=Hl.next}while(Hl!==at);Hl.prevZ.nextZ=null,Hl.prevZ=null,function(at){let st,ot=1;do{let ut,Hl=at;at=null;let rc=null;for(st=0;Hl;){st++;let sc=Hl,oc=0;for(let at=0;at<ot&&(oc++,sc=sc.nextZ,sc);at++);let _c=ot;for(;oc>0||_c>0&&sc;)0!==oc&&(0===_c||!sc||Hl.z<=sc.z)?(ut=Hl,Hl=Hl.nextZ,oc--):(ut=sc,sc=sc.nextZ,_c--),rc?rc.nextZ=ut:at=ut,ut.prevZ=rc,rc=ut;Hl=sc}rc.nextZ=null,ot*=2}while(st>1)}(Hl)}(at,ut,Hl,rc);let oc=at;for(;at.prev!==at.next;){const _c=at.prev,wc=at.next;if(rc?Ml(at,ut,Hl,rc):kl(at))st.push(_c.i,at.i,wc.i),Gl(at),at=wc.next,oc=wc.next;else if((at=wc)===oc){sc?1===sc?Al(at=Il(Sl(at),st),st,ot,ut,Hl,rc,2):2===sc&&zl(at,st,ot,ut,Hl,rc):Al(Sl(at),st,ot,ut,Hl,rc,1);break}}}function kl(at){const st=at.prev,ot=at,ut=at.next;if($l(st,ot,ut)>=0)return!1;const Hl=st.x,rc=ot.x,sc=ut.x,oc=st.y,_c=ot.y,wc=ut.y,Sc=Math.min(Hl,rc,sc),iu=Math.min(oc,_c,wc),su=Math.max(Hl,rc,sc),lu=Math.max(oc,_c,wc);let cu=ut.next;for(;cu!==st;){if(cu.x>=Sc&&cu.x<=su&&cu.y>=iu&&cu.y<=lu&&Fl(Hl,oc,rc,_c,sc,wc,cu.x,cu.y)&&$l(cu.prev,cu,cu.next)>=0)return!1;cu=cu.next}return!0}function Ml(at,st,ot,ut){const Hl=at.prev,rc=at,sc=at.next;if($l(Hl,rc,sc)>=0)return!1;const oc=Hl.x,_c=rc.x,wc=sc.x,Sc=Hl.y,iu=rc.y,su=sc.y,lu=Math.min(oc,_c,wc),cu=Math.min(Sc,iu,su),uu=Math.max(oc,_c,wc),pu=Math.max(Sc,iu,su),mu=El(lu,cu,st,ot,ut),gu=El(uu,pu,st,ot,ut);let Au=at.prevZ,yu=at.nextZ;for(;Au&&Au.z>=mu&&yu&&yu.z<=gu;){if(Au.x>=lu&&Au.x<=uu&&Au.y>=cu&&Au.y<=pu&&Au!==Hl&&Au!==sc&&Fl(oc,Sc,_c,iu,wc,su,Au.x,Au.y)&&$l(Au.prev,Au,Au.next)>=0)return!1;if(Au=Au.prevZ,yu.x>=lu&&yu.x<=uu&&yu.y>=cu&&yu.y<=pu&&yu!==Hl&&yu!==sc&&Fl(oc,Sc,_c,iu,wc,su,yu.x,yu.y)&&$l(yu.prev,yu,yu.next)>=0)return!1;yu=yu.nextZ}for(;Au&&Au.z>=mu;){if(Au.x>=lu&&Au.x<=uu&&Au.y>=cu&&Au.y<=pu&&Au!==Hl&&Au!==sc&&Fl(oc,Sc,_c,iu,wc,su,Au.x,Au.y)&&$l(Au.prev,Au,Au.next)>=0)return!1;Au=Au.prevZ}for(;yu&&yu.z<=gu;){if(yu.x>=lu&&yu.x<=uu&&yu.y>=cu&&yu.y<=pu&&yu!==Hl&&yu!==sc&&Fl(oc,Sc,_c,iu,wc,su,yu.x,yu.y)&&$l(yu.prev,yu,yu.next)>=0)return!1;yu=yu.nextZ}return!0}function Il(at,st){let ot=at;do{const ut=ot.prev,Hl=ot.next.next;!Dl(ut,Hl)&&Ol(ut,ot,ot.next,Hl)&&Nl(ut,Hl)&&Nl(Hl,ut)&&(st.push(ut.i,ot.i,Hl.i),Gl(ot),Gl(ot.next),ot=at=Hl),ot=ot.next}while(ot!==at);return Sl(ot)}function zl(at,st,ot,ut,Hl,rc){let sc=at;do{let at=sc.next.next;for(;at!==sc.prev;){if(sc.i!==at.i&&Ll(sc,at)){let oc=Ul(sc,at);return sc=Sl(sc,sc.next),oc=Sl(oc,oc.next),Al(sc,st,ot,ut,Hl,rc,0),void Al(oc,st,ot,ut,Hl,rc,0)}at=at.next}sc=sc.next}while(sc!==at)}function Pl(at,st){let ot=at.x-st.x;return 0===ot&&(ot=at.y-st.y,0===ot)&&(ot=(at.next.y-at.y)/(at.next.x-at.x)-(st.next.y-st.y)/(st.next.x-st.x)),ot}function Cl(at,st){const ot=function(at,st){let ot=st;const ut=at.x,Hl=at.y;let rc,sc=-1/0;if(Dl(at,ot))return ot;do{if(Dl(at,ot.next))return ot.next;if(Hl<=ot.y&&Hl>=ot.next.y&&ot.next.y!==ot.y){const at=ot.x+(Hl-ot.y)*(ot.next.x-ot.x)/(ot.next.y-ot.y);if(at<=ut&&at>sc&&(sc=at,rc=ot.x<ot.next.x?ot:ot.next,at===ut))return rc}ot=ot.next}while(ot!==st);if(!rc)return null;const oc=rc,_c=rc.x,wc=rc.y;let Sc=1/0;ot=rc;do{if(ut>=ot.x&&ot.x>=_c&&ut!==ot.x&&Vl(Hl<wc?ut:sc,Hl,_c,wc,Hl<wc?sc:ut,Hl,ot.x,ot.y)){const st=Math.abs(Hl-ot.y)/(ut-ot.x);Nl(ot,at)&&(st<Sc||st===Sc&&(ot.x>rc.x||ot.x===rc.x&&Bl(rc,ot)))&&(rc=ot,Sc=st)}ot=ot.next}while(ot!==oc);return rc}(at,st);if(!ot)return st;const ut=Ul(ot,at);return Sl(ut,ut.next),Sl(ot,ot.next)}function Bl(at,st){return $l(at.prev,at,st.prev)<0&&$l(st.next,at,at.next)<0}function El(at,st,ot,ut,Hl){return(at=1431655765&((at=858993459&((at=252645135&((at=16711935&((at=(at-ot)*Hl|0)|at<<8))|at<<4))|at<<2))|at<<1))|(st=1431655765&((st=858993459&((st=252645135&((st=16711935&((st=(st-ut)*Hl|0)|st<<8))|st<<4))|st<<2))|st<<1))<<1}function Tl(at){let st=at,ot=at;do{(st.x<ot.x||st.x===ot.x&&st.y<ot.y)&&(ot=st),st=st.next}while(st!==at);return ot}function Vl(at,st,ot,ut,Hl,rc,sc,oc){return(Hl-sc)*(st-oc)>=(at-sc)*(rc-oc)&&(at-sc)*(ut-oc)>=(ot-sc)*(st-oc)&&(ot-sc)*(rc-oc)>=(Hl-sc)*(ut-oc)}function Fl(at,st,ot,ut,Hl,rc,sc,oc){return!(at===sc&&st===oc)&&Vl(at,st,ot,ut,Hl,rc,sc,oc)}function Ll(at,st){return at.next.i!==st.i&&at.prev.i!==st.i&&!function(at,st){let ot=at;do{if(ot.i!==at.i&&ot.next.i!==at.i&&ot.i!==st.i&&ot.next.i!==st.i&&Ol(ot,ot.next,at,st))return!0;ot=ot.next}while(ot!==at);return!1}(at,st)&&(Nl(at,st)&&Nl(st,at)&&function(at,st){let ot=at,ut=!1;const Hl=(at.x+st.x)/2,rc=(at.y+st.y)/2;do{ot.y>rc!=ot.next.y>rc&&ot.next.y!==ot.y&&Hl<(ot.next.x-ot.x)*(rc-ot.y)/(ot.next.y-ot.y)+ot.x&&(ut=!ut),ot=ot.next}while(ot!==at);return ut}(at,st)&&($l(at.prev,at,st.prev)||$l(at,st.prev,st))||Dl(at,st)&&$l(at.prev,at,at.next)>0&&$l(st.prev,st,st.next)>0)}function $l(at,st,ot){return(st.y-at.y)*(ot.x-st.x)-(st.x-at.x)*(ot.y-st.y)}function Dl(at,st){return at.x===st.x&&at.y===st.y}function Ol(at,st,ot,ut){const Hl=jl($l(at,st,ot)),rc=jl($l(at,st,ut)),sc=jl($l(ot,ut,at)),oc=jl($l(ot,ut,st));return Hl!==rc&&sc!==oc||!(0!==Hl||!Rl(at,ot,st))||!(0!==rc||!Rl(at,ut,st))||!(0!==sc||!Rl(ot,at,ut))||!(0!==oc||!Rl(ot,st,ut))}function Rl(at,st,ot){return st.x<=Math.max(at.x,ot.x)&&st.x>=Math.min(at.x,ot.x)&&st.y<=Math.max(at.y,ot.y)&&st.y>=Math.min(at.y,ot.y)}function jl(at){return at>0?1:at<0?-1:0}function Nl(at,st){return $l(at.prev,at,at.next)<0?$l(at,st,at.next)>=0&&$l(at,at.prev,st)>=0:$l(at,st,at.prev)<0||$l(at,at.next,st)<0}function Ul(at,st){const ot=Xl(at.i,at.x,at.y),ut=Xl(st.i,st.x,st.y),Hl=at.next,rc=st.prev;return at.next=st,st.prev=at,ot.next=Hl,Hl.prev=ot,ut.next=ot,ot.prev=ut,rc.next=ut,ut.prev=rc,ut}function ql(at,st,ot,ut){const Hl=Xl(at,st,ot);return ut?(Hl.next=ut.next,Hl.prev=ut,ut.next.prev=Hl,ut.next=Hl):(Hl.prev=Hl,Hl.next=Hl),Hl}function Gl(at){at.next.prev=at.prev,at.prev.next=at.next,at.prevZ&&(at.prevZ.nextZ=at.nextZ),at.nextZ&&(at.nextZ.prevZ=at.prevZ)}function Xl(at,st,ot){return{i:at,x:st,y:ot,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Zl{constructor(at,st){if(st>at)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=at,this._minGranularity=st}getGranularityForZoomLevel(at){return Math.max(Math.floor(this._baseZoomGranularity/(1<<at)),this._minGranularity,1)}}class Yl{constructor(at){this.fill=at.fill,this.line=at.line,this.tile=at.tile,this.stencil=at.stencil,this.circle=at.circle}}Yl.noSubdivision=new Yl({fill:new Zl(0,0),line:new Zl(0,0),tile:new Zl(0,0),stencil:new Zl(0,0),circle:1}),us("SubdivisionGranularityExpression",Zl),us("SubdivisionGranularitySetting",Yl);const fm=-32768,Am=32767;class Jl{constructor(at,st){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=at,this._granularityCellSize=cu/at,this._canonical=st}_getKey(at,st){return(at+=32768)<<16|st+32768}_vertexToIndex(at,st){if(at<-32768||st<-32768||at>32767||st>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const ot=0|Math.round(at),ut=0|Math.round(st),Hl=this._getKey(ot,ut);if(this._vertexDictionary.has(Hl))return this._vertexDictionary.get(Hl);const rc=this._vertexBuffer.length/2;return this._vertexDictionary.set(Hl,rc),this._vertexBuffer.push(ot,ut),rc}_subdivideTrianglesScanline(at){if(this._granularity<2)return function(at,st){const ot=[];for(let ut=0;ut<st.length;ut+=3){const Hl=st[ut],rc=st[ut+1],sc=st[ut+2],oc=at[2*Hl],_c=at[2*Hl+1];(at[2*rc]-oc)*(at[2*sc+1]-_c)-(at[2*rc+1]-_c)*(at[2*sc]-oc)>0?(ot.push(Hl),ot.push(sc),ot.push(rc)):(ot.push(Hl),ot.push(rc),ot.push(sc))}return ot}(this._vertexBuffer,at);const st=[],ot=at.length;for(let ut=0;ut<ot;ut+=3){const ot=[at[ut+0],at[ut+1],at[ut+2]],Hl=[this._vertexBuffer[2*at[ut+0]+0],this._vertexBuffer[2*at[ut+0]+1],this._vertexBuffer[2*at[ut+1]+0],this._vertexBuffer[2*at[ut+1]+1],this._vertexBuffer[2*at[ut+2]+0],this._vertexBuffer[2*at[ut+2]+1]];let rc=1/0,sc=1/0,oc=-1/0,_c=-1/0;for(let at=0;at<3;at++){const st=Hl[2*at],ot=Hl[2*at+1];rc=Math.min(rc,st),oc=Math.max(oc,st),sc=Math.min(sc,ot),_c=Math.max(_c,ot)}if(rc===oc||sc===_c)continue;const wc=Math.floor(rc/this._granularityCellSize),Sc=Math.ceil(oc/this._granularityCellSize),iu=Math.floor(sc/this._granularityCellSize),su=Math.ceil(_c/this._granularityCellSize);if(wc!==Sc||iu!==su)for(let at=iu;at<su;at++){const ut=this._scanlineGenerateVertexRingForCellRow(at,Hl,ot);tu(this._vertexBuffer,ut,st)}else st.push(...ot)}return st}_scanlineGenerateVertexRingForCellRow(at,st,ot){const ut=at*this._granularityCellSize,Hl=ut+this._granularityCellSize,rc=[];for(let sc=0;sc<3;sc++){const at=st[2*sc],oc=st[2*sc+1],_c=st[2*(sc+1)%6],wc=st[(2*(sc+1)+1)%6],Sc=st[2*(sc+2)%6],iu=st[(2*(sc+2)+1)%6],su=_c-at,lu=wc-oc,cu=0===su,uu=0===lu,pu=(ut-oc)/lu,mu=(Hl-oc)/lu,gu=Math.min(pu,mu),Au=Math.max(pu,mu);if(!uu&&(gu>=1||Au<=0)||uu&&(oc<ut||oc>Hl)){wc>=ut&&wc<=Hl&&rc.push(ot[(sc+1)%3]);continue}!uu&&gu>0&&rc.push(this._vertexToIndex(at+su*gu,oc+lu*gu));const yu=at+su*Math.max(gu,0),_u=at+su*Math.min(Au,1);cu||this._generateIntraEdgeVertices(rc,at,oc,_c,wc,yu,_u),!uu&&Au<1&&rc.push(this._vertexToIndex(at+su*Au,oc+lu*Au)),(uu||wc>=ut&&wc<=Hl)&&rc.push(ot[(sc+1)%3]),!uu&&(wc<=ut||wc>=Hl)&&this._generateInterEdgeVertices(rc,at,oc,_c,wc,Sc,iu,_u,ut,Hl)}return rc}_generateIntraEdgeVertices(at,st,ot,ut,Hl,rc,sc){const oc=ut-st,_c=Hl-ot,wc=0===_c,Sc=wc?Math.min(st,ut):Math.min(rc,sc),iu=wc?Math.max(st,ut):Math.max(rc,sc),su=Math.floor(Sc/this._granularityCellSize)+1,lu=Math.ceil(iu/this._granularityCellSize)-1;if(wc?st<ut:rc<sc)for(let cu=su;cu<=lu;cu++){const ut=cu*this._granularityCellSize;at.push(this._vertexToIndex(ut,ot+_c*(ut-st)/oc))}else for(let cu=lu;cu>=su;cu--){const ut=cu*this._granularityCellSize;at.push(this._vertexToIndex(ut,ot+_c*(ut-st)/oc))}}_generateInterEdgeVertices(at,st,ot,ut,Hl,rc,sc,oc,_c,wc){const Sc=Hl-ot,iu=rc-ut,su=sc-Hl,lu=(_c-Hl)/su,cu=(wc-Hl)/su,uu=Math.min(lu,cu),pu=Math.max(lu,cu),mu=ut+iu*uu;let gu=Math.floor(Math.min(mu,oc)/this._granularityCellSize)+1,Au=Math.ceil(Math.max(mu,oc)/this._granularityCellSize)-1,yu=oc<mu;const _u=0===su;if(_u&&(sc===_c||sc===wc))return;if(_u||uu>=1||pu<=0){const at=ot-sc,ut=rc+(st-rc)*Math.min((_c-sc)/at,(wc-sc)/at);gu=Math.floor(Math.min(ut,oc)/this._granularityCellSize)+1,Au=Math.ceil(Math.max(ut,oc)/this._granularityCellSize)-1,yu=oc<ut}const xu=Sc>0?wc:_c;if(yu)for(let Su=gu;Su<=Au;Su++)at.push(this._vertexToIndex(Su*this._granularityCellSize,xu));else for(let Su=Au;Su>=gu;Su--)at.push(this._vertexToIndex(Su*this._granularityCellSize,xu))}_generateOutline(at){const st=[];for(const ot of at){const at=Ql(ot,this._granularity,!0),ut=this._pointArrayToIndices(at),Hl=[];for(let st=1;st<ut.length;st++)Hl.push(ut[st-1]),Hl.push(ut[st]);st.push(Hl)}return st}_handlePoles(at){let st=!1,ot=!1;this._canonical&&(0===this._canonical.y&&(st=!0),this._canonical.y===(1<<this._canonical.z)-1&&(ot=!0)),(st||ot)&&this._fillPoles(at,st,ot)}_ensureNoPoleVertices(){const at=this._vertexBuffer;for(let st=0;st<at.length;st+=2){const ot=at[st+1];ot===fm&&(at[st+1]=-32767),ot===Am&&(at[st+1]=32766)}}_generatePoleQuad(at,st,ot,ut,Hl,rc){ut>Hl!=(rc===fm)?(at.push(st),at.push(ot),at.push(this._vertexToIndex(ut,rc)),at.push(ot),at.push(this._vertexToIndex(Hl,rc)),at.push(this._vertexToIndex(ut,rc))):(at.push(ot),at.push(st),at.push(this._vertexToIndex(ut,rc)),at.push(this._vertexToIndex(Hl,rc)),at.push(ot),at.push(this._vertexToIndex(ut,rc)))}_fillPoles(at,st,ot){const ut=this._vertexBuffer,Hl=cu,rc=at.length;for(let sc=2;sc<rc;sc+=3){const rc=at[sc-2],oc=at[sc-1],_c=at[sc],wc=ut[2*rc],Sc=ut[2*rc+1],iu=ut[2*oc],su=ut[2*oc+1],lu=ut[2*_c],cu=ut[2*_c+1];st&&(0===Sc&&0===su&&this._generatePoleQuad(at,rc,oc,wc,iu,fm),0===su&&0===cu&&this._generatePoleQuad(at,oc,_c,iu,lu,fm),0===cu&&0===Sc&&this._generatePoleQuad(at,_c,rc,lu,wc,fm)),ot&&(Sc===Hl&&su===Hl&&this._generatePoleQuad(at,rc,oc,wc,iu,Am),su===Hl&&cu===Hl&&this._generatePoleQuad(at,oc,_c,iu,lu,Am),cu===Hl&&Sc===Hl&&this._generatePoleQuad(at,_c,rc,lu,wc,Am))}}_initializeVertices(at){for(let st=0;st<at.length;st+=2)this._vertexToIndex(at[st],at[st+1])}subdividePolygonInternal(at,st){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:ot,holeIndices:ut}=function(at){const st=[],ot=[];for(const ut of at)if(0!==ut.length){ut!==at[0]&&st.push(ot.length/2);for(let at=0;at<ut.length;at++)ot.push(ut[at].x),ot.push(ut[at].y)}return{flattened:ot,holeIndices:st}}(at);let Hl;this._initializeVertices(ot);try{const at=function(at,st,ot=2){const ut=st&&st.length,Hl=ut?st[0]*ot:at.length;let rc=_l(at,0,Hl,ot,!0);const sc=[];if(!rc||rc.next===rc.prev)return sc;let oc,_c,wc;if(ut&&(rc=function(at,st,ot,ut){const Hl=[];for(let rc=0,sc=st.length;rc<sc;rc++){const ot=_l(at,st[rc]*ut,rc<sc-1?st[rc+1]*ut:at.length,ut,!1);ot===ot.next&&(ot.steiner=!0),Hl.push(Tl(ot))}Hl.sort(Pl);for(let rc=0;rc<Hl.length;rc++)ot=Cl(Hl[rc],ot);return ot}(at,st,rc,ot)),at.length>80*ot){oc=1/0,_c=1/0;let st=-1/0,ut=-1/0;for(let rc=ot;rc<Hl;rc+=ot){const ot=at[rc],Hl=at[rc+1];ot<oc&&(oc=ot),Hl<_c&&(_c=Hl),ot>st&&(st=ot),Hl>ut&&(ut=Hl)}wc=Math.max(st-oc,ut-_c),wc=0!==wc?32767/wc:0}return Al(rc,sc,ot,oc,_c,wc,0),sc}(ot,ut),st=this._convertIndices(ot,at);Hl=this._subdivideTrianglesScanline(st)}catch(at){console.error(at)}let rc=[];return st&&(rc=this._generateOutline(at)),this._ensureNoPoleVertices(),this._handlePoles(Hl),{verticesFlattened:this._vertexBuffer,indicesTriangles:Hl,indicesLineList:rc}}_convertIndices(at,st){const ot=[];for(let ut=0;ut<st.length;ut++)ot.push(this._vertexToIndex(at[2*st[ut]],at[2*st[ut]+1]));return ot}_pointArrayToIndices(at){const st=[];for(let ot=0;ot<at.length;ot++){const ut=at[ot];st.push(this._vertexToIndex(ut.x,ut.y))}return st}}function Wl(at,st,ot,ut=!0){return new Jl(ot,st).subdividePolygonInternal(at,ut)}function Ql(at,st,ot=!1){if(!at||at.length<1)return[];if(at.length<2)return[];const ut=at[0],Hl=at[at.length-1],sc=ot&&(ut.x!==Hl.x||ut.y!==Hl.y);if(st<2)return sc?[...at,at[0]]:[...at];const oc=Math.floor(cu/st),_c=[];_c.push(new rc(at[0].x,at[0].y));const wc=at.length,Sc=sc?wc:wc-1;for(let iu=0;iu<Sc;iu++){const st=at[iu],ot=iu<wc-1?at[iu+1]:at[0],ut=st.x,Hl=st.y,sc=ot.x,Sc=ot.y,su=ut!==sc,lu=Hl!==Sc;if(!su&&!lu)continue;const cu=sc-ut,uu=Sc-Hl,pu=Math.abs(cu),mu=Math.abs(uu);let gu=ut,Au=Hl;for(;;){const at=cu>0?(Math.floor(gu/oc)+1)*oc:(Math.ceil(gu/oc)-1)*oc,st=uu>0?(Math.floor(Au/oc)+1)*oc:(Math.ceil(Au/oc)-1)*oc,ot=Math.abs(gu-at),ut=Math.abs(Au-st),Hl=Math.abs(gu-sc),wc=Math.abs(Au-Sc),iu=su?ot/pu:Number.POSITIVE_INFINITY,yu=lu?ut/mu:Number.POSITIVE_INFINITY;if((Hl<=ot||!su)&&(wc<=ut||!lu))break;if(iu<yu&&su||!lu){gu=at,Au+=uu*iu;const st=new rc(gu,Math.round(Au));_c[_c.length-1].x===st.x&&_c[_c.length-1].y===st.y||_c.push(st)}else{gu+=cu*yu,Au=st;const at=new rc(Math.round(gu),Au);_c[_c.length-1].x===at.x&&_c[_c.length-1].y===at.y||_c.push(at)}}const yu=new rc(sc,Sc);_c[_c.length-1].x===yu.x&&_c[_c.length-1].y===yu.y||_c.push(yu)}return _c}function tu(at,st,ot){if(0===st.length)throw new Error("Subdivision vertex ring is empty.");let ut=0,Hl=at[2*st[0]];for(let _c=1;_c<st.length;_c++){const ot=at[2*st[_c]];ot<Hl&&(Hl=ot,ut=_c)}const rc=st.length;let sc=ut,oc=(sc+1)%rc;for(;;){const ut=sc-1>=0?sc-1:rc-1,Hl=(oc+1)%rc,_c=at[2*st[ut]],wc=at[2*st[Hl]],Sc=at[2*st[sc]],iu=at[2*st[sc]+1],su=at[2*st[oc]+1];let lu=!1;if(_c<wc)lu=!0;else if(_c>wc)lu=!1;else{const ot=su-iu,rc=-(at[2*st[oc]]-Sc),sc=iu<su?1:-1;((_c-Sc)*ot+(at[2*st[ut]+1]-iu)*rc)*sc>((wc-Sc)*ot+(at[2*st[Hl]+1]-iu)*rc)*sc&&(lu=!0)}if(lu){const at=st[ut],Hl=st[sc],_c=st[oc];at!==Hl&&at!==_c&&Hl!==_c&&ot.push(_c,Hl,at),sc--,sc<0&&(sc=rc-1)}else{const at=st[Hl],ut=st[sc],_c=st[oc];at!==ut&&at!==_c&&ut!==_c&&ot.push(_c,ut,at),oc++,oc>=rc&&(oc=0)}if(ut===Hl)break}}function eu(at,st,ot,ut,Hl,rc,sc,oc,_c){const wc=Hl.length/2,Sc=sc&&oc&&_c;if(wc<Ha.MAX_VERTEX_ARRAY_LENGTH){const iu=st.prepareSegment(wc,ot,ut),su=iu.vertexLength;for(let at=0;at<rc.length;at+=3)ut.emplaceBack(su+rc[at],su+rc[at+1],su+rc[at+2]);let lu,cu;iu.vertexLength+=wc,iu.primitiveLength+=rc.length/3,Sc&&(cu=sc.prepareSegment(wc,ot,oc),lu=cu.vertexLength,cu.vertexLength+=wc);for(let st=0;st<Hl.length;st+=2)at(Hl[st],Hl[st+1]);if(Sc)for(let at=0;at<_c.length;at++){const st=_c[at];for(let at=1;at<st.length;at+=2)oc.emplaceBack(lu+st[at-1],lu+st[at]);cu.primitiveLength+=st.length/2}}else!function(at,st,ot,ut,Hl,rc){const sc=[];for(let iu=0;iu<ut.length/2;iu++)sc.push(-1);const oc={count:0};let _c=0,wc=at.getOrCreateLatestSegment(st,ot),Sc=wc.vertexLength;for(let iu=2;iu<Hl.length;iu+=3){const su=Hl[iu-2],lu=Hl[iu-1],cu=Hl[iu];let uu=sc[su]<_c,pu=sc[lu]<_c,mu=sc[cu]<_c;wc.vertexLength+((uu?1:0)+(pu?1:0)+(mu?1:0))>Ha.MAX_VERTEX_ARRAY_LENGTH&&(wc=at.createNewSegment(st,ot),_c=oc.count,uu=!0,pu=!0,mu=!0,Sc=0);const gu=ru(sc,ut,rc,oc,su,uu,wc),Au=ru(sc,ut,rc,oc,lu,pu,wc),yu=ru(sc,ut,rc,oc,cu,mu,wc);ot.emplaceBack(Sc+gu-_c,Sc+Au-_c,Sc+yu-_c),wc.primitiveLength++}}(st,ot,ut,Hl,rc,at),Sc&&function(at,st,ot,ut,Hl,rc){const sc=[];for(let iu=0;iu<ut.length/2;iu++)sc.push(-1);const oc={count:0};let _c=0,wc=at.getOrCreateLatestSegment(st,ot),Sc=wc.vertexLength;for(let iu=0;iu<Hl.length;iu++){const su=Hl[iu];for(let lu=1;lu<Hl[iu].length;lu+=2){const Hl=su[lu-1],iu=su[lu];let cu=sc[Hl]<_c,uu=sc[iu]<_c;wc.vertexLength+((cu?1:0)+(uu?1:0))>Ha.MAX_VERTEX_ARRAY_LENGTH&&(wc=at.createNewSegment(st,ot),_c=oc.count,cu=!0,uu=!0,Sc=0);const pu=ru(sc,ut,rc,oc,Hl,cu,wc),mu=ru(sc,ut,rc,oc,iu,uu,wc);ot.emplaceBack(Sc+pu-_c,Sc+mu-_c),wc.primitiveLength++}}}(sc,ot,oc,Hl,_c,at),st.forceNewSegmentOnNextPrepare(),null==sc||sc.forceNewSegmentOnNextPrepare()}function ru(at,st,ot,ut,Hl,rc,sc){if(rc){const rc=ut.count;return ot(st[2*Hl],st[2*Hl+1]),at[Hl]=ut.count,ut.count++,sc.vertexLength++,rc}return at[Hl]}class nu{constructor(at){this.zoom=at.zoom,this.globalState=at.globalState,this.overscaling=at.overscaling,this.layers=at.layers,this.layerIds=this.layers.map((at=>at.id)),this.index=at.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Fa,this.indexArray=new Ga,this.indexArray2=new Xa,this.programConfigurations=new So(at.layers,at.zoom),this.segments=new Ha,this.segments2=new Ha,this.stateDependentLayerIds=this.layers.filter((at=>at.isStateDependent())).map((at=>at.id))}populate(at,st,ot){this.hasPattern=bl("fill",this.layers,st);const ut=this.layers[0].layout.get("fill-sort-key"),Hl=!ut.isConstant(),rc=[];for(const{feature:sc,id:oc,index:_c,sourceLayerIndex:wc}of at){const at=this.layers[0]._featureFilter.needGeometry,Sc=Po(sc,at);if(!this.layers[0]._featureFilter.filter(new Cs(this.zoom,{globalState:this.globalState}),Sc,ot))continue;const iu=Hl?ut.evaluate(Sc,{},ot,st.availableImages):void 0,su={id:oc,properties:sc.properties,type:sc.type,sourceLayerIndex:wc,index:_c,geometry:at?Sc.geometry:zo(sc),patterns:{},sortKey:iu};rc.push(su)}Hl&&rc.sort(((at,st)=>at.sortKey-st.sortKey));for(const sc of rc){const{geometry:ut,index:Hl,sourceLayerIndex:rc}=sc;if(this.hasPattern){const at=wl("fill",this.layers,sc,this.zoom,st);this.patternFeatures.push(at)}else this.addFeature(sc,ut,Hl,ot,{},st.subdivisionGranularity);st.featureIndex.insert(at[Hl].feature,ut,Hl,rc,this.index)}}update(at,st,ot){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(at,st,this.stateDependentLayers,ot)}addFeatures(at,st,ot){for(const ut of this.patternFeatures)this.addFeature(ut,ut.geometry,ut.index,st,ot,at.subdivisionGranularity)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(at){this.uploaded||(this.layoutVertexBuffer=at.createVertexBuffer(this.layoutVertexArray,gm),this.indexBuffer=at.createIndexBuffer(this.indexArray),this.indexBuffer2=at.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(at),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(at,st,ot,ut,Hl,rc){for(const sc of rn(st,500)){const at=Wl(sc,ut,rc.fill.getGranularityForZoomLevel(ut.z)),st=this.layoutVertexArray;eu(((at,ot)=>{st.emplaceBack(at,ot)}),this.segments,this.layoutVertexArray,this.indexArray,at.verticesFlattened,at.indicesTriangles,this.segments2,this.indexArray2,at.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,at,ot,Hl,ut)}}let ym,vm;us("FillBucket",nu,{omit:["layers","patternFeatures"]});var _m={get paint(){return vm=vm||new qs({"fill-antialias":new Os(hh.paint_fill["fill-antialias"]),"fill-opacity":new Rs(hh.paint_fill["fill-opacity"]),"fill-color":new Rs(hh.paint_fill["fill-color"]),"fill-outline-color":new Rs(hh.paint_fill["fill-outline-color"]),"fill-translate":new Os(hh.paint_fill["fill-translate"]),"fill-translate-anchor":new Os(hh.paint_fill["fill-translate-anchor"]),"fill-pattern":new js(hh.paint_fill["fill-pattern"])})},get layout(){return ym=ym||new qs({"fill-sort-key":new Rs(hh.layout_fill["fill-sort-key"])})}};class ou extends Xs{constructor(at){super(at,_m)}recalculate(at,st){super.recalculate(at,st);const ot=this.paint._values["fill-outline-color"];"constant"===ot.value.kind&&void 0===ot.value.value&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(at){return new nu(at)}queryRadius(){return Go(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:at,geometry:st,transform:ot,pixelsToTileUnits:ut}){return Fo(Xo(at,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-ot.bearingInRadians,ut),st)}isTileClipped(){return!0}}const xm=Ks([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),bm=Ks([{name:"a_centroid",components:2,type:"Int16"}],4),{members:wm}=xm;var Em,Mm,Sm,Tm,Cm,km,Im,Dm={};function vu(){if(Mm)return Em;Mm=1;var at=s();function e(at,st,ot,ut,Hl){this.properties={},this.extent=ot,this.type=0,this._pbf=at,this._geometry=-1,this._keys=ut,this._values=Hl,at.readFields(r,this,st)}function r(at,st,ot){1==at?st.id=ot.readVarint():2==at?function(at,st){for(var ot=at.readVarint()+at.pos;at.pos<ot;){var ut=st._keys[at.readVarint()],Hl=st._values[at.readVarint()];st.properties[ut]=Hl}}(ot,st):3==at?st.type=ot.readVarint():4==at&&(st._geometry=ot.pos)}function n(at){for(var st,ot,ut=0,Hl=0,rc=at.length,sc=rc-1;Hl<rc;sc=Hl++)ut+=((ot=at[sc]).x-(st=at[Hl]).x)*(st.y+ot.y);return ut}return Em=e,e.types=["Unknown","Point","LineString","Polygon"],e.prototype.loadGeometry=function(){var st=this._pbf;st.pos=this._geometry;for(var ot,ut=st.readVarint()+st.pos,Hl=1,rc=0,sc=0,oc=0,_c=[];st.pos<ut;){if(rc<=0){var wc=st.readVarint();Hl=7&wc,rc=wc>>3}if(rc--,1===Hl||2===Hl)sc+=st.readSVarint(),oc+=st.readSVarint(),1===Hl&&(ot&&_c.push(ot),ot=[]),ot.push(new at(sc,oc));else{if(7!==Hl)throw new Error("unknown command "+Hl);ot&&ot.push(ot[0].clone())}}return ot&&_c.push(ot),_c},e.prototype.bbox=function(){var at=this._pbf;at.pos=this._geometry;for(var st=at.readVarint()+at.pos,ot=1,ut=0,Hl=0,rc=0,sc=1/0,oc=-1/0,_c=1/0,wc=-1/0;at.pos<st;){if(ut<=0){var Sc=at.readVarint();ot=7&Sc,ut=Sc>>3}if(ut--,1===ot||2===ot)(Hl+=at.readSVarint())<sc&&(sc=Hl),Hl>oc&&(oc=Hl),(rc+=at.readSVarint())<_c&&(_c=rc),rc>wc&&(wc=rc);else if(7!==ot)throw new Error("unknown command "+ot)}return[sc,_c,oc,wc]},e.prototype.toGeoJSON=function(at,st,ot){var ut,Hl,rc=this.extent*Math.pow(2,ot),sc=this.extent*at,oc=this.extent*st,_c=this.loadGeometry(),wc=e.types[this.type];function p(at){for(var st=0;st<at.length;st++){var ot=at[st];at[st]=[360*(ot.x+sc)/rc-180,360/Math.PI*Math.atan(Math.exp((180-360*(ot.y+oc)/rc)*Math.PI/180))-90]}}switch(this.type){case 1:var Sc=[];for(ut=0;ut<_c.length;ut++)Sc[ut]=_c[ut][0];p(_c=Sc);break;case 2:for(ut=0;ut<_c.length;ut++)p(_c[ut]);break;case 3:for(_c=function(at){var st=at.length;if(st<=1)return[at];for(var ot,ut,Hl=[],rc=0;rc<st;rc++){var sc=n(at[rc]);0!==sc&&(void 0===ut&&(ut=sc<0),ut===sc<0?(ot&&Hl.push(ot),ot=[at[rc]]):ot.push(at[rc]))}return ot&&Hl.push(ot),Hl}(_c),ut=0;ut<_c.length;ut++)for(Hl=0;Hl<_c[ut].length;Hl++)p(_c[ut][Hl])}1===_c.length?_c=_c[0]:wc="Multi"+wc;var iu={type:"Feature",geometry:{type:wc,coordinates:_c},properties:this.properties};return"id"in this&&(iu.id=this.id),iu},Em}function bu(){if(Tm)return Sm;Tm=1;var at=vu();function e(at,st){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=at,this._keys=[],this._values=[],this._features=[],at.readFields(r,this,st),this.length=this._features.length}function r(at,st,ot){15===at?st.version=ot.readVarint():1===at?st.name=ot.readString():5===at?st.extent=ot.readVarint():2===at?st._features.push(ot.pos):3===at?st._keys.push(ot.readString()):4===at&&st._values.push(function(at){for(var st=null,ot=at.readVarint()+at.pos;at.pos<ot;){var ut=at.readVarint()>>3;st=1===ut?at.readString():2===ut?at.readFloat():3===ut?at.readDouble():4===ut?at.readVarint64():5===ut?at.readVarint():6===ut?at.readSVarint():7===ut?at.readBoolean():null}return st}(ot))}return Sm=e,e.prototype.feature=function(st){if(st<0||st>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[st];var ot=this._pbf.readVarint()+this._pbf.pos;return new at(this._pbf,ot,this.extent,this._keys,this._values)},Sm}function wu(){return Im||(Im=1,Dm.VectorTile=function(){if(km)return Cm;km=1;var at=bu();function e(st,ot,ut){if(3===st){var Hl=new at(ut,ut.readVarint()+ut.pos);Hl.length&&(ot[Hl.name]=Hl)}}return Cm=function(at,st){this.layers=at.readFields(e,{},st)},Cm}(),Dm.VectorTileFeature=vu(),Dm.VectorTileLayer=bu()),Dm}var Lm=r(wu());const Pm=Lm.VectorTileFeature.types,zm=Math.pow(2,13);function ku(at,st,ot,ut,Hl,rc,sc,oc){at.emplaceBack(st,ot,2*Math.floor(ut*zm)+sc,Hl*zm*2,rc*zm*2,Math.round(oc))}class Mu{constructor(at){this.zoom=at.zoom,this.globalState=at.globalState,this.overscaling=at.overscaling,this.layers=at.layers,this.layerIds=this.layers.map((at=>at.id)),this.index=at.index,this.hasPattern=!1,this.layoutVertexArray=new La,this.centroidVertexArray=new Ta,this.indexArray=new Ga,this.programConfigurations=new So(at.layers,at.zoom),this.segments=new Ha,this.stateDependentLayerIds=this.layers.filter((at=>at.isStateDependent())).map((at=>at.id))}populate(at,st,ot){this.features=[],this.hasPattern=bl("fill-extrusion",this.layers,st);for(const{feature:ut,id:Hl,index:rc,sourceLayerIndex:sc}of at){const at=this.layers[0]._featureFilter.needGeometry,oc=Po(ut,at);if(!this.layers[0]._featureFilter.filter(new Cs(this.zoom,{globalState:this.globalState}),oc,ot))continue;const _c={id:Hl,sourceLayerIndex:sc,index:rc,geometry:at?oc.geometry:zo(ut),properties:ut.properties,type:ut.type,patterns:{}};this.hasPattern?this.features.push(wl("fill-extrusion",this.layers,_c,this.zoom,st)):this.addFeature(_c,_c.geometry,rc,ot,{},st.subdivisionGranularity),st.featureIndex.insert(ut,_c.geometry,rc,sc,this.index,!0)}}addFeatures(at,st,ot){for(const ut of this.features){const{geometry:Hl}=ut;this.addFeature(ut,Hl,ut.index,st,ot,at.subdivisionGranularity)}}update(at,st,ot){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(at,st,this.stateDependentLayers,ot)}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.centroidVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(at){this.uploaded||(this.layoutVertexBuffer=at.createVertexBuffer(this.layoutVertexArray,wm),this.centroidVertexBuffer=at.createVertexBuffer(this.centroidVertexArray,bm.members,!0),this.indexBuffer=at.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(at),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(at,st,ot,ut,Hl,rc){for(const sc of rn(st,500)){const st={x:0,y:0,sampleCount:0},ot=this.layoutVertexArray.length;this.processPolygon(st,ut,at,sc,rc);const Hl=this.layoutVertexArray.length-ot,oc=Math.floor(st.x/st.sampleCount),_c=Math.floor(st.y/st.sampleCount);for(let at=0;at<Hl;at++)this.centroidVertexArray.emplaceBack(oc,_c)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,at,ot,Hl,ut)}processPolygon(at,st,ot,ut,Hl){if(ut.length<1)return;if(Pu(ut[0]))return;for(const Sc of ut)0!==Sc.length&&Iu(at,Sc);const rc={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},sc=Hl.fill.getGranularityForZoomLevel(st.z),oc="Polygon"===Pm[ot.type];for(const Sc of ut){if(0===Sc.length)continue;if(Pu(Sc))continue;const at=Ql(Sc,sc,oc);this._generateSideFaces(at,rc)}if(!oc)return;const _c=Wl(ut,st,sc,!1),wc=this.layoutVertexArray;eu(((at,st)=>{ku(wc,at,st,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,_c.verticesFlattened,_c.indicesTriangles)}_generateSideFaces(at,st){let ot=0;for(let ut=1;ut<at.length;ut++){const Hl=at[ut],rc=at[ut-1];if(zu(Hl,rc))continue;st.segment.vertexLength+4>Ha.MAX_VERTEX_ARRAY_LENGTH&&(st.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const sc=Hl.sub(rc)._perp()._unit(),oc=rc.dist(Hl);ot+oc>32768&&(ot=0),ku(this.layoutVertexArray,Hl.x,Hl.y,sc.x,sc.y,0,0,ot),ku(this.layoutVertexArray,Hl.x,Hl.y,sc.x,sc.y,0,1,ot),ot+=oc,ku(this.layoutVertexArray,rc.x,rc.y,sc.x,sc.y,0,0,ot),ku(this.layoutVertexArray,rc.x,rc.y,sc.x,sc.y,0,1,ot);const _c=st.segment.vertexLength;this.indexArray.emplaceBack(_c,_c+2,_c+1),this.indexArray.emplaceBack(_c+1,_c+2,_c+3),st.segment.vertexLength+=4,st.segment.primitiveLength+=2}}}function Iu(at,st){for(let ot=0;ot<st.length;ot++){const ut=st[ot];ot===st.length-1&&st[0].x===ut.x&&st[0].y===ut.y||(at.x+=ut.x,at.y+=ut.y,at.sampleCount++)}}function zu(at,st){return at.x===st.x&&(at.x<0||at.x>cu)||at.y===st.y&&(at.y<0||at.y>cu)}function Pu(at){return at.every((at=>at.x<0))||at.every((at=>at.x>cu))||at.every((at=>at.y<0))||at.every((at=>at.y>cu))}let Nm;us("FillExtrusionBucket",Mu,{omit:["layers","features"]});var Rm={get paint(){return Nm=Nm||new qs({"fill-extrusion-opacity":new Os(hh["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Rs(hh["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Os(hh["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Os(hh["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new js(hh["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Rs(hh["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Rs(hh["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Os(hh["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class Eu extends Xs{constructor(at){super(at,Rm)}createBucket(at){return new Mu(at)}queryRadius(){return Go(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:at,feature:st,featureState:ot,geometry:ut,transform:Hl,pixelsToTileUnits:sc,pixelPosMatrix:oc}){const _c=Xo(at,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-Hl.bearingInRadians,sc),wc=this.paint.get("fill-extrusion-height").evaluate(st,ot),Sc=this.paint.get("fill-extrusion-base").evaluate(st,ot),iu=function(at,st){const ot=[];for(const ut of at){const at=[ut.x,ut.y,0,1];I(at,at,st),ot.push(new rc(at[0]/at[3],at[1]/at[3]))}return ot}(_c,oc),su=function(at,st,ot,ut){const Hl=[],sc=[],oc=ut[8]*st,_c=ut[9]*st,wc=ut[10]*st,Sc=ut[11]*st,iu=ut[8]*ot,su=ut[9]*ot,lu=ut[10]*ot,cu=ut[11]*ot;for(const uu of at){const at=[],st=[];for(const ot of uu){const Hl=ot.x,sc=ot.y,uu=ut[0]*Hl+ut[4]*sc+ut[12],pu=ut[1]*Hl+ut[5]*sc+ut[13],mu=ut[2]*Hl+ut[6]*sc+ut[14],gu=ut[3]*Hl+ut[7]*sc+ut[15],Au=mu+wc,yu=gu+Sc,_u=uu+iu,xu=pu+su,Su=mu+lu,Du=gu+cu,Lu=new rc((uu+oc)/yu,(pu+_c)/yu);Lu.z=Au/yu,at.push(Lu);const $u=new rc(_u/Du,xu/Du);$u.z=Su/Du,st.push($u)}Hl.push(at),sc.push(st)}return[Hl,sc]}(ut,Sc,wc,oc);return function(at,st,ot){let ut=1/0;Fo(ot,st)&&(ut=Vu(ot,st[0]));for(let Hl=0;Hl<st.length;Hl++){const rc=st[Hl],sc=at[Hl];for(let at=0;at<rc.length-1;at++){const st=rc[at],Hl=[st,rc[at+1],sc[at+1],sc[at],st];To(ot,Hl)&&(ut=Math.min(ut,Vu(ot,Hl)))}}return ut!==1/0&&ut}(su[0],su[1],iu)}}function Tu(at,st){return at.x*st.x+at.y*st.y}function Vu(at,st){if(1===at.length){let ot=0;const ut=st[ot++];let Hl;for(;!Hl||ut.equals(Hl);)if(Hl=st[ot++],!Hl)return 1/0;for(;ot<st.length;ot++){const rc=st[ot],sc=at[0],oc=Hl.sub(ut),_c=rc.sub(ut),wc=sc.sub(ut),Sc=Tu(oc,oc),iu=Tu(oc,_c),su=Tu(_c,_c),lu=Tu(wc,oc),cu=Tu(wc,_c),uu=Sc*su-iu*iu,pu=(su*lu-iu*cu)/uu,mu=(Sc*cu-iu*lu)/uu,gu=ut.z*(1-pu-mu)+Hl.z*pu+rc.z*mu;if(isFinite(gu))return gu}return 1/0}{let at=1/0;for(const ot of st)at=Math.min(at,ot.z);return at}}const Om=Ks([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Bm}=Om,Fm=Ks([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:jm}=Fm,Um=Lm.VectorTileFeature.types,Vm=Math.cos(Math.PI/180*37.5),Gm=Math.pow(2,14)/.5;class Nu{constructor(at){this.zoom=at.zoom,this.globalState=at.globalState,this.overscaling=at.overscaling,this.layers=at.layers,this.layerIds=this.layers.map((at=>at.id)),this.index=at.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((at=>{this.gradients[at.id]={}})),this.layoutVertexArray=new $a,this.layoutVertexArray2=new Da,this.indexArray=new Ga,this.programConfigurations=new So(at.layers,at.zoom),this.segments=new Ha,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((at=>at.isStateDependent())).map((at=>at.id))}populate(at,st,ot){this.hasPattern=bl("line",this.layers,st);const ut=this.layers[0].layout.get("line-sort-key"),Hl=!ut.isConstant(),rc=[];for(const{feature:sc,id:oc,index:_c,sourceLayerIndex:wc}of at){const at=this.layers[0]._featureFilter.needGeometry,st=Po(sc,at);if(!this.layers[0]._featureFilter.filter(new Cs(this.zoom,{globalState:this.globalState}),st,ot))continue;const Sc=Hl?ut.evaluate(st,{},ot):void 0,iu={id:oc,properties:sc.properties,type:sc.type,sourceLayerIndex:wc,index:_c,geometry:at?st.geometry:zo(sc),patterns:{},sortKey:Sc};rc.push(iu)}Hl&&rc.sort(((at,st)=>at.sortKey-st.sortKey));for(const sc of rc){const{geometry:ut,index:Hl,sourceLayerIndex:rc}=sc;if(this.hasPattern){const at=wl("line",this.layers,sc,this.zoom,st);this.patternFeatures.push(at)}else this.addFeature(sc,ut,Hl,ot,{},st.subdivisionGranularity);st.featureIndex.insert(at[Hl].feature,ut,Hl,rc,this.index)}}update(at,st,ot){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(at,st,this.stateDependentLayers,ot)}addFeatures(at,st,ot){for(const ut of this.patternFeatures)this.addFeature(ut,ut.geometry,ut.index,st,ot,at.subdivisionGranularity)}isEmpty(){return 0===this.layoutVertexArray.length}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(at){this.uploaded||(0!==this.layoutVertexArray2.length&&(this.layoutVertexBuffer2=at.createVertexBuffer(this.layoutVertexArray2,jm)),this.layoutVertexBuffer=at.createVertexBuffer(this.layoutVertexArray,Bm),this.indexBuffer=at.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(at),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(at){if(at.properties&&Object.prototype.hasOwnProperty.call(at.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(at.properties,"mapbox_clip_end"))return{start:+at.properties.mapbox_clip_start,end:+at.properties.mapbox_clip_end}}addFeature(at,st,ot,ut,Hl,rc){const sc=this.layers[0].layout,oc=sc.get("line-join").evaluate(at,{}),_c=sc.get("line-cap"),wc=sc.get("line-miter-limit"),Sc=sc.get("line-round-limit");this.lineClips=this.lineFeatureClips(at);for(const iu of st)this.addLine(iu,at,oc,_c,wc,Sc,ut,rc);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,at,ot,Hl,ut)}addLine(at,st,ot,ut,Hl,rc,sc,oc){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,at=Ql(at,sc?oc.line.getGranularityForZoomLevel(sc.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let st=0;st<at.length-1;st++)this.totalDistance+=at[st].dist(at[st+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const _c="Polygon"===Um[st.type];let wc=at.length;for(;wc>=2&&at[wc-1].equals(at[wc-2]);)wc--;let Sc=0;for(;Sc<wc-1&&at[Sc].equals(at[Sc+1]);)Sc++;if(wc<(_c?3:2))return;"bevel"===ot&&(Hl=1.05);const iu=this.overscaling<=16?122880/(512*this.overscaling):0,su=this.segments.prepareSegment(10*wc,this.layoutVertexArray,this.indexArray);let lu,cu,uu,pu,mu;this.e1=this.e2=-1,_c&&(lu=at[wc-2],mu=at[Sc].sub(lu)._unit()._perp());for(let gu=Sc;gu<wc;gu++){if(uu=gu===wc-1?_c?at[Sc+1]:void 0:at[gu+1],uu&&at[gu].equals(uu))continue;mu&&(pu=mu),lu&&(cu=lu),lu=at[gu],mu=uu?uu.sub(lu)._unit()._perp():pu,pu=pu||mu;let st=pu.add(mu);0===st.x&&0===st.y||st._unit();const sc=pu.x*mu.x+pu.y*mu.y,oc=st.x*mu.x+st.y*mu.y,Au=0!==oc?1/oc:1/0,yu=2*Math.sqrt(2-2*oc),_u=oc<Vm&&cu&&uu,xu=pu.x*mu.y-pu.y*mu.x>0;if(_u&&gu>Sc){const at=lu.dist(cu);if(at>2*iu){const st=lu.sub(lu.sub(cu)._mult(iu/at)._round());this.updateDistance(cu,st),this.addCurrentVertex(st,pu,0,0,su),cu=st}}const Su=cu&&uu;let Du=Su?ot:_c?"butt":ut;if(Su&&"round"===Du&&(Au<rc?Du="miter":Au<=2&&(Du="fakeround")),"miter"===Du&&Au>Hl&&(Du="bevel"),"bevel"===Du&&(Au>2&&(Du="flipbevel"),Au<Hl&&(Du="miter")),cu&&this.updateDistance(cu,lu),"miter"===Du)st._mult(Au),this.addCurrentVertex(lu,st,0,0,su);else if("flipbevel"===Du){if(Au>100)st=mu.mult(-1);else{const at=Au*pu.add(mu).mag()/pu.sub(mu).mag();st._perp()._mult(at*(xu?-1:1))}this.addCurrentVertex(lu,st,0,0,su),this.addCurrentVertex(lu,st.mult(-1),0,0,su)}else if("bevel"===Du||"fakeround"===Du){const at=-Math.sqrt(Au*Au-1),st=xu?at:0,ot=xu?0:at;if(cu&&this.addCurrentVertex(lu,pu,st,ot,su),"fakeround"===Du){const at=Math.round(180*yu/Math.PI/20);for(let st=1;st<at;st++){let ot=st/at;if(.5!==ot){const at=ot-.5;ot+=ot*at*(ot-1)*((1.0904+sc*(sc*(3.55645-1.43519*sc)-3.2452))*at*at+(.848013+sc*(.215638*sc-1.06021)))}const ut=mu.sub(pu)._mult(ot)._add(pu)._unit()._mult(xu?-1:1);this.addHalfVertex(lu,ut.x,ut.y,!1,xu,0,su)}}uu&&this.addCurrentVertex(lu,mu,-st,-ot,su)}else if("butt"===Du)this.addCurrentVertex(lu,st,0,0,su);else if("square"===Du){const at=cu?1:-1;this.addCurrentVertex(lu,st,at,at,su)}else"round"===Du&&(cu&&(this.addCurrentVertex(lu,pu,0,0,su),this.addCurrentVertex(lu,pu,1,1,su,!0)),uu&&(this.addCurrentVertex(lu,mu,-1,-1,su,!0),this.addCurrentVertex(lu,mu,0,0,su)));if(_u&&gu<wc-1){const at=lu.dist(uu);if(at>2*iu){const st=lu.add(uu.sub(lu)._mult(iu/at)._round());this.updateDistance(lu,st),this.addCurrentVertex(st,mu,0,0,su),lu=st}}}}addCurrentVertex(at,st,ot,ut,Hl,rc=!1){const sc=st.y*ut-st.x,oc=-st.y-st.x*ut;this.addHalfVertex(at,st.x+st.y*ot,st.y-st.x*ot,rc,!1,ot,Hl),this.addHalfVertex(at,sc,oc,rc,!0,-ut,Hl),this.distance>Gm/2&&0===this.totalDistance&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(at,st,ot,ut,Hl,rc))}addHalfVertex({x:at,y:st},ot,ut,Hl,rc,sc,oc){const _c=.5*(this.lineClips?this.scaledDistance*(Gm-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((at<<1)+(Hl?1:0),(st<<1)+(rc?1:0),Math.round(63*ot)+128,Math.round(63*ut)+128,1+(0===sc?0:sc<0?-1:1)|(63&_c)<<2,_c>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const wc=oc.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,wc,this.e2),oc.primitiveLength++),rc?this.e2=wc:this.e1=wc}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(at,st){this.distance+=at.dist(st),this.updateScaledDistance()}}let Zm,Hm;us("LineBucket",Nu,{omit:["layers","patternFeatures"]});var Wm={get paint(){return Hm=Hm||new qs({"line-opacity":new Rs(hh.paint_line["line-opacity"]),"line-color":new Rs(hh.paint_line["line-color"]),"line-translate":new Os(hh.paint_line["line-translate"]),"line-translate-anchor":new Os(hh.paint_line["line-translate-anchor"]),"line-width":new Rs(hh.paint_line["line-width"]),"line-gap-width":new Rs(hh.paint_line["line-gap-width"]),"line-offset":new Rs(hh.paint_line["line-offset"]),"line-blur":new Rs(hh.paint_line["line-blur"]),"line-dasharray":new Ns(hh.paint_line["line-dasharray"]),"line-pattern":new js(hh.paint_line["line-pattern"]),"line-gradient":new Us(hh.paint_line["line-gradient"])})},get layout(){return Zm=Zm||new qs({"line-cap":new Os(hh.layout_line["line-cap"]),"line-join":new Rs(hh.layout_line["line-join"]),"line-miter-limit":new Os(hh.layout_line["line-miter-limit"]),"line-round-limit":new Os(hh.layout_line["line-round-limit"]),"line-sort-key":new Rs(hh.layout_line["line-sort-key"])})}};class Xu extends Rs{possiblyEvaluate(at,st){return st=new Cs(Math.floor(st.zoom),{now:st.now,fadeDuration:st.fadeDuration,zoomHistory:st.zoomHistory,transition:st.transition}),super.possiblyEvaluate(at,st)}evaluate(at,st,ot,ut){return st=j({},st,{zoom:Math.floor(st.zoom)}),super.evaluate(at,st,ot,ut)}}let qm;class Yu extends Xs{constructor(at){super(at,Wm),this.gradientVersion=0,qm||(qm=new Xu(Wm.paint.properties["line-width"].specification),qm.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(at){if("line-gradient"===at){const at=this.gradientExpression();this.stepInterpolant=!!function(at){return void 0!==at._styleExpression}(at)&&at._styleExpression.expression instanceof ur,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(at,st){super.recalculate(at,st),this.paint._values["line-floorwidth"]=qm.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,at)}createBucket(at){return new Nu(at)}queryRadius(at){const st=at,ot=Hu(qo("line-width",this,st),qo("line-gap-width",this,st)),ut=qo("line-offset",this,st);return ot/2+Math.abs(ut)+Go(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:at,feature:st,featureState:ot,geometry:ut,transform:Hl,pixelsToTileUnits:sc}){const oc=Xo(at,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-Hl.bearingInRadians,sc),_c=sc/2*Hu(this.paint.get("line-width").evaluate(st,ot),this.paint.get("line-gap-width").evaluate(st,ot)),wc=this.paint.get("line-offset").evaluate(st,ot);return wc&&(ut=function(at,st){const ot=[];for(let ut=0;ut<at.length;ut++){const Hl=at[ut],sc=[];for(let at=0;at<Hl.length;at++){const ot=Hl[at-1],ut=Hl[at],oc=Hl[at+1],_c=0===at?new rc(0,0):ut.sub(ot)._unit()._perp(),wc=at===Hl.length-1?new rc(0,0):oc.sub(ut)._unit()._perp(),Sc=_c._add(wc)._unit(),iu=Sc.x*wc.x+Sc.y*wc.y;0!==iu&&Sc._mult(1/iu),sc.push(Sc._mult(st)._add(ut))}ot.push(sc)}return ot}(ut,wc*sc)),function(at,st,ot){for(let ut=0;ut<st.length;ut++){const Hl=st[ut];if(at.length>=3)for(let st=0;st<Hl.length;st++)if(No(at,Hl[st]))return!0;if(Lo(at,Hl,ot))return!0}return!1}(oc,ut,_c)}isTileClipped(){return!0}}function Hu(at,st){return st>0?st+2*at:at}const Ym=Ks([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Qm=Ks([{name:"a_projected_pos",components:3,type:"Float32"}],4);Ks([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Km=Ks([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Ks([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Xm=Ks([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Jm=Ks([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ec(at,st,ot){return at.sections.forEach((at=>{at.text=function(at,st,ot){const ut=st.layout.get("text-transform").evaluate(ot,{});return"uppercase"===ut?at=at.toLocaleUpperCase():"lowercase"===ut&&(at=at.toLocaleLowerCase()),jp.applyArabicShaping&&(at=jp.applyArabicShaping(at)),at}(at.text,st,ot)})),at}Ks([{name:"triangle",components:3,type:"Uint16"}]),Ks([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Ks([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Ks([{type:"Float32",name:"offsetX"}]),Ks([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Ks([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const $m={"!":"\ufe15","#":"\uff03",$:"\uff04","%":"\uff05","&":"\uff06","(":"\ufe35",")":"\ufe36","*":"\uff0a","+":"\uff0b",",":"\ufe10","-":"\ufe32",".":"\u30fb","/":"\uff0f",":":"\ufe13",";":"\ufe14","<":"\ufe3f","=":"\uff1d",">":"\ufe40","?":"\ufe16","@":"\uff20","[":"\ufe47","\\":"\uff3c","]":"\ufe48","^":"\uff3e",_:"\ufe33","`":"\uff40","{":"\ufe37","|":"\u2015","}":"\ufe38","~":"\uff5e","\xa2":"\uffe0","\xa3":"\uffe1","\xa5":"\uffe5","\xa6":"\uffe4","\xac":"\uffe2","\xaf":"\uffe3","\u2013":"\ufe32","\u2014":"\ufe31","\u2018":"\ufe43","\u2019":"\ufe44","\u201c":"\ufe41","\u201d":"\ufe42","\u2026":"\ufe19","\u2027":"\u30fb","\u20a9":"\uffe6","\u3001":"\ufe11","\u3002":"\ufe12","\u3008":"\ufe3f","\u3009":"\ufe40","\u300a":"\ufe3d","\u300b":"\ufe3e","\u300c":"\ufe41","\u300d":"\ufe42","\u300e":"\ufe43","\u300f":"\ufe44","\u3010":"\ufe3b","\u3011":"\ufe3c","\u3014":"\ufe39","\u3015":"\ufe3a","\u3016":"\ufe17","\u3017":"\ufe18","\uff01":"\ufe15","\uff08":"\ufe35","\uff09":"\ufe36","\uff0c":"\ufe10","\uff0d":"\ufe32","\uff0e":"\u30fb","\uff1a":"\ufe13","\uff1b":"\ufe14","\uff1c":"\ufe3f","\uff1e":"\ufe40","\uff1f":"\ufe16","\uff3b":"\ufe47","\uff3d":"\ufe48","\uff3f":"\ufe33","\uff5b":"\ufe37","\uff5c":"\u2015","\uff5d":"\ufe38","\uff5f":"\ufe35","\uff60":"\ufe36","\uff61":"\ufe12","\uff62":"\ufe41","\uff63":"\ufe42"};var eg,tg,ig,ng=24,rg={};function lc(){return eg||(eg=1,rg.read=function(at,st,ot,ut,Hl){var rc,sc,oc=8*Hl-ut-1,_c=(1<<oc)-1,wc=_c>>1,Sc=-7,iu=ot?Hl-1:0,su=ot?-1:1,lu=at[st+iu];for(iu+=su,rc=lu&(1<<-Sc)-1,lu>>=-Sc,Sc+=oc;Sc>0;rc=256*rc+at[st+iu],iu+=su,Sc-=8);for(sc=rc&(1<<-Sc)-1,rc>>=-Sc,Sc+=ut;Sc>0;sc=256*sc+at[st+iu],iu+=su,Sc-=8);if(0===rc)rc=1-wc;else{if(rc===_c)return sc?NaN:1/0*(lu?-1:1);sc+=Math.pow(2,ut),rc-=wc}return(lu?-1:1)*sc*Math.pow(2,rc-ut)},rg.write=function(at,st,ot,ut,Hl,rc){var sc,oc,_c,wc=8*rc-Hl-1,Sc=(1<<wc)-1,iu=Sc>>1,su=23===Hl?Math.pow(2,-24)-Math.pow(2,-77):0,lu=ut?0:rc-1,cu=ut?1:-1,uu=st<0||0===st&&1/st<0?1:0;for(st=Math.abs(st),isNaN(st)||st===1/0?(oc=isNaN(st)?1:0,sc=Sc):(sc=Math.floor(Math.log(st)/Math.LN2),st*(_c=Math.pow(2,-sc))<1&&(sc--,_c*=2),(st+=sc+iu>=1?su/_c:su*Math.pow(2,1-iu))*_c>=2&&(sc++,_c/=2),sc+iu>=Sc?(oc=0,sc=Sc):sc+iu>=1?(oc=(st*_c-1)*Math.pow(2,Hl),sc+=iu):(oc=st*Math.pow(2,iu-1)*Math.pow(2,Hl),sc=0));Hl>=8;at[ot+lu]=255&oc,lu+=cu,oc/=256,Hl-=8);for(sc=sc<<Hl|oc,wc+=Hl;wc>0;at[ot+lu]=255&sc,lu+=cu,sc/=256,wc-=8);at[ot+lu-cu]|=128*uu}),rg}function uc(){if(ig)return tg;ig=1,tg=e;var at=lc();function e(at){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(at)?at:new Uint8Array(at||0),this.pos=0,this.type=0,this.length=this.buf.length}e.Varint=0,e.Fixed64=1,e.Bytes=2,e.Fixed32=5;var st=4294967296,ot=1/st,ut="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8");function s(at){return at.type===e.Bytes?at.readVarint()+at.pos:at.pos+1}function a(at,st,ot){return ot?4294967296*st+(at>>>0):4294967296*(st>>>0)+(at>>>0)}function o(at,st,ot){var ut=st<=16383?1:st<=2097151?2:st<=268435455?3:Math.floor(Math.log(st)/(7*Math.LN2));ot.realloc(ut);for(var Hl=ot.pos-1;Hl>=at;Hl--)ot.buf[Hl+ut]=ot.buf[Hl]}function l(at,st){for(var ot=0;ot<at.length;ot++)st.writeVarint(at[ot])}function u(at,st){for(var ot=0;ot<at.length;ot++)st.writeSVarint(at[ot])}function c(at,st){for(var ot=0;ot<at.length;ot++)st.writeFloat(at[ot])}function h(at,st){for(var ot=0;ot<at.length;ot++)st.writeDouble(at[ot])}function p(at,st){for(var ot=0;ot<at.length;ot++)st.writeBoolean(at[ot])}function f(at,st){for(var ot=0;ot<at.length;ot++)st.writeFixed32(at[ot])}function d(at,st){for(var ot=0;ot<at.length;ot++)st.writeSFixed32(at[ot])}function y(at,st){for(var ot=0;ot<at.length;ot++)st.writeFixed64(at[ot])}function m(at,st){for(var ot=0;ot<at.length;ot++)st.writeSFixed64(at[ot])}function g(at,st){return(at[st]|at[st+1]<<8|at[st+2]<<16)+16777216*at[st+3]}function x(at,st,ot){at[ot]=st,at[ot+1]=st>>>8,at[ot+2]=st>>>16,at[ot+3]=st>>>24}function v(at,st){return(at[st]|at[st+1]<<8|at[st+2]<<16)+(at[st+3]<<24)}return e.prototype={destroy:function(){this.buf=null},readFields:function(at,st,ot){for(ot=ot||this.length;this.pos<ot;){var ut=this.readVarint(),Hl=ut>>3,rc=this.pos;this.type=7&ut,at(Hl,st,this),this.pos===rc&&this.skip(ut)}return st},readMessage:function(at,st){return this.readFields(at,st,this.readVarint()+this.pos)},readFixed32:function(){var at=g(this.buf,this.pos);return this.pos+=4,at},readSFixed32:function(){var at=v(this.buf,this.pos);return this.pos+=4,at},readFixed64:function(){var at=g(this.buf,this.pos)+g(this.buf,this.pos+4)*st;return this.pos+=8,at},readSFixed64:function(){var at=g(this.buf,this.pos)+v(this.buf,this.pos+4)*st;return this.pos+=8,at},readFloat:function(){var st=at.read(this.buf,this.pos,!0,23,4);return this.pos+=4,st},readDouble:function(){var st=at.read(this.buf,this.pos,!0,52,8);return this.pos+=8,st},readVarint:function(at){var st,ot,ut=this.buf;return st=127&(ot=ut[this.pos++]),ot<128?st:(st|=(127&(ot=ut[this.pos++]))<<7,ot<128?st:(st|=(127&(ot=ut[this.pos++]))<<14,ot<128?st:(st|=(127&(ot=ut[this.pos++]))<<21,ot<128?st:function(at,st,ot){var ut,Hl,rc=ot.buf;if(ut=(112&(Hl=rc[ot.pos++]))>>4,Hl<128)return a(at,ut,st);if(ut|=(127&(Hl=rc[ot.pos++]))<<3,Hl<128)return a(at,ut,st);if(ut|=(127&(Hl=rc[ot.pos++]))<<10,Hl<128)return a(at,ut,st);if(ut|=(127&(Hl=rc[ot.pos++]))<<17,Hl<128)return a(at,ut,st);if(ut|=(127&(Hl=rc[ot.pos++]))<<24,Hl<128)return a(at,ut,st);if(ut|=(1&(Hl=rc[ot.pos++]))<<31,Hl<128)return a(at,ut,st);throw new Error("Expected varint not more than 10 bytes")}(st|=(15&(ot=ut[this.pos]))<<28,at,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var at=this.readVarint();return at%2==1?(at+1)/-2:at/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var at=this.readVarint()+this.pos,st=this.pos;return this.pos=at,at-st>=12&&ut?function(at,st,ot){return ut.decode(at.subarray(st,ot))}(this.buf,st,at):function(at,st,ot){for(var ut="",Hl=st;Hl<ot;){var rc,sc,oc,_c=at[Hl],wc=null,Sc=_c>239?4:_c>223?3:_c>191?2:1;if(Hl+Sc>ot)break;1===Sc?_c<128&&(wc=_c):2===Sc?128==(192&(rc=at[Hl+1]))&&(wc=(31&_c)<<6|63&rc)<=127&&(wc=null):3===Sc?(sc=at[Hl+2],128==(192&(rc=at[Hl+1]))&&128==(192&sc)&&((wc=(15&_c)<<12|(63&rc)<<6|63&sc)<=2047||wc>=55296&&wc<=57343)&&(wc=null)):4===Sc&&(sc=at[Hl+2],oc=at[Hl+3],128==(192&(rc=at[Hl+1]))&&128==(192&sc)&&128==(192&oc)&&((wc=(15&_c)<<18|(63&rc)<<12|(63&sc)<<6|63&oc)<=65535||wc>=1114112)&&(wc=null)),null===wc?(wc=65533,Sc=1):wc>65535&&(wc-=65536,ut+=String.fromCharCode(wc>>>10&1023|55296),wc=56320|1023&wc),ut+=String.fromCharCode(wc),Hl+=Sc}return ut}(this.buf,st,at)},readBytes:function(){var at=this.readVarint()+this.pos,st=this.buf.subarray(this.pos,at);return this.pos=at,st},readPackedVarint:function(at,st){if(this.type!==e.Bytes)return at.push(this.readVarint(st));var ot=s(this);for(at=at||[];this.pos<ot;)at.push(this.readVarint(st));return at},readPackedSVarint:function(at){if(this.type!==e.Bytes)return at.push(this.readSVarint());var st=s(this);for(at=at||[];this.pos<st;)at.push(this.readSVarint());return at},readPackedBoolean:function(at){if(this.type!==e.Bytes)return at.push(this.readBoolean());var st=s(this);for(at=at||[];this.pos<st;)at.push(this.readBoolean());return at},readPackedFloat:function(at){if(this.type!==e.Bytes)return at.push(this.readFloat());var st=s(this);for(at=at||[];this.pos<st;)at.push(this.readFloat());return at},readPackedDouble:function(at){if(this.type!==e.Bytes)return at.push(this.readDouble());var st=s(this);for(at=at||[];this.pos<st;)at.push(this.readDouble());return at},readPackedFixed32:function(at){if(this.type!==e.Bytes)return at.push(this.readFixed32());var st=s(this);for(at=at||[];this.pos<st;)at.push(this.readFixed32());return at},readPackedSFixed32:function(at){if(this.type!==e.Bytes)return at.push(this.readSFixed32());var st=s(this);for(at=at||[];this.pos<st;)at.push(this.readSFixed32());return at},readPackedFixed64:function(at){if(this.type!==e.Bytes)return at.push(this.readFixed64());var st=s(this);for(at=at||[];this.pos<st;)at.push(this.readFixed64());return at},readPackedSFixed64:function(at){if(this.type!==e.Bytes)return at.push(this.readSFixed64());var st=s(this);for(at=at||[];this.pos<st;)at.push(this.readSFixed64());return at},skip:function(at){var st=7&at;if(st===e.Varint)for(;this.buf[this.pos++]>127;);else if(st===e.Bytes)this.pos=this.readVarint()+this.pos;else if(st===e.Fixed32)this.pos+=4;else{if(st!==e.Fixed64)throw new Error("Unimplemented type: "+st);this.pos+=8}},writeTag:function(at,st){this.writeVarint(at<<3|st)},realloc:function(at){for(var st=this.length||16;st<this.pos+at;)st*=2;if(st!==this.length){var ot=new Uint8Array(st);ot.set(this.buf),this.buf=ot,this.length=st}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(at){this.realloc(4),x(this.buf,at,this.pos),this.pos+=4},writeSFixed32:function(at){this.realloc(4),x(this.buf,at,this.pos),this.pos+=4},writeFixed64:function(at){this.realloc(8),x(this.buf,-1&at,this.pos),x(this.buf,Math.floor(at*ot),this.pos+4),this.pos+=8},writeSFixed64:function(at){this.realloc(8),x(this.buf,-1&at,this.pos),x(this.buf,Math.floor(at*ot),this.pos+4),this.pos+=8},writeVarint:function(at){(at=+at||0)>268435455||at<0?function(at,st){var ot,ut;if(at>=0?(ot=at%4294967296|0,ut=at/4294967296|0):(ut=~(-at/4294967296),4294967295^(ot=~(-at%4294967296))?ot=ot+1|0:(ot=0,ut=ut+1|0)),at>=0x10000000000000000||at<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");st.realloc(10),function(at,st,ot){ot.buf[ot.pos++]=127&at|128,at>>>=7,ot.buf[ot.pos++]=127&at|128,at>>>=7,ot.buf[ot.pos++]=127&at|128,at>>>=7,ot.buf[ot.pos++]=127&at|128,ot.buf[ot.pos]=127&(at>>>=7)}(ot,0,st),function(at,st){var ot=(7&at)<<4;st.buf[st.pos++]|=ot|((at>>>=3)?128:0),at&&(st.buf[st.pos++]=127&at|((at>>>=7)?128:0),at&&(st.buf[st.pos++]=127&at|((at>>>=7)?128:0),at&&(st.buf[st.pos++]=127&at|((at>>>=7)?128:0),at&&(st.buf[st.pos++]=127&at|((at>>>=7)?128:0),at&&(st.buf[st.pos++]=127&at)))))}(ut,st)}(at,this):(this.realloc(4),this.buf[this.pos++]=127&at|(at>127?128:0),at<=127||(this.buf[this.pos++]=127&(at>>>=7)|(at>127?128:0),at<=127||(this.buf[this.pos++]=127&(at>>>=7)|(at>127?128:0),at<=127||(this.buf[this.pos++]=at>>>7&127))))},writeSVarint:function(at){this.writeVarint(at<0?2*-at-1:2*at)},writeBoolean:function(at){this.writeVarint(Boolean(at))},writeString:function(at){at=String(at),this.realloc(4*at.length),this.pos++;var st=this.pos;this.pos=function(at,st,ot){for(var ut,Hl,rc=0;rc<st.length;rc++){if((ut=st.charCodeAt(rc))>55295&&ut<57344){if(!Hl){ut>56319||rc+1===st.length?(at[ot++]=239,at[ot++]=191,at[ot++]=189):Hl=ut;continue}if(ut<56320){at[ot++]=239,at[ot++]=191,at[ot++]=189,Hl=ut;continue}ut=Hl-55296<<10|ut-56320|65536,Hl=null}else Hl&&(at[ot++]=239,at[ot++]=191,at[ot++]=189,Hl=null);ut<128?at[ot++]=ut:(ut<2048?at[ot++]=ut>>6|192:(ut<65536?at[ot++]=ut>>12|224:(at[ot++]=ut>>18|240,at[ot++]=ut>>12&63|128),at[ot++]=ut>>6&63|128),at[ot++]=63&ut|128)}return ot}(this.buf,at,this.pos);var ot=this.pos-st;ot>=128&&o(st,ot,this),this.pos=st-1,this.writeVarint(ot),this.pos+=ot},writeFloat:function(st){this.realloc(4),at.write(this.buf,st,this.pos,!0,23,4),this.pos+=4},writeDouble:function(st){this.realloc(8),at.write(this.buf,st,this.pos,!0,52,8),this.pos+=8},writeBytes:function(at){var st=at.length;this.writeVarint(st),this.realloc(st);for(var ot=0;ot<st;ot++)this.buf[this.pos++]=at[ot]},writeRawMessage:function(at,st){this.pos++;var ot=this.pos;at(st,this);var ut=this.pos-ot;ut>=128&&o(ot,ut,this),this.pos=ot-1,this.writeVarint(ut),this.pos+=ut},writeMessage:function(at,st,ot){this.writeTag(at,e.Bytes),this.writeRawMessage(st,ot)},writePackedVarint:function(at,st){st.length&&this.writeMessage(at,l,st)},writePackedSVarint:function(at,st){st.length&&this.writeMessage(at,u,st)},writePackedBoolean:function(at,st){st.length&&this.writeMessage(at,p,st)},writePackedFloat:function(at,st){st.length&&this.writeMessage(at,c,st)},writePackedDouble:function(at,st){st.length&&this.writeMessage(at,h,st)},writePackedFixed32:function(at,st){st.length&&this.writeMessage(at,f,st)},writePackedSFixed32:function(at,st){st.length&&this.writeMessage(at,d,st)},writePackedFixed64:function(at,st){st.length&&this.writeMessage(at,y,st)},writePackedSFixed64:function(at,st){st.length&&this.writeMessage(at,m,st)},writeBytesField:function(at,st){this.writeTag(at,e.Bytes),this.writeBytes(st)},writeFixed32Field:function(at,st){this.writeTag(at,e.Fixed32),this.writeFixed32(st)},writeSFixed32Field:function(at,st){this.writeTag(at,e.Fixed32),this.writeSFixed32(st)},writeFixed64Field:function(at,st){this.writeTag(at,e.Fixed64),this.writeFixed64(st)},writeSFixed64Field:function(at,st){this.writeTag(at,e.Fixed64),this.writeSFixed64(st)},writeVarintField:function(at,st){this.writeTag(at,e.Varint),this.writeVarint(st)},writeSVarintField:function(at,st){this.writeTag(at,e.Varint),this.writeSVarint(st)},writeStringField:function(at,st){this.writeTag(at,e.Bytes),this.writeString(st)},writeFloatField:function(at,st){this.writeTag(at,e.Fixed32),this.writeFloat(st)},writeDoubleField:function(at,st){this.writeTag(at,e.Fixed64),this.writeDouble(st)},writeBooleanField:function(at,st){this.writeVarintField(at,Boolean(st))}},tg}var ag,sg=r(uc());function pc(at,st,ot){1===at&&ot.readMessage(fc,st)}function fc(at,st,ot){if(3===at){const{id:at,bitmap:ut,width:Hl,height:rc,left:sc,top:oc,advance:_c}=ot.readMessage(dc,{});st.push({id:at,bitmap:new il({width:Hl+6,height:rc+6},ut),metrics:{width:Hl,height:rc,left:sc,top:oc,advance:_c}})}}function dc(at,st,ot){1===at?st.id=ot.readVarint():2===at?st.bitmap=ot.readBytes():3===at?st.width=ot.readVarint():4===at?st.height=ot.readVarint():5===at?st.left=ot.readSVarint():6===at?st.top=ot.readSVarint():7===at&&(st.advance=ot.readVarint())}function yc(at){let st=0,ot=0;for(const sc of at)st+=sc.w*sc.h,ot=Math.max(ot,sc.w);at.sort(((at,st)=>st.h-at.h));const ut=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(st/.95)),ot),h:1/0}];let Hl=0,rc=0;for(const sc of at)for(let at=ut.length-1;at>=0;at--){const st=ut[at];if(!(sc.w>st.w||sc.h>st.h)){if(sc.x=st.x,sc.y=st.y,rc=Math.max(rc,sc.y+sc.h),Hl=Math.max(Hl,sc.x+sc.w),sc.w===st.w&&sc.h===st.h){const st=ut.pop();at<ut.length&&(ut[at]=st)}else sc.h===st.h?(st.x+=sc.w,st.w-=sc.w):sc.w===st.w?(st.y+=sc.h,st.h-=sc.h):(ut.push({x:st.x+sc.w,y:st.y,w:st.w-sc.w,h:sc.h}),st.y+=sc.h,st.h-=sc.h);break}}return{w:Hl,h:rc,fill:st/(Hl*rc)||0}}class mc{constructor(at,{pixelRatio:st,version:ot,stretchX:ut,stretchY:Hl,content:rc,textFitWidth:sc,textFitHeight:oc}){this.paddedRect=at,this.pixelRatio=st,this.stretchX=ut,this.stretchY=Hl,this.content=rc,this.version=ot,this.textFitWidth=sc,this.textFitHeight=oc}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class gc{constructor(at,st){const ot={},ut={};this.haveRenderCallbacks=[];const Hl=[];this.addImages(at,ot,Hl),this.addImages(st,ut,Hl);const{w:rc,h:sc}=yc(Hl),oc=new sl({width:rc||1,height:sc||1});for(const _c in at){const st=at[_c],ut=ot[_c].paddedRect;sl.copy(st.data,oc,{x:0,y:0},{x:ut.x+1,y:ut.y+1},st.data)}for(const _c in st){const at=st[_c],ot=ut[_c].paddedRect,Hl=ot.x+1,rc=ot.y+1,sc=at.data.width,wc=at.data.height;sl.copy(at.data,oc,{x:0,y:0},{x:Hl,y:rc},at.data),sl.copy(at.data,oc,{x:0,y:wc-1},{x:Hl,y:rc-1},{width:sc,height:1}),sl.copy(at.data,oc,{x:0,y:0},{x:Hl,y:rc+wc},{width:sc,height:1}),sl.copy(at.data,oc,{x:sc-1,y:0},{x:Hl-1,y:rc},{width:1,height:wc}),sl.copy(at.data,oc,{x:0,y:0},{x:Hl+sc,y:rc},{width:1,height:wc})}this.image=oc,this.iconPositions=ot,this.patternPositions=ut}addImages(at,st,ot){for(const ut in at){const Hl=at[ut],rc={x:0,y:0,w:Hl.data.width+2,h:Hl.data.height+2};ot.push(rc),st[ut]=new mc(rc,Hl),Hl.hasRenderCallback&&this.haveRenderCallbacks.push(ut)}}patchUpdatedImages(at,st){at.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const ot in at.updatedImages)this.patchUpdatedImage(this.iconPositions[ot],at.getImage(ot),st),this.patchUpdatedImage(this.patternPositions[ot],at.getImage(ot),st)}patchUpdatedImage(at,st,ot){if(!at||!st)return;if(at.version===st.version)return;at.version=st.version;const[ut,Hl]=at.tl;ot.update(st.data,void 0,{x:ut,y:Hl})}}us("ImagePosition",mc),us("ImageAtlas",gc),at.an=void 0,(ag=at.an||(at.an={}))[ag.none=0]="none",ag[ag.horizontal=1]="horizontal",ag[ag.vertical=2]="vertical",ag[ag.horizontalOnly=3]="horizontalOnly";class xc{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(at,st,ot){const ut=new xc;return ut.scale=at||1,ut.fontStack=st,ut.verticalAlign=ot||"bottom",ut}static forImage(at,st){const ot=new xc;return ot.imageName=at,ot.verticalAlign=st||"bottom",ot}}class vc{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(at,st){const ot=new vc;for(let ut=0;ut<at.sections.length;ut++){const Hl=at.sections[ut];Hl.image?ot.addImageSection(Hl):ot.addTextSection(Hl,st)}return ot}length(){return this.text.length}getSection(at){return this.sections[this.sectionIndex[at]]}getSectionIndex(at){return this.sectionIndex[at]}getCharCode(at){return this.text.charCodeAt(at)}verticalizePunctuation(){this.text=function(at){let st="";for(let ot=0;ot<at.length;ot++){const ut=at.charCodeAt(ot+1)||null,Hl=at.charCodeAt(ot-1)||null;st+=ut&&As(ut)&&!$m[at[ot+1]]||Hl&&As(Hl)&&!$m[at[ot-1]]||!$m[at[ot]]?at[ot]:$m[at[ot]]}return st}(this.text)}trim(){let at=0;for(let ot=0;ot<this.text.length&&og[this.text.charCodeAt(ot)];ot++)at++;let st=this.text.length;for(let ot=this.text.length-1;ot>=0&&ot>=at&&og[this.text.charCodeAt(ot)];ot--)st--;this.text=this.text.substring(at,st),this.sectionIndex=this.sectionIndex.slice(at,st)}substring(at,st){const ot=new vc;return ot.text=this.text.substring(at,st),ot.sectionIndex=this.sectionIndex.slice(at,st),ot.sections=this.sections,ot}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((at,st)=>Math.max(at,this.sections[st].scale)),0)}getMaxImageSize(at){let st=0,ot=0;for(let ut=0;ut<this.length();ut++){const Hl=this.getSection(ut);if(Hl.imageName){const ut=at[Hl.imageName];if(!ut)continue;const rc=ut.displaySize;st=Math.max(st,rc[0]),ot=Math.max(ot,rc[1])}}return{maxImageWidth:st,maxImageHeight:ot}}addTextSection(at,st){this.text+=at.text,this.sections.push(xc.forText(at.scale,at.fontStack||st,at.verticalAlign));const ot=this.sections.length-1;for(let ut=0;ut<at.text.length;++ut)this.sectionIndex.push(ot)}addImageSection(at){const st=at.image?at.image.name:"";if(0===st.length)return void Z("Can't add FormattedSection with an empty image.");const ot=this.getNextImageSectionCharCode();ot?(this.text+=String.fromCharCode(ot),this.sections.push(xc.forImage(st,at.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):Z("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function bc(st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu){const pu=vc.fromFeature(st,rc);let mu;su===at.an.vertical&&pu.verticalizePunctuation();const{processBidirectionalText:gu,processStyledBidirectionalText:Au}=jp;if(gu&&1===pu.sections.length){mu=[];const at=gu(pu.toString(),Pc(pu,Sc,sc,ot,Hl,cu));for(const st of at){const at=new vc;at.text=st,at.sections=pu.sections;for(let ot=0;ot<st.length;ot++)at.sectionIndex.push(0);mu.push(at)}}else if(Au){mu=[];const at=Au(pu.text,pu.sectionIndex,Pc(pu,Sc,sc,ot,Hl,cu));for(const st of at){const at=new vc;at.text=st[0],at.sectionIndex=st[1],at.sections=pu.sections,mu.push(at)}}else mu=function(at,st){const ot=[],ut=at.text;let Hl=0;for(const rc of st)ot.push(at.substring(Hl,rc)),Hl=rc;return Hl<ut.length&&ot.push(at.substring(Hl,ut.length)),ot}(pu,Pc(pu,Sc,sc,ot,Hl,cu));const yu=[],_u={positionedLines:yu,text:pu.toString(),top:iu[1],bottom:iu[1],left:iu[0],right:iu[0],writingMode:su,iconsInText:!1,verticalizable:!1};return function(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu){let su=0,lu=0,cu=0,uu=0;const pu="right"===oc?1:"left"===oc?0:.5,mu=ng/iu;let gu=0;for(const _u of Hl){_u.trim();const Hl=_u.getMaxScale(),sc={positionedGlyphs:[],lineOffset:0};at.positionedLines[gu]=sc;const oc=sc.positionedGlyphs;let iu=0;if(!_u.length()){lu+=rc,++gu;continue}const Au=Bc(ut,_u,mu);for(let rc=0;rc<_u.length();rc++){const sc=_u.getSection(rc),cu=_u.getSectionIndex(rc),uu=_u.getCharCode(rc),pu=Tc(_c,Sc,uu);let gu;if(sc.imageName){if(at.iconsInText=!0,sc.scale=sc.scale*mu,gu=Fc(sc,pu,Hl,Au,ut),!gu)continue;iu=Math.max(iu,gu.imageOffset)}else if(gu=Vc(sc,uu,pu,Au,st,ot),!gu)continue;const{rect:yu,metrics:xu,baselineOffset:Su}=gu;oc.push({glyph:uu,imageName:sc.imageName,x:su,y:lu+Su+-17,vertical:pu,scale:sc.scale,fontStack:sc.fontStack,sectionIndex:cu,metrics:xu,rect:yu}),pu?(at.verticalizable=!0,su+=(sc.imageName?xu.advance:ng)*sc.scale+wc):su+=xu.advance*sc.scale+wc}0!==oc.length&&(cu=Math.max(su-wc,cu),Lc(oc,0,oc.length-1,pu)),su=0,sc.lineOffset=Math.max(iu,(Hl-1)*ng);const yu=rc*Hl+iu;lu+=yu,uu=Math.max(yu,uu),++gu}const{horizontalAlign:Au,verticalAlign:yu}=Cc(sc);(function(at,st,ot,ut,Hl,rc,sc,oc,_c){const wc=(st-ot)*Hl;let Sc=0;Sc=rc!==sc?-oc*ut- -17:-ut*_c*sc+.5*sc;for(const iu of at)for(const at of iu.positionedGlyphs)at.x+=wc,at.y+=Sc})(at.positionedLines,pu,Au,yu,cu,uu,rc,lu,Hl.length),at.top+=-yu*lu,at.bottom=at.top+lu,at.left+=-Au*cu,at.right=at.left+cu}(_u,ot,ut,Hl,mu,oc,_c,wc,su,Sc,lu,uu),!function(at){for(const st of at)if(0!==st.positionedGlyphs.length)return!1;return!0}(yu)&&_u}const og={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},lg={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},cg={40:!0};function Ac(at,st,ot,ut,Hl,rc){if(st.imageName){const at=ut[st.imageName];return at?at.displaySize[0]*st.scale*ng/rc+Hl:0}{const ut=ot[st.fontStack],rc=ut&&ut[at];return rc?rc.metrics.advance*st.scale+Hl:0}}function kc(at,st,ot,ut){const Hl=Math.pow(at-st,2);return ut?at<st?Hl/2:2*Hl:Hl+Math.abs(ot)*ot}function Mc(at,st,ot){let ut=0;return 10===at&&(ut-=1e4),ot&&(ut+=150),40!==at&&65288!==at||(ut+=50),41!==st&&65289!==st||(ut+=50),ut}function Ic(at,st,ot,ut,Hl,rc){let sc=null,oc=kc(st,ot,Hl,rc);for(const _c of ut){const at=kc(st-_c.x,ot,Hl,rc)+_c.badness;at<=oc&&(sc=_c,oc=at)}return{index:at,x:st,priorBreak:sc,badness:oc}}function zc(at){return at?zc(at.priorBreak).concat(at.index):[]}function Pc(at,st,ot,ut,Hl,rc){if(!at)return[];const sc=[],oc=function(at,st,ot,ut,Hl,rc){let sc=0;for(let oc=0;oc<at.length();oc++){const ot=at.getSection(oc);sc+=Ac(at.getCharCode(oc),ot,ut,Hl,st,rc)}return sc/Math.max(1,Math.ceil(sc/ot))}(at,st,ot,ut,Hl,rc),_c=at.text.indexOf("\u200b")>=0;let wc=0;for(let iu=0;iu<at.length();iu++){const ot=at.getSection(iu),su=at.getCharCode(iu);if(og[su]||(wc+=Ac(su,ot,ut,Hl,st,rc)),iu<at.length()-1){const st=!((Sc=su)<11904)&&(!!Np["CJK Compatibility Forms"](Sc)||!!Np["CJK Compatibility"](Sc)||!!Np["CJK Strokes"](Sc)||!!Np["CJK Symbols and Punctuation"](Sc)||!!Np["Enclosed CJK Letters and Months"](Sc)||!!Np["Halfwidth and Fullwidth Forms"](Sc)||!!Np["Ideographic Description Characters"](Sc)||!!Np["Vertical Forms"](Sc)||Op.test(String.fromCodePoint(Sc)));(lg[su]||st||ot.imageName||iu!==at.length()-2&&cg[at.getCharCode(iu+1)])&&sc.push(Ic(iu+1,wc,oc,sc,Mc(su,at.getCharCode(iu+1),st&&_c),!1))}}var Sc;return zc(Ic(at.length(),wc,oc,sc,0,!0))}function Cc(at){let st=.5,ot=.5;switch(at){case"right":case"top-right":case"bottom-right":st=1;break;case"left":case"top-left":case"bottom-left":st=0}switch(at){case"bottom":case"bottom-right":case"bottom-left":ot=1;break;case"top":case"top-right":case"top-left":ot=0}return{horizontalAlign:st,verticalAlign:ot}}function Bc(at,st,ot){const ut=st.getMaxScale()*ng,{maxImageWidth:Hl,maxImageHeight:rc}=st.getMaxImageSize(at),sc=Math.max(ut,rc*ot);return{verticalLineContentWidth:Math.max(ut,Hl*ot),horizontalLineContentHeight:sc}}function Ec(at){switch(at){case"top":return 0;case"center":return.5;default:return 1}}function Tc(st,ot,ut){return!(st===at.an.horizontal||!ot&&!Ss(ut)||ot&&(og[ut]||(Hl=ut,/\p{sc=Arab}/u.test(String.fromCodePoint(Hl)))));var Hl}function Vc(at,st,ot,ut,Hl,rc){const sc=rc[at.fontStack],oc=function(at,st,ot,ut){if(at&&at.rect)return at;const Hl=st[ot.fontStack],rc=Hl&&Hl[ut];return rc?{rect:null,metrics:rc.metrics}:null}(sc&&sc[st],Hl,at,st);if(null===oc)return null;let _c;if(ot)_c=ut.verticalLineContentWidth-at.scale*ng;else{const st=Ec(at.verticalAlign);_c=(ut.horizontalLineContentHeight-at.scale*ng)*st}return{rect:oc.rect,metrics:oc.metrics,baselineOffset:_c}}function Fc(at,st,ot,ut,Hl){const rc=Hl[at.imageName];if(!rc)return null;const sc=rc.paddedRect,oc=rc.displaySize,_c={width:oc[0],height:oc[1],left:1,top:-3,advance:st?oc[1]:oc[0]};let wc;if(st)wc=ut.verticalLineContentWidth-oc[1]*at.scale;else{const st=Ec(at.verticalAlign);wc=(ut.horizontalLineContentHeight-oc[1]*at.scale)*st}return{rect:sc,metrics:_c,baselineOffset:wc,imageOffset:(st?oc[0]:oc[1])*at.scale-ng*ot}}function Lc(at,st,ot,ut){if(0===ut)return;const Hl=at[ot],rc=(at[ot].x+Hl.metrics.advance*Hl.scale)*ut;for(let sc=st;sc<=ot;sc++)at[sc].x-=rc}function $c(at,st,ot){const{horizontalAlign:ut,verticalAlign:Hl}=Cc(ot),rc=st[0]-at.displaySize[0]*ut,sc=st[1]-at.displaySize[1]*Hl;return{image:at,top:sc,bottom:sc+at.displaySize[1],left:rc,right:rc+at.displaySize[0]}}function Dc(at){var st,ot;let ut=at.left,Hl=at.top,rc=at.right-ut,sc=at.bottom-Hl;const oc=null!==(st=at.image.textFitWidth)&&void 0!==st?st:"stretchOrShrink",_c=null!==(ot=at.image.textFitHeight)&&void 0!==ot?ot:"stretchOrShrink",wc=(at.image.content[2]-at.image.content[0])/(at.image.content[3]-at.image.content[1]);if("proportional"===_c){if("stretchOnly"===oc&&rc/sc<wc||"proportional"===oc){const at=Math.ceil(sc*wc);ut*=at/rc,rc=at}}else if("proportional"===oc&&"stretchOnly"===_c&&0!==wc&&rc/sc>wc){const at=Math.ceil(rc/wc);Hl*=at/sc,sc=at}return{x1:ut,y1:Hl,x2:ut+rc,y2:Hl+sc}}function Oc(at,st,ot,ut,Hl,rc){const sc=at.image;let oc;if(sc.content){const at=sc.content,st=sc.pixelRatio||1;oc=[at[0]/st,at[1]/st,sc.displaySize[0]-at[2]/st,sc.displaySize[1]-at[3]/st]}const _c=st.left*rc,wc=st.right*rc;let Sc,iu,su,lu;"width"===ot||"both"===ot?(lu=Hl[0]+_c-ut[3],iu=Hl[0]+wc+ut[1]):(lu=Hl[0]+(_c+wc-sc.displaySize[0])/2,iu=lu+sc.displaySize[0]);const cu=st.top*rc,uu=st.bottom*rc;return"height"===ot||"both"===ot?(Sc=Hl[1]+cu-ut[0],su=Hl[1]+uu+ut[2]):(Sc=Hl[1]+(cu+uu-sc.displaySize[1])/2,su=Sc+sc.displaySize[1]),{image:sc,top:Sc,right:iu,bottom:su,left:lu,collisionPadding:oc}}const ug=128,hg=32640;function Nc(at,st){const{expression:ot}=st;if("constant"===ot.kind)return{kind:"constant",layoutSize:ot.evaluate(new Cs(at+1))};if("source"===ot.kind)return{kind:"source"};{const{zoomStops:st,interpolationType:ut}=ot;let Hl=0;for(;Hl<st.length&&st[Hl]<=at;)Hl++;Hl=Math.max(0,Hl-1);let rc=Hl;for(;rc<st.length&&st[rc]<at+1;)rc++;rc=Math.min(st.length-1,rc);const sc=st[Hl],oc=st[rc];return"composite"===ot.kind?{kind:"composite",minZoom:sc,maxZoom:oc,interpolationType:ut}:{kind:"camera",minZoom:sc,maxZoom:oc,minSize:ot.evaluate(new Cs(sc)),maxSize:ot.evaluate(new Cs(oc)),interpolationType:ut}}}function Uc(at,st,ot){let ut="never";const Hl=at.get(st);return Hl?ut=Hl:at.get(ot)&&(ut="always"),ut}const dg=Lm.VectorTileFeature.types,pg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Xc(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su){const lu=oc?Math.min(hg,Math.round(oc[0])):0,cu=oc?Math.min(hg,Math.round(oc[1])):0;at.emplaceBack(st,ot,Math.round(32*ut),Math.round(32*Hl),rc,sc,(lu<<1)+(_c?1:0),cu,16*wc,16*Sc,256*iu,256*su)}function Zc(at,st,ot){at.emplaceBack(st.x,st.y,ot),at.emplaceBack(st.x,st.y,ot),at.emplaceBack(st.x,st.y,ot),at.emplaceBack(st.x,st.y,ot)}function Yc(at){for(const st of at.sections)if(zs(st.text))return!0;return!1}class Hc{constructor(at){this.layoutVertexArray=new Ra,this.indexArray=new Ga,this.programConfigurations=at,this.segments=new Ha,this.dynamicLayoutVertexArray=new ja,this.opacityVertexArray=new Na,this.hasVisibleVertices=!1,this.placedSymbolArray=new Aa}isEmpty(){return 0===this.layoutVertexArray.length&&0===this.indexArray.length&&0===this.dynamicLayoutVertexArray.length&&0===this.opacityVertexArray.length}upload(at,st,ot,ut){this.isEmpty()||(ot&&(this.layoutVertexBuffer=at.createVertexBuffer(this.layoutVertexArray,Ym.members),this.indexBuffer=at.createIndexBuffer(this.indexArray,st),this.dynamicLayoutVertexBuffer=at.createVertexBuffer(this.dynamicLayoutVertexArray,Qm.members,!0),this.opacityVertexBuffer=at.createVertexBuffer(this.opacityVertexArray,pg,!0),this.opacityVertexBuffer.itemSize=1),(ot||ut)&&this.programConfigurations.upload(at))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}us("SymbolBuffers",Hc);class Kc{constructor(at,st,ot){this.layoutVertexArray=new at,this.layoutAttributes=st,this.indexArray=new ot,this.segments=new Ha,this.collisionVertexArray=new qa}upload(at){this.layoutVertexBuffer=at.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=at.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=at.createVertexBuffer(this.collisionVertexArray,Km.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}us("CollisionBuffers",Kc);class Jc{constructor(st){this.collisionBoxArray=st.collisionBoxArray,this.zoom=st.zoom,this.globalState=st.globalState,this.overscaling=st.overscaling,this.layers=st.layers,this.layerIds=this.layers.map((at=>at.id)),this.index=st.index,this.pixelRatio=st.pixelRatio,this.sourceLayerIndex=st.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const ot=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Nc(this.zoom,ot["text-size"]),this.iconSizeData=Nc(this.zoom,ot["icon-size"]);const ut=this.layers[0].layout,Hl=ut.get("symbol-sort-key"),rc=ut.get("symbol-z-order");this.canOverlap="never"!==Uc(ut,"text-overlap","text-allow-overlap")||"never"!==Uc(ut,"icon-overlap","icon-allow-overlap")||ut.get("text-ignore-placement")||ut.get("icon-ignore-placement"),this.sortFeaturesByKey="viewport-y"!==rc&&!Hl.isConstant(),this.sortFeaturesByY=("viewport-y"===rc||"auto"===rc&&!this.sortFeaturesByKey)&&this.canOverlap,"point"===ut.get("symbol-placement")&&(this.writingModes=ut.get("text-writing-mode").map((st=>at.an[st]))),this.stateDependentLayerIds=this.layers.filter((at=>at.isStateDependent())).map((at=>at.id)),this.sourceID=st.sourceID}createArrays(){this.text=new Hc(new So(this.layers,this.zoom,(at=>/^text/.test(at)))),this.icon=new Hc(new So(this.layers,this.zoom,(at=>/^icon/.test(at)))),this.glyphOffsetArray=new Ia,this.lineVertexArray=new za,this.symbolInstances=new Ma,this.textAnchorOffsets=new Ca}calculateGlyphDependencies(at,st,ot,ut,Hl){for(let rc=0;rc<at.length;rc++)if(st[at.charCodeAt(rc)]=!0,(ot||ut)&&Hl){const ot=$m[at.charAt(rc)];ot&&(st[ot.charCodeAt(0)]=!0)}}populate(st,ot,ut){const Hl=this.layers[0],rc=Hl.layout,sc=rc.get("text-font"),oc=rc.get("text-field"),_c=rc.get("icon-image"),wc=("constant"!==oc.value.kind||oc.value.value instanceof Te&&!oc.value.value.isEmpty()||oc.value.value.toString().length>0)&&("constant"!==sc.value.kind||sc.value.value.length>0),Sc="constant"!==_c.value.kind||!!_c.value.value||Object.keys(_c.parameters).length>0,iu=rc.get("symbol-sort-key");if(this.features=[],!wc&&!Sc)return;const su=ot.iconDependencies,lu=ot.glyphDependencies,cu=ot.availableImages,uu=new Cs(this.zoom,{globalState:this.globalState});for(const{feature:pu,id:mu,index:gu,sourceLayerIndex:Au}of st){const st=Hl._featureFilter.needGeometry,ot=Po(pu,st);if(!Hl._featureFilter.filter(uu,ot,ut))continue;let oc,_c;if(st||(ot.geometry=zo(pu)),wc){const at=Hl.getValueAndResolveTokens("text-field",ot,ut,cu),st=Te.factory(at),rc=this.hasRTLText=this.hasRTLText||Yc(st);(!rc||"unavailable"===jp.getRTLTextPluginStatus()||rc&&jp.isParsed())&&(oc=ec(st,Hl,ot))}if(Sc){const at=Hl.getValueAndResolveTokens("icon-image",ot,ut,cu);_c=at instanceof Re?at:Re.fromString(at)}if(!oc&&!_c)continue;const yu=this.sortFeaturesByKey?iu.evaluate(ot,{},ut):void 0;if(this.features.push({id:mu,text:oc,icon:_c,index:gu,sourceLayerIndex:Au,geometry:ot.geometry,properties:pu.properties,type:dg[pu.type],sortKey:yu}),_c&&(su[_c.name]=!0),oc){const st=sc.evaluate(ot,{},ut).join(","),Hl="viewport"!==rc.get("text-rotation-alignment")&&"point"!==rc.get("symbol-placement");this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(at.an.vertical)>=0;for(const at of oc.sections)if(at.image)su[at.image.name]=!0;else{const ot=gs(oc.toString()),ut=at.fontStack||st,rc=lu[ut]=lu[ut]||{};this.calculateGlyphDependencies(at.text,rc,Hl,this.allowVerticalPlacement,ot)}}}"line"===rc.get("symbol-placement")&&(this.features=function(at){const st={},ot={},ut=[];let Hl=0;function s(st){ut.push(at[st]),Hl++}function a(at,st,Hl){const rc=ot[at];return delete ot[at],ot[st]=rc,ut[rc].geometry[0].pop(),ut[rc].geometry[0]=ut[rc].geometry[0].concat(Hl[0]),rc}function o(at,ot,Hl){const rc=st[ot];return delete st[ot],st[at]=rc,ut[rc].geometry[0].shift(),ut[rc].geometry[0]=Hl[0].concat(ut[rc].geometry[0]),rc}function l(at,st,ot){const ut=ot?st[0][st[0].length-1]:st[0][0];return`${at}:${ut.x}:${ut.y}`}for(let rc=0;rc<at.length;rc++){const sc=at[rc],oc=sc.geometry,_c=sc.text?sc.text.toString():null;if(!_c){s(rc);continue}const wc=l(_c,oc),Sc=l(_c,oc,!0);if(wc in ot&&Sc in st&&ot[wc]!==st[Sc]){const at=o(wc,Sc,oc),Hl=a(wc,Sc,ut[at].geometry);delete st[wc],delete ot[Sc],ot[l(_c,ut[Hl].geometry,!0)]=Hl,ut[at].geometry=null}else wc in ot?a(wc,Sc,oc):Sc in st?o(wc,Sc,oc):(s(rc),st[wc]=Hl-1,ot[Sc]=Hl-1)}return ut.filter((at=>at.geometry))}(this.features)),this.sortFeaturesByKey&&this.features.sort(((at,st)=>at.sortKey-st.sortKey))}update(at,st,ot){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(at,st,this.layers,ot),this.icon.programConfigurations.updatePaintArrays(at,st,this.layers,ot))}isEmpty(){return 0===this.symbolInstances.length&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(at){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(at),this.iconCollisionBox.upload(at)),this.text.upload(at,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(at,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(at,st){const ot=this.lineVertexArray.length;if(void 0!==at.segment){let ot=at.dist(st[at.segment+1]),ut=at.dist(st[at.segment]);const Hl={};for(let rc=at.segment+1;rc<st.length;rc++)Hl[rc]={x:st[rc].x,y:st[rc].y,tileUnitDistanceFromAnchor:ot},rc<st.length-1&&(ot+=st[rc+1].dist(st[rc]));for(let rc=at.segment||0;rc>=0;rc--)Hl[rc]={x:st[rc].x,y:st[rc].y,tileUnitDistanceFromAnchor:ut},rc>0&&(ut+=st[rc-1].dist(st[rc]));for(let at=0;at<st.length;at++){const st=Hl[at];this.lineVertexArray.emplaceBack(st.x,st.y,st.tileUnitDistanceFromAnchor)}}return{lineStartIndex:ot,lineLength:this.lineVertexArray.length-ot}}addSymbols(st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su){const lu=st.indexArray,cu=st.layoutVertexArray,uu=st.segments.prepareSegment(4*ot.length,cu,lu,this.canOverlap?sc.sortKey:void 0),pu=this.glyphOffsetArray.length,mu=uu.vertexLength,gu=this.allowVerticalPlacement&&oc===at.an.vertical?Math.PI/2:0,Au=sc.text&&sc.text.sections;for(let at=0;at<ot.length;at++){const{tl:Hl,tr:rc,bl:oc,br:wc,tex:Sc,pixelOffsetTL:iu,pixelOffsetBR:pu,minFontScaleX:mu,minFontScaleY:yu,glyphOffset:_u,isSDF:xu,sectionIndex:Su}=ot[at],Du=uu.vertexLength,Lu=_u[1];Xc(cu,_c.x,_c.y,Hl.x,Lu+Hl.y,Sc.x,Sc.y,ut,xu,iu.x,iu.y,mu,yu),Xc(cu,_c.x,_c.y,rc.x,Lu+rc.y,Sc.x+Sc.w,Sc.y,ut,xu,pu.x,iu.y,mu,yu),Xc(cu,_c.x,_c.y,oc.x,Lu+oc.y,Sc.x,Sc.y+Sc.h,ut,xu,iu.x,pu.y,mu,yu),Xc(cu,_c.x,_c.y,wc.x,Lu+wc.y,Sc.x+Sc.w,Sc.y+Sc.h,ut,xu,pu.x,pu.y,mu,yu),Zc(st.dynamicLayoutVertexArray,_c,gu),lu.emplaceBack(Du,Du+2,Du+1),lu.emplaceBack(Du+1,Du+2,Du+3),uu.vertexLength+=4,uu.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(_u[0]),at!==ot.length-1&&Su===ot[at+1].sectionIndex||st.programConfigurations.populatePaintArrays(cu.length,sc,sc.index,{},su,Au&&Au[Su])}st.placedSymbolArray.emplaceBack(_c.x,_c.y,pu,this.glyphOffsetArray.length-pu,mu,wc,Sc,_c.segment,ut?ut[0]:0,ut?ut[1]:0,Hl[0],Hl[1],oc,0,!1,0,iu)}_addCollisionDebugVertex(at,st,ot,ut,Hl,rc){return st.emplaceBack(0,0),at.emplaceBack(ot.x,ot.y,ut,Hl,Math.round(rc.x),Math.round(rc.y))}addCollisionDebugVertices(at,st,ot,ut,Hl,sc,oc){const _c=Hl.segments.prepareSegment(4,Hl.layoutVertexArray,Hl.indexArray),wc=_c.vertexLength,Sc=Hl.layoutVertexArray,iu=Hl.collisionVertexArray,su=oc.anchorX,lu=oc.anchorY;this._addCollisionDebugVertex(Sc,iu,sc,su,lu,new rc(at,st)),this._addCollisionDebugVertex(Sc,iu,sc,su,lu,new rc(ot,st)),this._addCollisionDebugVertex(Sc,iu,sc,su,lu,new rc(ot,ut)),this._addCollisionDebugVertex(Sc,iu,sc,su,lu,new rc(at,ut)),_c.vertexLength+=4;const cu=Hl.indexArray;cu.emplaceBack(wc,wc+1),cu.emplaceBack(wc+1,wc+2),cu.emplaceBack(wc+2,wc+3),cu.emplaceBack(wc+3,wc),_c.primitiveLength+=4}addDebugCollisionBoxes(at,st,ot,ut){for(let Hl=at;Hl<st;Hl++){const at=this.collisionBoxArray.get(Hl);this.addCollisionDebugVertices(at.x1,at.y1,at.x2,at.y2,ut?this.textCollisionBox:this.iconCollisionBox,at.anchorPoint,ot)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Kc(Ua,Xm.members,Xa),this.iconCollisionBox=new Kc(Ua,Xm.members,Xa);for(let at=0;at<this.symbolInstances.length;at++){const st=this.symbolInstances.get(at);this.addDebugCollisionBoxes(st.textBoxStartIndex,st.textBoxEndIndex,st,!0),this.addDebugCollisionBoxes(st.verticalTextBoxStartIndex,st.verticalTextBoxEndIndex,st,!0),this.addDebugCollisionBoxes(st.iconBoxStartIndex,st.iconBoxEndIndex,st,!1),this.addDebugCollisionBoxes(st.verticalIconBoxStartIndex,st.verticalIconBoxEndIndex,st,!1)}}_deserializeCollisionBoxesForSymbol(at,st,ot,ut,Hl,rc,sc,oc,_c){const wc={};for(let Sc=st;Sc<ot;Sc++){const st=at.get(Sc);wc.textBox={x1:st.x1,y1:st.y1,x2:st.x2,y2:st.y2,anchorPointX:st.anchorPointX,anchorPointY:st.anchorPointY},wc.textFeatureIndex=st.featureIndex;break}for(let Sc=ut;Sc<Hl;Sc++){const st=at.get(Sc);wc.verticalTextBox={x1:st.x1,y1:st.y1,x2:st.x2,y2:st.y2,anchorPointX:st.anchorPointX,anchorPointY:st.anchorPointY},wc.verticalTextFeatureIndex=st.featureIndex;break}for(let Sc=rc;Sc<sc;Sc++){const st=at.get(Sc);wc.iconBox={x1:st.x1,y1:st.y1,x2:st.x2,y2:st.y2,anchorPointX:st.anchorPointX,anchorPointY:st.anchorPointY},wc.iconFeatureIndex=st.featureIndex;break}for(let Sc=oc;Sc<_c;Sc++){const st=at.get(Sc);wc.verticalIconBox={x1:st.x1,y1:st.y1,x2:st.x2,y2:st.y2,anchorPointX:st.anchorPointX,anchorPointY:st.anchorPointY},wc.verticalIconFeatureIndex=st.featureIndex;break}return wc}deserializeCollisionBoxes(at){this.collisionArrays=[];for(let st=0;st<this.symbolInstances.length;st++){const ot=this.symbolInstances.get(st);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(at,ot.textBoxStartIndex,ot.textBoxEndIndex,ot.verticalTextBoxStartIndex,ot.verticalTextBoxEndIndex,ot.iconBoxStartIndex,ot.iconBoxEndIndex,ot.verticalIconBoxStartIndex,ot.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(at,st){const ot=at.placedSymbolArray.get(st),ut=ot.vertexStartIndex+4*ot.numGlyphs;for(let Hl=ot.vertexStartIndex;Hl<ut;Hl+=4)at.indexArray.emplaceBack(Hl,Hl+2,Hl+1),at.indexArray.emplaceBack(Hl+1,Hl+2,Hl+3)}getSortedSymbolIndexes(at){if(this.sortedAngle===at&&void 0!==this.symbolInstanceIndexes)return this.symbolInstanceIndexes;const st=Math.sin(at),ot=Math.cos(at),ut=[],Hl=[],rc=[];for(let sc=0;sc<this.symbolInstances.length;++sc){rc.push(sc);const at=this.symbolInstances.get(sc);ut.push(0|Math.round(st*at.anchorX+ot*at.anchorY)),Hl.push(at.featureIndex)}return rc.sort(((at,st)=>ut[at]-ut[st]||Hl[st]-Hl[at])),rc}addToSortKeyRanges(at,st){const ot=this.sortKeyRanges[this.sortKeyRanges.length-1];ot&&ot.sortKey===st?ot.symbolInstanceEnd=at+1:this.sortKeyRanges.push({sortKey:st,symbolInstanceStart:at,symbolInstanceEnd:at+1})}sortFeatures(at){if(this.sortFeaturesByY&&this.sortedAngle!==at&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(at),this.sortedAngle=at,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const at of this.symbolInstanceIndexes){const st=this.symbolInstances.get(at);this.featureSortOrder.push(st.featureIndex),[st.rightJustifiedTextSymbolIndex,st.centerJustifiedTextSymbolIndex,st.leftJustifiedTextSymbolIndex].forEach(((at,st,ot)=>{at>=0&&ot.indexOf(at)===st&&this.addIndicesForPlacedSymbol(this.text,at)})),st.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,st.verticalPlacedTextSymbolIndex),st.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,st.placedIconSymbolIndex),st.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,st.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let mg,gg;us("SymbolBucket",Jc,{omit:["layers","collisionBoxArray","features","compareText"]}),Jc.MAX_GLYPHS=65535,Jc.addDynamicAttributes=Zc;var fg={get paint(){return gg=gg||new qs({"icon-opacity":new Rs(hh.paint_symbol["icon-opacity"]),"icon-color":new Rs(hh.paint_symbol["icon-color"]),"icon-halo-color":new Rs(hh.paint_symbol["icon-halo-color"]),"icon-halo-width":new Rs(hh.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Rs(hh.paint_symbol["icon-halo-blur"]),"icon-translate":new Os(hh.paint_symbol["icon-translate"]),"icon-translate-anchor":new Os(hh.paint_symbol["icon-translate-anchor"]),"text-opacity":new Rs(hh.paint_symbol["text-opacity"]),"text-color":new Rs(hh.paint_symbol["text-color"],{runtimeType:ad,getOverride:at=>at.textColor,hasOverride:at=>!!at.textColor}),"text-halo-color":new Rs(hh.paint_symbol["text-halo-color"]),"text-halo-width":new Rs(hh.paint_symbol["text-halo-width"]),"text-halo-blur":new Rs(hh.paint_symbol["text-halo-blur"]),"text-translate":new Os(hh.paint_symbol["text-translate"]),"text-translate-anchor":new Os(hh.paint_symbol["text-translate-anchor"])})},get layout(){return mg=mg||new qs({"symbol-placement":new Os(hh.layout_symbol["symbol-placement"]),"symbol-spacing":new Os(hh.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Os(hh.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Rs(hh.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Os(hh.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Os(hh.layout_symbol["icon-allow-overlap"]),"icon-overlap":new Os(hh.layout_symbol["icon-overlap"]),"icon-ignore-placement":new Os(hh.layout_symbol["icon-ignore-placement"]),"icon-optional":new Os(hh.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Os(hh.layout_symbol["icon-rotation-alignment"]),"icon-size":new Rs(hh.layout_symbol["icon-size"]),"icon-text-fit":new Os(hh.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Os(hh.layout_symbol["icon-text-fit-padding"]),"icon-image":new Rs(hh.layout_symbol["icon-image"]),"icon-rotate":new Rs(hh.layout_symbol["icon-rotate"]),"icon-padding":new Rs(hh.layout_symbol["icon-padding"]),"icon-keep-upright":new Os(hh.layout_symbol["icon-keep-upright"]),"icon-offset":new Rs(hh.layout_symbol["icon-offset"]),"icon-anchor":new Rs(hh.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Os(hh.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Os(hh.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Os(hh.layout_symbol["text-rotation-alignment"]),"text-field":new Rs(hh.layout_symbol["text-field"]),"text-font":new Rs(hh.layout_symbol["text-font"]),"text-size":new Rs(hh.layout_symbol["text-size"]),"text-max-width":new Rs(hh.layout_symbol["text-max-width"]),"text-line-height":new Os(hh.layout_symbol["text-line-height"]),"text-letter-spacing":new Rs(hh.layout_symbol["text-letter-spacing"]),"text-justify":new Rs(hh.layout_symbol["text-justify"]),"text-radial-offset":new Rs(hh.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Os(hh.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new Rs(hh.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new Rs(hh.layout_symbol["text-anchor"]),"text-max-angle":new Os(hh.layout_symbol["text-max-angle"]),"text-writing-mode":new Os(hh.layout_symbol["text-writing-mode"]),"text-rotate":new Rs(hh.layout_symbol["text-rotate"]),"text-padding":new Os(hh.layout_symbol["text-padding"]),"text-keep-upright":new Os(hh.layout_symbol["text-keep-upright"]),"text-transform":new Rs(hh.layout_symbol["text-transform"]),"text-offset":new Rs(hh.layout_symbol["text-offset"]),"text-allow-overlap":new Os(hh.layout_symbol["text-allow-overlap"]),"text-overlap":new Os(hh.layout_symbol["text-overlap"]),"text-ignore-placement":new Os(hh.layout_symbol["text-ignore-placement"]),"text-optional":new Os(hh.layout_symbol["text-optional"])})}};class eh{constructor(at){if(void 0===at.property.overrides)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=at.property.overrides?at.property.overrides.runtimeType:td,this.defaultValue=at}evaluate(at){if(at.formattedSection){const st=this.defaultValue.property.overrides;if(st&&st.hasOverride(at.formattedSection))return st.getOverride(at.formattedSection)}return at.feature&&at.featureState?this.defaultValue.evaluate(at.feature,at.featureState):this.defaultValue.property.specification.default}eachChild(at){this.defaultValue.isConstant()||at(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}us("FormatSectionOverride",eh,{omit:["defaultValue"]});class rh extends Xs{constructor(at){super(at,fg)}recalculate(at,st){if(super.recalculate(at,st),"auto"===this.layout.get("icon-rotation-alignment")&&(this.layout._values["icon-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-rotation-alignment")&&(this.layout._values["text-rotation-alignment"]="point"!==this.layout.get("symbol-placement")?"map":"viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]="map"===this.layout.get("text-rotation-alignment")?"map":"viewport"),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),"point"===this.layout.get("symbol-placement")){const at=this.layout.get("text-writing-mode");if(at){const st=[];for(const ot of at)st.indexOf(ot)<0&&st.push(ot);this.layout._values["text-writing-mode"]=st}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(at,st,ot,ut){const Hl=this.layout.get(at).evaluate(st,{},ot,ut),rc=this._unevaluatedLayout._values[at];return rc.isDataDriven()||ii(rc.value)||!Hl?Hl:function(at,st){return st.replace(/{([^{}]+)}/g,((st,ot)=>at&&ot in at?String(at[ot]):""))}(st.properties,Hl)}createBucket(at){return new Jc(at)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const at of fg.paint.overridableProperties){if(!rh.hasPaintOverride(this.layout,at))continue;const st=this.paint.get(at),ot=new eh(st),ut=new ni(ot,st.property.specification);let Hl=null;Hl="constant"===st.value.kind||"source"===st.value.kind?new ai("source",ut):new oi("composite",ut,st.value.zoomStops),this.paint._values[at]=new $s(st.property,Hl,st.parameters)}}_handleOverridablePaintPropertyUpdate(at,st,ot){return!(!this.layout||st.isDataDriven()||ot.isDataDriven())&&rh.hasPaintOverride(this.layout,at)}static hasPaintOverride(at,st){const ot=at.get("text-field"),ut=fg.paint.properties[st];let Hl=!1;const s=at=>{for(const st of at)if(ut.overrides&&ut.overrides.hasOverride(st))return void(Hl=!0)};if("constant"===ot.value.kind&&ot.value.value instanceof Te)s(ot.value.value.sections);else if("source"===ot.value.kind){const t=at=>{Hl||(at instanceof Xe&&qe(at.value)===ud?s(at.value.sections):at instanceof Cr?s(at.sections):at.eachChild(t))},at=ot.value;at._styleExpression&&t(at._styleExpression.expression)}return Hl}}let Ag;var yg={get paint(){return Ag=Ag||new qs({"background-color":new Os(hh.paint_background["background-color"]),"background-pattern":new Ns(hh.paint_background["background-pattern"]),"background-opacity":new Os(hh.paint_background["background-opacity"])})}};class sh extends Xs{constructor(at){super(at,yg)}}let vg;var _g={get paint(){return vg=vg||new qs({"raster-opacity":new Os(hh.paint_raster["raster-opacity"]),"raster-hue-rotate":new Os(hh.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Os(hh.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Os(hh.paint_raster["raster-brightness-max"]),"raster-saturation":new Os(hh.paint_raster["raster-saturation"]),"raster-contrast":new Os(hh.paint_raster["raster-contrast"]),"raster-resampling":new Os(hh.paint_raster["raster-resampling"]),"raster-fade-duration":new Os(hh.paint_raster["raster-fade-duration"])})}};class lh extends Xs{constructor(at){super(at,_g)}}class uh extends Xs{constructor(at){super(at,{}),this.onAdd=at=>{this.implementation.onAdd&&this.implementation.onAdd(at,at.painter.context.gl)},this.onRemove=at=>{this.implementation.onRemove&&this.implementation.onRemove(at,at.painter.context.gl)},this.implementation=at}is3D(){return"3d"===this.implementation.renderingMode}hasOffscreenPass(){return void 0!==this.implementation.prerender}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class ch{constructor(at){this._methodToThrottle=at,this._triggered=!1,"undefined"!=typeof MessageChannel&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const xg={once:!0},bg=6371008.8;class fh{constructor(at,st){if(isNaN(at)||isNaN(st))throw new Error(`Invalid LngLat object: (${at}, ${st})`);if(this.lng=+at,this.lat=+st,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new fh(R(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(at){const st=Math.PI/180,ot=this.lat*st,ut=at.lat*st,Hl=Math.sin(ot)*Math.sin(ut)+Math.cos(ot)*Math.cos(ut)*Math.cos((at.lng-this.lng)*st);return bg*Math.acos(Math.min(Hl,1))}static convert(at){if(at instanceof fh)return at;if(Array.isArray(at)&&(2===at.length||3===at.length))return new fh(Number(at[0]),Number(at[1]));if(!Array.isArray(at)&&"object"==typeof at&&null!==at)return new fh(Number("lng"in at?at.lng:at.lon),Number(at.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const wg=2*Math.PI*bg;function yh(at){return wg*Math.cos(at*Math.PI/180)}function mh(at){return(180+at)/360}function gh(at){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+at*Math.PI/360)))/360}function xh(at,st){return at/yh(st)}function vh(at){return 360/Math.PI*Math.atan(Math.exp((180-360*at)*Math.PI/180))-90}function bh(at,st){return at*yh(vh(st))}class wh{constructor(at,st,ot=0){this.x=+at,this.y=+st,this.z=+ot}static fromLngLat(at,st=0){const ot=fh.convert(at);return new wh(mh(ot.lng),gh(ot.lat),xh(st,ot.lat))}toLngLat(){return new fh(360*this.x-180,vh(this.y))}toAltitude(){return bh(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/wg*(at=vh(this.y),1/Math.cos(at*Math.PI/180));var at}}function _h(at,st,ot){var ut=2*Math.PI*6378137/256/Math.pow(2,ot);return[at*ut-2*Math.PI*6378137/2,st*ut-2*Math.PI*6378137/2]}class Sh{constructor(at,st,ot){if(!function(at,st,ot){return!(at<0||at>25||ot<0||ot>=Math.pow(2,at)||st<0||st>=Math.pow(2,at))}(at,st,ot))throw new Error(`x=${st}, y=${ot}, z=${at} outside of bounds. 0<=x<${Math.pow(2,at)}, 0<=y<${Math.pow(2,at)} 0<=z<=25 `);this.z=at,this.x=st,this.y=ot,this.key=Mh(0,at,at,st,ot)}equals(at){return this.z===at.z&&this.x===at.x&&this.y===at.y}url(at,st,ot){const ut=(rc=this.y,sc=this.z,oc=_h(256*(Hl=this.x),256*(rc=Math.pow(2,sc)-rc-1),sc),_c=_h(256*(Hl+1),256*(rc+1),sc),oc[0]+","+oc[1]+","+_c[0]+","+_c[1]);var Hl,rc,sc,oc,_c;const wc=function(at,st,ot){let ut,Hl="";for(let rc=at;rc>0;rc--)ut=1<<rc-1,Hl+=(st&ut?1:0)+(ot&ut?2:0);return Hl}(this.z,this.x,this.y);return at[(this.x+this.y)%at.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String("tms"===ot?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,st>1?"@2x":"").replace(/{quadkey}/g,wc).replace(/{bbox-epsg-3857}/g,ut)}isChildOf(at){const st=this.z-at.z;return st>0&&at.x===this.x>>st&&at.y===this.y>>st}getTilePoint(at){const st=Math.pow(2,this.z);return new rc((at.x*st-this.x)*cu,(at.y*st-this.y)*cu)}toString(){return`${this.z}/${this.x}/${this.y}`}}class Ah{constructor(at,st){this.wrap=at,this.canonical=st,this.key=Mh(at,st.z,st.z,st.x,st.y)}}class kh{constructor(at,st,ot,ut,Hl){if(this.terrainRttPosMatrix32f=null,at<ot)throw new Error(`overscaledZ should be >= z; overscaledZ = ${at}; z = ${ot}`);this.overscaledZ=at,this.wrap=st,this.canonical=new Sh(ot,+ut,+Hl),this.key=Mh(st,at,ot,ut,Hl)}clone(){return new kh(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(at){return this.overscaledZ===at.overscaledZ&&this.wrap===at.wrap&&this.canonical.equals(at.canonical)}scaledTo(at){if(at>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${at}; overscaledZ = ${this.overscaledZ}`);const st=this.canonical.z-at;return at>this.canonical.z?new kh(at,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new kh(at,this.wrap,at,this.canonical.x>>st,this.canonical.y>>st)}calculateScaledKey(at,st){if(at>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${at}; overscaledZ = ${this.overscaledZ}`);const ot=this.canonical.z-at;return at>this.canonical.z?Mh(this.wrap*+st,at,this.canonical.z,this.canonical.x,this.canonical.y):Mh(this.wrap*+st,at,at,this.canonical.x>>ot,this.canonical.y>>ot)}isChildOf(at){if(at.wrap!==this.wrap)return!1;const st=this.canonical.z-at.canonical.z;return 0===at.overscaledZ||at.overscaledZ<this.overscaledZ&&at.canonical.x===this.canonical.x>>st&&at.canonical.y===this.canonical.y>>st}children(at){if(this.overscaledZ>=at)return[new kh(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const st=this.canonical.z+1,ot=2*this.canonical.x,ut=2*this.canonical.y;return[new kh(st,this.wrap,st,ot,ut),new kh(st,this.wrap,st,ot+1,ut),new kh(st,this.wrap,st,ot,ut+1),new kh(st,this.wrap,st,ot+1,ut+1)]}isLessThan(at){return this.wrap<at.wrap||!(this.wrap>at.wrap)&&(this.overscaledZ<at.overscaledZ||!(this.overscaledZ>at.overscaledZ)&&(this.canonical.x<at.canonical.x||!(this.canonical.x>at.canonical.x)&&this.canonical.y<at.canonical.y))}wrapped(){return new kh(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(at){return new kh(this.overscaledZ,at,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new Ah(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(at){return this.canonical.getTilePoint(new wh(at.x-this.wrap,at.y))}}function Mh(at,st,ot,ut,Hl){(at*=2)<0&&(at=-1*at-1);const rc=1<<ot;return(rc*rc*at+rc*Hl+ut).toString(36)+ot.toString(36)+st.toString(36)}us("CanonicalTileID",Sh),us("OverscaledTileID",kh,{omit:["terrainRttPosMatrix32f"]});class Ih{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(at){return this.minX=Math.min(this.minX,at.x),this.minY=Math.min(this.minY,at.y),this.maxX=Math.max(this.maxX,at.x),this.maxY=Math.max(this.maxY,at.y),this}expandBy(at){return this.minX-=at,this.minY-=at,this.maxX+=at,this.maxY+=at,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(at){return this.expandBy(-at)}map(at){const st=new Ih;return st.extend(at(new rc(this.minX,this.minY))),st.extend(at(new rc(this.maxX,this.minY))),st.extend(at(new rc(this.minX,this.maxY))),st.extend(at(new rc(this.maxX,this.maxY))),st}static fromPoints(at){const st=new Ih;for(const ot of at)st.extend(ot);return st}contains(at){return at.x>=this.minX&&at.x<=this.maxX&&at.y>=this.minY&&at.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(at){return!this.empty()&&!at.empty()&&at.minX>=this.minX&&at.maxX<=this.maxX&&at.minY>=this.minY&&at.maxY<=this.maxY}intersects(at){return!this.empty()&&!at.empty()&&at.minX<=this.maxX&&at.maxX>=this.minX&&at.minY<=this.maxY&&at.maxY>=this.minY}}class zh{constructor(at){this._stringToNumber={},this._numberToString=[];for(let st=0;st<at.length;st++){const ot=at[st];this._stringToNumber[ot]=st,this._numberToString[st]=ot}}encode(at){return this._stringToNumber[at]}decode(at){if(at>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${at} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[at]}}class Ph{constructor(at,st,ot,ut,Hl){this.type="Feature",this._vectorTileFeature=at,at._z=st,at._x=ot,at._y=ut,this.properties=at.properties,this.id=Hl}get geometry(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(at){this._geometry=at}toJSON(){const at={geometry:this.geometry};for(const st in this)"_geometry"!==st&&"_vectorTileFeature"!==st&&(at[st]=this[st]);return at}}class Ch{constructor(at,st){this.tileID=at,this.x=at.canonical.x,this.y=at.canonical.y,this.z=at.canonical.z,this.grid=new os(cu,16,0),this.grid3D=new os(cu,16,0),this.featureIndexArray=new Ea,this.promoteId=st}insert(at,st,ot,ut,Hl,rc){const sc=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(ot,ut,Hl);const oc=rc?this.grid3D:this.grid;for(let _c=0;_c<st.length;_c++){const at=st[_c],ot=[1/0,1/0,-1/0,-1/0];for(let st=0;st<at.length;st++){const ut=at[st];ot[0]=Math.min(ot[0],ut.x),ot[1]=Math.min(ot[1],ut.y),ot[2]=Math.max(ot[2],ut.x),ot[3]=Math.max(ot[3],ut.y)}ot[0]<cu&&ot[1]<cu&&ot[2]>=0&&ot[3]>=0&&oc.insert(sc,ot[0],ot[1],ot[2],ot[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new Lm.VectorTile(new sg(this.rawTileData)).layers,this.sourceLayerCoder=new zh(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(at,st,ot,ut){this.loadVTLayers();const Hl=at.params,sc=cu/at.tileSize/at.scale,oc=di(Hl.filter),_c=at.queryGeometry,wc=at.queryPadding*sc,Sc=Ih.fromPoints(_c),iu=this.grid.query(Sc.minX-wc,Sc.minY-wc,Sc.maxX+wc,Sc.maxY+wc),su=Ih.fromPoints(at.cameraQueryGeometry).expandBy(wc),lu=this.grid3D.query(su.minX,su.minY,su.maxX,su.maxY,((st,ot,ut,Hl)=>function(at,st,ot,ut,Hl){for(const rc of at)if(st<=rc.x&&ot<=rc.y&&ut>=rc.x&&Hl>=rc.y)return!0;const sc=[new rc(st,ot),new rc(st,Hl),new rc(ut,Hl),new rc(ut,ot)];if(at.length>2)for(const rc of sc)if(No(at,rc))return!0;for(let rc=0;rc<at.length-1;rc++)if(Uo(at[rc],at[rc+1],sc))return!0;return!1}(at.cameraQueryGeometry,st-wc,ot-wc,ut+wc,Hl+wc)));for(const rc of lu)iu.push(rc);iu.sort(Eh);const uu={};let pu;for(let rc=0;rc<iu.length;rc++){const wc=iu[rc];if(wc===pu)continue;pu=wc;const Sc=this.featureIndexArray.get(wc);let su=null;this.loadMatchingFeature(uu,Sc.bucketIndex,Sc.sourceLayerIndex,Sc.featureIndex,oc,Hl.layers,Hl.availableImages,st,ot,ut,((st,ot,ut)=>(su||(su=zo(st)),ot.queryIntersectsFeature({queryGeometry:_c,feature:st,featureState:ut,geometry:su,zoom:this.z,transform:at.transform,pixelsToTileUnits:sc,pixelPosMatrix:at.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:at.getElevation}))))}return uu}loadMatchingFeature(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc){const iu=this.bucketLayerIDs[st];if(rc&&!iu.some((at=>rc.has(at))))return;const su=this.sourceLayerCoder.decode(ot),lu=this.vtLayers[su].feature(ut);if(Hl.needGeometry){const at=Po(lu,!0);if(!Hl.filter(new Cs(this.tileID.overscaledZ),at,this.tileID.canonical))return}else if(!Hl.filter(new Cs(this.tileID.overscaledZ),lu))return;const cu=this.getId(lu,su);for(let uu=0;uu<iu.length;uu++){const st=iu[uu];if(rc&&!rc.has(st))continue;const ot=oc[st];if(!ot)continue;let Hl={};cu&&wc&&(Hl=wc.getState(ot.sourceLayer||"_geojsonTileLayer",cu));const su=j({},_c[st]);su.paint=Bh(su.paint,ot.paint,lu,Hl,sc),su.layout=Bh(su.layout,ot.layout,lu,Hl,sc);const pu=!Sc||Sc(lu,ot,Hl);if(!pu)continue;const mu=new Ph(lu,this.z,this.x,this.y,cu);mu.layer=su;let gu=at[st];void 0===gu&&(gu=at[st]=[]),gu.push({featureIndex:ut,feature:mu,intersectionZ:pu})}}lookupSymbolFeatures(at,st,ot,ut,Hl,rc,sc,oc){const _c={};this.loadVTLayers();const wc=di(Hl);for(const Sc of at)this.loadMatchingFeature(_c,ot,ut,Sc,wc,rc,sc,oc,st);return _c}hasLayer(at){for(const st of this.bucketLayerIDs)for(const ot of st)if(at===ot)return!0;return!1}getId(at,st){var ot;let ut=at.id;return this.promoteId&&(ut=at.properties["string"==typeof this.promoteId?this.promoteId:this.promoteId[st]],"boolean"==typeof ut&&(ut=Number(ut)),void 0===ut&&(null===(ot=at.properties)||void 0===ot?void 0:ot.cluster)&&this.promoteId&&(ut=Number(at.properties.cluster_id))),ut}}function Bh(at,st,ot,ut,Hl){return U(at,((at,rc)=>{const sc=st instanceof Ds?st.get(rc):null;return sc&&sc.evaluate?sc.evaluate(ot,ut,Hl):sc}))}function Eh(at,st){return st-at}function Th(at,st,ot,ut,Hl){const sc=[];for(let oc=0;oc<at.length;oc++){const _c=at[oc];let wc;for(let at=0;at<_c.length-1;at++){let oc=_c[at],Sc=_c[at+1];oc.x<st&&Sc.x<st||(oc.x<st?oc=new rc(st,oc.y+(st-oc.x)/(Sc.x-oc.x)*(Sc.y-oc.y))._round():Sc.x<st&&(Sc=new rc(st,oc.y+(st-oc.x)/(Sc.x-oc.x)*(Sc.y-oc.y))._round()),oc.y<ot&&Sc.y<ot||(oc.y<ot?oc=new rc(oc.x+(ot-oc.y)/(Sc.y-oc.y)*(Sc.x-oc.x),ot)._round():Sc.y<ot&&(Sc=new rc(oc.x+(ot-oc.y)/(Sc.y-oc.y)*(Sc.x-oc.x),ot)._round()),oc.x>=ut&&Sc.x>=ut||(oc.x>=ut?oc=new rc(ut,oc.y+(ut-oc.x)/(Sc.x-oc.x)*(Sc.y-oc.y))._round():Sc.x>=ut&&(Sc=new rc(ut,oc.y+(ut-oc.x)/(Sc.x-oc.x)*(Sc.y-oc.y))._round()),oc.y>=Hl&&Sc.y>=Hl||(oc.y>=Hl?oc=new rc(oc.x+(Hl-oc.y)/(Sc.y-oc.y)*(Sc.x-oc.x),Hl)._round():Sc.y>=Hl&&(Sc=new rc(oc.x+(Hl-oc.y)/(Sc.y-oc.y)*(Sc.x-oc.x),Hl)._round()),wc&&oc.equals(wc[wc.length-1])||(wc=[oc],sc.push(wc)),wc.push(Sc)))))}}return sc}us("FeatureIndex",Ch,{omit:["rawTileData","sourceLayerCoder"]});class Vh extends rc{constructor(at,st,ot,ut){super(at,st),this.angle=ot,void 0!==ut&&(this.segment=ut)}clone(){return new Vh(this.x,this.y,this.angle,this.segment)}}function Fh(at,st,ot,ut,Hl){if(void 0===st.segment||0===ot)return!0;let rc=st,sc=st.segment+1,oc=0;for(;oc>-ot/2;){if(sc--,sc<0)return!1;oc-=at[sc].dist(rc),rc=at[sc]}oc+=at[sc].dist(at[sc+1]),sc++;const _c=[];let wc=0;for(;oc<ot/2;){const st=at[sc],ot=at[sc+1];if(!ot)return!1;let rc=at[sc-1].angleTo(st)-st.angleTo(ot);for(rc=Math.abs((rc+3*Math.PI)%(2*Math.PI)-Math.PI),_c.push({distance:oc,angleDelta:rc}),wc+=rc;oc-_c[0].distance>ut;)wc-=_c.shift().angleDelta;if(wc>Hl)return!1;sc++,oc+=st.dist(ot)}return!0}function Lh(at){let st=0;for(let ot=0;ot<at.length-1;ot++)st+=at[ot].dist(at[ot+1]);return st}function $h(at,st,ot){return at?.6*st*ot:0}function Dh(at,st){return Math.max(at?at.right-at.left:0,st?st.right-st.left:0)}function Oh(at,st,ot,ut,Hl,rc){const sc=$h(ot,Hl,rc),oc=Dh(ot,ut)*rc;let _c=0;const wc=Lh(at)/2;for(let Sc=0;Sc<at.length-1;Sc++){const ot=at[Sc],ut=at[Sc+1],Hl=ot.dist(ut);if(_c+Hl>wc){const rc=(wc-_c)/Hl,iu=Rd.number(ot.x,ut.x,rc),su=Rd.number(ot.y,ut.y,rc),lu=new Vh(iu,su,ut.angleTo(ot),Sc);return lu._round(),!sc||Fh(at,lu,oc,sc,st)?lu:void 0}_c+=Hl}}function Rh(at,st,ot,ut,Hl,rc,sc,oc,_c){const wc=$h(ut,rc,sc),Sc=Dh(ut,Hl),iu=Sc*sc,su=0===at[0].x||at[0].x===_c||0===at[0].y||at[0].y===_c;return st-iu<st/4&&(st=iu+st/4),jh(at,su?st/2*oc%st:(Sc/2+2*rc)*sc*oc%st,st,wc,ot,iu,su,!1,_c)}function jh(at,st,ot,ut,Hl,rc,sc,oc,_c){const wc=rc/2,Sc=Lh(at);let iu=0,su=st-ot,lu=[];for(let cu=0;cu<at.length-1;cu++){const st=at[cu],sc=at[cu+1],oc=st.dist(sc),uu=sc.angleTo(st);for(;su+ot<iu+oc;){su+=ot;const pu=(su-iu)/oc,mu=Rd.number(st.x,sc.x,pu),gu=Rd.number(st.y,sc.y,pu);if(mu>=0&&mu<_c&&gu>=0&&gu<_c&&su-wc>=0&&su+wc<=Sc){const st=new Vh(mu,gu,uu,cu);st._round(),ut&&!Fh(at,st,rc,ut,Hl)||lu.push(st)}}iu+=oc}return oc||lu.length||sc||(lu=jh(at,iu/2,ot,ut,Hl,rc,sc,!0,_c)),lu}function Nh(at,st,ot,ut){const Hl=[],sc=at.image,oc=sc.pixelRatio,_c=sc.paddedRect.w-2,wc=sc.paddedRect.h-2;let Sc={x1:at.left,y1:at.top,x2:at.right,y2:at.bottom};const iu=sc.stretchX||[[0,_c]],su=sc.stretchY||[[0,wc]],f=(at,st)=>at+st[1]-st[0],lu=iu.reduce(f,0),cu=su.reduce(f,0),uu=_c-lu,pu=wc-cu;let mu=0,gu=lu,Au=0,yu=cu,_u=0,xu=uu,Su=0,Du=pu;if(sc.content&&ut){const st=sc.content,ot=st[2]-st[0],ut=st[3]-st[1];(sc.textFitWidth||sc.textFitHeight)&&(Sc=Dc(at)),mu=Uh(iu,0,st[0]),Au=Uh(su,0,st[1]),gu=Uh(iu,st[0],st[2]),yu=Uh(su,st[1],st[3]),_u=st[0]-mu,Su=st[1]-Au,xu=ot-gu,Du=ut-yu}const Lu=Sc.x1,$u=Sc.y1,hh=Sc.x2-Lu,ed=Sc.y2-$u,C=(at,ut,Hl,_c)=>{const wc=Gh(at.stretch-mu,gu,hh,Lu),Sc=Xh(at.fixed-_u,xu,at.stretch,lu),iu=Gh(ut.stretch-Au,yu,ed,$u),su=Xh(ut.fixed-Su,Du,ut.stretch,cu),uu=Gh(Hl.stretch-mu,gu,hh,Lu),pu=Xh(Hl.fixed-_u,xu,Hl.stretch,lu),td=Gh(_c.stretch-Au,yu,ed,$u),id=Xh(_c.fixed-Su,Du,_c.stretch,cu),nd=new rc(wc,iu),rd=new rc(uu,iu),ad=new rc(uu,td),sd=new rc(wc,td),od=new rc(Sc/oc,su/oc),ld=new rc(pu/oc,id/oc),cd=st*Math.PI/180;if(cd){const at=Math.sin(cd),st=Math.cos(cd),ot=[st,-at,at,st];nd._matMult(ot),rd._matMult(ot),sd._matMult(ot),ad._matMult(ot)}const ud=at.stretch+at.fixed,hd=ut.stretch+ut.fixed;return{tl:nd,tr:rd,bl:sd,br:ad,tex:{x:sc.paddedRect.x+1+ud,y:sc.paddedRect.y+1+hd,w:Hl.stretch+Hl.fixed-ud,h:_c.stretch+_c.fixed-hd},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:od,pixelOffsetBR:ld,minFontScaleX:xu/oc/hh,minFontScaleY:Du/oc/ed,isSDF:ot}};if(ut&&(sc.stretchX||sc.stretchY)){const at=qh(iu,uu,lu),st=qh(su,pu,cu);for(let ot=0;ot<at.length-1;ot++){const ut=at[ot],rc=at[ot+1];for(let at=0;at<st.length-1;at++)Hl.push(C(ut,st[at],rc,st[at+1]))}}else Hl.push(C({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:_c+1},{fixed:0,stretch:wc+1}));return Hl}function Uh(at,st,ot){let ut=0;for(const Hl of at)ut+=Math.max(st,Math.min(ot,Hl[1]))-Math.max(st,Math.min(ot,Hl[0]));return ut}function qh(at,st,ot){const ut=[{fixed:-1,stretch:0}];for(const[Hl,rc]of at){const at=ut[ut.length-1];ut.push({fixed:Hl-at.stretch,stretch:at.stretch}),ut.push({fixed:Hl-at.stretch,stretch:at.stretch+(rc-Hl)})}return ut.push({fixed:st+1,stretch:ot}),ut}function Gh(at,st,ot,ut){return at/st*ot+ut}function Xh(at,st,ot,ut){return at-st*ot/ut}us("Anchor",Vh);class Zh{constructor(at,st,ot,ut,Hl,sc,oc,_c,wc,Sc){var iu;if(this.boxStartIndex=at.length,wc){let at=sc.top,st=sc.bottom;const ot=sc.collisionPadding;ot&&(at-=ot[1],st+=ot[3]);let ut=st-at;ut>0&&(ut=Math.max(10,ut),this.circleDiameter=ut)}else{const wc=(null===(iu=sc.image)||void 0===iu?void 0:iu.content)&&(sc.image.textFitWidth||sc.image.textFitHeight)?Dc(sc):{x1:sc.left,y1:sc.top,x2:sc.right,y2:sc.bottom};wc.y1=wc.y1*oc-_c[0],wc.y2=wc.y2*oc+_c[2],wc.x1=wc.x1*oc-_c[3],wc.x2=wc.x2*oc+_c[1];const su=sc.collisionPadding;if(su&&(wc.x1-=su[0]*oc,wc.y1-=su[1]*oc,wc.x2+=su[2]*oc,wc.y2+=su[3]*oc),Sc){const at=new rc(wc.x1,wc.y1),st=new rc(wc.x2,wc.y1),ot=new rc(wc.x1,wc.y2),ut=new rc(wc.x2,wc.y2),Hl=Sc*Math.PI/180;at._rotate(Hl),st._rotate(Hl),ot._rotate(Hl),ut._rotate(Hl),wc.x1=Math.min(at.x,st.x,ot.x,ut.x),wc.x2=Math.max(at.x,st.x,ot.x,ut.x),wc.y1=Math.min(at.y,st.y,ot.y,ut.y),wc.y2=Math.max(at.y,st.y,ot.y,ut.y)}at.emplaceBack(st.x,st.y,wc.x1,wc.y1,wc.x2,wc.y2,ot,ut,Hl)}this.boxEndIndex=at.length}}class Yh{constructor(at=[],st=(at,st)=>at<st?-1:at>st?1:0){if(this.data=at,this.length=this.data.length,this.compare=st,this.length>0)for(let ot=(this.length>>1)-1;ot>=0;ot--)this._down(ot)}push(at){this.data.push(at),this._up(this.length++)}pop(){if(0===this.length)return;const at=this.data[0],st=this.data.pop();return--this.length>0&&(this.data[0]=st,this._down(0)),at}peek(){return this.data[0]}_up(at){const{data:st,compare:ot}=this,ut=st[at];for(;at>0;){const Hl=at-1>>1,rc=st[Hl];if(ot(ut,rc)>=0)break;st[at]=rc,at=Hl}st[at]=ut}_down(at){const{data:st,compare:ot}=this,ut=this.length>>1,Hl=st[at];for(;at<ut;){let ut=1+(at<<1);const rc=ut+1;if(rc<this.length&&ot(st[rc],st[ut])<0&&(ut=rc),ot(st[ut],Hl)>=0)break;st[at]=st[ut],at=ut}st[at]=Hl}}function Hh(at,st=1,ot=!1){const ut=Ih.fromPoints(at[0]),Hl=Math.min(ut.width(),ut.height());let sc=Hl/2;const oc=new Yh([],Kh),{minX:_c,minY:wc,maxX:Sc,maxY:iu}=ut;if(0===Hl)return new rc(_c,wc);for(let rc=_c;rc<Sc;rc+=Hl)for(let st=wc;st<iu;st+=Hl)oc.push(new Jh(rc+sc,st+sc,sc,at));let su=function(at){let st=0,ot=0,ut=0;const Hl=at[0];for(let rc=0,sc=Hl.length,oc=sc-1;rc<sc;oc=rc++){const at=Hl[rc],sc=Hl[oc],_c=at.x*sc.y-sc.x*at.y;ot+=(at.x+sc.x)*_c,ut+=(at.y+sc.y)*_c,st+=3*_c}return new Jh(ot/st,ut/st,0,at)}(at),lu=oc.length;for(;oc.length;){const ut=oc.pop();(ut.d>su.d||!su.d)&&(su=ut,ot&&console.log("found best %d after %d probes",Math.round(1e4*ut.d)/1e4,lu)),ut.max-su.d<=st||(sc=ut.h/2,oc.push(new Jh(ut.p.x-sc,ut.p.y-sc,sc,at)),oc.push(new Jh(ut.p.x+sc,ut.p.y-sc,sc,at)),oc.push(new Jh(ut.p.x-sc,ut.p.y+sc,sc,at)),oc.push(new Jh(ut.p.x+sc,ut.p.y+sc,sc,at)),lu+=4)}return ot&&(console.log(`num probes: ${lu}`),console.log(`best distance: ${su.d}`)),su.p}function Kh(at,st){return st.max-at.max}function Jh(at,st,ot,ut){this.p=new rc(at,st),this.h=ot,this.d=function(at,st){let ot=!1,ut=1/0;for(let Hl=0;Hl<st.length;Hl++){const rc=st[Hl];for(let st=0,Hl=rc.length,sc=Hl-1;st<Hl;sc=st++){const Hl=rc[st],oc=rc[sc];Hl.y>at.y!=oc.y>at.y&&at.x<(oc.x-Hl.x)*(at.y-Hl.y)/(oc.y-Hl.y)+Hl.x&&(ot=!ot),ut=Math.min(ut,Ro(at,Hl,oc))}}return(ot?1:-1)*Math.sqrt(ut)}(this.p,ut),this.max=this.d+this.h*Math.SQRT2}var Eg;at.aD=void 0,(Eg=at.aD||(at.aD={}))[Eg.center=1]="center",Eg[Eg.left=2]="left",Eg[Eg.right=3]="right",Eg[Eg.top=4]="top",Eg[Eg.bottom=5]="bottom",Eg[Eg["top-left"]=6]="top-left",Eg[Eg["top-right"]=7]="top-right",Eg[Eg["bottom-left"]=8]="bottom-left",Eg[Eg["bottom-right"]=9]="bottom-right";const Mg=Number.POSITIVE_INFINITY;function tp(at,st){return st[1]!==Mg?function(at,st,ot){let ut=0,Hl=0;switch(st=Math.abs(st),ot=Math.abs(ot),at){case"top-right":case"top-left":case"top":Hl=ot-7;break;case"bottom-right":case"bottom-left":case"bottom":Hl=7-ot}switch(at){case"top-right":case"bottom-right":case"right":ut=-st;break;case"top-left":case"bottom-left":case"left":ut=st}return[ut,Hl]}(at,st[0],st[1]):function(at,st){let ot=0,ut=0;st<0&&(st=0);const Hl=st/Math.SQRT2;switch(at){case"top-right":case"top-left":ut=Hl-7;break;case"bottom-right":case"bottom-left":ut=7-Hl;break;case"bottom":ut=7-st;break;case"top":ut=st-7}switch(at){case"top-right":case"bottom-right":ot=-Hl;break;case"top-left":case"bottom-left":ot=Hl;break;case"left":ot=st;break;case"right":ot=-st}return[ot,ut]}(at,st[0])}function ep(at,st,ot){var ut;const Hl=at.layout,rc=null===(ut=Hl.get("text-variable-anchor-offset"))||void 0===ut?void 0:ut.evaluate(st,{},ot);if(rc){const at=rc.values,st=[];for(let ot=0;ot<at.length;ot+=2){const ut=st[ot]=at[ot],Hl=at[ot+1].map((at=>at*ng));ut.startsWith("top")?Hl[1]-=7:ut.startsWith("bottom")&&(Hl[1]+=7),st[ot+1]=Hl}return new Oe(st)}const sc=Hl.get("text-variable-anchor");if(sc){let ut;ut=void 0!==at._unevaluatedLayout.getValue("text-radial-offset")?[Hl.get("text-radial-offset").evaluate(st,{},ot)*ng,Mg]:Hl.get("text-offset").evaluate(st,{},ot).map((at=>at*ng));const rc=[];for(const at of sc)rc.push(at,tp(at,ut));return new Oe(rc)}return null}function rp(at){switch(at){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function np(st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su){let lu=sc.textMaxSize.evaluate(ot,{});void 0===lu&&(lu=oc);const uu=st.layers[0].layout,pu=uu.get("icon-offset").evaluate(ot,{},iu),mu=sp(ut.horizontal),gu=oc/24,Au=st.tilePixelRatio*gu,yu=st.tilePixelRatio*lu/24,_u=st.tilePixelRatio*_c,xu=st.tilePixelRatio*uu.get("symbol-spacing"),Su=uu.get("text-padding")*st.tilePixelRatio,Du=function(at,st,ot,ut=1){const Hl=at.get("icon-padding").evaluate(st,{},ot),rc=Hl&&Hl.values;return[rc[0]*ut,rc[1]*ut,rc[2]*ut,rc[3]*ut]}(uu,ot,iu,st.tilePixelRatio),Lu=uu.get("text-max-angle")/180*Math.PI,$u="viewport"!==uu.get("text-rotation-alignment")&&"point"!==uu.get("symbol-placement"),hh="map"===uu.get("icon-rotation-alignment")&&"point"!==uu.get("symbol-placement"),ed=uu.get("symbol-placement"),td=xu/2,id=uu.get("icon-text-fit");let nd;Hl&&"none"!==id&&(st.allowVerticalPlacement&&ut.vertical&&(nd=Oc(Hl,ut.vertical,id,uu.get("icon-text-fit-padding"),pu,gu)),mu&&(Hl=Oc(Hl,mu,id,uu.get("icon-text-fit-padding"),pu,gu)));const rd=iu?su.line.getGranularityForZoomLevel(iu.z):1,T=(_c,su)=>{su.x<0||su.x>=cu||su.y<0||su.y>=cu||function(st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu,pu,mu,gu,Au,yu,_u,xu,Su,Du,Lu){const $u=st.addToLineVertexArray(ot,ut);let hh,ed,td,id,nd=0,rd=0,ad=0,sd=0,od=-1,ld=-1;const cd={};let ud=$p("");if(st.allowVerticalPlacement&&Hl.vertical){const at=_c.layout.get("text-rotate").evaluate(_u,{},Du)+90;td=new Zh(wc,ot,Sc,iu,su,Hl.vertical,lu,cu,uu,at),oc&&(id=new Zh(wc,ot,Sc,iu,su,oc,mu,gu,uu,at))}if(rc){const ut=_c.layout.get("icon-rotate").evaluate(_u,{}),Hl="none"!==_c.layout.get("icon-text-fit"),sc=Nh(rc,ut,Su,Hl),lu=oc?Nh(oc,ut,Su,Hl):void 0;ed=new Zh(wc,ot,Sc,iu,su,rc,mu,gu,!1,ut),nd=4*sc.length;const cu=st.iconSizeData;let uu=null;"source"===cu.kind?(uu=[ug*_c.layout.get("icon-size").evaluate(_u,{})],uu[0]>hg&&Z(`${st.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):"composite"===cu.kind&&(uu=[ug*xu.compositeIconSizes[0].evaluate(_u,{},Du),ug*xu.compositeIconSizes[1].evaluate(_u,{},Du)],(uu[0]>hg||uu[1]>hg)&&Z(`${st.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),st.addSymbols(st.icon,sc,uu,yu,Au,_u,at.an.none,ot,$u.lineStartIndex,$u.lineLength,-1,Du),od=st.icon.placedSymbolArray.length-1,lu&&(rd=4*lu.length,st.addSymbols(st.icon,lu,uu,yu,Au,_u,at.an.vertical,ot,$u.lineStartIndex,$u.lineLength,-1,Du),ld=st.icon.placedSymbolArray.length-1)}const hd=Object.keys(Hl.horizontal);for(const Md of hd){const ut=Hl.horizontal[Md];if(!hh){ud=$p(ut.text);const at=_c.layout.get("text-rotate").evaluate(_u,{},Du);hh=new Zh(wc,ot,Sc,iu,su,ut,lu,cu,uu,at)}const rc=1===ut.positionedLines.length;if(ad+=ip(st,ot,ut,sc,_c,uu,_u,pu,$u,Hl.vertical?at.an.horizontal:at.an.horizontalOnly,rc?hd:[Md],cd,od,xu,Du),rc)break}Hl.vertical&&(sd+=ip(st,ot,Hl.vertical,sc,_c,uu,_u,pu,$u,at.an.vertical,["vertical"],cd,ld,xu,Du));const dd=hh?hh.boxStartIndex:st.collisionBoxArray.length,pd=hh?hh.boxEndIndex:st.collisionBoxArray.length,md=td?td.boxStartIndex:st.collisionBoxArray.length,gd=td?td.boxEndIndex:st.collisionBoxArray.length,fd=ed?ed.boxStartIndex:st.collisionBoxArray.length,Ad=ed?ed.boxEndIndex:st.collisionBoxArray.length,yd=id?id.boxStartIndex:st.collisionBoxArray.length,vd=id?id.boxEndIndex:st.collisionBoxArray.length;let _d=-1;const K=(at,st)=>at&&at.circleDiameter?Math.max(at.circleDiameter,st):st;_d=K(hh,_d),_d=K(td,_d),_d=K(ed,_d),_d=K(id,_d);const xd=_d>-1?1:0;xd&&(_d*=Lu/ng),st.glyphOffsetArray.length>=Jc.MAX_GLYPHS&&Z("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),void 0!==_u.sortKey&&st.addToSortKeyRanges(st.symbolInstances.length,_u.sortKey);const bd=ep(_c,_u,Du),[wd,Ed]=function(st,ot){const ut=st.length,Hl=null==ot?void 0:ot.values;if((null==Hl?void 0:Hl.length)>0)for(let rc=0;rc<Hl.length;rc+=2){const ot=Hl[rc+1];st.emplaceBack(at.aD[Hl[rc]],ot[0],ot[1])}return[ut,st.length]}(st.textAnchorOffsets,bd);st.symbolInstances.emplaceBack(ot.x,ot.y,cd.right>=0?cd.right:-1,cd.center>=0?cd.center:-1,cd.left>=0?cd.left:-1,cd.vertical||-1,od,ld,ud,dd,pd,md,gd,fd,Ad,yd,vd,Sc,ad,sd,nd,rd,xd,0,lu,_d,wd,Ed)}(st,su,_c,ut,Hl,rc,nd,st.layers[0],st.collisionBoxArray,ot.index,ot.sourceLayerIndex,st.index,Au,[Su,Su,Su,Su],$u,wc,_u,Du,hh,pu,ot,sc,Sc,iu,oc)};if("line"===ed)for(const at of Th(ot.geometry,0,0,cu,cu)){const ot=Ql(at,rd),rc=Rh(ot,xu,Lu,ut.vertical||mu,Hl,24,yu,st.overscaling,cu);for(const at of rc)mu&&ap(st,mu.text,td,at)||T(ot,at)}else if("line-center"===ed){for(const at of ot.geometry)if(at.length>1){const st=Ql(at,rd),ot=Oh(st,Lu,ut.vertical||mu,Hl,24,yu);ot&&T(st,ot)}}else if("Polygon"===ot.type)for(const at of rn(ot.geometry,0)){const st=Hh(at,16);T(Ql(at[0],rd,!0),new Vh(st.x,st.y,0))}else if("LineString"===ot.type)for(const at of ot.geometry){const st=Ql(at,rd);T(st,new Vh(st[0].x,st[0].y,0))}else if("Point"===ot.type)for(const at of ot.geometry)for(const st of at)T([st],new Vh(st.x,st.y,0))}function ip(at,st,ot,ut,Hl,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu){const pu=function(at,st,ot,ut,Hl,sc,oc,_c){const wc=ut.layout.get("text-rotate").evaluate(sc,{})*Math.PI/180,Sc=[];for(const iu of st.positionedLines)for(const at of iu.positionedGlyphs){if(!at.rect)continue;const ut=at.rect||{};let sc=4,su=!0,lu=1,cu=0;const uu=(Hl||_c)&&at.vertical,pu=at.metrics.advance*at.scale/2;if(_c&&st.verticalizable&&(cu=iu.lineOffset/2-(at.imageName?-(ng-at.metrics.width*at.scale)/2:(at.scale-1)*ng)),at.imageName){const st=oc[at.imageName];su=st.sdf,lu=st.pixelRatio,sc=1/lu}const mu=Hl?[at.x+pu,at.y]:[0,0];let gu=Hl?[0,0]:[at.x+pu+ot[0],at.y+ot[1]-cu],Au=[0,0];uu&&(Au=gu,gu=[0,0]);const yu=at.metrics.isDoubleResolution?2:1,_u=(at.metrics.left-sc)*at.scale-pu+gu[0],xu=(-at.metrics.top-sc)*at.scale+gu[1],Su=_u+ut.w/yu*at.scale/lu,Du=xu+ut.h/yu*at.scale/lu,Lu=new rc(_u,xu),$u=new rc(Su,xu),hh=new rc(_u,Du),ed=new rc(Su,Du);if(uu){const st=new rc(-pu,pu- -17),ot=-Math.PI/2,ut=12-pu,Hl=new rc(22-ut,-(at.imageName?ut:0)),sc=new rc(...Au);Lu._rotateAround(ot,st)._add(Hl)._add(sc),$u._rotateAround(ot,st)._add(Hl)._add(sc),hh._rotateAround(ot,st)._add(Hl)._add(sc),ed._rotateAround(ot,st)._add(Hl)._add(sc)}if(wc){const at=Math.sin(wc),st=Math.cos(wc),ot=[st,-at,at,st];Lu._matMult(ot),$u._matMult(ot),hh._matMult(ot),ed._matMult(ot)}const td=new rc(0,0),id=new rc(0,0);Sc.push({tl:Lu,tr:$u,bl:hh,br:ed,tex:ut,writingMode:st.writingMode,glyphOffset:mu,sectionIndex:at.sectionIndex,isSDF:su,pixelOffsetTL:td,pixelOffsetBR:id,minFontScaleX:0,minFontScaleY:0})}return Sc}(0,ot,_c,Hl,sc,oc,ut,at.allowVerticalPlacement),mu=at.textSizeData;let gu=null;"source"===mu.kind?(gu=[ug*Hl.layout.get("text-size").evaluate(oc,{})],gu[0]>hg&&Z(`${at.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):"composite"===mu.kind&&(gu=[ug*cu.compositeTextSizes[0].evaluate(oc,{},uu),ug*cu.compositeTextSizes[1].evaluate(oc,{},uu)],(gu[0]>hg||gu[1]>hg)&&Z(`${at.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),at.addSymbols(at.text,pu,gu,_c,sc,oc,Sc,st,wc.lineStartIndex,wc.lineLength,lu,uu);for(const rc of iu)su[rc]=at.text.placedSymbolArray.length-1;return 4*pu.length}function sp(at){for(const st in at)return at[st];return null}function ap(at,st,ot,ut){const Hl=at.compareText;if(st in Hl){const at=Hl[st];for(let st=at.length-1;st>=0;st--)if(ut.dist(at[st])<ot)return!0}else Hl[st]=[];return Hl[st].push(ut),!1}const Sg=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class lp{static from(at){if(!(at instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[st,ot]=new Uint8Array(at,0,2);if(219!==st)throw new Error("Data does not appear to be in a KDBush format.");const ut=ot>>4;if(1!==ut)throw new Error(`Got v${ut} data when expected v1.`);const Hl=Sg[15&ot];if(!Hl)throw new Error("Unrecognized array type.");const[rc]=new Uint16Array(at,2,1),[sc]=new Uint32Array(at,4,1);return new lp(sc,rc,Hl,at)}constructor(at,st=64,ot=Float64Array,ut){if(isNaN(at)||at<0)throw new Error(`Unpexpected numItems value: ${at}.`);this.numItems=+at,this.nodeSize=Math.min(Math.max(+st,2),65535),this.ArrayType=ot,this.IndexArrayType=at<65536?Uint16Array:Uint32Array;const Hl=Sg.indexOf(this.ArrayType),rc=2*at*this.ArrayType.BYTES_PER_ELEMENT,sc=at*this.IndexArrayType.BYTES_PER_ELEMENT,oc=(8-sc%8)%8;if(Hl<0)throw new Error(`Unexpected typed array class: ${ot}.`);ut&&ut instanceof ArrayBuffer?(this.data=ut,this.ids=new this.IndexArrayType(this.data,8,at),this.coords=new this.ArrayType(this.data,8+sc+oc,2*at),this._pos=2*at,this._finished=!0):(this.data=new ArrayBuffer(8+rc+sc+oc),this.ids=new this.IndexArrayType(this.data,8,at),this.coords=new this.ArrayType(this.data,8+sc+oc,2*at),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+Hl]),new Uint16Array(this.data,2,1)[0]=st,new Uint32Array(this.data,4,1)[0]=at)}add(at,st){const ot=this._pos>>1;return this.ids[ot]=ot,this.coords[this._pos++]=at,this.coords[this._pos++]=st,ot}finish(){const at=this._pos>>1;if(at!==this.numItems)throw new Error(`Added ${at} items when expected ${this.numItems}.`);return up(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(at,st,ot,ut){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:Hl,coords:rc,nodeSize:sc}=this,oc=[0,Hl.length-1,0],_c=[];for(;oc.length;){const wc=oc.pop()||0,Sc=oc.pop()||0,iu=oc.pop()||0;if(Sc-iu<=sc){for(let sc=iu;sc<=Sc;sc++){const oc=rc[2*sc],wc=rc[2*sc+1];oc>=at&&oc<=ot&&wc>=st&&wc<=ut&&_c.push(Hl[sc])}continue}const su=iu+Sc>>1,lu=rc[2*su],cu=rc[2*su+1];lu>=at&&lu<=ot&&cu>=st&&cu<=ut&&_c.push(Hl[su]),(0===wc?at<=lu:st<=cu)&&(oc.push(iu),oc.push(su-1),oc.push(1-wc)),(0===wc?ot>=lu:ut>=cu)&&(oc.push(su+1),oc.push(Sc),oc.push(1-wc))}return _c}within(at,st,ot){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:ut,coords:Hl,nodeSize:rc}=this,sc=[0,ut.length-1,0],oc=[],_c=ot*ot;for(;sc.length;){const wc=sc.pop()||0,Sc=sc.pop()||0,iu=sc.pop()||0;if(Sc-iu<=rc){for(let ot=iu;ot<=Sc;ot++)fp(Hl[2*ot],Hl[2*ot+1],at,st)<=_c&&oc.push(ut[ot]);continue}const su=iu+Sc>>1,lu=Hl[2*su],cu=Hl[2*su+1];fp(lu,cu,at,st)<=_c&&oc.push(ut[su]),(0===wc?at-ot<=lu:st-ot<=cu)&&(sc.push(iu),sc.push(su-1),sc.push(1-wc)),(0===wc?at+ot>=lu:st+ot>=cu)&&(sc.push(su+1),sc.push(Sc),sc.push(1-wc))}return oc}}function up(at,st,ot,ut,Hl,rc){if(Hl-ut<=ot)return;const sc=ut+Hl>>1;cp(at,st,sc,ut,Hl,rc),up(at,st,ot,ut,sc-1,1-rc),up(at,st,ot,sc+1,Hl,1-rc)}function cp(at,st,ot,ut,Hl,rc){for(;Hl>ut;){if(Hl-ut>600){const sc=Hl-ut+1,oc=ot-ut+1,_c=Math.log(sc),wc=.5*Math.exp(2*_c/3),Sc=.5*Math.sqrt(_c*wc*(sc-wc)/sc)*(oc-sc/2<0?-1:1);cp(at,st,ot,Math.max(ut,Math.floor(ot-oc*wc/sc+Sc)),Math.min(Hl,Math.floor(ot+(sc-oc)*wc/sc+Sc)),rc)}const sc=st[2*ot+rc];let oc=ut,_c=Hl;for(hp(at,st,ut,ot),st[2*Hl+rc]>sc&&hp(at,st,ut,Hl);oc<_c;){for(hp(at,st,oc,_c),oc++,_c--;st[2*oc+rc]<sc;)oc++;for(;st[2*_c+rc]>sc;)_c--}st[2*ut+rc]===sc?hp(at,st,ut,_c):(_c++,hp(at,st,_c,Hl)),_c<=ot&&(ut=_c+1),ot<=_c&&(Hl=_c-1)}}function hp(at,st,ot,ut){pp(at,ot,ut),pp(st,2*ot,2*ut),pp(st,2*ot+1,2*ut+1)}function pp(at,st,ot){const ut=at[st];at[st]=at[ot],at[ot]=ut}function fp(at,st,ot,ut){const Hl=at-ot,rc=st-ut;return Hl*Hl+rc*rc}var Tg;at.cw=void 0,(Tg=at.cw||(at.cw={})).create="create",Tg.load="load",Tg.fullLoad="fullLoad";let Cg=null,kg=[];const Ig=1e3/60,Dg="loadTime",Lg="fullLoadTime",Pg={mark(at){performance.mark(at)},frame(at){const st=at;null!=Cg&&kg.push(st-Cg),Cg=st},clearMetrics(){Cg=null,kg=[],performance.clearMeasures(Dg),performance.clearMeasures(Lg);for(const st in at.cw)performance.clearMarks(at.cw[st])},getPerformanceMetrics(){performance.measure(Dg,at.cw.create,at.cw.load),performance.measure(Lg,at.cw.create,at.cw.fullLoad);const st=performance.getEntriesByName(Dg)[0].duration,ot=performance.getEntriesByName(Lg)[0].duration,ut=kg.length,Hl=1/(kg.reduce(((at,st)=>at+st),0)/ut/1e3),rc=kg.filter((at=>at>Ig)).reduce(((at,st)=>at+(st-Ig)/Ig),0);return{loadTime:st,fullLoadTime:ot,fps:Hl,percentDroppedFrames:rc/(ut+rc)*100,totalFrames:ut}}};at.$=cu,at.A=iu,at.B=function([at,st,ot]){return st+=90,st*=Math.PI/180,ot*=Math.PI/180,{x:at*Math.cos(st)*Math.sin(ot),y:at*Math.sin(st)*Math.sin(ot),z:at*Math.cos(ot)}},at.C=Rd,at.D=Os,at.E=bt,at.F=Cs,at.G=Ap,at.H=function(at){if(null==gu){const st=at.navigator?at.navigator.userAgent:null;gu=!!at.safari||!(!st||!(/\b(iPad|iPhone|iPod)\b/.test(st)||st.match("Safari")&&!st.match("Chrome")))}return gu},at.I=mc,at.J=class{constructor(at,st){this.target=at,this.mapId=st,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new ch((()=>this.process())),this.subscription=rt(this.target,"message",(at=>this.receive(at)),!1),this.globalScope=H(self)?at:window}registerMessageHandler(at,st){this.messageHandlers[at]=st}sendAsync(at,st){return new Promise(((ot,ut)=>{const Hl=Math.round(1e18*Math.random()).toString(36).substring(0,10),rc=st?rt(st.signal,"abort",(()=>{null==rc||rc.unsubscribe(),delete this.resolveRejects[Hl];const st={id:Hl,type:"<cancel>",origin:location.origin,targetMapId:at.targetMapId,sourceMapId:this.mapId};this.target.postMessage(st)}),xg):null;this.resolveRejects[Hl]={resolve:at=>{null==rc||rc.unsubscribe(),ot(at)},reject:at=>{null==rc||rc.unsubscribe(),ut(at)}};const sc=[],oc=Object.assign(Object.assign({},at),{id:Hl,sourceMapId:this.mapId,origin:location.origin,data:fs(at.data,sc)});this.target.postMessage(oc,{transfer:sc})}))}receive(at){const st=at.data,ot=st.id;if(!("file://"!==st.origin&&"file://"!==location.origin&&"resource://android"!==st.origin&&"resource://android"!==location.origin&&st.origin!==location.origin||st.targetMapId&&this.mapId!==st.targetMapId)){if("<cancel>"===st.type){delete this.tasks[ot];const at=this.abortControllers[ot];return delete this.abortControllers[ot],void(at&&at.abort())}if(H(self)||st.mustQueue)return this.tasks[ot]=st,this.taskQueue.push(ot),void this.invoker.trigger();this.processTask(ot,st)}}process(){if(0===this.taskQueue.length)return;const at=this.taskQueue.shift(),st=this.tasks[at];delete this.tasks[at],this.taskQueue.length>0&&this.invoker.trigger(),st&&this.processTask(at,st)}processTask(at,st){return e(this,void 0,void 0,(function*(){if("<response>"===st.type){const ot=this.resolveRejects[at];if(delete this.resolveRejects[at],!ot)return;return void(st.error?ot.reject(ds(st.error)):ot.resolve(ds(st.data)))}if(!this.messageHandlers[st.type])return void this.completeTask(at,new Error(`Could not find a registered handler for ${st.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const ot=ds(st.data),ut=new AbortController;this.abortControllers[at]=ut;try{const Hl=yield this.messageHandlers[st.type](st.sourceMapId,ot,ut);this.completeTask(at,null,Hl)}catch(ot){this.completeTask(at,ot)}}))}completeTask(at,st,ot){const ut=[];delete this.abortControllers[at];const Hl={id:at,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:st?fs(st):null,data:fs(ot,ut)};this.target.postMessage(Hl,{transfer:ut})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},at.K=$u,at.L=function(){var at=new iu(16);return iu!=Float32Array&&(at[1]=0,at[2]=0,at[3]=0,at[4]=0,at[6]=0,at[7]=0,at[8]=0,at[9]=0,at[11]=0,at[12]=0,at[13]=0,at[14]=0),at[0]=1,at[5]=1,at[10]=1,at[15]=1,at},at.M=function(at,st,ot){var ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu=ot[0],pu=ot[1],mu=ot[2];return st===at?(at[12]=st[0]*uu+st[4]*pu+st[8]*mu+st[12],at[13]=st[1]*uu+st[5]*pu+st[9]*mu+st[13],at[14]=st[2]*uu+st[6]*pu+st[10]*mu+st[14],at[15]=st[3]*uu+st[7]*pu+st[11]*mu+st[15]):(Hl=st[1],rc=st[2],sc=st[3],oc=st[4],_c=st[5],wc=st[6],Sc=st[7],iu=st[8],su=st[9],lu=st[10],cu=st[11],at[0]=ut=st[0],at[1]=Hl,at[2]=rc,at[3]=sc,at[4]=oc,at[5]=_c,at[6]=wc,at[7]=Sc,at[8]=iu,at[9]=su,at[10]=lu,at[11]=cu,at[12]=ut*uu+oc*pu+iu*mu+st[12],at[13]=Hl*uu+_c*pu+su*mu+st[13],at[14]=rc*uu+wc*pu+lu*mu+st[14],at[15]=sc*uu+Sc*pu+cu*mu+st[15]),at},at.N=function(at,st,ot){var ut=ot[0],Hl=ot[1],rc=ot[2];return at[0]=st[0]*ut,at[1]=st[1]*ut,at[2]=st[2]*ut,at[3]=st[3]*ut,at[4]=st[4]*Hl,at[5]=st[5]*Hl,at[6]=st[6]*Hl,at[7]=st[7]*Hl,at[8]=st[8]*rc,at[9]=st[9]*rc,at[10]=st[10]*rc,at[11]=st[11]*rc,at[12]=st[12],at[13]=st[13],at[14]=st[14],at[15]=st[15],at},at.O=function(at,st,ot){var ut=st[0],Hl=st[1],rc=st[2],sc=st[3],oc=st[4],_c=st[5],wc=st[6],Sc=st[7],iu=st[8],su=st[9],lu=st[10],cu=st[11],uu=st[12],pu=st[13],mu=st[14],gu=st[15],Au=ot[0],yu=ot[1],_u=ot[2],xu=ot[3];return at[0]=Au*ut+yu*oc+_u*iu+xu*uu,at[1]=Au*Hl+yu*_c+_u*su+xu*pu,at[2]=Au*rc+yu*wc+_u*lu+xu*mu,at[3]=Au*sc+yu*Sc+_u*cu+xu*gu,at[4]=(Au=ot[4])*ut+(yu=ot[5])*oc+(_u=ot[6])*iu+(xu=ot[7])*uu,at[5]=Au*Hl+yu*_c+_u*su+xu*pu,at[6]=Au*rc+yu*wc+_u*lu+xu*mu,at[7]=Au*sc+yu*Sc+_u*cu+xu*gu,at[8]=(Au=ot[8])*ut+(yu=ot[9])*oc+(_u=ot[10])*iu+(xu=ot[11])*uu,at[9]=Au*Hl+yu*_c+_u*su+xu*pu,at[10]=Au*rc+yu*wc+_u*lu+xu*mu,at[11]=Au*sc+yu*Sc+_u*cu+xu*gu,at[12]=(Au=ot[12])*ut+(yu=ot[13])*oc+(_u=ot[14])*iu+(xu=ot[15])*uu,at[13]=Au*Hl+yu*_c+_u*su+xu*pu,at[14]=Au*rc+yu*wc+_u*lu+xu*mu,at[15]=Au*sc+yu*Sc+_u*cu+xu*gu,at},at.P=rc,at.Q=function(at,st){const ot={};for(let ut=0;ut<st.length;ut++){const Hl=st[ut];Hl in at&&(ot[Hl]=at[Hl])}return ot},at.R=sl,at.S=fh,at.T=dl,at.U=gh,at.V=mh,at.W=f,at.X=d,at.Y=Q,at.Z=kh,at._=e,at.a=Lu,at.a$=function(at,st,ot){return at[0]=st[0]*ot,at[1]=st[1]*ot,at[2]=st[2]*ot,at[3]=st[3]*ot,at},at.a0=wh,at.a1=Ih,at.a2=25,at.a3=Sh,at.a4=at=>{const st=window.document.createElement("video");return st.muted=!0,new Promise((ot=>{st.onloadstart=()=>{ot(st)};for(const ut of at){const at=window.document.createElement("source");yt(ut)||(st.crossOrigin="Anonymous"),at.src=ut,st.appendChild(at)}}))},at.a5=Tt,at.a6=function(){return pu++},at.a7=_a,at.a8=Jc,at.a9=di,at.aA=ng,at.aB=T,at.aC=function(at,st,ot,ut,Hl=!1){if(!ot[0]&&!ot[1])return[0,0];const rc=Hl?"map"===ut?-at.bearingInRadians:0:"viewport"===ut?at.bearingInRadians:0;if(rc){const at=Math.sin(rc),st=Math.cos(rc);ot=[ot[0]*st-ot[1]*at,ot[0]*at+ot[1]*st]}return[Hl?ot[0]:T(st,ot[0],at.zoom),Hl?ot[1]:T(st,ot[1],at.zoom)]},at.aE=Uc,at.aF=rp,at.aG=Cc,at.aH=lp,at.aI=Ks,at.aJ=Yl,at.aK=Ta,at.aL=Ha,at.aM=Ga,at.aN=R,at.aO=it,at.aP=bh,at.aQ=S,at.aR=_,at.aS=function(at){var st=new iu(3);return st[0]=at[0],st[1]=at[1],st[2]=at[2],st},at.aT=function(at,st,ot){return at[0]=st[0]-ot[0],at[1]=st[1]-ot[1],at[2]=st[2]-ot[2],at},at.aU=function(at,st){var ot=st[0],ut=st[1],Hl=st[2],rc=ot*ot+ut*ut+Hl*Hl;return rc>0&&(rc=1/Math.sqrt(rc)),at[0]=st[0]*rc,at[1]=st[1]*rc,at[2]=st[2]*rc,at},at.aV=A,at.aW=function(at,st){return at[0]*st[0]+at[1]*st[1]+at[2]*st[2]},at.aX=function(at,st,ot){return at[0]=st[0]*ot[0],at[1]=st[1]*ot[1],at[2]=st[2]*ot[2],at[3]=st[3]*ot[3],at},at.aY=b,at.aZ=function(at,st,ot){const ut=st[0]*ot[0]+st[1]*ot[1]+st[2]*ot[2];return 0===ut?null:(-(at[0]*ot[0]+at[1]*ot[1]+at[2]*ot[2])-ot[3])/ut},at.a_=lu,at.aa=Po,at.ab=Ph,at.ac=function(at){const st={};if(at.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((at,ot,ut,Hl)=>{const rc=ut||Hl;return st[ot]=!rc||rc.toLowerCase(),""})),st["max-age"]){const at=parseInt(st["max-age"],10);isNaN(at)?delete st["max-age"]:st["max-age"]=at}return st},at.ad=nt,at.ae=function(at){return Math.pow(2,at)},at.af=x,at.ag=O,at.ah=85.051129,at.ai=xh,at.aj=function(at){return Math.log(at)/Math.LN2},at.ak=function(at){var st=at[0],ot=at[1];return st*st+ot*ot},at.al=function(at,st){const ot=[];for(const ut in at)ut in st||ot.push(ut);return ot},at.am=function(at,st){let ot=0,ut=0;if("constant"===at.kind)ut=at.layoutSize;else if("source"!==at.kind){const{interpolationType:Hl,minZoom:rc,maxZoom:sc}=at,oc=Hl?O(yr.interpolationFactor(Hl,st,rc,sc),0,1):0;"camera"===at.kind?ut=Rd.number(at.minSize,at.maxSize,oc):ot=oc}return{uSizeT:ot,uSize:ut}},at.ao=function(at,{uSize:st,uSizeT:ot},{lowerSize:ut,upperSize:Hl}){return"source"===at.kind?ut/ug:"composite"===at.kind?Rd.number(ut/ug,Hl/ug,ot):st},at.ap=function(at,st){var ot=st[0],ut=st[1],Hl=st[2],rc=st[3],sc=st[4],oc=st[5],_c=st[6],wc=st[7],Sc=st[8],iu=st[9],su=st[10],lu=st[11],cu=st[12],uu=st[13],pu=st[14],mu=st[15],gu=ot*oc-ut*sc,Au=ot*_c-Hl*sc,yu=ot*wc-rc*sc,_u=ut*_c-Hl*oc,xu=ut*wc-rc*oc,Su=Hl*wc-rc*_c,Du=Sc*uu-iu*cu,Lu=Sc*pu-su*cu,$u=Sc*mu-lu*cu,hh=iu*pu-su*uu,ed=iu*mu-lu*uu,td=su*mu-lu*pu,id=gu*td-Au*ed+yu*hh+_u*$u-xu*Lu+Su*Du;return id?(at[0]=(oc*td-_c*ed+wc*hh)*(id=1/id),at[1]=(Hl*ed-ut*td-rc*hh)*id,at[2]=(uu*Su-pu*xu+mu*_u)*id,at[3]=(su*xu-iu*Su-lu*_u)*id,at[4]=(_c*$u-sc*td-wc*Lu)*id,at[5]=(ot*td-Hl*$u+rc*Lu)*id,at[6]=(pu*yu-cu*Su-mu*Au)*id,at[7]=(Sc*Su-su*yu+lu*Au)*id,at[8]=(sc*ed-oc*$u+wc*Du)*id,at[9]=(ut*$u-ot*ed-rc*Du)*id,at[10]=(cu*xu-uu*yu+mu*gu)*id,at[11]=(iu*yu-Sc*xu-lu*gu)*id,at[12]=(oc*Lu-sc*hh-_c*Du)*id,at[13]=(ot*hh-ut*Lu+Hl*Du)*id,at[14]=(uu*Au-cu*_u-pu*gu)*id,at[15]=(Sc*_u-iu*Au+su*gu)*id,at):null},at.aq=C,at.ar=function(at){return Math.hypot(at[0],at[1])},at.as=function(at){return at[0]=0,at[1]=0,at},at.at=function(at,st,ot){return at[0]=st[0]*ot,at[1]=st[1]*ot,at},at.au=Zc,at.av=I,at.aw=function(at,st,ot,ut){const Hl=st.y-at.y,sc=st.x-at.x,oc=ut.y-ot.y,_c=ut.x-ot.x,wc=oc*sc-_c*Hl;if(0===wc)return null;const Sc=(_c*(at.y-ot.y)-oc*(at.x-ot.x))/wc;return new rc(at.x+Sc*sc,at.y+Sc*Hl)},at.ax=Th,at.ay=To,at.az=function(at){let st=1/0,ot=1/0,ut=-1/0,Hl=-1/0;for(const rc of at)st=Math.min(st,rc.x),ot=Math.min(ot,rc.y),ut=Math.max(ut,rc.x),Hl=Math.max(Hl,rc.y);return[st,ot,ut,Hl]},at.b=J,at.b$=Jm,at.b0=function(at,st){return at[0]*st[0]+at[1]*st[1]+at[2]*st[2]+at[3]},at.b1=Ah,at.b2=Mh,at.b3=function(at,st,ot,ut,Hl){var rc,sc=1/Math.tan(st/2);return at[0]=sc/ot,at[1]=0,at[2]=0,at[3]=0,at[4]=0,at[5]=sc,at[6]=0,at[7]=0,at[8]=0,at[9]=0,at[11]=-1,at[12]=0,at[13]=0,at[15]=0,null!=Hl&&Hl!==1/0?(at[10]=(Hl+ut)*(rc=1/(ut-Hl)),at[14]=2*Hl*ut*rc):(at[10]=-1,at[14]=-2*ut),at},at.b4=function(at){var st=new iu(16);return st[0]=at[0],st[1]=at[1],st[2]=at[2],st[3]=at[3],st[4]=at[4],st[5]=at[5],st[6]=at[6],st[7]=at[7],st[8]=at[8],st[9]=at[9],st[10]=at[10],st[11]=at[11],st[12]=at[12],st[13]=at[13],st[14]=at[14],st[15]=at[15],st},at.b5=function(at,st,ot){var ut=Math.sin(ot),Hl=Math.cos(ot),rc=st[0],sc=st[1],oc=st[2],_c=st[3],wc=st[4],Sc=st[5],iu=st[6],su=st[7];return st!==at&&(at[8]=st[8],at[9]=st[9],at[10]=st[10],at[11]=st[11],at[12]=st[12],at[13]=st[13],at[14]=st[14],at[15]=st[15]),at[0]=rc*Hl+wc*ut,at[1]=sc*Hl+Sc*ut,at[2]=oc*Hl+iu*ut,at[3]=_c*Hl+su*ut,at[4]=wc*Hl-rc*ut,at[5]=Sc*Hl-sc*ut,at[6]=iu*Hl-oc*ut,at[7]=su*Hl-_c*ut,at},at.b6=function(at,st,ot){var ut=Math.sin(ot),Hl=Math.cos(ot),rc=st[4],sc=st[5],oc=st[6],_c=st[7],wc=st[8],Sc=st[9],iu=st[10],su=st[11];return st!==at&&(at[0]=st[0],at[1]=st[1],at[2]=st[2],at[3]=st[3],at[12]=st[12],at[13]=st[13],at[14]=st[14],at[15]=st[15]),at[4]=rc*Hl+wc*ut,at[5]=sc*Hl+Sc*ut,at[6]=oc*Hl+iu*ut,at[7]=_c*Hl+su*ut,at[8]=wc*Hl-rc*ut,at[9]=Sc*Hl-sc*ut,at[10]=iu*Hl-oc*ut,at[11]=su*Hl-_c*ut,at},at.b7=function(){const at=new Float32Array(16);return x(at),at},at.b8=function(){const at=new Float64Array(16);return x(at),at},at.b9=function(){return new Float64Array(16)},at.bA=function(at){return at[0]=0,at[1]=0,at[2]=0,at},at.bB=function(at,st,ot,ut){const Hl=Math.sqrt(at*at+st*st),rc=Math.sqrt(ot*ot+ut*ut);at/=Hl,st/=Hl,ot/=rc,ut/=rc;const sc=Math.acos(at*ot+st*ut);return-st*ot+at*ut>0?sc:-sc},at.bC=function(at,st){const ot=V(at,2*Math.PI),ut=V(st,2*Math.PI);return Math.min(Math.abs(ot-ut),Math.abs(ot-ut+2*Math.PI),Math.abs(ot-ut-2*Math.PI))},at.bD=function(){const at={},st=hh.$version;for(const ot in hh.$root){const ut=hh.$root[ot];if(ut.required){let Hl=null;Hl="version"===ot?st:"array"===ut.type?[]:{},null!=Hl&&(at[ot]=Hl)}}return at},at.bE=ys,at.bF=ft,at.bG=function t(at,st){if(Array.isArray(at)){if(!Array.isArray(st)||at.length!==st.length)return!1;for(let ot=0;ot<at.length;ot++)if(!t(at[ot],st[ot]))return!1;return!0}if("object"==typeof at&&null!==at&&null!==st){if("object"!=typeof st)return!1;if(Object.keys(at).length!==Object.keys(st).length)return!1;for(const ot in at)if(!t(at[ot],st[ot]))return!1;return!0}return at===st},at.bH=function(at){at=at.slice();const st=Object.create(null);for(let ot=0;ot<at.length;ot++)st[at[ot].id]=at[ot];for(let ot=0;ot<at.length;ot++)"ref"in at[ot]&&(at[ot]=St(at[ot],st[at[ot].ref]));return at},at.bI=function(at){if("custom"===at.type)return new uh(at);switch(at.type){case"background":return new sh(at);case"circle":return new Ko(at);case"color-relief":return new gl(at);case"fill":return new ou(at);case"fill-extrusion":return new Eu(at);case"heatmap":return new ll(at);case"hillshade":return new hl(at);case"line":return new Yu(at);case"raster":return new lh(at);case"symbol":return new rh(at)}},at.bJ=G,at.bK=function(at,st){if(!at)return[{command:"setStyle",args:[st]}];let ot=[];try{if(!At(at.version,st.version))return[{command:"setStyle",args:[st]}];At(at.center,st.center)||ot.push({command:"setCenter",args:[st.center]}),At(at.state,st.state)||ot.push({command:"setGlobalState",args:[st.state]}),At(at.centerAltitude,st.centerAltitude)||ot.push({command:"setCenterAltitude",args:[st.centerAltitude]}),At(at.zoom,st.zoom)||ot.push({command:"setZoom",args:[st.zoom]}),At(at.bearing,st.bearing)||ot.push({command:"setBearing",args:[st.bearing]}),At(at.pitch,st.pitch)||ot.push({command:"setPitch",args:[st.pitch]}),At(at.roll,st.roll)||ot.push({command:"setRoll",args:[st.roll]}),At(at.sprite,st.sprite)||ot.push({command:"setSprite",args:[st.sprite]}),At(at.glyphs,st.glyphs)||ot.push({command:"setGlyphs",args:[st.glyphs]}),At(at.transition,st.transition)||ot.push({command:"setTransition",args:[st.transition]}),At(at.light,st.light)||ot.push({command:"setLight",args:[st.light]}),At(at.terrain,st.terrain)||ot.push({command:"setTerrain",args:[st.terrain]}),At(at.sky,st.sky)||ot.push({command:"setSky",args:[st.sky]}),At(at.projection,st.projection)||ot.push({command:"setProjection",args:[st.projection]});const ut={},Hl=[];!function(at,st,ot,ut){let Hl;for(Hl in st=st||{},at=at||{})Object.prototype.hasOwnProperty.call(at,Hl)&&(Object.prototype.hasOwnProperty.call(st,Hl)||It(Hl,ot,ut));for(Hl in st)Object.prototype.hasOwnProperty.call(st,Hl)&&(Object.prototype.hasOwnProperty.call(at,Hl)?At(at[Hl],st[Hl])||("geojson"===at[Hl].type&&"geojson"===st[Hl].type&&Pt(at,st,Hl)?kt(ot,{command:"setGeoJSONSourceData",args:[Hl,st[Hl].data]}):zt(Hl,st,ot,ut)):Mt(Hl,st,ot))}(at.sources,st.sources,Hl,ut);const rc=[];at.layers&&at.layers.forEach((at=>{"source"in at&&ut[at.source]?ot.push({command:"removeLayer",args:[at.id]}):rc.push(at)})),ot=ot.concat(Hl),function(at,st,ot){st=st||[];const ut=(at=at||[]).map(Bt),Hl=st.map(Bt),rc=at.reduce(Et,{}),sc=st.reduce(Et,{}),oc=ut.slice(),_c=Object.create(null);let wc,Sc,iu,su,lu;for(let cu=0,uu=0;cu<ut.length;cu++)wc=ut[cu],Object.prototype.hasOwnProperty.call(sc,wc)?uu++:(kt(ot,{command:"removeLayer",args:[wc]}),oc.splice(oc.indexOf(wc,uu),1));for(let cu=0,uu=0;cu<Hl.length;cu++)wc=Hl[Hl.length-1-cu],oc[oc.length-1-cu]!==wc&&(Object.prototype.hasOwnProperty.call(rc,wc)?(kt(ot,{command:"removeLayer",args:[wc]}),oc.splice(oc.lastIndexOf(wc,oc.length-uu),1)):uu++,su=oc[oc.length-cu],kt(ot,{command:"addLayer",args:[sc[wc],su]}),oc.splice(oc.length-cu,0,wc),_c[wc]=!0);for(let cu=0;cu<Hl.length;cu++)if(wc=Hl[cu],Sc=rc[wc],iu=sc[wc],!_c[wc]&&!At(Sc,iu))if(At(Sc.source,iu.source)&&At(Sc["source-layer"],iu["source-layer"])&&At(Sc.type,iu.type)){for(lu in Ct(Sc.layout,iu.layout,ot,wc,null,"setLayoutProperty"),Ct(Sc.paint,iu.paint,ot,wc,null,"setPaintProperty"),At(Sc.filter,iu.filter)||kt(ot,{command:"setFilter",args:[wc,iu.filter]}),At(Sc.minzoom,iu.minzoom)&&At(Sc.maxzoom,iu.maxzoom)||kt(ot,{command:"setLayerZoomRange",args:[wc,iu.minzoom,iu.maxzoom]}),Sc)Object.prototype.hasOwnProperty.call(Sc,lu)&&"layout"!==lu&&"paint"!==lu&&"filter"!==lu&&"metadata"!==lu&&"minzoom"!==lu&&"maxzoom"!==lu&&(0===lu.indexOf("paint.")?Ct(Sc[lu],iu[lu],ot,wc,lu.slice(6),"setPaintProperty"):At(Sc[lu],iu[lu])||kt(ot,{command:"setLayerProperty",args:[wc,lu,iu[lu]]}));for(lu in iu)Object.prototype.hasOwnProperty.call(iu,lu)&&!Object.prototype.hasOwnProperty.call(Sc,lu)&&"layout"!==lu&&"paint"!==lu&&"filter"!==lu&&"metadata"!==lu&&"minzoom"!==lu&&"maxzoom"!==lu&&(0===lu.indexOf("paint.")?Ct(Sc[lu],iu[lu],ot,wc,lu.slice(6),"setPaintProperty"):At(Sc[lu],iu[lu])||kt(ot,{command:"setLayerProperty",args:[wc,lu,iu[lu]]}))}else kt(ot,{command:"removeLayer",args:[wc]}),su=oc[oc.lastIndexOf(wc)+1],kt(ot,{command:"addLayer",args:[iu,su]})}(rc,st.layers,ot)}catch(at){console.warn("Unable to compute style diff:",at),ot=[{command:"setStyle",args:[st]}]}return ot},at.bL=function(at){const st=[],ot=at.id;return void 0===ot&&st.push({message:`layers.${ot}: missing required property "id"`}),void 0===at.render&&st.push({message:`layers.${ot}: missing required method "render"`}),at.renderingMode&&"2d"!==at.renderingMode&&"3d"!==at.renderingMode&&st.push({message:`layers.${ot}: property "renderingMode" must be either "2d" or "3d"`}),st},at.bM=U,at.bN=q,at.bO=class extends co{constructor(at,st){super(at,st),this.current=0}set(at){this.current!==at&&(this.current=at,this.gl.uniform1i(this.location,at))}},at.bP=fo,at.bQ=class extends co{constructor(at,st){super(at,st),this.current=em}set(at){if(at[12]!==this.current[12]||at[0]!==this.current[0])return this.current=at,void this.gl.uniformMatrix4fv(this.location,!1,at);for(let st=1;st<16;st++)if(at[st]!==this.current[st]){this.current=at,this.gl.uniformMatrix4fv(this.location,!1,at);break}}},at.bR=po,at.bS=class extends co{constructor(at,st){super(at,st),this.current=[0,0,0]}set(at){at[0]===this.current[0]&&at[1]===this.current[1]&&at[2]===this.current[2]||(this.current=at,this.gl.uniform3f(this.location,at[0],at[1],at[2]))}},at.bT=class extends co{constructor(at,st){super(at,st),this.current=[0,0]}set(at){at[0]===this.current[0]&&at[1]===this.current[1]||(this.current=at,this.gl.uniform2f(this.location,at[0],at[1]))}},at.bU=g,at.bV=function(at,st){var ot=Math.sin(st),ut=Math.cos(st);return at[0]=ut,at[1]=ot,at[2]=0,at[3]=-ot,at[4]=ut,at[5]=0,at[6]=0,at[7]=0,at[8]=1,at},at.bW=function(at,st,ot){var ut=st[0],Hl=st[1],rc=st[2];return at[0]=ut*ot[0]+Hl*ot[3]+rc*ot[6],at[1]=ut*ot[1]+Hl*ot[4]+rc*ot[7],at[2]=ut*ot[2]+Hl*ot[5]+rc*ot[8],at},at.bX=function(at,st,ot,ut,Hl,rc,sc){var oc=1/(st-ot),_c=1/(ut-Hl),wc=1/(rc-sc);return at[0]=-2*oc,at[1]=0,at[2]=0,at[3]=0,at[4]=0,at[5]=-2*_c,at[6]=0,at[7]=0,at[8]=0,at[9]=0,at[10]=2*wc,at[11]=0,at[12]=(st+ot)*oc,at[13]=(Hl+ut)*_c,at[14]=(sc+rc)*wc,at[15]=1,at},at.bY=class extends co{constructor(at,st){super(at,st),this.current=new Array}set(at){if(at!=this.current){this.current=at;const st=new Float32Array(4*at.length);for(let ot=0;ot<at.length;ot++)st[4*ot]=at[ot].r,st[4*ot+1]=at[ot].g,st[4*ot+2]=at[ot].b,st[4*ot+3]=at[ot].a;this.gl.uniform4fv(this.location,st)}}},at.bZ=class extends co{constructor(at,st){super(at,st),this.current=new Array}set(at){if(at!=this.current){this.current=at;const st=new Float32Array(at);this.gl.uniform1fv(this.location,st)}}},at.b_=class extends ca{},at.ba=function(at,st,ot){const ut=new Float64Array(4);return P(ut,at,st-90,ot),ut},at.bb=function(at,st,ot,ut){var Hl,rc,sc,oc,_c,wc=st[0],iu=st[1],su=st[2],lu=st[3],cu=ot[0],uu=ot[1],pu=ot[2],mu=ot[3];return(rc=wc*cu+iu*uu+su*pu+lu*mu)<0&&(rc=-rc,cu=-cu,uu=-uu,pu=-pu,mu=-mu),1-rc>Sc?(Hl=Math.acos(rc),sc=Math.sin(Hl),oc=Math.sin((1-ut)*Hl)/sc,_c=Math.sin(ut*Hl)/sc):(oc=1-ut,_c=ut),at[0]=oc*wc+_c*cu,at[1]=oc*iu+_c*uu,at[2]=oc*su+_c*pu,at[3]=oc*lu+_c*mu,at},at.bc=function(at){const st=new Float64Array(9);var ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu,pu,mu,gu,Au;iu=(Hl=(ut=at)[0])*(_c=Hl+Hl),su=(rc=ut[1])*_c,cu=(sc=ut[2])*_c,uu=sc*(wc=rc+rc),mu=(oc=ut[3])*_c,gu=oc*wc,Au=oc*(Sc=sc+sc),(ot=st)[0]=1-(lu=rc*wc)-(pu=sc*Sc),ot[3]=su-Au,ot[6]=cu+gu,ot[1]=su+Au,ot[4]=1-iu-pu,ot[7]=uu-mu,ot[2]=cu-gu,ot[5]=uu+mu,ot[8]=1-iu-lu;const yu=it(-Math.asin(O(st[2],-1,1)));let _u,xu;return Math.hypot(st[5],st[8])<.001?(_u=0,xu=-it(Math.atan2(st[3],st[4]))):(_u=it(0===st[5]&&0===st[8]?0:Math.atan2(st[5],st[8])),xu=it(0===st[1]&&0===st[0]?0:Math.atan2(st[1],st[0]))),{roll:_u,pitch:yu+90,bearing:xu}},at.bd=function(at,st){return at.roll==st.roll&&at.pitch==st.pitch&&at.bearing==st.bearing},at.be=Pe,at.bf=ho,at.bg=fm,at.bh=Am,at.bi=Zl,at.bj=F,at.bk=L,at.bl=je,at.bm=function(at,st,ot,ut,Hl){return F(ut,Hl,O((at-st)/(ot-st),0,1))},at.bn=V,at.bo=function(){return new Float64Array(3)},at.bp=function(at,st,ot,ut){return at[0]=st[0]+ot[0]*ut,at[1]=st[1]+ot[1]*ut,at[2]=st[2]+ot[2]*ut,at},at.bq=P,at.br=function(at,st,ot){var ut=ot[0],Hl=ot[1],rc=ot[2],sc=st[0],oc=st[1],_c=st[2],wc=Hl*_c-rc*oc,Sc=rc*sc-ut*_c,iu=ut*oc-Hl*sc,su=Hl*iu-rc*Sc,lu=rc*wc-ut*iu,cu=ut*Sc-Hl*wc,uu=2*ot[3];return Sc*=uu,iu*=uu,lu*=2,cu*=2,at[0]=sc+(wc*=uu)+(su*=2),at[1]=oc+Sc+lu,at[2]=_c+iu+cu,at},at.bs=function(at,st,ot){const ut=(Hl=[at[0],at[1],at[2],st[0],st[1],st[2],ot[0],ot[1],ot[2]])[0]*((Sc=Hl[8])*(sc=Hl[4])-(oc=Hl[5])*(wc=Hl[7]))+Hl[1]*(-Sc*(rc=Hl[3])+oc*(_c=Hl[6]))+Hl[2]*(wc*rc-sc*_c);var Hl,rc,sc,oc,_c,wc,Sc;if(0===ut)return null;const iu=A([],[st[0],st[1],st[2]],[ot[0],ot[1],ot[2]]),su=A([],[ot[0],ot[1],ot[2]],[at[0],at[1],at[2]]),lu=A([],[at[0],at[1],at[2]],[st[0],st[1],st[2]]),cu=S([],iu,-at[3]);return _(cu,cu,S([],su,-st[3])),_(cu,cu,S([],lu,-ot[3])),S(cu,cu,1/ut),cu},at.bt=bg,at.bu=function(){return new Float64Array(4)},at.bv=function(at,st,ot,ut){var Hl=[],rc=[];return Hl[0]=st[0]-ot[0],Hl[1]=st[1]-ot[1],Hl[2]=st[2]-ot[2],rc[0]=Hl[0]*Math.cos(ut)-Hl[1]*Math.sin(ut),rc[1]=Hl[0]*Math.sin(ut)+Hl[1]*Math.cos(ut),rc[2]=Hl[2],at[0]=rc[0]+ot[0],at[1]=rc[1]+ot[1],at[2]=rc[2]+ot[2],at},at.bw=function(at,st,ot,ut){var Hl=[],rc=[];return Hl[0]=st[0]-ot[0],Hl[1]=st[1]-ot[1],Hl[2]=st[2]-ot[2],rc[0]=Hl[0],rc[1]=Hl[1]*Math.cos(ut)-Hl[2]*Math.sin(ut),rc[2]=Hl[1]*Math.sin(ut)+Hl[2]*Math.cos(ut),at[0]=rc[0]+ot[0],at[1]=rc[1]+ot[1],at[2]=rc[2]+ot[2],at},at.bx=function(at,st,ot,ut){var Hl=[],rc=[];return Hl[0]=st[0]-ot[0],Hl[1]=st[1]-ot[1],Hl[2]=st[2]-ot[2],rc[0]=Hl[2]*Math.sin(ut)+Hl[0]*Math.cos(ut),rc[1]=Hl[1],rc[2]=Hl[2]*Math.cos(ut)-Hl[0]*Math.sin(ut),at[0]=rc[0]+ot[0],at[1]=rc[1]+ot[1],at[2]=rc[2]+ot[2],at},at.by=function(at,st,ot){var ut=Math.sin(ot),Hl=Math.cos(ot),rc=st[0],sc=st[1],oc=st[2],_c=st[3],wc=st[8],Sc=st[9],iu=st[10],su=st[11];return st!==at&&(at[4]=st[4],at[5]=st[5],at[6]=st[6],at[7]=st[7],at[12]=st[12],at[13]=st[13],at[14]=st[14],at[15]=st[15]),at[0]=rc*Hl-wc*ut,at[1]=sc*Hl-Sc*ut,at[2]=oc*Hl-iu*ut,at[3]=_c*Hl-su*ut,at[8]=rc*ut+wc*Hl,at[9]=sc*ut+Sc*Hl,at[10]=oc*ut+iu*Hl,at[11]=_c*ut+su*Hl,at},at.bz=function(at,st){const ot=V(at,360),ut=V(st,360),Hl=ut-ot,rc=ut>ot?Hl-360:Hl+360;return Math.abs(Hl)<Math.abs(rc)?Hl:rc},at.c=lt,at.c0=class extends pa{},at.c1=cm,at.c2=function(at){return at<=1?1:Math.pow(2,Math.ceil(Math.log(at)/Math.LN2))},at.c3=al,at.c4=function(at,st,ot){var ut=st[0],Hl=st[1],rc=st[2],sc=ot[3]*ut+ot[7]*Hl+ot[11]*rc+ot[15];return at[0]=(ot[0]*ut+ot[4]*Hl+ot[8]*rc+ot[12])/(sc=sc||1),at[1]=(ot[1]*ut+ot[5]*Hl+ot[9]*rc+ot[13])/sc,at[2]=(ot[2]*ut+ot[6]*Hl+ot[10]*rc+ot[14])/sc,at},at.c5=class extends ta{},at.c6=class extends va{},at.c7=function(at,st){return at[0]===st[0]&&at[1]===st[1]&&at[2]===st[2]&&at[3]===st[3]&&at[4]===st[4]&&at[5]===st[5]&&at[6]===st[6]&&at[7]===st[7]&&at[8]===st[8]&&at[9]===st[9]&&at[10]===st[10]&&at[11]===st[11]&&at[12]===st[12]&&at[13]===st[13]&&at[14]===st[14]&&at[15]===st[15]},at.c8=function(at,st){var ot=at[0],ut=at[1],Hl=at[2],rc=at[3],sc=at[4],oc=at[5],_c=at[6],wc=at[7],iu=at[8],su=at[9],lu=at[10],cu=at[11],uu=at[12],pu=at[13],mu=at[14],gu=at[15],Au=st[0],yu=st[1],_u=st[2],xu=st[3],Su=st[4],Du=st[5],Lu=st[6],$u=st[7],hh=st[8],ed=st[9],td=st[10],id=st[11],nd=st[12],rd=st[13],ad=st[14],sd=st[15];return Math.abs(ot-Au)<=Sc*Math.max(1,Math.abs(ot),Math.abs(Au))&&Math.abs(ut-yu)<=Sc*Math.max(1,Math.abs(ut),Math.abs(yu))&&Math.abs(Hl-_u)<=Sc*Math.max(1,Math.abs(Hl),Math.abs(_u))&&Math.abs(rc-xu)<=Sc*Math.max(1,Math.abs(rc),Math.abs(xu))&&Math.abs(sc-Su)<=Sc*Math.max(1,Math.abs(sc),Math.abs(Su))&&Math.abs(oc-Du)<=Sc*Math.max(1,Math.abs(oc),Math.abs(Du))&&Math.abs(_c-Lu)<=Sc*Math.max(1,Math.abs(_c),Math.abs(Lu))&&Math.abs(wc-$u)<=Sc*Math.max(1,Math.abs(wc),Math.abs($u))&&Math.abs(iu-hh)<=Sc*Math.max(1,Math.abs(iu),Math.abs(hh))&&Math.abs(su-ed)<=Sc*Math.max(1,Math.abs(su),Math.abs(ed))&&Math.abs(lu-td)<=Sc*Math.max(1,Math.abs(lu),Math.abs(td))&&Math.abs(cu-id)<=Sc*Math.max(1,Math.abs(cu),Math.abs(id))&&Math.abs(uu-nd)<=Sc*Math.max(1,Math.abs(uu),Math.abs(nd))&&Math.abs(pu-rd)<=Sc*Math.max(1,Math.abs(pu),Math.abs(rd))&&Math.abs(mu-ad)<=Sc*Math.max(1,Math.abs(mu),Math.abs(ad))&&Math.abs(gu-sd)<=Sc*Math.max(1,Math.abs(gu),Math.abs(sd))},at.c9=function(at,st){return at[0]=st[0],at[1]=st[1],at[2]=st[2],at[3]=st[3],at[4]=st[4],at[5]=st[5],at[6]=st[6],at[7]=st[7],at[8]=st[8],at[9]=st[9],at[10]=st[10],at[11]=st[11],at[12]=st[12],at[13]=st[13],at[14]=st[14],at[15]=st[15],at},at.cA=function(at){delete Lu.REGISTERED_PROTOCOLS[at]},at.cB=function(at,st){const ot={};for(let Hl=0;Hl<at.length;Hl++){const ut=st&&st[at[Hl].id]||Si(at[Hl]);st&&(st[at[Hl].id]=ut);let rc=ot[ut];rc||(rc=ot[ut]=[]),rc.push(at[Hl])}const ut=[];for(const Hl in ot)ut.push(ot[Hl]);return ut},at.cC=us,at.cD=zh,at.cE=Ch,at.cF=gc,at.cG=function(st){st.bucket.createArrays(),st.bucket.tilePixelRatio=cu/(512*st.bucket.overscaling),st.bucket.compareText={},st.bucket.iconsNeedLinear=!1;const ot=st.bucket.layers[0],ut=ot.layout,Hl=ot._unevaluatedLayout._values,rc={layoutIconSize:Hl["icon-size"].possiblyEvaluate(new Cs(st.bucket.zoom+1),st.canonical),layoutTextSize:Hl["text-size"].possiblyEvaluate(new Cs(st.bucket.zoom+1),st.canonical),textMaxSize:Hl["text-size"].possiblyEvaluate(new Cs(18))};if("composite"===st.bucket.textSizeData.kind){const{minZoom:at,maxZoom:ot}=st.bucket.textSizeData;rc.compositeTextSizes=[Hl["text-size"].possiblyEvaluate(new Cs(at),st.canonical),Hl["text-size"].possiblyEvaluate(new Cs(ot),st.canonical)]}if("composite"===st.bucket.iconSizeData.kind){const{minZoom:at,maxZoom:ot}=st.bucket.iconSizeData;rc.compositeIconSizes=[Hl["icon-size"].possiblyEvaluate(new Cs(at),st.canonical),Hl["icon-size"].possiblyEvaluate(new Cs(ot),st.canonical)]}const sc=ut.get("text-line-height")*ng,oc="viewport"!==ut.get("text-rotation-alignment")&&"point"!==ut.get("symbol-placement"),_c=ut.get("text-keep-upright"),wc=ut.get("text-size");for(const Sc of st.bucket.features){const Hl=ut.get("text-font").evaluate(Sc,{},st.canonical).join(","),iu=wc.evaluate(Sc,{},st.canonical),su=rc.layoutTextSize.evaluate(Sc,{},st.canonical),lu=rc.layoutIconSize.evaluate(Sc,{},st.canonical),cu={horizontal:{},vertical:void 0},uu=Sc.text;let pu,mu=[0,0];if(uu){const rc=uu.toString(),wc=ut.get("text-letter-spacing").evaluate(Sc,{},st.canonical)*ng,lu=xs(rc)?wc:0,pu=ut.get("text-anchor").evaluate(Sc,{},st.canonical),gu=ep(ot,Sc,st.canonical);if(!gu){const at=ut.get("text-radial-offset").evaluate(Sc,{},st.canonical);mu=at?tp(pu,[at*ng,Mg]):ut.get("text-offset").evaluate(Sc,{},st.canonical).map((at=>at*ng))}let Au=oc?"center":ut.get("text-justify").evaluate(Sc,{},st.canonical);const yu="point"===ut.get("symbol-placement")?ut.get("text-max-width").evaluate(Sc,{},st.canonical)*ng:1/0,w=()=>{st.bucket.allowVerticalPlacement&&gs(rc)&&(cu.vertical=bc(uu,st.glyphMap,st.glyphPositions,st.imagePositions,Hl,yu,sc,pu,"left",lu,mu,at.an.vertical,!0,su,iu))};if(!oc&&gu){const ot=new Set;if("auto"===Au)for(let at=0;at<gu.values.length;at+=2)ot.add(rp(gu.values[at]));else ot.add(Au);let ut=!1;for(const rc of ot)if(!cu.horizontal[rc])if(ut)cu.horizontal[rc]=cu.horizontal[0];else{const ot=bc(uu,st.glyphMap,st.glyphPositions,st.imagePositions,Hl,yu,sc,"center",rc,lu,mu,at.an.horizontal,!1,su,iu);ot&&(cu.horizontal[rc]=ot,ut=1===ot.positionedLines.length)}w()}else{"auto"===Au&&(Au=rp(pu));const ot=bc(uu,st.glyphMap,st.glyphPositions,st.imagePositions,Hl,yu,sc,pu,Au,lu,mu,at.an.horizontal,!1,su,iu);ot&&(cu.horizontal[Au]=ot),w(),gs(rc)&&oc&&_c&&(cu.vertical=bc(uu,st.glyphMap,st.glyphPositions,st.imagePositions,Hl,yu,sc,pu,Au,lu,mu,at.an.vertical,!1,su,iu))}}let gu=!1;if(Sc.icon&&Sc.icon.name){const at=st.imageMap[Sc.icon.name];at&&(pu=$c(st.imagePositions[Sc.icon.name],ut.get("icon-offset").evaluate(Sc,{},st.canonical),ut.get("icon-anchor").evaluate(Sc,{},st.canonical)),gu=!!at.sdf,void 0===st.bucket.sdfIcons?st.bucket.sdfIcons=gu:st.bucket.sdfIcons!==gu&&Z("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(at.pixelRatio!==st.bucket.pixelRatio||0!==ut.get("icon-rotate").constantOr(1))&&(st.bucket.iconsNeedLinear=!0))}const Au=sp(cu.horizontal)||cu.vertical;st.bucket.iconsInText=!!Au&&Au.iconsInText,(Au||pu)&&np(st.bucket,Sc,cu,pu,st.imageMap,rc,su,lu,mu,gu,st.canonical,st.subdivisionGranularity)}st.showCollisionBoxes&&st.bucket.generateCollisionDebugBuffers()},at.cH=Nu,at.cI=nu,at.cJ=Mu,at.cK=Lm,at.cL=sg,at.cM=class{constructor(at){this._marks={start:[at.url,"start"].join("#"),end:[at.url,"end"].join("#"),measure:at.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let at=performance.getEntriesByName(this._marks.measure);return 0===at.length&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),at=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),at}},at.cN=function(at,st,ot,ut,Hl){return e(this,void 0,void 0,(function*(){if(d())try{return yield Q(at,st,ot,ut,Hl)}catch(at){}return function(at,st,ot,ut,Hl){const rc=at.width,sc=at.height;yu&&_u||(yu=new OffscreenCanvas(rc,sc),_u=yu.getContext("2d",{willReadFrequently:!0})),yu.width=rc,yu.height=sc,_u.drawImage(at,0,0,rc,sc);const oc=_u.getImageData(st,ot,ut,Hl);return _u.clearRect(0,0,rc,sc),oc.data}(at,st,ot,ut,Hl)}))},at.cO=yl,at.cP=r,at.cQ=s,at.cR=wu,at.cS=uc,at.cT=si,at.cU=jp,at.ca=at=>"symbol"===at.type,at.cb=at=>"circle"===at.type,at.cc=at=>"heatmap"===at.type,at.cd=at=>"line"===at.type,at.ce=at=>"fill"===at.type,at.cf=at=>"fill-extrusion"===at.type,at.cg=at=>"hillshade"===at.type,at.ch=at=>"color-relief"===at.type,at.ci=at=>"raster"===at.type,at.cj=at=>"background"===at.type,at.ck=at=>"custom"===at.type,at.cl=$,at.cm=function(at,st,ot){const ut=B(st.x-ot.x,st.y-ot.y),Hl=B(at.x-ot.x,at.y-ot.y);var rc,sc;return it(Math.atan2(ut[0]*Hl[1]-ut[1]*Hl[0],(rc=ut)[0]*(sc=Hl)[0]+rc[1]*sc[1]))},at.cn=uu,at.co=function(at,st){return Su[st]&&(at instanceof MouseEvent||at instanceof WheelEvent)},at.cp=function(at,st){return xu[st]&&"touches"in at},at.cq=function(at){return xu[at]||Su[at]},at.cr=function(at,st,ot){var ut=st[0],Hl=st[1];return at[0]=ot[0]*ut+ot[4]*Hl+ot[12],at[1]=ot[1]*ut+ot[5]*Hl+ot[13],at},at.cs=function(at,st){const{x:ot,y:ut}=wh.fromLngLat(st);return!(at<0||at>25||ut<0||ut>=1||ot<0||ot>=1)},at.ct=function(at,st){return at[0]=st[0],at[1]=0,at[2]=0,at[3]=0,at[4]=0,at[5]=st[1],at[6]=0,at[7]=0,at[8]=0,at[9]=0,at[10]=st[2],at[11]=0,at[12]=0,at[13]=0,at[14]=0,at[15]=1,at},at.cu=class extends Qs{},at.cv=Pg,at.cx=function(at){return at.message===Du},at.cy=pt,at.cz=function(at,st){Lu.REGISTERED_PROTOCOLS[at]=st},at.d=yt,at.e=j,at.f=at=>e(void 0,void 0,void 0,(function*(){if(0===at.byteLength)return createImageBitmap(new ImageData(1,1));const st=new Blob([new Uint8Array(at)],{type:"image/png"});try{return createImageBitmap(st)}catch(at){throw new Error(`Could not load image because of ${at.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),at.g=ct,at.h=at=>new Promise(((st,ot)=>{const ut=new Image;ut.onload=()=>{st(ut),URL.revokeObjectURL(ut.src),ut.onload=null,window.requestAnimationFrame((()=>{ut.src=Au}))},ut.onerror=()=>ot(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const Hl=new Blob([new Uint8Array(at)],{type:"image/png"});ut.src=at.byteLength?URL.createObjectURL(Hl):Au})),at.i=H,at.j=(at,st)=>dt(j(at,{type:"json"}),st),at.k=vt,at.l=xt,at.m=dt,at.n=(at,st)=>dt(j(at,{type:"arrayBuffer"}),st),at.o=function(at){return new sg(at).readFields(pc,[])},at.p=yc,at.q=il,at.r=qs,at.s=rt,at.t=Ts,at.u=Np,at.v=hh,at.w=Z,at.x=$d,at.y=as,at.z=Jd})),define("worker",["./shared"],(function(at){class t{constructor(at){this.keyCache={},at&&this.replace(at)}replace(at){this._layerConfigs={},this._layers={},this.update(at,[])}update(st,ot){for(const Hl of st){this._layerConfigs[Hl.id]=Hl;const st=this._layers[Hl.id]=at.bI(Hl);st._featureFilter=at.a9(st.filter),this.keyCache[Hl.id]&&delete this.keyCache[Hl.id]}for(const at of ot)delete this.keyCache[at],delete this._layerConfigs[at],delete this._layers[at];this.familiesBySource={};const ut=at.cB(Object.values(this._layerConfigs),this.keyCache);for(const at of ut){const st=at.map((at=>this._layers[at.id])),ot=st[0];if("none"===ot.visibility)continue;const ut=ot.source||"";let Hl=this.familiesBySource[ut];Hl||(Hl=this.familiesBySource[ut]={});const rc=ot.sourceLayer||"_geojsonTileLayer";let sc=Hl[rc];sc||(sc=Hl[rc]=[]),sc.push(st)}}}class o{constructor(st){const ot={},ut=[];for(const at in st){const Hl=st[at],rc=ot[at]={};for(const at in Hl){const st=Hl[+at];if(!st||0===st.bitmap.width||0===st.bitmap.height)continue;const ot={x:0,y:0,w:st.bitmap.width+2,h:st.bitmap.height+2};ut.push(ot),rc[at]={rect:ot,metrics:st.metrics}}}const{w:Hl,h:rc}=at.p(ut),sc=new at.q({width:Hl||1,height:rc||1});for(const oc in st){const ut=st[oc];for(const st in ut){const Hl=ut[+st];if(!Hl||0===Hl.bitmap.width||0===Hl.bitmap.height)continue;const rc=ot[oc][st].rect;at.q.copy(Hl.bitmap,sc,{x:0,y:0},{x:rc.x+1,y:rc.y+1},Hl.bitmap)}}this.image=sc,this.positions=ot}}at.cC("GlyphAtlas",o);class i{constructor(st){this.tileID=new at.Z(st.tileID.overscaledZ,st.tileID.wrap,st.tileID.canonical.z,st.tileID.canonical.x,st.tileID.canonical.y),this.uid=st.uid,this.zoom=st.zoom,this.pixelRatio=st.pixelRatio,this.tileSize=st.tileSize,this.source=st.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=st.showCollisionBoxes,this.collectResourceTiming=!!st.collectResourceTiming,this.returnDependencies=!!st.returnDependencies,this.promoteId=st.promoteId,this.inFlightDependencies=[],this.globalState=st.globalState}parse(st,ot,ut,Hl,rc){return at._(this,void 0,void 0,(function*(){this.status="parsing",this.data=st,this.collisionBoxArray=new at.a7;const sc=new at.cD(Object.keys(st.layers).sort()),oc=new at.cE(this.tileID,this.promoteId);oc.bucketLayerIDs=[];const _c={},wc={featureIndex:oc,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:ut,subdivisionGranularity:rc},Sc=ot.familiesBySource[this.source];for(const ot in Sc){const Hl=st.layers[ot];if(!Hl)continue;1===Hl.version&&at.w(`Vector tile source "${this.source}" layer "${ot}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const rc=sc.encode(ot),iu=[];for(let at=0;at<Hl.length;at++){const st=Hl.feature(at),ut=oc.getId(st,ot);iu.push({feature:st,id:ut,index:at,sourceLayerIndex:rc})}for(const st of Sc[ot]){const ot=st[0];ot.source!==this.source&&at.w(`layer.source = ${ot.source} does not equal this.source = ${this.source}`),ot.minzoom&&this.zoom<Math.floor(ot.minzoom)||ot.maxzoom&&this.zoom>=ot.maxzoom||"none"!==ot.visibility&&(r(st,this.zoom,ut),(_c[ot.id]=ot.createBucket({index:oc.bucketLayerIDs.length,layers:st,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:rc,sourceID:this.source,globalState:this.globalState})).populate(iu,wc,this.tileID.canonical),oc.bucketLayerIDs.push(st.map((at=>at.id))))}}const iu=at.bM(wc.glyphDependencies,(at=>Object.keys(at).map(Number)));this.inFlightDependencies.forEach((at=>null==at?void 0:at.abort())),this.inFlightDependencies=[];let su=Promise.resolve({});if(Object.keys(iu).length){const at=new AbortController;this.inFlightDependencies.push(at),su=Hl.sendAsync({type:"GG",data:{stacks:iu,source:this.source,tileID:this.tileID,type:"glyphs"}},at)}const lu=Object.keys(wc.iconDependencies);let cu=Promise.resolve({});if(lu.length){const at=new AbortController;this.inFlightDependencies.push(at),cu=Hl.sendAsync({type:"GI",data:{icons:lu,source:this.source,tileID:this.tileID,type:"icons"}},at)}const uu=Object.keys(wc.patternDependencies);let pu=Promise.resolve({});if(uu.length){const at=new AbortController;this.inFlightDependencies.push(at),pu=Hl.sendAsync({type:"GI",data:{icons:uu,source:this.source,tileID:this.tileID,type:"patterns"}},at)}const[mu,gu,Au]=yield Promise.all([su,cu,pu]),yu=new o(mu),_u=new at.cF(gu,Au);for(const st in _c){const ot=_c[st];ot instanceof at.a8?(r(ot.layers,this.zoom,ut),at.cG({bucket:ot,glyphMap:mu,glyphPositions:yu.positions,imageMap:gu,imagePositions:_u.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:wc.subdivisionGranularity})):ot.hasPattern&&(ot instanceof at.cH||ot instanceof at.cI||ot instanceof at.cJ)&&(r(ot.layers,this.zoom,ut),ot.addFeatures(wc,this.tileID.canonical,_u.patternPositions))}return this.status="done",{buckets:Object.values(_c).filter((at=>!at.isEmpty())),featureIndex:oc,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:yu.image,imageAtlas:_u,glyphMap:this.returnDependencies?mu:null,iconMap:this.returnDependencies?gu:null,glyphPositions:this.returnDependencies?yu.positions:null}}))}}function r(st,ot,ut){const Hl=new at.F(ot);for(const at of st)at.recalculate(Hl,ut)}class s{constructor(at,st,ot){this.actor=at,this.layerIndex=st,this.availableImages=ot,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(st,ot){return at._(this,void 0,void 0,(function*(){const ut=yield at.n(st.request,ot);try{return{vectorTile:new at.cK.VectorTile(new at.cL(ut.data)),rawData:ut.data,cacheControl:ut.cacheControl,expires:ut.expires}}catch(at){const Hl=new Uint8Array(ut.data);let rc=`Unable to parse the tile at ${st.request.url}, `;throw rc+=31===Hl[0]&&139===Hl[1]?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${at.message}`,new Error(rc)}}))}loadTile(st){return at._(this,void 0,void 0,(function*(){const ot=st.uid,ut=!!(st&&st.request&&st.request.collectResourceTiming)&&new at.cM(st.request),Hl=new i(st);this.loading[ot]=Hl;const rc=new AbortController;Hl.abort=rc;try{const sc=yield this.loadVectorTile(st,rc);if(delete this.loading[ot],!sc)return null;const oc=sc.rawData,_c={};sc.expires&&(_c.expires=sc.expires),sc.cacheControl&&(_c.cacheControl=sc.cacheControl);const wc={};if(ut){const at=ut.finish();at&&(wc.resourceTiming=JSON.parse(JSON.stringify(at)))}Hl.vectorTile=sc.vectorTile;const Sc=Hl.parse(sc.vectorTile,this.layerIndex,this.availableImages,this.actor,st.subdivisionGranularity);this.loaded[ot]=Hl,this.fetching[ot]={rawTileData:oc,cacheControl:_c,resourceTiming:wc};try{const st=yield Sc;return at.e({rawTileData:oc.slice(0)},st,_c,wc)}finally{delete this.fetching[ot]}}catch(at){throw delete this.loading[ot],Hl.status="done",this.loaded[ot]=Hl,at}}))}reloadTile(st){return at._(this,void 0,void 0,(function*(){const ot=st.uid;if(!this.loaded||!this.loaded[ot])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const ut=this.loaded[ot];if(ut.showCollisionBoxes=st.showCollisionBoxes,ut.globalState=st.globalState,"parsing"===ut.status){const Hl=yield ut.parse(ut.vectorTile,this.layerIndex,this.availableImages,this.actor,st.subdivisionGranularity);let rc;if(this.fetching[ot]){const{rawTileData:st,cacheControl:ut,resourceTiming:sc}=this.fetching[ot];delete this.fetching[ot],rc=at.e({rawTileData:st.slice(0)},Hl,ut,sc)}else rc=Hl;return rc}if("done"===ut.status&&ut.vectorTile)return ut.parse(ut.vectorTile,this.layerIndex,this.availableImages,this.actor,st.subdivisionGranularity)}))}abortTile(st){return at._(this,void 0,void 0,(function*(){const at=this.loading,ot=st.uid;at&&at[ot]&&at[ot].abort&&(at[ot].abort.abort(),delete at[ot])}))}removeTile(st){return at._(this,void 0,void 0,(function*(){this.loaded&&this.loaded[st.uid]&&delete this.loaded[st.uid]}))}}class n{constructor(){this.loaded={}}loadTile(st){return at._(this,void 0,void 0,(function*(){const{uid:ot,encoding:ut,rawImageData:Hl,redFactor:rc,greenFactor:sc,blueFactor:oc,baseShift:_c}=st,wc=Hl.width+2,Sc=Hl.height+2,iu=at.b(Hl)?new at.R({width:wc,height:Sc},yield at.cN(Hl,-1,-1,wc,Sc)):Hl,su=new at.cO(ot,iu,ut,rc,sc,oc,_c);return this.loaded=this.loaded||{},this.loaded[ot]=su,su}))}removeTile(at){const st=this.loaded,ot=at.uid;st&&st[ot]&&delete st[ot]}}var st,ot,ut=function(){if(ot)return st;function e(at,st){if(0!==at.length){t(at[0],st);for(var ot=1;ot<at.length;ot++)t(at[ot],!st)}}function t(at,st){for(var ot=0,ut=0,Hl=0,rc=at.length,sc=rc-1;Hl<rc;sc=Hl++){var oc=(at[Hl][0]-at[sc][0])*(at[sc][1]+at[Hl][1]),_c=ot+oc;ut+=Math.abs(ot)>=Math.abs(oc)?ot-_c+oc:oc-_c+ot,ot=_c}ot+ut>=0!=!!st&&at.reverse()}return ot=1,st=function t(at,st){var ot,ut=at&&at.type;if("FeatureCollection"===ut)for(ot=0;ot<at.features.length;ot++)t(at.features[ot],st);else if("GeometryCollection"===ut)for(ot=0;ot<at.geometries.length;ot++)t(at.geometries[ot],st);else if("Feature"===ut)t(at.geometry,st);else if("Polygon"===ut)e(at.coordinates,st);else if("MultiPolygon"===ut)for(ot=0;ot<at.coordinates.length;ot++)e(at.coordinates[ot],st);return at}}(),Hl=at.cP(ut);const rc=at.cK.VectorTileFeature.prototype.toGeoJSON;class d{constructor(st){this._feature=st,this.extent=at.$,this.type=st.type,this.properties=st.tags,"id"in st&&!isNaN(st.id)&&(this.id=parseInt(st.id,10))}loadGeometry(){if(1===this._feature.type){const st=[];for(const ot of this._feature.geometry)st.push([new at.P(ot[0],ot[1])]);return st}{const st=[];for(const ot of this._feature.geometry){const ut=[];for(const st of ot)ut.push(new at.P(st[0],st[1]));st.push(ut)}return st}}toGeoJSON(at,st,ot){return rc.call(this,at,st,ot)}}class f{constructor(st){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=at.$,this.length=st.length,this._features=st}feature(at){return new d(this._features[at])}}var sc,oc,_c,wc={exports:{}},Sc=function(){if(_c)return wc.exports;_c=1;var st=at.cS(),ot=function(){if(oc)return sc;oc=1;var st=at.cQ(),ot=at.cR().VectorTileFeature;function i(at,st){this.options=st||{},this.features=at,this.length=at.length}function r(at,st){this.id="number"==typeof at.id?at.id:void 0,this.type=at.type,this.rawGeometry=1===at.type?[at.geometry]:at.geometry,this.properties=at.tags,this.extent=st||4096}return sc=i,i.prototype.feature=function(at){return new r(this.features[at],this.options.extent)},r.prototype.loadGeometry=function(){var at=this.rawGeometry;this.geometry=[];for(var ot=0;ot<at.length;ot++){for(var ut=at[ot],Hl=[],rc=0;rc<ut.length;rc++)Hl.push(new st(ut[rc][0],ut[rc][1]));this.geometry.push(Hl)}return this.geometry},r.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var at=this.geometry,st=1/0,ot=-1/0,ut=1/0,Hl=-1/0,rc=0;rc<at.length;rc++)for(var sc=at[rc],oc=0;oc<sc.length;oc++){var _c=sc[oc];st=Math.min(st,_c.x),ot=Math.max(ot,_c.x),ut=Math.min(ut,_c.y),Hl=Math.max(Hl,_c.y)}return[st,ut,ot,Hl]},r.prototype.toGeoJSON=ot.prototype.toGeoJSON,sc}();function i(at){var ot=new st;return function(at,st){for(var ot in at.layers)st.writeMessage(3,r,at.layers[ot])}(at,ot),ot.finish()}function r(at,st){var ot;st.writeVarintField(15,at.version||1),st.writeStringField(1,at.name||""),st.writeVarintField(5,at.extent||4096);var ut={keys:[],values:[],keycache:{},valuecache:{}};for(ot=0;ot<at.length;ot++)ut.feature=at.feature(ot),st.writeMessage(2,s,ut);var Hl=ut.keys;for(ot=0;ot<Hl.length;ot++)st.writeStringField(3,Hl[ot]);var rc=ut.values;for(ot=0;ot<rc.length;ot++)st.writeMessage(4,u,rc[ot])}function s(at,st){var ot=at.feature;void 0!==ot.id&&st.writeVarintField(1,ot.id),st.writeMessage(2,n,at),st.writeVarintField(3,ot.type),st.writeMessage(4,c,ot)}function n(at,st){var ot=at.feature,ut=at.keys,Hl=at.values,rc=at.keycache,sc=at.valuecache;for(var oc in ot.properties){var _c=ot.properties[oc],wc=rc[oc];if(null!==_c){void 0===wc&&(ut.push(oc),rc[oc]=wc=ut.length-1),st.writeVarint(wc);var Sc=typeof _c;"string"!==Sc&&"boolean"!==Sc&&"number"!==Sc&&(_c=JSON.stringify(_c));var iu=Sc+":"+_c,su=sc[iu];void 0===su&&(Hl.push(_c),sc[iu]=su=Hl.length-1),st.writeVarint(su)}}}function a(at,st){return(st<<3)+(7&at)}function l(at){return at<<1^at>>31}function c(at,st){for(var ot=at.loadGeometry(),ut=at.type,Hl=0,rc=0,sc=ot.length,oc=0;oc<sc;oc++){var _c=ot[oc],wc=1;1===ut&&(wc=_c.length),st.writeVarint(a(1,wc));for(var Sc=3===ut?_c.length-1:_c.length,iu=0;iu<Sc;iu++){1===iu&&1!==ut&&st.writeVarint(a(2,Sc-1));var su=_c[iu].x-Hl,lu=_c[iu].y-rc;st.writeVarint(l(su)),st.writeVarint(l(lu)),Hl+=su,rc+=lu}3===ut&&st.writeVarint(a(7,1))}}function u(at,st){var ot=typeof at;"string"===ot?st.writeStringField(1,at):"boolean"===ot?st.writeBooleanField(7,at):"number"===ot&&(at%1!=0?st.writeDoubleField(3,at):at<0?st.writeSVarintField(6,at):st.writeVarintField(5,at))}return wc.exports=i,wc.exports.fromVectorTileJs=i,wc.exports.fromGeojsonVt=function(at,st){st=st||{};var ut={};for(var Hl in at)ut[Hl]=new ot(at[Hl].features,st),ut[Hl].name=Hl,ut[Hl].version=st.version,ut[Hl].extent=st.extent;return i({layers:ut})},wc.exports.GeoJSONWrapper=ot,wc.exports}(),iu=at.cP(Sc);const su={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:at=>at},lu=Math.fround||(cu=new Float32Array(1),at=>(cu[0]=+at,cu[0]));var cu;class _{constructor(at){this.options=Object.assign(Object.create(su),at),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(at){const{log:st,minZoom:ot,maxZoom:ut}=this.options;st&&console.time("total time");const Hl=`prepare ${at.length} points`;st&&console.time(Hl),this.points=at;const rc=[];for(let oc=0;oc<at.length;oc++){const st=at[oc];if(!st.geometry)continue;const[ot,ut]=st.geometry.coordinates,Hl=lu(P(ot)),sc=lu(k(ut));rc.push(Hl,sc,1/0,oc,-1,1),this.options.reduce&&rc.push(0)}let sc=this.trees[ut+1]=this._createTree(rc);st&&console.timeEnd(Hl);for(let oc=ut;oc>=ot;oc--){const at=+Date.now();sc=this.trees[oc]=this._createTree(this._cluster(sc,oc)),st&&console.log("z%d: %d clusters in %dms",oc,sc.numItems,+Date.now()-at)}return st&&console.timeEnd("total time"),this}getClusters(at,st){let ot=((at[0]+180)%360+360)%360-180;const ut=Math.max(-90,Math.min(90,at[1]));let Hl=180===at[2]?180:((at[2]+180)%360+360)%360-180;const rc=Math.max(-90,Math.min(90,at[3]));if(at[2]-at[0]>=360)ot=-180,Hl=180;else if(ot>Hl){const at=this.getClusters([ot,ut,180,rc],st),sc=this.getClusters([-180,ut,Hl,rc],st);return at.concat(sc)}const sc=this.trees[this._limitZoom(st)],oc=sc.range(P(ot),k(rc),P(Hl),k(ut)),_c=sc.data,wc=[];for(const Sc of oc){const at=this.stride*Sc;wc.push(_c[at+5]>1?M(_c,at,this.clusterProps):this.points[_c[at+3]])}return wc}getChildren(at){const st=this._getOriginId(at),ot=this._getOriginZoom(at),ut="No cluster with the specified id.",Hl=this.trees[ot];if(!Hl)throw new Error(ut);const rc=Hl.data;if(st*this.stride>=rc.length)throw new Error(ut);const sc=this.options.radius/(this.options.extent*Math.pow(2,ot-1)),oc=Hl.within(rc[st*this.stride],rc[st*this.stride+1],sc),_c=[];for(const wc of oc){const st=wc*this.stride;rc[st+4]===at&&_c.push(rc[st+5]>1?M(rc,st,this.clusterProps):this.points[rc[st+3]])}if(0===_c.length)throw new Error(ut);return _c}getLeaves(at,st,ot){const ut=[];return this._appendLeaves(ut,at,st=st||10,ot=ot||0,0),ut}getTile(at,st,ot){const ut=this.trees[this._limitZoom(at)],Hl=Math.pow(2,at),{extent:rc,radius:sc}=this.options,oc=sc/rc,_c=(ot-oc)/Hl,wc=(ot+1+oc)/Hl,Sc={features:[]};return this._addTileFeatures(ut.range((st-oc)/Hl,_c,(st+1+oc)/Hl,wc),ut.data,st,ot,Hl,Sc),0===st&&this._addTileFeatures(ut.range(1-oc/Hl,_c,1,wc),ut.data,Hl,ot,Hl,Sc),st===Hl-1&&this._addTileFeatures(ut.range(0,_c,oc/Hl,wc),ut.data,-1,ot,Hl,Sc),Sc.features.length?Sc:null}getClusterExpansionZoom(at){let st=this._getOriginZoom(at)-1;for(;st<=this.options.maxZoom;){const ot=this.getChildren(at);if(st++,1!==ot.length)break;at=ot[0].properties.cluster_id}return st}_appendLeaves(at,st,ot,ut,Hl){const rc=this.getChildren(st);for(const sc of rc){const st=sc.properties;if(st&&st.cluster?Hl+st.point_count<=ut?Hl+=st.point_count:Hl=this._appendLeaves(at,st.cluster_id,ot,ut,Hl):Hl<ut?Hl++:at.push(sc),at.length===ot)break}return Hl}_createTree(st){const ot=new at.aH(st.length/this.stride|0,this.options.nodeSize,Float32Array);for(let at=0;at<st.length;at+=this.stride)ot.add(st[at],st[at+1]);return ot.finish(),ot.data=st,ot}_addTileFeatures(at,st,ot,ut,Hl,rc){for(const sc of at){const at=sc*this.stride,oc=st[at+5]>1;let _c,wc,Sc;if(oc)_c=I(st,at,this.clusterProps),wc=st[at],Sc=st[at+1];else{const ot=this.points[st[at+3]];_c=ot.properties;const[ut,Hl]=ot.geometry.coordinates;wc=P(ut),Sc=k(Hl)}const iu={type:1,geometry:[[Math.round(this.options.extent*(wc*Hl-ot)),Math.round(this.options.extent*(Sc*Hl-ut))]],tags:_c};let su;su=oc||this.options.generateId?st[at+3]:this.points[st[at+3]].id,void 0!==su&&(iu.id=su),rc.features.push(iu)}}_limitZoom(at){return Math.max(this.options.minZoom,Math.min(Math.floor(+at),this.options.maxZoom+1))}_cluster(at,st){const{radius:ot,extent:ut,reduce:Hl,minPoints:rc}=this.options,sc=ot/(ut*Math.pow(2,st)),oc=at.data,_c=[],wc=this.stride;for(let Sc=0;Sc<oc.length;Sc+=wc){if(oc[Sc+2]<=st)continue;oc[Sc+2]=st;const ot=oc[Sc],ut=oc[Sc+1],iu=at.within(oc[Sc],oc[Sc+1],sc),su=oc[Sc+5];let lu=su;for(const at of iu){const ot=at*wc;oc[ot+2]>st&&(lu+=oc[ot+5])}if(lu>su&&lu>=rc){let at,rc=ot*su,sc=ut*su,cu=-1;const uu=(Sc/wc<<5)+(st+1)+this.points.length;for(const ot of iu){const ut=ot*wc;if(oc[ut+2]<=st)continue;oc[ut+2]=st;const _c=oc[ut+5];rc+=oc[ut]*_c,sc+=oc[ut+1]*_c,oc[ut+4]=uu,Hl&&(at||(at=this._map(oc,Sc,!0),cu=this.clusterProps.length,this.clusterProps.push(at)),Hl(at,this._map(oc,ut)))}oc[Sc+4]=uu,_c.push(rc/lu,sc/lu,1/0,uu,-1,lu),Hl&&_c.push(cu)}else{for(let at=0;at<wc;at++)_c.push(oc[Sc+at]);if(lu>1)for(const at of iu){const ot=at*wc;if(!(oc[ot+2]<=st)){oc[ot+2]=st;for(let at=0;at<wc;at++)_c.push(oc[ot+at])}}}}return _c}_getOriginId(at){return at-this.points.length>>5}_getOriginZoom(at){return(at-this.points.length)%32}_map(at,st,ot){if(at[st+5]>1){const ut=this.clusterProps[at[st+6]];return ot?Object.assign({},ut):ut}const ut=this.points[at[st+3]].properties,Hl=this.options.map(ut);return ot&&Hl===ut?Object.assign({},Hl):Hl}}function M(at,st,ot){return{type:"Feature",id:at[st+3],properties:I(at,st,ot),geometry:{type:"Point",coordinates:[(ut=at[st],360*(ut-.5)),T(at[st+1])]}};var ut}function I(at,st,ot){const ut=at[st+5],Hl=ut>=1e4?`${Math.round(ut/1e3)}k`:ut>=1e3?Math.round(ut/100)/10+"k":ut,rc=at[st+6],sc=-1===rc?{}:Object.assign({},ot[rc]);return Object.assign(sc,{cluster:!0,cluster_id:at[st+3],point_count:ut,point_count_abbreviated:Hl})}function P(at){return at/360+.5}function k(at){const st=Math.sin(at*Math.PI/180),ot=.5-.25*Math.log((1+st)/(1-st))/Math.PI;return ot<0?0:ot>1?1:ot}function T(at){const st=(180-360*at)*Math.PI/180;return 360*Math.atan(Math.exp(st))/Math.PI-90}function D(at,st,ot,ut){let Hl=ut;const rc=st+(ot-st>>1);let sc,oc=ot-st;const _c=at[st],wc=at[st+1],Sc=at[ot],iu=at[ot+1];for(let su=st+3;su<ot;su+=3){const st=C(at[su],at[su+1],_c,wc,Sc,iu);if(st>Hl)sc=su,Hl=st;else if(st===Hl){const at=Math.abs(su-rc);at<oc&&(sc=su,oc=at)}}Hl>ut&&(sc-st>3&&D(at,st,sc,ut),at[sc+2]=Hl,ot-sc>3&&D(at,sc,ot,ut))}function C(at,st,ot,ut,Hl,rc){let sc=Hl-ot,oc=rc-ut;if(0!==sc||0!==oc){const _c=((at-ot)*sc+(st-ut)*oc)/(sc*sc+oc*oc);_c>1?(ot=Hl,ut=rc):_c>0&&(ot+=sc*_c,ut+=oc*_c)}return sc=at-ot,oc=st-ut,sc*sc+oc*oc}function O(at,st,ot,ut){const Hl={id:null==at?null:at,type:st,geometry:ot,tags:ut,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if("Point"===st||"MultiPoint"===st||"LineString"===st)L(Hl,ot);else if("Polygon"===st)L(Hl,ot[0]);else if("MultiLineString"===st)for(const rc of ot)L(Hl,rc);else if("MultiPolygon"===st)for(const rc of ot)L(Hl,rc[0]);return Hl}function L(at,st){for(let ot=0;ot<st.length;ot+=3)at.minX=Math.min(at.minX,st[ot]),at.minY=Math.min(at.minY,st[ot+1]),at.maxX=Math.max(at.maxX,st[ot]),at.maxY=Math.max(at.maxY,st[ot+1])}function F(at,st,ot,ut){if(!st.geometry)return;const Hl=st.geometry.coordinates;if(Hl&&0===Hl.length)return;const rc=st.geometry.type,sc=Math.pow(ot.tolerance/((1<<ot.maxZoom)*ot.extent),2);let oc=[],_c=st.id;if(ot.promoteId?_c=st.properties[ot.promoteId]:ot.generateId&&(_c=ut||0),"Point"===rc)G(Hl,oc);else if("MultiPoint"===rc)for(const wc of Hl)G(wc,oc);else if("LineString"===rc)z(Hl,oc,sc,!1);else if("MultiLineString"===rc){if(ot.lineMetrics){for(const ot of Hl)oc=[],z(ot,oc,sc,!1),at.push(O(_c,"LineString",oc,st.properties));return}A(Hl,oc,sc,!1)}else if("Polygon"===rc)A(Hl,oc,sc,!0);else{if("MultiPolygon"!==rc){if("GeometryCollection"===rc){for(const Hl of st.geometry.geometries)F(at,{id:_c,geometry:Hl,properties:st.properties},ot,ut);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const at of Hl){const st=[];A(at,st,sc,!0),oc.push(st)}}at.push(O(_c,rc,oc,st.properties))}function G(at,st){st.push(j(at[0]),E(at[1]),0)}function z(at,st,ot,ut){let Hl,rc,sc=0;for(let _c=0;_c<at.length;_c++){const ot=j(at[_c][0]),oc=E(at[_c][1]);st.push(ot,oc,0),_c>0&&(sc+=ut?(Hl*oc-ot*rc)/2:Math.sqrt(Math.pow(ot-Hl,2)+Math.pow(oc-rc,2))),Hl=ot,rc=oc}const oc=st.length-3;st[2]=1,D(st,0,oc,ot),st[oc+2]=1,st.size=Math.abs(sc),st.start=0,st.end=st.size}function A(at,st,ot,ut){for(let Hl=0;Hl<at.length;Hl++){const rc=[];z(at[Hl],rc,ot,ut),st.push(rc)}}function j(at){return at/360+.5}function E(at){const st=Math.sin(at*Math.PI/180),ot=.5-.25*Math.log((1+st)/(1-st))/Math.PI;return ot<0?0:ot>1?1:ot}function Z(at,st,ot,ut,Hl,rc,sc,oc){if(ut/=st,rc>=(ot/=st)&&sc<ut)return at;if(sc<ot||rc>=ut)return null;const _c=[];for(const wc of at){const at=wc.geometry;let st=wc.type;const rc=0===Hl?wc.minX:wc.minY,sc=0===Hl?wc.maxX:wc.maxY;if(rc>=ot&&sc<ut){_c.push(wc);continue}if(sc<ot||rc>=ut)continue;let Sc=[];if("Point"===st||"MultiPoint"===st)N(at,Sc,ot,ut,Hl);else if("LineString"===st)J(at,Sc,ot,ut,Hl,!1,oc.lineMetrics);else if("MultiLineString"===st)W(at,Sc,ot,ut,Hl,!1);else if("Polygon"===st)W(at,Sc,ot,ut,Hl,!0);else if("MultiPolygon"===st)for(const oc of at){const at=[];W(oc,at,ot,ut,Hl,!0),at.length&&Sc.push(at)}if(Sc.length){if(oc.lineMetrics&&"LineString"===st){for(const at of Sc)_c.push(O(wc.id,st,at,wc.tags));continue}"LineString"!==st&&"MultiLineString"!==st||(1===Sc.length?(st="LineString",Sc=Sc[0]):st="MultiLineString"),"Point"!==st&&"MultiPoint"!==st||(st=3===Sc.length?"Point":"MultiPoint"),_c.push(O(wc.id,st,Sc,wc.tags))}}return _c.length?_c:null}function N(at,st,ot,ut,Hl){for(let rc=0;rc<at.length;rc+=3){const sc=at[rc+Hl];sc>=ot&&sc<=ut&&Y(st,at[rc],at[rc+1],at[rc+2])}}function J(at,st,ot,ut,Hl,rc,sc){let oc=R(at);const _c=0===Hl?V:q;let wc,Sc,iu=at.start;for(let pu=0;pu<at.length-3;pu+=3){const su=at[pu],lu=at[pu+1],cu=at[pu+2],uu=at[pu+3],mu=at[pu+4],gu=0===Hl?su:lu,Au=0===Hl?uu:mu;let yu=!1;sc&&(wc=Math.sqrt(Math.pow(su-uu,2)+Math.pow(lu-mu,2))),gu<ot?Au>ot&&(Sc=_c(oc,su,lu,uu,mu,ot),sc&&(oc.start=iu+wc*Sc)):gu>ut?Au<ut&&(Sc=_c(oc,su,lu,uu,mu,ut),sc&&(oc.start=iu+wc*Sc)):Y(oc,su,lu,cu),Au<ot&&gu>=ot&&(Sc=_c(oc,su,lu,uu,mu,ot),yu=!0),Au>ut&&gu<=ut&&(Sc=_c(oc,su,lu,uu,mu,ut),yu=!0),!rc&&yu&&(sc&&(oc.end=iu+wc*Sc),st.push(oc),oc=R(at)),sc&&(iu+=wc)}let su=at.length-3;const lu=at[su],cu=at[su+1],uu=0===Hl?lu:cu;uu>=ot&&uu<=ut&&Y(oc,lu,cu,at[su+2]),su=oc.length-3,rc&&su>=3&&(oc[su]!==oc[0]||oc[su+1]!==oc[1])&&Y(oc,oc[0],oc[1],oc[2]),oc.length&&st.push(oc)}function R(at){const st=[];return st.size=at.size,st.start=at.start,st.end=at.end,st}function W(at,st,ot,ut,Hl,rc){for(const sc of at)J(sc,st,ot,ut,Hl,rc,!1)}function Y(at,st,ot,ut){at.push(st,ot,ut)}function V(at,st,ot,ut,Hl,rc){const sc=(rc-st)/(ut-st);return Y(at,rc,ot+(Hl-ot)*sc,1),sc}function q(at,st,ot,ut,Hl,rc){const sc=(rc-ot)/(Hl-ot);return Y(at,st+(ut-st)*sc,rc,1),sc}function H(at,st){const ot=[];for(let ut=0;ut<at.length;ut++){const Hl=at[ut],rc=Hl.type;let sc;if("Point"===rc||"MultiPoint"===rc||"LineString"===rc)sc=X(Hl.geometry,st);else if("MultiLineString"===rc||"Polygon"===rc){sc=[];for(const at of Hl.geometry)sc.push(X(at,st))}else if("MultiPolygon"===rc){sc=[];for(const at of Hl.geometry){const ot=[];for(const ut of at)ot.push(X(ut,st));sc.push(ot)}}ot.push(O(Hl.id,rc,sc,Hl.tags))}return ot}function X(at,st){const ot=[];ot.size=at.size,void 0!==at.start&&(ot.start=at.start,ot.end=at.end);for(let ut=0;ut<at.length;ut+=3)ot.push(at[ut]+st,at[ut+1],at[ut+2]);return ot}function B(at,st){if(at.transformed)return at;const ot=1<<at.z,ut=at.x,Hl=at.y;for(const rc of at.features){const at=rc.geometry,sc=rc.type;if(rc.geometry=[],1===sc)for(let oc=0;oc<at.length;oc+=2)rc.geometry.push($(at[oc],at[oc+1],st,ot,ut,Hl));else for(let oc=0;oc<at.length;oc++){const sc=[];for(let rc=0;rc<at[oc].length;rc+=2)sc.push($(at[oc][rc],at[oc][rc+1],st,ot,ut,Hl));rc.geometry.push(sc)}}return at.transformed=!0,at}function $(at,st,ot,ut,Hl,rc){return[Math.round(ot*(at*ut-Hl)),Math.round(ot*(st*ut-rc))]}function U(at,st,ot,ut,Hl){const rc=st===Hl.maxZoom?0:Hl.tolerance/((1<<st)*Hl.extent),sc={features:[],numPoints:0,numSimplified:0,numFeatures:at.length,source:null,x:ot,y:ut,z:st,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const oc of at)K(sc,oc,rc,Hl);return sc}function K(at,st,ot,ut){const Hl=st.geometry,rc=st.type,sc=[];if(at.minX=Math.min(at.minX,st.minX),at.minY=Math.min(at.minY,st.minY),at.maxX=Math.max(at.maxX,st.maxX),at.maxY=Math.max(at.maxY,st.maxY),"Point"===rc||"MultiPoint"===rc)for(let oc=0;oc<Hl.length;oc+=3)sc.push(Hl[oc],Hl[oc+1]),at.numPoints++,at.numSimplified++;else if("LineString"===rc)Q(sc,Hl,at,ot,!1,!1);else if("MultiLineString"===rc||"Polygon"===rc)for(let oc=0;oc<Hl.length;oc++)Q(sc,Hl[oc],at,ot,"Polygon"===rc,0===oc);else if("MultiPolygon"===rc)for(let oc=0;oc<Hl.length;oc++){const st=Hl[oc];for(let ut=0;ut<st.length;ut++)Q(sc,st[ut],at,ot,!0,0===ut)}if(sc.length){let ot=st.tags||null;if("LineString"===rc&&ut.lineMetrics){ot={};for(const at in st.tags)ot[at]=st.tags[at];ot.mapbox_clip_start=Hl.start/Hl.size,ot.mapbox_clip_end=Hl.end/Hl.size}const oc={geometry:sc,type:"Polygon"===rc||"MultiPolygon"===rc?3:"LineString"===rc||"MultiLineString"===rc?2:1,tags:ot};null!==st.id&&(oc.id=st.id),at.features.push(oc)}}function Q(at,st,ot,ut,Hl,rc){const sc=ut*ut;if(ut>0&&st.size<(Hl?sc:ut))return void(ot.numPoints+=st.length/3);const oc=[];for(let _c=0;_c<st.length;_c+=3)(0===ut||st[_c+2]>sc)&&(ot.numSimplified++,oc.push(st[_c],st[_c+1])),ot.numPoints++;Hl&&function(at,st){let ot=0;for(let ut=0,Hl=at.length,rc=Hl-2;ut<Hl;rc=ut,ut+=2)ot+=(at[ut]-at[rc])*(at[ut+1]+at[rc+1]);if(ot>0===st)for(let ut=0,Hl=at.length;ut<Hl/2;ut+=2){const st=at[ut],ot=at[ut+1];at[ut]=at[Hl-2-ut],at[ut+1]=at[Hl-1-ut],at[Hl-2-ut]=st,at[Hl-1-ut]=ot}}(oc,rc),at.push(oc)}const uu={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class te{constructor(at,st){const ot=(st=this.options=function(at,st){for(const ot in st)at[ot]=st[ot];return at}(Object.create(uu),st)).debug;if(ot&&console.time("preprocess data"),st.maxZoom<0||st.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(st.promoteId&&st.generateId)throw new Error("promoteId and generateId cannot be used together.");let ut=function(at,st){const ot=[];if("FeatureCollection"===at.type)for(let ut=0;ut<at.features.length;ut++)F(ot,at.features[ut],st,ut);else F(ot,"Feature"===at.type?at:{geometry:at},st);return ot}(at,st);this.tiles={},this.tileCoords=[],ot&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",st.indexMaxZoom,st.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ut=function(at,st){const ot=st.buffer/st.extent;let ut=at;const Hl=Z(at,1,-1-ot,ot,0,-1,2,st),rc=Z(at,1,1-ot,2+ot,0,-1,2,st);return(Hl||rc)&&(ut=Z(at,1,-ot,1+ot,0,-1,2,st)||[],Hl&&(ut=H(Hl,1).concat(ut)),rc&&(ut=ut.concat(H(rc,-1)))),ut}(ut,st),ut.length&&this.splitTile(ut,0,0,0),ot&&(ut.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(at,st,ot,ut,Hl,rc,sc){const oc=[at,st,ot,ut],_c=this.options,wc=_c.debug;for(;oc.length;){ut=oc.pop(),ot=oc.pop(),st=oc.pop(),at=oc.pop();const Sc=1<<st,iu=oe(st,ot,ut);let su=this.tiles[iu];if(!su&&(wc>1&&console.time("creation"),su=this.tiles[iu]=U(at,st,ot,ut,_c),this.tileCoords.push({z:st,x:ot,y:ut}),wc)){wc>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",st,ot,ut,su.numFeatures,su.numPoints,su.numSimplified),console.timeEnd("creation"));const at=`z${st}`;this.stats[at]=(this.stats[at]||0)+1,this.total++}if(su.source=at,null==Hl){if(st===_c.indexMaxZoom||su.numPoints<=_c.indexMaxPoints)continue}else{if(st===_c.maxZoom||st===Hl)continue;if(null!=Hl){const at=Hl-st;if(ot!==rc>>at||ut!==sc>>at)continue}}if(su.source=null,0===at.length)continue;wc>1&&console.time("clipping");const lu=.5*_c.buffer/_c.extent,cu=.5-lu,uu=.5+lu,pu=1+lu;let mu=null,gu=null,Au=null,yu=null,_u=Z(at,Sc,ot-lu,ot+uu,0,su.minX,su.maxX,_c),xu=Z(at,Sc,ot+cu,ot+pu,0,su.minX,su.maxX,_c);at=null,_u&&(mu=Z(_u,Sc,ut-lu,ut+uu,1,su.minY,su.maxY,_c),gu=Z(_u,Sc,ut+cu,ut+pu,1,su.minY,su.maxY,_c),_u=null),xu&&(Au=Z(xu,Sc,ut-lu,ut+uu,1,su.minY,su.maxY,_c),yu=Z(xu,Sc,ut+cu,ut+pu,1,su.minY,su.maxY,_c),xu=null),wc>1&&console.timeEnd("clipping"),oc.push(mu||[],st+1,2*ot,2*ut),oc.push(gu||[],st+1,2*ot,2*ut+1),oc.push(Au||[],st+1,2*ot+1,2*ut),oc.push(yu||[],st+1,2*ot+1,2*ut+1)}}getTile(at,st,ot){at=+at,st=+st,ot=+ot;const ut=this.options,{extent:Hl,debug:rc}=ut;if(at<0||at>24)return null;const sc=1<<at,oc=oe(at,st=st+sc&sc-1,ot);if(this.tiles[oc])return B(this.tiles[oc],Hl);rc>1&&console.log("drilling down to z%d-%d-%d",at,st,ot);let _c,wc=at,Sc=st,iu=ot;for(;!_c&&wc>0;)wc--,Sc>>=1,iu>>=1,_c=this.tiles[oe(wc,Sc,iu)];return _c&&_c.source?(rc>1&&(console.log("found parent tile z%d-%d-%d",wc,Sc,iu),console.time("drilling down")),this.splitTile(_c.source,wc,Sc,iu,at,st,ot),rc>1&&console.timeEnd("drilling down"),this.tiles[oc]?B(this.tiles[oc],Hl):null):null}}function oe(at,st,ot){return 32*((1<<at)*ot+st)+at}function ie(at,st){return st?at.properties[st]:at.id}function re(at,st){if(null==at)return!0;if("Feature"===at.type)return null!=ie(at,st);if("FeatureCollection"===at.type){const ot=new Set;for(const ut of at.features){const at=ie(ut,st);if(null==at)return!1;if(ot.has(at))return!1;ot.add(at)}return!0}return!1}function se(at,st){const ot=new Map;if(null==at);else if("Feature"===at.type)ot.set(ie(at,st),at);else for(const ut of at.features)ot.set(ie(ut,st),ut);return ot}class ne extends s{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(st,ot){return at._(this,void 0,void 0,(function*(){const at=st.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const ot=this._geoJSONIndex.getTile(at.z,at.x,at.y);if(!ot)return null;const ut=new f(ot.features);let Hl=iu(ut);return 0===Hl.byteOffset&&Hl.byteLength===Hl.buffer.byteLength||(Hl=new Uint8Array(Hl)),{vectorTile:ut,rawData:Hl.buffer}}))}loadData(st){return at._(this,void 0,void 0,(function*(){var ot;null===(ot=this._pendingRequest)||void 0===ot||ot.abort();const ut=!!(st&&st.request&&st.request.collectResourceTiming)&&new at.cM(st.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(st,this._pendingRequest),this._geoJSONIndex=st.cluster?new _(function({superclusterOptions:st,clusterProperties:ot}){if(!ot||!st)return st;const ut={},Hl={},rc={accumulated:null,zoom:0},sc={properties:null},oc=Object.keys(ot);for(const _c of oc){const[st,rc]=ot[_c],sc=at.cT(rc),oc=at.cT("string"==typeof st?[st,["accumulated"],["get",_c]]:st);ut[_c]=sc.value,Hl[_c]=oc.value}return st.map=at=>{sc.properties=at;const st={};for(const ot of oc)st[ot]=ut[ot].evaluate(rc,sc);return st},st.reduce=(at,st)=>{sc.properties=st;for(const ot of oc)rc.accumulated=at[ot],at[ot]=Hl[ot].evaluate(rc,sc)},st}(st)).load((yield this._pendingData).features):(Hl=yield this._pendingData,new te(Hl,st.geojsonVtOptions)),this.loaded={};const ot={};if(ut){const at=ut.finish();at&&(ot.resourceTiming={},ot.resourceTiming[st.source]=JSON.parse(JSON.stringify(at)))}return ot}catch(st){if(delete this._pendingRequest,at.cx(st))return{abandoned:!0};throw st}var Hl}))}getData(){return at._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(at){const st=this.loaded;return st&&st[at.uid]?super.reloadTile(at):this.loadTile(at)}loadAndProcessGeoJSON(st,ot){return at._(this,void 0,void 0,(function*(){let ut=yield this.loadGeoJSON(st,ot);if(delete this._pendingRequest,"object"!=typeof ut)throw new Error(`Input data given to '${st.source}' is not a valid GeoJSON object.`);if(Hl(ut,!0),st.filter){const ot=at.cT(st.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if("error"===ot.result)throw new Error(ot.value.map((at=>`${at.key}: ${at.message}`)).join(", "));const Hl=ut.features.filter((at=>ot.value.evaluate({zoom:0},at)));ut={type:"FeatureCollection",features:Hl}}return ut}))}loadGeoJSON(st,ot){return at._(this,void 0,void 0,(function*(){const{promoteId:ut}=st;if(st.request){const Hl=yield at.j(st.request,ot);return this._dataUpdateable=re(Hl.data,ut)?se(Hl.data,ut):void 0,Hl.data}if("string"==typeof st.data)try{const at=JSON.parse(st.data);return this._dataUpdateable=re(at,ut)?se(at,ut):void 0,at}catch(at){throw new Error(`Input data given to '${st.source}' is not a valid GeoJSON object.`)}if(!st.dataDiff)throw new Error(`Input data given to '${st.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${st.source}`);return function(at,st,ot){var ut,Hl,rc,sc;if(st.removeAll&&at.clear(),st.remove)for(const oc of st.remove)at.delete(oc);if(st.add)for(const oc of st.add){const st=ie(oc,ot);null!=st&&at.set(st,oc)}if(st.update)for(const oc of st.update){let st=at.get(oc.id);if(null==st)continue;const ot=!oc.removeAllProperties&&((null===(ut=oc.removeProperties)||void 0===ut?void 0:ut.length)>0||(null===(Hl=oc.addOrUpdateProperties)||void 0===Hl?void 0:Hl.length)>0);if((oc.newGeometry||oc.removeAllProperties||ot)&&(st=Object.assign({},st),at.set(oc.id,st),ot&&(st.properties=Object.assign({},st.properties))),oc.newGeometry&&(st.geometry=oc.newGeometry),oc.removeAllProperties)st.properties={};else if((null===(rc=oc.removeProperties)||void 0===rc?void 0:rc.length)>0)for(const at of oc.removeProperties)Object.prototype.hasOwnProperty.call(st.properties,at)&&delete st.properties[at];if((null===(sc=oc.addOrUpdateProperties)||void 0===sc?void 0:sc.length)>0)for(const{key:at,value:ut}of oc.addOrUpdateProperties)st.properties[at]=ut}}(this._dataUpdateable,st.dataDiff,ut),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}}))}removeSource(st){return at._(this,void 0,void 0,(function*(){this._pendingRequest&&this._pendingRequest.abort()}))}getClusterExpansionZoom(at){return this._geoJSONIndex.getClusterExpansionZoom(at.clusterId)}getClusterChildren(at){return this._geoJSONIndex.getChildren(at.clusterId)}getClusterLeaves(at){return this._geoJSONIndex.getLeaves(at.clusterId,at.limit,at.offset)}}class ae{constructor(st){this.self=st,this.actor=new at.J(st),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(at,st)=>{if(this.externalWorkerSourceTypes[at])throw new Error(`Worker source with name "${at}" already registered.`);this.externalWorkerSourceTypes[at]=st},this.self.addProtocol=at.cz,this.self.removeProtocol=at.cA,this.self.registerRTLTextPlugin=st=>{at.cU.setMethods(st)},this.actor.registerMessageHandler("LDT",((at,st)=>this._getDEMWorkerSource(at,st.source).loadTile(st))),this.actor.registerMessageHandler("RDT",((st,ot)=>at._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(st,ot.source).removeTile(ot)})))),this.actor.registerMessageHandler("GCEZ",((st,ot)=>at._(this,void 0,void 0,(function*(){return this._getWorkerSource(st,ot.type,ot.source).getClusterExpansionZoom(ot)})))),this.actor.registerMessageHandler("GCC",((st,ot)=>at._(this,void 0,void 0,(function*(){return this._getWorkerSource(st,ot.type,ot.source).getClusterChildren(ot)})))),this.actor.registerMessageHandler("GCL",((st,ot)=>at._(this,void 0,void 0,(function*(){return this._getWorkerSource(st,ot.type,ot.source).getClusterLeaves(ot)})))),this.actor.registerMessageHandler("LD",((at,st)=>this._getWorkerSource(at,st.type,st.source).loadData(st))),this.actor.registerMessageHandler("GD",((at,st)=>this._getWorkerSource(at,st.type,st.source).getData())),this.actor.registerMessageHandler("LT",((at,st)=>this._getWorkerSource(at,st.type,st.source).loadTile(st))),this.actor.registerMessageHandler("RT",((at,st)=>this._getWorkerSource(at,st.type,st.source).reloadTile(st))),this.actor.registerMessageHandler("AT",((at,st)=>this._getWorkerSource(at,st.type,st.source).abortTile(st))),this.actor.registerMessageHandler("RMT",((at,st)=>this._getWorkerSource(at,st.type,st.source).removeTile(st))),this.actor.registerMessageHandler("RS",((st,ot)=>at._(this,void 0,void 0,(function*(){if(!this.workerSources[st]||!this.workerSources[st][ot.type]||!this.workerSources[st][ot.type][ot.source])return;const at=this.workerSources[st][ot.type][ot.source];delete this.workerSources[st][ot.type][ot.source],void 0!==at.removeSource&&at.removeSource(ot)})))),this.actor.registerMessageHandler("RM",(st=>at._(this,void 0,void 0,(function*(){delete this.layerIndexes[st],delete this.availableImages[st],delete this.workerSources[st],delete this.demWorkerSources[st]})))),this.actor.registerMessageHandler("SR",((st,ot)=>at._(this,void 0,void 0,(function*(){this.referrer=ot})))),this.actor.registerMessageHandler("SRPS",((at,st)=>this._syncRTLPluginState(at,st))),this.actor.registerMessageHandler("IS",((st,ot)=>at._(this,void 0,void 0,(function*(){this.self.importScripts(ot)})))),this.actor.registerMessageHandler("SI",((at,st)=>this._setImages(at,st))),this.actor.registerMessageHandler("UL",((st,ot)=>at._(this,void 0,void 0,(function*(){this._getLayerIndex(st).update(ot.layers,ot.removedIds)})))),this.actor.registerMessageHandler("SL",((st,ot)=>at._(this,void 0,void 0,(function*(){this._getLayerIndex(st).replace(ot)}))))}_setImages(st,ot){return at._(this,void 0,void 0,(function*(){this.availableImages[st]=ot;for(const at in this.workerSources[st]){const ut=this.workerSources[st][at];for(const at in ut)ut[at].availableImages=ot}}))}_syncRTLPluginState(st,ot){return at._(this,void 0,void 0,(function*(){return yield at.cU.syncState(ot,this.self.importScripts)}))}_getAvailableImages(at){let st=this.availableImages[at];return st||(st=[]),st}_getLayerIndex(at){let st=this.layerIndexes[at];return st||(st=this.layerIndexes[at]=new t),st}_getWorkerSource(at,st,ot){if(this.workerSources[at]||(this.workerSources[at]={}),this.workerSources[at][st]||(this.workerSources[at][st]={}),!this.workerSources[at][st][ot]){const ut={sendAsync:(st,ot)=>(st.targetMapId=at,this.actor.sendAsync(st,ot))};switch(st){case"vector":this.workerSources[at][st][ot]=new s(ut,this._getLayerIndex(at),this._getAvailableImages(at));break;case"geojson":this.workerSources[at][st][ot]=new ne(ut,this._getLayerIndex(at),this._getAvailableImages(at));break;default:this.workerSources[at][st][ot]=new this.externalWorkerSourceTypes[st](ut,this._getLayerIndex(at),this._getAvailableImages(at))}}return this.workerSources[at][st][ot]}_getDEMWorkerSource(at,st){return this.demWorkerSources[at]||(this.demWorkerSources[at]={}),this.demWorkerSources[at][st]||(this.demWorkerSources[at][st]=new n),this.demWorkerSources[at][st]}}return at.i(self)&&(self.worker=new ae(self)),ae})),define("index",["exports","./shared"],(function(at,st){var ot="5.6.0";function o(){var at=new st.A(4);return st.A!=Float32Array&&(at[1]=0,at[2]=0),at[0]=1,at[3]=1,at}let ut,Hl;const rc={now:"undefined"!=typeof performance&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(at,ot,ut){const Hl=requestAnimationFrame((at=>{rc(),ot(at)})),{unsubscribe:rc}=st.s(at.signal,"abort",(()=>{rc(),cancelAnimationFrame(Hl),ut(st.c())}),!1)},frameAsync(at){return new Promise(((st,ot)=>{this.frame(at,st,ot)}))},getImageData(at,st=0){return this.getImageCanvasContext(at).getImageData(-st,-st,at.width+2*st,at.height+2*st)},getImageCanvasContext(at){const st=window.document.createElement("canvas"),ot=st.getContext("2d",{willReadFrequently:!0});if(!ot)throw new Error("failed to create canvas 2d context");return st.width=at.width,st.height=at.height,ot.drawImage(at,0,0,at.width,at.height),ot},resolveURL:at=>(ut||(ut=document.createElement("a")),ut.href=at,ut.href),hardwareConcurrency:"undefined"!=typeof navigator&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(null==Hl&&(Hl=matchMedia("(prefers-reduced-motion: reduce)")),Hl.matches)}};class n{static testProp(at){if(!n.docStyle)return at[0];for(let st=0;st<at.length;st++)if(at[st]in n.docStyle)return at[st];return at[0]}static create(at,st,ot){const ut=window.document.createElement(at);return void 0!==st&&(ut.className=st),ot&&ot.appendChild(ut),ut}static createNS(at,st){return window.document.createElementNS(at,st)}static disableDrag(){n.docStyle&&n.selectProp&&(n.userSelect=n.docStyle[n.selectProp],n.docStyle[n.selectProp]="none")}static enableDrag(){n.docStyle&&n.selectProp&&(n.docStyle[n.selectProp]=n.userSelect)}static setTransform(at,st){at.style[n.transformProp]=st}static addEventListener(at,st,ot,ut={}){at.addEventListener(st,ot,"passive"in ut?ut:ut.capture)}static removeEventListener(at,st,ot,ut={}){at.removeEventListener(st,ot,"passive"in ut?ut:ut.capture)}static suppressClickInternal(at){at.preventDefault(),at.stopPropagation(),window.removeEventListener("click",n.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",n.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",n.suppressClickInternal,!0)}),0)}static getScale(at){const st=at.getBoundingClientRect();return{x:st.width/at.offsetWidth||1,y:st.height/at.offsetHeight||1,boundingClientRect:st}}static getPoint(at,ot,ut){const Hl=ot.boundingClientRect;return new st.P((ut.clientX-Hl.left)/ot.x-at.clientLeft,(ut.clientY-Hl.top)/ot.y-at.clientTop)}static mousePos(at,st){const ot=n.getScale(at);return n.getPoint(at,ot,st)}static touchPos(at,st){const ot=[],ut=n.getScale(at);for(let Hl=0;Hl<st.length;Hl++)ot.push(n.getPoint(at,ut,st[Hl]));return ot}static mouseButton(at){return at.button}static remove(at){at.parentNode&&at.parentNode.removeChild(at)}static sanitize(at){const st=(new DOMParser).parseFromString(at,"text/html").body||document.createElement("body"),ot=st.querySelectorAll("script");for(const ut of ot)ut.remove();return n.clean(st),st.innerHTML}static isPossiblyDangerous(at,st){const ot=st.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(at)||!ot.includes("javascript:")&&!ot.includes("data:"))||!!at.startsWith("on")||void 0}static clean(at){const st=at.children;for(const ot of st)n.removeAttributes(ot),n.clean(ot)}static removeAttributes(at){for(const{name:st,value:ot}of at.attributes)n.isPossiblyDangerous(st,ot)&&at.removeAttribute(st)}}n.docStyle="undefined"!=typeof window&&window.document&&window.document.documentElement.style,n.selectProp=n.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),n.transformProp=n.testProp(["transform","WebkitTransform"]);const sc={supported:!1,testSupport:function(at){!wc&&_c&&(Sc?_(at):oc=at)}};let oc,_c,wc=!1,Sc=!1;function _(at){const st=at.createTexture();at.bindTexture(at.TEXTURE_2D,st);try{if(at.texImage2D(at.TEXTURE_2D,0,at.RGBA,at.RGBA,at.UNSIGNED_BYTE,_c),at.isContextLost())return;sc.supported=!0}catch(at){}at.deleteTexture(st),wc=!0}var iu;"undefined"!=typeof document&&(_c=document.createElement("img"),_c.onload=()=>{oc&&_(oc),oc=null,Sc=!0},_c.onerror=()=>{wc=!0,oc=null},_c.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(at){let ot,ut,Hl,rc;at.resetRequestQueue=()=>{ot=[],ut=0,Hl=0,rc={}},at.addThrottleControl=at=>{const st=Hl++;return rc[st]=at,st},at.removeThrottleControl=at=>{delete rc[at],n()},at.getImage=(at,ut,Hl=!0)=>new Promise(((rc,oc)=>{sc.supported&&(at.headers||(at.headers={}),at.headers.accept="image/webp,*/*"),st.e(at,{type:"image"}),ot.push({abortController:ut,requestParameters:at,supportImageRefresh:Hl,state:"queued",onError:at=>{oc(at)},onSuccess:at=>{rc(at)}}),n()}));const s=at=>st._(this,void 0,void 0,(function*(){at.state="running";const{requestParameters:ot,supportImageRefresh:Hl,onError:rc,onSuccess:sc,abortController:oc}=at,_c=!1===Hl&&!st.i(self)&&!st.g(ot.url)&&(!ot.headers||Object.keys(ot.headers).reduce(((at,st)=>at&&"accept"===st),!0));ut++;const wc=_c?c(ot,oc):st.m(ot,oc);try{const ot=yield wc;delete at.abortController,at.state="completed",ot.data instanceof HTMLImageElement||st.b(ot.data)?sc(ot):ot.data&&sc({data:yield(Sc=ot.data,"function"==typeof createImageBitmap?st.f(Sc):st.h(Sc)),cacheControl:ot.cacheControl,expires:ot.expires})}catch(st){delete at.abortController,rc(st)}finally{ut--,n()}var Sc})),n=()=>{const at=(()=>{for(const at of Object.keys(rc))if(rc[at]())return!0;return!1})()?st.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:st.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let st=ut;st<at&&ot.length>0;st++){const at=ot.shift();at.abortController.signal.aborted?st--:s(at)}},c=(at,ot)=>new Promise(((ut,Hl)=>{const rc=new Image,sc=at.url,oc=at.credentials;oc&&"include"===oc?rc.crossOrigin="use-credentials":(oc&&"same-origin"===oc||!st.d(sc))&&(rc.crossOrigin="anonymous"),ot.signal.addEventListener("abort",(()=>{rc.src="",Hl(st.c())})),rc.fetchPriority="high",rc.onload=()=>{rc.onerror=rc.onload=null,ut({data:rc})},rc.onerror=()=>{rc.onerror=rc.onload=null,ot.signal.aborted||Hl(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},rc.src=sc}))}(iu||(iu={})),iu.resetRequestQueue();class m{constructor(at){this._transformRequestFn=at}transformRequest(at,st){return this._transformRequestFn&&this._transformRequestFn(at,st)||{url:at}}setTransformRequest(at){this._transformRequestFn=at}}function f(at){const st=[];if("string"==typeof at)st.push({id:"default",url:at});else if(at&&at.length>0){const ot=[];for(const{id:ut,url:Hl}of at){const at=`${ut}${Hl}`;-1===ot.indexOf(at)&&(ot.push(at),st.push({id:ut,url:Hl}))}}return st}function g(at,st,ot){try{const ut=new URL(at);return ut.pathname+=`${st}${ot}`,ut.toString()}catch(st){throw new Error(`Invalid sprite URL "${at}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function v(at){const{userImage:st}=at;return!!(st&&st.render&&st.render())&&(at.data.replace(new Uint8Array(st.data.buffer)),!0)}class b extends st.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new st.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(at){if(this.loaded!==at&&(this.loaded=at,at)){for(const{ids:at,promiseResolve:st}of this.requestors)st(this._getImagesForIds(at));this.requestors=[]}}getImage(at){const ot=this.images[at];if(ot&&!ot.data&&ot.spriteData){const at=ot.spriteData;ot.data=new st.R({width:at.width,height:at.height},at.context.getImageData(at.x,at.y,at.width,at.height).data),ot.spriteData=null}return ot}addImage(at,st){if(this.images[at])throw new Error(`Image id ${at} already exist, use updateImage instead`);this._validate(at,st)&&(this.images[at]=st)}_validate(at,ot){let ut=!0;const Hl=ot.data||ot.spriteData;return this._validateStretch(ot.stretchX,Hl&&Hl.width)||(this.fire(new st.k(new Error(`Image "${at}" has invalid "stretchX" value`))),ut=!1),this._validateStretch(ot.stretchY,Hl&&Hl.height)||(this.fire(new st.k(new Error(`Image "${at}" has invalid "stretchY" value`))),ut=!1),this._validateContent(ot.content,ot)||(this.fire(new st.k(new Error(`Image "${at}" has invalid "content" value`))),ut=!1),ut}_validateStretch(at,st){if(!at)return!0;let ot=0;for(const ut of at){if(ut[0]<ot||ut[1]<ut[0]||st<ut[1])return!1;ot=ut[1]}return!0}_validateContent(at,st){if(!at)return!0;if(4!==at.length)return!1;const ot=st.spriteData,ut=ot&&ot.width||st.data.width,Hl=ot&&ot.height||st.data.height;return!(at[0]<0||ut<at[0]||at[1]<0||Hl<at[1]||at[2]<0||ut<at[2]||at[3]<0||Hl<at[3]||at[2]<at[0]||at[3]<at[1])}updateImage(at,st,ot=!0){const ut=this.getImage(at);if(ot&&(ut.data.width!==st.data.width||ut.data.height!==st.data.height))throw new Error(`size mismatch between old image (${ut.data.width}x${ut.data.height}) and new image (${st.data.width}x${st.data.height}).`);st.version=ut.version+1,this.images[at]=st,this.updatedImages[at]=!0}removeImage(at){const st=this.images[at];delete this.images[at],delete this.patterns[at],st.userImage&&st.userImage.onRemove&&st.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(at){return new Promise(((st,ot)=>{let ut=!0;if(!this.isLoaded())for(const Hl of at)this.images[Hl]||(ut=!1);this.isLoaded()||ut?st(this._getImagesForIds(at)):this.requestors.push({ids:at,promiseResolve:st})}))}_getImagesForIds(at){const ot={};for(const ut of at){let at=this.getImage(ut);at||(this.fire(new st.l("styleimagemissing",{id:ut})),at=this.getImage(ut)),at?ot[ut]={data:at.data.clone(),pixelRatio:at.pixelRatio,sdf:at.sdf,version:at.version,stretchX:at.stretchX,stretchY:at.stretchY,content:at.content,textFitWidth:at.textFitWidth,textFitHeight:at.textFitHeight,hasRenderCallback:Boolean(at.userImage&&at.userImage.render)}:st.w(`Image "${ut}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return ot}getPixelSize(){const{width:at,height:st}=this.atlasImage;return{width:at,height:st}}getPattern(at){const ot=this.patterns[at],ut=this.getImage(at);if(!ut)return null;if(ot&&ot.position.version===ut.version)return ot.position;if(ot)ot.position.version=ut.version;else{const ot={w:ut.data.width+2,h:ut.data.height+2,x:0,y:0},Hl=new st.I(ot,ut);this.patterns[at]={bin:ot,position:Hl}}return this._updatePatternAtlas(),this.patterns[at].position}bind(at){const ot=at.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new st.T(at,this.atlasImage,ot.RGBA),this.atlasTexture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE)}_updatePatternAtlas(){const at=[];for(const st in this.patterns)at.push(this.patterns[st].bin);const{w:ot,h:ut}=st.p(at),Hl=this.atlasImage;Hl.resize({width:ot||1,height:ut||1});for(const rc in this.patterns){const{bin:at}=this.patterns[rc],ot=at.x+1,ut=at.y+1,sc=this.getImage(rc).data,oc=sc.width,_c=sc.height;st.R.copy(sc,Hl,{x:0,y:0},{x:ot,y:ut},{width:oc,height:_c}),st.R.copy(sc,Hl,{x:0,y:_c-1},{x:ot,y:ut-1},{width:oc,height:1}),st.R.copy(sc,Hl,{x:0,y:0},{x:ot,y:ut+_c},{width:oc,height:1}),st.R.copy(sc,Hl,{x:oc-1,y:0},{x:ot-1,y:ut},{width:1,height:_c}),st.R.copy(sc,Hl,{x:0,y:0},{x:ot+oc,y:ut},{width:1,height:_c})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(at){for(const ot of at){if(this.callbackDispatchedThisFrame[ot])continue;this.callbackDispatchedThisFrame[ot]=!0;const at=this.getImage(ot);at||st.w(`Image with ID: "${ot}" was not found`),v(at)&&this.updateImage(ot,at)}}}const su=1e20;function y(at,st,ot,ut,Hl,rc,sc,oc,_c){for(let wc=st;wc<st+ut;wc++)w(at,ot*rc+wc,rc,Hl,sc,oc,_c);for(let wc=ot;wc<ot+Hl;wc++)w(at,wc*rc+st,1,ut,sc,oc,_c)}function w(at,st,ot,ut,Hl,rc,sc){rc[0]=0,sc[0]=-1e20,sc[1]=su,Hl[0]=at[st];for(let oc=1,_c=0,wc=0;oc<ut;oc++){Hl[oc]=at[st+oc*ot];const ut=oc*oc;do{const at=rc[_c];wc=(Hl[oc]-Hl[at]+ut-at*at)/(oc-at)/2}while(wc<=sc[_c]&&--_c>-1);_c++,rc[_c]=oc,sc[_c]=wc,sc[_c+1]=su}for(let oc=0,_c=0;oc<ut;oc++){for(;sc[_c+1]<oc;)_c++;const ut=rc[_c],wc=oc-ut;at[st+oc*ot]=Hl[ut]+wc*wc}}class T{constructor(at,st){this.requestManager=at,this.localIdeographFontFamily=st,this.entries={}}setURL(at){this.url=at}getGlyphs(at){return st._(this,void 0,void 0,(function*(){const st=[];for(const Hl in at)for(const ot of at[Hl])st.push(this._getAndCacheGlyphsPromise(Hl,ot));const ot=yield Promise.all(st),ut={};for(const{stack:at,id:Hl,glyph:rc}of ot)ut[at]||(ut[at]={}),ut[at][Hl]=rc&&{id:rc.id,bitmap:rc.bitmap.clone(),metrics:rc.metrics};return ut}))}_getAndCacheGlyphsPromise(at,ot){return st._(this,void 0,void 0,(function*(){let st=this.entries[at];st||(st=this.entries[at]={glyphs:{},requests:{},ranges:{}});let ut=st.glyphs[ot];if(void 0!==ut)return{stack:at,id:ot,glyph:ut};if(ut=this._tinySDF(st,at,ot),ut)return st.glyphs[ot]=ut,{stack:at,id:ot,glyph:ut};const Hl=Math.floor(ot/256);if(256*Hl>65535)throw new Error("glyphs > 65535 not supported");if(st.ranges[Hl])return{stack:at,id:ot,glyph:ut};if(!this.url)throw new Error("glyphsUrl is not set");if(!st.requests[Hl]){const ot=T.loadGlyphRange(at,Hl,this.url,this.requestManager);st.requests[Hl]=ot}const rc=yield st.requests[Hl];for(const at in rc)this._doesCharSupportLocalGlyph(+at)||(st.glyphs[+at]=rc[+at]);return st.ranges[Hl]=!0,{stack:at,id:ot,glyph:rc[ot]||null}}))}_doesCharSupportLocalGlyph(at){return!!this.localIdeographFontFamily&&(/\p{Ideo}|\p{sc=Hang}|\p{sc=Hira}|\p{sc=Kana}/u.test(String.fromCodePoint(at))||st.u["CJK Unified Ideographs"](at)||st.u["Hangul Syllables"](at)||st.u.Hiragana(at)||st.u.Katakana(at)||st.u["CJK Symbols and Punctuation"](at)||st.u["Halfwidth and Fullwidth Forms"](at))}_tinySDF(at,ot,ut){const Hl=this.localIdeographFontFamily;if(!Hl)return;if(!this._doesCharSupportLocalGlyph(ut))return;let rc=at.tinySDF;if(!rc){let st="400";/bold/i.test(ot)?st="900":/medium/i.test(ot)?st="500":/light/i.test(ot)&&(st="200"),rc=at.tinySDF=new T.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:Hl,fontWeight:st})}const sc=rc.draw(String.fromCharCode(ut));return{id:ut,bitmap:new st.q({width:sc.width||60,height:sc.height||60},sc.data),metrics:{width:sc.glyphWidth/2||24,height:sc.glyphHeight/2||24,left:sc.glyphLeft/2+.5||0,top:sc.glyphTop/2-27.5||-8,advance:sc.glyphAdvance/2||24,isDoubleResolution:!0}}}}T.loadGlyphRange=function(at,ot,ut,Hl){return st._(this,void 0,void 0,(function*(){const rc=256*ot,sc=rc+255,oc=Hl.transformRequest(ut.replace("{fontstack}",at).replace("{range}",`${rc}-${sc}`),"Glyphs"),_c=yield st.n(oc,new AbortController);if(!_c||!_c.data)throw new Error(`Could not load glyph range. range: ${ot}, ${rc}-${sc}`);const wc={};for(const at of st.o(_c.data))wc[at.id]=at;return wc}))},T.TinySDF=class{constructor({fontSize:at=24,buffer:st=3,radius:ot=8,cutoff:ut=.25,fontFamily:Hl="sans-serif",fontWeight:rc="normal",fontStyle:sc="normal"}={}){this.buffer=st,this.cutoff=ut,this.radius=ot;const oc=this.size=at+4*st,_c=this._createCanvas(oc),wc=this.ctx=_c.getContext("2d",{willReadFrequently:!0});wc.font=`${sc} ${rc} ${at}px ${Hl}`,wc.textBaseline="alphabetic",wc.textAlign="left",wc.fillStyle="black",this.gridOuter=new Float64Array(oc*oc),this.gridInner=new Float64Array(oc*oc),this.f=new Float64Array(oc),this.z=new Float64Array(oc+1),this.v=new Uint16Array(oc)}_createCanvas(at){const st=document.createElement("canvas");return st.width=st.height=at,st}draw(at){const{width:st,actualBoundingBoxAscent:ot,actualBoundingBoxDescent:ut,actualBoundingBoxLeft:Hl,actualBoundingBoxRight:rc}=this.ctx.measureText(at),sc=Math.ceil(ot),oc=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(rc-Hl))),_c=Math.min(this.size-this.buffer,sc+Math.ceil(ut)),wc=oc+2*this.buffer,Sc=_c+2*this.buffer,iu=Math.max(wc*Sc,0),lu=new Uint8ClampedArray(iu),cu={data:lu,width:wc,height:Sc,glyphWidth:oc,glyphHeight:_c,glyphTop:sc,glyphLeft:0,glyphAdvance:st};if(0===oc||0===_c)return cu;const{ctx:uu,buffer:pu,gridInner:mu,gridOuter:gu}=this;uu.clearRect(pu,pu,oc,_c),uu.fillText(at,pu,pu+sc);const Au=uu.getImageData(pu,pu,oc,_c);gu.fill(su,0,iu),mu.fill(0,0,iu);for(let yu=0;yu<_c;yu++)for(let at=0;at<oc;at++){const st=Au.data[4*(yu*oc+at)+3]/255;if(0===st)continue;const ot=(yu+pu)*wc+at+pu;if(1===st)gu[ot]=0,mu[ot]=su;else{const at=.5-st;gu[ot]=at>0?at*at:0,mu[ot]=at<0?at*at:0}}y(gu,0,0,wc,Sc,wc,this.f,this.v,this.z),y(mu,pu,pu,oc,_c,wc,this.f,this.v,this.z);for(let su=0;su<iu;su++){const at=Math.sqrt(gu[su])-Math.sqrt(mu[su]);lu[su]=Math.round(255-255*(at/this.radius+this.cutoff))}return cu}};class P{constructor(){this.specification=st.v.light.position}possiblyEvaluate(at,ot){return st.B(at.expression.evaluate(ot))}interpolate(at,ot,ut){return{x:st.C.number(at.x,ot.x,ut),y:st.C.number(at.y,ot.y,ut),z:st.C.number(at.z,ot.z,ut)}}}let lu;class I extends st.E{constructor(at){super(),lu=lu||new st.r({anchor:new st.D(st.v.light.anchor),position:new P,color:new st.D(st.v.light.color),intensity:new st.D(st.v.light.intensity)}),this._transitionable=new st.t(lu),this.setLight(at),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(at,ot={}){if(!this._validate(st.x,at,ot))for(const st in at){const ot=at[st];st.endsWith("-transition")?this._transitionable.setTransition(st.slice(0,-11),ot):this._transitionable.setValue(st,ot)}}updateTransitions(at){this._transitioning=this._transitionable.transitioned(at,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(at){this.properties=this._transitioning.possiblyEvaluate(at)}_validate(at,ot,ut){return(!ut||!1!==ut.validate)&&st.y(this,at.call(st.z,{value:ot,style:{glyphs:!0,sprite:!0},styleSpec:st.v}))}}const cu=new st.r({"sky-color":new st.D(st.v.sky["sky-color"]),"horizon-color":new st.D(st.v.sky["horizon-color"]),"fog-color":new st.D(st.v.sky["fog-color"]),"fog-ground-blend":new st.D(st.v.sky["fog-ground-blend"]),"horizon-fog-blend":new st.D(st.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new st.D(st.v.sky["sky-horizon-blend"]),"atmosphere-blend":new st.D(st.v.sky["atmosphere-blend"])});class S extends st.E{constructor(at){super(),this._transitionable=new st.t(cu),this.setSky(at),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new st.F(0))}setSky(at,ot={}){if(!this._validate(st.G,at,ot)){at||(at={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const st in at){const ot=at[st];st.endsWith("-transition")?this._transitionable.setTransition(st.slice(0,-11),ot):this._transitionable.setValue(st,ot)}}}getSky(){return this._transitionable.serialize()}updateTransitions(at){this._transitioning=this._transitionable.transitioned(at,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(at){this.properties=this._transitioning.possiblyEvaluate(at)}_validate(at,ot,ut={}){return!1!==(null==ut?void 0:ut.validate)&&st.y(this,at.call(st.z,st.e({value:ot,style:{glyphs:!0,sprite:!0},styleSpec:st.v})))}calculateFogBlendOpacity(at){return at<60?0:at<70?(at-60)/10:1}}class E{constructor(at,st){this.width=at,this.height=st,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(at,st){const ot=at.join(",")+String(st);return this.dashEntry[ot]||(this.dashEntry[ot]=this.addDash(at,st)),this.dashEntry[ot]}getDashRanges(at,st,ot){const ut=[];let Hl=at.length%2==1?-at[at.length-1]*ot:0,rc=at[0]*ot,sc=!0;ut.push({left:Hl,right:rc,isDash:sc,zeroLength:0===at[0]});let oc=at[0];for(let _c=1;_c<at.length;_c++){sc=!sc;const st=at[_c];Hl=oc*ot,oc+=st,rc=oc*ot,ut.push({left:Hl,right:rc,isDash:sc,zeroLength:0===st})}return ut}addRoundDash(at,st,ot){const ut=st/2;for(let Hl=-ot;Hl<=ot;Hl++){const st=this.width*(this.nextRow+ot+Hl);let rc=0,sc=at[rc];for(let oc=0;oc<this.width;oc++){oc/sc.right>1&&(sc=at[++rc]);const _c=Math.abs(oc-sc.left),wc=Math.abs(oc-sc.right),Sc=Math.min(_c,wc);let iu;const su=Hl/ot*(ut+1);if(sc.isDash){const at=ut-Math.abs(su);iu=Math.sqrt(Sc*Sc+at*at)}else iu=ut-Math.sqrt(Sc*Sc+su*su);this.data[st+oc]=Math.max(0,Math.min(255,iu+128))}}}addRegularDash(at){for(let sc=at.length-1;sc>=0;--sc){const st=at[sc],ot=at[sc+1];st.zeroLength?at.splice(sc,1):ot&&ot.isDash===st.isDash&&(ot.left=st.left,at.splice(sc,1))}const st=at[0],ot=at[at.length-1];st.isDash===ot.isDash&&(st.left=ot.left-this.width,ot.right=st.right+this.width);const ut=this.width*this.nextRow;let Hl=0,rc=at[Hl];for(let sc=0;sc<this.width;sc++){sc/rc.right>1&&(rc=at[++Hl]);const st=Math.abs(sc-rc.left),ot=Math.abs(sc-rc.right),oc=Math.min(st,ot);this.data[ut+sc]=Math.max(0,Math.min(255,(rc.isDash?oc:-oc)+128))}}addDash(at,ot){const ut=ot?7:0,Hl=2*ut+1;if(this.nextRow+Hl>this.height)return st.w("LineAtlas out of space"),null;let rc=0;for(let st=0;st<at.length;st++)rc+=at[st];if(0!==rc){const st=this.width/rc,Hl=this.getDashRanges(at,this.width,st);ot?this.addRoundDash(Hl,st,ut):this.addRegularDash(Hl)}const sc={y:(this.nextRow+ut+.5)/this.height,height:2*ut/this.height,width:rc};return this.nextRow+=Hl,this.dirty=!0,sc}bind(at){const st=at.gl;this.texture?(st.bindTexture(st.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,st.texSubImage2D(st.TEXTURE_2D,0,0,0,this.width,this.height,st.ALPHA,st.UNSIGNED_BYTE,this.data))):(this.texture=st.createTexture(),st.bindTexture(st.TEXTURE_2D,this.texture),st.texParameteri(st.TEXTURE_2D,st.TEXTURE_WRAP_S,st.REPEAT),st.texParameteri(st.TEXTURE_2D,st.TEXTURE_WRAP_T,st.REPEAT),st.texParameteri(st.TEXTURE_2D,st.TEXTURE_MIN_FILTER,st.LINEAR),st.texParameteri(st.TEXTURE_2D,st.TEXTURE_MAG_FILTER,st.LINEAR),st.texImage2D(st.TEXTURE_2D,0,st.ALPHA,this.width,this.height,0,st.ALPHA,st.UNSIGNED_BYTE,this.data))}}const uu="maplibre_preloaded_worker_pool";class z{constructor(){this.active={}}acquire(at){if(!this.workers)for(this.workers=[];this.workers.length<z.workerCount;)this.workers.push(new Worker(st.a.WORKER_URL));return this.active[at]=!0,this.workers.slice()}release(at){delete this.active[at],0===this.numActive()&&(this.workers.forEach((at=>{at.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[uu]}numActive(){return Object.keys(this.active).length}}const pu=Math.floor(rc.hardwareConcurrency/2);let mu,gu;function k(){return mu||(mu=new z),mu}z.workerCount=st.H(globalThis)?Math.max(Math.min(pu,3),1):1;class F{constructor(at,ot){this.workerPool=at,this.actors=[],this.currentActor=0,this.id=ot;const ut=this.workerPool.acquire(ot);for(let Hl=0;Hl<ut.length;Hl++){const at=new st.J(ut[Hl],ot);at.name=`Worker ${Hl}`,this.actors.push(at)}if(!this.actors.length)throw new Error("No actors found")}broadcast(at,st){const ot=[];for(const ut of this.actors)ot.push(ut.sendAsync({type:at,data:st}));return Promise.all(ot)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(at=!0){this.actors.forEach((at=>{at.remove()})),this.actors=[],at&&this.workerPool.release(this.id)}registerMessageHandler(at,st){for(const ot of this.actors)ot.registerMessageHandler(at,st)}}function B(){return gu||(gu=new F(k(),st.K),gu.registerMessageHandler("GR",((at,ot,ut)=>st.m(ot,ut)))),gu}function O(at,ot){const ut=st.L();return st.M(ut,ut,[1,1,0]),st.N(ut,ut,[.5*at.width,.5*at.height,1]),at.calculatePosMatrix?st.O(ut,ut,at.calculatePosMatrix(ot.toUnwrapped())):ut}function j(at,st,ot,ut,Hl,rc,sc){var oc;const _c=function(at,st,ot){if(at)for(const ut of at){const at=st[ut];if(at&&at.source===ot&&"fill-extrusion"===at.type)return!0}else for(const ut in st){const at=st[ut];if(at.source===ot&&"fill-extrusion"===at.type)return!0}return!1}(null!==(oc=null==Hl?void 0:Hl.layers)&&void 0!==oc?oc:null,st,at.id),wc=rc.maxPitchScaleFactor(),Sc=at.tilesIn(ut,wc,_c);Sc.sort(N);const iu=[];for(const su of Sc)iu.push({wrappedTileID:su.tileID.wrapped().key,queryResults:su.tile.queryRenderedFeatures(st,ot,at._state,su.queryGeometry,su.cameraQueryGeometry,su.scale,Hl,rc,wc,O(at.transform,su.tileID),sc?(at,st)=>sc(su.tileID,at,st):void 0)});return function(at,st){for(const ot in at)for(const ut of at[ot])Z(ut,st);return at}(function(at){const st={},ot={};for(const ut of at){const at=ut.queryResults,Hl=ut.wrappedTileID,rc=ot[Hl]=ot[Hl]||{};for(const ot in at){const ut=at[ot],Hl=rc[ot]=rc[ot]||{},sc=st[ot]=st[ot]||[];for(const at of ut)Hl[at.featureIndex]||(Hl[at.featureIndex]=!0,sc.push(at))}}return st}(iu),at)}function N(at,st){const ot=at.tileID,ut=st.tileID;return ot.overscaledZ-ut.overscaledZ||ot.canonical.y-ut.canonical.y||ot.wrap-ut.wrap||ot.canonical.x-ut.canonical.x}function Z(at,st){const ot=at.feature,ut=st.getFeatureState(ot.layer["source-layer"],ot.id);ot.source=ot.layer.source,ot.layer["source-layer"]&&(ot.sourceLayer=ot.layer["source-layer"]),ot.state=ut}function U(at,ot,ut){return st._(this,void 0,void 0,(function*(){let Hl=at;if(at.url?Hl=(yield st.j(ot.transformRequest(at.url,"Source"),ut)).data:yield rc.frameAsync(ut),!Hl)return null;const sc=st.Q(st.e(Hl,at),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in Hl&&Hl.vector_layers&&(sc.vectorLayerIds=Hl.vector_layers.map((at=>at.id))),sc}))}class G{constructor(at,st){at&&(st?this.setSouthWest(at).setNorthEast(st):Array.isArray(at)&&(4===at.length?this.setSouthWest([at[0],at[1]]).setNorthEast([at[2],at[3]]):this.setSouthWest(at[0]).setNorthEast(at[1])))}setNorthEast(at){return this._ne=at instanceof st.S?new st.S(at.lng,at.lat):st.S.convert(at),this}setSouthWest(at){return this._sw=at instanceof st.S?new st.S(at.lng,at.lat):st.S.convert(at),this}extend(at){const ot=this._sw,ut=this._ne;let Hl,rc;if(at instanceof st.S)Hl=at,rc=at;else{if(!(at instanceof G))return Array.isArray(at)?4===at.length||at.every(Array.isArray)?this.extend(G.convert(at)):this.extend(st.S.convert(at)):at&&("lng"in at||"lon"in at)&&"lat"in at?this.extend(st.S.convert(at)):this;if(Hl=at._sw,rc=at._ne,!Hl||!rc)return this}return ot||ut?(ot.lng=Math.min(Hl.lng,ot.lng),ot.lat=Math.min(Hl.lat,ot.lat),ut.lng=Math.max(rc.lng,ut.lng),ut.lat=Math.max(rc.lat,ut.lat)):(this._sw=new st.S(Hl.lng,Hl.lat),this._ne=new st.S(rc.lng,rc.lat)),this}getCenter(){return new st.S((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new st.S(this.getWest(),this.getNorth())}getSouthEast(){return new st.S(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(at){const{lng:ot,lat:ut}=st.S.convert(at);let Hl=this._sw.lng<=ot&&ot<=this._ne.lng;return this._sw.lng>this._ne.lng&&(Hl=this._sw.lng>=ot&&ot>=this._ne.lng),this._sw.lat<=ut&&ut<=this._ne.lat&&Hl}static convert(at){return at instanceof G?at:at?new G(at):at}static fromLngLat(at,ot=0){const ut=360*ot/40075017,Hl=ut/Math.cos(Math.PI/180*at.lat);return new G(new st.S(at.lng-Hl,at.lat-ut),new st.S(at.lng+Hl,at.lat+ut))}adjustAntiMeridian(){const at=new st.S(this._sw.lng,this._sw.lat),ot=new st.S(this._ne.lng,this._ne.lat);return new G(at,at.lng>ot.lng?new st.S(ot.lng+360,ot.lat):ot)}}class V{constructor(at,st,ot){this.bounds=G.convert(this.validateBounds(at)),this.minzoom=st||0,this.maxzoom=ot||24}validateBounds(at){return Array.isArray(at)&&4===at.length?[Math.max(-180,at[0]),Math.max(-90,at[1]),Math.min(180,at[2]),Math.min(90,at[3])]:[-180,-90,180,90]}contains(at){const ot=Math.pow(2,at.z),ut=Math.floor(st.V(this.bounds.getWest())*ot),Hl=Math.floor(st.U(this.bounds.getNorth())*ot),rc=Math.ceil(st.V(this.bounds.getEast())*ot),sc=Math.ceil(st.U(this.bounds.getSouth())*ot);return at.x>=ut&&at.x<rc&&at.y>=Hl&&at.y<sc}}class $ extends st.E{constructor(at,ot,ut,Hl){if(super(),this.id=at,this.dispatcher=ut,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,st.e(this,st.Q(ot,["url","scheme","tileSize","promoteId"])),this._options=st.e({type:"vector"},ot),this._collectResourceTiming=ot.collectResourceTiming,512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(Hl)}load(){return st._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new st.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const at=yield U(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),at&&(st.e(this,at),at.bounds&&(this.tileBounds=new V(at.bounds,this.minzoom,this.maxzoom)),this.fire(new st.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new st.l("data",{dataType:"source",sourceDataType:"content"})))}catch(at){this._tileJSONRequest=null,this.fire(new st.k(at))}}))}loaded(){return this._loaded}hasTile(at){return!this.tileBounds||this.tileBounds.contains(at.canonical)}onAdd(at){this.map=at,this.load()}setSourceProperty(at){this._tileJSONRequest&&this._tileJSONRequest.abort(),at(),this.load()}setTiles(at){return this.setSourceProperty((()=>{this._options.tiles=at})),this}setUrl(at){return this.setSourceProperty((()=>{this.url=at,this._options.url=at})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return st.e({},this._options)}loadTile(at){return st._(this,void 0,void 0,(function*(){const st=at.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),ot={request:this.map._requestManager.transformRequest(st,"Tile"),uid:at.uid,tileID:at.tileID,zoom:at.tileID.overscaledZ,tileSize:this.tileSize*at.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};ot.request.collectResourceTiming=this._collectResourceTiming;let ut="RT";if(at.actor&&"expired"!==at.state){if("loading"===at.state)return new Promise(((st,ot)=>{at.reloadPromise={resolve:st,reject:ot}}))}else at.actor=this.dispatcher.getActor(),ut="LT";at.abortController=new AbortController;try{const st=yield at.actor.sendAsync({type:ut,data:ot},at.abortController);if(delete at.abortController,at.aborted)return;this._afterTileLoadWorkerResponse(at,st)}catch(st){if(delete at.abortController,at.aborted)return;if(st&&404!==st.status)throw st;this._afterTileLoadWorkerResponse(at,null)}}))}_afterTileLoadWorkerResponse(at,st){if(st&&st.resourceTiming&&(at.resourceTiming=st.resourceTiming),st&&this.map._refreshExpiredTiles&&at.setExpiryData(st),at.loadVectorData(st,this.map.painter),at.reloadPromise){const st=at.reloadPromise;at.reloadPromise=null,this.loadTile(at).then(st.resolve).catch(st.reject)}}abortTile(at){return st._(this,void 0,void 0,(function*(){at.abortController&&(at.abortController.abort(),delete at.abortController),at.actor&&(yield at.actor.sendAsync({type:"AT",data:{uid:at.uid,type:this.type,source:this.id}}))}))}unloadTile(at){return st._(this,void 0,void 0,(function*(){at.unloadVectorData(),at.actor&&(yield at.actor.sendAsync({type:"RMT",data:{uid:at.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class q extends st.E{constructor(at,ot,ut,Hl){super(),this.id=at,this.dispatcher=ut,this.setEventedParent(Hl),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=st.e({type:"raster"},ot),st.e(this,st.Q(ot,["url","scheme","tileSize"]))}load(){return st._(this,arguments,void 0,(function*(at=!1){this._loaded=!1,this.fire(new st.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const ot=yield U(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,ot&&(st.e(this,ot),ot.bounds&&(this.tileBounds=new V(ot.bounds,this.minzoom,this.maxzoom)),this.fire(new st.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new st.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:at})))}catch(at){this._tileJSONRequest=null,this.fire(new st.k(at))}}))}loaded(){return this._loaded}onAdd(at){this.map=at,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(at){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),at(),this.load(!0)}setTiles(at){return this.setSourceProperty((()=>{this._options.tiles=at})),this}setUrl(at){return this.setSourceProperty((()=>{this.url=at,this._options.url=at})),this}serialize(){return st.e({},this._options)}hasTile(at){return!this.tileBounds||this.tileBounds.contains(at.canonical)}loadTile(at){return st._(this,void 0,void 0,(function*(){const ot=at.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);at.abortController=new AbortController;try{const ut=yield iu.getImage(this.map._requestManager.transformRequest(ot,"Tile"),at.abortController,this.map._refreshExpiredTiles);if(delete at.abortController,at.aborted)return void(at.state="unloaded");if(ut&&ut.data){this.map._refreshExpiredTiles&&(ut.cacheControl||ut.expires)&&at.setExpiryData({cacheControl:ut.cacheControl,expires:ut.expires});const ot=this.map.painter.context,Hl=ot.gl,rc=ut.data;at.texture=this.map.painter.getTileTexture(rc.width),at.texture?at.texture.update(rc,{useMipmap:!0}):(at.texture=new st.T(ot,rc,Hl.RGBA,{useMipmap:!0}),at.texture.bind(Hl.LINEAR,Hl.CLAMP_TO_EDGE,Hl.LINEAR_MIPMAP_NEAREST)),at.state="loaded"}}catch(st){if(delete at.abortController,at.aborted)at.state="unloaded";else if(st)throw at.state="errored",st}}))}abortTile(at){return st._(this,void 0,void 0,(function*(){at.abortController&&(at.abortController.abort(),delete at.abortController)}))}unloadTile(at){return st._(this,void 0,void 0,(function*(){at.texture&&this.map.painter.saveTileTexture(at.texture)}))}hasTransition(){return!1}}class W extends q{constructor(at,ot,ut,Hl){super(at,ot,ut,Hl),this.type="raster-dem",this.maxzoom=22,this._options=st.e({type:"raster-dem"},ot),this.encoding=ot.encoding||"mapbox",this.redFactor=ot.redFactor,this.greenFactor=ot.greenFactor,this.blueFactor=ot.blueFactor,this.baseShift=ot.baseShift}loadTile(at){return st._(this,void 0,void 0,(function*(){const ot=at.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),ut=this.map._requestManager.transformRequest(ot,"Tile");at.neighboringTiles=this._getNeighboringTiles(at.tileID),at.abortController=new AbortController;try{const ot=yield iu.getImage(ut,at.abortController,this.map._refreshExpiredTiles);if(delete at.abortController,at.aborted)return void(at.state="unloaded");if(ot&&ot.data){const ut=ot.data;this.map._refreshExpiredTiles&&(ot.cacheControl||ot.expires)&&at.setExpiryData({cacheControl:ot.cacheControl,expires:ot.expires});const Hl=st.b(ut)&&st.W()?ut:yield this.readImageNow(ut),rc={type:this.type,uid:at.uid,source:this.id,rawImageData:Hl,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!at.actor||"expired"===at.state){at.actor=this.dispatcher.getActor();const st=yield at.actor.sendAsync({type:"LDT",data:rc});at.dem=st,at.needsHillshadePrepare=!0,at.needsTerrainPrepare=!0,at.state="loaded"}}}catch(st){if(delete at.abortController,at.aborted)at.state="unloaded";else if(st)throw at.state="errored",st}}))}readImageNow(at){return st._(this,void 0,void 0,(function*(){if("undefined"!=typeof VideoFrame&&st.X()){const ot=at.width+2,ut=at.height+2;try{return new st.R({width:ot,height:ut},yield st.Y(at,-1,-1,ot,ut))}catch(at){}}return rc.getImageData(at,1)}))}_getNeighboringTiles(at){const ot=at.canonical,ut=Math.pow(2,ot.z),Hl=(ot.x-1+ut)%ut,rc=0===ot.x?at.wrap-1:at.wrap,sc=(ot.x+1+ut)%ut,oc=ot.x+1===ut?at.wrap+1:at.wrap,_c={};return _c[new st.Z(at.overscaledZ,rc,ot.z,Hl,ot.y).key]={backfilled:!1},_c[new st.Z(at.overscaledZ,oc,ot.z,sc,ot.y).key]={backfilled:!1},ot.y>0&&(_c[new st.Z(at.overscaledZ,rc,ot.z,Hl,ot.y-1).key]={backfilled:!1},_c[new st.Z(at.overscaledZ,at.wrap,ot.z,ot.x,ot.y-1).key]={backfilled:!1},_c[new st.Z(at.overscaledZ,oc,ot.z,sc,ot.y-1).key]={backfilled:!1}),ot.y+1<ut&&(_c[new st.Z(at.overscaledZ,rc,ot.z,Hl,ot.y+1).key]={backfilled:!1},_c[new st.Z(at.overscaledZ,at.wrap,ot.z,ot.x,ot.y+1).key]={backfilled:!1},_c[new st.Z(at.overscaledZ,oc,ot.z,sc,ot.y+1).key]={backfilled:!1}),_c}unloadTile(at){return st._(this,void 0,void 0,(function*(){at.demTexture&&this.map.painter.saveTileTexture(at.demTexture),at.fbo&&(at.fbo.destroy(),delete at.fbo),at.dem&&delete at.dem,delete at.neighboringTiles,at.state="unloaded",at.actor&&(yield at.actor.sendAsync({type:"RDT",data:{type:this.type,uid:at.uid,source:this.id}}))}))}}class H extends st.E{constructor(at,ot,ut,Hl){super(),this.id=at,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=ut.getActor(),this.setEventedParent(Hl),this._data=ot.data,this._options=st.e({},ot),this._collectResourceTiming=ot.collectResourceTiming,void 0!==ot.maxzoom&&(this.maxzoom=ot.maxzoom),ot.type&&(this.type=ot.type),ot.attribution&&(this.attribution=ot.attribution),this.promoteId=ot.promoteId,void 0!==ot.clusterMaxZoom&&this.maxzoom<=ot.clusterMaxZoom&&st.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${ot.clusterMaxZoom}".`),this.workerOptions=st.e({source:this.id,cluster:ot.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(void 0!==ot.buffer?ot.buffer:128),tolerance:this._pixelsToTileUnits(void 0!==ot.tolerance?ot.tolerance:.375),extent:st.$,maxZoom:this.maxzoom,lineMetrics:ot.lineMetrics||!1,generateId:ot.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(ot.clusterMaxZoom),minPoints:Math.max(2,ot.clusterMinPoints||2),extent:st.$,radius:this._pixelsToTileUnits(ot.clusterRadius||50),log:!1,generateId:ot.generateId||!1},clusterProperties:ot.clusterProperties,filter:ot.filter},ot.workerOptions),"string"==typeof this.promoteId&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(at){return at*(st.$/this.tileSize)}_getClusterMaxZoom(at){const ot=at?Math.round(at):this.maxzoom-1;return Number.isInteger(at)||void 0===at||st.w(`Integer expected for option 'clusterMaxZoom': provided value "${at}" rounded to "${ot}"`),ot}load(){return st._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(at){this.map=at,this.load()}setData(at){return this._data=at,this._updateWorkerData(),this}updateData(at){return this._updateWorkerData(at),this}getData(){return st._(this,void 0,void 0,(function*(){const at=st.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:at})}))}getCoordinatesFromGeometry(at){return"GeometryCollection"===at.type?at.geometries.map((at=>at.coordinates)).flat(1/0):at.coordinates.flat(1/0)}getBounds(){return st._(this,void 0,void 0,(function*(){const at=new G,st=yield this.getData();let ot;switch(st.type){case"FeatureCollection":ot=st.features.map((at=>this.getCoordinatesFromGeometry(at.geometry))).flat(1/0);break;case"Feature":ot=this.getCoordinatesFromGeometry(st.geometry);break;default:ot=this.getCoordinatesFromGeometry(st)}if(0==ot.length)return at;for(let ut=0;ut<ot.length-1;ut+=2)at.extend([ot[ut],ot[ut+1]]);return at}))}setClusterOptions(at){return this.workerOptions.cluster=at.cluster,at&&(void 0!==at.clusterRadius&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(at.clusterRadius)),void 0!==at.clusterMaxZoom&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(at.clusterMaxZoom))),this._updateWorkerData(),this}getClusterExpansionZoom(at){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:at,source:this.id}})}getClusterChildren(at){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:at,source:this.id}})}getClusterLeaves(at,st,ot){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:at,limit:st,offset:ot}})}_updateWorkerData(at){return st._(this,void 0,void 0,(function*(){const ot=st.e({type:this.type},this.workerOptions);at?ot.dataDiff=at:"string"==typeof this._data?(ot.request=this.map._requestManager.transformRequest(rc.resolveURL(this._data),"Source"),ot.request.collectResourceTiming=this._collectResourceTiming):ot.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new st.l("dataloading",{dataType:"source"}));try{const at=yield this.actor.sendAsync({type:"LD",data:ot});if(this._pendingLoads--,this._removed||at.abandoned)return void this.fire(new st.l("dataabort",{dataType:"source"}));let ut=null;at.resourceTiming&&at.resourceTiming[this.id]&&(ut=at.resourceTiming[this.id].slice(0));const Hl={dataType:"source"};this._collectResourceTiming&&ut&&ut.length>0&&st.e(Hl,{resourceTiming:ut}),this.fire(new st.l("data",Object.assign(Object.assign({},Hl),{sourceDataType:"metadata"}))),this.fire(new st.l("data",Object.assign(Object.assign({},Hl),{sourceDataType:"content"})))}catch(at){if(this._pendingLoads--,this._removed)return void this.fire(new st.l("dataabort",{dataType:"source"}));this.fire(new st.k(at))}}))}loaded(){return 0===this._pendingLoads}loadTile(at){return st._(this,void 0,void 0,(function*(){const st=at.actor?"RT":"LT";at.actor=this.actor;const ot={type:this.type,uid:at.uid,tileID:at.tileID,zoom:at.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,globalState:this.map.getGlobalState()};at.abortController=new AbortController;const ut=yield this.actor.sendAsync({type:st,data:ot},at.abortController);delete at.abortController,at.unloadVectorData(),at.aborted||at.loadVectorData(ut,this.map.painter,"RT"===st)}))}abortTile(at){return st._(this,void 0,void 0,(function*(){at.abortController&&(at.abortController.abort(),delete at.abortController),at.aborted=!0}))}unloadTile(at){return st._(this,void 0,void 0,(function*(){at.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:at.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return st.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class X extends st.E{constructor(at,st,ot,ut){super(),this.flippedWindingOrder=!1,this.id=at,this.dispatcher=ot,this.coordinates=st.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(ut),this.options=st}load(at){return st._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new st.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const st=yield iu.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,st&&st.data&&(this.image=st.data,at&&(this.coordinates=at),this._finishLoading())}catch(at){this._request=null,this._loaded=!0,this.fire(new st.k(at))}}))}loaded(){return this._loaded}updateImage(at){return at.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=at.url,this.load(at.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new st.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(at){this.map=at,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(at){this.coordinates=at;const ot=at.map(st.a0.fromLngLat);var ut;return this.tileID=function(at){const ot=st.a1.fromPoints(at),ut=ot.width(),Hl=ot.height(),rc=Math.max(ut,Hl),sc=Math.max(0,Math.floor(-Math.log(rc)/Math.LN2)),oc=Math.pow(2,sc);return new st.a3(sc,Math.floor((ot.minX+ot.maxX)/2*oc),Math.floor((ot.minY+ot.maxY)/2*oc))}(ot),this.terrainTileRanges=this._getOverlappingTileRanges(ot),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=ot.map((at=>this.tileID.getTilePoint(at)._round())),this.flippedWindingOrder=((ut=this.tileCoords)[1].x-ut[0].x)*(ut[2].y-ut[0].y)-(ut[1].y-ut[0].y)*(ut[2].x-ut[0].x)<0,this.fire(new st.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(0===Object.keys(this.tiles).length||!this.image)return;const at=this.map.painter.context,ot=at.gl;this.texture||(this.texture=new st.T(at,this.image,ot.RGBA),this.texture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE));let ut=!1;for(const st in this.tiles){const at=this.tiles[st];"loaded"!==at.state&&(at.state="loaded",at.texture=this.texture,ut=!0)}ut&&this.fire(new st.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(at){return st._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(at.tileID.canonical)?(this.tiles[String(at.tileID.wrap)]=at,at.buckets={}):at.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(at){const{minX:ot,minY:ut,maxX:Hl,maxY:rc}=st.a1.fromPoints(at),sc={};for(let oc=0;oc<=st.a2;oc++){const at=Math.pow(2,oc),st=Math.floor(ot*at),_c=Math.floor(ut*at),wc=Math.floor(Hl*at),Sc=Math.floor(rc*at);sc[oc]={minTileX:st,minTileY:_c,maxTileX:wc,maxTileY:Sc}}return sc}}class K extends X{constructor(at,st,ot,ut){super(at,st,ot,ut),this.roundZoom=!0,this.type="video",this.options=st}load(){return st._(this,void 0,void 0,(function*(){this._loaded=!1;const at=this.options;this.urls=[];for(const st of at.urls)this.urls.push(this.map._requestManager.transformRequest(st,"Source").url);try{const at=yield st.a4(this.urls);if(this._loaded=!0,!at)return;this.video=at,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(at){this.fire(new st.k(at))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(at){if(this.video){const ot=this.video.seekable;at<ot.start(0)||at>ot.end(0)?this.fire(new st.k(new st.a5(`sources.${this.id}`,null,`Playback for this video can be set only between the ${ot.start(0)} and ${ot.end(0)}-second mark.`))):this.video.currentTime=at}}getVideo(){return this.video}onAdd(at){this.map||(this.map=at,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(0===Object.keys(this.tiles).length||this.video.readyState<2)return;const at=this.map.painter.context,ot=at.gl;this.texture?this.video.paused||(this.texture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE),ot.texSubImage2D(ot.TEXTURE_2D,0,0,0,ot.RGBA,ot.UNSIGNED_BYTE,this.video)):(this.texture=new st.T(at,this.video,ot.RGBA),this.texture.bind(ot.LINEAR,ot.CLAMP_TO_EDGE));let ut=!1;for(const st in this.tiles){const at=this.tiles[st];"loaded"!==at.state&&(at.state="loaded",at.texture=this.texture,ut=!0)}ut&&this.fire(new st.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Y extends X{constructor(at,ot,ut,Hl){super(at,ot,ut,Hl),ot.coordinates?Array.isArray(ot.coordinates)&&4===ot.coordinates.length&&!ot.coordinates.some((at=>!Array.isArray(at)||2!==at.length||at.some((at=>"number"!=typeof at))))||this.fire(new st.k(new st.a5(`sources.${at}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new st.k(new st.a5(`sources.${at}`,null,'missing required property "coordinates"'))),ot.animate&&"boolean"!=typeof ot.animate&&this.fire(new st.k(new st.a5(`sources.${at}`,null,'optional "animate" property must be a boolean value'))),ot.canvas?"string"==typeof ot.canvas||ot.canvas instanceof HTMLCanvasElement||this.fire(new st.k(new st.a5(`sources.${at}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new st.k(new st.a5(`sources.${at}`,null,'missing required property "canvas"'))),this.options=ot,this.animate=void 0===ot.animate||ot.animate}load(){return st._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new st.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(at){this.map=at,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let at=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,at=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,at=!0),this._hasInvalidDimensions())return;if(0===Object.keys(this.tiles).length)return;const ot=this.map.painter.context,ut=ot.gl;this.texture?(at||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new st.T(ot,this.canvas,ut.RGBA,{premultiply:!0});let Hl=!1;for(const st in this.tiles){const at=this.tiles[st];"loaded"!==at.state&&(at.state="loaded",at.texture=this.texture,Hl=!0)}Hl&&this.fire(new st.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const at of[this.canvas.width,this.canvas.height])if(isNaN(at)||at<=0)return!0;return!1}}const Au={},J=at=>{switch(at){case"geojson":return H;case"image":return X;case"raster":return q;case"raster-dem":return W;case"vector":return $;case"video":return K;case"canvas":return Y}return Au[at]},yu="RTLPluginLoaded";class te extends st.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=B()}_syncState(at){return this.status=at,this.dispatcher.broadcast("SRPS",{pluginStatus:at,pluginURL:this.url}).catch((at=>{throw this.status="error",at}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(at){return st._(this,arguments,void 0,(function*(at,st=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=rc.resolveURL(at),!this.url)throw new Error(`requested url ${at} is invalid`);if("unavailable"===this.status){if(!st)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if("requested"===this.status)return this._requestImport()}))}_requestImport(){return st._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new st.l(yu))}))}lazyLoad(){"unavailable"===this.status?this.status="requested":"deferred"===this.status&&this._requestImport()}}let _u=null;function oe(){return _u||(_u=new te),_u}class re{constructor(at,ot){this.timeAdded=0,this.fadeEndTime=0,this.tileID=at,this.uid=st.a6(),this.uses=0,this.tileSize=ot,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(at){const st=at+this.timeAdded;st<this.fadeEndTime||(this.fadeEndTime=st)}wasRequested(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state}clearTextures(at){this.demTexture&&at.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(at,ot,ut){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",at){at.featureIndex&&(this.latestFeatureIndex=at.featureIndex,at.rawTileData?(this.latestRawTileData=at.rawTileData,this.latestFeatureIndex.rawTileData=at.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=at.collisionBoxArray,this.buckets=function(at,st){const ot={};if(!st)return ot;for(const ut of at){const at=ut.layerIds.map((at=>st.getLayer(at))).filter(Boolean);if(0!==at.length){ut.layers=at,ut.stateDependentLayerIds&&(ut.stateDependentLayers=ut.stateDependentLayerIds.map((st=>at.filter((at=>at.id===st))[0])));for(const st of at)ot[st.id]=ut}}return ot}(at.buckets,null==ot?void 0:ot.style),this.hasSymbolBuckets=!1;for(const at in this.buckets){const ot=this.buckets[at];if(ot instanceof st.a8){if(this.hasSymbolBuckets=!0,!ut)break;ot.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const at in this.buckets){const ot=this.buckets[at];if(ot instanceof st.a8&&ot.hasRTLText){this.hasRTLText=!0,oe().lazyLoad();break}}this.queryPadding=0;for(const at in this.buckets){const st=this.buckets[at];this.queryPadding=Math.max(this.queryPadding,ot.style.getLayer(at).queryRadius(st))}at.imageAtlas&&(this.imageAtlas=at.imageAtlas),at.glyphAtlasImage&&(this.glyphAtlasImage=at.glyphAtlasImage)}else this.collisionBoxArray=new st.a7}unloadVectorData(){for(const at in this.buckets)this.buckets[at].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(at){return this.buckets[at.id]}upload(at){for(const st in this.buckets){const ot=this.buckets[st];ot.uploadPending()&&ot.upload(at)}const ot=at.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new st.T(at,this.imageAtlas.image,ot.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new st.T(at,this.glyphAtlasImage,ot.ALPHA),this.glyphAtlasImage=null)}prepare(at){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(at,this.imageAtlasTexture)}queryRenderedFeatures(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:ut,cameraQueryGeometry:Hl,scale:rc,tileSize:this.tileSize,pixelPosMatrix:wc,transform:oc,params:sc,queryPadding:this.queryPadding*_c,getElevation:Sc},at,st,ot):{}}querySourceFeatures(at,ot){const ut=this.latestFeatureIndex;if(!ut||!ut.rawTileData)return;const Hl=ut.loadVTLayers(),rc=ot&&ot.sourceLayer?ot.sourceLayer:"",sc=Hl._geojsonTileLayer||Hl[rc];if(!sc)return;const oc=st.a9(ot&&ot.filter),{z:_c,x:wc,y:Sc}=this.tileID.canonical,iu={z:_c,x:wc,y:Sc};for(let su=0;su<sc.length;su++){const ot=sc.feature(su);if(oc.needGeometry){const at=st.aa(ot,!0);if(!oc.filter(new st.F(this.tileID.overscaledZ),at,this.tileID.canonical))continue}else if(!oc.filter(new st.F(this.tileID.overscaledZ),ot))continue;const Hl=ut.getId(ot,rc),lu=new st.ab(ot,_c,wc,Sc,Hl);lu.tile=iu,at.push(lu)}}hasData(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(at){const ot=this.expirationTime;if(at.cacheControl){const ot=st.ac(at.cacheControl);ot["max-age"]&&(this.expirationTime=Date.now()+1e3*ot["max-age"])}else at.expires&&(this.expirationTime=new Date(at.expires).getTime());if(this.expirationTime){const at=Date.now();let st=!1;if(this.expirationTime>at)st=!1;else if(ot)if(this.expirationTime<ot)st=!0;else{const ut=this.expirationTime-ot;ut?this.expirationTime=at+Math.max(ut,3e4):st=!0}else st=!0;st?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)}setFeatureState(at,st){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||0===Object.keys(at).length)return;const ot=this.latestFeatureIndex.loadVTLayers();for(const ut in this.buckets){if(!st.style.hasLayer(ut))continue;const Hl=this.buckets[ut],rc=Hl.layers[0].sourceLayer||"_geojsonTileLayer",sc=ot[rc],oc=at[rc];if(!sc||!oc||0===Object.keys(oc).length)continue;Hl.update(oc,sc,this.imageAtlas&&this.imageAtlas.patternPositions||{});const _c=st&&st.style&&st.style.getLayer(ut);_c&&(this.queryPadding=Math.max(this.queryPadding,_c.queryRadius(Hl)))}}holdingForFade(){return void 0!==this.symbolFadeHoldUntil}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<rc.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(at){this.symbolFadeHoldUntil=rc.now()+at}setDependencies(at,st){const ot={};for(const ut of st)ot[ut]=!0;this.dependencies[at]=ot}hasDependency(at,st){for(const ot of at){const at=this.dependencies[ot];if(at)for(const ot of st)if(at[ot])return!0}return!1}}class ae{constructor(at,st){this.max=at,this.onRemove=st,this.reset()}reset(){for(const at in this.data)for(const st of this.data[at])st.timeout&&clearTimeout(st.timeout),this.onRemove(st.value);return this.data={},this.order=[],this}add(at,st,ot){const ut=at.wrapped().key;void 0===this.data[ut]&&(this.data[ut]=[]);const Hl={value:st,timeout:void 0};if(void 0!==ot&&(Hl.timeout=setTimeout((()=>{this.remove(at,Hl)}),ot)),this.data[ut].push(Hl),this.order.push(ut),this.order.length>this.max){const at=this._getAndRemoveByKey(this.order[0]);at&&this.onRemove(at)}return this}has(at){return at.wrapped().key in this.data}getAndRemove(at){return this.has(at)?this._getAndRemoveByKey(at.wrapped().key):null}_getAndRemoveByKey(at){const st=this.data[at].shift();return st.timeout&&clearTimeout(st.timeout),0===this.data[at].length&&delete this.data[at],this.order.splice(this.order.indexOf(at),1),st.value}getByKey(at){const st=this.data[at];return st?st[0].value:null}get(at){return this.has(at)?this.data[at.wrapped().key][0].value:null}remove(at,st){if(!this.has(at))return this;const ot=at.wrapped().key,ut=void 0===st?0:this.data[ot].indexOf(st),Hl=this.data[ot][ut];return this.data[ot].splice(ut,1),Hl.timeout&&clearTimeout(Hl.timeout),0===this.data[ot].length&&delete this.data[ot],this.onRemove(Hl.value),this.order.splice(this.order.indexOf(ot),1),this}setMaxSize(at){for(this.max=at;this.order.length>this.max;){const at=this._getAndRemoveByKey(this.order[0]);at&&this.onRemove(at)}return this}filter(at){const st=[];for(const ot in this.data)for(const ut of this.data[ot])at(ut.value)||st.push(ut);for(const ot of st)this.remove(ot.value.tileID,ot)}}class se{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(at,ot,ut){const Hl=String(ot);if(this.stateChanges[at]=this.stateChanges[at]||{},this.stateChanges[at][Hl]=this.stateChanges[at][Hl]||{},st.e(this.stateChanges[at][Hl],ut),null===this.deletedStates[at]){this.deletedStates[at]={};for(const st in this.state[at])st!==Hl&&(this.deletedStates[at][st]=null)}else if(this.deletedStates[at]&&null===this.deletedStates[at][Hl]){this.deletedStates[at][Hl]={};for(const st in this.state[at][Hl])ut[st]||(this.deletedStates[at][Hl][st]=null)}else for(const st in ut)this.deletedStates[at]&&this.deletedStates[at][Hl]&&null===this.deletedStates[at][Hl][st]&&delete this.deletedStates[at][Hl][st]}removeFeatureState(at,st,ot){if(null===this.deletedStates[at])return;const ut=String(st);if(this.deletedStates[at]=this.deletedStates[at]||{},ot&&void 0!==st)null!==this.deletedStates[at][ut]&&(this.deletedStates[at][ut]=this.deletedStates[at][ut]||{},this.deletedStates[at][ut][ot]=null);else if(void 0!==st)if(this.stateChanges[at]&&this.stateChanges[at][ut])for(ot in this.deletedStates[at][ut]={},this.stateChanges[at][ut])this.deletedStates[at][ut][ot]=null;else this.deletedStates[at][ut]=null;else this.deletedStates[at]=null}getState(at,ot){const ut=String(ot),Hl=st.e({},(this.state[at]||{})[ut],(this.stateChanges[at]||{})[ut]);if(null===this.deletedStates[at])return{};if(this.deletedStates[at]){const st=this.deletedStates[at][ot];if(null===st)return{};for(const at in st)delete Hl[at]}return Hl}initializeTileState(at,st){at.setFeatureState(this.state,st)}coalesceChanges(at,ot){const ut={};for(const Hl in this.stateChanges){this.state[Hl]=this.state[Hl]||{};const at={};for(const ot in this.stateChanges[Hl])this.state[Hl][ot]||(this.state[Hl][ot]={}),st.e(this.state[Hl][ot],this.stateChanges[Hl][ot]),at[ot]=this.state[Hl][ot];ut[Hl]=at}for(const Hl in this.deletedStates){this.state[Hl]=this.state[Hl]||{};const at={};if(null===this.deletedStates[Hl])for(const st in this.state[Hl])at[st]={},this.state[Hl][st]={};else for(const st in this.deletedStates[Hl]){if(null===this.deletedStates[Hl][st])this.state[Hl][st]={};else for(const at of Object.keys(this.deletedStates[Hl][st]))delete this.state[Hl][st][at];at[st]=this.state[Hl][st]}ut[Hl]=ut[Hl]||{},st.e(ut[Hl],at)}if(this.stateChanges={},this.deletedStates={},0!==Object.keys(ut).length)for(const st in at)at[st].setFeatureState(ut,ot)}}const xu=89.25;function le(at,ot){const ut=st.ag(ot.lat,-85.051129,st.ah);return new st.P(st.V(ot.lng)*at,st.U(ut)*at)}function ce(at,ot){return new st.a0(ot.x/at,ot.y/at).toLngLat()}function he(at){return at.cameraToCenterDistance*Math.min(.85*Math.tan(st.ad(90-at.pitch)),Math.tan(st.ad(xu-at.pitch)))}function ue(at,ot){const ut=at.canonical,Hl=ot/st.ae(ut.z),rc=ut.x+Math.pow(2,ut.z)*at.wrap,sc=st.af(new Float64Array(16));return st.M(sc,sc,[rc*Hl,ut.y*Hl,0]),st.N(sc,sc,[Hl/st.$,Hl/st.$,1]),sc}function de(at,ot,ut,Hl,rc){const sc=st.a0.fromLngLat(at,ot),oc=rc*st.ai(1,at.lat),_c=oc*Math.cos(st.ad(ut)),wc=Math.sqrt(oc*oc-_c*_c),Sc=wc*Math.sin(st.ad(-Hl)),iu=wc*Math.cos(st.ad(-Hl));return new st.a0(sc.x+Sc,sc.y+iu,sc.z+_c)}function _e(at,st,ot){const ut=st.intersectsFrustum(at);if(!ot||0===ut)return ut;const Hl=st.intersectsPlane(ot);return 0===Hl?0:2===ut&&2===Hl?2:1}function pe(at,st,ot){let ut=0;const Hl=(ot-st)/10;for(let rc=0;rc<10;rc++)ut+=Hl*Math.pow(Math.cos(st+(rc+.5)/10*(ot-st)),at);return ut}function me(at,ot){return function(ut,Hl,rc,sc,oc){const _c=2*((at-1)/st.aj(Math.cos(st.ad(xu-oc))/Math.cos(st.ad(xu)))-1),wc=Math.acos(rc/sc),Sc=2*pe(_c-1,0,st.ad(oc/2)),iu=Math.min(st.ad(xu),wc+st.ad(oc/2)),su=pe(_c-1,Math.min(iu,wc-st.ad(oc/2)),iu),lu=Math.atan(Hl/rc),cu=Math.hypot(Hl,rc);let uu=ut;return uu+=st.aj(sc/cu/Math.max(.5,Math.cos(st.ad(oc/2)))),uu+=_c*st.aj(Math.cos(lu))/2,uu-=st.aj(Math.max(1,su/Sc/ot))/2,uu}}const Su=me(9.314,3);function ge(at,ot){const ut=(ot.roundZoom?Math.round:Math.floor)(at.zoom+st.aj(at.tileSize/ot.tileSize));return Math.max(0,ut)}function ve(at,ot){const ut=at.getCameraFrustum(),Hl=at.getClippingPlane(),rc=at.screenPointToMercatorCoordinate(at.getCameraPoint()),sc=st.a0.fromLngLat(at.center,at.elevation);rc.z=sc.z+Math.cos(at.pitchInRadians)*at.cameraToCenterDistance/at.worldSize;const oc=at.getCoveringTilesDetailsProvider(),_c=oc.allowVariableZoom(at,ot),wc=ge(at,ot),Sc=ot.minzoom||0,iu=void 0!==ot.maxzoom?ot.maxzoom:at.maxZoom,su=Math.min(Math.max(0,wc),iu),lu=Math.pow(2,su),cu=[lu*rc.x,lu*rc.y,0],uu=[lu*sc.x,lu*sc.y,0],pu=Math.hypot(sc.x-rc.x,sc.y-rc.y),mu=Math.abs(sc.z-rc.z),gu=Math.hypot(pu,mu),b=at=>({zoom:0,x:0,y:0,wrap:at,fullyVisible:!1}),Au=[],yu=[];if(at.renderWorldCopies&&oc.allowWorldCopies())for(let st=1;st<=3;st++)Au.push(b(-st)),Au.push(b(st));for(Au.push(b(0));Au.length>0;){const lu=Au.pop(),pu=lu.x,_u=lu.y;let xu=lu.fullyVisible;const Du={x:pu,y:_u,z:lu.zoom},Lu=oc.getTileBoundingVolume(Du,lu.wrap,at.elevation,ot);if(!xu){const at=_e(ut,Lu,Hl);if(0===at)continue;xu=2===at}const $u=oc.distanceToTile2d(rc.x,rc.y,Du,Lu);let hh=wc;_c&&(hh=(ot.calculateTileZoom||Su)(at.zoom+st.aj(at.tileSize/ot.tileSize),$u,mu,gu,at.fov)),hh=(ot.roundZoom?Math.round:Math.floor)(hh),hh=Math.max(0,hh);const ed=Math.min(hh,iu);if(lu.wrap=oc.getWrap(sc,Du,lu.wrap),lu.zoom>=ed){if(lu.zoom<Sc)continue;const at=su-lu.zoom,ut=cu[0]-.5-(pu<<at),Hl=cu[1]-.5-(_u<<at),rc=ot.reparseOverscaled?Math.max(lu.zoom,hh):lu.zoom;yu.push({tileID:new st.Z(lu.zoom===iu?rc:lu.zoom,lu.wrap,lu.zoom,pu,_u),distanceSq:st.ak([uu[0]-.5-pu,uu[1]-.5-_u]),tileDistanceToCamera:Math.sqrt(ut*ut+Hl*Hl)})}else for(let at=0;at<4;at++)Au.push({zoom:lu.zoom+1,x:(pu<<1)+at%2,y:(_u<<1)+(at>>1),wrap:lu.wrap,fullyVisible:xu})}return yu.sort(((at,st)=>at.distanceSq-st.distanceSq)).map((at=>at.tileID))}const Du=st.a1.fromPoints([new st.P(0,0),new st.P(st.$,st.$)]);class xe extends st.E{constructor(at,st,ot){super(),this.id=at,this.dispatcher=ot,this.on("data",(at=>this._dataHandler(at))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((at,st,ot,ut)=>{const Hl=new(J(st.type))(at,st,ot,ut);if(Hl.id!==at)throw new Error(`Expected Source id to be ${at} instead of ${Hl.id}`);return Hl})(at,st,ot,this),this._tiles={},this._cache=new ae(0,(at=>this._unloadTile(at))),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new se,this._didEmitContent=!1,this._updated=!1}onAdd(at){this.map=at,this._maxTileCacheSize=at?at._maxTileCacheSize:null,this._maxTileCacheZoomLevels=at?at._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(at)}onRemove(at){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(at)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;if(!this._source.loaded())return!1;if(!(void 0===this.used&&void 0===this.usedForTerrain||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const at in this._tiles){const st=this._tiles[at];if("loaded"!==st.state&&"errored"!==st.state)return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const at=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,at&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(at,ot,ut){return st._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(at),this._tileLoaded(at,ot,ut)}catch(ot){at.state="errored",404!==ot.status?this._source.fire(new st.k(ot,{tile:at})):this.update(this.transform,this.terrain)}}))}_unloadTile(at){this._source.unloadTile&&this._source.unloadTile(at)}_abortTile(at){this._source.abortTile&&this._source.abortTile(at),this._source.fire(new st.l("dataabort",{tile:at,coord:at.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(at){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const st in this._tiles){const ot=this._tiles[st];ot.upload(at),ot.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map((at=>at.tileID)).sort(ye).map((at=>at.key))}getRenderableIds(at){const ot=[];for(const st in this._tiles)this._isIdRenderable(st,at)&&ot.push(this._tiles[st]);return at?ot.sort(((at,ot)=>{const ut=at.tileID,Hl=ot.tileID,rc=new st.P(ut.canonical.x,ut.canonical.y)._rotate(-this.transform.bearingInRadians),sc=new st.P(Hl.canonical.x,Hl.canonical.y)._rotate(-this.transform.bearingInRadians);return ut.overscaledZ-Hl.overscaledZ||sc.y-rc.y||sc.x-rc.x})).map((at=>at.tileID.key)):ot.map((at=>at.tileID)).sort(ye).map((at=>at.key))}hasRenderableParent(at){const st=this.findLoadedParent(at,0);return!!st&&this._isIdRenderable(st.tileID.key)}_isIdRenderable(at,st){return this._tiles[at]&&this._tiles[at].hasData()&&!this._coveredTiles[at]&&(st||!this._tiles[at].holdingForFade())}reload(at){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const st in this._tiles)at?this._reloadTile(st,"expired"):"errored"!==this._tiles[st].state&&this._reloadTile(st,"reloading")}}_reloadTile(at,ot){return st._(this,void 0,void 0,(function*(){const st=this._tiles[at];st&&("loading"!==st.state&&(st.state=ot),yield this._loadTile(st,at,ot))}))}_tileLoaded(at,ot,ut){at.timeAdded=rc.now(),"expired"===ut&&(at.refreshedUponExpiration=!0),this._setTileReloadTimer(ot,at),"raster-dem"===this.getSource().type&&at.dem&&this._backfillDEM(at),this._state.initializeTileState(at,this.map?this.map.painter:null),at.aborted||this._source.fire(new st.l("data",{dataType:"source",tile:at,coord:at.tileID}))}_backfillDEM(at){const st=this.getRenderableIds();for(let ot=0;ot<st.length;ot++){const ut=st[ot];if(at.neighboringTiles&&at.neighboringTiles[ut]){const st=this.getTileByID(ut);i(at,st),i(st,at)}}function i(at,st){at.needsHillshadePrepare=!0,at.needsTerrainPrepare=!0;let ot=st.tileID.canonical.x-at.tileID.canonical.x;const ut=st.tileID.canonical.y-at.tileID.canonical.y,Hl=Math.pow(2,at.tileID.canonical.z),rc=st.tileID.key;0===ot&&0===ut||Math.abs(ut)>1||(Math.abs(ot)>1&&(1===Math.abs(ot+Hl)?ot+=Hl:1===Math.abs(ot-Hl)&&(ot-=Hl)),st.dem&&at.dem&&(at.dem.backfillBorder(st.dem,ot,ut),at.neighboringTiles&&at.neighboringTiles[rc]&&(at.neighboringTiles[rc].backfilled=!0)))}}getTile(at){return this.getTileByID(at.key)}getTileByID(at){return this._tiles[at]}_retainLoadedChildren(at,st,ot,ut){for(const Hl in this._tiles){let rc=this._tiles[Hl];if(ut[Hl]||!rc.hasData()||rc.tileID.overscaledZ<=st||rc.tileID.overscaledZ>ot)continue;let sc=rc.tileID;for(;rc&&rc.tileID.overscaledZ>st+1;){const at=rc.tileID.scaledTo(rc.tileID.overscaledZ-1);rc=this._tiles[at.key],rc&&rc.hasData()&&(sc=at)}let oc=sc;for(;oc.overscaledZ>st;)if(oc=oc.scaledTo(oc.overscaledZ-1),at[oc.key]||at[oc.canonical.key]){ut[sc.key]=sc;break}}}findLoadedParent(at,st){if(at.key in this._loadedParentTiles){const ot=this._loadedParentTiles[at.key];return ot&&ot.tileID.overscaledZ>=st?ot:null}for(let ot=at.overscaledZ-1;ot>=st;ot--){const st=at.scaledTo(ot),ut=this._getLoadedTile(st);if(ut)return ut}}findLoadedSibling(at){return this._getLoadedTile(at)}_getLoadedTile(at){const st=this._tiles[at.key];return st&&st.hasData()?st:this._cache.getByKey(at.wrapped().key)}updateCacheSize(at){const ot=Math.ceil(at.width/this._source.tileSize)+1,ut=Math.ceil(at.height/this._source.tileSize)+1,Hl=Math.floor(ot*ut*(null===this._maxTileCacheZoomLevels?st.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),rc="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,Hl):Hl;this._cache.setMaxSize(rc)}handleWrapJump(at){const st=Math.round((at-(void 0===this._prevLng?at:this._prevLng))/360);if(this._prevLng=at,st){const at={};for(const ot in this._tiles){const ut=this._tiles[ot];ut.tileID=ut.tileID.unwrapTo(ut.tileID.wrap+st),at[ut.tileID.key]=ut}this._tiles=at;for(const st in this._timers)clearTimeout(this._timers[st]),delete this._timers[st];for(const st in this._tiles)this._setTileReloadTimer(st,this._tiles[st])}}_updateCoveredAndRetainedTiles(at,st,ot,ut,Hl,sc){const oc={},_c={},wc=Object.keys(at),Sc=rc.now();for(const rc of wc){const ot=at[rc],ut=this._tiles[rc];if(!ut||0!==ut.fadeEndTime&&ut.fadeEndTime<=Sc)continue;const Hl=this.findLoadedParent(ot,st),sc=this.findLoadedSibling(ot),wc=Hl||sc||null;wc&&(this._addTile(wc.tileID),oc[wc.tileID.key]=wc.tileID),_c[rc]=ot}this._retainLoadedChildren(_c,ut,ot,at);for(const rc in oc)at[rc]||(this._coveredTiles[rc]=!0,at[rc]=oc[rc]);if(sc){const st={},ot={};for(const at of Hl)this._tiles[at.key].hasData()?st[at.key]=at:ot[at.key]=at;for(const ut in ot){const Hl=ot[ut].children(this._source.maxzoom);this._tiles[Hl[0].key]&&this._tiles[Hl[1].key]&&this._tiles[Hl[2].key]&&this._tiles[Hl[3].key]&&(st[Hl[0].key]=at[Hl[0].key]=Hl[0],st[Hl[1].key]=at[Hl[1].key]=Hl[1],st[Hl[2].key]=at[Hl[2].key]=Hl[2],st[Hl[3].key]=at[Hl[3].key]=Hl[3],delete ot[ut])}for(const ut in ot){const Hl=ot[ut],rc=this.findLoadedParent(Hl,this._source.minzoom),sc=this.findLoadedSibling(Hl),oc=rc||sc||null;if(oc){st[oc.tileID.key]=at[oc.tileID.key]=oc.tileID;for(const at in st)st[at].isChildOf(oc.tileID)&&delete st[at]}}for(const at in this._tiles)st[at]||(this._coveredTiles[at]=!0)}}update(at,ot){if(!this._sourceLoaded||this._paused)return;let ut;this.transform=at,this.terrain=ot,this.updateCacheSize(at),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?ut=at.getVisibleUnwrappedCoordinates(this._source.tileID).map((at=>new st.Z(at.canonical.z,at.wrap,at.canonical.z,at.canonical.x,at.canonical.y))):(ut=ve(at,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:ot,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(ut=ut.filter((at=>this._source.hasTile(at))))):ut=[];const Hl=ge(at,this._source),rc=Math.max(Hl-xe.maxOverzooming,this._source.minzoom),sc=Math.max(Hl+xe.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const at={};for(const st of ut)if(st.canonical.z>this._source.minzoom){const ot=st.scaledTo(st.canonical.z-1);at[ot.key]=ot;const ut=st.scaledTo(Math.max(this._source.minzoom,Math.min(st.canonical.z,5)));at[ut.key]=ut}ut=ut.concat(Object.values(at))}const oc=0===ut.length&&!this._updated&&this._didEmitContent;this._updated=!0,oc&&this.fire(new st.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const _c=this._updateRetainedTiles(ut,Hl);we(this._source.type)&&this._updateCoveredAndRetainedTiles(_c,rc,sc,Hl,ut,ot);for(const st in _c)this._tiles[st].clearFadeHold();const wc=st.al(this._tiles,_c);for(const st of wc){const at=this._tiles[st];at.hasSymbolBuckets&&!at.holdingForFade()?at.setHoldDuration(this.map._fadeDuration):at.hasSymbolBuckets&&!at.symbolFadeFinished()||this._removeTile(st)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const at in this._tiles)this._tiles[at].holdingForFade()&&this._removeTile(at)}_updateRetainedTiles(at,st){var ot;const ut={},Hl={},rc=Math.max(st-xe.maxOverzooming,this._source.minzoom),sc=Math.max(st+xe.maxUnderzooming,this._source.minzoom),oc={};for(const _c of at){const at=this._addTile(_c);ut[_c.key]=_c,at.hasData()||st<this._source.maxzoom&&(oc[_c.key]=_c)}this._retainLoadedChildren(oc,st,sc,ut);for(const _c of at){let at=this._tiles[_c.key];if(at.hasData())continue;if(st+1>this._source.maxzoom){const at=_c.children(this._source.maxzoom)[0],st=this.getTile(at);if(st&&st.hasData()){ut[at.key]=at;continue}}else{const at=_c.children(this._source.maxzoom);if(ut[at[0].key]&&ut[at[1].key]&&ut[at[2].key]&&ut[at[3].key])continue}let sc=at.wasRequested();for(let st=_c.overscaledZ-1;st>=rc;--st){const rc=_c.scaledTo(st);if(Hl[rc.key])break;if(Hl[rc.key]=!0,at=this.getTile(rc),!at&&sc&&(at=this._addTile(rc)),at){const st=at.hasData();if((st||!(null===(ot=this.map)||void 0===ot?void 0:ot.cancelPendingTileRequestsWhileZooming)||sc)&&(ut[rc.key]=rc),sc=at.wasRequested(),st)break}}}return ut}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const at in this._tiles){const st=[];let ot,ut=this._tiles[at].tileID;for(;ut.overscaledZ>0;){if(ut.key in this._loadedParentTiles){ot=this._loadedParentTiles[ut.key];break}st.push(ut.key);const at=ut.scaledTo(ut.overscaledZ-1);if(ot=this._getLoadedTile(at),ot)break;ut=at}for(const at of st)this._loadedParentTiles[at]=ot}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const at in this._tiles){const st=this._tiles[at].tileID,ot=this._getLoadedTile(st);this._loadedSiblingTiles[st.key]=ot}}_addTile(at){let ot=this._tiles[at.key];if(ot)return ot;ot=this._cache.getAndRemove(at),ot&&(this._setTileReloadTimer(at.key,ot),ot.tileID=at,this._state.initializeTileState(ot,this.map?this.map.painter:null),this._cacheTimers[at.key]&&(clearTimeout(this._cacheTimers[at.key]),delete this._cacheTimers[at.key],this._setTileReloadTimer(at.key,ot)));const ut=ot;return ot||(ot=new re(at,this._source.tileSize*at.overscaleFactor()),this._loadTile(ot,at.key,ot.state)),ot.uses++,this._tiles[at.key]=ot,ut||this._source.fire(new st.l("dataloading",{tile:ot,coord:ot.tileID,dataType:"source"})),ot}_setTileReloadTimer(at,st){at in this._timers&&(clearTimeout(this._timers[at]),delete this._timers[at]);const ot=st.getExpiryTimeout();ot&&(this._timers[at]=setTimeout((()=>{this._reloadTile(at,"expired"),delete this._timers[at]}),ot))}refreshTiles(at){for(const st in this._tiles)(this._isIdRenderable(st)||"errored"==this._tiles[st].state)&&at.some((at=>at.equals(this._tiles[st].tileID.canonical)))&&this._reloadTile(st,"expired")}_removeTile(at){const st=this._tiles[at];st&&(st.uses--,delete this._tiles[at],this._timers[at]&&(clearTimeout(this._timers[at]),delete this._timers[at]),st.uses>0||(st.hasData()&&"reloading"!==st.state?this._cache.add(st.tileID,st,st.getExpiryTimeout()):(st.aborted=!0,this._abortTile(st),this._unloadTile(st))))}_dataHandler(at){const st=at.sourceDataType;"source"===at.dataType&&"metadata"===st&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&"source"===at.dataType&&"content"===st&&(this.reload(at.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const at in this._tiles)this._removeTile(at);this._cache.reset()}tilesIn(at,ot,ut){const Hl=[],rc=this.transform;if(!rc)return Hl;const sc=rc.getCoveringTilesDetailsProvider().allowWorldCopies(),oc=ut?rc.getCameraQueryGeometry(at):at,l=at=>rc.screenPointToMercatorCoordinate(at,this.terrain),_c=this.transformBbox(at,l,!sc),wc=this.transformBbox(oc,l,!sc),Sc=this.getIds(),iu=st.a1.fromPoints(wc);for(let su=0;su<Sc.length;su++){const at=this._tiles[Sc[su]];if(at.holdingForFade())continue;const ut=sc?[at.tileID]:[at.tileID.unwrapTo(-1),at.tileID.unwrapTo(0)],oc=Math.pow(2,rc.zoom-at.tileID.overscaledZ),lu=ot*at.queryPadding*st.$/at.tileSize/oc;for(const ot of ut){const ut=iu.map((at=>ot.getTilePoint(new st.a0(at.x,at.y))));if(ut.expandBy(lu),ut.intersects(Du)){const st=_c.map((at=>ot.getTilePoint(at))),ut=wc.map((at=>ot.getTilePoint(at)));Hl.push({tile:at,tileID:sc?ot:ot.unwrapTo(0),queryGeometry:st,cameraQueryGeometry:ut,scale:oc})}}}return Hl}transformBbox(at,ot,ut){let Hl=at.map(ot);if(ut){const ut=st.a1.fromPoints(at);ut.shrinkBy(.001*Math.min(ut.width(),ut.height()));const rc=ut.map(ot);st.a1.fromPoints(Hl).covers(rc)||(Hl=Hl.map((at=>at.x>.5?new st.a0(at.x-1,at.y,at.z):at)))}return Hl}getVisibleCoordinates(at){const st=this.getRenderableIds(at).map((at=>this._tiles[at].tileID));return this.transform&&this.transform.populateCache(st),st}hasTransition(){if(this._source.hasTransition())return!0;if(we(this._source.type)){const at=rc.now();for(const st in this._tiles)if(this._tiles[st].fadeEndTime>=at)return!0}return!1}setFeatureState(at,st,ot){this._state.updateState(at=at||"_geojsonTileLayer",st,ot)}removeFeatureState(at,st,ot){this._state.removeFeatureState(at=at||"_geojsonTileLayer",st,ot)}getFeatureState(at,st){return this._state.getState(at=at||"_geojsonTileLayer",st)}setDependencies(at,st,ot){const ut=this._tiles[at];ut&&ut.setDependencies(st,ot)}reloadTilesForDependencies(at,st){for(const ot in this._tiles)this._tiles[ot].hasDependency(at,st)&&this._reloadTile(ot,"reloading");this._cache.filter((ot=>!ot.hasDependency(at,st)))}}function ye(at,st){const ot=Math.abs(2*at.wrap)-+(at.wrap<0),ut=Math.abs(2*st.wrap)-+(st.wrap<0);return at.overscaledZ-st.overscaledZ||ut-ot||st.canonical.y-at.canonical.y||st.canonical.x-at.canonical.x}function we(at){return"raster"===at||"image"===at||"video"===at}xe.maxOverzooming=10,xe.maxUnderzooming=3;class Te{constructor(at,st){this.reset(at,st)}reset(at,st){this.points=at||[],this._distances=[0];for(let ot=1;ot<this.points.length;ot++)this._distances[ot]=this._distances[ot-1]+this.points[ot].dist(this.points[ot-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(st||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(at){if(1===this.points.length)return this.points[0];at=st.ag(at,0,1);let ot=1,ut=this._distances[ot];const Hl=at*this.paddedLength+this.padding;for(;ut<Hl&&ot<this._distances.length;)ut=this._distances[++ot];const rc=ot-1,sc=this._distances[rc],oc=ut-sc,_c=oc>0?(Hl-sc)/oc:0;return this.points[rc].mult(1-_c).add(this.points[ot].mult(_c))}}function Pe(at,st){let ot=!0;return"always"===at||"never"!==at&&"never"!==st||(ot=!1),ot}class Ce{constructor(at,st,ot){const ut=this.boxCells=[],Hl=this.circleCells=[];this.xCellCount=Math.ceil(at/ot),this.yCellCount=Math.ceil(st/ot);for(let rc=0;rc<this.xCellCount*this.yCellCount;rc++)ut.push([]),Hl.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=at,this.height=st,this.xScale=this.xCellCount/at,this.yScale=this.yCellCount/st,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(at,st,ot,ut,Hl){this._forEachCell(st,ot,ut,Hl,this._insertBoxCell,this.boxUid++),this.boxKeys.push(at),this.bboxes.push(st),this.bboxes.push(ot),this.bboxes.push(ut),this.bboxes.push(Hl)}insertCircle(at,st,ot,ut){this._forEachCell(st-ut,ot-ut,st+ut,ot+ut,this._insertCircleCell,this.circleUid++),this.circleKeys.push(at),this.circles.push(st),this.circles.push(ot),this.circles.push(ut)}_insertBoxCell(at,st,ot,ut,Hl,rc){this.boxCells[Hl].push(rc)}_insertCircleCell(at,st,ot,ut,Hl,rc){this.circleCells[Hl].push(rc)}_query(at,st,ot,ut,Hl,rc,sc){if(ot<0||at>this.width||ut<0||st>this.height)return[];const oc=[];if(at<=0&&st<=0&&this.width<=ot&&this.height<=ut){if(Hl)return[{key:null,x1:at,y1:st,x2:ot,y2:ut}];for(let at=0;at<this.boxKeys.length;at++)oc.push({key:this.boxKeys[at],x1:this.bboxes[4*at],y1:this.bboxes[4*at+1],x2:this.bboxes[4*at+2],y2:this.bboxes[4*at+3]});for(let at=0;at<this.circleKeys.length;at++){const st=this.circles[3*at],ot=this.circles[3*at+1],ut=this.circles[3*at+2];oc.push({key:this.circleKeys[at],x1:st-ut,y1:ot-ut,x2:st+ut,y2:ot+ut})}}else this._forEachCell(at,st,ot,ut,this._queryCell,oc,{hitTest:Hl,overlapMode:rc,seenUids:{box:{},circle:{}}},sc);return oc}query(at,st,ot,ut){return this._query(at,st,ot,ut,!1,null)}hitTest(at,st,ot,ut,Hl,rc){return this._query(at,st,ot,ut,!0,Hl,rc).length>0}hitTestCircle(at,st,ot,ut,Hl){const rc=at-ot,sc=at+ot,oc=st-ot,_c=st+ot;if(sc<0||rc>this.width||_c<0||oc>this.height)return!1;const wc=[];return this._forEachCell(rc,oc,sc,_c,this._queryCellCircle,wc,{hitTest:!0,overlapMode:ut,circle:{x:at,y:st,radius:ot},seenUids:{box:{},circle:{}}},Hl),wc.length>0}_queryCell(at,st,ot,ut,Hl,rc,sc,oc){const{seenUids:_c,hitTest:wc,overlapMode:Sc}=sc,iu=this.boxCells[Hl];if(null!==iu){const Hl=this.bboxes;for(const sc of iu)if(!_c.box[sc]){_c.box[sc]=!0;const iu=4*sc,su=this.boxKeys[sc];if(at<=Hl[iu+2]&&st<=Hl[iu+3]&&ot>=Hl[iu+0]&&ut>=Hl[iu+1]&&(!oc||oc(su))&&(!wc||!Pe(Sc,su.overlapMode))&&(rc.push({key:su,x1:Hl[iu],y1:Hl[iu+1],x2:Hl[iu+2],y2:Hl[iu+3]}),wc))return!0}}const su=this.circleCells[Hl];if(null!==su){const Hl=this.circles;for(const sc of su)if(!_c.circle[sc]){_c.circle[sc]=!0;const iu=3*sc,su=this.circleKeys[sc];if(this._circleAndRectCollide(Hl[iu],Hl[iu+1],Hl[iu+2],at,st,ot,ut)&&(!oc||oc(su))&&(!wc||!Pe(Sc,su.overlapMode))){const at=Hl[iu],st=Hl[iu+1],ot=Hl[iu+2];if(rc.push({key:su,x1:at-ot,y1:st-ot,x2:at+ot,y2:st+ot}),wc)return!0}}}return!1}_queryCellCircle(at,st,ot,ut,Hl,rc,sc,oc){const{circle:_c,seenUids:wc,overlapMode:Sc}=sc,iu=this.boxCells[Hl];if(null!==iu){const at=this.bboxes;for(const st of iu)if(!wc.box[st]){wc.box[st]=!0;const ot=4*st,ut=this.boxKeys[st];if(this._circleAndRectCollide(_c.x,_c.y,_c.radius,at[ot+0],at[ot+1],at[ot+2],at[ot+3])&&(!oc||oc(ut))&&!Pe(Sc,ut.overlapMode))return rc.push(!0),!0}}const su=this.circleCells[Hl];if(null!==su){const at=this.circles;for(const st of su)if(!wc.circle[st]){wc.circle[st]=!0;const ot=3*st,ut=this.circleKeys[st];if(this._circlesCollide(at[ot],at[ot+1],at[ot+2],_c.x,_c.y,_c.radius)&&(!oc||oc(ut))&&!Pe(Sc,ut.overlapMode))return rc.push(!0),!0}}}_forEachCell(at,st,ot,ut,Hl,rc,sc,oc){const _c=this._convertToXCellCoord(at),wc=this._convertToYCellCoord(st),Sc=this._convertToXCellCoord(ot),iu=this._convertToYCellCoord(ut);for(let su=_c;su<=Sc;su++)for(let _c=wc;_c<=iu;_c++)if(Hl.call(this,at,st,ot,ut,this.xCellCount*_c+su,rc,sc,oc))return}_convertToXCellCoord(at){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(at*this.xScale)))}_convertToYCellCoord(at){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(at*this.yScale)))}_circlesCollide(at,st,ot,ut,Hl,rc){const sc=ut-at,oc=Hl-st,_c=ot+rc;return _c*_c>sc*sc+oc*oc}_circleAndRectCollide(at,st,ot,ut,Hl,rc,sc){const oc=(rc-ut)/2,_c=Math.abs(at-(ut+oc));if(_c>oc+ot)return!1;const wc=(sc-Hl)/2,Sc=Math.abs(st-(Hl+wc));if(Sc>wc+ot)return!1;if(_c<=oc||Sc<=wc)return!0;const iu=_c-oc,su=Sc-wc;return iu*iu+su*su<=ot*ot}}function Ie(at,ot,ut){const Hl=st.L();if(!at){const{vecSouth:at,vecEast:st}=Se(ot),ut=o();ut[0]=st[0],ut[1]=st[1],ut[2]=at[0],ut[3]=at[1],rc=ut,(iu=(oc=(sc=ut)[0])*(Sc=sc[3])-(wc=sc[2])*(_c=sc[1]))&&(rc[0]=Sc*(iu=1/iu),rc[1]=-_c*iu,rc[2]=-wc*iu,rc[3]=oc*iu),Hl[0]=ut[0],Hl[1]=ut[1],Hl[4]=ut[2],Hl[5]=ut[3]}var rc,sc,oc,_c,wc,Sc,iu;return st.N(Hl,Hl,[1/ut,1/ut,1]),Hl}function Me(at,ot,ut,Hl){if(at){const at=st.L();if(!ot){const{vecSouth:st,vecEast:ot}=Se(ut);at[0]=ot[0],at[1]=ot[1],at[4]=st[0],at[5]=st[1]}return st.N(at,at,[Hl,Hl,1]),at}return ut.pixelsToClipSpaceMatrix}function Se(at){const ot=Math.cos(at.rollInRadians),ut=Math.sin(at.rollInRadians),Hl=Math.cos(at.pitchInRadians),rc=Math.cos(at.bearingInRadians),sc=Math.sin(at.bearingInRadians),oc=st.aq();oc[0]=-rc*Hl*ut-sc*ot,oc[1]=-sc*Hl*ut+rc*ot;const _c=st.ar(oc);_c<1e-9?st.as(oc):st.at(oc,oc,1/_c);const wc=st.aq();wc[0]=rc*Hl*ot-sc*ut,wc[1]=sc*Hl*ot+rc*ut;const Sc=st.ar(wc);return Sc<1e-9?st.as(wc):st.at(wc,wc,1/Sc),{vecEast:wc,vecSouth:oc}}function Ee(at,ot,ut,Hl){let rc;Hl?(rc=[at,ot,Hl(at,ot),1],st.av(rc,rc,ut)):(rc=[at,ot,0,1],qe(rc,rc,ut));const sc=rc[3];return{point:new st.P(rc[0]/sc,rc[1]/sc),signedDistanceFromCamera:sc,isOccluded:!1}}function Re(at,st){return.5+at/st*.5}function ze(at,st){return at.x>=-st[0]&&at.x<=st[0]&&at.y>=-st[1]&&at.y<=st[1]}function De(at,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu){const cu=ut?at.textSizeData:at.iconSizeData,uu=st.am(cu,ot.transform.zoom),pu=[256/ot.width*2+1,256/ot.height*2+1],mu=ut?at.text.dynamicLayoutVertexArray:at.icon.dynamicLayoutVertexArray;mu.clear();const gu=at.lineVertexArray,Au=ut?at.text.placedSymbolArray:at.icon.placedSymbolArray,yu=ot.transform.width/ot.transform.height;let _u=!1;for(let xu=0;xu<Au.length;xu++){const ut=Au.get(xu);if(ut.hidden||ut.writingMode===st.an.vertical&&!_u){$e(ut.numGlyphs,mu);continue}_u=!1;const Su=new st.P(ut.anchorX,ut.anchorY),Du={getElevation:lu,pitchedLabelPlaneMatrix:Hl,lineVertexArray:gu,pitchWithMap:sc,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:ot.transform,tileAnchorPoint:Su,unwrappedTileID:wc,width:Sc,height:iu,translation:su},Lu=Ne(ut.anchorX,ut.anchorY,Du);if(!ze(Lu.point,pu)){$e(ut.numGlyphs,mu);continue}const $u=Re(ot.transform.cameraToCenterDistance,Lu.signedDistanceFromCamera),hh=st.ao(cu,uu,ut),ed=sc?hh*ot.transform.getPitchedTextCorrection(ut.anchorX,ut.anchorY,wc)/$u:hh*$u,td=ke({projectionContext:Du,pitchedLabelPlaneMatrixInverse:rc,symbol:ut,fontSize:ed,flip:!1,keepUpright:oc,glyphOffsetArray:at.glyphOffsetArray,dynamicLayoutVertexArray:mu,aspectRatio:yu,rotateToLine:_c});_u=td.useVertical,(td.notEnoughRoom||_u||td.needsFlipping&&ke({projectionContext:Du,pitchedLabelPlaneMatrixInverse:rc,symbol:ut,fontSize:ed,flip:!0,keepUpright:oc,glyphOffsetArray:at.glyphOffsetArray,dynamicLayoutVertexArray:mu,aspectRatio:yu,rotateToLine:_c}).notEnoughRoom)&&$e(ut.numGlyphs,mu)}ut?at.text.dynamicLayoutVertexBuffer.updateData(mu):at.icon.dynamicLayoutVertexBuffer.updateData(mu)}function Ae(at,st,ot,ut,Hl,rc,sc,oc){const _c=rc.glyphStartIndex+rc.numGlyphs,wc=rc.lineStartIndex,Sc=rc.lineStartIndex+rc.lineLength,iu=st.getoffsetX(rc.glyphStartIndex),su=st.getoffsetX(_c-1),lu=Ge(at*iu,ot,ut,Hl,rc.segment,wc,Sc,oc,sc);if(!lu)return null;const cu=Ge(at*su,ot,ut,Hl,rc.segment,wc,Sc,oc,sc);return cu?oc.projectionCache.anyProjectionOccluded?null:{first:lu,last:cu}:null}function Le(at,ot,ut,Hl){return at===st.an.horizontal&&Math.abs(ut.y-ot.y)>Math.abs(ut.x-ot.x)*Hl?{useVertical:!0}:(at===st.an.vertical?ot.y<ut.y:ot.x>ut.x)?{needsFlipping:!0}:null}function ke(at){const{projectionContext:ot,pitchedLabelPlaneMatrixInverse:ut,symbol:Hl,fontSize:rc,flip:sc,keepUpright:oc,glyphOffsetArray:_c,dynamicLayoutVertexArray:wc,aspectRatio:Sc,rotateToLine:iu}=at,su=rc/24,lu=Hl.lineOffsetX*su,cu=Hl.lineOffsetY*su;let uu;if(Hl.numGlyphs>1){const at=Hl.glyphStartIndex+Hl.numGlyphs,st=Hl.lineStartIndex,rc=Hl.lineStartIndex+Hl.lineLength,wc=Ae(su,_c,lu,cu,sc,Hl,iu,ot);if(!wc)return{notEnoughRoom:!0};const pu=je(wc.first.point.x,wc.first.point.y,ot,ut),mu=je(wc.last.point.x,wc.last.point.y,ot,ut);if(oc&&!sc){const at=Le(Hl.writingMode,pu,mu,Sc);if(at)return at}uu=[wc.first];for(let ut=Hl.glyphStartIndex+1;ut<at-1;ut++){const at=Ge(su*_c.getoffsetX(ut),lu,cu,sc,Hl.segment,st,rc,ot,iu);if(!at)return{notEnoughRoom:!0};uu.push(at)}uu.push(wc.last)}else{if(oc&&!sc){const at=Oe(ot.tileAnchorPoint.x,ot.tileAnchorPoint.y,ot).point,rc=Hl.lineStartIndex+Hl.segment+1,sc=new st.P(ot.lineVertexArray.getx(rc),ot.lineVertexArray.gety(rc)),oc=Oe(sc.x,sc.y,ot),_c=oc.signedDistanceFromCamera>0?oc.point:Fe(ot.tileAnchorPoint,sc,at,1,ot),wc=je(at.x,at.y,ot,ut),iu=je(_c.x,_c.y,ot,ut),su=Le(Hl.writingMode,wc,iu,Sc);if(su)return su}const at=Ge(su*_c.getoffsetX(Hl.glyphStartIndex),lu,cu,sc,Hl.segment,Hl.lineStartIndex,Hl.lineStartIndex+Hl.lineLength,ot,iu);if(!at||ot.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};uu=[at]}for(const pu of uu)st.au(wc,pu.point,pu.angle);return{}}function Fe(at,st,ot,ut,Hl){const rc=at.add(at.sub(st)._unit()),sc=Oe(rc.x,rc.y,Hl).point,oc=ot.sub(sc);return ot.add(oc._mult(ut/oc.mag()))}function Be(at,ot,ut){const Hl=ot.projectionCache;if(Hl.projections[at])return Hl.projections[at];const rc=new st.P(ot.lineVertexArray.getx(at),ot.lineVertexArray.gety(at)),sc=Oe(rc.x,rc.y,ot);if(sc.signedDistanceFromCamera>0)return Hl.projections[at]=sc.point,Hl.anyProjectionOccluded=Hl.anyProjectionOccluded||sc.isOccluded,sc.point;const oc=at-ut.direction;return Fe(0===ut.distanceFromAnchor?ot.tileAnchorPoint:new st.P(ot.lineVertexArray.getx(oc),ot.lineVertexArray.gety(oc)),rc,ut.previousVertex,ut.absOffsetX-ut.distanceFromAnchor+1,ot)}function Oe(at,st,ot){const ut=at+ot.translation[0],Hl=st+ot.translation[1];let rc;return ot.pitchWithMap?(rc=Ee(ut,Hl,ot.pitchedLabelPlaneMatrix,ot.getElevation),rc.isOccluded=!1):(rc=ot.transform.projectTileCoordinates(ut,Hl,ot.unwrappedTileID,ot.getElevation),rc.point.x=(.5*rc.point.x+.5)*ot.width,rc.point.y=(.5*-rc.point.y+.5)*ot.height),rc}function je(at,ot,ut,Hl){if(ut.pitchWithMap){const rc=[at,ot,0,1];return st.av(rc,rc,Hl),ut.transform.projectTileCoordinates(rc[0]/rc[3],rc[1]/rc[3],ut.unwrappedTileID,ut.getElevation).point}return{x:at/ut.width*2-1,y:ot/ut.height*2-1}}function Ne(at,st,ot){return ot.transform.projectTileCoordinates(at,st,ot.unwrappedTileID,ot.getElevation)}function Ze(at,st,ot){return at._unit()._perp()._mult(st*ot)}function Ue(at,ot,ut,Hl,rc,sc,oc,_c,wc){if(_c.projectionCache.offsets[at])return _c.projectionCache.offsets[at];const Sc=ut.add(ot);if(at+wc.direction<Hl||at+wc.direction>=rc)return _c.projectionCache.offsets[at]=Sc,Sc;const iu=Be(at+wc.direction,_c,wc),su=Ze(iu.sub(ut),oc,wc.direction),lu=ut.add(su),cu=iu.add(su);return _c.projectionCache.offsets[at]=st.aw(sc,Sc,lu,cu)||Sc,_c.projectionCache.offsets[at]}function Ge(at,st,ot,ut,Hl,rc,sc,oc,_c){const wc=ut?at-st:at+st;let Sc=wc>0?1:-1,iu=0;ut&&(Sc*=-1,iu=Math.PI),Sc<0&&(iu+=Math.PI);let su,lu=Sc>0?rc+Hl:rc+Hl+1;oc.projectionCache.cachedAnchorPoint?su=oc.projectionCache.cachedAnchorPoint:(su=Oe(oc.tileAnchorPoint.x,oc.tileAnchorPoint.y,oc).point,oc.projectionCache.cachedAnchorPoint=su);let cu,uu,pu=su,mu=su,gu=0,Au=0;const yu=Math.abs(wc),_u=[];let xu;for(;gu+Au<=yu;){if(lu+=Sc,lu<rc||lu>=sc)return null;gu+=Au,mu=pu,uu=cu;const at={absOffsetX:yu,direction:Sc,distanceFromAnchor:gu,previousVertex:mu};if(pu=Be(lu,oc,at),0===ot)_u.push(mu),xu=pu.sub(mu);else{let st;const ut=pu.sub(mu);st=0===ut.mag()?Ze(Be(lu+Sc,oc,at).sub(pu),ot,Sc):Ze(ut,ot,Sc),uu||(uu=mu.add(st)),cu=Ue(lu,st,pu,rc,sc,uu,ot,oc,at),_u.push(uu),xu=cu.sub(uu)}Au=xu.mag()}const Su=xu._mult((yu-gu)/Au)._add(uu||mu),Du=iu+Math.atan2(pu.y-mu.y,pu.x-mu.x);return _u.push(Su),{point:Su,angle:_c?Du:0,path:_u}}const Lu=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function $e(at,st){for(let ot=0;ot<at;ot++){const at=st.length;st.resize(at+4),st.float32.set(Lu,3*at)}}function qe(at,st,ot){const ut=st[0],Hl=st[1];return at[0]=ot[0]*ut+ot[4]*Hl+ot[12],at[1]=ot[1]*ut+ot[5]*Hl+ot[13],at[3]=ot[3]*ut+ot[7]*Hl+ot[15],at}const $u=100;class He{constructor(at,st=new Ce(at.width+200,at.height+200,25),ot=new Ce(at.width+200,at.height+200,25)){this.transform=at,this.grid=st,this.ignoredGrid=ot,this.pitchFactor=Math.cos(at.pitch*Math.PI/180)*at.cameraToCenterDistance,this.screenRightBoundary=at.width+$u,this.screenBottomBoundary=at.height+$u,this.gridRightBoundary=at.width+200,this.gridBottomBoundary=at.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu){const su=this.projectAndGetPerspectiveRatio(at.anchorPointX+oc[0],at.anchorPointY+oc[1],Hl,wc,iu),lu=ot*su.perspectiveRatio;let cu;if(rc||sc)cu=this._projectCollisionBox(at,lu,ut,Hl,rc,sc,oc,su,wc,Sc,iu);else{const st=su.x+(Sc?Sc.x*lu:0),ot=su.y+(Sc?Sc.y*lu:0);cu={allPointsOccluded:!1,box:[st+at.x1*lu,ot+at.y1*lu,st+at.x2*lu,ot+at.y2*lu]}}const[uu,pu,mu,gu]=cu.box,Au=rc?cu.allPointsOccluded:su.isOccluded;let yu=Au;return yu||(yu=su.perspectiveRatio<this.perspectiveRatioCutoff),yu||(yu=!this.isInsideGrid(uu,pu,mu,gu)),yu||"always"!==st&&this.grid.hitTest(uu,pu,mu,gu,st,_c)?{box:[uu,pu,mu,gu],placeable:!1,offscreen:!1,occluded:Au}:{box:[uu,pu,mu,gu],placeable:!0,offscreen:this.isOffscreen(uu,pu,mu,gu),occluded:Au}}placeCollisionCircles(at,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu){const uu=[],pu=new st.P(ot.anchorX,ot.anchorY),mu=this.getPerspectiveRatio(pu.x,pu.y,sc,cu),gu=(wc?rc*this.transform.getPitchedTextCorrection(ot.anchorX,ot.anchorY,sc)/mu:rc*mu)/st.aA,Au={getElevation:cu,pitchedLabelPlaneMatrix:oc,lineVertexArray:ut,pitchWithMap:wc,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:pu,unwrappedTileID:sc,width:this.transform.width,height:this.transform.height,translation:lu},yu=Ae(gu,Hl,ot.lineOffsetX*gu,ot.lineOffsetY*gu,!1,ot,!1,Au);let _u=!1,xu=!1,Su=!0;if(yu){const ot=.5*iu*mu+su,ut=new st.P(-100,-100),Hl=new st.P(this.screenRightBoundary,this.screenBottomBoundary),rc=new Te,sc=yu.first,oc=yu.last;let lu=[];for(let at=sc.path.length-1;at>=1;at--)lu.push(sc.path[at]);for(let at=1;at<oc.path.length;at++)lu.push(oc.path[at]);const cu=2.5*ot;if(wc){const at=this.projectPathToScreenSpace(lu,Au);lu=at.some((at=>at.signedDistanceFromCamera<=0))?[]:at.map((at=>at.point))}let pu=[];if(lu.length>0){const at=lu[0].clone(),ot=lu[0].clone();for(let st=1;st<lu.length;st++)at.x=Math.min(at.x,lu[st].x),at.y=Math.min(at.y,lu[st].y),ot.x=Math.max(ot.x,lu[st].x),ot.y=Math.max(ot.y,lu[st].y);pu=at.x>=ut.x&&ot.x<=Hl.x&&at.y>=ut.y&&ot.y<=Hl.y?[lu]:ot.x<ut.x||at.x>Hl.x||ot.y<ut.y||at.y>Hl.y?[]:st.ax([lu],ut.x,ut.y,Hl.x,Hl.y)}for(const st of pu){rc.reset(st,.25*ot);let ut=0;ut=rc.length<=.5*ot?1:Math.ceil(rc.paddedLength/cu)+1;for(let st=0;st<ut;st++){const Hl=st/Math.max(ut-1,1),sc=rc.lerp(Hl),oc=sc.x+$u,wc=sc.y+$u;uu.push(oc,wc,ot,0);const iu=oc-ot,su=wc-ot,lu=oc+ot,cu=wc+ot;if(Su=Su&&this.isOffscreen(iu,su,lu,cu),xu=xu||this.isInsideGrid(iu,su,lu,cu),"always"!==at&&this.grid.hitTestCircle(oc,wc,ot,at,Sc)&&(_u=!0,!_c))return{circles:[],offscreen:!1,collisionDetected:_u}}}}return{circles:!_c&&_u||!xu||mu<this.perspectiveRatioCutoff?[]:uu,offscreen:Su,collisionDetected:_u}}projectPathToScreenSpace(at,ot){const ut=function(at,ot){const ut=st.L();return st.ap(ut,ot.pitchedLabelPlaneMatrix),at.map((at=>{const st=Ee(at.x,at.y,ut,ot.getElevation),Hl=ot.transform.projectTileCoordinates(st.point.x,st.point.y,ot.unwrappedTileID,ot.getElevation);return Hl.point.x=(.5*Hl.point.x+.5)*ot.width,Hl.point.y=(.5*-Hl.point.y+.5)*ot.height,Hl}))}(at,ot);return function(at){let st=0,ot=0,ut=0,Hl=0;for(let rc=0;rc<at.length;rc++)at[rc].isOccluded?(ut=rc+1,Hl=0):(Hl++,Hl>ot&&(ot=Hl,st=ut));return at.slice(st,st+ot)}(ut)}queryRenderedSymbols(at){if(0===at.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return{};const ot=[],ut=new st.a1;for(const iu of at){const at=new st.P(iu.x+$u,iu.y+$u);ut.extend(at),ot.push(at)}const{minX:Hl,minY:rc,maxX:sc,maxY:oc}=ut,_c=this.grid.query(Hl,rc,sc,oc).concat(this.ignoredGrid.query(Hl,rc,sc,oc)),wc={},Sc={};for(const iu of _c){const at=iu.key;if(void 0===wc[at.bucketInstanceId]&&(wc[at.bucketInstanceId]={}),wc[at.bucketInstanceId][at.featureIndex])continue;const ut=[new st.P(iu.x1,iu.y1),new st.P(iu.x2,iu.y1),new st.P(iu.x2,iu.y2),new st.P(iu.x1,iu.y2)];st.ay(ot,ut)&&(wc[at.bucketInstanceId][at.featureIndex]=!0,void 0===Sc[at.bucketInstanceId]&&(Sc[at.bucketInstanceId]=[]),Sc[at.bucketInstanceId].push(at.featureIndex))}return Sc}insertCollisionBox(at,st,ot,ut,Hl,rc){(ot?this.ignoredGrid:this.grid).insert({bucketInstanceId:ut,featureIndex:Hl,collisionGroupID:rc,overlapMode:st},at[0],at[1],at[2],at[3])}insertCollisionCircles(at,st,ot,ut,Hl,rc){const sc=ot?this.ignoredGrid:this.grid,oc={bucketInstanceId:ut,featureIndex:Hl,collisionGroupID:rc,overlapMode:st};for(let _c=0;_c<at.length;_c+=4)sc.insertCircle(oc,at[_c],at[_c+1],at[_c+2])}projectAndGetPerspectiveRatio(at,ot,ut,Hl,rc){if(rc){let ut;Hl?(ut=[at,ot,Hl(at,ot),1],st.av(ut,ut,rc)):(ut=[at,ot,0,1],qe(ut,ut,rc));const sc=ut[3];return{x:(ut[0]/sc+1)/2*this.transform.width+$u,y:(-ut[1]/sc+1)/2*this.transform.height+$u,perspectiveRatio:.5+this.transform.cameraToCenterDistance/sc*.5,isOccluded:!1,signedDistanceFromCamera:sc}}{const st=this.transform.projectTileCoordinates(at,ot,ut,Hl);return{x:(st.point.x+1)/2*this.transform.width+$u,y:(1-st.point.y)/2*this.transform.height+$u,perspectiveRatio:.5+this.transform.cameraToCenterDistance/st.signedDistanceFromCamera*.5,isOccluded:st.isOccluded,signedDistanceFromCamera:st.signedDistanceFromCamera}}}getPerspectiveRatio(at,st,ot,ut){const Hl=this.transform.projectTileCoordinates(at,st,ot,ut);return.5+this.transform.cameraToCenterDistance/Hl.signedDistanceFromCamera*.5}isOffscreen(at,st,ot,ut){return ot<$u||at>=this.screenRightBoundary||ut<$u||st>this.screenBottomBoundary}isInsideGrid(at,st,ot,ut){return ot>=0&&at<this.gridRightBoundary&&ut>=0&&st<this.gridBottomBoundary}getViewportMatrix(){const at=st.af([]);return st.M(at,at,[-100,-100,0]),at}_projectCollisionBox(at,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu){let su=1,lu=0,cu=0,uu=1;const pu=at.anchorPointX+oc[0],mu=at.anchorPointY+oc[1];if(sc&&!rc){const at=this.projectAndGetPerspectiveRatio(pu+1,mu,Hl,wc,iu),st=at.x-_c.x,ot=Math.atan((at.y-_c.y)/st)+(st<0?Math.PI:0),ut=Math.sin(ot),rc=Math.cos(ot);su=rc,lu=ut,cu=-ut,uu=rc}else if(!sc&&rc){const at=Se(this.transform);su=at.vecEast[0],lu=at.vecEast[1],cu=at.vecSouth[0],uu=at.vecSouth[1]}let gu=_c.x,Au=_c.y,yu=ot;rc&&(gu=pu,Au=mu,yu=Math.pow(2,-(this.transform.zoom-ut.overscaledZ)),yu*=this.transform.getPitchedTextCorrection(pu,mu,Hl),Sc||(yu*=st.ag(.5+_c.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),Sc&&(gu+=su*Sc.x*yu+cu*Sc.y*yu,Au+=lu*Sc.x*yu+uu*Sc.y*yu);const _u=at.x1*yu,xu=at.x2*yu,Su=(_u+xu)/2,Du=at.y1*yu,Lu=at.y2*yu,$u=(Du+Lu)/2,hh=[{offsetX:_u,offsetY:Du},{offsetX:Su,offsetY:Du},{offsetX:xu,offsetY:Du},{offsetX:xu,offsetY:$u},{offsetX:xu,offsetY:Lu},{offsetX:Su,offsetY:Lu},{offsetX:_u,offsetY:Lu},{offsetX:_u,offsetY:$u}];let ed=[];for(const{offsetX:id,offsetY:nd}of hh)ed.push(new st.P(gu+su*id+cu*nd,Au+lu*id+uu*nd));let td=!1;if(rc){const at=ed.map((at=>this.projectAndGetPerspectiveRatio(at.x,at.y,Hl,wc,iu)));td=at.some((at=>!at.isOccluded)),ed=at.map((at=>new st.P(at.x,at.y)))}else td=!0;return{box:st.az(ed),allPointsOccluded:!td}}}class Xe{constructor(at,st,ot,ut){this.opacity=at?Math.max(0,Math.min(1,at.opacity+(at.placed?st:-st))):ut&&ot?1:0,this.placed=ot}isHidden(){return 0===this.opacity&&!this.placed}}class Ke{constructor(at,st,ot,ut,Hl){this.text=new Xe(at?at.text:null,st,ot,Hl),this.icon=new Xe(at?at.icon:null,st,ut,Hl)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ye{constructor(at,st,ot){this.text=at,this.icon=st,this.skipFade=ot}}class Qe{constructor(at,st,ot,ut,Hl){this.bucketInstanceId=at,this.featureIndex=st,this.sourceLayerIndex=ot,this.bucketIndex=ut,this.tileID=Hl}}class Je{constructor(at){this.crossSourceCollisions=at,this.maxGroupID=0,this.collisionGroups={}}get(at){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[at]){const st=++this.maxGroupID;this.collisionGroups[at]={ID:st,predicate:at=>at.collisionGroupID===st}}return this.collisionGroups[at]}}function et(at,ot,ut,Hl,rc){const{horizontalAlign:sc,verticalAlign:oc}=st.aG(at);return new st.P(-(sc-.5)*ot+Hl[0]*rc,-(oc-.5)*ut+Hl[1]*rc)}class tt{constructor(at,st,ot,ut,Hl){this.transform=at.clone(),this.terrain=st,this.collisionIndex=new He(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=ot,this.retainedQueryData={},this.collisionGroups=new Je(ut),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=Hl,Hl&&(Hl.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(at){const st=this.terrain;return st?(ot,ut)=>st.getElevation(at,ot,ut):null}getBucketParts(at,ot,ut,Hl){const rc=ut.getBucket(ot),sc=ut.latestFeatureIndex;if(!rc||!sc||ot.id!==rc.layerIds[0])return;const oc=ut.collisionBoxArray,_c=rc.layers[0].layout,wc=rc.layers[0].paint,Sc=Math.pow(2,this.transform.zoom-ut.tileID.overscaledZ),iu=ut.tileSize/st.$,su=ut.tileID.toUnwrapped(),lu="map"===_c.get("text-rotation-alignment"),cu=st.aB(ut,1,this.transform.zoom),uu=st.aC(this.collisionIndex.transform,ut,wc.get("text-translate"),wc.get("text-translate-anchor")),pu=st.aC(this.collisionIndex.transform,ut,wc.get("icon-translate"),wc.get("icon-translate-anchor")),mu=Ie(lu,this.transform,cu);this.retainedQueryData[rc.bucketInstanceId]=new Qe(rc.bucketInstanceId,sc,rc.sourceLayerIndex,rc.index,ut.tileID);const gu={bucket:rc,layout:_c,translationText:uu,translationIcon:pu,unwrappedTileID:su,pitchedLabelPlaneMatrix:mu,scale:Sc,textPixelRatio:iu,holdingForFade:ut.holdingForFade(),collisionBoxArray:oc,partiallyEvaluatedTextSize:st.am(rc.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(rc.sourceID)};if(Hl)for(const st of rc.sortKeyRanges){const{sortKey:ot,symbolInstanceStart:ut,symbolInstanceEnd:Hl}=st;at.push({sortKey:ot,symbolInstanceStart:ut,symbolInstanceEnd:Hl,parameters:gu})}else at.push({symbolInstanceStart:0,symbolInstanceEnd:rc.symbolInstances.length,parameters:gu})}attemptAnchorPlacement(at,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu,pu,mu,gu,Au,yu){const _u=st.aD[at.textAnchor],xu=[at.textOffset0,at.textOffset1],Su=et(_u,ut,Hl,xu,rc),Du=this.collisionIndex.placeCollisionBox(ot,su,_c,wc,Sc,oc,sc,pu,iu.predicate,Au,Su,yu);if((!gu||this.collisionIndex.placeCollisionBox(gu,su,_c,wc,Sc,oc,sc,mu,iu.predicate,Au,Su,yu).placeable)&&Du.placeable){let at;if(this.prevPlacement&&this.prevPlacement.variableOffsets[lu.crossTileID]&&this.prevPlacement.placements[lu.crossTileID]&&this.prevPlacement.placements[lu.crossTileID].text&&(at=this.prevPlacement.variableOffsets[lu.crossTileID].anchor),0===lu.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[lu.crossTileID]={textOffset:xu,width:ut,height:Hl,anchor:_u,textBoxScale:rc,prevAnchor:at},this.markUsedJustification(cu,_u,lu,uu),cu.allowVerticalPlacement&&(this.markUsedOrientation(cu,uu,lu),this.placedOrientations[lu.crossTileID]=uu),{shift:Su,placedGlyphBoxes:Du}}}placeLayerBucketPart(at,ot,ut){const{bucket:Hl,layout:rc,translationText:sc,translationIcon:oc,unwrappedTileID:_c,pitchedLabelPlaneMatrix:wc,textPixelRatio:Sc,holdingForFade:iu,collisionBoxArray:su,partiallyEvaluatedTextSize:lu,collisionGroup:cu}=at.parameters,uu=rc.get("text-optional"),pu=rc.get("icon-optional"),mu=st.aE(rc,"text-overlap","text-allow-overlap"),gu="always"===mu,Au=st.aE(rc,"icon-overlap","icon-allow-overlap"),yu="always"===Au,_u="map"===rc.get("text-rotation-alignment"),xu="map"===rc.get("text-pitch-alignment"),Su="none"!==rc.get("icon-text-fit"),Du="viewport-y"===rc.get("symbol-z-order"),Lu=gu&&(yu||!Hl.hasIconData()||pu),$u=yu&&(gu||!Hl.hasTextData()||uu);!Hl.collisionArrays&&su&&Hl.deserializeCollisionBoxes(su);const hh=this.retainedQueryData[Hl.bucketInstanceId].tileID,ed=this._getTerrainElevationFunc(hh),td=this.transform.getFastPathSimpleProjectionMatrix(hh),R=(at,su,yu)=>{var Du,id;if(ot[at.crossTileID])return;if(iu)return void(this.placements[at.crossTileID]=new Ye(!1,!1,!1));let nd=!1,rd=!1,ad=!0,sd=null,od={box:null,placeable:!1,offscreen:null,occluded:!1},ld={placeable:!1},cd=null,ud=null,hd=null,dd=0,pd=0,md=0;su.textFeatureIndex?dd=su.textFeatureIndex:at.useRuntimeCollisionCircles&&(dd=at.featureIndex),su.verticalTextFeatureIndex&&(pd=su.verticalTextFeatureIndex);const gd=su.textBox;if(gd){const i=ot=>{let ut=st.an.horizontal;if(Hl.allowVerticalPlacement&&!ot&&this.prevPlacement){const st=this.prevPlacement.placedOrientations[at.crossTileID];st&&(this.placedOrientations[at.crossTileID]=st,ut=st,this.markUsedOrientation(Hl,ut,at))}return ut},a=(ot,ut)=>{if(Hl.allowVerticalPlacement&&at.numVerticalGlyphVertices>0&&su.verticalTextBox){for(const at of Hl.writingModes)if(at===st.an.vertical?(od=ut(),ld=od):od=ot(),od&&od.placeable)break}else od=ot()},ot=at.textAnchorOffsetStartIndex,rc=at.textAnchorOffsetEndIndex;if(rc===ot){const o=(st,ot)=>{const ut=this.collisionIndex.placeCollisionBox(st,mu,Sc,hh,_c,xu,_u,sc,cu.predicate,ed,void 0,td);return ut&&ut.placeable&&(this.markUsedOrientation(Hl,ot,at),this.placedOrientations[at.crossTileID]=ot),ut};a((()=>o(gd,st.an.horizontal)),(()=>{const ot=su.verticalTextBox;return Hl.allowVerticalPlacement&&at.numVerticalGlyphVertices>0&&ot?o(ot,st.an.vertical):{box:null,offscreen:null}})),i(od&&od.placeable)}else{let wc=st.aD[null===(id=null===(Du=this.prevPlacement)||void 0===Du?void 0:Du.variableOffsets[at.crossTileID])||void 0===id?void 0:id.anchor];const m=(st,iu,su)=>{const lu=st.x2-st.x1,uu=st.y2-st.y1,pu=at.textBoxScale,gu=Su&&"never"===Au?iu:null;let yu=null,Du="never"===mu?1:2,Lu="never";wc&&Du++;for(let ut=0;ut<Du;ut++){for(let ut=ot;ut<rc;ut++){const ot=Hl.textAnchorOffsets.get(ut);if(wc&&ot.textAnchor!==wc)continue;const rc=this.attemptAnchorPlacement(ot,st,lu,uu,pu,_u,xu,Sc,hh,_c,cu,Lu,at,Hl,su,sc,oc,gu,ed);if(rc&&(yu=rc.placedGlyphBoxes,yu&&yu.placeable))return nd=!0,sd=rc.shift,yu}wc?wc=null:Lu=mu}return ut&&!yu&&(yu={box:this.collisionIndex.placeCollisionBox(gd,"always",Sc,hh,_c,xu,_u,sc,cu.predicate,ed,void 0,td).box,offscreen:!1,placeable:!1,occluded:!1}),yu};a((()=>m(gd,su.iconBox,st.an.horizontal)),(()=>{const ot=su.verticalTextBox;return Hl.allowVerticalPlacement&&(!od||!od.placeable)&&at.numVerticalGlyphVertices>0&&ot?m(ot,su.verticalIconBox,st.an.vertical):{box:null,occluded:!0,offscreen:null}})),od&&(nd=od.placeable,ad=od.offscreen);const iu=i(od&&od.placeable);if(!nd&&this.prevPlacement){const st=this.prevPlacement.variableOffsets[at.crossTileID];st&&(this.variableOffsets[at.crossTileID]=st,this.markUsedJustification(Hl,st.anchor,at,iu))}}}if(cd=od,nd=cd&&cd.placeable,ad=cd&&cd.offscreen,at.useRuntimeCollisionCircles){const ot=Hl.text.placedSymbolArray.get(at.centerJustifiedTextSymbolIndex),oc=st.ao(Hl.textSizeData,lu,ot),Sc=rc.get("text-padding");ud=this.collisionIndex.placeCollisionCircles(mu,ot,Hl.lineVertexArray,Hl.glyphOffsetArray,oc,_c,wc,ut,xu,cu.predicate,at.collisionCircleDiameter,Sc,sc,ed),ud.circles.length&&ud.collisionDetected&&!ut&&st.w("Collisions detected, but collision boxes are not shown"),nd=gu||ud.circles.length>0&&!ud.collisionDetected,ad=ad&&ud.offscreen}if(su.iconFeatureIndex&&(md=su.iconFeatureIndex),su.iconBox){const e=at=>this.collisionIndex.placeCollisionBox(at,Au,Sc,hh,_c,xu,_u,oc,cu.predicate,ed,Su&&sd?sd:void 0,td);ld&&ld.placeable&&su.verticalIconBox?(hd=e(su.verticalIconBox),rd=hd.placeable):(hd=e(su.iconBox),rd=hd.placeable),ad=ad&&hd.offscreen}const fd=uu||0===at.numHorizontalGlyphVertices&&0===at.numVerticalGlyphVertices,Ad=pu||0===at.numIconVertices;fd||Ad?Ad?fd||(rd=rd&&nd):nd=rd&&nd:rd=nd=rd&&nd;const yd=rd&&hd.placeable;if(nd&&cd.placeable&&this.collisionIndex.insertCollisionBox(cd.box,mu,rc.get("text-ignore-placement"),Hl.bucketInstanceId,ld&&ld.placeable&&pd?pd:dd,cu.ID),yd&&this.collisionIndex.insertCollisionBox(hd.box,Au,rc.get("icon-ignore-placement"),Hl.bucketInstanceId,md,cu.ID),ud&&nd&&this.collisionIndex.insertCollisionCircles(ud.circles,mu,rc.get("text-ignore-placement"),Hl.bucketInstanceId,dd,cu.ID),ut&&this.storeCollisionData(Hl.bucketInstanceId,yu,su,cd,hd,ud),0===at.crossTileID)throw new Error("symbolInstance.crossTileID can't be 0");if(0===Hl.bucketInstanceId)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[at.crossTileID]=new Ye((nd||Lu)&&!(null==cd?void 0:cd.occluded),(rd||$u)&&!(null==hd?void 0:hd.occluded),ad||Hl.justReloaded),ot[at.crossTileID]=!0};if(Du){if(0!==at.symbolInstanceStart)throw new Error("bucket.bucketInstanceId should be 0");const st=Hl.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let at=st.length-1;at>=0;--at){const ot=st[at];R(Hl.symbolInstances.get(ot),Hl.collisionArrays[ot],ot)}}else for(let st=at.symbolInstanceStart;st<at.symbolInstanceEnd;st++)R(Hl.symbolInstances.get(st),Hl.collisionArrays[st],st);Hl.justReloaded=!1}storeCollisionData(at,st,ot,ut,Hl,rc){if(ot.textBox||ot.iconBox){let rc,sc;this.collisionBoxArrays.has(at)?rc=this.collisionBoxArrays.get(at):(rc=new Map,this.collisionBoxArrays.set(at,rc)),rc.has(st)?sc=rc.get(st):(sc={text:null,icon:null},rc.set(st,sc)),ot.textBox&&(sc.text=ut.box),ot.iconBox&&(sc.icon=Hl.box)}if(rc){let st=this.collisionCircleArrays[at];void 0===st&&(st=this.collisionCircleArrays[at]=[]);for(let at=0;at<rc.circles.length;at+=4)st.push(rc.circles[at+0]-$u),st.push(rc.circles[at+1]-$u),st.push(rc.circles[at+2]),st.push(rc.collisionDetected?1:0)}}markUsedJustification(at,ot,ut,Hl){let rc;rc=Hl===st.an.vertical?ut.verticalPlacedTextSymbolIndex:{left:ut.leftJustifiedTextSymbolIndex,center:ut.centerJustifiedTextSymbolIndex,right:ut.rightJustifiedTextSymbolIndex}[st.aF(ot)];const sc=[ut.leftJustifiedTextSymbolIndex,ut.centerJustifiedTextSymbolIndex,ut.rightJustifiedTextSymbolIndex,ut.verticalPlacedTextSymbolIndex];for(const st of sc)st>=0&&(at.text.placedSymbolArray.get(st).crossTileID=rc>=0&&st!==rc?0:ut.crossTileID)}markUsedOrientation(at,ot,ut){const Hl=ot===st.an.horizontal||ot===st.an.horizontalOnly?ot:0,rc=ot===st.an.vertical?ot:0,sc=[ut.leftJustifiedTextSymbolIndex,ut.centerJustifiedTextSymbolIndex,ut.rightJustifiedTextSymbolIndex];for(const st of sc)at.text.placedSymbolArray.get(st).placedOrientation=Hl;ut.verticalPlacedTextSymbolIndex&&(at.text.placedSymbolArray.get(ut.verticalPlacedTextSymbolIndex).placedOrientation=rc)}commit(at){this.commitTime=at,this.zoomAtLastRecencyCheck=this.transform.zoom;const st=this.prevPlacement;let ot=!1;this.prevZoomAdjustment=st?st.zoomAdjustment(this.transform.zoom):0;const ut=st?st.symbolFadeChange(at):1,Hl=st?st.opacities:{},rc=st?st.variableOffsets:{},sc=st?st.placedOrientations:{};for(const oc in this.placements){const at=this.placements[oc],st=Hl[oc];st?(this.opacities[oc]=new Ke(st,ut,at.text,at.icon),ot=ot||at.text!==st.text.placed||at.icon!==st.icon.placed):(this.opacities[oc]=new Ke(null,ut,at.text,at.icon,at.skipFade),ot=ot||at.text||at.icon)}for(const oc in Hl){const at=Hl[oc];if(!this.opacities[oc]){const st=new Ke(at,ut,!1,!1);st.isHidden()||(this.opacities[oc]=st,ot=ot||at.text.placed||at.icon.placed)}}for(const oc in rc)this.variableOffsets[oc]||!this.opacities[oc]||this.opacities[oc].isHidden()||(this.variableOffsets[oc]=rc[oc]);for(const oc in sc)this.placedOrientations[oc]||!this.opacities[oc]||this.opacities[oc].isHidden()||(this.placedOrientations[oc]=sc[oc]);if(st&&void 0===st.lastPlacementChangeTime)throw new Error("Last placement time for previous placement is not defined");ot?this.lastPlacementChangeTime=at:"number"!=typeof this.lastPlacementChangeTime&&(this.lastPlacementChangeTime=st?st.lastPlacementChangeTime:at)}updateLayerOpacities(at,st){const ot={};for(const ut of st){const st=ut.getBucket(at);st&&ut.latestFeatureIndex&&at.id===st.layerIds[0]&&this.updateBucketOpacities(st,ut.tileID,ot,ut.collisionBoxArray)}}updateBucketOpacities(at,ot,ut,Hl){at.hasTextData()&&(at.text.opacityVertexArray.clear(),at.text.hasVisibleVertices=!1),at.hasIconData()&&(at.icon.opacityVertexArray.clear(),at.icon.hasVisibleVertices=!1),at.hasIconCollisionBoxData()&&at.iconCollisionBox.collisionVertexArray.clear(),at.hasTextCollisionBoxData()&&at.textCollisionBox.collisionVertexArray.clear();const rc=at.layers[0],sc=rc.layout,oc=new Ke(null,0,!1,!1,!0),_c=sc.get("text-allow-overlap"),wc=sc.get("icon-allow-overlap"),Sc=rc._unevaluatedLayout.hasValue("text-variable-anchor")||rc._unevaluatedLayout.hasValue("text-variable-anchor-offset"),iu="map"===sc.get("text-rotation-alignment"),su="map"===sc.get("text-pitch-alignment"),lu="none"!==sc.get("icon-text-fit"),cu=new Ke(null,0,_c&&(wc||!at.hasIconData()||sc.get("icon-optional")),wc&&(_c||!at.hasTextData()||sc.get("text-optional")),!0);!at.collisionArrays&&Hl&&(at.hasIconCollisionBoxData()||at.hasTextCollisionBoxData())&&at.deserializeCollisionBoxes(Hl);const m=(at,st,ot)=>{for(let ut=0;ut<st/4;ut++)at.opacityVertexArray.emplaceBack(ot);at.hasVisibleVertices=at.hasVisibleVertices||ot!==sd},uu=this.collisionBoxArrays.get(at.bucketInstanceId);for(let pu=0;pu<at.symbolInstances.length;pu++){const ot=at.symbolInstances.get(pu),{numHorizontalGlyphVertices:Hl,numVerticalGlyphVertices:rc,crossTileID:sc}=ot;let _c=this.opacities[sc];ut[sc]?_c=oc:_c||(_c=cu,this.opacities[sc]=_c),ut[sc]=!0;const wc=ot.numIconVertices>0,mu=this.placedOrientations[ot.crossTileID],gu=mu===st.an.vertical,Au=mu===st.an.horizontal||mu===st.an.horizontalOnly;if(Hl>0||rc>0){const st=ht(_c.text);m(at.text,Hl,gu?sd:st),m(at.text,rc,Au?sd:st);const ut=_c.text.isHidden();[ot.rightJustifiedTextSymbolIndex,ot.centerJustifiedTextSymbolIndex,ot.leftJustifiedTextSymbolIndex].forEach((st=>{st>=0&&(at.text.placedSymbolArray.get(st).hidden=ut||gu?1:0)})),ot.verticalPlacedTextSymbolIndex>=0&&(at.text.placedSymbolArray.get(ot.verticalPlacedTextSymbolIndex).hidden=ut||Au?1:0);const sc=this.variableOffsets[ot.crossTileID];sc&&this.markUsedJustification(at,sc.anchor,ot,mu);const oc=this.placedOrientations[ot.crossTileID];oc&&(this.markUsedJustification(at,"left",ot,oc),this.markUsedOrientation(at,oc,ot))}if(wc){const st=ht(_c.icon),ut=!(lu&&ot.verticalPlacedIconSymbolIndex&&gu);ot.placedIconSymbolIndex>=0&&(m(at.icon,ot.numIconVertices,ut?st:sd),at.icon.placedSymbolArray.get(ot.placedIconSymbolIndex).hidden=_c.icon.isHidden()),ot.verticalPlacedIconSymbolIndex>=0&&(m(at.icon,ot.numVerticalIconVertices,ut?sd:st),at.icon.placedSymbolArray.get(ot.verticalPlacedIconSymbolIndex).hidden=_c.icon.isHidden())}const yu=uu&&uu.has(pu)?uu.get(pu):{text:null,icon:null};if(at.hasIconCollisionBoxData()||at.hasTextCollisionBoxData()){const ot=at.collisionArrays[pu];if(ot){let ut=new st.P(0,0);if(ot.textBox||ot.verticalTextBox){let st=!0;if(Sc){const at=this.variableOffsets[sc];at?(ut=et(at.anchor,at.width,at.height,at.textOffset,at.textBoxScale),iu&&ut._rotate(su?-this.transform.bearingInRadians:this.transform.bearingInRadians)):st=!1}if(ot.textBox||ot.verticalTextBox){let Hl;ot.textBox&&(Hl=gu),ot.verticalTextBox&&(Hl=Au),it(at.textCollisionBox.collisionVertexArray,_c.text.placed,!st||Hl,yu.text,ut.x,ut.y)}}if(ot.iconBox||ot.verticalIconBox){const st=Boolean(!Au&&ot.verticalIconBox);let Hl;ot.iconBox&&(Hl=st),ot.verticalIconBox&&(Hl=!st),it(at.iconCollisionBox.collisionVertexArray,_c.icon.placed,Hl,yu.icon,lu?ut.x:0,lu?ut.y:0)}}}}if(at.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[at.bucketInstanceId]&&(this.retainedQueryData[at.bucketInstanceId].featureSortOrder=at.featureSortOrder),at.hasTextData()&&at.text.opacityVertexBuffer&&at.text.opacityVertexBuffer.updateData(at.text.opacityVertexArray),at.hasIconData()&&at.icon.opacityVertexBuffer&&at.icon.opacityVertexBuffer.updateData(at.icon.opacityVertexArray),at.hasIconCollisionBoxData()&&at.iconCollisionBox.collisionVertexBuffer&&at.iconCollisionBox.collisionVertexBuffer.updateData(at.iconCollisionBox.collisionVertexArray),at.hasTextCollisionBoxData()&&at.textCollisionBox.collisionVertexBuffer&&at.textCollisionBox.collisionVertexBuffer.updateData(at.textCollisionBox.collisionVertexArray),at.text.opacityVertexArray.length!==at.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${at.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${at.text.layoutVertexArray.length}) / 4`);if(at.icon.opacityVertexArray.length!==at.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${at.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${at.icon.layoutVertexArray.length}) / 4`);at.bucketInstanceId in this.collisionCircleArrays&&(at.collisionCircleArray=this.collisionCircleArrays[at.bucketInstanceId],delete this.collisionCircleArrays[at.bucketInstanceId])}symbolFadeChange(at){return 0===this.fadeDuration?1:(at-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(at){return Math.max(0,(this.transform.zoom-at)/1.5)}hasTransitions(at){return this.stale||at-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(at,st){const ot=this.zoomAtLastRecencyCheck===st?1-this.zoomAdjustment(st):1;return this.zoomAtLastRecencyCheck=st,this.commitTime+this.fadeDuration*ot>at}setStale(){this.stale=!0}}function it(at,st,ot,ut,Hl,rc){ut&&0!==ut.length||(ut=[0,0,0,0]);const sc=ut[0]-$u,oc=ut[1]-$u,_c=ut[2]-$u,wc=ut[3]-$u;at.emplaceBack(st?1:0,ot?1:0,Hl||0,rc||0,sc,oc),at.emplaceBack(st?1:0,ot?1:0,Hl||0,rc||0,_c,oc),at.emplaceBack(st?1:0,ot?1:0,Hl||0,rc||0,_c,wc),at.emplaceBack(st?1:0,ot?1:0,Hl||0,rc||0,sc,wc)}const hh=Math.pow(2,25),ed=Math.pow(2,24),td=Math.pow(2,17),id=Math.pow(2,16),nd=Math.pow(2,9),rd=Math.pow(2,8),ad=Math.pow(2,1);function ht(at){if(0===at.opacity&&!at.placed)return 0;if(1===at.opacity&&at.placed)return 4294967295;const st=at.placed?1:0,ot=Math.floor(127*at.opacity);return ot*hh+st*ed+ot*td+st*id+ot*nd+st*rd+ot*ad+st}const sd=0;class dt{constructor(at){this._sortAcrossTiles="viewport-y"!==at.layout.get("symbol-z-order")&&!at.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(at,st,ot,ut,Hl){const rc=this._bucketParts;for(;this._currentTileIndex<at.length;)if(st.getBucketParts(rc,ut,at[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,Hl())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,rc.sort(((at,st)=>at.sortKey-st.sortKey)));this._currentPartIndex<rc.length;)if(st.placeLayerBucketPart(rc[this._currentPartIndex],this._seenCrossTileIDs,ot),this._currentPartIndex++,Hl())return!0;return!1}}class _t{constructor(at,st,ot,ut,Hl,rc,sc,oc){this.placement=new tt(at,st,rc,sc,oc),this._currentPlacementIndex=ot.length-1,this._forceFullPlacement=ut,this._showCollisionBoxes=Hl,this._done=!1}isDone(){return this._done}continuePlacement(at,st,ot){const ut=rc.now(),r=()=>!this._forceFullPlacement&&rc.now()-ut>2;for(;this._currentPlacementIndex>=0;){const ut=st[at[this._currentPlacementIndex]],Hl=this.placement.collisionIndex.transform.zoom;if("symbol"===ut.type&&(!ut.minzoom||ut.minzoom<=Hl)&&(!ut.maxzoom||ut.maxzoom>Hl)){if(this._inProgressLayer||(this._inProgressLayer=new dt(ut)),this._inProgressLayer.continuePlacement(ot[ut.source],this.placement,this._showCollisionBoxes,ut,r))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(at){return this.placement.commit(at),this.placement}}const od=512/st.$/2;class mt{constructor(at,ot,ut){this.tileID=at,this.bucketInstanceId=ut,this._symbolsByKey={};const Hl=new Map;for(let st=0;st<ot.length;st++){const at=ot.get(st),ut=at.key,rc=Hl.get(ut);rc?rc.push(at):Hl.set(ut,[at])}for(const[rc,sc]of Hl){const at={positions:sc.map((at=>({x:Math.floor(at.anchorX*od),y:Math.floor(at.anchorY*od)}))),crossTileIDs:sc.map((at=>at.crossTileID))};if(at.positions.length>128){const ot=new st.aH(at.positions.length,16,Uint16Array);for(const{x:st,y:ut}of at.positions)ot.add(st,ut);ot.finish(),delete at.positions,at.index=ot}this._symbolsByKey[rc]=at}}getScaledCoordinates(at,ot){const{x:ut,y:Hl,z:rc}=this.tileID.canonical,{x:sc,y:oc,z:_c}=ot.canonical,wc=od/Math.pow(2,_c-rc),Sc=(oc*st.$+at.anchorY)*wc,iu=Hl*st.$*od;return{x:Math.floor((sc*st.$+at.anchorX)*wc-ut*st.$*od),y:Math.floor(Sc-iu)}}findMatches(at,st,ot){const ut=this.tileID.canonical.z<st.canonical.z?1:Math.pow(2,this.tileID.canonical.z-st.canonical.z);for(let Hl=0;Hl<at.length;Hl++){const rc=at.get(Hl);if(rc.crossTileID)continue;const sc=this._symbolsByKey[rc.key];if(!sc)continue;const oc=this.getScaledCoordinates(rc,st);if(sc.index){const at=sc.index.range(oc.x-ut,oc.y-ut,oc.x+ut,oc.y+ut).sort();for(const st of at){const at=sc.crossTileIDs[st];if(!ot[at]){ot[at]=!0,rc.crossTileID=at;break}}}else if(sc.positions)for(let at=0;at<sc.positions.length;at++){const st=sc.positions[at],Hl=sc.crossTileIDs[at];if(Math.abs(st.x-oc.x)<=ut&&Math.abs(st.y-oc.y)<=ut&&!ot[Hl]){ot[Hl]=!0,rc.crossTileID=Hl;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:at})=>at))}}class ft{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class gt{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(at){const st=Math.round((at-this.lng)/360);if(0!==st)for(const ot in this.indexes){const at=this.indexes[ot],ut={};for(const ot in at){const Hl=at[ot];Hl.tileID=Hl.tileID.unwrapTo(Hl.tileID.wrap+st),ut[Hl.tileID.key]=Hl}this.indexes[ot]=ut}this.lng=at}addBucket(at,st,ot){if(this.indexes[at.overscaledZ]&&this.indexes[at.overscaledZ][at.key]){if(this.indexes[at.overscaledZ][at.key].bucketInstanceId===st.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(at.overscaledZ,this.indexes[at.overscaledZ][at.key])}for(let Hl=0;Hl<st.symbolInstances.length;Hl++)st.symbolInstances.get(Hl).crossTileID=0;this.usedCrossTileIDs[at.overscaledZ]||(this.usedCrossTileIDs[at.overscaledZ]={});const ut=this.usedCrossTileIDs[at.overscaledZ];for(const Hl in this.indexes){const ot=this.indexes[Hl];if(Number(Hl)>at.overscaledZ)for(const Hl in ot){const rc=ot[Hl];rc.tileID.isChildOf(at)&&rc.findMatches(st.symbolInstances,at,ut)}else{const rc=ot[at.scaledTo(Number(Hl)).key];rc&&rc.findMatches(st.symbolInstances,at,ut)}}for(let Hl=0;Hl<st.symbolInstances.length;Hl++){const at=st.symbolInstances.get(Hl);at.crossTileID||(at.crossTileID=ot.generate(),ut[at.crossTileID]=!0)}return void 0===this.indexes[at.overscaledZ]&&(this.indexes[at.overscaledZ]={}),this.indexes[at.overscaledZ][at.key]=new mt(at,st.symbolInstances,st.bucketInstanceId),!0}removeBucketCrossTileIDs(at,st){for(const ot of st.getCrossTileIDsLists())for(const st of ot)delete this.usedCrossTileIDs[at][st]}removeStaleBuckets(at){let st=!1;for(const ot in this.indexes){const ut=this.indexes[ot];for(const Hl in ut)at[ut[Hl].bucketInstanceId]||(this.removeBucketCrossTileIDs(ot,ut[Hl]),delete ut[Hl],st=!0)}return st}}class vt{constructor(){this.layerIndexes={},this.crossTileIDs=new ft,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(at,st,ot){let ut=this.layerIndexes[at.id];void 0===ut&&(ut=this.layerIndexes[at.id]=new gt);let Hl=!1;const rc={};ut.handleWrapJump(ot);for(const sc of st){const st=sc.getBucket(at);st&&at.id===st.layerIds[0]&&(st.bucketInstanceId||(st.bucketInstanceId=++this.maxBucketInstanceId),ut.addBucket(sc.tileID,st,this.crossTileIDs)&&(Hl=!0),rc[st.bucketInstanceId]=!0)}return ut.removeStaleBuckets(rc)&&(Hl=!0),Hl}pruneUnusedLayers(at){const st={};at.forEach((at=>{st[at]=!0}));for(const ot in this.layerIndexes)st[ot]||delete this.layerIndexes[ot]}}var ld="void main() {fragColor=vec4(1.0);}";const cd={prelude:yt("#ifdef GL_ES\nprecision mediump float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nout highp vec4 fragColor;","#ifdef GL_ES\nprecision highp float;\n#else\n#if !defined(lowp)\n#define lowp\n#endif\n#if !defined(mediump)\n#define mediump\n#endif\n#if !defined(highp)\n#define highp\n#endif\n#endif\nvec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0\n);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c\n);}\n#ifdef TERRAIN3D\nuniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;\n#endif\nconst highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {\n#ifdef TERRAIN3D\nhighp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));\n#else\nreturn 1.0;\n#endif\n}float calculate_visibility(vec4 pos) {\n#ifdef TERRAIN3D\nvec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;\n#else\nreturn 1.0;\n#endif\n}float ele(vec2 pos) {\n#ifdef TERRAIN3D\nvec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;\n#else\nreturn 0.0;\n#endif\n}float get_elevation(vec2 pos) {\n#ifdef TERRAIN3D\n#ifdef GLOBE\nif ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}\n#endif\nvec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;\n#else\nreturn 0.0;\n#endif\n}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;"),projectionMercator:yt("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:yt("","#define GLOBE_RADIUS 6371008.8\nuniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos\n);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); \nif (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len\n);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}"),background:yt("uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:yt("uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:yt("in vec3 v_data;in float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\nvoid main(void) {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize mediump float radius\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize highp vec4 stroke_color\n#pragma mapbox: initialize mediump float stroke_width\n#pragma mapbox: initialize lowp float stroke_opacity\nvec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {\n#ifdef GLOBE\nvec3 center_vector=projectToSphere(circle_center);\n#endif\nfloat angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {\n#ifdef GLOBE\nvec4 projected_center=interpolateProjection(circle_center,center_vector,ele);\n#else\nvec4 projected_center=projectTileWithElevation(circle_center,ele);\n#endif\ncorner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}\n#ifdef GLOBE\nvec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);\n#else\ngl_Position=projectTileWithElevation(corner_position,ele);\n#endif\n} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}"),clippingMask:yt(ld,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:yt("uniform highp float u_intensity;in vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#define GAUSS_COEF 0.3989422804014327\nvoid main() {\n#pragma mapbox: initialize highp float weight\nfloat d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;\n#pragma mapbox: define highp float weight\n#pragma mapbox: define mediump float radius\nconst highp float ZERO=1.0/255.0/16.0;\n#define GAUSS_COEF 0.3989422804014327\nvoid main(void) {\n#pragma mapbox: initialize highp float weight\n#pragma mapbox: initialize mediump float radius\nvec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);\n#ifdef GLOBE\nvec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);\n#else\ngl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));\n#endif\n}"),heatmapTexture:yt("uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(0.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:yt("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:yt("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:yt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(textureSize(u_elevation_stops,0)[0]);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int num_elevation_stops=textureSize(u_elevation_stops,0)[0];int r=(num_elevation_stops-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else\n{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(textureSize(u_color_stops,0)[0]);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:yt("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:yt(ld,"in vec2 a_pos;void main() {\n#ifdef GLOBE\ngl_Position=projectTileFor3D(a_pos,0.0);\n#else\ngl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);\n#endif\n}"),fill:yt("#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\nfragColor=color*opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_fill_translate;in vec2 a_pos;\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=projectTile(a_pos+u_fill_translate,a_pos);}"),fillOutline:yt("in vec2 v_pos;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 outline_color\n#pragma mapbox: initialize lowp float opacity\ngl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n}"),fillOutlinePattern:yt("uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n}"),fillPattern:yt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}"),fillExtrusion:yt("in vec4 v_color;void main() {fragColor=v_color;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;\n#ifdef TERRAIN3D\nin vec2 a_centroid;\n#endif\nout vec4 v_color;\n#pragma mapbox: define highp float base\n#pragma mapbox: define highp float height\n#pragma mapbox: define highp vec4 color\nvoid main() {\n#pragma mapbox: initialize highp float base\n#pragma mapbox: initialize highp float height\n#pragma mapbox: initialize highp vec4 color\nvec3 normal=a_normal_ed.xyz;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;\n#ifdef GLOBE\nvec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);\n#else\ngl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);\n#endif\nfloat colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);\n#ifdef GLOBE\nmat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);\n#endif\ndirectional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}"),fillExtrusionPattern:yt("uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;\n#ifdef TERRAIN3D\nin vec2 a_centroid;\n#endif\n#ifdef GLOBE\nout vec3 v_sphere_pos;\n#endif\nout vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float base\n#pragma mapbox: initialize lowp float height\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;\n#ifdef TERRAIN3D\nfloat height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);\n#else\nfloat height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;\n#endif\nbase=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;\n#ifdef GLOBE\nvec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);\n#else\ngl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);\n#endif\nvec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0\n? a_pos\n: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}"),hillshadePrepare:yt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:yt("uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];\n#define PI 3.141592653589793\n#define STANDARD 0\n#define COMBINED 1\n#define IGOR 2\n#define MULTIDIRECTIONAL 3\n#define BASIC 4\nfloat get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else\n{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else\n{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;switch(u_method){case BASIC:\nbasic_hillshade(deriv);break;case COMBINED:\ncombined_hillshade(deriv);break;case IGOR:\nigor_hillshade(deriv);break;case MULTIDIRECTIONAL:\nmultidirectional_hillshade(deriv);break;case STANDARD:\ndefault:\nstandard_hillshade(deriv);break;}\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:yt("uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nin vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),lineGradient:yt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\nin vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_width2=vec2(outset,inset);}"),linePattern:yt("#ifdef GL_ES\nprecision highp float;\n#endif\nuniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\nvec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nin vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n#pragma mapbox: define lowp vec4 pattern_from\n#pragma mapbox: define lowp vec4 pattern_to\n#pragma mapbox: define lowp float pixel_ratio_from\n#pragma mapbox: define lowp float pixel_ratio_to\nvoid main() {\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\n#pragma mapbox: initialize mediump vec4 pattern_from\n#pragma mapbox: initialize mediump vec4 pattern_to\n#pragma mapbox: initialize lowp float pixel_ratio_from\n#pragma mapbox: initialize lowp float pixel_ratio_to\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}"),lineSDF:yt("uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;\n#ifdef GLOBE\nin float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);\n#ifdef GLOBE\nif (v_depth > 1.0) {discard;}\n#endif\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","\n#define scale 0.015873016\n#define LINE_DISTANCE_SCALE 2.0\nin vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;\n#ifdef GLOBE\nout float v_depth;\n#endif\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\nvoid main() {\n#pragma mapbox: initialize highp vec4 color\n#pragma mapbox: initialize lowp float blur\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize mediump float gapwidth\n#pragma mapbox: initialize lowp float offset\n#pragma mapbox: initialize mediump float width\n#pragma mapbox: initialize lowp float floorwidth\nfloat ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;\n#ifdef GLOBE\nv_depth=gl_Position.z/gl_Position.w;\n#endif\n#ifdef TERRAIN3D\nv_gamma_scale=1.0;\n#else\nfloat extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;\n#endif\nv_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}"),raster:yt("uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;\n#ifdef GLOBE\nif (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}\n#endif\nv_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),symbolIcon:yt("uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nlowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;\n#pragma mapbox: define lowp float opacity\nvoid main() {\n#pragma mapbox: initialize lowp float opacity\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;\n#ifdef GLOBE\nif(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}\n#endif\nvec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}"),symbolSDF:yt("#define SDF_PX 8.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;\n#ifdef GLOBE\nif(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}\n#endif\nvec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}"),symbolTextAndIcon:yt("#define SDF_PX 8.0\n#define SDF 1.0\n#define ICON 0.0\nuniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nfloat fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\nreturn;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);\n#ifdef OVERDRAW_INSPECTOR\nfragColor=vec4(1.0);\n#endif\n}","in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\nvoid main() {\n#pragma mapbox: initialize highp vec4 fill_color\n#pragma mapbox: initialize highp vec4 halo_color\n#pragma mapbox: initialize lowp float opacity\n#pragma mapbox: initialize lowp float halo_width\n#pragma mapbox: initialize lowp float halo_blur\nvec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?\ncamera_to_anchor_distance/u_camera_to_center_distance :\nu_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;\n#ifdef GLOBE\nif(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}\n#endif\nvec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}"),terrain:yt("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:yt("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:yt("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:yt("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:yt("in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758\n);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}","in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:yt("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function yt(at,st){const ot=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,ut=st.match(/in ([\w]+) ([\w]+)/g),Hl=at.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),rc=st.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),sc=rc?rc.concat(Hl):Hl,oc={};return{fragmentSource:at=at.replace(ot,((at,st,ot,ut,Hl)=>(oc[Hl]=!0,"define"===st?`\n#ifndef HAS_UNIFORM_u_${Hl}\nin ${ot} ${ut} ${Hl};\n#else\nuniform ${ot} ${ut} u_${Hl};\n#endif\n`:`\n#ifdef HAS_UNIFORM_u_${Hl}\n    ${ot} ${ut} ${Hl} = u_${Hl};\n#endif\n`))),vertexSource:st=st.replace(ot,((at,st,ot,ut,Hl)=>{const rc="float"===ut?"vec2":"vec4",sc=Hl.match(/color/)?"color":rc;return oc[Hl]?"define"===st?`\n#ifndef HAS_UNIFORM_u_${Hl}\nuniform lowp float u_${Hl}_t;\nin ${ot} ${rc} a_${Hl};\nout ${ot} ${ut} ${Hl};\n#else\nuniform ${ot} ${ut} u_${Hl};\n#endif\n`:"vec4"===sc?`\n#ifndef HAS_UNIFORM_u_${Hl}\n    ${Hl} = a_${Hl};\n#else\n    ${ot} ${ut} ${Hl} = u_${Hl};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${Hl}\n    ${Hl} = unpack_mix_${sc}(a_${Hl}, u_${Hl}_t);\n#else\n    ${ot} ${ut} ${Hl} = u_${Hl};\n#endif\n`:"define"===st?`\n#ifndef HAS_UNIFORM_u_${Hl}\nuniform lowp float u_${Hl}_t;\nin ${ot} ${rc} a_${Hl};\n#else\nuniform ${ot} ${ut} u_${Hl};\n#endif\n`:"vec4"===sc?`\n#ifndef HAS_UNIFORM_u_${Hl}\n    ${ot} ${ut} ${Hl} = a_${Hl};\n#else\n    ${ot} ${ut} ${Hl} = u_${Hl};\n#endif\n`:`\n#ifndef HAS_UNIFORM_u_${Hl}\n    ${ot} ${ut} ${Hl} = unpack_mix_${sc}(a_${Hl}, u_${Hl}_t);\n#else\n    ${ot} ${ut} ${Hl} = u_${Hl};\n#endif\n`})),staticAttributes:ut,staticUniforms:sc}}class wt{constructor(at,st,ot){this.vertexBuffer=at,this.indexBuffer=st,this.segments=ot}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var ud=st.aI([{name:"a_pos",type:"Int16",components:2}]);const hd="#define PROJECTION_MERCATOR",dd="mercator";class It{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return dd}get shaderDefine(){return hd}get shaderPreludeCode(){return cd.projectionMercator}get vertexShaderPreludeCode(){return cd.projectionMercator.vertexSource}get subdivisionGranularity(){return st.aJ.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(at){}getMeshFromTileID(at,ot,ut,Hl,rc){if(this._cachedMesh)return this._cachedMesh;const sc=new st.aK;sc.emplaceBack(0,0),sc.emplaceBack(st.$,0),sc.emplaceBack(0,st.$),sc.emplaceBack(st.$,st.$);const oc=at.createVertexBuffer(sc,ud.members),_c=st.aL.simpleSegment(0,0,4,2),wc=new st.aM;wc.emplaceBack(1,0,2),wc.emplaceBack(1,2,3);const Sc=at.createIndexBuffer(wc);return this._cachedMesh=new wt(oc,Sc,_c),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(at){}}class Mt{constructor(at=0,st=0,ot=0,ut=0){if(isNaN(at)||at<0||isNaN(st)||st<0||isNaN(ot)||ot<0||isNaN(ut)||ut<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=at,this.bottom=st,this.left=ot,this.right=ut}interpolate(at,ot,ut){return null!=ot.top&&null!=at.top&&(this.top=st.C.number(at.top,ot.top,ut)),null!=ot.bottom&&null!=at.bottom&&(this.bottom=st.C.number(at.bottom,ot.bottom,ut)),null!=ot.left&&null!=at.left&&(this.left=st.C.number(at.left,ot.left,ut)),null!=ot.right&&null!=at.right&&(this.right=st.C.number(at.right,ot.right,ut)),this}getCenter(at,ot){const ut=st.ag((this.left+at-this.right)/2,0,at),Hl=st.ag((this.top+ot-this.bottom)/2,0,ot);return new st.P(ut,Hl)}equals(at){return this.top===at.top&&this.bottom===at.bottom&&this.left===at.left&&this.right===at.right}clone(){return new Mt(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function St(at,st){if(!at.renderWorldCopies||at.lngRange)return;const ot=st.lng-at.center.lng;st.lng+=ot>180?-360:ot<-180?360:0}function Et(at){return Math.max(0,Math.floor(at))}class Rt{constructor(at,ot,ut,Hl,rc,sc){this._callbacks=at,this._tileSize=512,this._renderWorldCopies=void 0===sc||!!sc,this._minZoom=ot||0,this._maxZoom=ut||22,this._minPitch=null==Hl?0:Hl,this._maxPitch=null==rc?60:rc,this.setMaxBounds(),this._width=0,this._height=0,this._center=new st.S(0,0),this._elevation=0,this._zoom=0,this._tileZoom=Et(this._zoom),this._scale=st.ae(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Mt,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(at,ot,ut){this._latRange=at.latRange,this._lngRange=at.lngRange,this._width=at.width,this._height=at.height,this._center=at.center,this._elevation=at.elevation,this._minElevationForCurrentTile=at.minElevationForCurrentTile,this._zoom=at.zoom,this._tileZoom=Et(this._zoom),this._scale=st.ae(this._zoom),this._bearingInRadians=at.bearingInRadians,this._fovInRadians=at.fovInRadians,this._pitchInRadians=at.pitchInRadians,this._rollInRadians=at.rollInRadians,this._unmodified=at.unmodified,this._edgeInsets=new Mt(at.padding.top,at.padding.bottom,at.padding.left,at.padding.right),this._minZoom=at.minZoom,this._maxZoom=at.maxZoom,this._minPitch=at.minPitch,this._maxPitch=at.maxPitch,this._renderWorldCopies=at.renderWorldCopies,this._cameraToCenterDistance=at.cameraToCenterDistance,this._nearZ=at.nearZ,this._farZ=at.farZ,this._autoCalculateNearFarZ=!ut&&at.autoCalculateNearFarZ,ot&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(at){this._minElevationForCurrentTile=at}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(at){this._minZoom!==at&&(this._minZoom=at,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(at){this._maxZoom!==at&&(this._maxZoom=at,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(at){this._minPitch!==at&&(this._minPitch=at,this.setPitch(Math.max(this.pitch,at)))}get maxPitch(){return this._maxPitch}setMaxPitch(at){this._maxPitch!==at&&(this._maxPitch=at,this.setPitch(Math.min(this.pitch,at)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(at){void 0===at?at=!0:null===at&&(at=!1),this._renderWorldCopies=at}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new st.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(at){const ot=st.aN(at,-180,180)*Math.PI/180;var ut,Hl,rc,sc,oc,_c,wc,Sc,iu;this._bearingInRadians!==ot&&(this._unmodified=!1,this._bearingInRadians=ot,this._calcMatrices(),this._rotationMatrix=o(),ut=this._rotationMatrix,rc=-this._bearingInRadians,sc=(Hl=this._rotationMatrix)[0],oc=Hl[1],_c=Hl[2],wc=Hl[3],Sc=Math.sin(rc),iu=Math.cos(rc),ut[0]=sc*iu+_c*Sc,ut[1]=oc*iu+wc*Sc,ut[2]=sc*-Sc+_c*iu,ut[3]=oc*-Sc+wc*iu)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(at){const ot=st.ag(at,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==ot&&(this._unmodified=!1,this._pitchInRadians=ot,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(at){const st=at/180*Math.PI;this._rollInRadians!==st&&(this._unmodified=!1,this._rollInRadians=st,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return st.aO(this._fovInRadians)}setFov(at){at=st.ag(at,.1,150),this.fov!==at&&(this._unmodified=!1,this._fovInRadians=st.ad(at),this._calcMatrices())}get zoom(){return this._zoom}setZoom(at){const ot=this.getConstrained(this._center,at).zoom;this._zoom!==ot&&(this._unmodified=!1,this._zoom=ot,this._tileZoom=Math.max(0,Math.floor(ot)),this._scale=st.ae(ot),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(at){at.lat===this._center.lat&&at.lng===this._center.lng||(this._unmodified=!1,this._center=at,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(at){at!==this._elevation&&(this._elevation=at,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(at){this._edgeInsets.equals(at)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,at,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(at,st){this._autoCalculateNearFarZ=!1,this._nearZ=at,this._farZ=st,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(at){return this._edgeInsets.equals(at)}interpolatePadding(at,st,ot){this._unmodified=!1,this._edgeInsets.interpolate(at,st,ot),this._constrain(),this._calcMatrices()}resize(at,st,ot=!0){this._width=at,this._height=st,ot&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&2===this._latRange.length&&this._lngRange&&2===this._lngRange.length?new G([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(at){at?(this._lngRange=[at.getWest(),at.getEast()],this._latRange=[at.getSouth(),at.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,st.ah])}getConstrained(at,st){return this._callbacks.getConstrained(at,st)}getCameraQueryGeometry(at,ot){if(1===ot.length)return[ot[0],at];{const{minX:ut,minY:Hl,maxX:rc,maxY:sc}=st.a1.fromPoints(ot).extend(at);return[new st.P(ut,Hl),new st.P(rc,Hl),new st.P(rc,sc),new st.P(ut,sc),new st.P(ut,Hl)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const at=this._unmodified,{center:st,zoom:ot}=this.getConstrained(this.center,this.zoom);this.setCenter(st),this.setZoom(ot),this._unmodified=at,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let at=st.af(new Float64Array(16));st.N(at,at,[this._width/2,-this._height/2,1]),st.M(at,at,[1,-1,0]),this._clipSpaceToPixelsMatrix=at,at=st.af(new Float64Array(16)),st.N(at,at,[1,-1,1]),st.M(at,at,[-1,-1,0]),st.N(at,at,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=at,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(at,ot,ut,Hl){const rc=void 0!==ut?ut:this.bearing,sc=Hl=void 0!==Hl?Hl:this.pitch,oc=st.a0.fromLngLat(at,ot),_c=-Math.cos(st.ad(sc)),wc=Math.sin(st.ad(sc)),Sc=wc*Math.sin(st.ad(rc)),iu=-wc*Math.cos(st.ad(rc));let su=this.elevation;const lu=ot-su;let cu;_c*lu>=0||Math.abs(_c)<.1?(cu=1e4,su=ot+cu*_c):cu=-lu/_c;let uu,pu,mu=st.aP(1,oc.y),gu=0;do{if(gu+=1,gu>10)break;pu=cu/mu,uu=new st.a0(oc.x+Sc*pu,oc.y+iu*pu),mu=1/uu.meterInMercatorCoordinateUnits()}while(Math.abs(cu-pu*mu)>1e-12);return{center:uu.toLngLat(),elevation:su,zoom:st.aj(this.height/2/Math.tan(this.fovInRadians/2)/pu/this.tileSize)}}recalculateZoomAndCenter(at){if(this.elevation-at==0)return;const ot=st.ai(1,this.center.lat)*this.worldSize,ut=this.cameraToCenterDistance/ot,Hl=st.a0.fromLngLat(this.center,this.elevation),rc=de(this.center,this.elevation,this.pitch,this.bearing,ut);this._elevation=at;const sc=this.calculateCenterFromCameraLngLatAlt(rc.toLngLat(),st.aP(rc.z,Hl.y),this.bearing,this.pitch);this._elevation=sc.elevation,this._center=sc.center,this.setZoom(sc.zoom)}getCameraPoint(){const at=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new st.P(at*Math.sin(this.rollInRadians),at*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const at=st.ai(1,this.center.lat)*this.worldSize;return de(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/at).toLngLat()}getMercatorTileCoordinates(at){if(!at)return[0,0,1,1];const ot=at.canonical.z>=0?1<<at.canonical.z:Math.pow(2,at.canonical.z);return[at.canonical.x/ot,at.canonical.y/ot,1/ot/st.$,1/ot/st.$]}}class zt{constructor(at,ot){this.min=at,this.max=ot,this.center=st.aQ([],st.aR([],this.min,this.max),.5)}quadrant(at){const ot=[at%2==0,at<2],ut=st.aS(this.min),Hl=st.aS(this.max);for(let st=0;st<ot.length;st++)ut[st]=ot[st]?this.min[st]:this.center[st],Hl[st]=ot[st]?this.center[st]:this.max[st];return Hl[2]=this.max[2],new zt(ut,Hl)}distanceX(at){return Math.max(Math.min(this.max[0],at[0]),this.min[0])-at[0]}distanceY(at){return Math.max(Math.min(this.max[1],at[1]),this.min[1])-at[1]}intersectsFrustum(at){let st=!0;for(let ot=0;ot<at.planes.length;ot++){const ut=this.intersectsPlane(at.planes[ot]);if(0===ut)return 0;1===ut&&(st=!1)}return st?2:at.aabb.min[0]>this.max[0]||at.aabb.min[1]>this.max[1]||at.aabb.min[2]>this.max[2]||at.aabb.max[0]<this.min[0]||at.aabb.max[1]<this.min[1]||at.aabb.max[2]<this.min[2]?0:1}intersectsPlane(at){let st=at[3],ot=at[3];for(let ut=0;ut<3;ut++)at[ut]>0?(st+=at[ut]*this.min[ut],ot+=at[ut]*this.max[ut]):(ot+=at[ut]*this.min[ut],st+=at[ut]*this.max[ut]);return st>=0?2:ot<0?0:1}}class Dt{distanceToTile2d(at,st,ot,ut){const Hl=ut.distanceX([at,st]),rc=ut.distanceY([at,st]);return Math.hypot(Hl,rc)}getWrap(at,st,ot){return ot}getTileBoundingVolume(at,ot,ut,Hl){var rc,sc;let oc=ut,_c=ut;if(null==Hl?void 0:Hl.terrain){const wc=new st.Z(at.z,ot,at.z,at.x,at.y),Sc=Hl.terrain.getMinMaxElevation(wc);oc=null!==(rc=Sc.minElevation)&&void 0!==rc?rc:ut,_c=null!==(sc=Sc.maxElevation)&&void 0!==sc?sc:ut}const wc=1<<at.z;return new zt([ot+at.x/wc,at.y/wc,oc],[ot+(at.x+1)/wc,(at.y+1)/wc,_c])}allowVariableZoom(at,ot){const ut=at.fov*(Math.abs(Math.cos(at.rollInRadians))*at.height+Math.abs(Math.sin(at.rollInRadians))*at.width)/at.height,Hl=st.ag(78.5-ut/2,0,60);return!!ot.terrain||at.pitch>Hl}allowWorldCopies(){return!0}prepareNextFrame(){}}class At{constructor(at,st,ot){this.points=at,this.planes=st,this.aabb=ot}static fromInvProjectionMatrix(at,ot=1,ut=0,Hl,rc){const sc=rc?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],oc=Math.pow(2,ut),_c=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((ut=>function(at,ot,ut,Hl){const rc=st.av([],at,ot),sc=1/rc[3]/ut*Hl;return st.aX(rc,rc,[sc,sc,1/rc[3],sc])}(ut,at,ot,oc)));Hl&&function(at,ot,ut,Hl){const rc=Hl?4:0,sc=Hl?0:4;let oc=0;const _c=[],wc=[];for(let su=0;su<4;su++){const ot=st.aT([],at[su+sc],at[su+rc]),ut=st.aY(ot);st.aQ(ot,ot,1/ut),_c.push(ut),wc.push(ot)}for(let su=0;su<4;su++){const ot=st.aZ(at[su+rc],wc[su],ut);oc=null!==ot&&ot>=0?Math.max(oc,ot):Math.max(oc,_c[su])}const Sc=function(at,ot){const ut=st.aT([],at[ot[0]],at[ot[1]]),Hl=st.aT([],at[ot[2]],at[ot[1]]),rc=[0,0,0,0];return st.aU(rc,st.aV([],ut,Hl)),rc[3]=-st.aW(rc,at[ot[0]]),rc}(at,ot),iu=function(at,ot){const ut=st.a_(at),Hl=st.a$([],at,1/ut),rc=st.aT([],ot,st.aQ([],Hl,st.aW(ot,Hl))),sc=st.a_(rc);if(sc>0){const at=Math.sqrt(1-Hl[3]*Hl[3]),ut=st.aQ([],Hl,-Hl[3]),oc=st.aR([],ut,st.aQ([],rc,at/sc));return st.b0(ot,oc)}return null}(ut,Sc);if(null!==iu){const at=iu/st.aW(wc[0],Sc);oc=Math.min(oc,at)}for(let st=0;st<4;st++){const ot=Math.min(oc,_c[st]);at[st+sc]=[at[st+rc][0]+wc[st][0]*ot,at[st+rc][1]+wc[st][1]*ot,at[st+rc][2]+wc[st][2]*ot,1]}}(_c,sc[0],Hl,rc);const wc=sc.map((at=>{const ot=st.aT([],_c[at[0]],_c[at[1]]),ut=st.aT([],_c[at[2]],_c[at[1]]),Hl=st.aU([],st.aV([],ot,ut)),rc=-st.aW(Hl,_c[at[1]]);return Hl.concat(rc)})),Sc=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],iu=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const st of _c)for(let at=0;at<3;at++)Sc[at]=Math.min(Sc[at],st[at]),iu[at]=Math.max(iu[at],st[at]);return new At(_c,wc,new zt(Sc,iu))}}class Lt{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(at){this._helper.setMinZoom(at)}setMaxZoom(at){this._helper.setMaxZoom(at)}setMinPitch(at){this._helper.setMinPitch(at)}setMaxPitch(at){this._helper.setMaxPitch(at)}setRenderWorldCopies(at){this._helper.setRenderWorldCopies(at)}setBearing(at){this._helper.setBearing(at)}setPitch(at){this._helper.setPitch(at)}setRoll(at){this._helper.setRoll(at)}setFov(at){this._helper.setFov(at)}setZoom(at){this._helper.setZoom(at)}setCenter(at){this._helper.setCenter(at)}setElevation(at){this._helper.setElevation(at)}setMinElevationForCurrentTile(at){this._helper.setMinElevationForCurrentTile(at)}setPadding(at){this._helper.setPadding(at)}interpolatePadding(at,st,ot){return this._helper.interpolatePadding(at,st,ot)}isPaddingEqual(at){return this._helper.isPaddingEqual(at)}resize(at,st,ot=!0){this._helper.resize(at,st,ot)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(at){this._helper.setMaxBounds(at)}overrideNearFarZ(at,st){this._helper.overrideNearFarZ(at,st)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(at){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),at)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(at,st){}constructor(at,st,ot,ut,Hl){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new Rt({calcMatrices:()=>{this._calcMatrices()},getConstrained:(at,st)=>this.getConstrained(at,st)},at,st,ot,ut,Hl),this._coveringTilesDetailsProvider=new Dt}clone(){const at=new Lt;return at.apply(this),at}apply(at,st,ot){this._helper.apply(at,st,ot)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(at){const ot=[new st.b1(0,at)];if(this._helper._renderWorldCopies){const ut=this.screenPointToMercatorCoordinate(new st.P(0,0)),Hl=this.screenPointToMercatorCoordinate(new st.P(this._helper._width,0)),rc=this.screenPointToMercatorCoordinate(new st.P(this._helper._width,this._helper._height)),sc=this.screenPointToMercatorCoordinate(new st.P(0,this._helper._height)),oc=Math.floor(Math.min(ut.x,Hl.x,rc.x,sc.x)),_c=Math.floor(Math.max(ut.x,Hl.x,rc.x,sc.x)),wc=1;for(let Sc=oc-wc;Sc<=_c+wc;Sc++)0!==Sc&&ot.push(new st.b1(Sc,at))}return ot}getCameraFrustum(){return At.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(at){const st=this.screenPointToLocation(this.centerPoint,at),ot=at?at.getElevationForLngLatZoom(st,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(ot)}setLocationAtPoint(at,ot){const ut=st.ai(this.elevation,this.center.lat),Hl=this.screenPointToMercatorCoordinateAtZ(ot,ut),rc=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,ut),sc=st.a0.fromLngLat(at),oc=new st.a0(sc.x-(Hl.x-rc.x),sc.y-(Hl.y-rc.y));this.setCenter(null==oc?void 0:oc.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(at,ot){return ot?this.coordinatePoint(st.a0.fromLngLat(at),ot.getElevationForLngLatZoom(at,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(st.a0.fromLngLat(at))}screenPointToLocation(at,st){var ot;return null===(ot=this.screenPointToMercatorCoordinate(at,st))||void 0===ot?void 0:ot.toLngLat()}screenPointToMercatorCoordinate(at,st){if(st){const ot=st.pointCoordinate(at);if(null!=ot)return ot}return this.screenPointToMercatorCoordinateAtZ(at)}screenPointToMercatorCoordinateAtZ(at,ot){const ut=ot||0,Hl=[at.x,at.y,0,1],rc=[at.x,at.y,1,1];st.av(Hl,Hl,this._pixelMatrixInverse),st.av(rc,rc,this._pixelMatrixInverse);const sc=Hl[3],oc=rc[3],_c=Hl[1]/sc,wc=rc[1]/oc,Sc=Hl[2]/sc,iu=rc[2]/oc,su=Sc===iu?0:(ut-Sc)/(iu-Sc);return new st.a0(st.C.number(Hl[0]/sc,rc[0]/oc,su)/this.worldSize,st.C.number(_c,wc,su)/this.worldSize,ut)}coordinatePoint(at,ot=0,ut=this._pixelMatrix){const Hl=[at.x*this.worldSize,at.y*this.worldSize,ot,1];return st.av(Hl,Hl,ut),new st.P(Hl[0]/Hl[3],Hl[1]/Hl[3])}getBounds(){const at=Math.max(0,this._helper._height/2-he(this));return(new G).extend(this.screenPointToLocation(new st.P(0,at))).extend(this.screenPointToLocation(new st.P(this._helper._width,at))).extend(this.screenPointToLocation(new st.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new st.P(0,this._helper._height)))}isPointOnMapSurface(at,st){return st?null!=st.pointCoordinate(at):at.y>this.height/2-he(this)}calculatePosMatrix(at,ot=!1,ut){var Hl;const rc=null!==(Hl=at.key)&&void 0!==Hl?Hl:st.b2(at.wrap,at.canonical.z,at.canonical.z,at.canonical.x,at.canonical.y),sc=ot?this._alignedPosMatrixCache:this._posMatrixCache;if(sc.has(rc)){const at=sc.get(rc);return ut?at.f32:at.f64}const oc=ue(at,this.worldSize);st.O(oc,ot?this._alignedProjMatrix:this._viewProjMatrix,oc);const _c={f64:oc,f32:new Float32Array(oc)};return sc.set(rc,_c),ut?_c.f32:_c.f64}calculateFogMatrix(at){const ot=at.key,ut=this._fogMatrixCacheF32;if(ut.has(ot))return ut.get(ot);const Hl=ue(at,this.worldSize);return st.O(Hl,this._fogMatrix,Hl),ut.set(ot,new Float32Array(Hl)),ut.get(ot)}getConstrained(at,ot){ot=st.ag(+ot,this.minZoom,this.maxZoom);const ut={center:new st.S(at.lng,at.lat),zoom:ot};let Hl=this._helper._lngRange;this._helper._renderWorldCopies||null!==Hl||(Hl=[-179.9999999999,180-1e-10]);const rc=this.tileSize*st.ae(ut.zoom);let sc=0,oc=rc,_c=0,wc=rc,Sc=0,iu=0;const{x:su,y:lu}=this.size;if(this._helper._latRange){const at=this._helper._latRange;sc=st.U(at[1])*rc,oc=st.U(at[0])*rc,oc-sc<lu&&(Sc=lu/(oc-sc))}Hl&&(_c=st.aN(st.V(Hl[0])*rc,0,rc),wc=st.aN(st.V(Hl[1])*rc,0,rc),wc<_c&&(wc+=rc),wc-_c<su&&(iu=su/(wc-_c)));const{x:cu,y:uu}=le(rc,at);let pu,mu;const gu=Math.max(iu||0,Sc||0);if(gu){const at=new st.P(iu?(wc+_c)/2:cu,Sc?(oc+sc)/2:uu);return ut.center=ce(rc,at).wrap(),ut.zoom+=st.aj(gu),ut}if(this._helper._latRange){const at=lu/2;uu-at<sc&&(mu=sc+at),uu+at>oc&&(mu=oc-at)}if(Hl){const at=(_c+wc)/2;let ot=cu;this._helper._renderWorldCopies&&(ot=st.aN(cu,at-rc/2,at+rc/2));const ut=su/2;ot-ut<_c&&(pu=_c+ut),ot+ut>wc&&(pu=wc-ut)}if(void 0!==pu||void 0!==mu){const at=new st.P(null!=pu?pu:cu,null!=mu?mu:uu);ut.center=ce(rc,at).wrap()}return ut}calculateCenterFromCameraLngLatAlt(at,st,ot,ut){return this._helper.calculateCenterFromCameraLngLatAlt(at,st,ot,ut)}_calculateNearFarZIfNeeded(at,ot,ut){if(!this._helper.autoCalculateNearFarZ)return;const Hl=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),rc=at-Hl*this._helper._pixelPerMeter/Math.cos(ot),sc=Hl<0?rc:at,oc=Math.PI/2+this.pitchInRadians,_c=st.ad(this.fov)*(Math.abs(Math.cos(st.ad(this.roll)))*this.height+Math.abs(Math.sin(st.ad(this.roll)))*this.width)/this.height*(.5+ut.y/this.height),wc=Math.sin(_c)*sc/Math.sin(st.ag(Math.PI-oc-_c,.01,Math.PI-.01)),Sc=he(this),iu=Math.atan(Sc/this._helper.cameraToCenterDistance),su=st.ad(.75),lu=iu>su?2*iu*(.5+ut.y/(2*Sc)):su,cu=Math.sin(lu)*sc/Math.sin(st.ag(Math.PI-oc-lu,.01,Math.PI-.01)),uu=Math.min(wc,cu);this._helper._farZ=1.01*(Math.cos(Math.PI/2-ot)*uu+sc),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const at=this.centerOffset,ot=le(this.worldSize,this.center),ut=ot.x,Hl=ot.y;this._helper._pixelPerMeter=st.ai(1,this.center.lat)*this.worldSize;const rc=st.ad(Math.min(this.pitch,xu)),sc=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(rc));let oc;this._calculateNearFarZIfNeeded(sc,rc,at),oc=new Float64Array(16),st.b3(oc,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),st.ap(this._invProjMatrix,oc),oc[8]=2*-at.x/this._helper._width,oc[9]=2*at.y/this._helper._height,this._projectionMatrix=st.b4(oc),st.N(oc,oc,[1,-1,1]),st.M(oc,oc,[0,0,-this._helper.cameraToCenterDistance]),st.b5(oc,oc,-this.rollInRadians),st.b6(oc,oc,this.pitchInRadians),st.b5(oc,oc,-this.bearingInRadians),st.M(oc,oc,[-ut,-Hl,0]),this._mercatorMatrix=st.N([],oc,[this.worldSize,this.worldSize,this.worldSize]),st.N(oc,oc,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=st.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,oc),st.M(oc,oc,[0,0,-this.elevation]),this._viewProjMatrix=oc,this._invViewProjMatrix=st.ap([],oc);const _c=[0,0,-1,1];st.av(_c,_c,this._invViewProjMatrix),this._cameraPosition=[_c[0]/_c[3],_c[1]/_c[3],_c[2]/_c[3]],this._fogMatrix=new Float64Array(16),st.b3(this._fogMatrix,this.fovInRadians,this.width/this.height,sc,this._helper._farZ),this._fogMatrix[8]=2*-at.x/this.width,this._fogMatrix[9]=2*at.y/this.height,st.N(this._fogMatrix,this._fogMatrix,[1,-1,1]),st.M(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),st.b5(this._fogMatrix,this._fogMatrix,-this.rollInRadians),st.b6(this._fogMatrix,this._fogMatrix,this.pitchInRadians),st.b5(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),st.M(this._fogMatrix,this._fogMatrix,[-ut,-Hl,0]),st.N(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),st.M(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=st.O(new Float64Array(16),this.clipSpaceToPixelsMatrix,oc);const wc=this._helper._width%2/2,Sc=this._helper._height%2/2,iu=Math.cos(this.bearingInRadians),su=Math.sin(-this.bearingInRadians),lu=ut-Math.round(ut)+iu*wc+su*Sc,cu=Hl-Math.round(Hl)+iu*Sc+su*wc,uu=new Float64Array(oc);if(st.M(uu,uu,[lu>.5?lu-1:lu,cu>.5?cu-1:cu,0]),this._alignedProjMatrix=uu,oc=st.ap(new Float64Array(16),this._pixelMatrix),!oc)throw new Error("failed to invert matrix");this._pixelMatrixInverse=oc,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const at=this.screenPointToMercatorCoordinate(new st.P(0,0)),ot=[at.x*this.worldSize,at.y*this.worldSize,0,1];return st.av(ot,ot,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const at=st.ai(1,this.center.lat)*this.worldSize;return de(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/at).toLngLat()}lngLatToCameraDepth(at,ot){const ut=st.a0.fromLngLat(at),Hl=[ut.x*this.worldSize,ut.y*this.worldSize,ot,1];return st.av(Hl,Hl,this._viewProjMatrix),Hl[2]/Hl[3]}getProjectionData(at){const{overscaledTileID:ot,aligned:ut,applyTerrainMatrix:Hl}=at,rc=this._helper.getMercatorTileCoordinates(ot),sc=ot?this.calculatePosMatrix(ot,ut,!0):null;let oc;return oc=ot&&ot.terrainRttPosMatrix32f&&Hl?ot.terrainRttPosMatrix32f:sc||st.b7(),{mainMatrix:oc,tileMercatorCoords:rc,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:oc}}isLocationOccluded(at){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(at,st,ot){return 1}transformLightDirection(at){return st.aS(at)}getRayDirectionFromPixel(at){throw new Error("Not implemented.")}projectTileCoordinates(at,ot,ut,Hl){const rc=this.calculatePosMatrix(ut);let sc;Hl?(sc=[at,ot,Hl(at,ot),1],st.av(sc,sc,rc)):(sc=[at,ot,0,1],qe(sc,sc,rc));const oc=sc[3];return{point:new st.P(sc[0]/oc,sc[1]/oc),signedDistanceFromCamera:oc,isOccluded:!1}}populateCache(at){for(const st of at)this.calculatePosMatrix(st)}getMatrixForModel(at,ot){const ut=st.a0.fromLngLat(at,ot),Hl=ut.meterInMercatorCoordinateUnits(),rc=st.b8();return st.M(rc,rc,[ut.x,ut.y,ut.z]),st.b5(rc,rc,Math.PI),st.b6(rc,rc,Math.PI/2),st.N(rc,rc,[-Hl,Hl,Hl]),rc}getProjectionDataForCustomLayer(at=!0){const ot=new st.Z(0,0,0,0,0),ut=this.getProjectionData({overscaledTileID:ot,applyGlobeMatrix:at}),Hl=ue(ot,this.worldSize);st.O(Hl,this._viewProjMatrix,Hl),ut.tileMercatorCoords=[0,0,1,1];const rc=[st.$,st.$,this.worldSize/this._helper.pixelsPerMeter],sc=st.b9();return st.N(sc,Hl,rc),ut.fallbackMatrix=sc,ut.mainMatrix=sc,ut}getFastPathSimpleProjectionMatrix(at){return this.calculatePosMatrix(at)}}function kt(){st.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Ft(at){if(at.useSlerp)if(at.k<1){const ot=st.ba(at.startEulerAngles.roll,at.startEulerAngles.pitch,at.startEulerAngles.bearing),ut=st.ba(at.endEulerAngles.roll,at.endEulerAngles.pitch,at.endEulerAngles.bearing),Hl=new Float64Array(4);st.bb(Hl,ot,ut,at.k);const rc=st.bc(Hl);at.tr.setRoll(rc.roll),at.tr.setPitch(rc.pitch),at.tr.setBearing(rc.bearing)}else at.tr.setRoll(at.endEulerAngles.roll),at.tr.setPitch(at.endEulerAngles.pitch),at.tr.setBearing(at.endEulerAngles.bearing);else at.tr.setRoll(st.C.number(at.startEulerAngles.roll,at.endEulerAngles.roll,at.k)),at.tr.setPitch(st.C.number(at.startEulerAngles.pitch,at.endEulerAngles.pitch,at.k)),at.tr.setBearing(st.C.number(at.startEulerAngles.bearing,at.endEulerAngles.bearing,at.k))}function Bt(at,ot,ut,Hl,rc){const sc=rc.padding,oc=le(rc.worldSize,ut.getNorthWest()),_c=le(rc.worldSize,ut.getNorthEast()),wc=le(rc.worldSize,ut.getSouthEast()),Sc=le(rc.worldSize,ut.getSouthWest()),iu=st.ad(-Hl),su=oc.rotate(iu),lu=_c.rotate(iu),cu=wc.rotate(iu),uu=Sc.rotate(iu),pu=new st.P(Math.max(su.x,lu.x,uu.x,cu.x),Math.max(su.y,lu.y,uu.y,cu.y)),mu=new st.P(Math.min(su.x,lu.x,uu.x,cu.x),Math.min(su.y,lu.y,uu.y,cu.y)),gu=pu.sub(mu),Au=(rc.width-(sc.left+sc.right+ot.left+ot.right))/gu.x,yu=(rc.height-(sc.top+sc.bottom+ot.top+ot.bottom))/gu.y;if(yu<0||Au<0)return void kt();const _u=Math.min(st.aj(rc.scale*Math.min(Au,yu)),at.maxZoom),xu=st.P.convert(at.offset),Su=new st.P((ot.left-ot.right)/2,(ot.top-ot.bottom)/2).rotate(st.ad(Hl)),Du=xu.add(Su).mult(rc.scale/st.ae(_u));return{center:ce(rc.worldSize,oc.add(wc).div(2).sub(Du)),zoom:_u,bearing:Hl}}class Ot{get useGlobeControls(){return!1}handlePanInertia(at,st){return{easingOffset:at,easingCenter:st.center}}handleMapControlsRollPitchBearingZoom(at,st){at.bearingDelta&&st.setBearing(st.bearing+at.bearingDelta),at.pitchDelta&&st.setPitch(st.pitch+at.pitchDelta),at.rollDelta&&st.setRoll(st.roll+at.rollDelta),at.zoomDelta&&st.setZoom(st.zoom+at.zoomDelta)}handleMapControlsPan(at,st,ot){at.around.distSqr(st.centerPoint)<.01||st.setLocationAtPoint(ot,at.around)}cameraForBoxAndBearing(at,st,ot,ut,Hl){return Bt(at,st,ot,ut,Hl)}handleJumpToCenterZoom(at,ot){at.zoom!==(void 0!==ot.zoom?+ot.zoom:at.zoom)&&at.setZoom(+ot.zoom),void 0!==ot.center&&at.setCenter(st.S.convert(ot.center))}handleEaseTo(at,ot){const ut=at.zoom,Hl=at.padding,rc={roll:at.roll,pitch:at.pitch,bearing:at.bearing},sc={roll:void 0===ot.roll?at.roll:ot.roll,pitch:void 0===ot.pitch?at.pitch:ot.pitch,bearing:void 0===ot.bearing?at.bearing:ot.bearing},oc=void 0!==ot.zoom,_c=!at.isPaddingEqual(ot.padding);let wc=!1;const Sc=oc?+ot.zoom:at.zoom;let iu=at.centerPoint.add(ot.offsetAsPoint);const su=at.screenPointToLocation(iu),{center:lu,zoom:cu}=at.getConstrained(st.S.convert(ot.center||su),null!=Sc?Sc:ut);St(at,lu);const uu=le(at.worldSize,su),pu=le(at.worldSize,lu).sub(uu),mu=st.ae(cu-ut);return wc=cu!==ut,{easeFunc:oc=>{if(wc&&at.setZoom(st.C.number(ut,cu,oc)),st.bd(rc,sc)||Ft({startEulerAngles:rc,endEulerAngles:sc,tr:at,k:oc,useSlerp:rc.roll!=sc.roll}),_c&&(at.interpolatePadding(Hl,ot.padding,oc),iu=at.centerPoint.add(ot.offsetAsPoint)),ot.around)at.setLocationAtPoint(ot.around,ot.aroundPoint);else{const ot=st.ae(at.zoom-ut),Hl=cu>ut?Math.min(2,mu):Math.max(.5,mu),rc=Math.pow(Hl,1-oc),sc=ce(at.worldSize,uu.add(pu.mult(oc*rc)).mult(ot));at.setLocationAtPoint(at.renderWorldCopies?sc.wrap():sc,iu)}},isZooming:wc,elevationCenter:lu}}handleFlyTo(at,ot){const ut=void 0!==ot.zoom,Hl=at.zoom,rc=at.getConstrained(st.S.convert(ot.center||ot.locationAtOffset),ut?+ot.zoom:Hl),sc=rc.center,oc=rc.zoom;St(at,sc);const _c=le(at.worldSize,ot.locationAtOffset),wc=le(at.worldSize,sc).sub(_c),Sc=wc.mag(),iu=st.ae(oc-Hl);let su;if(void 0!==ot.minZoom){const ut=Math.min(+ot.minZoom,Hl,oc),rc=at.getConstrained(sc,ut).zoom;su=st.ae(rc-Hl)}return{easeFunc:(ot,ut,rc,Sc)=>{at.setZoom(1===ot?oc:Hl+st.aj(ut));const iu=1===ot?sc:ce(at.worldSize,_c.add(wc.mult(rc)).mult(ut));at.setLocationAtPoint(at.renderWorldCopies?iu.wrap():iu,Sc)},scaleOfZoom:iu,targetCenter:sc,scaleOfMinZoom:su,pixelPathLength:Sc}}}class jt{constructor(at,st,ot){this.blendFunction=at,this.blendColor=st,this.mask=ot}}jt.Replace=[1,0],jt.disabled=new jt(jt.Replace,st.be.transparent,[!1,!1,!1,!1]),jt.unblended=new jt(jt.Replace,st.be.transparent,[!0,!0,!0,!0]),jt.alphaBlended=new jt([1,771],st.be.transparent,[!0,!0,!0,!0]);const pd=2305;class Zt{constructor(at,st,ot){this.enable=at,this.mode=st,this.frontFace=ot}}Zt.disabled=new Zt(!1,1029,pd),Zt.backCCW=new Zt(!0,1029,pd),Zt.frontCCW=new Zt(!0,1028,pd);class Ut{constructor(at,st,ot){this.func=at,this.mask=st,this.range=ot}}Ut.ReadOnly=!1,Ut.ReadWrite=!0,Ut.disabled=new Ut(519,Ut.ReadOnly,[0,1]);const md=7680;class Vt{constructor(at,st,ot,ut,Hl,rc){this.test=at,this.ref=st,this.mask=ot,this.fail=ut,this.depthFail=Hl,this.pass=rc}}Vt.disabled=new Vt({func:519,mask:0},0,0,md,md,md);const gd=new WeakMap;function qt(at){var st;if(gd.has(at))return gd.get(at);{const ot=null===(st=at.getParameter(at.VERSION))||void 0===st?void 0:st.startsWith("WebGL 2.0");return gd.set(at,ot),ot}}class Wt{get awaitingQuery(){return!!this._readbackQueue}constructor(at){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=at;const ot=at.context,ut=ot.gl;this._texFormat=ut.RGBA,this._texType=ut.UNSIGNED_BYTE;const Hl=new st.aK;Hl.emplaceBack(-1,-1),Hl.emplaceBack(2,-1),Hl.emplaceBack(-1,2);const rc=new st.aM;rc.emplaceBack(0,1,2),this._fullscreenTriangle=new wt(ot.createVertexBuffer(Hl,ud.members),ot.createIndexBuffer(rc),st.aL.simpleSegment(0,0,Hl.length,rc.length)),this._resultBuffer=new Uint8Array(4),ot.activeTexture.set(ut.TEXTURE1);const sc=ut.createTexture();ut.bindTexture(ut.TEXTURE_2D,sc),ut.texParameteri(ut.TEXTURE_2D,ut.TEXTURE_WRAP_S,ut.CLAMP_TO_EDGE),ut.texParameteri(ut.TEXTURE_2D,ut.TEXTURE_WRAP_T,ut.CLAMP_TO_EDGE),ut.texParameteri(ut.TEXTURE_2D,ut.TEXTURE_MIN_FILTER,ut.NEAREST),ut.texParameteri(ut.TEXTURE_2D,ut.TEXTURE_MAG_FILTER,ut.NEAREST),ut.texImage2D(ut.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=ot.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(sc),qt(ut)&&(this._pbo=ut.createBuffer(),ut.bindBuffer(ut.PIXEL_PACK_BUFFER,this._pbo),ut.bufferData(ut.PIXEL_PACK_BUFFER,4,ut.STREAM_READ),ut.bindBuffer(ut.PIXEL_PACK_BUFFER,null))}destroy(){const at=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),at.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(at,st){const ot=this._updateCount;return this._readbackQueue?ot>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():ot>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(at,st),this._updateCount++,this._measuredError}_bindFramebuffer(){const at=this._cachedRenderContext.context,st=at.gl;at.activeTexture.set(st.TEXTURE1),st.bindTexture(st.TEXTURE_2D,this._fbo.colorAttachment.get()),at.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(at,ot){const ut=this._cachedRenderContext.context,Hl=ut.gl;if(this._bindFramebuffer(),ut.viewport.set([0,0,this._texWidth,this._texHeight]),ut.clear({color:st.be.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(ut,Hl.TRIANGLES,Ut.disabled,Vt.disabled,jt.unblended,Zt.disabled,((at,st)=>({u_input:at,u_output_expected:st}))(at,ot),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&qt(Hl)){Hl.bindBuffer(Hl.PIXEL_PACK_BUFFER,this._pbo),Hl.readBuffer(Hl.COLOR_ATTACHMENT0),Hl.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),Hl.bindBuffer(Hl.PIXEL_PACK_BUFFER,null);const at=Hl.fenceSync(Hl.SYNC_GPU_COMMANDS_COMPLETE,0);Hl.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:at}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const at=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&qt(at)){const ot=at.clientWaitSync(this._readbackQueue.sync,0,0);if(ot===at.WAIT_FAILED)return st.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(ot===at.TIMEOUT_EXPIRED)return;at.bindBuffer(at.PIXEL_PACK_BUFFER,this._pbo),at.getBufferSubData(at.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),at.bindBuffer(at.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),at.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Wt._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(at){let st=0;return st+=at[0]/256,st+=at[1]/65536,st+=at[2]/16777216,at[3]<127&&(st=-st),st/128}}const fd=st.$/128;function Xt(at,ot){const ut=void 0!==at.granularity?Math.max(at.granularity,1):1,Hl=ut+(at.generateBorders?2:0),rc=ut+(at.extendToNorthPole||at.generateBorders?1:0)+(at.extendToSouthPole||at.generateBorders?1:0),sc=Hl+1,oc=rc+1,_c=at.generateBorders?-1:0,wc=at.generateBorders||at.extendToNorthPole?-1:0,Sc=ut+(at.generateBorders?1:0),iu=ut+(at.generateBorders||at.extendToSouthPole?1:0),su=sc*oc,lu=Hl*rc*6,cu=sc*oc>65536;if(cu&&"16bit"===ot)throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const uu=cu||"32bit"===ot,pu=new Int16Array(2*su);let mu=0;for(let yu=wc;yu<=iu;yu++)for(let ot=_c;ot<=Sc;ot++){let Hl=ot/ut*st.$;-1===ot&&(Hl=-64),ot===ut+1&&(Hl=st.$+fd);let rc=yu/ut*st.$;-1===yu&&(rc=at.extendToNorthPole?st.bg:-64),yu===ut+1&&(rc=at.extendToSouthPole?st.bh:st.$+fd),pu[mu++]=Hl,pu[mu++]=rc}const gu=uu?new Uint32Array(lu):new Uint16Array(lu);let Au=0;for(let st=0;st<rc;st++)for(let at=0;at<Hl;at++){const ot=at+1+st*sc,ut=at+(st+1)*sc,Hl=at+1+(st+1)*sc;gu[Au++]=at+st*sc,gu[Au++]=ut,gu[Au++]=ot,gu[Au++]=ot,gu[Au++]=ut,gu[Au++]=Hl}return{vertices:pu.buffer.slice(0),indices:gu.buffer.slice(0),uses32bitIndices:uu}}const Ad=new st.aJ({fill:new st.bi(128,2),line:new st.bi(512,0),tile:new st.bi(128,32),stencil:new st.bi(128,1),circle:3});class Yt{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return cd.projectionGlobe}get vertexShaderPreludeCode(){return cd.projectionMercator.vertexSource}get subdivisionGranularity(){return Ad}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(at){this._errorMeasurement||(this._errorMeasurement=new Wt(at));const ot=st.U(this._errorQueryLatitudeDegrees),ut=2*Math.atan(Math.exp(Math.PI-ot*Math.PI*2))-.5*Math.PI,Hl=this._errorMeasurement.updateErrorLoop(ot,ut),sc=rc.now();Hl!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=Hl,this._errorMeasurementLastChangeTime=sc);const oc=Math.min(Math.max((sc-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=st.bj(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,st.bk(oc))}_getMeshKey(at){return`${at.granularity.toString(36)}_${at.generateBorders?"b":""}${at.extendToNorthPole?"n":""}${at.extendToSouthPole?"s":""}`}getMeshFromTileID(at,st,ot,ut,Hl){const rc=("stencil"===Hl?Ad.stencil:Ad.tile).getGranularityForZoomLevel(st.z);return this._getMesh(at,{granularity:rc,generateBorders:ot,extendToNorthPole:0===st.y&&ut,extendToSouthPole:st.y===(1<<st.z)-1&&ut})}_getMesh(at,ot){const ut=this._getMeshKey(ot);if(ut in this._tileMeshCache)return this._tileMeshCache[ut];const Hl=function(at,ot){const ut=Xt(ot,"16bit"),Hl=st.aK.deserialize({arrayBuffer:ut.vertices,length:ut.vertices.byteLength/2/2}),rc=st.aM.deserialize({arrayBuffer:ut.indices,length:ut.indices.byteLength/2/3});return new wt(at.createVertexBuffer(Hl,ud.members),at.createIndexBuffer(rc),st.aL.simpleSegment(0,0,Hl.length,rc.length))}(at,ot);return this._tileMeshCache[ut]=Hl,Hl}recalculate(at){}hasTransition(){const at=rc.now();let st=!1;return st=st||(at-this._errorMeasurementLastChangeTime)/1e3<.7,st=st||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,st}setErrorQueryLatitudeDegrees(at){this._errorQueryLatitudeDegrees=at}}const yd=new st.r({type:new st.D(st.v.projection.type)});class Jt extends st.E{constructor(at){super(),this._transitionable=new st.t(yd),this.setProjection(at),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new st.F(0)),this._mercatorProjection=new It,this._verticalPerspectiveProjection=new Yt}get transitionState(){const at=this.properties.get("type");if("string"==typeof at&&"mercator"===at)return 0;if("string"==typeof at&&"vertical-perspective"===at)return 1;if(at instanceof st.bl){if("vertical-perspective"===at.from&&"mercator"===at.to)return 1-at.transition;if("mercator"===at.from&&"vertical-perspective"===at.to)return at.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(at){this._mercatorProjection.updateGPUdependent(at),this._verticalPerspectiveProjection.updateGPUdependent(at)}getMeshFromTileID(at,st,ot,ut,Hl){return this.currentProjection.getMeshFromTileID(at,st,ot,ut,Hl)}setProjection(at){this._transitionable.setValue("type",(null==at?void 0:at.type)||"mercator")}updateTransitions(at){this._transitioning=this._transitionable.transitioned(at,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(at){this.properties=this._transitioning.possiblyEvaluate(at)}setErrorQueryLatitudeDegrees(at){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(at),this._mercatorProjection.setErrorQueryLatitudeDegrees(at)}}function ei(at){const st=oi(at.worldSize,at.center.lat);return 2*Math.PI*st}function ti(at,ot,ut,Hl,rc){const sc=1/(1<<rc),oc=ot/st.$*sc+Hl*sc,_c=st.bn((at/st.$*sc+ut*sc)*Math.PI*2+Math.PI,2*Math.PI),wc=2*Math.atan(Math.exp(Math.PI-oc*Math.PI*2))-.5*Math.PI,Sc=Math.cos(wc),iu=new Float64Array(3);return iu[0]=Math.sin(_c)*Sc,iu[1]=Math.sin(wc),iu[2]=Math.cos(_c)*Sc,iu}function ii(at){return function(at,st){const ot=Math.cos(st),ut=new Float64Array(3);return ut[0]=Math.sin(at)*ot,ut[1]=Math.sin(st),ut[2]=Math.cos(at)*ot,ut}(at.lng*Math.PI/180,at.lat*Math.PI/180)}function oi(at,st){return at/(2*Math.PI)/Math.cos(st*Math.PI/180)}function ri(at){const ot=Math.asin(at[1])/Math.PI*180,ut=Math.sqrt(at[0]*at[0]+at[2]*at[2]);if(ut>1e-6){const Hl=at[0]/ut,rc=Math.acos(at[2]/ut),sc=(Hl>0?rc:-rc)/Math.PI*180;return new st.S(st.aN(sc,-180,180),ot)}return new st.S(0,ot)}function ai(at){return Math.cos(at*Math.PI/180)}function si(at,ot){const ut=ai(at),Hl=ai(ot);return st.aj(Hl/ut)}function ni(at,ot){const ut=at.rotate(ot.bearingInRadians),Hl=ot.zoom+si(ot.center.lat,0),rc=st.bj(1/ai(ot.center.lat),1/ai(Math.min(Math.abs(ot.center.lat),60)),st.bm(Hl,7,3,0,1)),sc=360/ei({worldSize:ot.worldSize,center:{lat:ot.center.lat}});return new st.S(ot.center.lng-ut.x*sc*rc,st.ag(ot.center.lat+ut.y*sc,-85.051129,st.ah))}function li(at){const st=.5*at,ot=Math.sin(st),ut=Math.cos(st);return Math.log(ot+ut)-Math.log(ut-ot)}function ci(at,ot,ut,Hl){const rc=at.lat+ut*Hl;if(Math.abs(ut)>1){const sc=(Math.sign(at.lat+ut)!==Math.sign(at.lat)?-Math.abs(at.lat):Math.abs(at.lat))*Math.PI/180,oc=Math.abs(at.lat+ut)*Math.PI/180,_c=li(sc+Hl*(oc-sc)),wc=li(sc),Sc=li(oc);return new st.S(at.lng+ot*((_c-wc)/(Sc-wc)),rc)}return new st.S(at.lng+ot*Hl,rc)}class hi{constructor(at){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=at}swapBuffers(){if(!this._hadAnyChanges)return;const at=this._cachePrevious;this._cachePrevious=this._cache,this._cache=at,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(at,st,ot,ut){const Hl=`${at.z}_${at.x}_${at.y}_${(null==ut?void 0:ut.terrain)?"t":""}`,rc=this._cache.get(Hl);if(rc)return rc;const sc=this._cachePrevious.get(Hl);if(sc)return this._cache.set(Hl,sc),sc;const oc=this._boundingVolumeFactory(at,st,ot,ut);return this._cache.set(Hl,oc),this._hadAnyChanges=!0,oc}}class ui{constructor(at,st,ot,ut){this.min=ot,this.max=ut,this.points=at,this.planes=st}static fromAabb(at,st){const ot=[];for(let ut=0;ut<8;ut++)ot.push([1&~ut?at[0]:st[0],1==(ut>>1&1)?st[1]:at[1],1==(ut>>2&1)?st[2]:at[2]]);return new ui(ot,[[-1,0,0,st[0]],[1,0,0,-at[0]],[0,-1,0,st[1]],[0,1,0,-at[1]],[0,0,-1,st[2]],[0,0,1,-at[2]]],at,st)}static fromCenterSizeAngles(at,ot,ut){const Hl=st.bq([],ut[0],ut[1],ut[2]),rc=st.br([],[ot[0],0,0],Hl),sc=st.br([],[0,ot[1],0],Hl),oc=st.br([],[0,0,ot[2]],Hl),_c=[...at],wc=[...at];for(let st=0;st<8;st++)for(let ot=0;ot<3;ot++){const ut=at[ot]+rc[ot]*(1&~st?-1:1)+sc[ot]*(1==(st>>1&1)?1:-1)+oc[ot]*(1==(st>>2&1)?1:-1);_c[ot]=Math.min(_c[ot],ut),wc[ot]=Math.max(wc[ot],ut)}const Sc=[];for(let iu=0;iu<8;iu++){const ot=[...at];st.aR(ot,ot,st.aQ([],rc,1&~iu?-1:1)),st.aR(ot,ot,st.aQ([],sc,1==(iu>>1&1)?1:-1)),st.aR(ot,ot,st.aQ([],oc,1==(iu>>2&1)?1:-1)),Sc.push(ot)}return new ui(Sc,[[...rc,-st.aW(rc,Sc[0])],[...sc,-st.aW(sc,Sc[0])],[...oc,-st.aW(oc,Sc[0])],[-rc[0],-rc[1],-rc[2],-st.aW(rc,Sc[7])],[-sc[0],-sc[1],-sc[2],-st.aW(sc,Sc[7])],[-oc[0],-oc[1],-oc[2],-st.aW(oc,Sc[7])]],_c,wc)}intersectsFrustum(at){let st=!0;const ot=this.points.length,ut=this.planes.length,Hl=at.planes.length,rc=at.points.length;for(let sc=0;sc<Hl;sc++){const ut=at.planes[sc];let Hl=0;for(let at=0;at<ot;at++){const st=this.points[at];ut[0]*st[0]+ut[1]*st[1]+ut[2]*st[2]+ut[3]>=0&&Hl++}if(0===Hl)return 0;Hl<ot&&(st=!1)}if(st)return 2;for(let sc=0;sc<ut;sc++){const st=this.planes[sc];let ot=0;for(let ut=0;ut<rc;ut++){const Hl=at.points[ut];st[0]*Hl[0]+st[1]*Hl[1]+st[2]*Hl[2]+st[3]>=0&&ot++}if(0===ot)return 0}return 1}intersectsPlane(at){const st=this.points.length;let ot=0;for(let ut=0;ut<st;ut++){const st=this.points[ut];at[0]*st[0]+at[1]*st[1]+at[2]*st[2]+at[3]>=0&&ot++}return ot===st?2:0===ot?0:1}}function di(at,st,ot){const ut=at-st;return ut<0?-ut:Math.max(0,ut-ot)}function _i(at,st,ot,ut,Hl){const rc=at-ot;let sc;return sc=rc<0?Math.min(-rc,1+rc-Hl):rc>1?Math.min(Math.max(rc-Hl,0),1-rc):0,Math.max(sc,di(st,ut,Hl))}class pi{constructor(){this._boundingVolumeCache=new hi(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(at,st,ot,ut){const Hl=1<<ot.z,rc=1/Hl,sc=ot.x/Hl,oc=ot.y/Hl;let _c=2;return _c=Math.min(_c,_i(at,st,sc,oc,rc)),_c=Math.min(_c,_i(at,st,sc+.5,-oc-rc,rc)),_c=Math.min(_c,_i(at,st,sc+.5,2-oc-rc,rc)),_c}getWrap(at,st,ot){const ut=1<<st.z,Hl=1/ut,rc=st.x/ut,sc=di(at.x,rc,Hl),oc=di(at.x,rc-1,Hl),_c=di(at.x,rc+1,Hl),wc=Math.min(sc,oc,_c);return wc===_c?1:wc===oc?-1:0}allowVariableZoom(at,st){return ge(at,st)>4}allowWorldCopies(){return!1}getTileBoundingVolume(at,st,ot,ut){return this._boundingVolumeCache.getTileBoundingVolume(at,st,ot,ut)}_computeTileBoundingVolume(at,ot,ut,Hl){var rc,sc;let oc=ut,_c=ut;if(null==Hl?void 0:Hl.terrain){const wc=new st.Z(at.z,ot,at.z,at.x,at.y),Sc=Hl.terrain.getMinMaxElevation(wc);oc=null!==(rc=Sc.minElevation)&&void 0!==rc?rc:ut,_c=null!==(sc=Sc.maxElevation)&&void 0!==sc?sc:ut}if(oc/=st.bt,_c/=st.bt,oc+=1,_c+=1,at.z<=0)return ui.fromAabb([-_c,-_c,-_c],[_c,_c,_c]);if(1===at.z)return ui.fromAabb([0===at.x?-_c:0,0===at.y?0:-_c,-_c],[0===at.x?0:_c,0===at.y?_c:0,_c]);{const ot=[ti(0,0,at.x,at.y,at.z),ti(st.$,0,at.x,at.y,at.z),ti(st.$,st.$,at.x,at.y,at.z),ti(0,st.$,at.x,at.y,at.z)],ut=[];for(const at of ot)ut.push(st.aQ([],at,_c));if(_c!==oc)for(const at of ot)ut.push(st.aQ([],at,oc));0===at.y&&ut.push([0,1,0]),at.y===(1<<at.z)-1&&ut.push([0,-1,0]);const Hl=[1,1,1],rc=[-1,-1,-1];for(const at of ut)for(let st=0;st<3;st++)Hl[st]=Math.min(Hl[st],at[st]),rc[st]=Math.max(rc[st],at[st]);const sc=ti(st.$/2,st.$/2,at.x,at.y,at.z),wc=st.aV([],[0,1,0],sc);st.aU(wc,wc);const Sc=st.aV([],sc,wc);st.aU(Sc,Sc);const iu=st.aV([],ot[2],ot[1]);st.aU(iu,iu);const su=st.aV([],ot[0],ot[3]);st.aU(su,su),ut.push(st.aQ([],sc,_c)),at.y>=(1<<at.z)/2&&ut.push(st.aQ([],ti(st.$/2,0,at.x,at.y,at.z),_c)),at.y<(1<<at.z)/2&&ut.push(st.aQ([],ti(st.$/2,st.$,at.x,at.y,at.z),_c));const lu=mi(sc,ut),cu=mi(Sc,ut),uu=[-sc[0],-sc[1],-sc[2],lu.max],pu=[sc[0],sc[1],sc[2],-lu.min],mu=[-Sc[0],-Sc[1],-Sc[2],cu.max],gu=[Sc[0],Sc[1],Sc[2],-cu.min],Au=[...iu,0],yu=[...su,0],_u=[];return 0===at.y?_u.push(st.bs(yu,Au,uu),st.bs(yu,Au,pu)):_u.push(st.bs(mu,Au,uu),st.bs(mu,Au,pu),st.bs(mu,yu,uu),st.bs(mu,yu,pu)),at.y===(1<<at.z)-1?_u.push(st.bs(yu,Au,uu),st.bs(yu,Au,pu)):_u.push(st.bs(gu,Au,uu),st.bs(gu,Au,pu),st.bs(gu,yu,uu),st.bs(gu,yu,pu)),new ui(_u,[uu,pu,mu,gu,Au,yu],Hl,rc)}}}function mi(at,ot){let ut=1/0,Hl=-1/0;for(const rc of ot){const ot=st.aW(at,rc);ut=Math.min(ut,ot),Hl=Math.max(Hl,ot)}return{min:ut,max:Hl}}class fi{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(at){this._helper.setMinZoom(at)}setMaxZoom(at){this._helper.setMaxZoom(at)}setMinPitch(at){this._helper.setMinPitch(at)}setMaxPitch(at){this._helper.setMaxPitch(at)}setRenderWorldCopies(at){this._helper.setRenderWorldCopies(at)}setBearing(at){this._helper.setBearing(at)}setPitch(at){this._helper.setPitch(at)}setRoll(at){this._helper.setRoll(at)}setFov(at){this._helper.setFov(at)}setZoom(at){this._helper.setZoom(at)}setCenter(at){this._helper.setCenter(at)}setElevation(at){this._helper.setElevation(at)}setMinElevationForCurrentTile(at){this._helper.setMinElevationForCurrentTile(at)}setPadding(at){this._helper.setPadding(at)}interpolatePadding(at,st,ot){return this._helper.interpolatePadding(at,st,ot)}isPaddingEqual(at){return this._helper.isPaddingEqual(at)}resize(at,st){this._helper.resize(at,st)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(at){this._helper.setMaxBounds(at)}overrideNearFarZ(at,st){this._helper.overrideNearFarZ(at,st)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(at){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),at)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(at){}constructor(){this._cachedClippingPlane=st.bu(),this._projectionMatrix=st.b8(),this._globeViewProjMatrix32f=st.b7(),this._globeViewProjMatrixNoCorrection=st.b8(),this._globeViewProjMatrixNoCorrectionInverted=st.b8(),this._globeProjMatrixInverted=st.b8(),this._cameraPosition=st.bo(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new Rt({calcMatrices:()=>{this._calcMatrices()},getConstrained:(at,st)=>this.getConstrained(at,st)}),this._coveringTilesDetailsProvider=new pi}clone(){const at=new fi;return at.apply(this),at}apply(at,st){this._globeLatitudeErrorCorrectionRadians=st||0,this._helper.apply(at)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const at=st.bo();return at[0]=this._cameraPosition[0],at[1]=this._cameraPosition[1],at[2]=this._cameraPosition[2],at}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(at){const{overscaledTileID:st,applyGlobeMatrix:ot}=at,ut=this._helper.getMercatorTileCoordinates(st);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:ut,clippingPlane:this._cachedClippingPlane,projectionTransition:ot?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(at){const ot=this.pitchInRadians,ut=this.cameraToCenterDistance/at,Hl=Math.sin(ot)*ut,rc=Math.cos(ot)*ut+1,sc=1/Math.sqrt(Hl*Hl+rc*rc)*1;let oc=-Hl,_c=rc;const wc=Math.sqrt(oc*oc+_c*_c);oc/=wc,_c/=wc;const Sc=[0,oc,_c];st.bv(Sc,Sc,[0,0,0],-this.bearingInRadians),st.bw(Sc,Sc,[0,0,0],-1*this.center.lat*Math.PI/180),st.bx(Sc,Sc,[0,0,0],this.center.lng*Math.PI/180);const iu=1/st.aY(Sc);return st.aQ(Sc,Sc,iu),[...Sc,-sc*iu]}isLocationOccluded(at){return!this.isSurfacePointVisible(ii(at))}transformLightDirection(at){const ot=this._helper._center.lng*Math.PI/180,ut=this._helper._center.lat*Math.PI/180,Hl=Math.cos(ut),rc=[Math.sin(ot)*Hl,Math.sin(ut),Math.cos(ot)*Hl],sc=[rc[2],0,-rc[0]],oc=[0,0,0];st.aV(oc,sc,rc),st.aU(sc,sc),st.aU(oc,oc);const _c=[0,0,0];return st.aU(_c,[sc[0]*at[0]+oc[0]*at[1]+rc[0]*at[2],sc[1]*at[0]+oc[1]*at[1]+rc[1]*at[2],sc[2]*at[0]+oc[2]*at[1]+rc[2]*at[2]]),_c}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(at,ot,ut){const Hl=function(at,ot,ut){const Hl=1/(1<<ut.z);return new st.a0(at/st.$*Hl+ut.x*Hl,ot/st.$*Hl+ut.y*Hl)}(at,ot,ut.canonical),rc=(sc=Hl.y,[st.bn(Hl.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-sc*Math.PI*2))-.5*Math.PI]);var sc;return this.getCircleRadiusCorrection()/Math.cos(rc[1])}projectTileCoordinates(at,ot,ut,Hl){const rc=ut.canonical,sc=ti(at,ot,rc.x,rc.y,rc.z),oc=1+(Hl?Hl(at,ot):0)/st.bt,_c=[sc[0]*oc,sc[1]*oc,sc[2]*oc,1];st.av(_c,_c,this._globeViewProjMatrixNoCorrection);const wc=this._cachedClippingPlane,Sc=wc[0]*sc[0]+wc[1]*sc[1]+wc[2]*sc[2]+wc[3]<0;return{point:new st.P(_c[0]/_c[3],_c[1]/_c[3]),signedDistanceFromCamera:_c[3],isOccluded:Sc}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const at=oi(this.worldSize,this.center.lat),ot=st.b9(),ut=st.b9();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*at),st.b3(ot,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const Hl=this.centerOffset;ot[8]=2*-Hl.x/this._helper._width,ot[9]=2*Hl.y/this._helper._height,this._projectionMatrix=st.b4(ot),this._globeProjMatrixInverted=st.b9(),st.ap(this._globeProjMatrixInverted,ot),st.M(ot,ot,[0,0,-this.cameraToCenterDistance]),st.b5(ot,ot,this.rollInRadians),st.b6(ot,ot,-this.pitchInRadians),st.b5(ot,ot,this.bearingInRadians),st.M(ot,ot,[0,0,-at]);const rc=st.bo();rc[0]=at,rc[1]=at,rc[2]=at,st.b6(ut,ot,this.center.lat*Math.PI/180),st.by(ut,ut,-this.center.lng*Math.PI/180),st.N(ut,ut,rc),this._globeViewProjMatrixNoCorrection=ut,st.b6(ot,ot,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),st.by(ot,ot,-this.center.lng*Math.PI/180),st.N(ot,ot,rc),this._globeViewProjMatrix32f=new Float32Array(ot),this._globeViewProjMatrixNoCorrectionInverted=st.b9(),st.ap(this._globeViewProjMatrixNoCorrectionInverted,ut);const sc=st.bo();this._cameraPosition=st.bo(),this._cameraPosition[2]=this.cameraToCenterDistance/at,st.bv(this._cameraPosition,this._cameraPosition,sc,-this.rollInRadians),st.bw(this._cameraPosition,this._cameraPosition,sc,this.pitchInRadians),st.bv(this._cameraPosition,this._cameraPosition,sc,-this.bearingInRadians),st.aR(this._cameraPosition,this._cameraPosition,[0,0,1]),st.bw(this._cameraPosition,this._cameraPosition,sc,-this.center.lat*Math.PI/180),st.bx(this._cameraPosition,this._cameraPosition,sc,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(at);const oc=st.b4(this._globeViewProjMatrixNoCorrectionInverted);st.N(oc,oc,[1,1,-1]),this._cachedFrustum=At.fromInvProjectionMatrix(oc,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(at){st.w("calculateFogMatrix is not supported on globe projection.");const ot=st.b9();return st.af(ot),ot}getVisibleUnwrappedCoordinates(at){return[new st.b1(0,at)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(at){at&&st.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(at,ot){if(!this._globeViewProjMatrixNoCorrection)return 1;const ut=ii(at);st.aQ(ut,ut,1+ot/st.bt);const Hl=st.bu();return st.av(Hl,[ut[0],ut[1],ut[2],1],this._globeViewProjMatrixNoCorrection),Hl[2]/Hl[3]}populateCache(at){}getBounds(){const at=.5*this.width,ot=.5*this.height,ut=[new st.P(0,0),new st.P(at,0),new st.P(this.width,0),new st.P(this.width,ot),new st.P(this.width,this.height),new st.P(at,this.height),new st.P(0,this.height),new st.P(0,ot)],Hl=[];for(const st of ut)Hl.push(this.unprojectScreenPoint(st));let rc=0,sc=0,oc=0,_c=0;const wc=this.center;for(const iu of Hl){const at=st.bz(wc.lng,iu.lng),ot=st.bz(wc.lat,iu.lat);at<sc&&(sc=at),at>rc&&(rc=at),ot<_c&&(_c=ot),ot>oc&&(oc=ot)}const Sc=[wc.lng+sc,wc.lat+_c,wc.lng+rc,wc.lat+oc];return this.isSurfacePointOnScreen([0,1,0])&&(Sc[3]=90,Sc[0]=-180,Sc[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(Sc[1]=-90,Sc[0]=-180,Sc[2]=180),new G(Sc)}getConstrained(at,ot){const ut=st.ag(at.lat,-85.051129,st.ah),Hl=st.ag(+ot,this.minZoom+si(0,ut),this.maxZoom);return{center:new st.S(at.lng,ut),zoom:Hl}}calculateCenterFromCameraLngLatAlt(at,st,ot,ut){return this._helper.calculateCenterFromCameraLngLatAlt(at,st,ot,ut)}setLocationAtPoint(at,ot){const ut=ii(this.unprojectScreenPoint(ot)),Hl=ii(at),rc=st.bo();st.bA(rc);const sc=st.bo();st.bx(sc,ut,rc,-this.center.lng*Math.PI/180),st.bw(sc,sc,rc,this.center.lat*Math.PI/180);const oc=Hl[0]*Hl[0]+Hl[2]*Hl[2],_c=sc[0]*sc[0];if(oc<_c)return;const wc=Math.sqrt(oc-_c),Sc=-wc,iu=st.bB(Hl[0],Hl[2],sc[0],wc),su=st.bB(Hl[0],Hl[2],sc[0],Sc),lu=st.bo();st.bx(lu,Hl,rc,-iu);const cu=st.bB(lu[1],lu[2],sc[1],sc[2]),uu=st.bo();st.bx(uu,Hl,rc,-su);const pu=st.bB(uu[1],uu[2],sc[1],sc[2]),mu=.5*Math.PI,gu=cu>=-mu&&cu<=mu,Au=pu>=-mu&&pu<=mu;let yu,_u;if(gu&&Au){const at=this.center.lng*Math.PI/180,ot=this.center.lat*Math.PI/180;st.bC(iu,at)+st.bC(cu,ot)<st.bC(su,at)+st.bC(pu,ot)?(yu=iu,_u=cu):(yu=su,_u=pu)}else if(gu)yu=iu,_u=cu;else{if(!Au)return;yu=su,_u=pu}const xu=yu/Math.PI*180,Su=_u/Math.PI*180,Du=this.center.lat;this.setCenter(new st.S(xu,st.ag(Su,-90,90))),this.setZoom(this.zoom+si(Du,this.center.lat))}locationToScreenPoint(at,ot){const ut=ii(at);if(ot){const Hl=ot.getElevationForLngLatZoom(at,this._helper._tileZoom);st.aQ(ut,ut,1+Hl/st.bt)}return this._projectSurfacePointToScreen(ut)}_projectSurfacePointToScreen(at){const ot=st.bu();return st.av(ot,[...at,1],this._globeViewProjMatrixNoCorrection),ot[0]/=ot[3],ot[1]/=ot[3],new st.P((.5*ot[0]+.5)*this.width,(.5*-ot[1]+.5)*this.height)}screenPointToMercatorCoordinate(at,ot){if(ot){const st=ot.pointCoordinate(at);if(st)return st}return st.a0.fromLngLat(this.unprojectScreenPoint(at))}screenPointToLocation(at,st){var ot;return null===(ot=this.screenPointToMercatorCoordinate(at,st))||void 0===ot?void 0:ot.toLngLat()}isPointOnMapSurface(at,st){const ot=this._cameraPosition,ut=this.getRayDirectionFromPixel(at);return!!this.rayPlanetIntersection(ot,ut)}getRayDirectionFromPixel(at){const ot=st.bu();ot[0]=at.x/this.width*2-1,ot[1]=-1*(at.y/this.height*2-1),ot[2]=1,ot[3]=1,st.av(ot,ot,this._globeViewProjMatrixNoCorrectionInverted),ot[0]/=ot[3],ot[1]/=ot[3],ot[2]/=ot[3];const ut=st.bo();ut[0]=ot[0]-this._cameraPosition[0],ut[1]=ot[1]-this._cameraPosition[1],ut[2]=ot[2]-this._cameraPosition[2];const Hl=st.bo();return st.aU(Hl,ut),Hl}isSurfacePointVisible(at){const st=this._cachedClippingPlane;return st[0]*at[0]+st[1]*at[1]+st[2]*at[2]+st[3]>=0}isSurfacePointOnScreen(at){if(!this.isSurfacePointVisible(at))return!1;const ot=st.bu();return st.av(ot,[...at,1],this._globeViewProjMatrixNoCorrection),ot[0]/=ot[3],ot[1]/=ot[3],ot[2]/=ot[3],ot[0]>-1&&ot[0]<1&&ot[1]>-1&&ot[1]<1&&ot[2]>-1&&ot[2]<1}rayPlanetIntersection(at,ot){const ut=st.aW(at,ot),Hl=st.bo(),rc=st.bo();st.aQ(rc,ot,ut),st.aT(Hl,at,rc);const sc=1-st.aW(Hl,Hl);if(sc<0)return null;const oc=st.aW(at,at)-1,_c=-ut+(ut<0?1:-1)*Math.sqrt(sc),wc=oc/_c,Sc=_c;return{tMin:Math.min(wc,Sc),tMax:Math.max(wc,Sc)}}unprojectScreenPoint(at){const ot=this._cameraPosition,ut=this.getRayDirectionFromPixel(at),Hl=this.rayPlanetIntersection(ot,ut);if(Hl){const at=st.bo();st.aR(at,ot,[ut[0]*Hl.tMin,ut[1]*Hl.tMin,ut[2]*Hl.tMin]);const rc=st.bo();return st.aU(rc,at),ri(rc)}const rc=this._cachedClippingPlane,sc=rc[0]*ut[0]+rc[1]*ut[1]+rc[2]*ut[2],oc=-st.b0(rc,ot)/sc,_c=st.bo();if(oc>0)st.aR(_c,ot,[ut[0]*oc,ut[1]*oc,ut[2]*oc]);else{const at=st.bo();st.aR(at,ot,[2*ut[0],2*ut[1],2*ut[2]]);const Hl=st.b0(this._cachedClippingPlane,at);st.aT(_c,at,[this._cachedClippingPlane[0]*Hl,this._cachedClippingPlane[1]*Hl,this._cachedClippingPlane[2]*Hl])}const wc=function(at){const ot=st.bo();return ot[0]=at[0]*-at[3],ot[1]=at[1]*-at[3],ot[2]=at[2]*-at[3],{center:ot,radius:Math.sqrt(1-at[3]*at[3])}}(rc);return ri(function(at,ot,ut){const Hl=st.bo();st.aT(Hl,ut,at);const rc=st.bo();return st.bp(rc,at,Hl,ot/st.a_(Hl)),rc}(wc.center,wc.radius,_c))}getMatrixForModel(at,ot){const ut=st.S.convert(at),Hl=1/st.bt,rc=st.b8();return st.by(rc,rc,ut.lng/180*Math.PI),st.b6(rc,rc,-ut.lat/180*Math.PI),st.M(rc,rc,[0,0,1+ot/st.bt]),st.b6(rc,rc,.5*Math.PI),st.N(rc,rc,[Hl,Hl,Hl]),rc}getProjectionDataForCustomLayer(at=!0){const ot=this.getProjectionData({overscaledTileID:new st.Z(0,0,0,0,0),applyGlobeMatrix:at});return ot.tileMercatorCoords=[0,0,1,1],ot}getFastPathSimpleProjectionMatrix(at){}}class gi{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(at){this._helper.setMinZoom(at)}setMaxZoom(at){this._helper.setMaxZoom(at)}setMinPitch(at){this._helper.setMinPitch(at)}setMaxPitch(at){this._helper.setMaxPitch(at)}setRenderWorldCopies(at){this._helper.setRenderWorldCopies(at)}setBearing(at){this._helper.setBearing(at)}setPitch(at){this._helper.setPitch(at)}setRoll(at){this._helper.setRoll(at)}setFov(at){this._helper.setFov(at)}setZoom(at){this._helper.setZoom(at)}setCenter(at){this._helper.setCenter(at)}setElevation(at){this._helper.setElevation(at)}setMinElevationForCurrentTile(at){this._helper.setMinElevationForCurrentTile(at)}setPadding(at){this._helper.setPadding(at)}interpolatePadding(at,st,ot){return this._helper.interpolatePadding(at,st,ot)}isPaddingEqual(at){return this._helper.isPaddingEqual(at)}resize(at,st,ot=!0){this._helper.resize(at,st,ot)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(at){this._helper.setMaxBounds(at)}overrideNearFarZ(at,st){this._helper.overrideNearFarZ(at,st)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(at){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),at)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(at,st){this._globeness=at,this._globeLatitudeErrorCorrectionRadians=st,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new Rt({calcMatrices:()=>{this._calcMatrices()},getConstrained:(at,st)=>this.getConstrained(at,st)}),this._globeness=1,this._mercatorTransform=new Lt,this._verticalPerspectiveTransform=new fi}clone(){const at=new gi;return at._globeness=this._globeness,at._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,at.apply(this),at}apply(at){this._helper.apply(at),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(at){const st=this._mercatorTransform.getProjectionData(at),ot=this._verticalPerspectiveTransform.getProjectionData(at);return{mainMatrix:this.isGlobeRendering?ot.mainMatrix:st.mainMatrix,clippingPlane:ot.clippingPlane,tileMercatorCoords:ot.tileMercatorCoords,projectionTransition:at.applyGlobeMatrix?this._globeness:0,fallbackMatrix:st.fallbackMatrix}}isLocationOccluded(at){return this.currentTransform.isLocationOccluded(at)}transformLightDirection(at){return this.currentTransform.transformLightDirection(at)}getPixelScale(){return st.bj(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return st.bj(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(at,ot,ut){const Hl=this._mercatorTransform.getPitchedTextCorrection(at,ot,ut),rc=this._verticalPerspectiveTransform.getPitchedTextCorrection(at,ot,ut);return st.bj(Hl,rc,this._globeness)}projectTileCoordinates(at,st,ot,ut){return this.currentTransform.projectTileCoordinates(at,st,ot,ut)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(at){return this.currentTransform.calculateFogMatrix(at)}getVisibleUnwrappedCoordinates(at){return this.currentTransform.getVisibleUnwrappedCoordinates(at)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(at){this._mercatorTransform.recalculateZoomAndCenter(at),this._verticalPerspectiveTransform.recalculateZoomAndCenter(at)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(at,st){return this.currentTransform.lngLatToCameraDepth(at,st)}populateCache(at){this._mercatorTransform.populateCache(at),this._verticalPerspectiveTransform.populateCache(at)}getBounds(){return this.currentTransform.getBounds()}getConstrained(at,st){return this.currentTransform.getConstrained(at,st)}calculateCenterFromCameraLngLatAlt(at,st,ot,ut){return this._helper.calculateCenterFromCameraLngLatAlt(at,st,ot,ut)}setLocationAtPoint(at,st){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(at,st),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(at,st),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(at,st){return this.currentTransform.locationToScreenPoint(at,st)}screenPointToMercatorCoordinate(at,st){return this.currentTransform.screenPointToMercatorCoordinate(at,st)}screenPointToLocation(at,st){return this.currentTransform.screenPointToLocation(at,st)}isPointOnMapSurface(at,st){return this.currentTransform.isPointOnMapSurface(at,st)}getRayDirectionFromPixel(at){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(at)}getMatrixForModel(at,st){return this.currentTransform.getMatrixForModel(at,st)}getProjectionDataForCustomLayer(at=!0){const st=this._mercatorTransform.getProjectionDataForCustomLayer(at);if(!this.isGlobeRendering)return st;const ot=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(at);return ot.fallbackMatrix=st.mainMatrix,ot}getFastPathSimpleProjectionMatrix(at){return this.currentTransform.getFastPathSimpleProjectionMatrix(at)}}class vi{get useGlobeControls(){return!0}handlePanInertia(at,ot){const ut=ni(at,ot);return Math.abs(ut.lng-ot.center.lng)>180&&(ut.lng=ot.center.lng+179.5*Math.sign(ut.lng-ot.center.lng)),{easingCenter:ut,easingOffset:new st.P(0,0)}}handleMapControlsRollPitchBearingZoom(at,ot){const ut=at.around,Hl=ot.screenPointToLocation(ut);at.bearingDelta&&ot.setBearing(ot.bearing+at.bearingDelta),at.pitchDelta&&ot.setPitch(ot.pitch+at.pitchDelta),at.rollDelta&&ot.setRoll(ot.roll+at.rollDelta);const rc=ot.zoom;at.zoomDelta&&ot.setZoom(ot.zoom+at.zoomDelta);const sc=ot.zoom-rc;if(0===sc)return;const oc=st.bz(ot.center.lng,Hl.lng),_c=oc/(Math.abs(oc/180)+1),wc=st.bz(ot.center.lat,Hl.lat),Sc=ot.getRayDirectionFromPixel(ut),iu=ot.cameraPosition,su=-1*st.aW(iu,Sc),lu=st.bo();st.aR(lu,iu,[Sc[0]*su,Sc[1]*su,Sc[2]*su]);const cu=st.aY(lu)-1,uu=Math.exp(.5*-Math.max(cu-.3,0)),pu=oi(ot.worldSize,ot.center.lat)/Math.min(ot.width,ot.height),mu=st.bm(pu,.9,.5,1,.25),gu=(1-st.ae(-sc))*Math.min(uu,mu),Au=ot.center.lat,yu=ot.zoom,_u=new st.S(ot.center.lng+_c*gu,st.ag(ot.center.lat+wc*gu,-85.051129,st.ah));ot.setLocationAtPoint(Hl,ut);const xu=ot.center,Su=st.bm(Math.abs(oc),45,85,0,1),Du=st.bm(pu,.75,.35,0,1),Lu=Math.pow(Math.max(Su,Du),.25),$u=st.bz(xu.lng,_u.lng),hh=st.bz(xu.lat,_u.lat);ot.setCenter(new st.S(xu.lng+$u*Lu,xu.lat+hh*Lu).wrap()),ot.setZoom(yu+si(Au,ot.center.lat))}handleMapControlsPan(at,st,ot){if(!at.panDelta)return;const ut=st.center.lat,Hl=st.zoom;st.setCenter(ni(at.panDelta,st).wrap()),st.setZoom(Hl+si(ut,st.center.lat))}cameraForBoxAndBearing(at,ot,ut,Hl,rc){const sc=Bt(at,ot,ut,Hl,rc),oc=ot.left/rc.width*2-1,_c=(rc.width-ot.right)/rc.width*2-1,wc=ot.top/rc.height*-2+1,Sc=(rc.height-ot.bottom)/rc.height*-2+1,iu=st.bz(ut.getWest(),ut.getEast())<0,su=iu?ut.getEast():ut.getWest(),lu=iu?ut.getWest():ut.getEast(),cu=Math.max(ut.getNorth(),ut.getSouth()),uu=Math.min(ut.getNorth(),ut.getSouth()),pu=su+.5*st.bz(su,lu),mu=cu+.5*st.bz(cu,uu),gu=rc.clone();gu.setCenter(sc.center),gu.setBearing(sc.bearing),gu.setPitch(0),gu.setRoll(0),gu.setZoom(sc.zoom);const Au=gu.modelViewProjectionMatrix,yu=[ii(ut.getNorthWest()),ii(ut.getNorthEast()),ii(ut.getSouthWest()),ii(ut.getSouthEast()),ii(new st.S(lu,mu)),ii(new st.S(su,mu)),ii(new st.S(pu,cu)),ii(new st.S(pu,uu))],_u=ii(sc.center);let xu=Number.POSITIVE_INFINITY;for(const st of yu)oc<0&&(xu=vi.getLesserNonNegativeNonNull(xu,vi.solveVectorScale(st,_u,Au,"x",oc))),_c>0&&(xu=vi.getLesserNonNegativeNonNull(xu,vi.solveVectorScale(st,_u,Au,"x",_c))),wc>0&&(xu=vi.getLesserNonNegativeNonNull(xu,vi.solveVectorScale(st,_u,Au,"y",wc))),Sc<0&&(xu=vi.getLesserNonNegativeNonNull(xu,vi.solveVectorScale(st,_u,Au,"y",Sc)));if(Number.isFinite(xu)&&0!==xu)return sc.zoom=gu.zoom+st.aj(xu),sc;kt()}handleJumpToCenterZoom(at,ot){const ut=at.center.lat,Hl=at.getConstrained(ot.center?st.S.convert(ot.center):at.center,at.zoom).center;at.setCenter(Hl.wrap());const rc=void 0!==ot.zoom?+ot.zoom:at.zoom+si(ut,Hl.lat);at.zoom!==rc&&at.setZoom(rc)}handleEaseTo(at,ot){const ut=at.zoom,Hl=at.center,rc=at.padding,sc={roll:at.roll,pitch:at.pitch,bearing:at.bearing},oc={roll:void 0===ot.roll?at.roll:ot.roll,pitch:void 0===ot.pitch?at.pitch:ot.pitch,bearing:void 0===ot.bearing?at.bearing:ot.bearing},_c=void 0!==ot.zoom,wc=!at.isPaddingEqual(ot.padding);let Sc=!1;const iu=ot.center?st.S.convert(ot.center):Hl,su=at.getConstrained(iu,ut).center;St(at,su);const lu=at.clone();lu.setCenter(su),lu.setZoom(_c?+ot.zoom:ut+si(Hl.lat,iu.lat)),lu.setBearing(ot.bearing);const cu=new st.P(st.ag(at.centerPoint.x+ot.offsetAsPoint.x,0,at.width),st.ag(at.centerPoint.y+ot.offsetAsPoint.y,0,at.height));lu.setLocationAtPoint(su,cu);const uu=(ot.offset&&ot.offsetAsPoint.mag())>0?lu.center:su,pu=_c?+ot.zoom:ut+si(Hl.lat,uu.lat),mu=ut+si(Hl.lat,0),gu=pu+si(uu.lat,0),Au=st.bz(Hl.lng,uu.lng),yu=st.bz(Hl.lat,uu.lat),_u=st.ae(gu-mu);return Sc=pu!==ut,{easeFunc:ut=>{if(st.bd(sc,oc)||Ft({startEulerAngles:sc,endEulerAngles:oc,tr:at,k:ut,useSlerp:sc.roll!=oc.roll}),wc&&at.interpolatePadding(rc,ot.padding,ut),ot.around)st.w("Easing around a point is not supported under globe projection."),at.setLocationAtPoint(ot.around,ot.aroundPoint);else{const st=gu>mu?Math.min(2,_u):Math.max(.5,_u),ot=Math.pow(st,1-ut),rc=ci(Hl,Au,yu,ut*ot);at.setCenter(rc.wrap())}if(Sc){const ot=st.C.number(mu,gu,ut)+si(0,at.center.lat);at.setZoom(ot)}},isZooming:Sc,elevationCenter:uu}}handleFlyTo(at,ot){const ut=void 0!==ot.zoom,Hl=at.center,rc=at.zoom,sc=at.padding,oc=!at.isPaddingEqual(ot.padding),_c=at.getConstrained(st.S.convert(ot.center||ot.locationAtOffset),rc).center,wc=ut?+ot.zoom:at.zoom+si(at.center.lat,_c.lat),Sc=at.clone();Sc.setCenter(_c),Sc.setZoom(wc),Sc.setBearing(ot.bearing);const iu=new st.P(st.ag(at.centerPoint.x+ot.offsetAsPoint.x,0,at.width),st.ag(at.centerPoint.y+ot.offsetAsPoint.y,0,at.height));Sc.setLocationAtPoint(_c,iu);const su=Sc.center;St(at,su);const lu=function(at,ot,ut){const Hl=ii(ot),rc=ii(ut),sc=st.aW(Hl,rc),oc=Math.acos(sc),_c=ei(at);return oc/(2*Math.PI)*_c}(at,Hl,su),cu=rc+si(Hl.lat,0),uu=wc+si(su.lat,0),pu=st.ae(uu-cu);let mu;if("number"==typeof ot.minZoom){const ut=+ot.minZoom+si(su.lat,0),Hl=Math.min(ut,cu,uu)+si(0,su.lat),rc=at.getConstrained(su,Hl).zoom+si(su.lat,0);mu=st.ae(rc-cu)}const gu=st.bz(Hl.lng,su.lng),Au=st.bz(Hl.lat,su.lat);return{easeFunc:(ut,rc,_c,Sc)=>{const iu=ci(Hl,gu,Au,_c);oc&&at.interpolatePadding(sc,ot.padding,ut);const lu=1===ut?su:iu;at.setCenter(lu.wrap());const uu=cu+st.aj(rc);at.setZoom(1===ut?wc:uu+si(0,lu.lat))},scaleOfZoom:pu,targetCenter:su,scaleOfMinZoom:mu,pixelPathLength:lu}}static solveVectorScale(at,st,ot,ut,Hl){const rc="x"===ut?[ot[0],ot[4],ot[8],ot[12]]:[ot[1],ot[5],ot[9],ot[13]],sc=[ot[3],ot[7],ot[11],ot[15]],oc=at[0]*rc[0]+at[1]*rc[1]+at[2]*rc[2],_c=at[0]*sc[0]+at[1]*sc[1]+at[2]*sc[2],wc=st[0]*rc[0]+st[1]*rc[1]+st[2]*rc[2],Sc=st[0]*sc[0]+st[1]*sc[1]+st[2]*sc[2];return wc+Hl*_c===oc+Hl*Sc||sc[3]*(oc-wc)+rc[3]*(Sc-_c)+oc*Sc==wc*_c?null:(wc+rc[3]-Hl*Sc-Hl*sc[3])/(wc-oc-Hl*Sc+Hl*_c)}static getLesserNonNegativeNonNull(at,st){return null!==st&&st>=0&&st<at?st:at}}class bi{constructor(at){this._globe=at,this._mercatorCameraHelper=new Ot,this._verticalPerspectiveCameraHelper=new vi}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(at,st){return this.currentHelper.handlePanInertia(at,st)}handleMapControlsRollPitchBearingZoom(at,st){return this.currentHelper.handleMapControlsRollPitchBearingZoom(at,st)}handleMapControlsPan(at,st,ot){this.currentHelper.handleMapControlsPan(at,st,ot)}cameraForBoxAndBearing(at,st,ot,ut,Hl){return this.currentHelper.cameraForBoxAndBearing(at,st,ot,ut,Hl)}handleJumpToCenterZoom(at,st){this.currentHelper.handleJumpToCenterZoom(at,st)}handleEaseTo(at,st){return this.currentHelper.handleEaseTo(at,st)}handleFlyTo(at,st){return this.currentHelper.handleFlyTo(at,st)}}const xi=(at,ot)=>st.y(at,ot&&ot.filter((at=>"source.canvas"!==at.identifier))),vd=st.bD();class wi extends st.E{constructor(at,ot={}){super(),this._rtlPluginLoaded=()=>{for(const at in this.sourceCaches){const st=this.sourceCaches[at].getSource().type;"vector"!==st&&"geojson"!==st||this.sourceCaches[at].reload()}},this.map=at,this.dispatcher=new F(k(),at._getMapId()),this.dispatcher.registerMessageHandler("GG",((at,st)=>this.getGlyphs(at,st))),this.dispatcher.registerMessageHandler("GI",((at,st)=>this.getImages(at,st))),this.imageManager=new b,this.imageManager.setEventedParent(this),this.glyphManager=new T(at._requestManager,ot.localIdeographFontFamily),this.lineAtlas=new E(256,512),this.crossTileSymbolIndex=new vt,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new st.bE,this._loaded=!1,this._availableImages=[],this._globalState={},this._resetUpdates(),this.dispatcher.broadcast("SR",st.bF()),oe().on(yu,this._rtlPluginLoaded),this.on("data",(at=>{if("source"!==at.dataType||"metadata"!==at.sourceDataType)return;const st=this.sourceCaches[at.sourceId];if(!st)return;const ot=st.getSource();if(ot&&ot.vectorLayerIds)for(const ut in this._layers){const at=this._layers[ut];at.source===ot.id&&this._validateLayer(at)}}))}setGlobalStateProperty(at,ot){var ut,Hl,rc;this._checkLoaded();const sc=null===ot?null!==(rc=null===(Hl=null===(ut=this.stylesheet.state)||void 0===ut?void 0:ut[at])||void 0===Hl?void 0:Hl.default)&&void 0!==rc?rc:null:ot;if(st.bG(sc,this._globalState[at]))return this;this._globalState[at]=sc;const oc=this._findGlobalStateAffectedSources([at]);for(const st in this.sourceCaches)oc.has(st)&&(this._reloadSource(st),this._changed=!0)}getGlobalState(){return this._globalState}setGlobalState(at){this._checkLoaded();const ot=[];for(const Hl in at)!st.bG(this._globalState[Hl],at[Hl].default)&&(ot.push(Hl),this._globalState[Hl]=at[Hl].default);const ut=this._findGlobalStateAffectedSources(ot);for(const st in this.sourceCaches)ut.has(st)&&(this._reloadSource(st),this._changed=!0)}_findGlobalStateAffectedSources(at){if(0===at.length)return new Set;const st=new Set;for(const ot in this._layers){const ut=this._layers[ot],Hl=ut.getLayoutAffectingGlobalStateRefs();for(const ot of at)Hl.has(ot)&&st.add(ut.source)}return st}loadURL(at,ot={},ut){this.fire(new st.l("dataloading",{dataType:"style"})),ot.validate="boolean"!=typeof ot.validate||ot.validate;const Hl=this.map._requestManager.transformRequest(at,"Style");this._loadStyleRequest=new AbortController;const rc=this._loadStyleRequest;st.j(Hl,this._loadStyleRequest).then((at=>{this._loadStyleRequest=null,this._load(at.data,ot,ut)})).catch((at=>{this._loadStyleRequest=null,at&&!rc.signal.aborted&&this.fire(new st.k(at))}))}loadJSON(at,ot={},ut){this.fire(new st.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,rc.frameAsync(this._frameRequest).then((()=>{this._frameRequest=null,ot.validate=!1!==ot.validate,this._load(at,ot,ut)})).catch((()=>{}))}loadEmpty(){this.fire(new st.l("dataloading",{dataType:"style"})),this._load(vd,{validate:!1})}_load(at,ot,ut){var Hl,rc,sc;const oc=ot.transformStyle?ot.transformStyle(ut,at):at;if(!ot.validate||!xi(this,st.z(oc))){this._loaded=!0,this.stylesheet=oc;for(const at in oc.sources)this.addSource(at,oc.sources[at],{validate:!1});oc.sprite?this._loadSprite(oc.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(oc.glyphs),this._createLayers(),this.light=new I(this.stylesheet.light),this._setProjectionInternal((null===(Hl=this.stylesheet.projection)||void 0===Hl?void 0:Hl.type)||"mercator"),this.sky=new S(this.stylesheet.sky),this.map.setTerrain(null!==(rc=this.stylesheet.terrain)&&void 0!==rc?rc:null),this.setGlobalState(null!==(sc=this.stylesheet.state)&&void 0!==sc?sc:null),this.fire(new st.l("data",{dataType:"style"})),this.fire(new st.l("style.load"))}}_createLayers(){const at=st.bH(this.stylesheet.layers);this.dispatcher.broadcast("SL",at),this._order=at.map((at=>at.id)),this._layers={},this._serializedLayers=null;for(const ot of at){const at=st.bI(ot);at.setEventedParent(this,{layer:{id:ot.id}}),this._layers[ot.id]=at}}_loadSprite(at,ot=!1,ut=void 0){let Hl;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(at,ot,ut,Hl){return st._(this,void 0,void 0,(function*(){const sc=f(at),oc=ut>1?"@2x":"",_c={},wc={};for(const{id:at,url:ut}of sc){const rc=ot.transformRequest(g(ut,oc,".json"),"SpriteJSON");_c[at]=st.j(rc,Hl);const sc=ot.transformRequest(g(ut,oc,".png"),"SpriteImage");wc[at]=iu.getImage(sc,Hl)}return yield Promise.all([...Object.values(_c),...Object.values(wc)]),function(at,ot){return st._(this,void 0,void 0,(function*(){const st={};for(const ut in at){st[ut]={};const Hl=rc.getImageCanvasContext((yield ot[ut]).data),sc=(yield at[ut]).data;for(const at in sc){const{width:ot,height:rc,x:oc,y:_c,sdf:wc,pixelRatio:Sc,stretchX:iu,stretchY:su,content:lu,textFitWidth:cu,textFitHeight:uu}=sc[at];st[ut][at]={data:null,pixelRatio:Sc,sdf:wc,stretchX:iu,stretchY:su,content:lu,textFitWidth:cu,textFitHeight:uu,spriteData:{width:ot,height:rc,x:oc,y:_c,context:Hl}}}}return st}))}(_c,wc)}))}(at,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((at=>{if(this._spriteRequest=null,at)for(const st in at){this._spritesImagesIds[st]=[];const ut=this._spritesImagesIds[st]?this._spritesImagesIds[st].filter((st=>!(st in at))):[];for(const at of ut)this.imageManager.removeImage(at),this._changedImages[at]=!0;for(const Hl in at[st]){const ut="default"===st?Hl:`${st}:${Hl}`;this._spritesImagesIds[st].push(ut),ut in this.imageManager.images?this.imageManager.updateImage(ut,at[st][Hl],!1):this.imageManager.addImage(ut,at[st][Hl]),ot&&(this._changedImages[ut]=!0)}}})).catch((at=>{this._spriteRequest=null,Hl=at,this.fire(new st.k(Hl))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),ot&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new st.l("data",{dataType:"style"})),ut&&ut(Hl)}))}_unloadSprite(){for(const at of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(at),this._changedImages[at]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new st.l("data",{dataType:"style"}))}_validateLayer(at){const ot=this.sourceCaches[at.source];if(!ot)return;const ut=at.sourceLayer;if(!ut)return;const Hl=ot.getSource();("geojson"===Hl.type||Hl.vectorLayerIds&&-1===Hl.vectorLayerIds.indexOf(ut))&&this.fire(new st.k(new Error(`Source layer "${ut}" does not exist on source "${Hl.id}" as specified by style layer "${at.id}".`)))}loaded(){if(!this._loaded)return!1;if(Object.keys(this._updatedSources).length)return!1;for(const at in this.sourceCaches)if(!this.sourceCaches[at].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(at,ot=!1){const ut=this._serializedAllLayers();if(!at||0===at.length)return Object.values(ot?st.bJ(ut):ut);const Hl=[];for(const rc of at)if(ut[rc]){const at=ot?st.bJ(ut[rc]):ut[rc];Hl.push(at)}return Hl}_serializedAllLayers(){let at=this._serializedLayers;if(at)return at;at=this._serializedLayers={};const st=Object.keys(this._layers);for(const ot of st){const st=this._layers[ot];"custom"!==st.type&&(at[ot]=st.serialize())}return at}hasTransitions(){var at,st,ot;if(null===(at=this.light)||void 0===at?void 0:at.hasTransition())return!0;if(null===(st=this.sky)||void 0===st?void 0:st.hasTransition())return!0;if(null===(ot=this.projection)||void 0===ot?void 0:ot.hasTransition())return!0;for(const ut in this.sourceCaches)if(this.sourceCaches[ut].hasTransition())return!0;for(const ut in this._layers)if(this._layers[ut].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(at){if(!this._loaded)return;const ot=this._changed;if(ot){const st=Object.keys(this._updatedLayers),ot=Object.keys(this._removedLayers);(st.length||ot.length)&&this._updateWorkerLayers(st,ot);for(const at in this._updatedSources){const st=this._updatedSources[at];if("reload"===st)this._reloadSource(at);else{if("clear"!==st)throw new Error(`Invalid action ${st}`);this._clearSource(at)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const ut in this._updatedPaintProps)this._layers[ut].updateTransitions(at);this.light.updateTransitions(at),this.sky.updateTransitions(at),this._resetUpdates()}const ut={};for(const st in this.sourceCaches){const at=this.sourceCaches[st];ut[st]=at.used,at.used=!1}for(const st of this._order){const ot=this._layers[st];ot.recalculate(at,this._availableImages),!ot.isHidden(at.zoom)&&ot.source&&(this.sourceCaches[ot.source].used=!0)}for(const Hl in ut){const at=this.sourceCaches[Hl];!!ut[Hl]!=!!at.used&&at.fire(new st.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:Hl}))}this.light.recalculate(at),this.sky.recalculate(at),this.projection.recalculate(at),this.z=at.zoom,ot&&this.fire(new st.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const at=Object.keys(this._changedImages);if(at.length){for(const st in this.sourceCaches)this.sourceCaches[st].reloadTilesForDependencies(["icons","patterns"],at);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const at in this.sourceCaches)this.sourceCaches[at].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(at,st){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(at,!1),removedIds:st})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(at,ot={}){var ut;this._checkLoaded();const Hl=this.serialize();if(at=ot.transformStyle?ot.transformStyle(Hl,at):at,(null===(ut=ot.validate)||void 0===ut||ut)&&xi(this,st.z(at)))return!1;(at=st.bJ(at)).layers=st.bH(at.layers);const rc=st.bK(Hl,at),sc=this._getOperationsToPerform(rc);if(sc.unimplemented.length>0)throw new Error(`Unimplemented: ${sc.unimplemented.join(", ")}.`);if(0===sc.operations.length)return!1;for(const st of sc.operations)st();return this.stylesheet=at,this._serializedLayers=null,!0}_getOperationsToPerform(at){const st=[],ot=[];for(const ut of at)switch(ut.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":st.push((()=>this.addLayer.apply(this,ut.args)));break;case"removeLayer":st.push((()=>this.removeLayer.apply(this,ut.args)));break;case"setPaintProperty":st.push((()=>this.setPaintProperty.apply(this,ut.args)));break;case"setLayoutProperty":st.push((()=>this.setLayoutProperty.apply(this,ut.args)));break;case"setFilter":st.push((()=>this.setFilter.apply(this,ut.args)));break;case"addSource":st.push((()=>this.addSource.apply(this,ut.args)));break;case"removeSource":st.push((()=>this.removeSource.apply(this,ut.args)));break;case"setLayerZoomRange":st.push((()=>this.setLayerZoomRange.apply(this,ut.args)));break;case"setLight":st.push((()=>this.setLight.apply(this,ut.args)));break;case"setGeoJSONSourceData":st.push((()=>this.setGeoJSONSourceData.apply(this,ut.args)));break;case"setGlyphs":st.push((()=>this.setGlyphs.apply(this,ut.args)));break;case"setSprite":st.push((()=>this.setSprite.apply(this,ut.args)));break;case"setTerrain":st.push((()=>this.map.setTerrain.apply(this,ut.args)));break;case"setSky":st.push((()=>this.setSky.apply(this,ut.args)));break;case"setProjection":this.setProjection.apply(this,ut.args);break;case"setGlobalState":st.push((()=>this.setGlobalState.apply(this,ut.args)));break;case"setTransition":st.push((()=>{}));break;default:ot.push(ut.command)}return{operations:st,unimplemented:ot}}addImage(at,ot){if(this.getImage(at))return this.fire(new st.k(new Error(`An image named "${at}" already exists.`)));this.imageManager.addImage(at,ot),this._afterImageUpdated(at)}updateImage(at,st){this.imageManager.updateImage(at,st)}getImage(at){return this.imageManager.getImage(at)}removeImage(at){if(!this.getImage(at))return this.fire(new st.k(new Error(`An image named "${at}" does not exist.`)));this.imageManager.removeImage(at),this._afterImageUpdated(at)}_afterImageUpdated(at){this._availableImages=this.imageManager.listImages(),this._changedImages[at]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new st.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(at,ot,ut={}){if(this._checkLoaded(),void 0!==this.sourceCaches[at])throw new Error(`Source "${at}" already exists.`);if(!ot.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(ot).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(ot.type)>=0&&this._validate(st.z.source,`sources.${at}`,ot,null,ut))return;this.map&&this.map._collectResourceTiming&&(ot.collectResourceTiming=!0);const Hl=this.sourceCaches[at]=new xe(at,ot,this.dispatcher);Hl.style=this,Hl.setEventedParent(this,(()=>({isSourceLoaded:Hl.loaded(),source:Hl.serialize(),sourceId:at}))),Hl.onAdd(this.map),this._changed=!0}removeSource(at){if(this._checkLoaded(),void 0===this.sourceCaches[at])throw new Error("There is no source with this ID");for(const ut in this._layers)if(this._layers[ut].source===at)return this.fire(new st.k(new Error(`Source "${at}" cannot be removed while layer "${ut}" is using it.`)));const ot=this.sourceCaches[at];delete this.sourceCaches[at],delete this._updatedSources[at],ot.fire(new st.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:at})),ot.setEventedParent(null),ot.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(at,st){if(this._checkLoaded(),void 0===this.sourceCaches[at])throw new Error(`There is no source with this ID=${at}`);const ot=this.sourceCaches[at].getSource();if("geojson"!==ot.type)throw new Error(`geojsonSource.type is ${ot.type}, which is !== 'geojson`);ot.setData(st),this._changed=!0}getSource(at){return this.sourceCaches[at]&&this.sourceCaches[at].getSource()}addLayer(at,ot,ut={}){this._checkLoaded();const Hl=at.id;if(this.getLayer(Hl))return void this.fire(new st.k(new Error(`Layer "${Hl}" already exists on this map.`)));let rc;if("custom"===at.type){if(xi(this,st.bL(at)))return;rc=st.bI(at)}else{if("source"in at&&"object"==typeof at.source&&(this.addSource(Hl,at.source),at=st.bJ(at),at=st.e(at,{source:Hl})),this._validate(st.z.layer,`layers.${Hl}`,at,{arrayIndex:-1},ut))return;rc=st.bI(at),this._validateLayer(rc),rc.setEventedParent(this,{layer:{id:Hl}})}const sc=ot?this._order.indexOf(ot):this._order.length;if(ot&&-1===sc)this.fire(new st.k(new Error(`Cannot add layer "${Hl}" before non-existing layer "${ot}".`)));else{if(this._order.splice(sc,0,Hl),this._layerOrderChanged=!0,this._layers[Hl]=rc,this._removedLayers[Hl]&&rc.source&&"custom"!==rc.type){const at=this._removedLayers[Hl];delete this._removedLayers[Hl],at.type!==rc.type?this._updatedSources[rc.source]="clear":(this._updatedSources[rc.source]="reload",this.sourceCaches[rc.source].pause())}this._updateLayer(rc),rc.onAdd&&rc.onAdd(this.map)}}moveLayer(at,ot){if(this._checkLoaded(),this._changed=!0,!this._layers[at])return void this.fire(new st.k(new Error(`The layer '${at}' does not exist in the map's style and cannot be moved.`)));if(at===ot)return;const ut=this._order.indexOf(at);this._order.splice(ut,1);const Hl=ot?this._order.indexOf(ot):this._order.length;ot&&-1===Hl?this.fire(new st.k(new Error(`Cannot move layer "${at}" before non-existing layer "${ot}".`))):(this._order.splice(Hl,0,at),this._layerOrderChanged=!0)}removeLayer(at){this._checkLoaded();const ot=this._layers[at];if(!ot)return void this.fire(new st.k(new Error(`Cannot remove non-existing layer "${at}".`)));ot.setEventedParent(null);const ut=this._order.indexOf(at);this._order.splice(ut,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[at]=ot,delete this._layers[at],this._serializedLayers&&delete this._serializedLayers[at],delete this._updatedLayers[at],delete this._updatedPaintProps[at],ot.onRemove&&ot.onRemove(this.map)}getLayer(at){return this._layers[at]}getLayersOrder(){return[...this._order]}hasLayer(at){return at in this._layers}setLayerZoomRange(at,ot,ut){this._checkLoaded();const Hl=this.getLayer(at);Hl?Hl.minzoom===ot&&Hl.maxzoom===ut||(null!=ot&&(Hl.minzoom=ot),null!=ut&&(Hl.maxzoom=ut),this._updateLayer(Hl)):this.fire(new st.k(new Error(`Cannot set the zoom range of non-existing layer "${at}".`)))}setFilter(at,ot,ut={}){this._checkLoaded();const Hl=this.getLayer(at);if(Hl){if(!st.bG(Hl.filter,ot))return null==ot?(Hl.setFilter(void 0),void this._updateLayer(Hl)):void(this._validate(st.z.filter,`layers.${Hl.id}.filter`,ot,null,ut)||(Hl.setFilter(st.bJ(ot)),this._updateLayer(Hl)))}else this.fire(new st.k(new Error(`Cannot filter non-existing layer "${at}".`)))}getFilter(at){return st.bJ(this.getLayer(at).filter)}setLayoutProperty(at,ot,ut,Hl={}){this._checkLoaded();const rc=this.getLayer(at);rc?st.bG(rc.getLayoutProperty(ot),ut)||(rc.setLayoutProperty(ot,ut,Hl),this._updateLayer(rc)):this.fire(new st.k(new Error(`Cannot style non-existing layer "${at}".`)))}getLayoutProperty(at,ot){const ut=this.getLayer(at);if(ut)return ut.getLayoutProperty(ot);this.fire(new st.k(new Error(`Cannot get style of non-existing layer "${at}".`)))}setPaintProperty(at,ot,ut,Hl={}){this._checkLoaded();const rc=this.getLayer(at);rc?st.bG(rc.getPaintProperty(ot),ut)||(rc.setPaintProperty(ot,ut,Hl)&&this._updateLayer(rc),this._changed=!0,this._updatedPaintProps[at]=!0,this._serializedLayers=null):this.fire(new st.k(new Error(`Cannot style non-existing layer "${at}".`)))}getPaintProperty(at,st){return this.getLayer(at).getPaintProperty(st)}setFeatureState(at,ot){this._checkLoaded();const ut=at.source,Hl=at.sourceLayer,rc=this.sourceCaches[ut];if(void 0===rc)return void this.fire(new st.k(new Error(`The source '${ut}' does not exist in the map's style.`)));const sc=rc.getSource().type;"geojson"===sc&&Hl?this.fire(new st.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):"vector"!==sc||Hl?(void 0===at.id&&this.fire(new st.k(new Error("The feature id parameter must be provided."))),rc.setFeatureState(Hl,at.id,ot)):this.fire(new st.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(at,ot){this._checkLoaded();const ut=at.source,Hl=this.sourceCaches[ut];if(void 0===Hl)return void this.fire(new st.k(new Error(`The source '${ut}' does not exist in the map's style.`)));const rc=Hl.getSource().type,sc="vector"===rc?at.sourceLayer:void 0;"vector"!==rc||sc?ot&&"string"!=typeof at.id&&"number"!=typeof at.id?this.fire(new st.k(new Error("A feature id is required to remove its specific state property."))):Hl.removeFeatureState(sc,at.id,ot):this.fire(new st.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(at){this._checkLoaded();const ot=at.source,ut=at.sourceLayer,Hl=this.sourceCaches[ot];if(void 0!==Hl)return"vector"!==Hl.getSource().type||ut?(void 0===at.id&&this.fire(new st.k(new Error("The feature id parameter must be provided."))),Hl.getFeatureState(ut,at.id)):void this.fire(new st.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new st.k(new Error(`The source '${ot}' does not exist in the map's style.`)))}getTransition(){return st.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const at=st.bM(this.sourceCaches,(at=>at.serialize())),ot=this._serializeByIds(this._order,!0),ut=this.map.getTerrain()||void 0,Hl=this.stylesheet;return st.bN({version:Hl.version,name:Hl.name,metadata:Hl.metadata,light:Hl.light,sky:Hl.sky,center:Hl.center,zoom:Hl.zoom,bearing:Hl.bearing,pitch:Hl.pitch,sprite:Hl.sprite,glyphs:Hl.glyphs,transition:Hl.transition,projection:Hl.projection,sources:at,layers:ot,terrain:ut},(at=>void 0!==at))}_updateLayer(at){this._updatedLayers[at.id]=!0,at.source&&!this._updatedSources[at.source]&&"raster"!==this.sourceCaches[at.source].getSource().type&&(this._updatedSources[at.source]="reload",this.sourceCaches[at.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(at){const t=at=>"fill-extrusion"===this._layers[at].type,st={},ot=[];for(let Hl=this._order.length-1;Hl>=0;Hl--){const ut=this._order[Hl];if(t(ut)){st[ut]=Hl;for(const st of at){const at=st[ut];if(at)for(const st of at)ot.push(st)}}}ot.sort(((at,st)=>st.intersectionZ-at.intersectionZ));const ut=[];for(let Hl=this._order.length-1;Hl>=0;Hl--){const rc=this._order[Hl];if(t(rc))for(let at=ot.length-1;at>=0;at--){const rc=ot[at].feature;if(st[rc.layer.id]<Hl)break;ut.push(rc),ot.pop()}else for(const st of at){const at=st[rc];if(at)for(const st of at)ut.push(st.feature)}}return ut}queryRenderedFeatures(at,ot,ut){ot&&ot.filter&&this._validate(st.z.filter,"queryRenderedFeatures.filter",ot.filter,null,ot);const Hl={};if(ot&&ot.layers){if(!(Array.isArray(ot.layers)||ot.layers instanceof Set))return this.fire(new st.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const at of ot.layers){const ot=this._layers[at];if(!ot)return this.fire(new st.k(new Error(`The layer '${at}' does not exist in the map's style and cannot be queried for features.`))),[];Hl[ot.source]=!0}}const rc=[];ot.availableImages=this._availableImages;const sc=this._serializedAllLayers(),oc=ot.layers instanceof Set?ot.layers:Array.isArray(ot.layers)?new Set(ot.layers):null,_c=Object.assign(Object.assign({},ot),{layers:oc});for(const st in this.sourceCaches)ot.layers&&!Hl[st]||rc.push(j(this.sourceCaches[st],this._layers,sc,at,_c,ut,this.map.terrain?(at,st,ot)=>this.map.terrain.getElevation(at,st,ot):void 0));return this.placement&&rc.push(function(at,st,ot,ut,Hl,rc,sc){const oc={},_c=rc.queryRenderedSymbols(ut),wc=[];for(const Sc of Object.keys(_c).map(Number))wc.push(sc[Sc]);wc.sort(N);for(const Sc of wc){const ot=Sc.featureIndex.lookupSymbolFeatures(_c[Sc.bucketInstanceId],st,Sc.bucketIndex,Sc.sourceLayerIndex,Hl.filter,Hl.layers,Hl.availableImages,at);for(const at in ot){const st=oc[at]=oc[at]||[],ut=ot[at];ut.sort(((at,st)=>{const ot=Sc.featureSortOrder;if(ot){const ut=ot.indexOf(at.featureIndex);return ot.indexOf(st.featureIndex)-ut}return st.featureIndex-at.featureIndex}));for(const at of ut)st.push(at)}}return function(at,st,ot){for(const ut in at)for(const Hl of at[ut])Z(Hl,ot[st[ut].source]);return at}(oc,at,ot)}(this._layers,sc,this.sourceCaches,at,_c,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(rc)}querySourceFeatures(at,ot){ot&&ot.filter&&this._validate(st.z.filter,"querySourceFeatures.filter",ot.filter,null,ot);const ut=this.sourceCaches[at];return ut?function(at,st){const ot=at.getRenderableIds().map((st=>at.getTileByID(st))),ut=[],Hl={};for(let rc=0;rc<ot.length;rc++){const at=ot[rc],sc=at.tileID.canonical.key;Hl[sc]||(Hl[sc]=!0,at.querySourceFeatures(ut,st))}return ut}(ut,ot):[]}getLight(){return this.light.getLight()}setLight(at,ot={}){this._checkLoaded();const ut=this.light.getLight();let Hl=!1;for(const rc in at)if(!st.bG(at[rc],ut[rc])){Hl=!0;break}if(!Hl)return;const sc={now:rc.now(),transition:st.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(at,ot),this.light.updateTransitions(sc)}getProjection(){var at;return null===(at=this.stylesheet)||void 0===at?void 0:at.projection}setProjection(at){if(this._checkLoaded(),this.projection){if(this.projection.name===at.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=at,this._setProjectionInternal(at.type)}getSky(){var at;return null===(at=this.stylesheet)||void 0===at?void 0:at.sky}setSky(at,ot={}){this._checkLoaded();const ut=this.getSky();let Hl=!1;if(!at&&!ut)return;if(at&&!ut)Hl=!0;else if(!at&&ut)Hl=!0;else for(const rc in at)if(!st.bG(at[rc],ut[rc])){Hl=!0;break}if(!Hl)return;const sc={now:rc.now(),transition:st.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=at,this.sky.setSky(at,ot),this.sky.updateTransitions(sc)}_setProjectionInternal(at){const ot=function(at){if(Array.isArray(at)){const st=new Jt({type:at});return{projection:st,transform:new gi,cameraHelper:new bi(st)}}switch(at){case"mercator":return{projection:new It,transform:new Lt,cameraHelper:new Ot};case"globe":{const at=new Jt({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:at,transform:new gi,cameraHelper:new bi(at)}}case"vertical-perspective":return{projection:new Yt,transform:new fi,cameraHelper:new vi};default:return st.w(`Unknown projection name: ${at}. Falling back to mercator projection.`),{projection:new It,transform:new Lt,cameraHelper:new Ot}}}(at);this.projection=ot.projection,this.map.migrateProjection(ot.transform,ot.cameraHelper);for(const st in this.sourceCaches)this.sourceCaches[st].reload()}_validate(at,ot,ut,Hl,rc={}){return(!rc||!1!==rc.validate)&&xi(this,at.call(st.z,st.e({key:ot,style:this.serialize(),value:ut,styleSpec:st.v},Hl)))}_remove(at=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),oe().off(yu,this._rtlPluginLoaded);for(const st in this._layers)this._layers[st].setEventedParent(null);for(const st in this.sourceCaches){const at=this.sourceCaches[st];at.setEventedParent(null),at.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),at&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(at)}_clearSource(at){this.sourceCaches[at].clearTiles()}_reloadSource(at){this.sourceCaches[at].resume(),this.sourceCaches[at].reload()}_updateSources(at){for(const st in this.sourceCaches)this.sourceCaches[st].update(at,this.map.terrain)}_generateCollisionBoxes(){for(const at in this.sourceCaches)this._reloadSource(at)}_updatePlacement(at,st,ot,ut,Hl=!1){let sc=!1,oc=!1;const _c={};for(const rc of this._order){const st=this._layers[rc];if("symbol"!==st.type)continue;if(!_c[st.source]){const at=this.sourceCaches[st.source];_c[st.source]=at.getRenderableIds(!0).map((st=>at.getTileByID(st))).sort(((at,st)=>st.tileID.overscaledZ-at.tileID.overscaledZ||(at.tileID.isLessThan(st.tileID)?-1:1)))}const ot=this.crossTileSymbolIndex.addLayer(st,_c[st.source],at.center.lng);sc=sc||ot}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((Hl=Hl||this._layerOrderChanged||0===ot)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(rc.now(),at.zoom))&&(this.pauseablePlacement=new _t(at,this.map.terrain,this._order,Hl,st,ot,ut,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,_c),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(rc.now()),oc=!0),sc&&this.pauseablePlacement.placement.setStale()),oc||sc)for(const rc of this._order){const at=this._layers[rc];"symbol"===at.type&&this.placement.updateLayerOpacities(at,_c[at.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(rc.now())}_releaseSymbolFadeTiles(){for(const at in this.sourceCaches)this.sourceCaches[at].releaseSymbolFadeTiles()}getImages(at,ot){return st._(this,void 0,void 0,(function*(){const at=yield this.imageManager.getImages(ot.icons);this._updateTilesForChangedImages();const st=this.sourceCaches[ot.source];return st&&st.setDependencies(ot.tileID.key,ot.type,ot.icons),at}))}getGlyphs(at,ot){return st._(this,void 0,void 0,(function*(){const at=yield this.glyphManager.getGlyphs(ot.stacks),st=this.sourceCaches[ot.source];return st&&st.setDependencies(ot.tileID.key,ot.type,[""]),at}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(at,ot={}){this._checkLoaded(),at&&this._validate(st.z.glyphs,"glyphs",at,null,ot)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=at,this.glyphManager.entries={},this.glyphManager.setURL(at))}addSprite(at,ot,ut={},Hl){this._checkLoaded();const rc=[{id:at,url:ot}],sc=[...f(this.stylesheet.sprite),...rc];this._validate(st.z.sprite,"sprite",sc,null,ut)||(this.stylesheet.sprite=sc,this._loadSprite(rc,!0,Hl))}removeSprite(at){this._checkLoaded();const ot=f(this.stylesheet.sprite);if(ot.find((st=>st.id===at))){if(this._spritesImagesIds[at])for(const st of this._spritesImagesIds[at])this.imageManager.removeImage(st),this._changedImages[st]=!0;ot.splice(ot.findIndex((st=>st.id===at)),1),this.stylesheet.sprite=ot.length>0?ot:void 0,delete this._spritesImagesIds[at],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new st.l("data",{dataType:"style"}))}else this.fire(new st.k(new Error(`Sprite "${at}" doesn't exists on this map.`)))}getSprite(){return f(this.stylesheet.sprite)}setSprite(at,ot={},ut){this._checkLoaded(),at&&this._validate(st.z.sprite,"sprite",at,null,ot)||(this.stylesheet.sprite=at,at?this._loadSprite(at,!0,ut):(this._unloadSprite(),ut&&ut(null)))}}var _d=st.aI([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Pi{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(at,st,ot,ut,Hl,rc,sc,oc,_c){this.context=at;let wc=this.boundPaintVertexBuffers.length!==ut.length;for(let Sc=0;!wc&&Sc<ut.length;Sc++)this.boundPaintVertexBuffers[Sc]!==ut[Sc]&&(wc=!0);!this.vao||this.boundProgram!==st||this.boundLayoutVertexBuffer!==ot||wc||this.boundIndexBuffer!==Hl||this.boundVertexOffset!==rc||this.boundDynamicVertexBuffer!==sc||this.boundDynamicVertexBuffer2!==oc||this.boundDynamicVertexBuffer3!==_c?this.freshBind(st,ot,ut,Hl,rc,sc,oc,_c):(at.bindVertexArray.set(this.vao),sc&&sc.bind(),Hl&&Hl.dynamicDraw&&Hl.bind(),oc&&oc.bind(),_c&&_c.bind())}freshBind(at,st,ot,ut,Hl,rc,sc,oc){const _c=at.numAttributes,wc=this.context,Sc=wc.gl;this.vao&&this.destroy(),this.vao=wc.createVertexArray(),wc.bindVertexArray.set(this.vao),this.boundProgram=at,this.boundLayoutVertexBuffer=st,this.boundPaintVertexBuffers=ot,this.boundIndexBuffer=ut,this.boundVertexOffset=Hl,this.boundDynamicVertexBuffer=rc,this.boundDynamicVertexBuffer2=sc,this.boundDynamicVertexBuffer3=oc,st.enableAttributes(Sc,at);for(const iu of ot)iu.enableAttributes(Sc,at);rc&&rc.enableAttributes(Sc,at),sc&&sc.enableAttributes(Sc,at),oc&&oc.enableAttributes(Sc,at),st.bind(),st.setVertexAttribPointers(Sc,at,Hl);for(const iu of ot)iu.bind(),iu.setVertexAttribPointers(Sc,at,Hl);rc&&(rc.bind(),rc.setVertexAttribPointers(Sc,at,Hl)),ut&&ut.bind(),sc&&(sc.bind(),sc.setVertexAttribPointers(Sc,at,Hl)),oc&&(oc.bind(),oc.setVertexAttribPointers(Sc,at,Hl)),wc.currentNumAttributes=_c}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const Ci=(at,ot,ut,Hl,rc)=>({u_texture:0,u_ele_delta:at,u_fog_matrix:ot,u_fog_color:ut?ut.properties.get("fog-color"):st.be.white,u_fog_ground_blend:ut?ut.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:rc?0:ut?ut.calculateFogBlendOpacity(Hl):0,u_horizon_color:ut?ut.properties.get("horizon-color"):st.be.white,u_horizon_fog_blend:ut?ut.properties.get("horizon-fog-blend"):1,u_is_globe_mode:rc?1:0}),xd={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Mi(at){const st=[];for(let ot=0;ot<at.length;ot++){if(null===at[ot])continue;const ut=at[ot].split(" ");st.push(ut.pop())}return st}class Si{constructor(at,ot,ut,Hl,rc,sc,oc,_c,wc=[]){const Sc=at.gl;this.program=Sc.createProgram();const iu=Mi(ot.staticAttributes),su=ut?ut.getBinderAttributes():[],lu=iu.concat(su),cu=cd.prelude.staticUniforms?Mi(cd.prelude.staticUniforms):[],uu=oc.staticUniforms?Mi(oc.staticUniforms):[],pu=ot.staticUniforms?Mi(ot.staticUniforms):[],mu=ut?ut.getBinderUniforms():[],gu=cu.concat(uu).concat(pu).concat(mu),Au=[];for(const st of gu)Au.indexOf(st)<0&&Au.push(st);const yu=ut?ut.defines():[];qt(Sc)&&yu.unshift("#version 300 es"),rc&&yu.push("#define OVERDRAW_INSPECTOR;"),sc&&yu.push("#define TERRAIN3D;"),_c&&yu.push(_c),wc&&yu.push(...wc);let _u=yu.concat(cd.prelude.fragmentSource,oc.fragmentSource,ot.fragmentSource).join("\n"),xu=yu.concat(cd.prelude.vertexSource,oc.vertexSource,ot.vertexSource).join("\n");qt(Sc)||(_u=function(at){return at.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(_u),xu=function(at){return at.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(xu));const Su=Sc.createShader(Sc.FRAGMENT_SHADER);if(Sc.isContextLost())return void(this.failedToCreate=!0);if(Sc.shaderSource(Su,_u),Sc.compileShader(Su),!Sc.getShaderParameter(Su,Sc.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${Sc.getShaderInfoLog(Su)}`);Sc.attachShader(this.program,Su);const Du=Sc.createShader(Sc.VERTEX_SHADER);if(Sc.isContextLost())return void(this.failedToCreate=!0);if(Sc.shaderSource(Du,xu),Sc.compileShader(Du),!Sc.getShaderParameter(Du,Sc.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${Sc.getShaderInfoLog(Du)}`);Sc.attachShader(this.program,Du),this.attributes={};const Lu={};this.numAttributes=lu.length;for(let st=0;st<this.numAttributes;st++)lu[st]&&(Sc.bindAttribLocation(this.program,st,lu[st]),this.attributes[lu[st]]=st);if(Sc.linkProgram(this.program),!Sc.getProgramParameter(this.program,Sc.LINK_STATUS))throw new Error(`Program failed to link: ${Sc.getProgramInfoLog(this.program)}`);Sc.deleteShader(Du),Sc.deleteShader(Su);for(let st=0;st<Au.length;st++){const at=Au[st];if(at&&!Lu[at]){const st=Sc.getUniformLocation(this.program,at);st&&(Lu[at]=st)}}this.fixedUniforms=Hl(at,Lu),this.terrainUniforms=((at,ot)=>({u_depth:new st.bO(at,ot.u_depth),u_terrain:new st.bO(at,ot.u_terrain),u_terrain_dim:new st.bf(at,ot.u_terrain_dim),u_terrain_matrix:new st.bQ(at,ot.u_terrain_matrix),u_terrain_unpack:new st.bR(at,ot.u_terrain_unpack),u_terrain_exaggeration:new st.bf(at,ot.u_terrain_exaggeration)}))(at,Lu),this.projectionUniforms=((at,ot)=>({u_projection_matrix:new st.bQ(at,ot.u_projection_matrix),u_projection_tile_mercator_coords:new st.bR(at,ot.u_projection_tile_mercator_coords),u_projection_clipping_plane:new st.bR(at,ot.u_projection_clipping_plane),u_projection_transition:new st.bf(at,ot.u_projection_transition),u_projection_fallback_matrix:new st.bQ(at,ot.u_projection_fallback_matrix)}))(at,Lu),this.binderUniforms=ut?ut.getUniforms(at,Lu):[]}draw(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu,pu,mu,gu){const Au=at.gl;if(this.failedToCreate)return;if(at.program.set(this.program),at.setDepthMode(ot),at.setStencilMode(ut),at.setColorMode(Hl),at.setCullFace(rc),oc){at.activeTexture.set(Au.TEXTURE2),Au.bindTexture(Au.TEXTURE_2D,oc.depthTexture),at.activeTexture.set(Au.TEXTURE3),Au.bindTexture(Au.TEXTURE_2D,oc.texture);for(const at in this.terrainUniforms)this.terrainUniforms[at].set(oc[at])}if(_c)for(const _u in _c)this.projectionUniforms[xd[_u]].set(_c[_u]);if(sc)for(const _u in this.fixedUniforms)this.fixedUniforms[_u].set(sc[_u]);uu&&uu.setUniforms(at,this.binderUniforms,lu,{zoom:cu});let yu=0;switch(st){case Au.LINES:yu=2;break;case Au.TRIANGLES:yu=3;break;case Au.LINE_STRIP:yu=1}for(const _u of su.get()){const ot=_u.vaos||(_u.vaos={});(ot[wc]||(ot[wc]=new Pi)).bind(at,this,Sc,uu?uu.getPaintVertexBuffers():[],iu,_u.vertexOffset,pu,mu,gu),Au.drawElements(st,_u.primitiveLength*yu,Au.UNSIGNED_SHORT,_u.primitiveOffset*yu*2)}}}function Ei(at,ot,ut){const Hl=1/st.aB(ut,1,ot.transform.tileZoom),rc=Math.pow(2,ut.tileID.overscaledZ),sc=ut.tileSize*Math.pow(2,ot.transform.tileZoom)/rc,oc=sc*(ut.tileID.canonical.x+ut.tileID.wrap*rc),_c=sc*ut.tileID.canonical.y;return{u_image:0,u_texsize:ut.imageAtlasTexture.size,u_scale:[Hl,at.fromScale,at.toScale],u_fade:at.t,u_pixel_coord_upper:[oc>>16,_c>>16],u_pixel_coord_lower:[65535&oc,65535&_c]}}const Ri=(at,ot,ut,Hl)=>{const rc=at.style.light,sc=rc.properties.get("position"),oc=[sc.x,sc.y,sc.z],_c=st.bU();"viewport"===rc.properties.get("anchor")&&st.bV(_c,at.transform.bearingInRadians),st.bW(oc,oc,_c);const wc=at.transform.transformLightDirection(oc),Sc=rc.properties.get("color");return{u_lightpos:oc,u_lightpos_globe:wc,u_lightintensity:rc.properties.get("intensity"),u_lightcolor:[Sc.r,Sc.g,Sc.b],u_vertical_gradient:+ot,u_opacity:ut,u_fill_translate:Hl}},zi=(at,ot,ut,Hl,rc,sc,oc)=>st.e(Ri(at,ot,ut,Hl),Ei(sc,at,oc),{u_height_factor:-Math.pow(2,rc.overscaledZ)/oc.tileSize/8}),Di=(at,ot,ut,Hl)=>st.e(Ei(ot,at,ut),{u_fill_translate:Hl}),Ai=(at,st)=>({u_world:at,u_fill_translate:st}),Li=(at,ot,ut,Hl,rc)=>st.e(Di(at,ot,ut,rc),{u_world:Hl}),ki=(at,ot,ut,Hl,rc)=>{const sc=at.transform;let oc,_c,wc=0;if("map"===ut.paint.get("circle-pitch-alignment")){const at=st.aB(ot,1,sc.zoom);oc=!0,_c=[at,at],wc=at/(st.$*Math.pow(2,ot.tileID.overscaledZ))*2*Math.PI*rc}else oc=!1,_c=sc.pixelsToGLUnits;return{u_camera_to_center_distance:sc.cameraToCenterDistance,u_scale_with_map:+("map"===ut.paint.get("circle-pitch-scale")),u_pitch_with_map:+oc,u_device_pixel_ratio:at.pixelRatio,u_extrude_scale:_c,u_globe_extrude_scale:wc,u_translate:Hl}},Fi=at=>({u_pixel_extrude_scale:[1/at.width,1/at.height]}),Bi=at=>({u_viewport_size:[at.width,at.height]}),Oi=(at,st=1)=>({u_color:at,u_overlay:0,u_overlay_scale:st}),ji=(at,ot,ut,Hl)=>{const rc=st.aB(at,1,ot)/(st.$*Math.pow(2,at.tileID.overscaledZ))*2*Math.PI*Hl;return{u_extrude_scale:st.aB(at,1,ot),u_intensity:ut,u_globe_extrude_scale:rc}},Ni=(at,ot,ut,Hl)=>{const rc=st.L();st.bX(rc,0,at.width,at.height,0,0,1);const sc=at.context.gl;return{u_matrix:rc,u_world:[sc.drawingBufferWidth,sc.drawingBufferHeight],u_image:ut,u_color_ramp:Hl,u_opacity:ot.paint.get("heatmap-opacity")}},Zi=(at,st,ot)=>{const ut=ot.paint.get("hillshade-accent-color");let Hl;switch(ot.paint.get("hillshade-method")){case"basic":Hl=4;break;case"combined":Hl=1;break;case"igor":Hl=2;break;case"multidirectional":Hl=3;break;default:Hl=0}const rc=ot.getIlluminationProperties();for(let sc=0;sc<rc.directionRadians.length;sc++)"viewport"===ot.paint.get("hillshade-illumination-anchor")&&(rc.directionRadians[sc]+=at.transform.bearingInRadians);return{u_image:0,u_latrange:Gi(0,st.tileID),u_exaggeration:ot.paint.get("hillshade-exaggeration"),u_altitudes:rc.altitudeRadians,u_azimuths:rc.directionRadians,u_accent:ut,u_method:Hl,u_highlights:rc.highlightColor,u_shadows:rc.shadowColor}},Ui=(at,ot)=>{const ut=ot.stride,Hl=st.L();return st.bX(Hl,0,st.$,-8192,0,0,1),st.M(Hl,Hl,[0,-8192,0]),{u_matrix:Hl,u_image:1,u_dimension:[ut,ut],u_zoom:at.overscaledZ,u_unpack:ot.getUnpackVector()}};function Gi(at,ot){const ut=Math.pow(2,ot.canonical.z),Hl=ot.canonical.y;return[new st.a0(0,Hl/ut).toLngLat().lat,new st.a0(0,(Hl+1)/ut).toLngLat().lat]}const Vi=(at,st)=>({u_image:0,u_unpack:st.getUnpackVector(),u_dimension:[st.stride,st.stride],u_elevation_stops:1,u_color_stops:4,u_opacity:at.paint.get("color-relief-opacity")}),$i=(at,ot,ut,Hl)=>{const rc=at.transform;return{u_translation:Ki(at,ot,ut),u_ratio:Hl/st.aB(ot,1,rc.zoom),u_device_pixel_ratio:at.pixelRatio,u_units_to_pixels:[1/rc.pixelsToGLUnits[0],1/rc.pixelsToGLUnits[1]]}},qi=(at,ot,ut,Hl,rc)=>st.e($i(at,ot,ut,Hl),{u_image:0,u_image_height:rc}),Wi=(at,ot,ut,Hl,rc)=>{const sc=at.transform,oc=Xi(ot,sc);return{u_translation:Ki(at,ot,ut),u_texsize:ot.imageAtlasTexture.size,u_ratio:Hl/st.aB(ot,1,sc.zoom),u_device_pixel_ratio:at.pixelRatio,u_image:0,u_scale:[oc,rc.fromScale,rc.toScale],u_fade:rc.t,u_units_to_pixels:[1/sc.pixelsToGLUnits[0],1/sc.pixelsToGLUnits[1]]}},Hi=(at,ot,ut,Hl,rc,sc)=>{const oc=at.lineAtlas,_c=Xi(ot,at.transform),wc="round"===ut.layout.get("line-cap"),Sc=oc.getDash(rc.from,wc),iu=oc.getDash(rc.to,wc),su=Sc.width*sc.fromScale,lu=iu.width*sc.toScale;return st.e($i(at,ot,ut,Hl),{u_patternscale_a:[_c/su,-Sc.height/2],u_patternscale_b:[_c/lu,-iu.height/2],u_sdfgamma:oc.width/(256*Math.min(su,lu)*at.pixelRatio)/2,u_image:0,u_tex_y_a:Sc.y,u_tex_y_b:iu.y,u_mix:sc.t})};function Xi(at,ot){return 1/st.aB(at,1,ot.tileZoom)}function Ki(at,ot,ut){return st.aC(at.transform,ot,ut.paint.get("line-translate"),ut.paint.get("line-translate-anchor"))}const Yi=(at,st,ot,ut,Hl)=>{return{u_tl_parent:at,u_scale_parent:st,u_buffer_scale:1,u_fade_t:ot.mix,u_opacity:ot.opacity*ut.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:ut.paint.get("raster-brightness-min"),u_brightness_high:ut.paint.get("raster-brightness-max"),u_saturation_factor:(sc=ut.paint.get("raster-saturation"),sc>0?1-1/(1.001-sc):-sc),u_contrast_factor:(rc=ut.paint.get("raster-contrast"),rc>0?1/(1-rc):1+rc),u_spin_weights:Qi(ut.paint.get("raster-hue-rotate")),u_coords_top:[Hl[0].x,Hl[0].y,Hl[1].x,Hl[1].y],u_coords_bottom:[Hl[3].x,Hl[3].y,Hl[2].x,Hl[2].y]};var rc,sc};function Qi(at){at*=Math.PI/180;const st=Math.sin(at),ot=Math.cos(at);return[(2*ot+1)/3,(-Math.sqrt(3)*st-ot+1)/3,(Math.sqrt(3)*st-ot+1)/3]}const Ji=(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su)=>{const lu=sc.transform;return{u_is_size_zoom_constant:+("constant"===at||"source"===at),u_is_size_feature_constant:+("constant"===at||"camera"===at),u_size_t:st?st.uSizeT:0,u_size:st?st.uSize:0,u_camera_to_center_distance:lu.cameraToCenterDistance,u_pitch:lu.pitch/360*2*Math.PI,u_rotate_symbol:+ot,u_aspect_ratio:lu.width/lu.height,u_fade_change:sc.options.fadeDuration?sc.symbolFadeChange:1,u_label_plane_matrix:oc,u_coord_matrix:_c,u_is_text:+Sc,u_pitch_with_map:+ut,u_is_along_line:Hl,u_is_variable_anchor:rc,u_texsize:iu,u_texture:0,u_translation:wc,u_pitched_scale:su}},eo=(at,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu)=>{const uu=oc.transform;return st.e(Ji(at,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,cu),{u_gamma_scale:Hl?Math.cos(uu.pitch*Math.PI/180)*uu.cameraToCenterDistance:1,u_device_pixel_ratio:oc.pixelRatio,u_is_halo:1})},to=(at,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu)=>st.e(eo(at,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,!0,iu,0,lu),{u_texsize_icon:su,u_texture_icon:1}),io=(at,st)=>({u_opacity:at,u_color:st}),oo=(at,ot,ut,Hl,rc)=>st.e(function(at,ot,ut,Hl){const rc=ut.imageManager.getPattern(at.from.toString()),sc=ut.imageManager.getPattern(at.to.toString()),{width:oc,height:_c}=ut.imageManager.getPixelSize(),wc=Math.pow(2,Hl.tileID.overscaledZ),Sc=Hl.tileSize*Math.pow(2,ut.transform.tileZoom)/wc,iu=Sc*(Hl.tileID.canonical.x+Hl.tileID.wrap*wc),su=Sc*Hl.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:rc.tl,u_pattern_br_a:rc.br,u_pattern_tl_b:sc.tl,u_pattern_br_b:sc.br,u_texsize:[oc,_c],u_mix:ot.t,u_pattern_size_a:rc.displaySize,u_pattern_size_b:sc.displaySize,u_scale_a:ot.fromScale,u_scale_b:ot.toScale,u_tile_units_to_pixels:1/st.aB(Hl,1,ut.transform.tileZoom),u_pixel_coord_upper:[iu>>16,su>>16],u_pixel_coord_lower:[65535&iu,65535&su]}}(ut,rc,ot,Hl),{u_opacity:at}),ro=(at,st)=>{},bd={fillExtrusion:(at,ot)=>({u_lightpos:new st.bS(at,ot.u_lightpos),u_lightpos_globe:new st.bS(at,ot.u_lightpos_globe),u_lightintensity:new st.bf(at,ot.u_lightintensity),u_lightcolor:new st.bS(at,ot.u_lightcolor),u_vertical_gradient:new st.bf(at,ot.u_vertical_gradient),u_opacity:new st.bf(at,ot.u_opacity),u_fill_translate:new st.bT(at,ot.u_fill_translate)}),fillExtrusionPattern:(at,ot)=>({u_lightpos:new st.bS(at,ot.u_lightpos),u_lightpos_globe:new st.bS(at,ot.u_lightpos_globe),u_lightintensity:new st.bf(at,ot.u_lightintensity),u_lightcolor:new st.bS(at,ot.u_lightcolor),u_vertical_gradient:new st.bf(at,ot.u_vertical_gradient),u_height_factor:new st.bf(at,ot.u_height_factor),u_opacity:new st.bf(at,ot.u_opacity),u_fill_translate:new st.bT(at,ot.u_fill_translate),u_image:new st.bO(at,ot.u_image),u_texsize:new st.bT(at,ot.u_texsize),u_pixel_coord_upper:new st.bT(at,ot.u_pixel_coord_upper),u_pixel_coord_lower:new st.bT(at,ot.u_pixel_coord_lower),u_scale:new st.bS(at,ot.u_scale),u_fade:new st.bf(at,ot.u_fade)}),fill:(at,ot)=>({u_fill_translate:new st.bT(at,ot.u_fill_translate)}),fillPattern:(at,ot)=>({u_image:new st.bO(at,ot.u_image),u_texsize:new st.bT(at,ot.u_texsize),u_pixel_coord_upper:new st.bT(at,ot.u_pixel_coord_upper),u_pixel_coord_lower:new st.bT(at,ot.u_pixel_coord_lower),u_scale:new st.bS(at,ot.u_scale),u_fade:new st.bf(at,ot.u_fade),u_fill_translate:new st.bT(at,ot.u_fill_translate)}),fillOutline:(at,ot)=>({u_world:new st.bT(at,ot.u_world),u_fill_translate:new st.bT(at,ot.u_fill_translate)}),fillOutlinePattern:(at,ot)=>({u_world:new st.bT(at,ot.u_world),u_image:new st.bO(at,ot.u_image),u_texsize:new st.bT(at,ot.u_texsize),u_pixel_coord_upper:new st.bT(at,ot.u_pixel_coord_upper),u_pixel_coord_lower:new st.bT(at,ot.u_pixel_coord_lower),u_scale:new st.bS(at,ot.u_scale),u_fade:new st.bf(at,ot.u_fade),u_fill_translate:new st.bT(at,ot.u_fill_translate)}),circle:(at,ot)=>({u_camera_to_center_distance:new st.bf(at,ot.u_camera_to_center_distance),u_scale_with_map:new st.bO(at,ot.u_scale_with_map),u_pitch_with_map:new st.bO(at,ot.u_pitch_with_map),u_extrude_scale:new st.bT(at,ot.u_extrude_scale),u_device_pixel_ratio:new st.bf(at,ot.u_device_pixel_ratio),u_globe_extrude_scale:new st.bf(at,ot.u_globe_extrude_scale),u_translate:new st.bT(at,ot.u_translate)}),collisionBox:(at,ot)=>({u_pixel_extrude_scale:new st.bT(at,ot.u_pixel_extrude_scale)}),collisionCircle:(at,ot)=>({u_viewport_size:new st.bT(at,ot.u_viewport_size)}),debug:(at,ot)=>({u_color:new st.bP(at,ot.u_color),u_overlay:new st.bO(at,ot.u_overlay),u_overlay_scale:new st.bf(at,ot.u_overlay_scale)}),depth:ro,clippingMask:ro,heatmap:(at,ot)=>({u_extrude_scale:new st.bf(at,ot.u_extrude_scale),u_intensity:new st.bf(at,ot.u_intensity),u_globe_extrude_scale:new st.bf(at,ot.u_globe_extrude_scale)}),heatmapTexture:(at,ot)=>({u_matrix:new st.bQ(at,ot.u_matrix),u_world:new st.bT(at,ot.u_world),u_image:new st.bO(at,ot.u_image),u_color_ramp:new st.bO(at,ot.u_color_ramp),u_opacity:new st.bf(at,ot.u_opacity)}),hillshade:(at,ot)=>({u_image:new st.bO(at,ot.u_image),u_latrange:new st.bT(at,ot.u_latrange),u_exaggeration:new st.bf(at,ot.u_exaggeration),u_altitudes:new st.bZ(at,ot.u_altitudes),u_azimuths:new st.bZ(at,ot.u_azimuths),u_accent:new st.bP(at,ot.u_accent),u_method:new st.bO(at,ot.u_method),u_shadows:new st.bY(at,ot.u_shadows),u_highlights:new st.bY(at,ot.u_highlights)}),hillshadePrepare:(at,ot)=>({u_matrix:new st.bQ(at,ot.u_matrix),u_image:new st.bO(at,ot.u_image),u_dimension:new st.bT(at,ot.u_dimension),u_zoom:new st.bf(at,ot.u_zoom),u_unpack:new st.bR(at,ot.u_unpack)}),colorRelief:(at,ot)=>({u_image:new st.bO(at,ot.u_image),u_unpack:new st.bR(at,ot.u_unpack),u_dimension:new st.bT(at,ot.u_dimension),u_elevation_stops:new st.bO(at,ot.u_elevation_stops),u_color_stops:new st.bO(at,ot.u_color_stops),u_opacity:new st.bf(at,ot.u_opacity)}),line:(at,ot)=>({u_translation:new st.bT(at,ot.u_translation),u_ratio:new st.bf(at,ot.u_ratio),u_device_pixel_ratio:new st.bf(at,ot.u_device_pixel_ratio),u_units_to_pixels:new st.bT(at,ot.u_units_to_pixels)}),lineGradient:(at,ot)=>({u_translation:new st.bT(at,ot.u_translation),u_ratio:new st.bf(at,ot.u_ratio),u_device_pixel_ratio:new st.bf(at,ot.u_device_pixel_ratio),u_units_to_pixels:new st.bT(at,ot.u_units_to_pixels),u_image:new st.bO(at,ot.u_image),u_image_height:new st.bf(at,ot.u_image_height)}),linePattern:(at,ot)=>({u_translation:new st.bT(at,ot.u_translation),u_texsize:new st.bT(at,ot.u_texsize),u_ratio:new st.bf(at,ot.u_ratio),u_device_pixel_ratio:new st.bf(at,ot.u_device_pixel_ratio),u_image:new st.bO(at,ot.u_image),u_units_to_pixels:new st.bT(at,ot.u_units_to_pixels),u_scale:new st.bS(at,ot.u_scale),u_fade:new st.bf(at,ot.u_fade)}),lineSDF:(at,ot)=>({u_translation:new st.bT(at,ot.u_translation),u_ratio:new st.bf(at,ot.u_ratio),u_device_pixel_ratio:new st.bf(at,ot.u_device_pixel_ratio),u_units_to_pixels:new st.bT(at,ot.u_units_to_pixels),u_patternscale_a:new st.bT(at,ot.u_patternscale_a),u_patternscale_b:new st.bT(at,ot.u_patternscale_b),u_sdfgamma:new st.bf(at,ot.u_sdfgamma),u_image:new st.bO(at,ot.u_image),u_tex_y_a:new st.bf(at,ot.u_tex_y_a),u_tex_y_b:new st.bf(at,ot.u_tex_y_b),u_mix:new st.bf(at,ot.u_mix)}),raster:(at,ot)=>({u_tl_parent:new st.bT(at,ot.u_tl_parent),u_scale_parent:new st.bf(at,ot.u_scale_parent),u_buffer_scale:new st.bf(at,ot.u_buffer_scale),u_fade_t:new st.bf(at,ot.u_fade_t),u_opacity:new st.bf(at,ot.u_opacity),u_image0:new st.bO(at,ot.u_image0),u_image1:new st.bO(at,ot.u_image1),u_brightness_low:new st.bf(at,ot.u_brightness_low),u_brightness_high:new st.bf(at,ot.u_brightness_high),u_saturation_factor:new st.bf(at,ot.u_saturation_factor),u_contrast_factor:new st.bf(at,ot.u_contrast_factor),u_spin_weights:new st.bS(at,ot.u_spin_weights),u_coords_top:new st.bR(at,ot.u_coords_top),u_coords_bottom:new st.bR(at,ot.u_coords_bottom)}),symbolIcon:(at,ot)=>({u_is_size_zoom_constant:new st.bO(at,ot.u_is_size_zoom_constant),u_is_size_feature_constant:new st.bO(at,ot.u_is_size_feature_constant),u_size_t:new st.bf(at,ot.u_size_t),u_size:new st.bf(at,ot.u_size),u_camera_to_center_distance:new st.bf(at,ot.u_camera_to_center_distance),u_pitch:new st.bf(at,ot.u_pitch),u_rotate_symbol:new st.bO(at,ot.u_rotate_symbol),u_aspect_ratio:new st.bf(at,ot.u_aspect_ratio),u_fade_change:new st.bf(at,ot.u_fade_change),u_label_plane_matrix:new st.bQ(at,ot.u_label_plane_matrix),u_coord_matrix:new st.bQ(at,ot.u_coord_matrix),u_is_text:new st.bO(at,ot.u_is_text),u_pitch_with_map:new st.bO(at,ot.u_pitch_with_map),u_is_along_line:new st.bO(at,ot.u_is_along_line),u_is_variable_anchor:new st.bO(at,ot.u_is_variable_anchor),u_texsize:new st.bT(at,ot.u_texsize),u_texture:new st.bO(at,ot.u_texture),u_translation:new st.bT(at,ot.u_translation),u_pitched_scale:new st.bf(at,ot.u_pitched_scale)}),symbolSDF:(at,ot)=>({u_is_size_zoom_constant:new st.bO(at,ot.u_is_size_zoom_constant),u_is_size_feature_constant:new st.bO(at,ot.u_is_size_feature_constant),u_size_t:new st.bf(at,ot.u_size_t),u_size:new st.bf(at,ot.u_size),u_camera_to_center_distance:new st.bf(at,ot.u_camera_to_center_distance),u_pitch:new st.bf(at,ot.u_pitch),u_rotate_symbol:new st.bO(at,ot.u_rotate_symbol),u_aspect_ratio:new st.bf(at,ot.u_aspect_ratio),u_fade_change:new st.bf(at,ot.u_fade_change),u_label_plane_matrix:new st.bQ(at,ot.u_label_plane_matrix),u_coord_matrix:new st.bQ(at,ot.u_coord_matrix),u_is_text:new st.bO(at,ot.u_is_text),u_pitch_with_map:new st.bO(at,ot.u_pitch_with_map),u_is_along_line:new st.bO(at,ot.u_is_along_line),u_is_variable_anchor:new st.bO(at,ot.u_is_variable_anchor),u_texsize:new st.bT(at,ot.u_texsize),u_texture:new st.bO(at,ot.u_texture),u_gamma_scale:new st.bf(at,ot.u_gamma_scale),u_device_pixel_ratio:new st.bf(at,ot.u_device_pixel_ratio),u_is_halo:new st.bO(at,ot.u_is_halo),u_translation:new st.bT(at,ot.u_translation),u_pitched_scale:new st.bf(at,ot.u_pitched_scale)}),symbolTextAndIcon:(at,ot)=>({u_is_size_zoom_constant:new st.bO(at,ot.u_is_size_zoom_constant),u_is_size_feature_constant:new st.bO(at,ot.u_is_size_feature_constant),u_size_t:new st.bf(at,ot.u_size_t),u_size:new st.bf(at,ot.u_size),u_camera_to_center_distance:new st.bf(at,ot.u_camera_to_center_distance),u_pitch:new st.bf(at,ot.u_pitch),u_rotate_symbol:new st.bO(at,ot.u_rotate_symbol),u_aspect_ratio:new st.bf(at,ot.u_aspect_ratio),u_fade_change:new st.bf(at,ot.u_fade_change),u_label_plane_matrix:new st.bQ(at,ot.u_label_plane_matrix),u_coord_matrix:new st.bQ(at,ot.u_coord_matrix),u_is_text:new st.bO(at,ot.u_is_text),u_pitch_with_map:new st.bO(at,ot.u_pitch_with_map),u_is_along_line:new st.bO(at,ot.u_is_along_line),u_is_variable_anchor:new st.bO(at,ot.u_is_variable_anchor),u_texsize:new st.bT(at,ot.u_texsize),u_texsize_icon:new st.bT(at,ot.u_texsize_icon),u_texture:new st.bO(at,ot.u_texture),u_texture_icon:new st.bO(at,ot.u_texture_icon),u_gamma_scale:new st.bf(at,ot.u_gamma_scale),u_device_pixel_ratio:new st.bf(at,ot.u_device_pixel_ratio),u_is_halo:new st.bO(at,ot.u_is_halo),u_translation:new st.bT(at,ot.u_translation),u_pitched_scale:new st.bf(at,ot.u_pitched_scale)}),background:(at,ot)=>({u_opacity:new st.bf(at,ot.u_opacity),u_color:new st.bP(at,ot.u_color)}),backgroundPattern:(at,ot)=>({u_opacity:new st.bf(at,ot.u_opacity),u_image:new st.bO(at,ot.u_image),u_pattern_tl_a:new st.bT(at,ot.u_pattern_tl_a),u_pattern_br_a:new st.bT(at,ot.u_pattern_br_a),u_pattern_tl_b:new st.bT(at,ot.u_pattern_tl_b),u_pattern_br_b:new st.bT(at,ot.u_pattern_br_b),u_texsize:new st.bT(at,ot.u_texsize),u_mix:new st.bf(at,ot.u_mix),u_pattern_size_a:new st.bT(at,ot.u_pattern_size_a),u_pattern_size_b:new st.bT(at,ot.u_pattern_size_b),u_scale_a:new st.bf(at,ot.u_scale_a),u_scale_b:new st.bf(at,ot.u_scale_b),u_pixel_coord_upper:new st.bT(at,ot.u_pixel_coord_upper),u_pixel_coord_lower:new st.bT(at,ot.u_pixel_coord_lower),u_tile_units_to_pixels:new st.bf(at,ot.u_tile_units_to_pixels)}),terrain:(at,ot)=>({u_texture:new st.bO(at,ot.u_texture),u_ele_delta:new st.bf(at,ot.u_ele_delta),u_fog_matrix:new st.bQ(at,ot.u_fog_matrix),u_fog_color:new st.bP(at,ot.u_fog_color),u_fog_ground_blend:new st.bf(at,ot.u_fog_ground_blend),u_fog_ground_blend_opacity:new st.bf(at,ot.u_fog_ground_blend_opacity),u_horizon_color:new st.bP(at,ot.u_horizon_color),u_horizon_fog_blend:new st.bf(at,ot.u_horizon_fog_blend),u_is_globe_mode:new st.bf(at,ot.u_is_globe_mode)}),terrainDepth:(at,ot)=>({u_ele_delta:new st.bf(at,ot.u_ele_delta)}),terrainCoords:(at,ot)=>({u_texture:new st.bO(at,ot.u_texture),u_terrain_coords_id:new st.bf(at,ot.u_terrain_coords_id),u_ele_delta:new st.bf(at,ot.u_ele_delta)}),projectionErrorMeasurement:(at,ot)=>({u_input:new st.bf(at,ot.u_input),u_output_expected:new st.bf(at,ot.u_output_expected)}),atmosphere:(at,ot)=>({u_sun_pos:new st.bS(at,ot.u_sun_pos),u_atmosphere_blend:new st.bf(at,ot.u_atmosphere_blend),u_globe_position:new st.bS(at,ot.u_globe_position),u_globe_radius:new st.bf(at,ot.u_globe_radius),u_inv_proj_matrix:new st.bQ(at,ot.u_inv_proj_matrix)}),sky:(at,ot)=>({u_sky_color:new st.bP(at,ot.u_sky_color),u_horizon_color:new st.bP(at,ot.u_horizon_color),u_horizon:new st.bT(at,ot.u_horizon),u_horizon_normal:new st.bT(at,ot.u_horizon_normal),u_sky_horizon_blend:new st.bf(at,ot.u_sky_horizon_blend),u_sky_blend:new st.bf(at,ot.u_sky_blend)})};class so{constructor(at,st,ot){this.context=at;const ut=at.gl;this.buffer=ut.createBuffer(),this.dynamicDraw=Boolean(ot),this.context.unbindVAO(),at.bindElementBuffer.set(this.buffer),ut.bufferData(ut.ELEMENT_ARRAY_BUFFER,st.arrayBuffer,this.dynamicDraw?ut.DYNAMIC_DRAW:ut.STATIC_DRAW),this.dynamicDraw||delete st.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(at){const st=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),st.bufferSubData(st.ELEMENT_ARRAY_BUFFER,0,at.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const wd={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class lo{constructor(at,st,ot,ut){this.length=st.length,this.attributes=ot,this.itemSize=st.bytesPerElement,this.dynamicDraw=ut,this.context=at;const Hl=at.gl;this.buffer=Hl.createBuffer(),at.bindVertexBuffer.set(this.buffer),Hl.bufferData(Hl.ARRAY_BUFFER,st.arrayBuffer,this.dynamicDraw?Hl.DYNAMIC_DRAW:Hl.STATIC_DRAW),this.dynamicDraw||delete st.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(at){if(at.length!==this.length)throw new Error(`Length of new data is ${at.length}, which doesn't match current length of ${this.length}`);const st=this.context.gl;this.bind(),st.bufferSubData(st.ARRAY_BUFFER,0,at.arrayBuffer)}enableAttributes(at,st){for(let ot=0;ot<this.attributes.length;ot++){const ut=st.attributes[this.attributes[ot].name];void 0!==ut&&at.enableVertexAttribArray(ut)}}setVertexAttribPointers(at,st,ot){for(let ut=0;ut<this.attributes.length;ut++){const Hl=this.attributes[ut],rc=st.attributes[Hl.name];void 0!==rc&&at.vertexAttribPointer(rc,Hl.components,at[wd[Hl.type]],!1,this.itemSize,Hl.offset+this.itemSize*(ot||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class co{constructor(at){this.gl=at.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(at){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ho extends co{getDefault(){return st.be.transparent}set(at){const st=this.current;(at.r!==st.r||at.g!==st.g||at.b!==st.b||at.a!==st.a||this.dirty)&&(this.gl.clearColor(at.r,at.g,at.b,at.a),this.current=at,this.dirty=!1)}}class uo extends co{getDefault(){return 1}set(at){(at!==this.current||this.dirty)&&(this.gl.clearDepth(at),this.current=at,this.dirty=!1)}}class _o extends co{getDefault(){return 0}set(at){(at!==this.current||this.dirty)&&(this.gl.clearStencil(at),this.current=at,this.dirty=!1)}}class po extends co{getDefault(){return[!0,!0,!0,!0]}set(at){const st=this.current;(at[0]!==st[0]||at[1]!==st[1]||at[2]!==st[2]||at[3]!==st[3]||this.dirty)&&(this.gl.colorMask(at[0],at[1],at[2],at[3]),this.current=at,this.dirty=!1)}}class mo extends co{getDefault(){return!0}set(at){(at!==this.current||this.dirty)&&(this.gl.depthMask(at),this.current=at,this.dirty=!1)}}class fo extends co{getDefault(){return 255}set(at){(at!==this.current||this.dirty)&&(this.gl.stencilMask(at),this.current=at,this.dirty=!1)}}class go extends co{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(at){const st=this.current;(at.func!==st.func||at.ref!==st.ref||at.mask!==st.mask||this.dirty)&&(this.gl.stencilFunc(at.func,at.ref,at.mask),this.current=at,this.dirty=!1)}}class vo extends co{getDefault(){const at=this.gl;return[at.KEEP,at.KEEP,at.KEEP]}set(at){const st=this.current;(at[0]!==st[0]||at[1]!==st[1]||at[2]!==st[2]||this.dirty)&&(this.gl.stencilOp(at[0],at[1],at[2]),this.current=at,this.dirty=!1)}}class bo extends co{getDefault(){return!1}set(at){if(at===this.current&&!this.dirty)return;const st=this.gl;at?st.enable(st.STENCIL_TEST):st.disable(st.STENCIL_TEST),this.current=at,this.dirty=!1}}class xo extends co{getDefault(){return[0,1]}set(at){const st=this.current;(at[0]!==st[0]||at[1]!==st[1]||this.dirty)&&(this.gl.depthRange(at[0],at[1]),this.current=at,this.dirty=!1)}}class yo extends co{getDefault(){return!1}set(at){if(at===this.current&&!this.dirty)return;const st=this.gl;at?st.enable(st.DEPTH_TEST):st.disable(st.DEPTH_TEST),this.current=at,this.dirty=!1}}class wo extends co{getDefault(){return this.gl.LESS}set(at){(at!==this.current||this.dirty)&&(this.gl.depthFunc(at),this.current=at,this.dirty=!1)}}class To extends co{getDefault(){return!1}set(at){if(at===this.current&&!this.dirty)return;const st=this.gl;at?st.enable(st.BLEND):st.disable(st.BLEND),this.current=at,this.dirty=!1}}class Po extends co{getDefault(){const at=this.gl;return[at.ONE,at.ZERO]}set(at){const st=this.current;(at[0]!==st[0]||at[1]!==st[1]||this.dirty)&&(this.gl.blendFunc(at[0],at[1]),this.current=at,this.dirty=!1)}}class Co extends co{getDefault(){return st.be.transparent}set(at){const st=this.current;(at.r!==st.r||at.g!==st.g||at.b!==st.b||at.a!==st.a||this.dirty)&&(this.gl.blendColor(at.r,at.g,at.b,at.a),this.current=at,this.dirty=!1)}}class Io extends co{getDefault(){return this.gl.FUNC_ADD}set(at){(at!==this.current||this.dirty)&&(this.gl.blendEquation(at),this.current=at,this.dirty=!1)}}class Mo extends co{getDefault(){return!1}set(at){if(at===this.current&&!this.dirty)return;const st=this.gl;at?st.enable(st.CULL_FACE):st.disable(st.CULL_FACE),this.current=at,this.dirty=!1}}class So extends co{getDefault(){return this.gl.BACK}set(at){(at!==this.current||this.dirty)&&(this.gl.cullFace(at),this.current=at,this.dirty=!1)}}class Eo extends co{getDefault(){return this.gl.CCW}set(at){(at!==this.current||this.dirty)&&(this.gl.frontFace(at),this.current=at,this.dirty=!1)}}class Ro extends co{getDefault(){return null}set(at){(at!==this.current||this.dirty)&&(this.gl.useProgram(at),this.current=at,this.dirty=!1)}}class zo extends co{getDefault(){return this.gl.TEXTURE0}set(at){(at!==this.current||this.dirty)&&(this.gl.activeTexture(at),this.current=at,this.dirty=!1)}}class Do extends co{getDefault(){const at=this.gl;return[0,0,at.drawingBufferWidth,at.drawingBufferHeight]}set(at){const st=this.current;(at[0]!==st[0]||at[1]!==st[1]||at[2]!==st[2]||at[3]!==st[3]||this.dirty)&&(this.gl.viewport(at[0],at[1],at[2],at[3]),this.current=at,this.dirty=!1)}}class Ao extends co{getDefault(){return null}set(at){if(at===this.current&&!this.dirty)return;const st=this.gl;st.bindFramebuffer(st.FRAMEBUFFER,at),this.current=at,this.dirty=!1}}class Lo extends co{getDefault(){return null}set(at){if(at===this.current&&!this.dirty)return;const st=this.gl;st.bindRenderbuffer(st.RENDERBUFFER,at),this.current=at,this.dirty=!1}}class ko extends co{getDefault(){return null}set(at){if(at===this.current&&!this.dirty)return;const st=this.gl;st.bindTexture(st.TEXTURE_2D,at),this.current=at,this.dirty=!1}}class Fo extends co{getDefault(){return null}set(at){if(at===this.current&&!this.dirty)return;const st=this.gl;st.bindBuffer(st.ARRAY_BUFFER,at),this.current=at,this.dirty=!1}}class Bo extends co{getDefault(){return null}set(at){const st=this.gl;st.bindBuffer(st.ELEMENT_ARRAY_BUFFER,at),this.current=at,this.dirty=!1}}class Oo extends co{getDefault(){return null}set(at){var st;if(at===this.current&&!this.dirty)return;const ot=this.gl;qt(ot)?ot.bindVertexArray(at):null===(st=ot.getExtension("OES_vertex_array_object"))||void 0===st||st.bindVertexArrayOES(at),this.current=at,this.dirty=!1}}class jo extends co{getDefault(){return 4}set(at){if(at===this.current&&!this.dirty)return;const st=this.gl;st.pixelStorei(st.UNPACK_ALIGNMENT,at),this.current=at,this.dirty=!1}}class No extends co{getDefault(){return!1}set(at){if(at===this.current&&!this.dirty)return;const st=this.gl;st.pixelStorei(st.UNPACK_PREMULTIPLY_ALPHA_WEBGL,at),this.current=at,this.dirty=!1}}class Zo extends co{getDefault(){return!1}set(at){if(at===this.current&&!this.dirty)return;const st=this.gl;st.pixelStorei(st.UNPACK_FLIP_Y_WEBGL,at),this.current=at,this.dirty=!1}}class Uo extends co{constructor(at,st){super(at),this.context=at,this.parent=st}getDefault(){return null}}class Go extends Uo{setDirty(){this.dirty=!0}set(at){if(at===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const st=this.gl;st.framebufferTexture2D(st.FRAMEBUFFER,st.COLOR_ATTACHMENT0,st.TEXTURE_2D,at,0),this.current=at,this.dirty=!1}}class Vo extends Uo{set(at){if(at===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const st=this.gl;st.framebufferRenderbuffer(st.FRAMEBUFFER,st.DEPTH_ATTACHMENT,st.RENDERBUFFER,at),this.current=at,this.dirty=!1}}class $o extends Uo{set(at){if(at===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const st=this.gl;st.framebufferRenderbuffer(st.FRAMEBUFFER,st.DEPTH_STENCIL_ATTACHMENT,st.RENDERBUFFER,at),this.current=at,this.dirty=!1}}const Ed="Framebuffer is not complete";class Wo{constructor(at,st,ot,ut,Hl){this.context=at,this.width=st,this.height=ot;const rc=at.gl,sc=this.framebuffer=rc.createFramebuffer();if(this.colorAttachment=new Go(at,sc),ut)this.depthAttachment=Hl?new $o(at,sc):new Vo(at,sc);else if(Hl)throw new Error("Stencil cannot be set without depth");if(rc.checkFramebufferStatus(rc.FRAMEBUFFER)!==rc.FRAMEBUFFER_COMPLETE)throw new Error(Ed)}destroy(){const at=this.context.gl,st=this.colorAttachment.get();if(st&&at.deleteTexture(st),this.depthAttachment){const st=this.depthAttachment.get();st&&at.deleteRenderbuffer(st)}at.deleteFramebuffer(this.framebuffer)}}class Ho{constructor(at){var st,ot;if(this.gl=at,this.clearColor=new ho(this),this.clearDepth=new uo(this),this.clearStencil=new _o(this),this.colorMask=new po(this),this.depthMask=new mo(this),this.stencilMask=new fo(this),this.stencilFunc=new go(this),this.stencilOp=new vo(this),this.stencilTest=new bo(this),this.depthRange=new xo(this),this.depthTest=new yo(this),this.depthFunc=new wo(this),this.blend=new To(this),this.blendFunc=new Po(this),this.blendColor=new Co(this),this.blendEquation=new Io(this),this.cullFace=new Mo(this),this.cullFaceSide=new So(this),this.frontFace=new Eo(this),this.program=new Ro(this),this.activeTexture=new zo(this),this.viewport=new Do(this),this.bindFramebuffer=new Ao(this),this.bindRenderbuffer=new Lo(this),this.bindTexture=new ko(this),this.bindVertexBuffer=new Fo(this),this.bindElementBuffer=new Bo(this),this.bindVertexArray=new Oo(this),this.pixelStoreUnpack=new jo(this),this.pixelStoreUnpackPremultiplyAlpha=new No(this),this.pixelStoreUnpackFlipY=new Zo(this),this.extTextureFilterAnisotropic=at.getExtension("EXT_texture_filter_anisotropic")||at.getExtension("MOZ_EXT_texture_filter_anisotropic")||at.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=at.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=at.getParameter(at.MAX_TEXTURE_SIZE),qt(at)){this.HALF_FLOAT=at.HALF_FLOAT;const ut=at.getExtension("EXT_color_buffer_half_float");this.RGBA16F=null!==(st=at.RGBA16F)&&void 0!==st?st:null==ut?void 0:ut.RGBA16F_EXT,this.RGB16F=null!==(ot=at.RGB16F)&&void 0!==ot?ot:null==ut?void 0:ut.RGB16F_EXT,at.getExtension("EXT_color_buffer_float")}else{at.getExtension("EXT_color_buffer_half_float"),at.getExtension("OES_texture_half_float_linear");const st=at.getExtension("OES_texture_half_float");this.HALF_FLOAT=null==st?void 0:st.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(at,st){return new so(this,at,st)}createVertexBuffer(at,st,ot){return new lo(this,at,st,ot)}createRenderbuffer(at,st,ot){const ut=this.gl,Hl=ut.createRenderbuffer();return this.bindRenderbuffer.set(Hl),ut.renderbufferStorage(ut.RENDERBUFFER,at,st,ot),this.bindRenderbuffer.set(null),Hl}createFramebuffer(at,st,ot,ut){return new Wo(this,at,st,ot,ut)}clear({color:at,depth:st,stencil:ot}){const ut=this.gl;let Hl=0;at&&(Hl|=ut.COLOR_BUFFER_BIT,this.clearColor.set(at),this.colorMask.set([!0,!0,!0,!0])),void 0!==st&&(Hl|=ut.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(st),this.depthMask.set(!0)),void 0!==ot&&(Hl|=ut.STENCIL_BUFFER_BIT,this.clearStencil.set(ot),this.stencilMask.set(255)),ut.clear(Hl)}setCullFace(at){!1===at.enable?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(at.mode),this.frontFace.set(at.frontFace))}setDepthMode(at){at.func!==this.gl.ALWAYS||at.mask?(this.depthTest.set(!0),this.depthFunc.set(at.func),this.depthMask.set(at.mask),this.depthRange.set(at.range)):this.depthTest.set(!1)}setStencilMode(at){at.test.func!==this.gl.ALWAYS||at.mask?(this.stencilTest.set(!0),this.stencilMask.set(at.mask),this.stencilOp.set([at.fail,at.depthFail,at.pass]),this.stencilFunc.set({func:at.test.func,ref:at.ref,mask:at.test.mask})):this.stencilTest.set(!1)}setColorMode(at){st.bG(at.blendFunction,jt.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(at.blendFunction),this.blendColor.set(at.blendColor)),this.colorMask.set(at.mask)}createVertexArray(){var at;return qt(this.gl)?this.gl.createVertexArray():null===(at=this.gl.getExtension("OES_vertex_array_object"))||void 0===at?void 0:at.createVertexArrayOES()}deleteVertexArray(at){var st;return qt(this.gl)?this.gl.deleteVertexArray(at):null===(st=this.gl.getExtension("OES_vertex_array_object"))||void 0===st?void 0:st.deleteVertexArrayOES(at)}unbindVAO(){this.bindVertexArray.set(null)}}let Md;function Ko(at,ot,ut,Hl,rc){const sc=at.context,oc=at.transform,_c=sc.gl,wc=at.useProgram("collisionBox"),Sc=[];let iu=0,su=0;for(let st=0;st<Hl.length;st++){const lu=Hl[st],cu=ot.getTile(lu).getBucket(ut);if(!cu)continue;const uu=rc?cu.textCollisionBox:cu.iconCollisionBox,pu=cu.collisionCircleArray;pu.length>0&&(Sc.push({circleArray:pu,circleOffset:su,coord:lu}),iu+=pu.length/4,su=iu),uu&&wc.draw(sc,_c.LINES,Ut.disabled,Vt.disabled,at.colorModeForRenderPass(),Zt.disabled,Fi(at.transform),at.style.map.terrain&&at.style.map.terrain.getTerrainData(lu),oc.getProjectionData({overscaledTileID:lu,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ut.id,uu.layoutVertexBuffer,uu.indexBuffer,uu.segments,null,at.transform.zoom,null,null,uu.collisionVertexBuffer)}if(!rc||!Sc.length)return;const lu=at.useProgram("collisionCircle"),cu=new st.b_;cu.resize(4*iu),cu._trim();let uu=0;for(const st of Sc)for(let at=0;at<st.circleArray.length/4;at++){const ot=4*at,ut=st.circleArray[ot+0],Hl=st.circleArray[ot+1],rc=st.circleArray[ot+2],sc=st.circleArray[ot+3];cu.emplace(uu++,ut,Hl,rc,sc,0),cu.emplace(uu++,ut,Hl,rc,sc,1),cu.emplace(uu++,ut,Hl,rc,sc,2),cu.emplace(uu++,ut,Hl,rc,sc,3)}(!Md||Md.length<2*iu)&&(Md=function(at){const ot=2*at,ut=new st.c0;ut.resize(ot),ut._trim();for(let st=0;st<ot;st++){const at=6*st;ut.uint16[at+0]=4*st+0,ut.uint16[at+1]=4*st+1,ut.uint16[at+2]=4*st+2,ut.uint16[at+3]=4*st+2,ut.uint16[at+4]=4*st+3,ut.uint16[at+5]=4*st+0}return ut}(iu));const pu=sc.createIndexBuffer(Md,!0),mu=sc.createVertexBuffer(cu,st.b$.members,!0);for(const gu of Sc){const ot=Bi(at.transform);lu.draw(sc,_c.TRIANGLES,Ut.disabled,Vt.disabled,at.colorModeForRenderPass(),Zt.disabled,ot,at.style.map.terrain&&at.style.map.terrain.getTerrainData(gu.coord),null,ut.id,mu,pu,st.aL.simpleSegment(0,2*gu.circleOffset,gu.circleArray.length,gu.circleArray.length/2),null,at.transform.zoom,null,null,null)}mu.destroy(),pu.destroy()}const Sd=st.af(new Float32Array(16));function Qo(at,ot,ut,Hl,rc,sc){const{horizontalAlign:oc,verticalAlign:_c}=st.aG(at);return new st.P((-(oc-.5)*ot/rc+Hl[0])*sc,(-(_c-.5)*ut/rc+Hl[1])*sc)}function Jo(at,ot,ut,Hl,rc,sc){const oc=ot.tileAnchorPoint.add(new st.P(ot.translation[0],ot.translation[1]));if(ot.pitchWithMap){let at=Hl.mult(sc);ut||(at=at.rotate(-rc));const st=oc.add(at);return Ee(st.x,st.y,ot.pitchedLabelPlaneMatrix,ot.getElevation).point}if(ut){const st=Oe(ot.tileAnchorPoint.x+1,ot.tileAnchorPoint.y,ot).point.sub(at),ut=Math.atan(st.y/st.x)+(st.x<0?Math.PI:0);return at.add(Hl.rotate(ut))}return at.add(Hl)}function er(at,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su){const lu=at.text.placedSymbolArray,cu=at.text.dynamicLayoutVertexArray,uu=at.icon.dynamicLayoutVertexArray,pu={};cu.clear();for(let mu=0;mu<lu.length;mu++){const uu=lu.get(mu),gu=uu.hidden||!uu.crossTileID||at.allowVerticalPlacement&&!uu.placedOrientation?null:Hl[uu.crossTileID];if(gu){const Hl=new st.P(uu.anchorX,uu.anchorY),lu={getElevation:su,width:rc.width,height:rc.height,pitchedLabelPlaneMatrix:sc,pitchWithMap:ut,transform:rc,tileAnchorPoint:Hl,translation:Sc,unwrappedTileID:iu},mu=ut?Ne(Hl.x,Hl.y,lu):Oe(Hl.x,Hl.y,lu),Au=Re(rc.cameraToCenterDistance,mu.signedDistanceFromCamera);let yu=st.ao(at.textSizeData,_c,uu)*Au/st.aA;ut&&(yu*=at.tilePixelRatio/oc);const{width:_u,height:xu,anchor:Su,textOffset:Du,textBoxScale:Lu}=gu,$u=Qo(Su,_u,xu,Du,Lu,yu),hh=rc.getPitchedTextCorrection(Hl.x+Sc[0],Hl.y+Sc[1],iu),ed=Jo(mu.point,lu,ot,$u,-rc.bearingInRadians,hh),td=at.allowVerticalPlacement&&uu.placedOrientation===st.an.vertical?Math.PI/2:0;for(let at=0;at<uu.numGlyphs;at++)st.au(cu,ed,td);wc&&uu.associatedIconIndex>=0&&(pu[uu.associatedIconIndex]={shiftedAnchor:ed,angle:td})}else $e(uu.numGlyphs,cu)}if(wc){uu.clear();const ot=at.icon.placedSymbolArray;for(let at=0;at<ot.length;at++){const ut=ot.get(at);if(ut.hidden)$e(ut.numGlyphs,uu);else{const ot=pu[at];if(ot)for(let at=0;at<ut.numGlyphs;at++)st.au(uu,ot.shiftedAnchor,ot.angle);else $e(ut.numGlyphs,uu)}}at.icon.dynamicLayoutVertexBuffer.updateData(uu)}at.text.dynamicLayoutVertexBuffer.updateData(cu)}function tr(at,st,ot){return ot.iconsInText&&st?"symbolTextAndIcon":at?"symbolSDF":"symbolIcon"}function ir(at,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu){const cu=at.context,uu=cu.gl,pu=at.transform,mu="map"===_c,gu="map"===wc,Au="viewport"!==_c&&"point"!==ut.layout.get("symbol-placement"),yu=mu&&!gu&&!Au,_u=!ut.layout.get("symbol-sort-key").isConstant();let xu=!1;const Su=at.getDepthModeForSublayer(0,Ut.ReadOnly),Du=ut._unevaluatedLayout.hasValue("text-variable-anchor")||ut._unevaluatedLayout.hasValue("text-variable-anchor-offset"),Lu=[],$u=pu.getCircleRadiusCorrection();for(const hh of Hl){const Hl=ot.getTile(hh),_c=Hl.getBucket(ut);if(!_c)continue;const wc=rc?_c.text:_c.icon;if(!wc||!wc.segments.get().length||!wc.hasVisibleVertices)continue;const iu=wc.programConfigurations.get(ut.id),su=rc||_c.sdfIcons,cu=rc?_c.textSizeData:_c.iconSizeData,Su=gu||0!==pu.pitch,ed=at.useProgram(tr(su,rc,_c),iu),td=st.am(cu,pu.zoom),id=at.style.map.terrain&&at.style.map.terrain.getTerrainData(hh);let nd,rd,ad,sd,od=[0,0],ld=null;if(rc)rd=Hl.glyphAtlasTexture,ad=uu.LINEAR,nd=Hl.glyphAtlasTexture.size,_c.iconsInText&&(od=Hl.imageAtlasTexture.size,ld=Hl.imageAtlasTexture,sd=Su||at.options.rotating||at.options.zooming||"composite"===cu.kind||"camera"===cu.kind?uu.LINEAR:uu.NEAREST);else{const st=1!==ut.layout.get("icon-size").constantOr(0)||_c.iconsNeedLinear;rd=Hl.imageAtlasTexture,ad=su||at.options.rotating||at.options.zooming||st||Su?uu.LINEAR:uu.NEAREST,nd=Hl.imageAtlasTexture.size}const cd=st.aB(Hl,1,at.transform.zoom),ud=Ie(mu,at.transform,cd),hd=st.L();st.ap(hd,ud);const dd=Me(gu,mu,at.transform,cd),pd=st.aC(pu,Hl,sc,oc),md=pu.getProjectionData({overscaledTileID:hh,applyGlobeMatrix:!lu,applyTerrainMatrix:!0}),gd=Du&&_c.hasTextData(),fd="none"!==ut.layout.get("icon-text-fit")&&gd&&_c.hasIconData();if(Au){const st=at.style.map.terrain?(st,ot)=>at.style.map.terrain.getElevation(hh,st,ot):null,ot="map"===ut.layout.get("text-rotation-alignment");De(_c,at,rc,ud,hd,gu,Sc,ot,hh.toUnwrapped(),pu.width,pu.height,pd,st)}const Ad=rc&&Du||fd,yd=Au||Ad?Sd:gu?ud:at.transform.clipSpaceToPixelsMatrix,vd=su&&0!==ut.paint.get(rc?"text-halo-width":"icon-halo-width").constantOr(1);let _d;_d=su?_c.iconsInText?to(cu.kind,td,yu,gu,Au,Ad,at,yd,dd,pd,nd,od,$u):eo(cu.kind,td,yu,gu,Au,Ad,at,yd,dd,pd,rc,nd,0,$u):Ji(cu.kind,td,yu,gu,Au,Ad,at,yd,dd,pd,rc,nd,$u);const xd={program:ed,buffers:wc,uniformValues:_d,projectionData:md,atlasTexture:rd,atlasTextureIcon:ld,atlasInterpolation:ad,atlasInterpolationIcon:sd,isSDF:su,hasHalo:vd};if(_u&&_c.canOverlap){xu=!0;const at=wc.segments.get();for(const ot of at)Lu.push({segments:new st.aL([ot]),sortKey:ot.sortKey,state:xd,terrainData:id})}else Lu.push({segments:wc.segments,sortKey:0,state:xd,terrainData:id})}xu&&Lu.sort(((at,st)=>at.sortKey-st.sortKey));for(const st of Lu){const ot=st.state;if(cu.activeTexture.set(uu.TEXTURE0),ot.atlasTexture.bind(ot.atlasInterpolation,uu.CLAMP_TO_EDGE),ot.atlasTextureIcon&&(cu.activeTexture.set(uu.TEXTURE1),ot.atlasTextureIcon&&ot.atlasTextureIcon.bind(ot.atlasInterpolationIcon,uu.CLAMP_TO_EDGE)),ot.isSDF){const Hl=ot.uniformValues;ot.hasHalo&&(Hl.u_is_halo=1,or(ot.buffers,st.segments,ut,at,ot.program,Su,iu,su,Hl,ot.projectionData,st.terrainData)),Hl.u_is_halo=0}or(ot.buffers,st.segments,ut,at,ot.program,Su,iu,su,ot.uniformValues,ot.projectionData,st.terrainData)}}function or(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc){const iu=ut.context;Hl.draw(iu,iu.gl.TRIANGLES,rc,sc,oc,Zt.backCCW,_c,Sc,wc,ot.id,at.layoutVertexBuffer,at.indexBuffer,st,ot.paint,ut.transform.zoom,at.programConfigurations.get(ot.id),at.dynamicLayoutVertexBuffer,at.opacityVertexBuffer)}function rr(at,ot,ut,Hl,rc){const sc=at.context,oc=sc.gl,_c=Vt.disabled,wc=new jt([oc.ONE,oc.ONE],st.be.transparent,[!0,!0,!0,!0]),Sc=ot.getBucket(ut);if(!Sc)return;const iu=Hl.key;let su=ut.heatmapFbos.get(iu);su||(su=sr(sc,ot.tileSize,ot.tileSize),ut.heatmapFbos.set(iu,su)),sc.bindFramebuffer.set(su.framebuffer),sc.viewport.set([0,0,ot.tileSize,ot.tileSize]),sc.clear({color:st.be.transparent});const lu=Sc.programConfigurations.get(ut.id),cu=at.useProgram("heatmap",lu,!rc),uu=at.transform.getProjectionData({overscaledTileID:ot.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),pu=at.style.map.terrain.getTerrainData(Hl);cu.draw(sc,oc.TRIANGLES,Ut.disabled,_c,wc,Zt.disabled,ji(ot,at.transform.zoom,ut.paint.get("heatmap-intensity"),1),pu,uu,ut.id,Sc.layoutVertexBuffer,Sc.indexBuffer,Sc.segments,ut.paint,at.transform.zoom,lu)}function ar(at,st,ot,ut,Hl){const rc=at.context,sc=rc.gl,oc=at.transform;rc.setColorMode(at.colorModeForRenderPass());const _c=nr(rc,st),wc=ot.key,Sc=st.heatmapFbos.get(wc);if(!Sc)return;rc.activeTexture.set(sc.TEXTURE0),sc.bindTexture(sc.TEXTURE_2D,Sc.colorAttachment.get()),rc.activeTexture.set(sc.TEXTURE1),_c.bind(sc.LINEAR,sc.CLAMP_TO_EDGE);const iu=oc.getProjectionData({overscaledTileID:ot,applyTerrainMatrix:Hl,applyGlobeMatrix:!ut});at.useProgram("heatmapTexture").draw(rc,sc.TRIANGLES,Ut.disabled,Vt.disabled,at.colorModeForRenderPass(),Zt.disabled,Ni(at,st,0,1),null,iu,st.id,at.rasterBoundsBuffer,at.quadTriangleIndexBuffer,at.rasterBoundsSegments,st.paint,oc.zoom),Sc.destroy(),st.heatmapFbos.delete(wc)}function sr(at,st,ot){var ut,Hl;const rc=at.gl,sc=rc.createTexture();rc.bindTexture(rc.TEXTURE_2D,sc),rc.texParameteri(rc.TEXTURE_2D,rc.TEXTURE_WRAP_S,rc.CLAMP_TO_EDGE),rc.texParameteri(rc.TEXTURE_2D,rc.TEXTURE_WRAP_T,rc.CLAMP_TO_EDGE),rc.texParameteri(rc.TEXTURE_2D,rc.TEXTURE_MIN_FILTER,rc.LINEAR),rc.texParameteri(rc.TEXTURE_2D,rc.TEXTURE_MAG_FILTER,rc.LINEAR);const oc=null!==(ut=at.HALF_FLOAT)&&void 0!==ut?ut:rc.UNSIGNED_BYTE,_c=null!==(Hl=at.RGBA16F)&&void 0!==Hl?Hl:rc.RGBA;rc.texImage2D(rc.TEXTURE_2D,0,_c,st,ot,0,rc.RGBA,oc,null);const wc=at.createFramebuffer(st,ot,!1,!1);return wc.colorAttachment.set(sc),wc}function nr(at,ot){return ot.colorRampTexture||(ot.colorRampTexture=new st.T(at,ot.colorRamp,at.gl.RGBA)),ot.colorRampTexture}function lr(at,st,ot,ut,Hl){if(!ot||!ut||!ut.imageAtlas)return;const rc=ut.imageAtlas.patternPositions;let sc=rc[ot.to.toString()],oc=rc[ot.from.toString()];if(!sc&&oc&&(sc=oc),!oc&&sc&&(oc=sc),!sc||!oc){const at=Hl.getPaintProperty(st);sc=rc[at],oc=rc[at]}sc&&oc&&at.setConstantPatternPositions(sc,oc)}function cr(at,ot,ut,Hl,rc,sc,oc,_c){const wc=at.context.gl,Sc="fill-pattern",iu=ut.paint.get(Sc),su=iu&&iu.constantOr(1),lu=ut.getCrossfadeParameters();let cu,uu,pu,mu,gu;const Au=at.transform,yu=ut.paint.get("fill-translate"),_u=ut.paint.get("fill-translate-anchor");oc?(uu=su&&!ut.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",cu=wc.LINES):(uu=su?"fillPattern":"fill",cu=wc.TRIANGLES);const xu=iu.constantOr(null);for(const Su of Hl){const Hl=ot.getTile(Su);if(su&&!Hl.patternsLoaded())continue;const iu=Hl.getBucket(ut);if(!iu)continue;const Du=iu.programConfigurations.get(ut.id),Lu=at.useProgram(uu,Du),$u=at.style.map.terrain&&at.style.map.terrain.getTerrainData(Su);su&&(at.context.activeTexture.set(wc.TEXTURE0),Hl.imageAtlasTexture.bind(wc.LINEAR,wc.CLAMP_TO_EDGE),Du.updatePaintBuffers(lu)),lr(Du,Sc,xu,Hl,ut);const hh=Au.getProjectionData({overscaledTileID:Su,applyGlobeMatrix:!_c,applyTerrainMatrix:!0}),ed=st.aC(Au,Hl,yu,_u);if(oc){mu=iu.indexBuffer2,gu=iu.segments2;const st=[wc.drawingBufferWidth,wc.drawingBufferHeight];pu="fillOutlinePattern"===uu&&su?Li(at,lu,Hl,st,ed):Ai(st,ed)}else mu=iu.indexBuffer,gu=iu.segments,pu=su?Di(at,lu,Hl,ed):{u_fill_translate:ed};const td=at.stencilModeForClipping(Su);Lu.draw(at.context,cu,rc,td,sc,Zt.backCCW,pu,$u,hh,ut.id,iu.layoutVertexBuffer,mu,gu,ut.paint,at.transform.zoom,Du)}}function hr(at,ot,ut,Hl,rc,sc,oc,_c){const wc=at.context,Sc=wc.gl,iu="fill-extrusion-pattern",su=ut.paint.get(iu),lu=su.constantOr(1),cu=ut.getCrossfadeParameters(),uu=ut.paint.get("fill-extrusion-opacity"),pu=su.constantOr(null),mu=at.transform;for(const gu of Hl){const Hl=ot.getTile(gu),su=Hl.getBucket(ut);if(!su)continue;const Au=at.style.map.terrain&&at.style.map.terrain.getTerrainData(gu),yu=su.programConfigurations.get(ut.id),_u=at.useProgram(lu?"fillExtrusionPattern":"fillExtrusion",yu);lu&&(at.context.activeTexture.set(Sc.TEXTURE0),Hl.imageAtlasTexture.bind(Sc.LINEAR,Sc.CLAMP_TO_EDGE),yu.updatePaintBuffers(cu));const xu=mu.getProjectionData({overscaledTileID:gu,applyGlobeMatrix:!_c,applyTerrainMatrix:!0});lr(yu,iu,pu,Hl,ut);const Su=st.aC(mu,Hl,ut.paint.get("fill-extrusion-translate"),ut.paint.get("fill-extrusion-translate-anchor")),Du=ut.paint.get("fill-extrusion-vertical-gradient"),Lu=lu?zi(at,Du,uu,Su,gu,cu,Hl):Ri(at,Du,uu,Su);_u.draw(wc,wc.gl.TRIANGLES,rc,sc,oc,Zt.backCCW,Lu,Au,xu,ut.id,su.layoutVertexBuffer,su.indexBuffer,su.segments,ut.paint,at.transform.zoom,yu,at.style.map.terrain&&su.centroidVertexBuffer)}}function ur(at,st,ot,ut,Hl,rc,sc,oc,_c){var wc;const Sc=at.style.projection,iu=at.context,su=at.transform,lu=iu.gl,cu=[`#define NUM_ILLUMINATION_SOURCES ${ot.paint.get("hillshade-highlight-color").values.length}`],uu=at.useProgram("hillshade",null,!1,cu),pu=!at.options.moving;for(const mu of ut){const ut=st.getTile(mu),cu=ut.fbo;if(!cu)continue;const gu=Sc.getMeshFromTileID(iu,mu.canonical,oc,!0,"raster"),Au=null===(wc=at.style.map.terrain)||void 0===wc?void 0:wc.getTerrainData(mu);iu.activeTexture.set(lu.TEXTURE0),lu.bindTexture(lu.TEXTURE_2D,cu.colorAttachment.get());const yu=su.getProjectionData({overscaledTileID:mu,aligned:pu,applyGlobeMatrix:!_c,applyTerrainMatrix:!0});uu.draw(iu,lu.TRIANGLES,rc,Hl[mu.overscaledZ],sc,Zt.backCCW,Zi(at,ut,ot),Au,yu,ot.id,gu.vertexBuffer,gu.indexBuffer,gu.segments)}}function dr(at,ot,ut,Hl,rc,sc,oc,_c,wc){var Sc;const iu=at.style.projection,su=at.context,lu=at.transform,cu=su.gl,uu=at.useProgram("colorRelief"),pu=!at.options.moving;let mu=!0;for(const gu of Hl){const Hl=ot.getTile(gu),Au=Hl.dem;if(mu){const at=cu.getParameter(cu.MAX_TEXTURE_SIZE),{elevationTexture:st,colorTexture:ot}=ut.getColorRampTextures(su,at,Au.getUnpackVector());su.activeTexture.set(cu.TEXTURE1),st.bind(cu.NEAREST,cu.CLAMP_TO_EDGE),su.activeTexture.set(cu.TEXTURE4),ot.bind(cu.LINEAR,cu.CLAMP_TO_EDGE),mu=!1}if(!Au||!Au.data)continue;const yu=Au.stride,_u=Au.getPixels();if(su.activeTexture.set(cu.TEXTURE0),su.pixelStoreUnpackPremultiplyAlpha.set(!1),Hl.demTexture=Hl.demTexture||at.getTileTexture(yu),Hl.demTexture){const at=Hl.demTexture;at.update(_u,{premultiply:!1}),at.bind(cu.LINEAR,cu.CLAMP_TO_EDGE)}else Hl.demTexture=new st.T(su,_u,cu.RGBA,{premultiply:!1}),Hl.demTexture.bind(cu.LINEAR,cu.CLAMP_TO_EDGE);const xu=iu.getMeshFromTileID(su,gu.canonical,_c,!0,"raster"),Su=null===(Sc=at.style.map.terrain)||void 0===Sc?void 0:Sc.getTerrainData(gu),Du=lu.getProjectionData({overscaledTileID:gu,aligned:pu,applyGlobeMatrix:!wc,applyTerrainMatrix:!0});uu.draw(su,cu.TRIANGLES,sc,rc[gu.overscaledZ],oc,Zt.backCCW,Vi(ut,Hl.dem),Su,Du,ut.id,xu.vertexBuffer,xu.indexBuffer,xu.segments)}}const Td=[new st.P(0,0),new st.P(st.$,0),new st.P(st.$,st.$),new st.P(0,st.$)];function pr(at,st,ot,ut,Hl,rc,sc,oc,_c=!1,wc=!1){const Sc=ut[ut.length-1].overscaledZ,iu=at.context,su=iu.gl,lu=at.useProgram("raster"),cu=at.transform,uu=at.style.projection,pu=at.colorModeForRenderPass(),mu=!at.options.moving;for(const gu of ut){const ut=at.getDepthModeForSublayer(gu.overscaledZ-Sc,1===ot.paint.get("raster-opacity")?Ut.ReadWrite:Ut.ReadOnly,su.LESS),Au=st.getTile(gu);Au.registerFadeDuration(ot.paint.get("raster-fade-duration"));const yu=st.findLoadedParent(gu,0),_u=st.findLoadedSibling(gu),xu=mr(Au,yu||_u||null,st,ot,at.transform,at.style.map.terrain);let Su,Du;const Lu="nearest"===ot.paint.get("raster-resampling")?su.NEAREST:su.LINEAR;iu.activeTexture.set(su.TEXTURE0),Au.texture.bind(Lu,su.CLAMP_TO_EDGE,su.LINEAR_MIPMAP_NEAREST),iu.activeTexture.set(su.TEXTURE1),yu?(yu.texture.bind(Lu,su.CLAMP_TO_EDGE,su.LINEAR_MIPMAP_NEAREST),Su=Math.pow(2,yu.tileID.overscaledZ-Au.tileID.overscaledZ),Du=[Au.tileID.canonical.x*Su%1,Au.tileID.canonical.y*Su%1]):Au.texture.bind(Lu,su.CLAMP_TO_EDGE,su.LINEAR_MIPMAP_NEAREST),Au.texture.useMipmap&&iu.extTextureFilterAnisotropic&&at.transform.pitch>20&&su.texParameterf(su.TEXTURE_2D,iu.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,iu.extTextureFilterAnisotropicMax);const $u=at.style.map.terrain&&at.style.map.terrain.getTerrainData(gu),hh=cu.getProjectionData({overscaledTileID:gu,aligned:mu,applyGlobeMatrix:!wc,applyTerrainMatrix:!0}),ed=Yi(Du||[0,0],Su||1,xu,ot,oc),td=uu.getMeshFromTileID(iu,gu.canonical,rc,sc,"raster");lu.draw(iu,su.TRIANGLES,ut,Hl?Hl[gu.overscaledZ]:Vt.disabled,pu,_c?Zt.frontCCW:Zt.backCCW,ed,$u,hh,ot.id,td.vertexBuffer,td.indexBuffer,td.segments)}}function mr(at,ot,ut,Hl,sc,oc){const _c=Hl.paint.get("raster-fade-duration");if(!oc&&_c>0){const Hl=rc.now(),oc=(Hl-at.timeAdded)/_c,wc=ot?(Hl-ot.timeAdded)/_c:-1,Sc=ut.getSource(),iu=ge(sc,{tileSize:Sc.tileSize,roundZoom:Sc.roundZoom}),su=!ot||Math.abs(ot.tileID.overscaledZ-iu)>Math.abs(at.tileID.overscaledZ-iu),lu=su&&at.refreshedUponExpiration?1:st.ag(su?oc:1-wc,0,1);return at.refreshedUponExpiration&&oc>=1&&(at.refreshedUponExpiration=!1),ot?{opacity:1,mix:1-lu}:{opacity:lu,mix:0}}return{opacity:1,mix:0}}const Cd=new st.be(1,0,0,1),kd=new st.be(0,1,0,1),Id=new st.be(0,0,1,1),Dd=new st.be(1,0,1,1),Ld=new st.be(0,1,1,1);function yr(at,st,ot,ut){Tr(at,0,st+ot/2,at.transform.width,ot,ut)}function wr(at,st,ot,ut){Tr(at,st-ot/2,0,ot,at.transform.height,ut)}function Tr(at,st,ot,ut,Hl,rc){const sc=at.context,oc=sc.gl;oc.enable(oc.SCISSOR_TEST),oc.scissor(st*at.pixelRatio,ot*at.pixelRatio,ut*at.pixelRatio,Hl*at.pixelRatio),sc.clear({color:rc}),oc.disable(oc.SCISSOR_TEST)}function Pr(at,ot,ut){const Hl=at.context,rc=Hl.gl,sc=at.useProgram("debug"),oc=Ut.disabled,_c=Vt.disabled,wc=at.colorModeForRenderPass(),Sc="$debug",iu=at.style.map.terrain&&at.style.map.terrain.getTerrainData(ut);Hl.activeTexture.set(rc.TEXTURE0);const su=ot.getTileByID(ut.key).latestRawTileData,lu=Math.floor((su&&su.byteLength||0)/1024),cu=ot.getTile(ut).tileSize,uu=512/Math.min(cu,512)*(ut.overscaledZ/at.transform.zoom)*.5;let pu=ut.canonical.toString();ut.overscaledZ!==ut.canonical.z&&(pu+=` => ${ut.overscaledZ}`),function(at,st){at.initDebugOverlayCanvas();const ot=at.debugOverlayCanvas,ut=at.context.gl,Hl=at.debugOverlayCanvas.getContext("2d");Hl.clearRect(0,0,ot.width,ot.height),Hl.shadowColor="white",Hl.shadowBlur=2,Hl.lineWidth=1.5,Hl.strokeStyle="white",Hl.textBaseline="top",Hl.font="bold 36px Open Sans, sans-serif",Hl.fillText(st,5,5),Hl.strokeText(st,5,5),at.debugOverlayTexture.update(ot),at.debugOverlayTexture.bind(ut.LINEAR,ut.CLAMP_TO_EDGE)}(at,`${pu} ${lu}kB`);const mu=at.transform.getProjectionData({overscaledTileID:ut,applyGlobeMatrix:!0,applyTerrainMatrix:!0});sc.draw(Hl,rc.TRIANGLES,oc,_c,jt.alphaBlended,Zt.disabled,Oi(st.be.transparent,uu),null,mu,Sc,at.debugBuffer,at.quadTriangleIndexBuffer,at.debugSegments),sc.draw(Hl,rc.LINE_STRIP,oc,_c,wc,Zt.disabled,Oi(st.be.red),iu,mu,Sc,at.debugBuffer,at.tileBorderIndexBuffer,at.debugSegments)}function Cr(at,st,ot,ut){const{isRenderingGlobe:Hl}=ut,rc=at.context,sc=rc.gl,oc=at.transform,_c=at.colorModeForRenderPass(),wc=at.getDepthModeFor3D(),Sc=at.useProgram("terrain");rc.bindFramebuffer.set(null),rc.viewport.set([0,0,at.width,at.height]);for(const iu of ot){const ot=st.getTerrainMesh(iu.tileID),ut=at.renderToTexture.getTexture(iu),su=st.getTerrainData(iu.tileID);rc.activeTexture.set(sc.TEXTURE0),sc.bindTexture(sc.TEXTURE_2D,ut.texture);const lu=st.getMeshFrameDelta(oc.zoom),cu=oc.calculateFogMatrix(iu.tileID.toUnwrapped()),uu=Ci(lu,cu,at.style.sky,oc.pitch,Hl),pu=oc.getProjectionData({overscaledTileID:iu.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Sc.draw(rc,sc.TRIANGLES,wc,Vt.disabled,_c,Zt.backCCW,uu,su,pu,"terrain",ot.vertexBuffer,ot.indexBuffer,ot.segments)}}function Ir(at,ot){if(!ot.mesh){const ut=new st.aK;ut.emplaceBack(-1,-1),ut.emplaceBack(1,-1),ut.emplaceBack(1,1),ut.emplaceBack(-1,1);const Hl=new st.aM;Hl.emplaceBack(0,1,2),Hl.emplaceBack(0,2,3),ot.mesh=new wt(at.createVertexBuffer(ut,ud.members),at.createIndexBuffer(Hl),st.aL.simpleSegment(0,0,ut.length,Hl.length))}return ot.mesh}class Mr{constructor(at,ot){this.context=new Ho(at),this.transform=ot,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:st.af(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=xe.maxUnderzooming+xe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new vt}resize(at,st,ot){if(this.width=Math.floor(at*ot),this.height=Math.floor(st*ot),this.pixelRatio=ot,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const ut of this.style._order)this.style._layers[ut].resize()}setup(){const at=this.context,ot=new st.aK;ot.emplaceBack(0,0),ot.emplaceBack(st.$,0),ot.emplaceBack(0,st.$),ot.emplaceBack(st.$,st.$),this.tileExtentBuffer=at.createVertexBuffer(ot,ud.members),this.tileExtentSegments=st.aL.simpleSegment(0,0,4,2);const ut=new st.aK;ut.emplaceBack(0,0),ut.emplaceBack(st.$,0),ut.emplaceBack(0,st.$),ut.emplaceBack(st.$,st.$),this.debugBuffer=at.createVertexBuffer(ut,ud.members),this.debugSegments=st.aL.simpleSegment(0,0,4,5);const Hl=new st.c5;Hl.emplaceBack(0,0,0,0),Hl.emplaceBack(st.$,0,st.$,0),Hl.emplaceBack(0,st.$,0,st.$),Hl.emplaceBack(st.$,st.$,st.$,st.$),this.rasterBoundsBuffer=at.createVertexBuffer(Hl,_d.members),this.rasterBoundsSegments=st.aL.simpleSegment(0,0,4,2);const rc=new st.aK;rc.emplaceBack(0,0),rc.emplaceBack(st.$,0),rc.emplaceBack(0,st.$),rc.emplaceBack(st.$,st.$),this.rasterBoundsBufferPosOnly=at.createVertexBuffer(rc,ud.members),this.rasterBoundsSegmentsPosOnly=st.aL.simpleSegment(0,0,4,5);const sc=new st.aK;sc.emplaceBack(0,0),sc.emplaceBack(1,0),sc.emplaceBack(0,1),sc.emplaceBack(1,1),this.viewportBuffer=at.createVertexBuffer(sc,ud.members),this.viewportSegments=st.aL.simpleSegment(0,0,4,2);const oc=new st.c6;oc.emplaceBack(0),oc.emplaceBack(1),oc.emplaceBack(3),oc.emplaceBack(2),oc.emplaceBack(0),this.tileBorderIndexBuffer=at.createIndexBuffer(oc);const _c=new st.aM;_c.emplaceBack(1,0,2),_c.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=at.createIndexBuffer(_c);const wc=this.context.gl;this.stencilClearMode=new Vt({func:wc.ALWAYS,mask:0},0,255,wc.ZERO,wc.ZERO,wc.ZERO),this.tileExtentMesh=new wt(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const at=this.context,ot=at.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const ut=st.L();st.bX(ut,0,this.width,this.height,0,0,1),st.N(ut,ut,[ot.drawingBufferWidth,ot.drawingBufferHeight,0]);const Hl={mainMatrix:ut,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:ut};this.useProgram("clippingMask",null,!0).draw(at,ot.TRIANGLES,Ut.disabled,this.stencilClearMode,jt.disabled,Zt.disabled,null,null,Hl,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(at,st,ot){if(this.currentStencilSource===at.source||!at.isTileClipped()||!st||!st.length)return;this.currentStencilSource=at.source,this.nextStencilID+st.length>256&&this.clearStencil();const ut=this.context;ut.setColorMode(jt.disabled),ut.setDepthMode(Ut.disabled);const Hl={};for(const rc of st)Hl[rc.key]=this.nextStencilID++;this._renderTileMasks(Hl,st,ot,!0),this._renderTileMasks(Hl,st,ot,!1),this._tileClippingMaskIDs=Hl}_renderTileMasks(at,st,ot,ut){const Hl=this.context,rc=Hl.gl,sc=this.style.projection,oc=this.transform,_c=this.useProgram("clippingMask");for(const wc of st){const st=at[wc.key],Sc=this.style.map.terrain&&this.style.map.terrain.getTerrainData(wc),iu=sc.getMeshFromTileID(this.context,wc.canonical,ut,!0,"stencil"),su=oc.getProjectionData({overscaledTileID:wc,applyGlobeMatrix:!ot,applyTerrainMatrix:!0});_c.draw(Hl,rc.TRIANGLES,Ut.disabled,new Vt({func:rc.ALWAYS,mask:0},st,255,rc.KEEP,rc.KEEP,rc.REPLACE),jt.disabled,ot?Zt.disabled:Zt.backCCW,null,Sc,su,"$clipping",iu.vertexBuffer,iu.indexBuffer,iu.segments)}}_renderTilesDepthBuffer(){const at=this.context,st=at.gl,ot=this.style.projection,ut=this.transform,Hl=this.useProgram("depth"),rc=this.getDepthModeFor3D(),sc=ve(ut,{tileSize:ut.tileSize});for(const oc of sc){const sc=this.style.map.terrain&&this.style.map.terrain.getTerrainData(oc),_c=ot.getMeshFromTileID(this.context,oc.canonical,!0,!0,"raster"),wc=ut.getProjectionData({overscaledTileID:oc,applyGlobeMatrix:!0,applyTerrainMatrix:!0});Hl.draw(at,st.TRIANGLES,rc,Vt.disabled,jt.disabled,Zt.backCCW,null,sc,wc,"$clipping",_c.vertexBuffer,_c.indexBuffer,_c.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const at=this.nextStencilID++,st=this.context.gl;return new Vt({func:st.NOTEQUAL,mask:255},at,255,st.KEEP,st.KEEP,st.REPLACE)}stencilModeForClipping(at){const st=this.context.gl;return new Vt({func:st.EQUAL,mask:255},this._tileClippingMaskIDs[at.key],0,st.KEEP,st.KEEP,st.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(at){const st=this.context.gl,ot=at.sort(((at,st)=>st.overscaledZ-at.overscaledZ)),ut=ot[ot.length-1].overscaledZ,Hl=ot[0].overscaledZ-ut+1;if(Hl>1){this.currentStencilSource=void 0,this.nextStencilID+Hl>256&&this.clearStencil();const at={};for(let ot=0;ot<Hl;ot++)at[ot+ut]=new Vt({func:st.GEQUAL,mask:255},ot+this.nextStencilID,255,st.KEEP,st.KEEP,st.REPLACE);return this.nextStencilID+=Hl,[at,ot]}return[{[ut]:Vt.disabled},ot]}stencilConfigForOverlapTwoPass(at){const st=this.context.gl,ot=at.sort(((at,st)=>st.overscaledZ-at.overscaledZ)),ut=ot[ot.length-1].overscaledZ,Hl=ot[0].overscaledZ-ut+1;if(this.clearStencil(),Hl>1){const at={},rc={};for(let ot=0;ot<Hl;ot++)at[ot+ut]=new Vt({func:st.GREATER,mask:255},Hl+1+ot,255,st.KEEP,st.KEEP,st.REPLACE),rc[ot+ut]=new Vt({func:st.GREATER,mask:255},1+ot,255,st.KEEP,st.KEEP,st.REPLACE);return this.nextStencilID=2*Hl+1,[at,rc,ot]}return this.nextStencilID=3,[{[ut]:new Vt({func:st.GREATER,mask:255},2,255,st.KEEP,st.KEEP,st.REPLACE)},{[ut]:new Vt({func:st.GREATER,mask:255},1,255,st.KEEP,st.KEEP,st.REPLACE)},ot]}colorModeForRenderPass(){const at=this.context.gl;if(this._showOverdrawInspector){const ot=1/8;return new jt([at.CONSTANT_COLOR,at.ONE],new st.be(ot,ot,ot,0),[!0,!0,!0,!0])}return"opaque"===this.renderPass?jt.unblended:jt.alphaBlended}getDepthModeForSublayer(at,st,ot){if(!this.opaquePassEnabledForLayer())return Ut.disabled;const ut=1-((1+this.currentLayer)*this.numSublayers+at)*this.depthEpsilon;return new Ut(ot||this.context.gl.LEQUAL,st,[ut,ut])}getDepthModeFor3D(){return new Ut(this.context.gl.LEQUAL,Ut.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(at,ot){var ut,Hl;this.style=at,this.options=ot,this.lineAtlas=at.lineAtlas,this.imageManager=at.imageManager,this.glyphManager=at.glyphManager,this.symbolFadeChange=at.placement.symbolFadeChange(rc.now()),this.imageManager.beginFrame();const sc=this.style._order,oc=this.style.sourceCaches,_c={},wc={},Sc={},iu={isRenderingToTexture:!1,isRenderingGlobe:(null===(ut=at.projection)||void 0===ut?void 0:ut.transitionState)>0};for(const st in oc){const at=oc[st];at.used&&at.prepare(this.context),_c[st]=at.getVisibleCoordinates(!1),wc[st]=_c[st].slice().reverse(),Sc[st]=at.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let st=0;st<sc.length;st++)if(this.style._layers[sc[st]].is3D()){this.opaquePassCutoff=st;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const st of sc){const at=this.style._layers[st];if(!at.hasOffscreenPass()||at.isHidden(this.transform.zoom))continue;const ot=wc[at.source];("custom"===at.type||ot.length)&&this.renderLayer(this,oc[at.source],at,ot,iu)}if(null===(Hl=this.style.projection)||void 0===Hl||Hl.updateGPUdependent({context:this.context,useProgram:at=>this.useProgram(at)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:ot.showOverdrawInspector?st.be.black:st.be.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(at,st){const ot=at.context,ut=ot.gl,Hl=((at,st,ot)=>{const ut=Math.cos(st.rollInRadians),Hl=Math.sin(st.rollInRadians),rc=he(st),sc=st.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:at.properties.get("sky-color"),u_horizon_color:at.properties.get("horizon-color"),u_horizon:[(st.width/2-rc*Hl)*ot,(st.height/2+rc*ut)*ot],u_horizon_normal:[-Hl,ut],u_sky_horizon_blend:at.properties.get("sky-horizon-blend")*st.height/2*ot,u_sky_blend:sc}})(st,at.style.map.transform,at.pixelRatio),rc=new Ut(ut.LEQUAL,Ut.ReadWrite,[0,1]),sc=Vt.disabled,oc=at.colorModeForRenderPass(),_c=at.useProgram("sky"),wc=Ir(ot,st);_c.draw(ot,ut.TRIANGLES,rc,sc,oc,Zt.disabled,Hl,null,void 0,"sky",wc.vertexBuffer,wc.indexBuffer,wc.segments)}(this,this.style.sky),this._showOverdrawInspector=ot.showOverdrawInspector,this.depthRangeFor3D=[0,1-(at._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=sc.length-1;this.currentLayer>=0;this.currentLayer--){const at=this.style._layers[sc[this.currentLayer]],st=oc[at.source],ot=_c[at.source];this._renderTileClippingMasks(at,ot,!1),this.renderLayer(this,st,at,ot,iu)}this.renderPass="translucent";let su=!1;for(this.currentLayer=0;this.currentLayer<sc.length;this.currentLayer++){const at=this.style._layers[sc[this.currentLayer]],st=oc[at.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(at,iu))continue;this.opaquePassEnabledForLayer()||su||(su=!0,iu.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ot=("symbol"===at.type?Sc:wc)[at.source];this._renderTileClippingMasks(at,_c[at.source],!!this.renderToTexture),this.renderLayer(this,st,at,ot,iu)}if(iu.isRenderingGlobe&&function(at,ot,ut){const Hl=at.context,rc=Hl.gl,sc=at.useProgram("atmosphere"),oc=new Ut(rc.LEQUAL,Ut.ReadOnly,[0,1]),_c=at.transform,wc=function(at,ot){const ut=at.properties.get("position"),Hl=[-ut.x,-ut.y,-ut.z],rc=st.af(new Float64Array(16));return"map"===at.properties.get("anchor")&&(st.b5(rc,rc,ot.rollInRadians),st.b6(rc,rc,-ot.pitchInRadians),st.b5(rc,rc,ot.bearingInRadians),st.b6(rc,rc,ot.center.lat*Math.PI/180),st.by(rc,rc,-ot.center.lng*Math.PI/180)),st.c4(Hl,Hl,rc),Hl}(ut,at.transform),Sc=_c.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),iu=ot.properties.get("atmosphere-blend")*Sc.projectionTransition;if(0===iu)return;const su=oi(_c.worldSize,_c.center.lat),lu=_c.inverseProjectionMatrix,cu=new Float64Array(4);cu[3]=1,st.av(cu,cu,_c.modelViewProjectionMatrix),cu[0]/=cu[3],cu[1]/=cu[3],cu[2]/=cu[3],cu[3]=1,st.av(cu,cu,lu),cu[0]/=cu[3],cu[1]/=cu[3],cu[2]/=cu[3],cu[3]=1;const uu=((at,st,ot,ut,Hl)=>({u_sun_pos:at,u_atmosphere_blend:st,u_globe_position:ot,u_globe_radius:ut,u_inv_proj_matrix:Hl}))(wc,iu,[cu[0],cu[1],cu[2]],su,lu),pu=Ir(Hl,ot);sc.draw(Hl,rc.TRIANGLES,oc,Vt.disabled,jt.alphaBlended,Zt.disabled,uu,null,null,"atmosphere",pu.vertexBuffer,pu.indexBuffer,pu.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const at=function(at,st){let ot=null;const ut=Object.values(at._layers).flatMap((ot=>ot.source&&!ot.isHidden(st)?[at.sourceCaches[ot.source]]:[])),Hl=ut.filter((at=>"vector"===at.getSource().type)),rc=ut.filter((at=>"vector"!==at.getSource().type)),s=at=>{(!ot||ot.getSource().maxzoom<at.getSource().maxzoom)&&(ot=at)};return Hl.forEach((at=>s(at))),ot||rc.forEach((at=>s(at))),ot}(this.style,this.transform.zoom);at&&function(at,st,ot){for(let ut=0;ut<ot.length;ut++)Pr(at,st,ot[ut])}(this,at,at.getVisibleCoordinates())}this.options.showPadding&&function(at){const st=at.transform.padding;yr(at,at.transform.height-(st.top||0),3,Cd),yr(at,st.bottom||0,3,kd),wr(at,st.left||0,3,Id),wr(at,at.transform.width-(st.right||0),3,Dd);const ot=at.transform.centerPoint;!function(at,st,ot,ut){Tr(at,st-1,ot-10,2,20,ut),Tr(at,st-10,ot-1,20,2,ut)}(at,ot.x,at.transform.height-ot.y,Ld)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(at){if(!this.style||!this.style.map||!this.style.map.terrain)return;const ot=this.terrainFacilitator.matrix,ut=this.transform.modelViewProjectionMatrix;let Hl=this.terrainFacilitator.dirty;Hl||(Hl=at?!st.c7(ot,ut):!st.c8(ot,ut)),Hl||(Hl=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),Hl&&(st.c9(ot,ut),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(at,ot){const ut=at.context,Hl=ut.gl,rc=at.transform,sc=jt.unblended,oc=new Ut(Hl.LEQUAL,Ut.ReadWrite,[0,1]),_c=ot.sourceCache.getRenderableTiles(),wc=at.useProgram("terrainDepth");ut.bindFramebuffer.set(ot.getFramebuffer("depth").framebuffer),ut.viewport.set([0,0,at.width/devicePixelRatio,at.height/devicePixelRatio]),ut.clear({color:st.be.transparent,depth:1});for(const st of _c){const at=ot.getTerrainMesh(st.tileID),_c=ot.getTerrainData(st.tileID),Sc=rc.getProjectionData({overscaledTileID:st.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),iu={u_ele_delta:ot.getMeshFrameDelta(rc.zoom)};wc.draw(ut,Hl.TRIANGLES,oc,Vt.disabled,sc,Zt.backCCW,iu,_c,Sc,"terrain",at.vertexBuffer,at.indexBuffer,at.segments)}ut.bindFramebuffer.set(null),ut.viewport.set([0,0,at.width,at.height])}(this,this.style.map.terrain),function(at,ot){const ut=at.context,Hl=ut.gl,rc=at.transform,sc=jt.unblended,oc=new Ut(Hl.LEQUAL,Ut.ReadWrite,[0,1]),_c=ot.getCoordsTexture(),wc=ot.sourceCache.getRenderableTiles(),Sc=at.useProgram("terrainCoords");ut.bindFramebuffer.set(ot.getFramebuffer("coords").framebuffer),ut.viewport.set([0,0,at.width/devicePixelRatio,at.height/devicePixelRatio]),ut.clear({color:st.be.transparent,depth:1}),ot.coordsIndex=[];for(const st of wc){const at=ot.getTerrainMesh(st.tileID),wc=ot.getTerrainData(st.tileID);ut.activeTexture.set(Hl.TEXTURE0),Hl.bindTexture(Hl.TEXTURE_2D,_c.texture);const iu={u_terrain_coords_id:(255-ot.coordsIndex.length)/255,u_texture:0,u_ele_delta:ot.getMeshFrameDelta(rc.zoom)},su=rc.getProjectionData({overscaledTileID:st.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});Sc.draw(ut,Hl.TRIANGLES,oc,Vt.disabled,sc,Zt.backCCW,iu,wc,su,"terrain",at.vertexBuffer,at.indexBuffer,at.segments),ot.coordsIndex.push(st.tileID.key)}ut.bindFramebuffer.set(null),ut.viewport.set([0,0,at.width,at.height])}(this,this.style.map.terrain))}renderLayer(at,ot,ut,Hl,rc){ut.isHidden(this.transform.zoom)||("background"===ut.type||"custom"===ut.type||(Hl||[]).length)&&(this.id=ut.id,st.ca(ut)?function(at,ot,ut,Hl,rc,sc){if("translucent"!==at.renderPass)return;const{isRenderingToTexture:oc}=sc,_c=Vt.disabled,wc=at.colorModeForRenderPass();(ut._unevaluatedLayout.hasValue("text-variable-anchor")||ut._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(at,ot,ut,Hl,rc,sc,oc,_c,wc){const Sc=ot.transform,iu=ot.style.map.terrain,su="map"===rc,lu="map"===sc;for(const cu of at){const at=Hl.getTile(cu),rc=at.getBucket(ut);if(!rc||!rc.text||!rc.text.segments.get().length)continue;const sc=st.am(rc.textSizeData,Sc.zoom),uu=st.aB(at,1,ot.transform.zoom),pu=Ie(su,ot.transform,uu),mu="none"!==ut.layout.get("icon-text-fit")&&rc.hasIconData();if(sc){const ot=Math.pow(2,Sc.zoom-at.tileID.overscaledZ),ut=iu?(at,st)=>iu.getElevation(cu,at,st):null;er(rc,su,lu,wc,Sc,pu,ot,sc,mu,st.aC(Sc,at,oc,_c),cu.toUnwrapped(),ut)}}}(Hl,at,ut,ot,ut.layout.get("text-rotation-alignment"),ut.layout.get("text-pitch-alignment"),ut.paint.get("text-translate"),ut.paint.get("text-translate-anchor"),rc),0!==ut.paint.get("icon-opacity").constantOr(1)&&ir(at,ot,ut,Hl,!1,ut.paint.get("icon-translate"),ut.paint.get("icon-translate-anchor"),ut.layout.get("icon-rotation-alignment"),ut.layout.get("icon-pitch-alignment"),ut.layout.get("icon-keep-upright"),_c,wc,oc),0!==ut.paint.get("text-opacity").constantOr(1)&&ir(at,ot,ut,Hl,!0,ut.paint.get("text-translate"),ut.paint.get("text-translate-anchor"),ut.layout.get("text-rotation-alignment"),ut.layout.get("text-pitch-alignment"),ut.layout.get("text-keep-upright"),_c,wc,oc),ot.map.showCollisionBoxes&&(Ko(at,ot,ut,Hl,!0),Ko(at,ot,ut,Hl,!1))}(at,ot,ut,Hl,this.style.placement.variableOffsets,rc):st.cb(ut)?function(at,ot,ut,Hl,rc){if("translucent"!==at.renderPass)return;const{isRenderingToTexture:sc}=rc,oc=ut.paint.get("circle-opacity"),_c=ut.paint.get("circle-stroke-width"),wc=ut.paint.get("circle-stroke-opacity"),Sc=!ut.layout.get("circle-sort-key").isConstant();if(0===oc.constantOr(1)&&(0===_c.constantOr(1)||0===wc.constantOr(1)))return;const iu=at.context,su=iu.gl,lu=at.transform,cu=at.getDepthModeForSublayer(0,Ut.ReadOnly),uu=Vt.disabled,pu=at.colorModeForRenderPass(),mu=[],gu=lu.getCircleRadiusCorrection();for(let Au=0;Au<Hl.length;Au++){const rc=Hl[Au],oc=ot.getTile(rc),_c=oc.getBucket(ut);if(!_c)continue;const wc=ut.paint.get("circle-translate"),iu=ut.paint.get("circle-translate-anchor"),su=st.aC(lu,oc,wc,iu),cu=_c.programConfigurations.get(ut.id),uu=at.useProgram("circle",cu),pu=_c.layoutVertexBuffer,yu=_c.indexBuffer,_u=at.style.map.terrain&&at.style.map.terrain.getTerrainData(rc),xu={programConfiguration:cu,program:uu,layoutVertexBuffer:pu,indexBuffer:yu,uniformValues:ki(at,oc,ut,su,gu),terrainData:_u,projectionData:lu.getProjectionData({overscaledTileID:rc,applyGlobeMatrix:!sc,applyTerrainMatrix:!0})};if(Sc){const at=_c.segments.get();for(const ot of at)mu.push({segments:new st.aL([ot]),sortKey:ot.sortKey,state:xu})}else mu.push({segments:_c.segments,sortKey:0,state:xu})}Sc&&mu.sort(((at,st)=>at.sortKey-st.sortKey));for(const st of mu){const{programConfiguration:ot,program:Hl,layoutVertexBuffer:rc,indexBuffer:sc,uniformValues:oc,terrainData:_c,projectionData:wc}=st.state;Hl.draw(iu,su.TRIANGLES,cu,uu,pu,Zt.backCCW,oc,_c,wc,ut.id,rc,sc,st.segments,ut.paint,at.transform.zoom,ot)}}(at,ot,ut,Hl,rc):st.cc(ut)?function(at,ot,ut,Hl,rc){if(0===ut.paint.get("heatmap-opacity"))return;const sc=at.context,{isRenderingToTexture:oc,isRenderingGlobe:_c}=rc;if(at.style.map.terrain){for(const st of Hl){const Hl=ot.getTile(st);ot.hasRenderableParent(st)||("offscreen"===at.renderPass?rr(at,Hl,ut,st,_c):"translucent"===at.renderPass&&ar(at,ut,st,oc,_c))}sc.viewport.set([0,0,at.width,at.height])}else"offscreen"===at.renderPass?function(at,ot,ut,Hl){const rc=at.context,sc=rc.gl,oc=at.transform,_c=Vt.disabled,wc=new jt([sc.ONE,sc.ONE],st.be.transparent,[!0,!0,!0,!0]);(function(at,ot,ut){const Hl=at.gl;at.activeTexture.set(Hl.TEXTURE1),at.viewport.set([0,0,ot.width/4,ot.height/4]);let rc=ut.heatmapFbos.get(st.c1);rc?(Hl.bindTexture(Hl.TEXTURE_2D,rc.colorAttachment.get()),at.bindFramebuffer.set(rc.framebuffer)):(rc=sr(at,ot.width/4,ot.height/4),ut.heatmapFbos.set(st.c1,rc))})(rc,at,ut),rc.clear({color:st.be.transparent});for(let st=0;st<Hl.length;st++){const Sc=Hl[st];if(ot.hasRenderableParent(Sc))continue;const iu=ot.getTile(Sc),su=iu.getBucket(ut);if(!su)continue;const lu=su.programConfigurations.get(ut.id),cu=at.useProgram("heatmap",lu),uu=oc.getProjectionData({overscaledTileID:Sc,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),pu=oc.getCircleRadiusCorrection();cu.draw(rc,sc.TRIANGLES,Ut.disabled,_c,wc,Zt.backCCW,ji(iu,oc.zoom,ut.paint.get("heatmap-intensity"),pu),null,uu,ut.id,su.layoutVertexBuffer,su.indexBuffer,su.segments,ut.paint,oc.zoom,lu)}rc.viewport.set([0,0,at.width,at.height])}(at,ot,ut,Hl):"translucent"===at.renderPass&&function(at,ot){const ut=at.context,Hl=ut.gl;ut.setColorMode(at.colorModeForRenderPass());const rc=ot.heatmapFbos.get(st.c1);rc&&(ut.activeTexture.set(Hl.TEXTURE0),Hl.bindTexture(Hl.TEXTURE_2D,rc.colorAttachment.get()),ut.activeTexture.set(Hl.TEXTURE1),nr(ut,ot).bind(Hl.LINEAR,Hl.CLAMP_TO_EDGE),at.useProgram("heatmapTexture").draw(ut,Hl.TRIANGLES,Ut.disabled,Vt.disabled,at.colorModeForRenderPass(),Zt.disabled,Ni(at,ot,0,1),null,null,ot.id,at.viewportBuffer,at.quadTriangleIndexBuffer,at.viewportSegments,ot.paint,at.transform.zoom))}(at,ut)}(at,ot,ut,Hl,rc):st.cd(ut)?function(at,ot,ut,Hl,rc){if("translucent"!==at.renderPass)return;const{isRenderingToTexture:sc}=rc,oc=ut.paint.get("line-opacity"),_c=ut.paint.get("line-width");if(0===oc.constantOr(1)||0===_c.constantOr(1))return;const wc=at.getDepthModeForSublayer(0,Ut.ReadOnly),Sc=at.colorModeForRenderPass(),iu=ut.paint.get("line-dasharray"),su=ut.paint.get("line-pattern"),lu=su.constantOr(1),cu=ut.paint.get("line-gradient"),uu=ut.getCrossfadeParameters(),pu=lu?"linePattern":iu?"lineSDF":cu?"lineGradient":"line",mu=at.context,gu=mu.gl,Au=at.transform;let yu=!0;for(const _u of Hl){const Hl=ot.getTile(_u);if(lu&&!Hl.patternsLoaded())continue;const rc=Hl.getBucket(ut);if(!rc)continue;const oc=rc.programConfigurations.get(ut.id),_c=at.context.program.get(),xu=at.useProgram(pu,oc),Su=yu||xu.program!==_c,Du=at.style.map.terrain&&at.style.map.terrain.getTerrainData(_u),Lu=su.constantOr(null);if(Lu&&Hl.imageAtlas){const at=Hl.imageAtlas,st=at.patternPositions[Lu.to.toString()],ot=at.patternPositions[Lu.from.toString()];st&&ot&&oc.setConstantPatternPositions(st,ot)}const $u=Au.getProjectionData({overscaledTileID:_u,applyGlobeMatrix:!sc,applyTerrainMatrix:!0}),hh=Au.getPixelScale(),ed=lu?Wi(at,Hl,ut,hh,uu):iu?Hi(at,Hl,ut,hh,iu,uu):cu?qi(at,Hl,ut,hh,rc.lineClipsArray.length):$i(at,Hl,ut,hh);if(lu)mu.activeTexture.set(gu.TEXTURE0),Hl.imageAtlasTexture.bind(gu.LINEAR,gu.CLAMP_TO_EDGE),oc.updatePaintBuffers(uu);else if(iu&&(Su||at.lineAtlas.dirty))mu.activeTexture.set(gu.TEXTURE0),at.lineAtlas.bind(mu);else if(cu){const Hl=rc.gradients[ut.id];let sc=Hl.texture;if(ut.gradientVersion!==Hl.version){let oc=256;if(ut.stepInterpolant){const ut=ot.getSource().maxzoom,Hl=_u.canonical.z===ut?Math.ceil(1<<at.transform.maxZoom-_u.canonical.z):1;oc=st.ag(st.c2(rc.maxLineLength/st.$*1024*Hl),256,mu.maxTextureSize)}Hl.gradient=st.c3({expression:ut.gradientExpression(),evaluationKey:"lineProgress",resolution:oc,image:Hl.gradient||void 0,clips:rc.lineClipsArray}),Hl.texture?Hl.texture.update(Hl.gradient):Hl.texture=new st.T(mu,Hl.gradient,gu.RGBA),Hl.version=ut.gradientVersion,sc=Hl.texture}mu.activeTexture.set(gu.TEXTURE0),sc.bind(ut.stepInterpolant?gu.NEAREST:gu.LINEAR,gu.CLAMP_TO_EDGE)}const td=at.stencilModeForClipping(_u);xu.draw(mu,gu.TRIANGLES,wc,td,Sc,Zt.disabled,ed,Du,$u,ut.id,rc.layoutVertexBuffer,rc.indexBuffer,rc.segments,ut.paint,at.transform.zoom,oc,rc.layoutVertexBuffer2),yu=!1}}(at,ot,ut,Hl,rc):st.ce(ut)?function(at,ot,ut,Hl,rc){const sc=ut.paint.get("fill-color"),oc=ut.paint.get("fill-opacity");if(0===oc.constantOr(1))return;const{isRenderingToTexture:_c}=rc,wc=at.colorModeForRenderPass(),Sc=ut.paint.get("fill-pattern"),iu=at.opaquePassEnabledForLayer()&&!Sc.constantOr(1)&&1===sc.constantOr(st.be.transparent).a&&1===oc.constantOr(0)?"opaque":"translucent";if(at.renderPass===iu){const st=at.getDepthModeForSublayer(1,"opaque"===at.renderPass?Ut.ReadWrite:Ut.ReadOnly);cr(at,ot,ut,Hl,st,wc,!1,_c)}if("translucent"===at.renderPass&&ut.paint.get("fill-antialias")){const st=at.getDepthModeForSublayer(ut.getPaintProperty("fill-outline-color")?2:0,Ut.ReadOnly);cr(at,ot,ut,Hl,st,wc,!0,_c)}}(at,ot,ut,Hl,rc):st.cf(ut)?function(at,st,ot,ut,Hl){const rc=ot.paint.get("fill-extrusion-opacity");if(0===rc)return;const{isRenderingToTexture:sc}=Hl;if("translucent"===at.renderPass){const Hl=new Ut(at.context.gl.LEQUAL,Ut.ReadWrite,at.depthRangeFor3D);if(1!==rc||ot.paint.get("fill-extrusion-pattern").constantOr(1))hr(at,st,ot,ut,Hl,Vt.disabled,jt.disabled,sc),hr(at,st,ot,ut,Hl,at.stencilModeFor3D(),at.colorModeForRenderPass(),sc);else{const rc=at.colorModeForRenderPass();hr(at,st,ot,ut,Hl,Vt.disabled,rc,sc)}}}(at,ot,ut,Hl,rc):st.cg(ut)?function(at,ot,ut,Hl,rc){if("offscreen"!==at.renderPass&&"translucent"!==at.renderPass)return;const{isRenderingToTexture:sc}=rc,oc=at.context,_c=at.style.projection.useSubdivision,wc=at.getDepthModeForSublayer(0,Ut.ReadOnly),Sc=at.colorModeForRenderPass();if("offscreen"===at.renderPass)!function(at,ot,ut,Hl,rc,sc,oc){const _c=at.context,wc=_c.gl;for(const Sc of ut){const ut=ot.getTile(Sc),iu=ut.dem;if(!iu||!iu.data)continue;if(!ut.needsHillshadePrepare)continue;const su=iu.dim,lu=iu.stride,cu=iu.getPixels();if(_c.activeTexture.set(wc.TEXTURE1),_c.pixelStoreUnpackPremultiplyAlpha.set(!1),ut.demTexture=ut.demTexture||at.getTileTexture(lu),ut.demTexture){const at=ut.demTexture;at.update(cu,{premultiply:!1}),at.bind(wc.NEAREST,wc.CLAMP_TO_EDGE)}else ut.demTexture=new st.T(_c,cu,wc.RGBA,{premultiply:!1}),ut.demTexture.bind(wc.NEAREST,wc.CLAMP_TO_EDGE);_c.activeTexture.set(wc.TEXTURE0);let uu=ut.fbo;if(!uu){const at=new st.T(_c,{width:su,height:su,data:null},wc.RGBA);at.bind(wc.LINEAR,wc.CLAMP_TO_EDGE),uu=ut.fbo=_c.createFramebuffer(su,su,!0,!1),uu.colorAttachment.set(at.texture)}_c.bindFramebuffer.set(uu.framebuffer),_c.viewport.set([0,0,su,su]),at.useProgram("hillshadePrepare").draw(_c,wc.TRIANGLES,rc,sc,oc,Zt.disabled,Ui(ut.tileID,iu),null,null,Hl.id,at.rasterBoundsBuffer,at.quadTriangleIndexBuffer,at.rasterBoundsSegments),ut.needsHillshadePrepare=!1}}(at,ot,Hl,ut,wc,Vt.disabled,Sc),oc.viewport.set([0,0,at.width,at.height]);else if("translucent"===at.renderPass)if(_c){const[st,rc,oc]=at.stencilConfigForOverlapTwoPass(Hl);ur(at,ot,ut,oc,st,wc,Sc,!1,sc),ur(at,ot,ut,oc,rc,wc,Sc,!0,sc)}else{const[st,rc]=at.getStencilConfigForOverlapAndUpdateStencilID(Hl);ur(at,ot,ut,rc,st,wc,Sc,!1,sc)}}(at,ot,ut,Hl,rc):st.ch(ut)?function(at,st,ot,ut,Hl){if("translucent"!==at.renderPass)return;if(!ut.length)return;const{isRenderingToTexture:rc}=Hl,sc=at.style.projection.useSubdivision,oc=at.getDepthModeForSublayer(0,Ut.ReadOnly),_c=at.colorModeForRenderPass();if(sc){const[Hl,sc,wc]=at.stencilConfigForOverlapTwoPass(ut);dr(at,st,ot,wc,Hl,oc,_c,!1,rc),dr(at,st,ot,wc,sc,oc,_c,!0,rc)}else{const[Hl,sc]=at.getStencilConfigForOverlapAndUpdateStencilID(ut);dr(at,st,ot,sc,Hl,oc,_c,!1,rc)}}(at,ot,ut,Hl,rc):st.ci(ut)?function(at,st,ot,ut,Hl){if("translucent"!==at.renderPass)return;if(0===ot.paint.get("raster-opacity"))return;if(!ut.length)return;const{isRenderingToTexture:rc}=Hl,sc=st.getSource(),oc=at.style.projection.useSubdivision;if(sc instanceof X)pr(at,st,ot,ut,null,!1,!1,sc.tileCoords,sc.flippedWindingOrder,rc);else if(oc){const[Hl,sc,oc]=at.stencilConfigForOverlapTwoPass(ut);pr(at,st,ot,oc,Hl,!1,!0,Td,!1,rc),pr(at,st,ot,oc,sc,!0,!0,Td,!1,rc)}else{const[Hl,sc]=at.getStencilConfigForOverlapAndUpdateStencilID(ut);pr(at,st,ot,sc,Hl,!1,!0,Td,!1,rc)}}(at,ot,ut,Hl,rc):st.cj(ut)?function(at,st,ot,ut,Hl){const rc=ot.paint.get("background-color"),sc=ot.paint.get("background-opacity");if(0===sc)return;const{isRenderingToTexture:oc}=Hl,_c=at.context,wc=_c.gl,Sc=at.style.projection,iu=at.transform,su=iu.tileSize,lu=ot.paint.get("background-pattern");if(at.isPatternMissing(lu))return;const cu=!lu&&1===rc.a&&1===sc&&at.opaquePassEnabledForLayer()?"opaque":"translucent";if(at.renderPass!==cu)return;const uu=Vt.disabled,pu=at.getDepthModeForSublayer(0,"opaque"===cu?Ut.ReadWrite:Ut.ReadOnly),mu=at.colorModeForRenderPass(),gu=at.useProgram(lu?"backgroundPattern":"background"),Au=ut||ve(iu,{tileSize:su,terrain:at.style.map.terrain});lu&&(_c.activeTexture.set(wc.TEXTURE0),at.imageManager.bind(at.context));const yu=ot.getCrossfadeParameters();for(const _u of Au){const st=iu.getProjectionData({overscaledTileID:_u,applyGlobeMatrix:!oc,applyTerrainMatrix:!0}),ut=lu?oo(sc,at,lu,{tileID:_u,tileSize:su},yu):io(sc,rc),Hl=at.style.map.terrain&&at.style.map.terrain.getTerrainData(_u),cu=Sc.getMeshFromTileID(_c,_u.canonical,!1,!0,"raster");gu.draw(_c,wc.TRIANGLES,pu,uu,mu,Zt.backCCW,ut,Hl,st,ot.id,cu.vertexBuffer,cu.indexBuffer,cu.segments)}}(at,0,ut,Hl,rc):st.ck(ut)&&function(at,st,ot,ut){const{isRenderingGlobe:Hl}=ut,rc=at.context,sc=ot.implementation,oc=at.style.projection,_c=at.transform,wc=_c.getProjectionDataForCustomLayer(Hl),Sc={farZ:_c.farZ,nearZ:_c.nearZ,fov:_c.fov*Math.PI/180,modelViewProjectionMatrix:_c.modelViewProjectionMatrix,projectionMatrix:_c.projectionMatrix,shaderData:{variantName:oc.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;\nuniform mat4 u_projection_matrix;\n${oc.shaderPreludeCode.vertexSource}`,define:oc.shaderDefine},defaultProjectionData:wc},iu=sc.renderingMode?sc.renderingMode:"2d";if("offscreen"===at.renderPass){const st=sc.prerender;st&&(at.setCustomLayerDefaults(),rc.setColorMode(at.colorModeForRenderPass()),st.call(sc,rc.gl,Sc),rc.setDirty(),at.setBaseState())}else if("translucent"===at.renderPass){at.setCustomLayerDefaults(),rc.setColorMode(at.colorModeForRenderPass()),rc.setStencilMode(Vt.disabled);const st="3d"===iu?at.getDepthModeFor3D():at.getDepthModeForSublayer(0,Ut.ReadOnly);rc.setDepthMode(st),sc.render(rc.gl,Sc),rc.setDirty(),at.setBaseState(),rc.bindFramebuffer.set(null)}}(at,0,ut,rc))}saveTileTexture(at){const st=this._tileTextures[at.size[0]];st?st.push(at):this._tileTextures[at.size[0]]=[at]}getTileTexture(at){const st=this._tileTextures[at];return st&&st.length>0?st.pop():null}isPatternMissing(at){if(!at)return!1;if(!at.from||!at.to)return!0;const st=this.imageManager.getPattern(at.from.toString()),ot=this.imageManager.getPattern(at.to.toString());return!st||!ot}useProgram(at,st,ot=!1,ut=[]){this.cache=this.cache||{};const Hl=!!this.style.map.terrain,rc=this.style.projection,sc=ot?cd.projectionMercator:rc.shaderPreludeCode,oc=ot?hd:rc.shaderDefine,_c=at+(st?st.cacheKey:"")+`/${ot?dd:rc.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(Hl?"/terrain":"")+(ut?`/${ut.join("/")}`:"");return this.cache[_c]||(this.cache[_c]=new Si(this.context,cd[at],st,bd[at],this._showOverdrawInspector,Hl,sc,oc,ut)),this.cache[_c]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const at=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(at.FUNC_ADD)}initDebugOverlayCanvas(){null==this.debugOverlayCanvas&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new st.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:at,drawingBufferHeight:st}=this.context.gl;return this.width!==at||this.height!==st}}function Sr(at,st){let ot,ut=!1,Hl=null,rc=null;const s=()=>{Hl=null,ut&&(at.apply(rc,ot),Hl=setTimeout(s,st),ut=!1)};return(...at)=>(ut=!0,rc=this,ot=at,Hl||s(),Hl)}class Er{constructor(at){this._getCurrentHash=()=>{const at=window.location.hash.replace("#","");if(this._hashName){let st;return at.split("&").map((at=>at.split("="))).forEach((at=>{at[0]===this._hashName&&(st=at)})),(st&&st[1]||"").split("/")}return at.split("/")},this._onHashChange=()=>{const at=this._getCurrentHash();if(!this._isValidHash(at))return!1;const st=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(at[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+at[2],+at[1]],zoom:+at[0],bearing:st,pitch:+(at[4]||0)}),!0},this._updateHashUnthrottled=()=>{const at=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,at)},this._removeHash=()=>{const at=this._getCurrentHash();if(0===at.length)return;const st=at.join("/");let ot=st;ot.split("&").length>0&&(ot=ot.split("&")[0]),this._hashName&&(ot=`${this._hashName}=${st}`);let ut=window.location.hash.replace(ot,"");ut.startsWith("#&")?ut=ut.slice(0,1)+ut.slice(2):"#"===ut&&(ut="");let Hl=window.location.href.replace(/(#.+)?$/,ut);Hl=Hl.replace("&&","&"),window.history.replaceState(window.history.state,null,Hl)},this._updateHash=Sr(this._updateHashUnthrottled,300),this._hashName=at&&encodeURIComponent(at)}addTo(at){return this._map=at,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(at){const st=this._map.getCenter(),ot=Math.round(100*this._map.getZoom())/100,ut=Math.ceil((ot*Math.LN2+Math.log(512/360/.5))/Math.LN10),Hl=Math.pow(10,ut),rc=Math.round(st.lng*Hl)/Hl,sc=Math.round(st.lat*Hl)/Hl,oc=this._map.getBearing(),_c=this._map.getPitch();let wc="";if(wc+=at?`/${rc}/${sc}/${ot}`:`${ot}/${sc}/${rc}`,(oc||_c)&&(wc+="/"+Math.round(10*oc)/10),_c&&(wc+=`/${Math.round(_c)}`),this._hashName){const at=this._hashName;let st=!1;const ot=window.location.hash.slice(1).split("&").map((ot=>{const ut=ot.split("=")[0];return ut===at?(st=!0,`${ut}=${wc}`):ot})).filter((at=>at));return st||ot.push(`${at}=${wc}`),`#${ot.join("&")}`}return`#${wc}`}_isValidHash(at){if(at.length<3||at.some(isNaN))return!1;try{new st.S(+at[2],+at[1])}catch(at){return!1}const ot=+at[0],ut=+(at[3]||0),Hl=+(at[4]||0);return ot>=this._map.getMinZoom()&&ot<=this._map.getMaxZoom()&&ut>=-180&&ut<=180&&Hl>=this._map.getMinPitch()&&Hl<=this._map.getMaxPitch()}}const Pd={linearity:.3,easing:st.cl(0,0,.3,1)},zd=st.e({deceleration:2500,maxSpeed:1400},Pd),Nd=st.e({deceleration:20,maxSpeed:1400},Pd),Rd=st.e({deceleration:1e3,maxSpeed:360},Pd),Od=st.e({deceleration:1e3,maxSpeed:90},Pd),Bd=st.e({deceleration:1e3,maxSpeed:360},Pd);class Fr{constructor(at){this._map=at,this.clear()}clear(){this._inertiaBuffer=[]}record(at){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:rc.now(),settings:at})}_drainInertiaBuffer(){const at=this._inertiaBuffer,st=rc.now();for(;at.length>0&&st-at[0].time>160;)at.shift()}_onMoveEnd(at){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const ot={zoom:0,bearing:0,pitch:0,roll:0,pan:new st.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:st}of this._inertiaBuffer)ot.zoom+=st.zoomDelta||0,ot.bearing+=st.bearingDelta||0,ot.pitch+=st.pitchDelta||0,ot.roll+=st.rollDelta||0,st.panDelta&&ot.pan._add(st.panDelta),st.around&&(ot.around=st.around),st.pinchAround&&(ot.pinchAround=st.pinchAround);const ut=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,Hl={};if(ot.pan.mag()){const rc=Or(ot.pan.mag(),ut,st.e({},zd,at||{})),sc=ot.pan.mult(rc.amount/ot.pan.mag()),oc=this._map.cameraHelper.handlePanInertia(sc,this._map.transform);Hl.center=oc.easingCenter,Hl.offset=oc.easingOffset,Br(Hl,rc)}if(ot.zoom){const at=Or(ot.zoom,ut,Nd);Hl.zoom=this._map.transform.zoom+at.amount,Br(Hl,at)}if(ot.bearing){const at=Or(ot.bearing,ut,Rd);Hl.bearing=this._map.transform.bearing+st.ag(at.amount,-179,179),Br(Hl,at)}if(ot.pitch){const at=Or(ot.pitch,ut,Od);Hl.pitch=this._map.transform.pitch+at.amount,Br(Hl,at)}if(ot.roll){const at=Or(ot.roll,ut,Bd);Hl.roll=this._map.transform.roll+st.ag(at.amount,-179,179),Br(Hl,at)}if(Hl.zoom||Hl.bearing){const at=void 0===ot.pinchAround?ot.around:ot.pinchAround;Hl.around=at?this._map.unproject(at):this._map.getCenter()}return this.clear(),st.e(Hl,{noMoveStart:!0})}}function Br(at,st){(!at.duration||at.duration<st.duration)&&(at.duration=st.duration,at.easing=st.easing)}function Or(at,ot,ut){const{maxSpeed:Hl,linearity:rc,deceleration:sc}=ut,oc=st.ag(at*rc/(ot/1e3),-Hl,Hl),_c=Math.abs(oc)/(sc*rc);return{easing:ut.easing,duration:1e3*_c,amount:oc*(_c/2)}}class jr extends st.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(at,ot,ut,Hl={}){ut=ut instanceof MouseEvent?ut:new MouseEvent(at,ut);const rc=n.mousePos(ot.getCanvas(),ut),sc=ot.unproject(rc);super(at,st.e({point:rc,lngLat:sc,originalEvent:ut},Hl)),this._defaultPrevented=!1,this.target=ot}}class Nr extends st.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(at,ot,ut){const Hl="touchend"===at?ut.changedTouches:ut.touches,rc=n.touchPos(ot.getCanvasContainer(),Hl),sc=rc.map((at=>ot.unproject(at))),oc=rc.reduce(((at,st,ot,ut)=>at.add(st.div(ut.length))),new st.P(0,0));super(at,{points:rc,point:oc,lngLats:sc,lngLat:ot.unproject(oc),originalEvent:ut}),this._defaultPrevented=!1}}class Zr extends st.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(at,st,ot){super(at,{originalEvent:ot}),this._defaultPrevented=!1}}class Ur{constructor(at,st){this._map=at,this._clickTolerance=st.clickTolerance}reset(){delete this._mousedownPos}wheel(at){return this._firePreventable(new Zr(at.type,this._map,at))}mousedown(at,st){return this._mousedownPos=st,this._firePreventable(new jr(at.type,this._map,at))}mouseup(at){this._map.fire(new jr(at.type,this._map,at))}click(at,st){this._mousedownPos&&this._mousedownPos.dist(st)>=this._clickTolerance||this._map.fire(new jr(at.type,this._map,at))}dblclick(at){return this._firePreventable(new jr(at.type,this._map,at))}mouseover(at){this._map.fire(new jr(at.type,this._map,at))}mouseout(at){this._map.fire(new jr(at.type,this._map,at))}touchstart(at){return this._firePreventable(new Nr(at.type,this._map,at))}touchmove(at){this._map.fire(new Nr(at.type,this._map,at))}touchend(at){this._map.fire(new Nr(at.type,this._map,at))}touchcancel(at){this._map.fire(new Nr(at.type,this._map,at))}_firePreventable(at){if(this._map.fire(at),at.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Gr{constructor(at){this._map=at}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(at){this._map.fire(new jr(at.type,this._map,at))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new jr("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(at){this._delayContextMenu?this._contextMenuEvent=at:this._ignoreContextMenu||this._map.fire(new jr(at.type,this._map,at)),this._map.listens("contextmenu")&&at.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Vr{constructor(at){this._map=at}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(at){return this.transform.screenPointToLocation(st.P.convert(at),this._map.terrain)}}class $r{constructor(at,st){this._map=at,this._tr=new Vr(at),this._el=at.getCanvasContainer(),this._container=at.getContainer(),this._clickTolerance=st.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(at,st){this.isEnabled()&&at.shiftKey&&0===at.button&&(n.disableDrag(),this._startPos=this._lastPos=st,this._active=!0)}mousemoveWindow(at,st){if(!this._active)return;const ot=st;if(this._lastPos.equals(ot)||!this._box&&ot.dist(this._startPos)<this._clickTolerance)return;const ut=this._startPos;this._lastPos=ot,this._box||(this._box=n.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",at));const Hl=Math.min(ut.x,ot.x),rc=Math.max(ut.x,ot.x),sc=Math.min(ut.y,ot.y),oc=Math.max(ut.y,ot.y);n.setTransform(this._box,`translate(${Hl}px,${sc}px)`),this._box.style.width=rc-Hl+"px",this._box.style.height=oc-sc+"px"}mouseupWindow(at,ot){if(!this._active)return;if(0!==at.button)return;const ut=this._startPos,Hl=ot;if(this.reset(),n.suppressClick(),ut.x!==Hl.x||ut.y!==Hl.y)return this._map.fire(new st.l("boxzoomend",{originalEvent:at})),{cameraAnimation:at=>at.fitScreenCoordinates(ut,Hl,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",at)}keydown(at){this._active&&27===at.keyCode&&(this.reset(),this._fireEvent("boxzoomcancel",at))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(at,ot){return this._map.fire(new st.l(at,{originalEvent:ot}))}}function qr(at,st){if(at.length!==st.length)throw new Error(`The number of touches and points are not equal - touches ${at.length}, points ${st.length}`);const ot={};for(let ut=0;ut<at.length;ut++)ot[at[ut].identifier]=st[ut];return ot}class Wr{constructor(at){this.reset(),this.numTouches=at.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(at,ot,ut){(this.centroid||ut.length>this.numTouches)&&(this.aborted=!0),this.aborted||(void 0===this.startTime&&(this.startTime=at.timeStamp),ut.length===this.numTouches&&(this.centroid=function(at){const ot=new st.P(0,0);for(const st of at)ot._add(st);return ot.div(at.length)}(ot),this.touches=qr(ut,ot)))}touchmove(at,st,ot){if(this.aborted||!this.centroid)return;const ut=qr(ot,st);for(const Hl in this.touches){const at=ut[Hl];(!at||at.dist(this.touches[Hl])>30)&&(this.aborted=!0)}}touchend(at,st,ot){if((!this.centroid||at.timeStamp-this.startTime>500)&&(this.aborted=!0),0===ot.length){const at=!this.aborted&&this.centroid;if(this.reset(),at)return at}}}class Hr{constructor(at){this.singleTap=new Wr(at),this.numTaps=at.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(at,st,ot){this.singleTap.touchstart(at,st,ot)}touchmove(at,st,ot){this.singleTap.touchmove(at,st,ot)}touchend(at,st,ot){const ut=this.singleTap.touchend(at,st,ot);if(ut){const st=at.timeStamp-this.lastTime<500,ot=!this.lastTap||this.lastTap.dist(ut)<30;if(st&&ot||this.reset(),this.count++,this.lastTime=at.timeStamp,this.lastTap=ut,this.count===this.numTaps)return this.reset(),ut}}}class Xr{constructor(at){this._tr=new Vr(at),this._zoomIn=new Hr({numTouches:1,numTaps:2}),this._zoomOut=new Hr({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(at,st,ot){this._zoomIn.touchstart(at,st,ot),this._zoomOut.touchstart(at,st,ot)}touchmove(at,st,ot){this._zoomIn.touchmove(at,st,ot),this._zoomOut.touchmove(at,st,ot)}touchend(at,st,ot){const ut=this._zoomIn.touchend(at,st,ot),Hl=this._zoomOut.touchend(at,st,ot),rc=this._tr;return ut?(this._active=!0,at.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:st=>st.easeTo({duration:300,zoom:rc.zoom+1,around:rc.unproject(ut)},{originalEvent:at})}):Hl?(this._active=!0,at.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:st=>st.easeTo({duration:300,zoom:rc.zoom-1,around:rc.unproject(Hl)},{originalEvent:at})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Kr{constructor(at){this._enabled=!!at.enable,this._moveStateManager=at.moveStateManager,this._clickTolerance=at.clickTolerance||1,this._moveFunction=at.move,this._activateOnStart=!!at.activateOnStart,at.assignEvents(this),this.reset()}reset(at){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(at)}_move(...at){const st=this._moveFunction(...at);if(st.bearingDelta||st.pitchDelta||st.rollDelta||st.around||st.panDelta)return this._active=!0,st}dragStart(at,st){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(at)&&(this._moveStateManager.startMove(at),this._lastPoint=Array.isArray(st)?st[0]:st,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(at,st){if(!this.isEnabled())return;const ot=this._lastPoint;if(!ot)return;if(at.preventDefault(),!this._moveStateManager.isValidMoveEvent(at))return void this.reset(at);const ut=Array.isArray(st)?st[0]:st;return!this._moved&&ut.dist(ot)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=ut,this._move(ot,ut))}dragEnd(at){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(at)&&(this._moved&&n.suppressClick(),this.reset(at))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Fd=0,jd=2,Ud={[Fd]:1,[jd]:2};class ea{constructor(at){this._correctEvent=at.checkCorrectEvent}startMove(at){const st=n.mouseButton(at);this._eventButton=st}endMove(at){delete this._eventButton}isValidStartEvent(at){return this._correctEvent(at)}isValidMoveEvent(at){return!function(at,st){const ot=Ud[st];return void 0===at.buttons||(at.buttons&ot)!==ot}(at,this._eventButton)}isValidEndEvent(at){return n.mouseButton(at)===this._eventButton}}class ta{constructor(){this._firstTouch=void 0}_isOneFingerTouch(at){return 1===at.targetTouches.length}_isSameTouchEvent(at){return at.targetTouches[0].identifier===this._firstTouch}startMove(at){this._firstTouch=at.targetTouches[0].identifier}endMove(at){delete this._firstTouch}isValidStartEvent(at){return this._isOneFingerTouch(at)}isValidMoveEvent(at){return this._isOneFingerTouch(at)&&this._isSameTouchEvent(at)}isValidEndEvent(at){return this._isOneFingerTouch(at)&&this._isSameTouchEvent(at)}}class ia{constructor(at=new ea({checkCorrectEvent:()=>!0}),st=new ta){this.mouseMoveStateManager=at,this.oneFingerTouchMoveStateManager=st}_executeRelevantHandler(at,st,ot){return at instanceof MouseEvent?st(at):"undefined"!=typeof TouchEvent&&at instanceof TouchEvent?ot(at):void 0}startMove(at){this._executeRelevantHandler(at,(at=>this.mouseMoveStateManager.startMove(at)),(at=>this.oneFingerTouchMoveStateManager.startMove(at)))}endMove(at){this._executeRelevantHandler(at,(at=>this.mouseMoveStateManager.endMove(at)),(at=>this.oneFingerTouchMoveStateManager.endMove(at)))}isValidStartEvent(at){return this._executeRelevantHandler(at,(at=>this.mouseMoveStateManager.isValidStartEvent(at)),(at=>this.oneFingerTouchMoveStateManager.isValidStartEvent(at)))}isValidMoveEvent(at){return this._executeRelevantHandler(at,(at=>this.mouseMoveStateManager.isValidMoveEvent(at)),(at=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(at)))}isValidEndEvent(at){return this._executeRelevantHandler(at,(at=>this.mouseMoveStateManager.isValidEndEvent(at)),(at=>this.oneFingerTouchMoveStateManager.isValidEndEvent(at)))}}const oa=at=>{at.mousedown=at.dragStart,at.mousemoveWindow=at.dragMove,at.mouseup=at.dragEnd,at.contextmenu=at=>{at.preventDefault()}};class ra{constructor(at,st){this._clickTolerance=at.clickTolerance||1,this._map=st,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new st.P(0,0)}_shouldBePrevented(at){return at<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(at,st,ot){return this._calculateTransform(at,st,ot)}touchmove(at,st,ot){if(this._active){if(!this._shouldBePrevented(ot.length))return at.preventDefault(),this._calculateTransform(at,st,ot);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",at)}}touchend(at,st,ot){this._calculateTransform(at,st,ot),this._active&&this._shouldBePrevented(ot.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(at,ot,ut){ut.length>0&&(this._active=!0);const Hl=qr(ut,ot),rc=new st.P(0,0),sc=new st.P(0,0);let oc=0;for(const st in Hl){const at=Hl[st],ot=this._touches[st];ot&&(rc._add(at),sc._add(at.sub(ot)),oc++,Hl[st]=at)}if(this._touches=Hl,this._shouldBePrevented(oc)||!sc.mag())return;const _c=sc.div(oc);return this._sum._add(_c),this._sum.mag()<this._clickTolerance?void 0:{around:rc.div(oc),panDelta:_c}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class aa{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(at,st,ot){this._firstTwoTouches||ot.length<2||(this._firstTwoTouches=[ot[0].identifier,ot[1].identifier],this._start([st[0],st[1]]))}touchmove(at,st,ot){if(!this._firstTwoTouches)return;at.preventDefault();const[ut,Hl]=this._firstTwoTouches,rc=sa(ot,st,ut),sc=sa(ot,st,Hl);if(!rc||!sc)return;const oc=this._aroundCenter?null:rc.add(sc).div(2);return this._move([rc,sc],oc,at)}touchend(at,st,ot){if(!this._firstTwoTouches)return;const[ut,Hl]=this._firstTwoTouches,rc=sa(ot,st,ut),sc=sa(ot,st,Hl);rc&&sc||(this._active&&n.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(at){this._enabled=!0,this._aroundCenter=!!at&&"center"===at.around}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function sa(at,st,ot){for(let ut=0;ut<at.length;ut++)if(at[ut].identifier===ot)return st[ut]}function na(at,st){return Math.log(at/st)/Math.LN2}class la extends aa{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(at){this._startDistance=this._distance=at[0].dist(at[1])}_move(at,st){const ot=this._distance;if(this._distance=at[0].dist(at[1]),this._active||!(Math.abs(na(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:na(this._distance,ot),pinchAround:st}}}function ca(at,st){return 180*at.angleWith(st)/Math.PI}class ha extends aa{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(at){this._startVector=this._vector=at[0].sub(at[1]),this._minDiameter=at[0].dist(at[1])}_move(at,st,ot){const ut=this._vector;if(this._vector=at[0].sub(at[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:ca(this._vector,ut),pinchAround:st}}_isBelowThreshold(at){this._minDiameter=Math.min(this._minDiameter,at.mag());const st=25/(Math.PI*this._minDiameter)*360,ot=ca(at,this._startVector);return Math.abs(ot)<st}}function ua(at){return Math.abs(at.y)>Math.abs(at.x)}class da extends aa{constructor(at){super(),this._currentTouchCount=0,this._map=at}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(at,st,ot){super.touchstart(at,st,ot),this._currentTouchCount=ot.length}_start(at){this._lastPoints=at,ua(at[0].sub(at[1]))&&(this._valid=!1)}_move(at,st,ot){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const ut=at[0].sub(this._lastPoints[0]),Hl=at[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(ut,Hl,ot.timeStamp),this._valid?(this._lastPoints=at,this._active=!0,{pitchDelta:(ut.y+Hl.y)/2*-.5}):void 0}gestureBeginsVertically(at,st,ot){if(void 0!==this._valid)return this._valid;const ut=at.mag()>=2,Hl=st.mag()>=2;if(!ut&&!Hl)return;if(!ut||!Hl)return void 0===this._firstMove&&(this._firstMove=ot),ot-this._firstMove<100&&void 0;const rc=at.y>0==st.y>0;return ua(at)&&ua(st)&&rc}}const Vd={panStep:100,bearingStep:15,pitchStep:10};class pa{constructor(at){this._tr=new Vr(at);const st=Vd;this._panStep=st.panStep,this._bearingStep=st.bearingStep,this._pitchStep=st.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(at){if(at.altKey||at.ctrlKey||at.metaKey)return;let st=0,ot=0,ut=0,Hl=0,rc=0;switch(at.keyCode){case 61:case 107:case 171:case 187:st=1;break;case 189:case 109:case 173:st=-1;break;case 37:at.shiftKey?ot=-1:(at.preventDefault(),Hl=-1);break;case 39:at.shiftKey?ot=1:(at.preventDefault(),Hl=1);break;case 38:at.shiftKey?ut=1:(at.preventDefault(),rc=-1);break;case 40:at.shiftKey?ut=-1:(at.preventDefault(),rc=1);break;default:return}return this._rotationDisabled&&(ot=0,ut=0),{cameraAnimation:sc=>{const oc=this._tr;sc.easeTo({duration:300,easeId:"keyboardHandler",easing:ma,zoom:st?Math.round(oc.zoom)+st*(at.shiftKey?2:1):oc.zoom,bearing:oc.bearing+ot*this._bearingStep,pitch:oc.pitch+ut*this._pitchStep,offset:[-Hl*this._panStep,-rc*this._panStep],center:oc.center},{originalEvent:at})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ma(at){return at*(2-at)}const Gd=4.000244140625,Zd=1/450;class va{constructor(at,st){this._onTimeout=at=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(at)},this._map=at,this._tr=new Vr(at),this._triggerRenderFrame=st,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Zd}setZoomRate(at){this._defaultZoomRate=at}setWheelZoomRate(at){this._wheelZoomRate=at}isEnabled(){return!!this._enabled}isActive(){return!!this._active||void 0!==this._finishTimeout}isZooming(){return!!this._zooming}enable(at){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!at&&"center"===at.around)}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(at){return!!this._map.cooperativeGestures.isEnabled()&&!(at.ctrlKey||this._map.cooperativeGestures.isBypassed(at))}wheel(at){if(!this.isEnabled())return;if(this._shouldBePrevented(at))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",at);let st=at.deltaMode===WheelEvent.DOM_DELTA_LINE?40*at.deltaY:at.deltaY;const ot=rc.now(),ut=ot-(this._lastWheelEventTime||0);this._lastWheelEventTime=ot,0!==st&&st%Gd==0?this._type="wheel":0!==st&&Math.abs(st)<4?this._type="trackpad":ut>400?(this._type=null,this._lastValue=st,this._timeout=setTimeout(this._onTimeout,40,at)):this._type||(this._type=Math.abs(ut*st)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,st+=this._lastValue)),at.shiftKey&&st&&(st/=4),this._type&&(this._lastWheelEvent=at,this._delta-=st,this._active||this._start(at)),at.preventDefault()}_start(at){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const ot=n.mousePos(this._map.getCanvas(),at),ut=this._tr;this._aroundPoint=this._aroundCenter?ut.transform.locationToScreenPoint(st.S.convert(ut.center)):ot,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId)return;if(this._frameId=null,!this.isActive())return;const at=this._tr.transform;if("number"==typeof this._lastExpectedZoom){const st=at.zoom-this._lastExpectedZoom;"number"==typeof this._startZoom&&(this._startZoom+=st),"number"==typeof this._targetZoom&&(this._targetZoom+=st)}if(0!==this._delta){const ot="wheel"===this._type&&Math.abs(this._delta)>Gd?this._wheelZoomRate:this._defaultZoomRate;let ut=2/(1+Math.exp(-Math.abs(this._delta*ot)));this._delta<0&&0!==ut&&(ut=1/ut);const Hl="number"!=typeof this._targetZoom?at.scale:st.ae(this._targetZoom);this._targetZoom=at.getConstrained(at.getCameraLngLat(),st.aj(Hl*ut)).zoom,"wheel"===this._type&&(this._startZoom=at.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const ot="number"!=typeof this._targetZoom?at.zoom:this._targetZoom,ut=this._startZoom,Hl=this._easing;let sc,oc=!1;if("wheel"===this._type&&ut&&Hl){const at=rc.now()-this._lastWheelEventTime,_c=Math.min((at+5)/200,1),wc=Hl(_c);sc=st.C.number(ut,ot,wc),_c<1?this._frameId||(this._frameId=!0):oc=!0}else sc=ot,oc=!0;return this._active=!0,oc&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=sc,{noInertia:!0,needsRenderFrame:!oc,zoomDelta:sc-at.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(at){let ot=st.cn;if(this._prevEase){const at=this._prevEase,ut=(rc.now()-at.start)/at.duration,Hl=at.easing(ut+.01)-at.easing(ut),sc=.27/Math.sqrt(Hl*Hl+1e-4)*.01,oc=Math.sqrt(.0729-sc*sc);ot=st.cl(sc,oc,.25,1)}return this._prevEase={start:rc.now(),duration:at,easing:ot},ot}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class ba{constructor(at,st){this._clickZoom=at,this._tapZoom=st}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class xa{constructor(at){this._tr=new Vr(at),this.reset()}reset(){this._active=!1}dblclick(at,st){return at.preventDefault(),{cameraAnimation:ot=>{ot.easeTo({duration:300,zoom:this._tr.zoom+(at.shiftKey?-1:1),around:this._tr.unproject(st)},{originalEvent:at})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ya{constructor(){this._tap=new Hr({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(at,st,ot){if(!this._swipePoint)if(this._tapTime){const ut=st[0],Hl=at.timeStamp-this._tapTime<500,rc=this._tapPoint.dist(ut)<30;Hl&&rc?ot.length>0&&(this._swipePoint=ut,this._swipeTouch=ot[0].identifier):this.reset()}else this._tap.touchstart(at,st,ot)}touchmove(at,st,ot){if(this._tapTime){if(this._swipePoint){if(ot[0].identifier!==this._swipeTouch)return;const ut=st[0],Hl=ut.y-this._swipePoint.y;return this._swipePoint=ut,at.preventDefault(),this._active=!0,{zoomDelta:Hl/128}}}else this._tap.touchmove(at,st,ot)}touchend(at,st,ot){if(this._tapTime)this._swipePoint&&0===ot.length&&this.reset();else{const ut=this._tap.touchend(at,st,ot);ut&&(this._tapTime=at.timeStamp,this._tapPoint=ut)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wa{constructor(at,st,ot){this._el=at,this._mousePan=st,this._touchPan=ot}enable(at){this._inertiaOptions=at||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Ta{constructor(at,st,ot,ut){this._pitchWithRotate=at.pitchWithRotate,this._rollEnabled=at.rollEnabled,this._mouseRotate=st,this._mousePitch=ot,this._mouseRoll=ut}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Pa{constructor(at,st,ot,ut){this._el=at,this._touchZoom=st,this._touchRotate=ot,this._tapDragZoom=ut,this._rotationDisabled=!1,this._enabled=!0}enable(at){this._touchZoom.enable(at),this._rotationDisabled||this._touchRotate.enable(at),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Ca{constructor(at,st){this._bypassKey=-1!==navigator.userAgent.indexOf("Mac")?"metaKey":"ctrlKey",this._map=at,this._options=st,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const at=this._map.getCanvasContainer();at.classList.add("maplibregl-cooperative-gestures"),this._container=n.create("div","maplibregl-cooperative-gesture-screen",at);let st=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");"metaKey"===this._bypassKey&&(st=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const ot=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),ut=document.createElement("div");ut.className="maplibregl-desktop-message",ut.textContent=st,this._container.appendChild(ut);const Hl=document.createElement("div");Hl.className="maplibregl-mobile-message",Hl.textContent=ot,this._container.appendChild(Hl),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(n.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(at){return at[this._bypassKey]}notifyGestureBlocked(at,ot){this._enabled&&(this._map.fire(new st.l("cooperativegestureprevented",{gestureType:at,originalEvent:ot})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const Ia=at=>at.zoom||at.drag||at.roll||at.pitch||at.rotate;class Ma extends st.l{}function Sa(at){return at.panDelta&&at.panDelta.mag()||at.zoomDelta||at.bearingDelta||at.pitchDelta||at.rollDelta}class Ea{constructor(at,ot){this.handleWindowEvent=at=>{this.handleEvent(at,`${at.type}Window`)},this.handleEvent=(at,ot)=>{if("blur"===at.type)return void this.stop(!0);this._updatingCamera=!0;const ut="renderFrame"===at.type?void 0:at,Hl={needsRenderFrame:!1},rc={},sc={};for(const{handlerName:wc,handler:Sc,allowed:iu}of this._handlers){if(!Sc.isEnabled())continue;let oc;if(this._blockedByActive(sc,iu,wc))Sc.reset();else if(Sc[ot||at.type]){if(st.co(at,ot||at.type)){const st=n.mousePos(this._map.getCanvas(),at);oc=Sc[ot||at.type](at,st)}else if(st.cp(at,ot||at.type)){const st=this._getMapTouches(at.touches),ut=n.touchPos(this._map.getCanvas(),st);oc=Sc[ot||at.type](at,ut,st)}else st.cq(ot||at.type)||(oc=Sc[ot||at.type](at));this.mergeHandlerResult(Hl,rc,oc,wc,ut),oc&&oc.needsRenderFrame&&this._triggerRenderFrame()}(oc||Sc.isActive())&&(sc[wc]=Sc)}const oc={};for(const st in this._previousActiveHandlers)sc[st]||(oc[st]=ut);this._previousActiveHandlers=sc,(Object.keys(oc).length||Sa(Hl))&&(this._changes.push([Hl,rc,oc]),this._triggerRenderFrame()),(Object.keys(sc).length||Sa(Hl))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:_c}=Hl;_c&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],_c(this._map))},this._map=at,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Fr(at),this._bearingSnap=ot.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(ot);const ut=this._el;this._listeners=[[ut,"touchstart",{passive:!0}],[ut,"touchmove",{passive:!1}],[ut,"touchend",void 0],[ut,"touchcancel",void 0],[ut,"mousedown",void 0],[ut,"mousemove",void 0],[ut,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[ut,"mouseover",void 0],[ut,"mouseout",void 0],[ut,"dblclick",void 0],[ut,"click",void 0],[ut,"keydown",{capture:!1}],[ut,"keyup",void 0],[ut,"wheel",{passive:!1}],[ut,"contextmenu",void 0],[window,"blur",void 0]];for(const[st,Hl,rc]of this._listeners)n.addEventListener(st,Hl,st===document?this.handleWindowEvent:this.handleEvent,rc)}destroy(){for(const[at,st,ot]of this._listeners)n.removeEventListener(at,st,at===document?this.handleWindowEvent:this.handleEvent,ot)}_addDefaultHandlers(at){const ot=this._map,ut=ot.getCanvasContainer();this._add("mapEvent",new Ur(ot,at));const Hl=ot.boxZoom=new $r(ot,at);this._add("boxZoom",Hl),at.interactive&&at.boxZoom&&Hl.enable();const rc=ot.cooperativeGestures=new Ca(ot,at.cooperativeGestures);this._add("cooperativeGestures",rc),at.cooperativeGestures&&rc.enable();const sc=new Xr(ot),oc=new xa(ot);ot.doubleClickZoom=new ba(oc,sc),this._add("tapZoom",sc),this._add("clickZoom",oc),at.interactive&&at.doubleClickZoom&&ot.doubleClickZoom.enable();const _c=new ya;this._add("tapDragZoom",_c);const wc=ot.touchPitch=new da(ot);this._add("touchPitch",wc),at.interactive&&at.touchPitch&&ot.touchPitch.enable(at.touchPitch);const u=()=>ot.project(ot.getCenter()),Sc=function({enable:at,clickTolerance:ot,aroundCenter:ut=!0,minPixelCenterThreshold:Hl=100,rotateDegreesPerPixelMoved:rc=.8},sc){const oc=new ea({checkCorrectEvent:at=>0===n.mouseButton(at)&&at.ctrlKey||2===n.mouseButton(at)&&!at.ctrlKey});return new Kr({clickTolerance:ot,move:(at,ot)=>{const oc=sc();if(ut&&Math.abs(oc.y-at.y)>Hl)return{bearingDelta:st.cm(new st.P(at.x,ot.y),ot,oc)};let _c=(ot.x-at.x)*rc;return ut&&ot.y<oc.y&&(_c=-_c),{bearingDelta:_c}},moveStateManager:oc,enable:at,assignEvents:oa})}(at,u),iu=function({enable:at,clickTolerance:st,pitchDegreesPerPixelMoved:ot=-.5}){const ut=new ea({checkCorrectEvent:at=>0===n.mouseButton(at)&&at.ctrlKey||2===n.mouseButton(at)});return new Kr({clickTolerance:st,move:(at,st)=>({pitchDelta:(st.y-at.y)*ot}),moveStateManager:ut,enable:at,assignEvents:oa})}(at),su=function({enable:at,clickTolerance:st,rollDegreesPerPixelMoved:ot=.3},ut){const Hl=new ea({checkCorrectEvent:at=>2===n.mouseButton(at)&&at.ctrlKey});return new Kr({clickTolerance:st,move:(at,st)=>{const Hl=ut();let rc=(st.x-at.x)*ot;return st.y<Hl.y&&(rc=-rc),{rollDelta:rc}},moveStateManager:Hl,enable:at,assignEvents:oa})}(at,u);ot.dragRotate=new Ta(at,Sc,iu,su),this._add("mouseRotate",Sc,["mousePitch"]),this._add("mousePitch",iu,["mouseRotate","mouseRoll"]),this._add("mouseRoll",su,["mousePitch"]),at.interactive&&at.dragRotate&&ot.dragRotate.enable();const lu=function({enable:at,clickTolerance:st}){const ot=new ea({checkCorrectEvent:at=>0===n.mouseButton(at)&&!at.ctrlKey});return new Kr({clickTolerance:st,move:(at,st)=>({around:st,panDelta:st.sub(at)}),activateOnStart:!0,moveStateManager:ot,enable:at,assignEvents:oa})}(at),cu=new ra(at,ot);ot.dragPan=new wa(ut,lu,cu),this._add("mousePan",lu),this._add("touchPan",cu,["touchZoom","touchRotate"]),at.interactive&&at.dragPan&&ot.dragPan.enable(at.dragPan);const uu=new ha,pu=new la;ot.touchZoomRotate=new Pa(ut,pu,uu,_c),this._add("touchRotate",uu,["touchPan","touchZoom"]),this._add("touchZoom",pu,["touchPan","touchRotate"]),at.interactive&&at.touchZoomRotate&&ot.touchZoomRotate.enable(at.touchZoomRotate);const mu=ot.scrollZoom=new va(ot,(()=>this._triggerRenderFrame()));this._add("scrollZoom",mu,["mousePan"]),at.interactive&&at.scrollZoom&&ot.scrollZoom.enable(at.scrollZoom);const gu=ot.keyboard=new pa(ot);this._add("keyboard",gu),at.interactive&&at.keyboard&&ot.keyboard.enable(),this._add("blockableMapEvent",new Gr(ot))}_add(at,st,ot){this._handlers.push({handlerName:at,handler:st,allowed:ot}),this._handlersById[at]=st}stop(at){if(!this._updatingCamera){for(const{handler:at}of this._handlers)at.reset();this._inertia.clear(),this._fireEvents({},{},at),this._changes=[]}}isActive(){for(const{handler:at}of this._handlers)if(at.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return Boolean(Ia(this._eventsInProgress))||this.isZooming()}_blockedByActive(at,st,ot){for(const ut in at)if(ut!==ot&&(!st||st.indexOf(ut)<0))return!0;return!1}_getMapTouches(at){const st=[];for(const ot of at)this._el.contains(ot.target)&&st.push(ot);return st}mergeHandlerResult(at,ot,ut,Hl,rc){if(!ut)return;st.e(at,ut);const sc={handlerName:Hl,originalEvent:ut.originalEvent||rc};void 0!==ut.zoomDelta&&(ot.zoom=sc),void 0!==ut.panDelta&&(ot.drag=sc),void 0!==ut.rollDelta&&(ot.roll=sc),void 0!==ut.pitchDelta&&(ot.pitch=sc),void 0!==ut.bearingDelta&&(ot.rotate=sc)}_applyChanges(){const at={},ot={},ut={};for(const[Hl,rc,sc]of this._changes)Hl.panDelta&&(at.panDelta=(at.panDelta||new st.P(0,0))._add(Hl.panDelta)),Hl.zoomDelta&&(at.zoomDelta=(at.zoomDelta||0)+Hl.zoomDelta),Hl.bearingDelta&&(at.bearingDelta=(at.bearingDelta||0)+Hl.bearingDelta),Hl.pitchDelta&&(at.pitchDelta=(at.pitchDelta||0)+Hl.pitchDelta),Hl.rollDelta&&(at.rollDelta=(at.rollDelta||0)+Hl.rollDelta),void 0!==Hl.around&&(at.around=Hl.around),void 0!==Hl.pinchAround&&(at.pinchAround=Hl.pinchAround),Hl.noInertia&&(at.noInertia=Hl.noInertia),st.e(ot,rc),st.e(ut,sc);this._updateMapTransform(at,ot,ut),this._changes=[]}_updateMapTransform(at,st,ot){const ut=this._map,Hl=ut._getTransformForUpdate(),rc=ut.terrain;if(!(Sa(at)||rc&&this._terrainMovement))return this._fireEvents(st,ot,!0);ut._stop(!0);let{panDelta:sc,zoomDelta:oc,bearingDelta:_c,pitchDelta:wc,rollDelta:Sc,around:iu,pinchAround:su}=at;void 0!==su&&(iu=su),iu=iu||ut.transform.centerPoint,rc&&!Hl.isPointOnMapSurface(iu)&&(iu=Hl.centerPoint);const lu={panDelta:sc,zoomDelta:oc,rollDelta:Sc,pitchDelta:wc,bearingDelta:_c,around:iu};this._map.cameraHelper.useGlobeControls&&!Hl.isPointOnMapSurface(iu)&&(iu=Hl.centerPoint);const cu=iu.distSqr(Hl.centerPoint)<.01?Hl.center:Hl.screenPointToLocation(sc?iu.sub(sc):iu);rc?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(lu,Hl),this._terrainMovement||!st.drag&&!st.zoom?st.drag&&this._terrainMovement?Hl.setCenter(Hl.screenPointToLocation(Hl.centerPoint.sub(sc))):this._map.cameraHelper.handleMapControlsPan(lu,Hl,cu):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(lu,Hl,cu))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(lu,Hl),this._map.cameraHelper.handleMapControlsPan(lu,Hl,cu)),ut._applyUpdatedTransform(Hl),this._map._update(),at.noInertia||this._inertia.record(at),this._fireEvents(st,ot,!0)}_fireEvents(at,ot,ut){const Hl=Ia(this._eventsInProgress),sc=Ia(at),oc={};for(const st in at){const{originalEvent:ot}=at[st];this._eventsInProgress[st]||(oc[`${st}start`]=ot),this._eventsInProgress[st]=at[st]}!Hl&&sc&&this._fireEvent("movestart",sc.originalEvent);for(const st in oc)this._fireEvent(st,oc[st]);sc&&this._fireEvent("move",sc.originalEvent);for(const st in at){const{originalEvent:ot}=at[st];this._fireEvent(st,ot)}const _c={};let wc;for(const st in this._eventsInProgress){const{handlerName:at,originalEvent:ut}=this._eventsInProgress[st];this._handlersById[at].isActive()||(delete this._eventsInProgress[st],wc=ot[at]||ut,_c[`${st}end`]=wc)}for(const st in _c)this._fireEvent(st,_c[st]);const Sc=Ia(this._eventsInProgress),iu=(Hl||sc)&&!Sc;if(iu&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const at=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&at.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(at)}if(ut&&iu){this._updatingCamera=!0;const at=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),i=at=>0!==at&&-this._bearingSnap<at&&at<this._bearingSnap;!at||!at.essential&&rc.prefersReducedMotion?(this._map.fire(new st.l("moveend",{originalEvent:wc})),i(this._map.getBearing())&&this._map.resetNorth()):(i(at.bearing||this._map.getBearing())&&(at.bearing=0),at.freezeElevation=!0,this._map.easeTo(at,{originalEvent:wc})),this._updatingCamera=!1}}_fireEvent(at,ot){this._map.fire(new st.l(at,ot?{originalEvent:ot}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((at=>{delete this._frameId,this.handleEvent(new Ma("renderFrame",{timeStamp:at})),this._applyChanges()}))}_triggerRenderFrame(){void 0===this._frameId&&(this._frameId=this._requestFrame())}}class Ra extends st.E{constructor(at,st,ot){super(),this._renderFrameCallback=()=>{const at=Math.min((rc.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(at)),at<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=at,this._bearingSnap=ot.bearingSnap,this.cameraHelper=st,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(at,st){at.apply(this.transform),this.transform=at,this.cameraHelper=st}getCenter(){return new st.S(this.transform.center.lng,this.transform.center.lat)}setCenter(at,st){return this.jumpTo({center:at},st)}getCenterElevation(){return this.transform.elevation}setCenterElevation(at,st){return this.jumpTo({elevation:at},st),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(at){this._centerClampedToGround=at}panBy(at,ot,ut){return at=st.P.convert(at).mult(-1),this.panTo(this.transform.center,st.e({offset:at},ot),ut)}panTo(at,ot,ut){return this.easeTo(st.e({center:at},ot),ut)}getZoom(){return this.transform.zoom}setZoom(at,st){return this.jumpTo({zoom:at},st),this}zoomTo(at,ot,ut){return this.easeTo(st.e({zoom:at},ot),ut)}zoomIn(at,st){return this.zoomTo(this.getZoom()+1,at,st),this}zoomOut(at,st){return this.zoomTo(this.getZoom()-1,at,st),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(at,ot){return at!=this.transform.fov&&(this.transform.setFov(at),this.fire(new st.l("movestart",ot)).fire(new st.l("move",ot)).fire(new st.l("moveend",ot))),this}getBearing(){return this.transform.bearing}setBearing(at,st){return this.jumpTo({bearing:at},st),this}getPadding(){return this.transform.padding}setPadding(at,st){return this.jumpTo({padding:at},st),this}rotateTo(at,ot,ut){return this.easeTo(st.e({bearing:at},ot),ut)}resetNorth(at,ot){return this.rotateTo(0,st.e({duration:1e3},at),ot),this}resetNorthPitch(at,ot){return this.easeTo(st.e({bearing:0,pitch:0,roll:0,duration:1e3},at),ot),this}snapToNorth(at,st){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(at,st):this}getPitch(){return this.transform.pitch}setPitch(at,st){return this.jumpTo({pitch:at},st),this}getRoll(){return this.transform.roll}setRoll(at,st){return this.jumpTo({roll:at},st),this}cameraForBounds(at,st){at=G.convert(at).adjustAntiMeridian();const ot=st&&st.bearing||0;return this._cameraForBoxAndBearing(at.getNorthWest(),at.getSouthEast(),ot,st)}_cameraForBoxAndBearing(at,ot,ut,Hl){const rc={top:0,bottom:0,right:0,left:0};if("number"==typeof(Hl=st.e({padding:rc,offset:[0,0],maxZoom:this.transform.maxZoom},Hl)).padding){const at=Hl.padding;Hl.padding={top:at,bottom:at,right:at,left:at}}const sc=st.e(rc,Hl.padding);Hl.padding=sc;const oc=this.transform,_c=new G(at,ot);return this.cameraHelper.cameraForBoxAndBearing(Hl,sc,_c,ut,oc)}fitBounds(at,st,ot){return this._fitInternal(this.cameraForBounds(at,st),st,ot)}fitScreenCoordinates(at,ot,ut,Hl,rc){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(st.P.convert(at)),this.transform.screenPointToLocation(st.P.convert(ot)),ut,Hl),Hl,rc)}_fitInternal(at,ot,ut){return at?(delete(ot=st.e(at,ot)).padding,ot.linear?this.easeTo(ot,ut):this.flyTo(ot,ut)):this}jumpTo(at,ot){this.stop();const ut=this._getTransformForUpdate();let Hl=!1,rc=!1,sc=!1;const oc=ut.zoom;this.cameraHelper.handleJumpToCenterZoom(ut,at);const _c=ut.zoom!==oc;return"elevation"in at&&ut.elevation!==+at.elevation&&ut.setElevation(+at.elevation),"bearing"in at&&ut.bearing!==+at.bearing&&(Hl=!0,ut.setBearing(+at.bearing)),"pitch"in at&&ut.pitch!==+at.pitch&&(rc=!0,ut.setPitch(+at.pitch)),"roll"in at&&ut.roll!==+at.roll&&(sc=!0,ut.setRoll(+at.roll)),null==at.padding||ut.isPaddingEqual(at.padding)||ut.setPadding(at.padding),this._applyUpdatedTransform(ut),this.fire(new st.l("movestart",ot)).fire(new st.l("move",ot)),_c&&this.fire(new st.l("zoomstart",ot)).fire(new st.l("zoom",ot)).fire(new st.l("zoomend",ot)),Hl&&this.fire(new st.l("rotatestart",ot)).fire(new st.l("rotate",ot)).fire(new st.l("rotateend",ot)),rc&&this.fire(new st.l("pitchstart",ot)).fire(new st.l("pitch",ot)).fire(new st.l("pitchend",ot)),sc&&this.fire(new st.l("rollstart",ot)).fire(new st.l("roll",ot)).fire(new st.l("rollend",ot)),this.fire(new st.l("moveend",ot))}calculateCameraOptionsFromTo(at,ot,ut,Hl=0){const rc=st.a0.fromLngLat(at,ot),sc=st.a0.fromLngLat(ut,Hl),oc=sc.x-rc.x,_c=sc.y-rc.y,wc=sc.z-rc.z,Sc=Math.hypot(oc,_c,wc);if(0===Sc)throw new Error("Can't calculate camera options with same From and To");const iu=Math.hypot(oc,_c),su=st.aj(this.transform.cameraToCenterDistance/Sc/this.transform.tileSize),lu=180*Math.atan2(oc,-_c)/Math.PI;let cu=180*Math.acos(iu/Sc)/Math.PI;return cu=wc<0?90-cu:90+cu,{center:sc.toLngLat(),elevation:Hl,zoom:su,pitch:cu,bearing:lu}}calculateCameraOptionsFromCameraLngLatAltRotation(at,st,ot,ut,Hl){const rc=this.transform.calculateCenterFromCameraLngLatAlt(at,st,ot,ut);return{center:rc.center,elevation:rc.elevation,zoom:rc.zoom,bearing:ot,pitch:ut,roll:Hl}}easeTo(at,ot){this._stop(!1,at.easeId),(!1===(at=st.e({offset:[0,0],duration:500,easing:st.cn},at)).animate||!at.essential&&rc.prefersReducedMotion)&&(at.duration=0);const ut=this._getTransformForUpdate(),Hl=this.getBearing(),sc=ut.pitch,oc=ut.roll,_c="bearing"in at?this._normalizeBearing(at.bearing,Hl):Hl,wc="pitch"in at?+at.pitch:sc,Sc="roll"in at?this._normalizeBearing(at.roll,oc):oc,iu="padding"in at?at.padding:ut.padding,su=st.P.convert(at.offset);let lu,cu;at.around&&(lu=st.S.convert(at.around),cu=ut.locationToScreenPoint(lu));const uu={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},pu=this.cameraHelper.handleEaseTo(ut,{bearing:_c,pitch:wc,roll:Sc,padding:iu,around:lu,aroundPoint:cu,offsetAsPoint:su,offset:at.offset,zoom:at.zoom,center:at.center});return this._rotating=this._rotating||Hl!==_c,this._pitching=this._pitching||wc!==sc,this._rolling=this._rolling||Sc!==oc,this._padding=!ut.isPaddingEqual(iu),this._zooming=this._zooming||pu.isZooming,this._easeId=at.easeId,this._prepareEase(ot,at.noMoveStart,uu),this.terrain&&this._prepareElevation(pu.elevationCenter),this._ease((st=>{pu.easeFunc(st),this.terrain&&!at.freezeElevation&&this._updateElevation(st),this._applyUpdatedTransform(ut),this._fireMoveEvents(ot)}),(st=>{this.terrain&&at.freezeElevation&&this._finalizeElevation(),this._afterEase(ot,st)}),at),this}_prepareEase(at,ot,ut={}){this._moving=!0,ot||ut.moving||this.fire(new st.l("movestart",at)),this._zooming&&!ut.zooming&&this.fire(new st.l("zoomstart",at)),this._rotating&&!ut.rotating&&this.fire(new st.l("rotatestart",at)),this._pitching&&!ut.pitching&&this.fire(new st.l("pitchstart",at)),this._rolling&&!ut.rolling&&this.fire(new st.l("rollstart",at))}_prepareElevation(at){this._elevationCenter=at,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(at,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(at){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const ot=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(at<1&&ot!==this._elevationTarget){const st=this._elevationTarget-this._elevationStart;this._elevationStart+=at*(st-(ot-(st*at+this._elevationStart))/(1-at)),this._elevationTarget=ot}this.transform.setElevation(st.C.number(this._elevationStart,this._elevationTarget,at))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(at){if(!this.terrain&&at.elevation>=0&&at.pitch<=90)return{};const st=at.getCameraLngLat(),ot=at.getCameraAltitude(),ut=this.terrain?this.terrain.getElevationForLngLatZoom(st,at.zoom):0;if(ot<ut){const ot=this.calculateCameraOptionsFromTo(st,ut,at.center,at.elevation);return{pitch:ot.pitch,zoom:ot.zoom}}return{}}_applyUpdatedTransform(at){const st=[];if(st.push((at=>this._elevateCameraIfInsideTerrain(at))),this.transformCameraUpdate&&st.push((at=>this.transformCameraUpdate(at))),!st.length)return;const ot=at.clone();for(const ut of st){const at=ot.clone(),{center:st,zoom:Hl,roll:rc,pitch:sc,bearing:oc,elevation:_c}=ut(at);st&&at.setCenter(st),void 0!==_c&&at.setElevation(_c),void 0!==Hl&&at.setZoom(Hl),void 0!==rc&&at.setRoll(rc),void 0!==sc&&at.setPitch(sc),void 0!==oc&&at.setBearing(oc),ot.apply(at)}this.transform.apply(ot)}_fireMoveEvents(at){this.fire(new st.l("move",at)),this._zooming&&this.fire(new st.l("zoom",at)),this._rotating&&this.fire(new st.l("rotate",at)),this._pitching&&this.fire(new st.l("pitch",at)),this._rolling&&this.fire(new st.l("roll",at))}_afterEase(at,ot){if(this._easeId&&ot&&this._easeId===ot)return;delete this._easeId;const ut=this._zooming,Hl=this._rotating,rc=this._pitching,sc=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,ut&&this.fire(new st.l("zoomend",at)),Hl&&this.fire(new st.l("rotateend",at)),rc&&this.fire(new st.l("pitchend",at)),sc&&this.fire(new st.l("rollend",at)),this.fire(new st.l("moveend",at))}flyTo(at,ot){if(!at.essential&&rc.prefersReducedMotion){const ut=st.Q(at,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(ut,ot)}this.stop(),at=st.e({offset:[0,0],speed:1.2,curve:1.42,easing:st.cn},at);const ut=this._getTransformForUpdate(),Hl=ut.bearing,sc=ut.pitch,oc=ut.roll,_c=ut.padding,wc="bearing"in at?this._normalizeBearing(at.bearing,Hl):Hl,Sc="pitch"in at?+at.pitch:sc,iu="roll"in at?this._normalizeBearing(at.roll,oc):oc,su="padding"in at?at.padding:ut.padding,lu=st.P.convert(at.offset);let cu=ut.centerPoint.add(lu);const uu=ut.screenPointToLocation(cu),pu=this.cameraHelper.handleFlyTo(ut,{bearing:wc,pitch:Sc,roll:iu,padding:su,locationAtOffset:uu,offsetAsPoint:lu,center:at.center,minZoom:at.minZoom,zoom:at.zoom});let mu=at.curve;const gu=Math.max(ut.width,ut.height),Au=gu/pu.scaleOfZoom,yu=pu.pixelPathLength;"number"==typeof pu.scaleOfMinZoom&&(mu=Math.sqrt(gu/pu.scaleOfMinZoom/yu*2));const _u=mu*mu;function w(at){const st=(Au*Au-gu*gu+(at?-1:1)*_u*_u*yu*yu)/(2*(at?Au:gu)*_u*yu);return Math.log(Math.sqrt(st*st+1)-st)}function T(at){return(Math.exp(at)-Math.exp(-at))/2}function P(at){return(Math.exp(at)+Math.exp(-at))/2}const xu=w(!1);let I=function(at){return P(xu)/P(xu+mu*at)},M=function(at){return gu*((P(xu)*(T(st=xu+mu*at)/P(st))-T(xu))/_u)/yu;var st},Su=(w(!0)-xu)/mu;if(Math.abs(yu)<2e-6||!isFinite(Su)){if(Math.abs(gu-Au)<1e-6)return this.easeTo(at,ot);const st=Au<gu?-1:1;Su=Math.abs(Math.log(Au/gu))/mu,M=()=>0,I=at=>Math.exp(st*mu*at)}return at.duration="duration"in at?+at.duration:1e3*Su/("screenSpeed"in at?+at.screenSpeed/mu:+at.speed),at.maxDuration&&at.duration>at.maxDuration&&(at.duration=0),this._zooming=!0,this._rotating=Hl!==wc,this._pitching=Sc!==sc,this._rolling=iu!==oc,this._padding=!ut.isPaddingEqual(su),this._prepareEase(ot,!1),this.terrain&&this._prepareElevation(pu.targetCenter),this._ease((rc=>{const uu=rc*Su,mu=1/I(uu),gu=M(uu);this._rotating&&ut.setBearing(st.C.number(Hl,wc,rc)),this._pitching&&ut.setPitch(st.C.number(sc,Sc,rc)),this._rolling&&ut.setRoll(st.C.number(oc,iu,rc)),this._padding&&(ut.interpolatePadding(_c,su,rc),cu=ut.centerPoint.add(lu)),pu.easeFunc(rc,mu,gu,cu),this.terrain&&!at.freezeElevation&&this._updateElevation(rc),this._applyUpdatedTransform(ut),this._fireMoveEvents(ot)}),(()=>{this.terrain&&at.freezeElevation&&this._finalizeElevation(),this._afterEase(ot)}),at),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(at,st){var ot;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const at=this._onEaseEnd;delete this._onEaseEnd,at.call(this,st)}return at||null===(ot=this.handlers)||void 0===ot||ot.stop(!1),this}_ease(at,st,ot){!1===ot.animate||0===ot.duration?(at(1),st()):(this._easeStart=rc.now(),this._easeOptions=ot,this._onEaseFrame=at,this._onEaseEnd=st,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(at,ot){at=st.aN(at,-180,180);const ut=Math.abs(at-ot);return Math.abs(at-360-ot)<ut&&(at-=360),Math.abs(at+360-ot)<ut&&(at+=360),at}queryTerrainElevation(at){return this.terrain?this.terrain.getElevationForLngLatZoom(st.S.convert(at),this.transform.tileZoom):null}}const Hd={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Da{constructor(at=Hd){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=at=>{!at||"metadata"!==at.sourceDataType&&"visibility"!==at.sourceDataType&&"style"!==at.dataType&&"terrain"!==at.type||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1===this._compact?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=at}getDefaultPosition(){return"bottom-right"}onAdd(at){return this._map=at,this._compact=this.options.compact,this._container=n.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=n.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=n.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){n.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(at,st){const ot=this._map._getUIString(`AttributionControl.${st}`);at.title=ot,at.setAttribute("aria-label",ot)}_updateAttributions(){if(!this._map.style)return;let at=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?at=at.concat(this.options.customAttribution.map((at=>"string"!=typeof at?"":at))):"string"==typeof this.options.customAttribution&&at.push(this.options.customAttribution)),this._map.style.stylesheet){const at=this._map.style.stylesheet;this.styleOwner=at.owner,this.styleId=at.id}const st=this._map.style.sourceCaches;for(const ut in st){const ot=st[ut];if(ot.used||ot.usedForTerrain){const st=ot.getSource();st.attribution&&at.indexOf(st.attribution)<0&&at.push(st.attribution)}}at=at.filter((at=>String(at).trim())),at.sort(((at,st)=>at.length-st.length)),at=at.filter(((st,ot)=>{for(let ut=ot+1;ut<at.length;ut++)if(at[ut].indexOf(st)>=0)return!1;return!0}));const ot=at.join(" | ");ot!==this._attribHTML&&(this._attribHTML=ot,at.length?(this._innerContainer.innerHTML=n.sanitize(ot),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class Aa{constructor(at={}){this._updateCompact=()=>{const at=this._container.children;if(at.length){const st=at[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?!1!==this._compact&&st.classList.add("maplibregl-compact"):st.classList.remove("maplibregl-compact")}},this.options=at}getDefaultPosition(){return"bottom-left"}onAdd(at){this._map=at,this._compact=this.options&&this.options.compact,this._container=n.create("div","maplibregl-ctrl");const st=n.create("a","maplibregl-ctrl-logo");return st.target="_blank",st.rel="noopener nofollow",st.href="https://maplibre.org/",st.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),st.setAttribute("rel","noopener nofollow"),this._container.appendChild(st),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){n.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class La{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(at){const st=++this._id;return this._queue.push({callback:at,id:st,cancelled:!1}),st}remove(at){const st=this._currentlyRunning,ot=st?this._queue.concat(st):this._queue;for(const ut of ot)if(ut.id===at)return void(ut.cancelled=!0)}run(at=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const st=this._currentlyRunning=this._queue;this._queue=[];for(const ot of st)if(!ot.cancelled&&(ot.callback(at),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var Wd=st.aI([{name:"a_pos3d",type:"Int16",components:3}]);class Fa extends st.E{constructor(at){super(),this._lastTilesetChange=rc.now(),this.sourceCache=at,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=at._source.tileSize*2**this.deltaZoom,at.usedForTerrain=!0,at.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(at,ot){this.sourceCache.update(at,ot),this._renderableTilesKeys=[];const ut={};for(const Hl of ve(at,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:ot,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))ut[Hl.key]=!0,this._renderableTilesKeys.push(Hl.key),this._tiles[Hl.key]||(Hl.terrainRttPosMatrix32f=new Float64Array(16),st.bX(Hl.terrainRttPosMatrix32f,0,st.$,st.$,0,0,1),this._tiles[Hl.key]=new re(Hl,this.tileSize),this._lastTilesetChange=rc.now());for(const st in this._tiles)ut[st]||delete this._tiles[st]}freeRtt(at){for(const st in this._tiles){const ot=this._tiles[st];(!at||ot.tileID.equals(at)||ot.tileID.isChildOf(at)||at.isChildOf(ot.tileID))&&(ot.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((at=>this.getTileByID(at)))}getTileByID(at){return this._tiles[at]}getTerrainCoords(at,st){return st?this._getTerrainCoordsForTileRanges(at,st):this._getTerrainCoordsForRegularTile(at)}_getTerrainCoordsForRegularTile(at){const ot={};for(const ut of this._renderableTilesKeys){const Hl=this._tiles[ut].tileID,rc=at.clone(),sc=st.b9();if(Hl.canonical.equals(at.canonical))st.bX(sc,0,st.$,st.$,0,0,1);else if(Hl.canonical.isChildOf(at.canonical)){const ot=Hl.canonical.z-at.canonical.z,ut=Hl.canonical.x-(Hl.canonical.x>>ot<<ot),rc=Hl.canonical.y-(Hl.canonical.y>>ot<<ot),oc=st.$>>ot;st.bX(sc,0,oc,oc,0,0,1),st.M(sc,sc,[-ut*oc,-rc*oc,0])}else{if(!at.canonical.isChildOf(Hl.canonical))continue;{const ot=at.canonical.z-Hl.canonical.z,ut=at.canonical.x-(at.canonical.x>>ot<<ot),rc=at.canonical.y-(at.canonical.y>>ot<<ot),oc=st.$>>ot;st.bX(sc,0,st.$,st.$,0,0,1),st.M(sc,sc,[ut*oc,rc*oc,0]),st.N(sc,sc,[1/2**ot,1/2**ot,0])}}rc.terrainRttPosMatrix32f=new Float32Array(sc),ot[ut]=rc}return ot}_getTerrainCoordsForTileRanges(at,ot){const ut={};for(const Hl of this._renderableTilesKeys){const rc=this._tiles[Hl].tileID;if(!this._isWithinTileRanges(rc,ot))continue;const sc=at.clone(),oc=st.b9();if(rc.canonical.z===at.canonical.z){const ot=at.canonical.x-rc.canonical.x,ut=at.canonical.y-rc.canonical.y;st.bX(oc,0,st.$,st.$,0,0,1),st.M(oc,oc,[ot*st.$,ut*st.$,0])}else if(rc.canonical.z>at.canonical.z){const ot=rc.canonical.z-at.canonical.z,ut=rc.canonical.x-(rc.canonical.x>>ot<<ot),Hl=rc.canonical.y-(rc.canonical.y>>ot<<ot),sc=at.canonical.x-(rc.canonical.x>>ot),_c=at.canonical.y-(rc.canonical.y>>ot),wc=st.$>>ot;st.bX(oc,0,wc,wc,0,0,1),st.M(oc,oc,[-ut*wc+sc*st.$,-Hl*wc+_c*st.$,0])}else{const ot=at.canonical.z-rc.canonical.z,ut=at.canonical.x-(at.canonical.x>>ot<<ot),Hl=at.canonical.y-(at.canonical.y>>ot<<ot),sc=(at.canonical.x>>ot)-rc.canonical.x,_c=(at.canonical.y>>ot)-rc.canonical.y,wc=st.$<<ot;st.bX(oc,0,wc,wc,0,0,1),st.M(oc,oc,[ut*st.$+sc*wc,Hl*st.$+_c*wc,0])}sc.terrainRttPosMatrix32f=new Float32Array(oc),ut[Hl]=sc}return ut}getSourceTile(at,st){const ot=this.sourceCache._source;let ut=at.overscaledZ-this.deltaZoom;if(ut>ot.maxzoom&&(ut=ot.maxzoom),ut<ot.minzoom)return null;this._sourceTileCache[at.key]||(this._sourceTileCache[at.key]=at.scaledTo(ut).key);let Hl=this.sourceCache.getTileByID(this._sourceTileCache[at.key]);if((!Hl||!Hl.dem)&&st)for(;ut>=ot.minzoom&&(!Hl||!Hl.dem);)Hl=this.sourceCache.getTileByID(at.scaledTo(ut--).key);return Hl}anyTilesAfterTime(at=Date.now()){return this._lastTilesetChange>=at}_isWithinTileRanges(at,st){return st[at.canonical.z]&&at.canonical.x>=st[at.canonical.z].minTileX&&at.canonical.x<=st[at.canonical.z].maxTileX&&at.canonical.y>=st[at.canonical.z].minTileY&&at.canonical.y<=st[at.canonical.z].maxTileY}}class Ba{constructor(at,st,ot){this._meshCache={},this.painter=at,this.sourceCache=new Fa(st),this.options=ot,this.exaggeration="number"==typeof ot.exaggeration?ot.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(at,ot,ut,Hl=st.$){var rc;if(!(ot>=0&&ot<Hl&&ut>=0&&ut<Hl))return 0;const sc=this.getTerrainData(at),oc=null===(rc=sc.tile)||void 0===rc?void 0:rc.dem;if(!oc)return 0;const _c=st.cr([],[ot/Hl*st.$,ut/Hl*st.$],sc.u_terrain_matrix),wc=[_c[0]*oc.dim,_c[1]*oc.dim],Sc=Math.floor(wc[0]),iu=Math.floor(wc[1]),su=wc[0]-Sc,lu=wc[1]-iu;return oc.get(Sc,iu)*(1-su)*(1-lu)+oc.get(Sc+1,iu)*su*(1-lu)+oc.get(Sc,iu+1)*(1-su)*lu+oc.get(Sc+1,iu+1)*su*lu}getElevationForLngLatZoom(at,ot){if(!st.cs(ot,at.wrap()))return 0;const{tileID:ut,mercatorX:Hl,mercatorY:rc}=this._getOverscaledTileIDFromLngLatZoom(at,ot);return this.getElevation(ut,Hl%st.$,rc%st.$,st.$)}getElevation(at,ot,ut,Hl=st.$){return this.getDEMElevation(at,ot,ut,Hl)*this.exaggeration}getTerrainData(at){if(!this._emptyDemTexture){const at=this.painter.context,ot=new st.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new st.T(at,ot,at.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new st.T(at,new st.R({width:1,height:1}),at.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(at.gl.NEAREST,at.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=st.af([])}const ot=this.sourceCache.getSourceTile(at,!0);if(ot&&ot.dem&&(!ot.demTexture||ot.needsTerrainPrepare)){const at=this.painter.context;ot.demTexture=this.painter.getTileTexture(ot.dem.stride),ot.demTexture?ot.demTexture.update(ot.dem.getPixels(),{premultiply:!1}):ot.demTexture=new st.T(at,ot.dem.getPixels(),at.gl.RGBA,{premultiply:!1}),ot.demTexture.bind(at.gl.NEAREST,at.gl.CLAMP_TO_EDGE),ot.needsTerrainPrepare=!1}const ut=ot&&ot+ot.tileID.key+at.key;if(ut&&!this._demMatrixCache[ut]){const ut=this.sourceCache.sourceCache._source.maxzoom;let Hl=at.canonical.z-ot.tileID.canonical.z;at.overscaledZ>at.canonical.z&&(at.canonical.z>=ut?Hl=at.canonical.z-ut:st.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const rc=at.canonical.x-(at.canonical.x>>Hl<<Hl),sc=at.canonical.y-(at.canonical.y>>Hl<<Hl),oc=st.ct(new Float64Array(16),[1/(st.$<<Hl),1/(st.$<<Hl),0]);st.M(oc,oc,[rc*st.$,sc*st.$,0]),this._demMatrixCache[at.key]={matrix:oc,coord:at}}return{u_depth:2,u_terrain:3,u_terrain_dim:ot&&ot.dem&&ot.dem.dim||1,u_terrain_matrix:ut?this._demMatrixCache[at.key].matrix:this._emptyDemMatrix,u_terrain_unpack:ot&&ot.dem&&ot.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(ot&&ot.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:ot}}getFramebuffer(at){const ot=this.painter,ut=ot.width/devicePixelRatio,Hl=ot.height/devicePixelRatio;return!this._fbo||this._fbo.width===ut&&this._fbo.height===Hl||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new st.T(ot.context,{width:ut,height:Hl,data:null},ot.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(ot.context.gl.NEAREST,ot.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new st.T(ot.context,{width:ut,height:Hl,data:null},ot.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(ot.context.gl.NEAREST,ot.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=ot.context.createFramebuffer(ut,Hl,!0,!1),this._fbo.depthAttachment.set(ot.context.createRenderbuffer(ot.context.gl.DEPTH_COMPONENT16,ut,Hl))),this._fbo.colorAttachment.set("coords"===at?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const at=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const ot=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let st=0,rc=0;st<this._coordsTextureSize;st++)for(let at=0;at<this._coordsTextureSize;at++,rc+=4)ot[rc+0]=255&at,ot[rc+1]=255&st,ot[rc+2]=at>>8<<4|st>>8,ot[rc+3]=0;const ut=new st.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(ot.buffer)),Hl=new st.T(at,ut,at.gl.RGBA,{premultiply:!1});return Hl.bind(at.gl.NEAREST,at.gl.CLAMP_TO_EDGE),this._coordsTexture=Hl,Hl}pointCoordinate(at){this.painter.maybeDrawDepthAndCoords(!0);const ot=new Uint8Array(4),ut=this.painter.context,Hl=ut.gl,rc=Math.round(at.x*this.painter.pixelRatio/devicePixelRatio),sc=Math.round(at.y*this.painter.pixelRatio/devicePixelRatio),oc=Math.round(this.painter.height/devicePixelRatio);ut.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),Hl.readPixels(rc,oc-sc-1,1,1,Hl.RGBA,Hl.UNSIGNED_BYTE,ot),ut.bindFramebuffer.set(null);const _c=ot[0]+(ot[2]>>4<<8),wc=ot[1]+((15&ot[2])<<8),Sc=this.coordsIndex[255-ot[3]],iu=Sc&&this.sourceCache.getTileByID(Sc);if(!iu)return null;const su=this._coordsTextureSize,lu=(1<<iu.tileID.canonical.z)*su;return new st.a0((iu.tileID.canonical.x*su+_c)/lu+iu.tileID.wrap,(iu.tileID.canonical.y*su+wc)/lu,this.getElevation(iu.tileID,_c,wc,su))}depthAtPoint(at){const st=new Uint8Array(4),ot=this.painter.context,ut=ot.gl;return ot.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),ut.readPixels(at.x,this.painter.height/devicePixelRatio-at.y-1,1,1,ut.RGBA,ut.UNSIGNED_BYTE,st),ot.bindFramebuffer.set(null),(st[0]/16777216+st[1]/65536+st[2]/256+st[3])/256}getTerrainMesh(at){var ot;const ut=(null===(ot=this.painter.style.projection)||void 0===ot?void 0:ot.transitionState)>0,Hl=ut&&0===at.canonical.y,rc=ut&&at.canonical.y===(1<<at.canonical.z)-1,sc=`m_${Hl?"n":""}_${rc?"s":""}`;if(this._meshCache[sc])return this._meshCache[sc];const oc=this.painter.context,_c=new st.cu,wc=new st.aM,Sc=this.meshSize,iu=st.$/Sc,su=Sc*Sc;for(let st=0;st<=Sc;st++)for(let at=0;at<=Sc;at++)_c.emplaceBack(at*iu,st*iu,0);for(let st=0;st<su;st+=Sc+1)for(let at=0;at<Sc;at++)wc.emplaceBack(at+st,Sc+at+st+1,Sc+at+st+2),wc.emplaceBack(at+st,Sc+at+st+2,at+st+1);const lu=_c.length,cu=lu+(Sc+1),uu=(Sc+1)*Sc,pu=Hl?st.bg:0,mu=Hl?0:1,gu=rc?st.bh:st.$,Au=rc?0:1;for(let st=0;st<=Sc;st++)_c.emplaceBack(st*iu,pu,mu);for(let st=0;st<=Sc;st++)_c.emplaceBack(st*iu,gu,Au);for(let st=0;st<Sc;st++)wc.emplaceBack(uu+st,cu+st,cu+st+1),wc.emplaceBack(uu+st,cu+st+1,uu+st+1),wc.emplaceBack(0+st,lu+st+1,lu+st),wc.emplaceBack(0+st,0+st+1,lu+st+1);const yu=_c.length,_u=yu+2*(Sc+1);for(const Su of[0,1])for(let at=0;at<=Sc;at++)for(const ot of[0,1])_c.emplaceBack(Su*st.$,at*iu,ot);for(let st=0;st<2*Sc;st+=2)wc.emplaceBack(yu+st,yu+st+1,yu+st+3),wc.emplaceBack(yu+st,yu+st+3,yu+st+2),wc.emplaceBack(_u+st,_u+st+3,_u+st+1),wc.emplaceBack(_u+st,_u+st+2,_u+st+3);const xu=new wt(oc.createVertexBuffer(_c,Wd.members),oc.createIndexBuffer(wc),st.aL.simpleSegment(0,0,_c.length,wc.length));return this._meshCache[sc]=xu,xu}getMeshFrameDelta(at){return 2*Math.PI*st.bt/Math.pow(2,Math.max(at,0))/5}getMinTileElevationForLngLatZoom(at,st){var ot;const{tileID:ut}=this._getOverscaledTileIDFromLngLatZoom(at,st);return null!==(ot=this.getMinMaxElevation(ut).minElevation)&&void 0!==ot?ot:0}getMinMaxElevation(at){const st=this.getTerrainData(at).tile,ot={minElevation:null,maxElevation:null};return st&&st.dem&&(ot.minElevation=st.dem.min*this.exaggeration,ot.maxElevation=st.dem.max*this.exaggeration),ot}_getOverscaledTileIDFromLngLatZoom(at,ot){const ut=st.a0.fromLngLat(at.wrap()),Hl=(1<<ot)*st.$,rc=ut.x*Hl,sc=ut.y*Hl,oc=Math.floor(rc/st.$),_c=Math.floor(sc/st.$);return{tileID:new st.Z(ot,0,ot,oc,_c),mercatorX:rc,mercatorY:sc}}}class Oa{constructor(at,st,ot){this._context=at,this._size=st,this._tileSize=ot,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const at of this._objects)at.texture.destroy(),at.fbo.destroy()}_createObject(at){const ot=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),ut=new st.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return ut.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),ot.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),ot.colorAttachment.set(ut.texture),{id:at,fbo:ot,texture:ut,stamp:-1,inUse:!1}}getObjectForId(at){return this._objects[at]}useObject(at){at.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((st=>at.id!==st)),this._recentlyUsed.push(at.id)}stampObject(at){at.stamp=++this._stamp}getOrCreateFreeObject(){for(const st of this._recentlyUsed)if(!this._objects[st].inUse)return this._objects[st];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const at=this._createObject(this._objects.length);return this._objects.push(at),at}freeObject(at){at.inUse=!1}freeAllObjects(){for(const at of this._objects)this.freeObject(at)}isFull(){return!(this._objects.length<this._size)&&!1===this._objects.some((at=>!at.inUse))}}const qd={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Na{constructor(at,st){this.painter=at,this.terrain=st,this.pool=new Oa(at.context,30,st.sourceCache.tileSize*st.qualityFactor)}destruct(){this.pool.destruct()}getTexture(at){return this.pool.getObjectForId(at.rtt[this._stacks.length-1].id).texture}prepareForRender(at,st){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=at._order.filter((ot=>!at._layers[ot].isHidden(st))),this._coordsAscending={};for(const ot in at.sourceCaches){this._coordsAscending[ot]={};const st=at.sourceCaches[ot].getVisibleCoordinates(),ut=at.sourceCaches[ot].getSource(),Hl=ut instanceof X?ut.terrainTileRanges:null;for(const at of st){const st=this.terrain.sourceCache.getTerrainCoords(at,Hl);for(const at in st)this._coordsAscending[ot][at]||(this._coordsAscending[ot][at]=[]),this._coordsAscending[ot][at].push(st[at])}}this._coordsAscendingStr={};for(const ot of at._order){const st=at._layers[ot],ut=st.source;if(qd[st.type]&&!this._coordsAscendingStr[ut]){this._coordsAscendingStr[ut]={};for(const at in this._coordsAscending[ut])this._coordsAscendingStr[ut][at]=this._coordsAscending[ut][at].map((at=>at.key)).sort().join()}}for(const ot of this._renderableTiles)for(const at in this._coordsAscendingStr){const st=this._coordsAscendingStr[at][ot.tileID.key];st&&st!==ot.rttCoords[at]&&(ot.rtt=[])}}renderLayer(at,ot){if(at.isHidden(this.painter.transform.zoom))return!1;const ut=Object.assign(Object.assign({},ot),{isRenderingToTexture:!0}),Hl=at.type,rc=this.painter,sc=this._renderableLayerIds[this._renderableLayerIds.length-1]===at.id;if(qd[Hl]&&(this._prevType&&qd[this._prevType]||this._stacks.push([]),this._prevType=Hl,this._stacks[this._stacks.length-1].push(at.id),!sc))return!0;if(qd[this._prevType]||qd[Hl]&&sc){this._prevType=Hl;const at=this._stacks.length-1,ot=this._stacks[at]||[];for(const Hl of this._renderableTiles){if(this.pool.isFull()&&(Cr(this.painter,this.terrain,this._rttTiles,ut),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(Hl),Hl.rtt[at]){const st=this.pool.getObjectForId(Hl.rtt[at].id);if(st.stamp===Hl.rtt[at].stamp){this.pool.useObject(st);continue}}const sc=this.pool.getOrCreateFreeObject();this.pool.useObject(sc),this.pool.stampObject(sc),Hl.rtt[at]={id:sc.id,stamp:sc.stamp},rc.context.bindFramebuffer.set(sc.fbo.framebuffer),rc.context.clear({color:st.be.transparent,stencil:0}),rc.currentStencilSource=void 0;for(let at=0;at<ot.length;at++){const st=rc.style._layers[ot[at]],oc=st.source?this._coordsAscending[st.source][Hl.tileID.key]:[Hl.tileID];rc.context.viewport.set([0,0,sc.fbo.width,sc.fbo.height]),rc._renderTileClippingMasks(st,oc,!0),rc.renderLayer(rc,rc.style.sourceCaches[st.source],st,oc,ut),st.source&&(Hl.rttCoords[st.source]=this._coordsAscendingStr[st.source][Hl.tileID.key])}}return Cr(this.painter,this.terrain,this._rttTiles,ut),this._rttTiles=[],this.pool.freeAllObjects(),qd[Hl]}return!1}}const Yd={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use \u2318 + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Qd=ot,Kd={hash:!1,interactive:!0,bearingSnap:7,attributionControl:Hd,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:st.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},Xd={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class $a{constructor(at,ot,ut=!1){this.mousedown=at=>{this.startMove(at,n.mousePos(this.element,at)),n.addEventListener(window,"mousemove",this.mousemove),n.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=at=>{this.move(at,n.mousePos(this.element,at))},this.mouseup=at=>{this._rotatePitchHanlder.dragEnd(at),this.offTemp()},this.touchstart=at=>{1!==at.targetTouches.length?this.reset():(this._startPos=this._lastPos=n.touchPos(this.element,at.targetTouches)[0],this.startMove(at,this._startPos),n.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),n.addEventListener(window,"touchend",this.touchend))},this.touchmove=at=>{1!==at.targetTouches.length?this.reset():(this._lastPos=n.touchPos(this.element,at.targetTouches)[0],this.move(at,this._lastPos))},this.touchend=at=>{0===at.targetTouches.length&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=ot;const Hl=new ia;this._rotatePitchHanlder=new Kr({clickTolerance:3,move:(at,Hl)=>{const rc=ot.getBoundingClientRect(),sc=new st.P((rc.bottom-rc.top)/2,(rc.right-rc.left)/2);return{bearingDelta:st.cm(new st.P(at.x,Hl.y),Hl,sc),pitchDelta:ut?-.5*(Hl.y-at.y):void 0}},moveStateManager:Hl,enable:!0,assignEvents:()=>{}}),this.map=at,n.addEventListener(ot,"mousedown",this.mousedown),n.addEventListener(ot,"touchstart",this.touchstart,{passive:!1}),n.addEventListener(ot,"touchcancel",this.reset)}startMove(at,st){this._rotatePitchHanlder.dragStart(at,st),n.disableDrag()}move(at,st){const ot=this.map,{bearingDelta:ut,pitchDelta:Hl}=this._rotatePitchHanlder.dragMove(at,st)||{};ut&&ot.setBearing(ot.getBearing()+ut),Hl&&ot.setPitch(ot.getPitch()+Hl)}off(){const at=this.element;n.removeEventListener(at,"mousedown",this.mousedown),n.removeEventListener(at,"touchstart",this.touchstart,{passive:!1}),n.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),n.removeEventListener(window,"touchend",this.touchend),n.removeEventListener(at,"touchcancel",this.reset),this.offTemp()}offTemp(){n.enableDrag(),n.removeEventListener(window,"mousemove",this.mousemove),n.removeEventListener(window,"mouseup",this.mouseup),n.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),n.removeEventListener(window,"touchend",this.touchend)}}let Jd;function Wa(at,ot,ut,Hl=!1){if(Hl||!ut.getCoveringTilesDetailsProvider().allowWorldCopies())return null==at?void 0:at.wrap();const rc=new st.S(at.lng,at.lat);if(at=new st.S(at.lng,at.lat),ot){const Hl=new st.S(at.lng-360,at.lat),rc=new st.S(at.lng+360,at.lat),sc=ut.locationToScreenPoint(at).distSqr(ot);ut.locationToScreenPoint(Hl).distSqr(ot)<sc?at=Hl:ut.locationToScreenPoint(rc).distSqr(ot)<sc&&(at=rc)}for(;Math.abs(at.lng-ut.center.lng)>180;){const st=ut.locationToScreenPoint(at);if(st.x>=0&&st.y>=0&&st.x<=ut.width&&st.y<=ut.height)break;at.lng>ut.center.lng?at.lng-=360:at.lng+=360}return at.lng!==rc.lng&&ut.isPointOnMapSurface(ut.locationToScreenPoint(at))?at:rc}const $d={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Xa(at,st,ot){const ut=at.classList;for(const Hl in $d)ut.remove(`maplibregl-${ot}-anchor-${Hl}`);ut.add(`maplibregl-${ot}-anchor-${st}`)}class Ka extends st.E{constructor(at){if(super(),this._onKeyPress=at=>{const st=at.code,ot=at.charCode||at.keyCode;"Space"!==st&&"Enter"!==st&&32!==ot&&13!==ot||this.togglePopup()},this._onMapClick=at=>{const st=at.originalEvent.target,ot=this._element;this._popup&&(st===ot||ot.contains(st))&&this.togglePopup()},this._update=at=>{if(!this._map)return;const st=this._map.loaded()&&!this._map.isMoving();("terrain"===(null==at?void 0:at.type)||"render"===(null==at?void 0:at.type)&&!st)&&this._map.once("render",this._update),this._lngLat=Wa(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let ot="";"viewport"===this._rotationAlignment||"auto"===this._rotationAlignment?ot=`rotateZ(${this._rotation}deg)`:"map"===this._rotationAlignment&&(ot=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let ut="";"viewport"===this._pitchAlignment||"auto"===this._pitchAlignment?ut="rotateX(0deg)":"map"===this._pitchAlignment&&(ut=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||at&&"moveend"!==at.type||(this._pos=this._pos.round()),n.setTransform(this._element,`${$d[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${ut} ${ot}`),rc.frameAsync(new AbortController).then((()=>{this._updateOpacity(at&&"moveend"===at.type)})).catch((()=>{}))},this._onMove=at=>{if(!this._isDragging){const st=this._clickTolerance||this._map._clickTolerance;this._isDragging=at.point.dist(this._pointerdownPos)>=st}this._isDragging&&(this._pos=at.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none","pending"===this._state&&(this._state="active",this.fire(new st.l("dragstart"))),this.fire(new st.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),"active"===this._state&&this.fire(new st.l("dragend")),this._state="inactive"},this._addDragHandler=at=>{this._element.contains(at.originalEvent.target)&&(at.preventDefault(),this._positionDelta=at.point.sub(this._pos).add(this._offset),this._pointerdownPos=at.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=at&&at.anchor||"center",this._color=at&&at.color||"#3FB1CE",this._scale=at&&at.scale||1,this._draggable=at&&at.draggable||!1,this._clickTolerance=at&&at.clickTolerance||0,this._subpixelPositioning=at&&at.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=at&&at.rotation||0,this._rotationAlignment=at&&at.rotationAlignment||"auto",this._pitchAlignment=at&&at.pitchAlignment&&"auto"!==at.pitchAlignment?at.pitchAlignment:this._rotationAlignment,this.setOpacity(null==at?void 0:at.opacity,null==at?void 0:at.opacityWhenCovered),at&&at.element)this._element=at.element,this._offset=st.P.convert(at&&at.offset||[0,0]);else{this._defaultMarker=!0,this._element=n.create("div");const ot=n.createNS("http://www.w3.org/2000/svg","svg"),ut=41,Hl=27;ot.setAttributeNS(null,"display","block"),ot.setAttributeNS(null,"height",`${ut}px`),ot.setAttributeNS(null,"width",`${Hl}px`),ot.setAttributeNS(null,"viewBox",`0 0 ${Hl} ${ut}`);const rc=n.createNS("http://www.w3.org/2000/svg","g");rc.setAttributeNS(null,"stroke","none"),rc.setAttributeNS(null,"stroke-width","1"),rc.setAttributeNS(null,"fill","none"),rc.setAttributeNS(null,"fill-rule","evenodd");const sc=n.createNS("http://www.w3.org/2000/svg","g");sc.setAttributeNS(null,"fill-rule","nonzero");const oc=n.createNS("http://www.w3.org/2000/svg","g");oc.setAttributeNS(null,"transform","translate(3.0, 29.0)"),oc.setAttributeNS(null,"fill","#000000");const _c=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const at of _c){const st=n.createNS("http://www.w3.org/2000/svg","ellipse");st.setAttributeNS(null,"opacity","0.04"),st.setAttributeNS(null,"cx","10.5"),st.setAttributeNS(null,"cy","5.80029008"),st.setAttributeNS(null,"rx",at.rx),st.setAttributeNS(null,"ry",at.ry),oc.appendChild(st)}const wc=n.createNS("http://www.w3.org/2000/svg","g");wc.setAttributeNS(null,"fill",this._color);const Sc=n.createNS("http://www.w3.org/2000/svg","path");Sc.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),wc.appendChild(Sc);const iu=n.createNS("http://www.w3.org/2000/svg","g");iu.setAttributeNS(null,"opacity","0.25"),iu.setAttributeNS(null,"fill","#000000");const su=n.createNS("http://www.w3.org/2000/svg","path");su.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),iu.appendChild(su);const lu=n.createNS("http://www.w3.org/2000/svg","g");lu.setAttributeNS(null,"transform","translate(6.0, 7.0)"),lu.setAttributeNS(null,"fill","#FFFFFF");const cu=n.createNS("http://www.w3.org/2000/svg","g");cu.setAttributeNS(null,"transform","translate(8.0, 8.0)");const uu=n.createNS("http://www.w3.org/2000/svg","circle");uu.setAttributeNS(null,"fill","#000000"),uu.setAttributeNS(null,"opacity","0.25"),uu.setAttributeNS(null,"cx","5.5"),uu.setAttributeNS(null,"cy","5.5"),uu.setAttributeNS(null,"r","5.4999962");const pu=n.createNS("http://www.w3.org/2000/svg","circle");pu.setAttributeNS(null,"fill","#FFFFFF"),pu.setAttributeNS(null,"cx","5.5"),pu.setAttributeNS(null,"cy","5.5"),pu.setAttributeNS(null,"r","5.4999962"),cu.appendChild(uu),cu.appendChild(pu),sc.appendChild(oc),sc.appendChild(wc),sc.appendChild(iu),sc.appendChild(lu),sc.appendChild(cu),ot.appendChild(sc),ot.setAttributeNS(null,"height",ut*this._scale+"px"),ot.setAttributeNS(null,"width",Hl*this._scale+"px"),this._element.appendChild(ot),this._offset=st.P.convert(at&&at.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(at=>{at.preventDefault()})),this._element.addEventListener("mousedown",(at=>{at.preventDefault()})),Xa(this._element,this._anchor,"marker"),at&&at.className)for(const st of at.className.split(" "))this._element.classList.add(st);this._popup=null}addTo(at){return this.remove(),this._map=at,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",at._getUIString("Marker.Title")),at.getCanvasContainer().appendChild(this._element),at.on("move",this._update),at.on("moveend",this._update),at.on("terrain",this._update),at.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(at){return this._lngLat=st.S.convert(at),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(at){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),at){if(!("offset"in at.options)){const st=38.1,ot=13.5,ut=Math.abs(ot)/Math.SQRT2;at.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[ut,-1*(st-ot+ut)],"bottom-right":[-ut,-1*(st-ot+ut)],left:[ot,-1*(st-ot)],right:[-13.5,-1*(st-ot)]}:this._offset}this._popup=at,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(at){return this._subpixelPositioning=at,this}getPopup(){return this._popup}togglePopup(){const at=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:at?(at.isOpen()?at.remove():(at.setLngLat(this._lngLat),at.addTo(this._map)),this):this}_updateOpacity(at=!1){var ot,ut;const Hl=null===(ot=this._map)||void 0===ot?void 0:ot.terrain,rc=this._map.transform.isLocationOccluded(this._lngLat);if(!Hl||rc){const at=rc?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==at&&(this._element.style.opacity=at))}if(at)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const sc=this._map,oc=sc.terrain.depthAtPoint(this._pos),_c=sc.terrain.getElevationForLngLatZoom(this._lngLat,sc.transform.tileZoom);if(sc.transform.lngLatToCameraDepth(this._lngLat,_c)-oc<.006)return void(this._element.style.opacity=this._opacity);const wc=-this._offset.y/sc.transform.pixelsPerMeter,Sc=Math.sin(sc.getPitch()*Math.PI/180)*wc,iu=sc.terrain.depthAtPoint(new st.P(this._pos.x,this._pos.y-this._offset.y)),su=sc.transform.lngLatToCameraDepth(this._lngLat,_c+Sc)-iu>.006;(null===(ut=this._popup)||void 0===ut?void 0:ut.isOpen())&&su&&this._popup.remove(),this._element.style.opacity=su?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(at){return this._offset=st.P.convert(at),this._update(),this}addClassName(at){this._element.classList.add(at)}removeClassName(at){this._element.classList.remove(at)}toggleClassName(at){return this._element.classList.toggle(at)}setDraggable(at){return this._draggable=!!at,this._map&&(at?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(at){return this._rotation=at||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(at){return this._rotationAlignment=at||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(at){return this._pitchAlignment=at&&"auto"!==at?at:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(at,st){return(void 0===this._opacity||void 0===at&&void 0===st)&&(this._opacity="1",this._opacityWhenCovered="0.2"),void 0!==at&&(this._opacity=at),void 0!==st&&(this._opacityWhenCovered=st),this._map&&this._updateOpacity(!0),this}}const Ap={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Ep=0,Dp=!1;const Lp={maxWidth:100,unit:"metric"};function ts(at,st,ot){const ut=ot&&ot.maxWidth||100,Hl=at._container.clientHeight/2,rc=at._container.clientWidth/2,sc=at.unproject([rc-ut/2,Hl]),oc=at.unproject([rc+ut/2,Hl]),_c=Math.round(at.project(oc).x-at.project(sc).x),wc=Math.min(ut,_c,at._container.clientWidth),Sc=sc.distanceTo(oc);if(ot&&"imperial"===ot.unit){const ot=3.2808*Sc;ot>5280?is(st,wc,ot/5280,at._getUIString("ScaleControl.Miles")):is(st,wc,ot,at._getUIString("ScaleControl.Feet"))}else ot&&"nautical"===ot.unit?is(st,wc,Sc/1852,at._getUIString("ScaleControl.NauticalMiles")):Sc>=1e3?is(st,wc,Sc/1e3,at._getUIString("ScaleControl.Kilometers")):is(st,wc,Sc,at._getUIString("ScaleControl.Meters"))}function is(at,st,ot,ut){const Hl=function(at){const st=Math.pow(10,`${Math.floor(at)}`.length-1);let ot=at/st;return ot=ot>=10?10:ot>=5?5:ot>=3?3:ot>=2?2:ot>=1?1:function(at){const st=Math.pow(10,Math.ceil(-Math.log(at)/Math.LN10));return Math.round(at*st)/st}(ot),st*ot}(ot);at.style.width=st*(Hl/ot)+"px",at.innerHTML=`${Hl}&nbsp;${ut}`}const Np={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},Rp=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function as(at){if(at){if("number"==typeof at){const ot=Math.round(Math.abs(at)/Math.SQRT2);return{center:new st.P(0,0),top:new st.P(0,at),"top-left":new st.P(ot,ot),"top-right":new st.P(-ot,ot),bottom:new st.P(0,-at),"bottom-left":new st.P(ot,-ot),"bottom-right":new st.P(-ot,-ot),left:new st.P(at,0),right:new st.P(-at,0)}}if(at instanceof st.P||Array.isArray(at)){const ot=st.P.convert(at);return{center:ot,top:ot,"top-left":ot,"top-right":ot,bottom:ot,"bottom-left":ot,"bottom-right":ot,left:ot,right:ot}}return{center:st.P.convert(at.center||[0,0]),top:st.P.convert(at.top||[0,0]),"top-left":st.P.convert(at["top-left"]||[0,0]),"top-right":st.P.convert(at["top-right"]||[0,0]),bottom:st.P.convert(at.bottom||[0,0]),"bottom-left":st.P.convert(at["bottom-left"]||[0,0]),"bottom-right":st.P.convert(at["bottom-right"]||[0,0]),left:st.P.convert(at.left||[0,0]),right:st.P.convert(at.right||[0,0])}}return as(new st.P(0,0))}const Op=ot;at.AJAXError=st.cy,at.Event=st.l,at.Evented=st.E,at.LngLat=st.S,at.MercatorCoordinate=st.a0,at.Point=st.P,at.addProtocol=st.cz,at.config=st.a,at.removeProtocol=st.cA,at.AttributionControl=Da,at.BoxZoomHandler=$r,at.CanvasSource=Y,at.CooperativeGesturesHandler=Ca,at.DoubleClickZoomHandler=ba,at.DragPanHandler=wa,at.DragRotateHandler=Ta,at.EdgeInsets=Mt,at.FullscreenControl=class extends st.E{constructor(at={}){super(),this._onFullscreenChange=()=>{var at;let st=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;null===(at=null==st?void 0:st.shadowRoot)||void 0===at?void 0:at.fullscreenElement;)st=st.shadowRoot.fullscreenElement;st===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,at&&at.container&&(at.container instanceof HTMLElement?this._container=at.container:st.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(at){return this._map=at,this._container||(this._container=this._map.getContainer()),this._controlContainer=n.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){n.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const at=this._fullscreenButton=n.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);n.create("span","maplibregl-ctrl-icon",at).setAttribute("aria-hidden","true"),at.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const at=this._getTitle();this._fullscreenButton.setAttribute("aria-label",at),this._fullscreenButton.title=at}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new st.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new st.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},at.GeoJSONSource=H,at.GeolocateControl=class extends st.E{constructor(at){super(),this._onSuccess=at=>{if(this._map){if(this._isOutOfMapMaxBounds(at))return this._setErrorState(),this.fire(new st.l("outofmaxbounds",at)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=at,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(at),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(at),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new st.l("geolocate",at)),this._finish()}},this._updateCamera=at=>{const ot=new st.S(at.coords.longitude,at.coords.latitude),ut=at.coords.accuracy,Hl=this._map.getBearing(),rc=st.e({bearing:Hl},this.options.fitBoundsOptions),sc=G.fromLngLat(ot,ut);this._map.fitBounds(sc,rc,{geolocateSource:!0})},this._updateMarker=at=>{if(at){const ot=new st.S(at.coords.longitude,at.coords.latitude);this._accuracyCircleMarker.setLngLat(ot).addTo(this._map),this._userLocationDotMarker.setLngLat(ot).addTo(this._map),this._accuracy=at.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=at=>{if(this._map){if(1===at.code){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const at=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=at,this._geolocateButton.setAttribute("aria-label",at),void 0!==this._geolocationWatchID&&this._clearWatch()}else{if(3===at.code&&Dp)return;this.options.trackUserLocation&&this._setErrorState()}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new st.l("error",at)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(at=>at.preventDefault())),this._geolocateButton=n.create("button","maplibregl-ctrl-geolocate",this._container),n.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=at=>{if(this._map){if(!1===at){st.w("Geolocation support is not available so the GeolocateControl will be disabled.");const at=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=at,this._geolocateButton.setAttribute("aria-label",at)}else{const at=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=at,this._geolocateButton.setAttribute("aria-label",at)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=n.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Ka({element:this._dotElement}),this._circleElement=n.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Ka({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(at=>{at.geolocateSource||"ACTIVE_LOCK"!==this._watchState||at.originalEvent&&"resize"===at.originalEvent.type||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new st.l("trackuserlocationend")),this.fire(new st.l("userlocationlostfocus")))}))}},this.options=st.e({},Ap,at)}onAdd(at){return this._map=at,this._container=n.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return st._(this,arguments,void 0,(function*(at=!1){if(void 0!==Jd&&!at)return Jd;if(void 0===window.navigator.permissions)return Jd=!!window.navigator.geolocation,Jd;try{const at=yield window.navigator.permissions.query({name:"geolocation"});Jd="denied"!==at.state}catch(at){Jd=!!window.navigator.geolocation}return Jd}))}().then((at=>this._finishSetupUI(at))),this._container}onRemove(){void 0!==this._geolocationWatchID&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),n.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Ep=0,Dp=!1}_isOutOfMapMaxBounds(at){const st=this._map.getMaxBounds(),ot=at.coords;return st&&(ot.longitude<st.getWest()||ot.longitude>st.getEast()||ot.latitude<st.getSouth()||ot.latitude>st.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const at=this._map.getBounds(),st=at.getSouthEast(),ot=at.getNorthEast(),ut=st.distanceTo(ot),Hl=Math.ceil(this._accuracy/(ut/this._map._container.clientHeight)*2);this._circleElement.style.width=`${Hl}px`,this._circleElement.style.height=`${Hl}px`}trigger(){if(!this._setup)return st.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new st.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Ep--,Dp=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new st.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new st.l("trackuserlocationstart")),this.fire(new st.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if("OFF"===this._watchState&&void 0!==this._geolocationWatchID)this._clearWatch();else if(void 0===this._geolocationWatchID){let at;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Ep++,Ep>1?(at={maximumAge:6e5,timeout:0},Dp=!0):(at=this.options.positionOptions,Dp=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,at)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},at.GlobeControl=class{constructor(){this._toggleProjection=()=>{var at;const st=null===(at=this._map.getProjection())||void 0===at?void 0:at.type;this._map.setProjection("mercator"!==st&&st?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var at;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),"globe"===(null===(at=this._map.getProjection())||void 0===at?void 0:at.type)?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(at){return this._map=at,this._container=n.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=n.create("button","maplibregl-ctrl-globe",this._container),n.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){n.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},at.Hash=Er,at.ImageSource=X,at.KeyboardHandler=pa,at.LngLatBounds=G,at.LogoControl=Aa,at.Map=class extends Ra{constructor(at){var ot,ut;st.cv.mark(st.cw.create);const Hl=Object.assign(Object.assign(Object.assign({},Kd),at),{canvasContextAttributes:Object.assign(Object.assign({},Kd.canvasContextAttributes),at.canvasContextAttributes)});if(null!=Hl.minZoom&&null!=Hl.maxZoom&&Hl.minZoom>Hl.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(null!=Hl.minPitch&&null!=Hl.maxPitch&&Hl.minPitch>Hl.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(null!=Hl.minPitch&&Hl.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(null!=Hl.maxPitch&&Hl.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const rc=new Lt,sc=new Ot;if(void 0!==Hl.minZoom&&rc.setMinZoom(Hl.minZoom),void 0!==Hl.maxZoom&&rc.setMaxZoom(Hl.maxZoom),void 0!==Hl.minPitch&&rc.setMinPitch(Hl.minPitch),void 0!==Hl.maxPitch&&rc.setMaxPitch(Hl.maxPitch),void 0!==Hl.renderWorldCopies&&rc.setRenderWorldCopies(Hl.renderWorldCopies),super(rc,sc,{bearingSnap:Hl.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new La,this._controls=[],this._mapId=st.a6(),this._contextLost=at=>{at.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new st.l("webglcontextlost",{originalEvent:at}))},this._contextRestored=at=>{this._setupPainter(),this.resize(),this._update(),this.fire(new st.l("webglcontextrestored",{originalEvent:at}))},this._onMapScroll=at=>{if(at.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=Hl.interactive,this._maxTileCacheSize=Hl.maxTileCacheSize,this._maxTileCacheZoomLevels=Hl.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},Hl.canvasContextAttributes),this._trackResize=!0===Hl.trackResize,this._bearingSnap=Hl.bearingSnap,this._centerClampedToGround=Hl.centerClampedToGround,this._refreshExpiredTiles=!0===Hl.refreshExpiredTiles,this._fadeDuration=Hl.fadeDuration,this._crossSourceCollisions=!0===Hl.crossSourceCollisions,this._collectResourceTiming=!0===Hl.collectResourceTiming,this._locale=Object.assign(Object.assign({},Yd),Hl.locale),this._clickTolerance=Hl.clickTolerance,this._overridePixelRatio=Hl.pixelRatio,this._maxCanvasSize=Hl.maxCanvasSize,this.transformCameraUpdate=Hl.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=!0===Hl.cancelPendingTileRequestsWhileZooming,this._imageQueueHandle=iu.addThrottleControl((()=>this.isMoving())),this._requestManager=new m(Hl.transformRequest),"string"==typeof Hl.container){if(this._container=document.getElementById(Hl.container),!this._container)throw new Error(`Container '${Hl.container}' not found.`)}else{if(!(Hl.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=Hl.container}if(Hl.maxBounds&&this.setMaxBounds(Hl.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),"undefined"!=typeof window){addEventListener("online",this._onWindowOnline,!1);let at=!1;const st=Sr((at=>{this._trackResize&&!this._removed&&(this.resize(at),this.redraw())}),50);this._resizeObserver=new ResizeObserver((ot=>{at?st(ot):at=!0})),this._resizeObserver.observe(this._container)}this.handlers=new Ea(this,Hl),this._hash=Hl.hash&&new Er("string"==typeof Hl.hash&&Hl.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:Hl.center,elevation:Hl.elevation,zoom:Hl.zoom,bearing:Hl.bearing,pitch:Hl.pitch,roll:Hl.roll}),Hl.bounds&&(this.resize(),this.fitBounds(Hl.bounds,st.e({},Hl.fitBoundsOptions,{duration:0}))));const oc="string"==typeof Hl.style||!("globe"===(null===(ut=null===(ot=Hl.style)||void 0===ot?void 0:ot.projection)||void 0===ut?void 0:ut.type));this.resize(null,oc),this._localIdeographFontFamily=Hl.localIdeographFontFamily,this._validateStyle=Hl.validateStyle,Hl.style&&this.setStyle(Hl.style,{localIdeographFontFamily:Hl.localIdeographFontFamily}),Hl.attributionControl&&this.addControl(new Da("boolean"==typeof Hl.attributionControl?void 0:Hl.attributionControl)),Hl.maplibreLogo&&this.addControl(new Aa,Hl.logoPosition),this.on("style.load",(()=>{if(oc||this._resizeTransform(),this.transform.unmodified){const at=st.Q(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(at)}})),this.on("data",(at=>{this._update("style"===at.dataType),this.fire(new st.l(`${at.dataType}data`,at))})),this.on("dataloading",(at=>{this.fire(new st.l(`${at.dataType}dataloading`,at))})),this.on("dataabort",(at=>{this.fire(new st.l("sourcedataabort",at))}))}_getMapId(){return this._mapId}setGlobalStateProperty(at,st){return this.style.setGlobalStateProperty(at,st),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(at,ot){if(void 0===ot&&(ot=at.getDefaultPosition?at.getDefaultPosition():"top-right"),!at||!at.onAdd)return this.fire(new st.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const ut=at.onAdd(this);this._controls.push(at);const Hl=this._controlPositions[ot];return-1!==ot.indexOf("bottom")?Hl.insertBefore(ut,Hl.firstChild):Hl.appendChild(ut),this}removeControl(at){if(!at||!at.onRemove)return this.fire(new st.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const ot=this._controls.indexOf(at);return ot>-1&&this._controls.splice(ot,1),at.onRemove(this),this}hasControl(at){return this._controls.indexOf(at)>-1}calculateCameraOptionsFromTo(at,st,ot,ut){return null==ut&&this.terrain&&(ut=this.terrain.getElevationForLngLatZoom(ot,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(at,st,ot,ut)}resize(at,ot=!0){const[ut,Hl]=this._containerDimensions(),rc=this._getClampedPixelRatio(ut,Hl);if(this._resizeCanvas(ut,Hl,rc),this.painter.resize(ut,Hl,rc),this.painter.overLimit()){const at=this.painter.context.gl;this._maxCanvasSize=[at.drawingBufferWidth,at.drawingBufferHeight];const st=this._getClampedPixelRatio(ut,Hl);this._resizeCanvas(ut,Hl,st),this.painter.resize(ut,Hl,st)}this._resizeTransform(ot);const sc=!this._moving;return sc&&(this.stop(),this.fire(new st.l("movestart",at)).fire(new st.l("move",at))),this.fire(new st.l("resize",at)),sc&&this.fire(new st.l("moveend",at)),this}_resizeTransform(at=!0){var st;const[ot,ut]=this._containerDimensions();this.transform.resize(ot,ut,at),null===(st=this._requestedCameraState)||void 0===st||st.resize(ot,ut,at)}_getClampedPixelRatio(at,st){const{0:ot,1:ut}=this._maxCanvasSize,Hl=this.getPixelRatio(),rc=at*Hl,sc=st*Hl;return Math.min(rc>ot?ot/rc:1,sc>ut?ut/sc:1)*Hl}getPixelRatio(){var at;return null!==(at=this._overridePixelRatio)&&void 0!==at?at:devicePixelRatio}setPixelRatio(at){this._overridePixelRatio=at,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(at){return this.transform.setMaxBounds(G.convert(at)),this._update()}setMinZoom(at){if((at=null==at?-2:at)>=-2&&at<=this.transform.maxZoom)return this.transform.setMinZoom(at),this._update(),this.getZoom()<at&&this.setZoom(at),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(at){if((at=null==at?22:at)>=this.transform.minZoom)return this.transform.setMaxZoom(at),this._update(),this.getZoom()>at&&this.setZoom(at),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(at){if((at=null==at?0:at)<0)throw new Error("minPitch must be greater than or equal to 0");if(at>=0&&at<=this.transform.maxPitch)return this.transform.setMinPitch(at),this._update(),this.getPitch()<at&&this.setPitch(at),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(at){if((at=null==at?60:at)>180)throw new Error("maxPitch must be less than or equal to 180");if(at>=this.transform.minPitch)return this.transform.setMaxPitch(at),this._update(),this.getPitch()>at&&this.setPitch(at),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(at){return this.transform.setRenderWorldCopies(at),this._update()}project(at){return this.transform.locationToScreenPoint(st.S.convert(at),this.style&&this.terrain)}unproject(at){return this.transform.screenPointToLocation(st.P.convert(at),this.terrain)}isMoving(){var at;return this._moving||(null===(at=this.handlers)||void 0===at?void 0:at.isMoving())}isZooming(){var at;return this._zooming||(null===(at=this.handlers)||void 0===at?void 0:at.isZooming())}isRotating(){var at;return this._rotating||(null===(at=this.handlers)||void 0===at?void 0:at.isRotating())}_createDelegatedListener(at,st,ot){if("mouseenter"===at||"mouseover"===at){let ut=!1;const r=Hl=>{const rc=st.filter((at=>this.getLayer(at))),sc=0!==rc.length?this.queryRenderedFeatures(Hl.point,{layers:rc}):[];sc.length?ut||(ut=!0,ot.call(this,new jr(at,this,Hl.originalEvent,{features:sc}))):ut=!1};return{layers:st,listener:ot,delegates:{mousemove:r,mouseout:()=>{ut=!1}}}}if("mouseleave"===at||"mouseout"===at){let ut=!1;const r=Hl=>{const rc=st.filter((at=>this.getLayer(at)));(0!==rc.length?this.queryRenderedFeatures(Hl.point,{layers:rc}):[]).length?ut=!0:ut&&(ut=!1,ot.call(this,new jr(at,this,Hl.originalEvent)))},a=st=>{ut&&(ut=!1,ot.call(this,new jr(at,this,st.originalEvent)))};return{layers:st,listener:ot,delegates:{mousemove:r,mouseout:a}}}{const o=at=>{const ut=st.filter((at=>this.getLayer(at))),Hl=0!==ut.length?this.queryRenderedFeatures(at.point,{layers:ut}):[];Hl.length&&(at.features=Hl,ot.call(this,at),delete at.features)};return{layers:st,listener:ot,delegates:{[at]:o}}}}_saveDelegatedListener(at,st){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[at]=this._delegatedListeners[at]||[],this._delegatedListeners[at].push(st)}_removeDelegatedListener(at,st,ot){if(!this._delegatedListeners||!this._delegatedListeners[at])return;const ut=this._delegatedListeners[at];for(let Hl=0;Hl<ut.length;Hl++){const at=ut[Hl];if(at.listener===ot&&at.layers.length===st.length&&at.layers.every((at=>st.includes(at)))){for(const st in at.delegates)this.off(st,at.delegates[st]);return void ut.splice(Hl,1)}}}on(at,st,ot){if(void 0===ot)return super.on(at,st);const ut="string"==typeof st?[st]:st,Hl=this._createDelegatedListener(at,ut,ot);this._saveDelegatedListener(at,Hl);for(const rc in Hl.delegates)this.on(rc,Hl.delegates[rc]);return{unsubscribe:()=>{this._removeDelegatedListener(at,ut,ot)}}}once(at,st,ot){if(void 0===ot)return super.once(at,st);const ut="string"==typeof st?[st]:st,Hl=this._createDelegatedListener(at,ut,ot);for(const rc in Hl.delegates){const st=Hl.delegates[rc];Hl.delegates[rc]=(...Hl)=>{this._removeDelegatedListener(at,ut,ot),st(...Hl)}}this._saveDelegatedListener(at,Hl);for(const rc in Hl.delegates)this.once(rc,Hl.delegates[rc]);return this}off(at,st,ot){return void 0===ot?super.off(at,st):(this._removeDelegatedListener(at,"string"==typeof st?[st]:st,ot),this)}queryRenderedFeatures(at,ot){if(!this.style)return[];let ut;const Hl=at instanceof st.P||Array.isArray(at),rc=Hl?at:[[0,0],[this.transform.width,this.transform.height]];if(ot=ot||(Hl?{}:at)||{},rc instanceof st.P||"number"==typeof rc[0])ut=[st.P.convert(rc)];else{const at=st.P.convert(rc[0]),ot=st.P.convert(rc[1]);ut=[at,new st.P(ot.x,at.y),ot,new st.P(at.x,ot.y),at]}return this.style.queryRenderedFeatures(ut,ot,this.transform)}querySourceFeatures(at,st){return this.style.querySourceFeatures(at,st)}setStyle(at,ot){return!1!==(ot=st.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},ot)).diff&&ot.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&at?(this._diffStyle(at,ot),this):(this._localIdeographFontFamily=ot.localIdeographFontFamily,this._updateStyle(at,ot))}setTransformRequest(at){return this._requestManager.setTransformRequest(at),this}_getUIString(at){const st=this._locale[at];if(null==st)throw new Error(`Missing UI string '${at}'`);return st}_updateStyle(at,st){var ot,ut;if(st.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(at,st)));const Hl=this.style&&st.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!at)),at?(this.style=new wi(this,st||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof at?this.style.loadURL(at,st,Hl):this.style.loadJSON(at,st,Hl),this):(null===(ut=null===(ot=this.style)||void 0===ot?void 0:ot.projection)||void 0===ut||ut.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new wi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(at,ot){if("string"==typeof at){const ut=this._requestManager.transformRequest(at,"Style");st.j(ut,new AbortController).then((at=>{this._updateDiff(at.data,ot)})).catch((at=>{at&&this.fire(new st.k(at))}))}else"object"==typeof at&&this._updateDiff(at,ot)}_updateDiff(at,ot){try{this.style.setState(at,ot)&&this._update(!0)}catch(o){st.w(`Unable to perform style diff: ${o.message||o.error||o}.  Rebuilding the style from scratch.`),this._updateStyle(at,ot)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():st.w("There is no style added to the map.")}addSource(at,st){return this._lazyInitEmptyStyle(),this.style.addSource(at,st),this._update(!0)}isSourceLoaded(at){const ot=this.style&&this.style.sourceCaches[at];if(void 0!==ot)return ot.loaded();this.fire(new st.k(new Error(`There is no source with ID '${at}'`)))}setTerrain(at){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),at){const ot=this.style.sourceCaches[at.source];if(!ot)throw new Error(`cannot load terrain, because there exists no source with ID: ${at.source}`);null===this.terrain&&ot.reload();for(const ut in this.style._layers){const ot=this.style._layers[ut];"hillshade"===ot.type&&ot.source===at.source&&st.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),"color-relief"===ot.type&&ot.source===at.source&&st.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new Ba(this.painter,ot,at),this.painter.renderToTexture=new Na(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=st=>{var ot;"style"===st.dataType?this.terrain.sourceCache.freeRtt():"source"===st.dataType&&st.tile&&(st.sourceId!==at.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),"image"===(null===(ot=st.source)||void 0===ot?void 0:ot.type)?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(st.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new st.l("terrain",{terrain:at})),this}getTerrain(){var at,st;return null!==(st=null===(at=this.terrain)||void 0===at?void 0:at.options)&&void 0!==st?st:null}areTilesLoaded(){const at=this.style&&this.style.sourceCaches;for(const st in at){const ot=at[st]._tiles;for(const at in ot){const st=ot[at];if("loaded"!==st.state&&"errored"!==st.state)return!1}}return!0}removeSource(at){return this.style.removeSource(at),this._update(!0)}getSource(at){return this.style.getSource(at)}setSourceTileLodParams(at,st,ot){if(ot){const ut=this.getSource(ot);if(!ut)throw new Error(`There is no source with ID "${ot}", cannot set LOD parameters`);ut.calculateTileZoom=me(Math.max(1,at),Math.max(1,st))}else for(const ut in this.style.sourceCaches)this.style.sourceCaches[ut].getSource().calculateTileZoom=me(Math.max(1,at),Math.max(1,st));return this._update(!0),this}refreshTiles(at,ot){const ut=this.style.sourceCaches[at];if(!ut)throw new Error(`There is no source cache with ID "${at}", cannot refresh tile`);void 0===ot?ut.reload(!0):ut.refreshTiles(ot.map((at=>new st.a3(at.z,at.x,at.y))))}addImage(at,ot,ut={}){const{pixelRatio:Hl=1,sdf:sc=!1,stretchX:oc,stretchY:_c,content:wc,textFitWidth:Sc,textFitHeight:iu}=ut;if(this._lazyInitEmptyStyle(),!(ot instanceof HTMLImageElement||st.b(ot))){if(void 0===ot.width||void 0===ot.height)return this.fire(new st.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:ut,height:rc,data:su}=ot,lu=ot;return this.style.addImage(at,{data:new st.R({width:ut,height:rc},new Uint8Array(su)),pixelRatio:Hl,stretchX:oc,stretchY:_c,content:wc,textFitWidth:Sc,textFitHeight:iu,sdf:sc,version:0,userImage:lu}),lu.onAdd&&lu.onAdd(this,at),this}}{const{width:ut,height:su,data:lu}=rc.getImageData(ot);this.style.addImage(at,{data:new st.R({width:ut,height:su},lu),pixelRatio:Hl,stretchX:oc,stretchY:_c,content:wc,textFitWidth:Sc,textFitHeight:iu,sdf:sc,version:0})}}updateImage(at,ot){const ut=this.style.getImage(at);if(!ut)return this.fire(new st.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const Hl=ot instanceof HTMLImageElement||st.b(ot)?rc.getImageData(ot):ot,{width:sc,height:oc,data:_c}=Hl;if(void 0===sc||void 0===oc)return this.fire(new st.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(sc!==ut.data.width||oc!==ut.data.height)return this.fire(new st.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const wc=!(ot instanceof HTMLImageElement||st.b(ot));return ut.data.replace(_c,wc),this.style.updateImage(at,ut),this}getImage(at){return this.style.getImage(at)}hasImage(at){return at?!!this.style.getImage(at):(this.fire(new st.k(new Error("Missing required image id"))),!1)}removeImage(at){this.style.removeImage(at)}loadImage(at){return iu.getImage(this._requestManager.transformRequest(at,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(at,st){return this._lazyInitEmptyStyle(),this.style.addLayer(at,st),this._update(!0)}moveLayer(at,st){return this.style.moveLayer(at,st),this._update(!0)}removeLayer(at){return this.style.removeLayer(at),this._update(!0)}getLayer(at){return this.style.getLayer(at)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(at,st,ot){return this.style.setLayerZoomRange(at,st,ot),this._update(!0)}setFilter(at,st,ot={}){return this.style.setFilter(at,st,ot),this._update(!0)}getFilter(at){return this.style.getFilter(at)}setPaintProperty(at,st,ot,ut={}){return this.style.setPaintProperty(at,st,ot,ut),this._update(!0)}getPaintProperty(at,st){return this.style.getPaintProperty(at,st)}setLayoutProperty(at,st,ot,ut={}){return this.style.setLayoutProperty(at,st,ot,ut),this._update(!0)}getLayoutProperty(at,st){return this.style.getLayoutProperty(at,st)}setGlyphs(at,st={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(at,st),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(at,st,ot={}){return this._lazyInitEmptyStyle(),this.style.addSprite(at,st,ot,(at=>{at||this._update(!0)})),this}removeSprite(at){return this._lazyInitEmptyStyle(),this.style.removeSprite(at),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(at,st={}){return this._lazyInitEmptyStyle(),this.style.setSprite(at,st,(at=>{at||this._update(!0)})),this}setLight(at,st={}){return this._lazyInitEmptyStyle(),this.style.setLight(at,st),this._update(!0)}getLight(){return this.style.getLight()}setSky(at,st={}){return this._lazyInitEmptyStyle(),this.style.setSky(at,st),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(at,st){return this.style.setFeatureState(at,st),this._update()}removeFeatureState(at,st){return this.style.removeFeatureState(at,st),this._update()}getFeatureState(at){return this.style.getFeatureState(at)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let at=0,st=0;return this._container&&(at=this._container.clientWidth||400,st=this._container.clientHeight||300),[at,st]}_setupContainer(){const at=this._container;at.classList.add("maplibregl-map");const st=this._canvasContainer=n.create("div","maplibregl-canvas-container",at);this._interactive&&st.classList.add("maplibregl-interactive"),this._canvas=n.create("canvas","maplibregl-canvas",st),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const ot=this._containerDimensions(),ut=this._getClampedPixelRatio(ot[0],ot[1]);this._resizeCanvas(ot[0],ot[1],ut);const Hl=this._controlContainer=n.create("div","maplibregl-control-container",at),rc=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((at=>{rc[at]=n.create("div",`maplibregl-ctrl-${at} `,Hl)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(at,st,ot){this._canvas.width=Math.floor(ot*at),this._canvas.height=Math.floor(ot*st),this._canvas.style.width=`${at}px`,this._canvas.style.height=`${st}px`}_setupPainter(){const at=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let st=null;this._canvas.addEventListener("webglcontextcreationerror",(ot=>{st={requestedAttributes:at},ot&&(st.statusMessage=ot.statusMessage,st.type=ot.type)}),{once:!0});let ot=null;if(ot=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,at):this._canvas.getContext("webgl2",at)||this._canvas.getContext("webgl",at),!ot){const at="Failed to initialize WebGL";throw st?(st.message=at,new Error(JSON.stringify(st))):new Error(at)}this.painter=new Mr(ot,this.transform),sc.testSupport(ot)}migrateProjection(at,ot){super.migrateProjection(at,ot),this.painter.transform=at,this.fire(new st.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(at){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||at,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(at){return this._update(),this._renderTaskQueue.add(at)}_cancelRenderFrame(at){this._renderTaskQueue.remove(at)}_render(at){var ot,ut,Hl,sc,oc;const _c=this._idleTriggered?this._fadeDuration:0,wc=(null===(ot=this.style.projection)||void 0===ot?void 0:ot.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(at),this._removed)return;let Sc=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const at=this.transform.zoom,ot=rc.now();this.style.zoomHistory.update(at,ot);const ut=new st.F(at,{now:ot,fadeDuration:_c,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition(),globalState:this.style.getGlobalState()}),Hl=ut.crossFadingFactor();1===Hl&&Hl===this._crossFadingFactor||(Sc=!0,this._crossFadingFactor=Hl),this.style.update(ut)}const iu=(null===(ut=this.style.projection)||void 0===ut?void 0:ut.transitionState)>0!==wc;null===(Hl=this.style.projection)||void 0===Hl||Hl.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState(null===(sc=this.style.projection)||void 0===sc?void 0:sc.transitionState,null===(oc=this.style.projection)||void 0===oc?void 0:oc.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||iu)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,_c,this._crossSourceCollisions,iu),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:_c,showPadding:this.showPadding}),this.fire(new st.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,st.cv.mark(st.cw.load),this.fire(new st.l("load"))),this.style&&(this.style.hasTransitions()||Sc)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const su=this._sourcesDirty||this._styleDirty||this._placementDirty;return su||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new st.l("idle")),!this._loaded||this._fullyLoaded||su||(this._fullyLoaded=!0,st.cv.mark(st.cw.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var at;this._hash&&this._hash.remove();for(const st of this._controls)st.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),"undefined"!=typeof window&&removeEventListener("online",this._onWindowOnline,!1),iu.removeThrottleControl(this._imageQueueHandle),null===(at=this._resizeObserver)||void 0===at||at.disconnect();const ot=this.painter.context.gl.getExtension("WEBGL_lose_context");(null==ot?void 0:ot.loseContext)&&ot.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),n.remove(this._canvasContainer),n.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),st.cv.clearMetrics(),this._removed=!0,this.fire(new st.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,rc.frame(this._frameRequest,(at=>{st.cv.frame(at),this._frameRequest=null;try{this._render(at)}catch(at){if(!st.cx(at)&&!function(at){return at.message===Ed}(at))throw at}}),(()=>{})))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(at){this._showTileBoundaries!==at&&(this._showTileBoundaries=at,this._update())}get showPadding(){return!!this._showPadding}set showPadding(at){this._showPadding!==at&&(this._showPadding=at,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(at){this._showCollisionBoxes!==at&&(this._showCollisionBoxes=at,at?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(at){this._showOverdrawInspector!==at&&(this._showOverdrawInspector=at,this._update())}get repaint(){return!!this._repaint}set repaint(at){this._repaint!==at&&(this._repaint=at,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(at){this._vertices=at,this._update()}get version(){return Qd}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(at){return this._lazyInitEmptyStyle(),this.style.setProjection(at),this._update(!0)}},at.MapMouseEvent=jr,at.MapTouchEvent=Nr,at.MapWheelEvent=Zr,at.Marker=Ka,at.NavigationControl=class{constructor(at){this._updateZoomButtons=()=>{const at=this._map.getZoom(),st=at===this._map.getMaxZoom(),ot=at===this._map.getMinZoom();this._zoomInButton.disabled=st,this._zoomOutButton.disabled=ot,this._zoomInButton.setAttribute("aria-disabled",st.toString()),this._zoomOutButton.setAttribute("aria-disabled",ot.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(at,st)=>{const ot=this._map._getUIString(`NavigationControl.${st}`);at.title=ot,at.setAttribute("aria-label",ot)},this.options=st.e({},Xd,at),this._container=n.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(at=>at.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(at=>this._map.zoomIn({},{originalEvent:at}))),n.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(at=>this._map.zoomOut({},{originalEvent:at}))),n.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(at=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:at}):this._map.resetNorth({},{originalEvent:at})})),this._compassIcon=n.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(at){return this._map=at,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new $a(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){n.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(at,st){const ot=n.create("button",at,this._container);return ot.type="button",ot.addEventListener("click",st),ot}},at.Popup=class extends st.E{constructor(at){super(),this._updateOpacity=()=>{void 0!==this.options.locationOccludedOpacity&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&n.remove(this._content),this._container&&(n.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new st.l("close"))),this),this._onMouseUp=at=>{this._update(at.point)},this._onMouseMove=at=>{this._update(at.point)},this._onDrag=at=>{this._update(at.point)},this._update=at=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=n.create("div","maplibregl-popup",this._map.getContainer()),this._tip=n.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const at of this.options.className.split(" "))this._container.classList.add(at);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Wa(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!at)return;const st=this._flatPos=this._pos=this._trackPointer&&at?at:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&at?at:this._map.transform.locationToScreenPoint(this._lngLat));let ot=this.options.anchor;const ut=as(this.options.offset);if(!ot){const at=this._container.offsetWidth,Hl=this._container.offsetHeight;let rc;rc=st.y+ut.bottom.y<Hl?["top"]:st.y>this._map.transform.height-Hl?["bottom"]:[],st.x<at/2?rc.push("left"):st.x>this._map.transform.width-at/2&&rc.push("right"),ot=0===rc.length?"bottom":rc.join("-")}let Hl=st.add(ut[ot]);this.options.subpixelPositioning||(Hl=Hl.round()),n.setTransform(this._container,`${$d[ot]} translate(${Hl.x}px,${Hl.y}px)`),Xa(this._container,ot,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=st.e(Object.create(Np),at)}addTo(at){return this._map&&this.remove(),this._map=at,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new st.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(at){return this._lngLat=st.S.convert(at),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(at){return this.setDOMContent(document.createTextNode(at))}setHTML(at){const st=document.createDocumentFragment(),ot=document.createElement("body");let ut;for(ot.innerHTML=at;ut=ot.firstChild,ut;)st.appendChild(ut);return this.setDOMContent(st)}getMaxWidth(){var at;return null===(at=this._container)||void 0===at?void 0:at.style.maxWidth}setMaxWidth(at){return this.options.maxWidth=at,this._update(),this}setDOMContent(at){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=n.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(at),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(at){return this._container&&this._container.classList.add(at),this}removeClassName(at){return this._container&&this._container.classList.remove(at),this}setOffset(at){return this.options.offset=at,this._update(),this}toggleClassName(at){if(this._container)return this._container.classList.toggle(at)}setSubpixelPositioning(at){this.options.subpixelPositioning=at}_createCloseButton(){this.options.closeButton&&(this._closeButton=n.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const at=this._container.querySelector(Rp);at&&at.focus()}},at.RasterDEMTileSource=W,at.RasterTileSource=q,at.ScaleControl=class{constructor(at){this._onMove=()=>{ts(this._map,this._container,this.options)},this.setUnit=at=>{this.options.unit=at,ts(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},Lp),at)}getDefaultPosition(){return"bottom-left"}onAdd(at){return this._map=at,this._container=n.create("div","maplibregl-ctrl maplibregl-ctrl-scale",at.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){n.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},at.ScrollZoomHandler=va,at.Style=wi,at.TerrainControl=class{constructor(at){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=at}onAdd(at){return this._map=at,this._container=n.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=n.create("button","maplibregl-ctrl-terrain",this._container),n.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){n.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},at.TwoFingersTouchPitchHandler=da,at.TwoFingersTouchRotateHandler=ha,at.TwoFingersTouchZoomHandler=la,at.TwoFingersTouchZoomRotateHandler=Pa,at.VectorTileSource=$,at.VideoSource=K,at.addSourceType=(at,ot)=>st._(void 0,void 0,void 0,(function*(){if(J(at))throw new Error(`A source type called "${at}" already exists.`);((at,st)=>{Au[at]=st})(at,ot)})),at.clearPrewarmedResources=function(){const at=mu;at&&(at.isPreloaded()&&1===at.numActive()?(at.release(uu),mu=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},at.createTileMesh=Xt,at.getMaxParallelImageRequests=function(){return st.a.MAX_PARALLEL_IMAGE_REQUESTS},at.getRTLTextPluginStatus=function(){return oe().getRTLTextPluginStatus()},at.getVersion=function(){return Op},at.getWorkerCount=function(){return z.workerCount},at.getWorkerUrl=function(){return st.a.WORKER_URL},at.importScriptInWorkers=function(at){return B().broadcast("IS",at)},at.prewarm=function(){k().acquire(uu)},at.setMaxParallelImageRequests=function(at){st.a.MAX_PARALLEL_IMAGE_REQUESTS=at},at.setRTLTextPlugin=function(at,st){return oe().setRTLTextPlugin(at,st)},at.setWorkerCount=function(at){z.workerCount=at},at.setWorkerUrl=function(at){st.a.WORKER_URL=at}})),at}()},3710:(at,st,ot)=>{"use strict";
/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */
function _defineProperty(at,st,ot){return(st=function(at){var st=function(at,st){if("object"!=typeof at||!at)return at;var ot=at[Symbol.toPrimitive];if(void 0!==ot){var ut=ot.call(at,st||"default");if("object"!=typeof ut)return ut;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===st?String:Number)(at)}(at,"string");return"symbol"==typeof st?st:st+""}(st))in at?Object.defineProperty(at,st,{value:ot,enumerable:!0,configurable:!0,writable:!0}):at[st]=ot,at}function ownKeys(at,st){var ot=Object.keys(at);if(Object.getOwnPropertySymbols){var ut=Object.getOwnPropertySymbols(at);st&&(ut=ut.filter((function(st){return Object.getOwnPropertyDescriptor(at,st).enumerable}))),ot.push.apply(ot,ut)}return ot}function _objectSpread2(at){for(var st=1;st<arguments.length;st++){var ot=null!=arguments[st]?arguments[st]:{};st%2?ownKeys(Object(ot),!0).forEach((function(st){_defineProperty(at,st,ot[st])})):Object.getOwnPropertyDescriptors?Object.defineProperties(at,Object.getOwnPropertyDescriptors(ot)):ownKeys(Object(ot)).forEach((function(st){Object.defineProperty(at,st,Object.getOwnPropertyDescriptor(ot,st))}))}return at}ot.d(st,{Kk:()=>um});const noop=()=>{};let ut={},Hl={},rc=null,sc={mark:noop,measure:noop};try{"undefined"!==typeof window&&(ut=window),"undefined"!==typeof document&&(Hl=document),"undefined"!==typeof MutationObserver&&(rc=MutationObserver),"undefined"!==typeof performance&&(sc=performance)}catch(hm){}const{userAgent:oc=""}=ut.navigator||{},_c=ut,wc=Hl,Sc=rc,iu=sc,su=(_c.document,!!wc.documentElement&&!!wc.head&&"function"===typeof wc.addEventListener&&"function"===typeof wc.createElement),lu=~oc.indexOf("MSIE")||~oc.indexOf("Trident/");var cu={classic:{fa:"solid",fas:"solid","fa-solid":"solid",far:"regular","fa-regular":"regular",fal:"light","fa-light":"light",fat:"thin","fa-thin":"thin",fab:"brands","fa-brands":"brands"},duotone:{fa:"solid",fad:"solid","fa-solid":"solid","fa-duotone":"solid",fadr:"regular","fa-regular":"regular",fadl:"light","fa-light":"light",fadt:"thin","fa-thin":"thin"},sharp:{fa:"solid",fass:"solid","fa-solid":"solid",fasr:"regular","fa-regular":"regular",fasl:"light","fa-light":"light",fast:"thin","fa-thin":"thin"},"sharp-duotone":{fa:"solid",fasds:"solid","fa-solid":"solid",fasdr:"regular","fa-regular":"regular",fasdl:"light","fa-light":"light",fasdt:"thin","fa-thin":"thin"}},uu=["fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone"],pu="classic",mu="duotone",gu=[pu,mu,"sharp","sharp-duotone"],Au=new Map([["classic",{defaultShortPrefixId:"fas",defaultStyleId:"solid",styleIds:["solid","regular","light","thin","brands"],futureStyleIds:[],defaultFontWeight:900}],["sharp",{defaultShortPrefixId:"fass",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["duotone",{defaultShortPrefixId:"fad",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}],["sharp-duotone",{defaultShortPrefixId:"fasds",defaultStyleId:"solid",styleIds:["solid","regular","light","thin"],futureStyleIds:[],defaultFontWeight:900}]]),yu=["fak","fa-kit","fakd","fa-kit-duotone"],_u={fak:"kit","fa-kit":"kit"},xu={fakd:"kit-duotone","fa-kit-duotone":"kit-duotone"},Su=["fak","fakd"],Du={kit:"fak"},Lu={"kit-duotone":"fakd"},$u={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},hh=["fak","fa-kit","fakd","fa-kit-duotone"],ed={classic:{fab:"fa-brands",fad:"fa-duotone",fal:"fa-light",far:"fa-regular",fas:"fa-solid",fat:"fa-thin"},duotone:{fadr:"fa-regular",fadl:"fa-light",fadt:"fa-thin"},sharp:{fass:"fa-solid",fasr:"fa-regular",fasl:"fa-light",fast:"fa-thin"},"sharp-duotone":{fasds:"fa-solid",fasdr:"fa-regular",fasdl:"fa-light",fasdt:"fa-thin"}},td=["fa","fas","far","fal","fat","fad","fadr","fadl","fadt","fab","fass","fasr","fasl","fast","fasds","fasdr","fasdl","fasdt","fa-classic","fa-duotone","fa-sharp","fa-sharp-duotone","fa-solid","fa-regular","fa-light","fa-thin","fa-duotone","fa-brands"],id=[1,2,3,4,5,6,7,8,9,10],nd=id.concat([11,12,13,14,15,16,17,18,19,20]),rd=[...Object.keys({classic:["fas","far","fal","fat","fad"],duotone:["fadr","fadl","fadt"],sharp:["fass","fasr","fasl","fast"],"sharp-duotone":["fasds","fasdr","fasdl","fasdt"]}),"solid","regular","light","thin","duotone","brands","2xs","xs","sm","lg","xl","2xl","beat","border","fade","beat-fade","bounce","flip-both","flip-horizontal","flip-vertical","flip","fw","inverse","layers-counter","layers-text","layers","li","pull-left","pull-right","pulse","rotate-180","rotate-270","rotate-90","rotate-by","shake","spin-pulse","spin-reverse","spin","stack-1x","stack-2x","stack","ul",$u.GROUP,$u.SWAP_OPACITY,$u.PRIMARY,$u.SECONDARY].concat(id.map((at=>"".concat(at,"x")))).concat(nd.map((at=>"w-".concat(at))));const ad="___FONT_AWESOME___",sd=16,od="svg-inline--fa",ld="data-fa-i2svg",cd="data-fa-pseudo-element",ud="data-prefix",hd="data-icon",dd="fontawesome-i2svg",pd=["HTML","HEAD","STYLE","SCRIPT"],md=(()=>{try{return!0}catch(at){return!1}})();function familyProxy(at){return new Proxy(at,{get:(at,st)=>st in at?at[st]:at[pu]})}const gd=_objectSpread2({},cu);gd[pu]=_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2({},{"fa-duotone":"duotone"}),cu[pu]),_u),xu);const fd=familyProxy(gd),Ad=_objectSpread2({},{classic:{solid:"fas",regular:"far",light:"fal",thin:"fat",brands:"fab"},duotone:{solid:"fad",regular:"fadr",light:"fadl",thin:"fadt"},sharp:{solid:"fass",regular:"fasr",light:"fasl",thin:"fast"},"sharp-duotone":{solid:"fasds",regular:"fasdr",light:"fasdl",thin:"fasdt"}});Ad[pu]=_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2({},{duotone:"fad"}),Ad[pu]),Du),Lu);const yd=familyProxy(Ad),vd=_objectSpread2({},ed);vd[pu]=_objectSpread2(_objectSpread2({},vd[pu]),{fak:"fa-kit"});const _d=familyProxy(vd),xd=_objectSpread2({},{classic:{"fa-brands":"fab","fa-duotone":"fad","fa-light":"fal","fa-regular":"far","fa-solid":"fas","fa-thin":"fat"},duotone:{"fa-regular":"fadr","fa-light":"fadl","fa-thin":"fadt"},sharp:{"fa-solid":"fass","fa-regular":"fasr","fa-light":"fasl","fa-thin":"fast"},"sharp-duotone":{"fa-solid":"fasds","fa-regular":"fasdr","fa-light":"fasdl","fa-thin":"fasdt"}});xd[pu]=_objectSpread2(_objectSpread2({},xd[pu]),{"fa-kit":"fak"});familyProxy(xd);const bd=/fa(s|r|l|t|d|dr|dl|dt|b|k|kd|ss|sr|sl|st|sds|sdr|sdl|sdt)?[\-\ ]/,wd="fa-layers-text",Ed=/Font ?Awesome ?([56 ]*)(Solid|Regular|Light|Thin|Duotone|Brands|Free|Pro|Sharp Duotone|Sharp|Kit)?.*/i,Md=(familyProxy(_objectSpread2({},{classic:{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},duotone:{900:"fad",400:"fadr",300:"fadl",100:"fadt"},sharp:{900:"fass",400:"fasr",300:"fasl",100:"fast"},"sharp-duotone":{900:"fasds",400:"fasdr",300:"fasdl",100:"fasdt"}})),["class","data-prefix","data-icon","data-fa-transform","data-fa-mask"]),Sd={GROUP:"duotone-group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},Td=["kit",...rd],Cd=_c.FontAwesomeConfig||{};if(wc&&"function"===typeof wc.querySelector){[["data-family-prefix","familyPrefix"],["data-css-prefix","cssPrefix"],["data-family-default","familyDefault"],["data-style-default","styleDefault"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]].forEach((at=>{let[st,ot]=at;const ut=function(at){return""===at||"false"!==at&&("true"===at||at)}(function(at){var st=wc.querySelector("script["+at+"]");if(st)return st.getAttribute(at)}(st));void 0!==ut&&null!==ut&&(Cd[ot]=ut)}))}const kd={styleDefault:"solid",familyDefault:pu,cssPrefix:"fa",replacementClass:od,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0};Cd.familyPrefix&&(Cd.cssPrefix=Cd.familyPrefix);const Id=_objectSpread2(_objectSpread2({},kd),Cd);Id.autoReplaceSvg||(Id.observeMutations=!1);const Dd={};Object.keys(kd).forEach((at=>{Object.defineProperty(Dd,at,{enumerable:!0,set:function(st){Id[at]=st,Ld.forEach((at=>at(Dd)))},get:function(){return Id[at]}})})),Object.defineProperty(Dd,"familyPrefix",{enumerable:!0,set:function(at){Id.cssPrefix=at,Ld.forEach((at=>at(Dd)))},get:function(){return Id.cssPrefix}}),_c.FontAwesomeConfig=Dd;const Ld=[];const Pd=sd,zd={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function nextUniqueId(){let at=12,st="";for(;at-- >0;)st+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[62*Math.random()|0];return st}function toArray(at){const st=[];for(let ot=(at||[]).length>>>0;ot--;)st[ot]=at[ot];return st}function classArray(at){return at.classList?toArray(at.classList):(at.getAttribute("class")||"").split(" ").filter((at=>at))}function htmlEscape(at){return"".concat(at).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function joinStyles(at){return Object.keys(at||{}).reduce(((st,ot)=>st+"".concat(ot,": ").concat(at[ot].trim(),";")),"")}function transformIsMeaningful(at){return at.size!==zd.size||at.x!==zd.x||at.y!==zd.y||at.rotate!==zd.rotate||at.flipX||at.flipY}function css(){const at="fa",st=od,ot=Dd.cssPrefix,ut=Dd.replacementClass;let Hl=':root, :host {\n  --fa-font-solid: normal 900 1em/1 "Font Awesome 6 Free";\n  --fa-font-regular: normal 400 1em/1 "Font Awesome 6 Free";\n  --fa-font-light: normal 300 1em/1 "Font Awesome 6 Pro";\n  --fa-font-thin: normal 100 1em/1 "Font Awesome 6 Pro";\n  --fa-font-duotone: normal 900 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-regular: normal 400 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-light: normal 300 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-duotone-thin: normal 100 1em/1 "Font Awesome 6 Duotone";\n  --fa-font-brands: normal 400 1em/1 "Font Awesome 6 Brands";\n  --fa-font-sharp-solid: normal 900 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-regular: normal 400 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-light: normal 300 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-thin: normal 100 1em/1 "Font Awesome 6 Sharp";\n  --fa-font-sharp-duotone-solid: normal 900 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-regular: normal 400 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-light: normal 300 1em/1 "Font Awesome 6 Sharp Duotone";\n  --fa-font-sharp-duotone-thin: normal 100 1em/1 "Font Awesome 6 Sharp Duotone";\n}\n\nsvg:not(:root).svg-inline--fa, svg:not(:host).svg-inline--fa {\n  overflow: visible;\n  box-sizing: content-box;\n}\n\n.svg-inline--fa {\n  display: var(--fa-display, inline-block);\n  height: 1em;\n  overflow: visible;\n  vertical-align: -0.125em;\n}\n.svg-inline--fa.fa-2xs {\n  vertical-align: 0.1em;\n}\n.svg-inline--fa.fa-xs {\n  vertical-align: 0em;\n}\n.svg-inline--fa.fa-sm {\n  vertical-align: -0.0714285705em;\n}\n.svg-inline--fa.fa-lg {\n  vertical-align: -0.2em;\n}\n.svg-inline--fa.fa-xl {\n  vertical-align: -0.25em;\n}\n.svg-inline--fa.fa-2xl {\n  vertical-align: -0.3125em;\n}\n.svg-inline--fa.fa-pull-left {\n  margin-right: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-pull-right {\n  margin-left: var(--fa-pull-margin, 0.3em);\n  width: auto;\n}\n.svg-inline--fa.fa-li {\n  width: var(--fa-li-width, 2em);\n  top: 0.25em;\n}\n.svg-inline--fa.fa-fw {\n  width: var(--fa-fw-width, 1.25em);\n}\n\n.fa-layers svg.svg-inline--fa {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n}\n\n.fa-layers-counter, .fa-layers-text {\n  display: inline-block;\n  position: absolute;\n  text-align: center;\n}\n\n.fa-layers {\n  display: inline-block;\n  height: 1em;\n  position: relative;\n  text-align: center;\n  vertical-align: -0.125em;\n  width: 1em;\n}\n.fa-layers svg.svg-inline--fa {\n  transform-origin: center center;\n}\n\n.fa-layers-text {\n  left: 50%;\n  top: 50%;\n  transform: translate(-50%, -50%);\n  transform-origin: center center;\n}\n\n.fa-layers-counter {\n  background-color: var(--fa-counter-background-color, #ff253a);\n  border-radius: var(--fa-counter-border-radius, 1em);\n  box-sizing: border-box;\n  color: var(--fa-inverse, #fff);\n  line-height: var(--fa-counter-line-height, 1);\n  max-width: var(--fa-counter-max-width, 5em);\n  min-width: var(--fa-counter-min-width, 1.5em);\n  overflow: hidden;\n  padding: var(--fa-counter-padding, 0.25em 0.5em);\n  right: var(--fa-right, 0);\n  text-overflow: ellipsis;\n  top: var(--fa-top, 0);\n  transform: scale(var(--fa-counter-scale, 0.25));\n  transform-origin: top right;\n}\n\n.fa-layers-bottom-right {\n  bottom: var(--fa-bottom, 0);\n  right: var(--fa-right, 0);\n  top: auto;\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: bottom right;\n}\n\n.fa-layers-bottom-left {\n  bottom: var(--fa-bottom, 0);\n  left: var(--fa-left, 0);\n  right: auto;\n  top: auto;\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: bottom left;\n}\n\n.fa-layers-top-right {\n  top: var(--fa-top, 0);\n  right: var(--fa-right, 0);\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: top right;\n}\n\n.fa-layers-top-left {\n  left: var(--fa-left, 0);\n  right: auto;\n  top: var(--fa-top, 0);\n  transform: scale(var(--fa-layers-scale, 0.25));\n  transform-origin: top left;\n}\n\n.fa-1x {\n  font-size: 1em;\n}\n\n.fa-2x {\n  font-size: 2em;\n}\n\n.fa-3x {\n  font-size: 3em;\n}\n\n.fa-4x {\n  font-size: 4em;\n}\n\n.fa-5x {\n  font-size: 5em;\n}\n\n.fa-6x {\n  font-size: 6em;\n}\n\n.fa-7x {\n  font-size: 7em;\n}\n\n.fa-8x {\n  font-size: 8em;\n}\n\n.fa-9x {\n  font-size: 9em;\n}\n\n.fa-10x {\n  font-size: 10em;\n}\n\n.fa-2xs {\n  font-size: 0.625em;\n  line-height: 0.1em;\n  vertical-align: 0.225em;\n}\n\n.fa-xs {\n  font-size: 0.75em;\n  line-height: 0.0833333337em;\n  vertical-align: 0.125em;\n}\n\n.fa-sm {\n  font-size: 0.875em;\n  line-height: 0.0714285718em;\n  vertical-align: 0.0535714295em;\n}\n\n.fa-lg {\n  font-size: 1.25em;\n  line-height: 0.05em;\n  vertical-align: -0.075em;\n}\n\n.fa-xl {\n  font-size: 1.5em;\n  line-height: 0.0416666682em;\n  vertical-align: -0.125em;\n}\n\n.fa-2xl {\n  font-size: 2em;\n  line-height: 0.03125em;\n  vertical-align: -0.1875em;\n}\n\n.fa-fw {\n  text-align: center;\n  width: 1.25em;\n}\n\n.fa-ul {\n  list-style-type: none;\n  margin-left: var(--fa-li-margin, 2.5em);\n  padding-left: 0;\n}\n.fa-ul > li {\n  position: relative;\n}\n\n.fa-li {\n  left: calc(-1 * var(--fa-li-width, 2em));\n  position: absolute;\n  text-align: center;\n  width: var(--fa-li-width, 2em);\n  line-height: inherit;\n}\n\n.fa-border {\n  border-color: var(--fa-border-color, #eee);\n  border-radius: var(--fa-border-radius, 0.1em);\n  border-style: var(--fa-border-style, solid);\n  border-width: var(--fa-border-width, 0.08em);\n  padding: var(--fa-border-padding, 0.2em 0.25em 0.15em);\n}\n\n.fa-pull-left {\n  float: left;\n  margin-right: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-pull-right {\n  float: right;\n  margin-left: var(--fa-pull-margin, 0.3em);\n}\n\n.fa-beat {\n  animation-name: fa-beat;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-bounce {\n  animation-name: fa-bounce;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.28, 0.84, 0.42, 1));\n}\n\n.fa-fade {\n  animation-name: fa-fade;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-beat-fade {\n  animation-name: fa-beat-fade;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, cubic-bezier(0.4, 0, 0.6, 1));\n}\n\n.fa-flip {\n  animation-name: fa-flip;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, ease-in-out);\n}\n\n.fa-shake {\n  animation-name: fa-shake;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin {\n  animation-name: fa-spin;\n  animation-delay: var(--fa-animation-delay, 0s);\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 2s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, linear);\n}\n\n.fa-spin-reverse {\n  --fa-animation-direction: reverse;\n}\n\n.fa-pulse,\n.fa-spin-pulse {\n  animation-name: fa-spin;\n  animation-direction: var(--fa-animation-direction, normal);\n  animation-duration: var(--fa-animation-duration, 1s);\n  animation-iteration-count: var(--fa-animation-iteration-count, infinite);\n  animation-timing-function: var(--fa-animation-timing, steps(8));\n}\n\n@media (prefers-reduced-motion: reduce) {\n  .fa-beat,\n.fa-bounce,\n.fa-fade,\n.fa-beat-fade,\n.fa-flip,\n.fa-pulse,\n.fa-shake,\n.fa-spin,\n.fa-spin-pulse {\n    animation-delay: -1ms;\n    animation-duration: 1ms;\n    animation-iteration-count: 1;\n    transition-delay: 0s;\n    transition-duration: 0s;\n  }\n}\n@keyframes fa-beat {\n  0%, 90% {\n    transform: scale(1);\n  }\n  45% {\n    transform: scale(var(--fa-beat-scale, 1.25));\n  }\n}\n@keyframes fa-bounce {\n  0% {\n    transform: scale(1, 1) translateY(0);\n  }\n  10% {\n    transform: scale(var(--fa-bounce-start-scale-x, 1.1), var(--fa-bounce-start-scale-y, 0.9)) translateY(0);\n  }\n  30% {\n    transform: scale(var(--fa-bounce-jump-scale-x, 0.9), var(--fa-bounce-jump-scale-y, 1.1)) translateY(var(--fa-bounce-height, -0.5em));\n  }\n  50% {\n    transform: scale(var(--fa-bounce-land-scale-x, 1.05), var(--fa-bounce-land-scale-y, 0.95)) translateY(0);\n  }\n  57% {\n    transform: scale(1, 1) translateY(var(--fa-bounce-rebound, -0.125em));\n  }\n  64% {\n    transform: scale(1, 1) translateY(0);\n  }\n  100% {\n    transform: scale(1, 1) translateY(0);\n  }\n}\n@keyframes fa-fade {\n  50% {\n    opacity: var(--fa-fade-opacity, 0.4);\n  }\n}\n@keyframes fa-beat-fade {\n  0%, 100% {\n    opacity: var(--fa-beat-fade-opacity, 0.4);\n    transform: scale(1);\n  }\n  50% {\n    opacity: 1;\n    transform: scale(var(--fa-beat-fade-scale, 1.125));\n  }\n}\n@keyframes fa-flip {\n  50% {\n    transform: rotate3d(var(--fa-flip-x, 0), var(--fa-flip-y, 1), var(--fa-flip-z, 0), var(--fa-flip-angle, -180deg));\n  }\n}\n@keyframes fa-shake {\n  0% {\n    transform: rotate(-15deg);\n  }\n  4% {\n    transform: rotate(15deg);\n  }\n  8%, 24% {\n    transform: rotate(-18deg);\n  }\n  12%, 28% {\n    transform: rotate(18deg);\n  }\n  16% {\n    transform: rotate(-22deg);\n  }\n  20% {\n    transform: rotate(22deg);\n  }\n  32% {\n    transform: rotate(-12deg);\n  }\n  36% {\n    transform: rotate(12deg);\n  }\n  40%, 100% {\n    transform: rotate(0deg);\n  }\n}\n@keyframes fa-spin {\n  0% {\n    transform: rotate(0deg);\n  }\n  100% {\n    transform: rotate(360deg);\n  }\n}\n.fa-rotate-90 {\n  transform: rotate(90deg);\n}\n\n.fa-rotate-180 {\n  transform: rotate(180deg);\n}\n\n.fa-rotate-270 {\n  transform: rotate(270deg);\n}\n\n.fa-flip-horizontal {\n  transform: scale(-1, 1);\n}\n\n.fa-flip-vertical {\n  transform: scale(1, -1);\n}\n\n.fa-flip-both,\n.fa-flip-horizontal.fa-flip-vertical {\n  transform: scale(-1, -1);\n}\n\n.fa-rotate-by {\n  transform: rotate(var(--fa-rotate-angle, 0));\n}\n\n.fa-stack {\n  display: inline-block;\n  vertical-align: middle;\n  height: 2em;\n  position: relative;\n  width: 2.5em;\n}\n\n.fa-stack-1x,\n.fa-stack-2x {\n  bottom: 0;\n  left: 0;\n  margin: auto;\n  position: absolute;\n  right: 0;\n  top: 0;\n  z-index: var(--fa-stack-z-index, auto);\n}\n\n.svg-inline--fa.fa-stack-1x {\n  height: 1em;\n  width: 1.25em;\n}\n.svg-inline--fa.fa-stack-2x {\n  height: 2em;\n  width: 2.5em;\n}\n\n.fa-inverse {\n  color: var(--fa-inverse, #fff);\n}\n\n.sr-only,\n.fa-sr-only {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.sr-only-focusable:not(:focus),\n.fa-sr-only-focusable:not(:focus) {\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  margin: -1px;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  border-width: 0;\n}\n\n.svg-inline--fa .fa-primary {\n  fill: var(--fa-primary-color, currentColor);\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa .fa-secondary {\n  fill: var(--fa-secondary-color, currentColor);\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-primary {\n  opacity: var(--fa-secondary-opacity, 0.4);\n}\n\n.svg-inline--fa.fa-swap-opacity .fa-secondary {\n  opacity: var(--fa-primary-opacity, 1);\n}\n\n.svg-inline--fa mask .fa-primary,\n.svg-inline--fa mask .fa-secondary {\n  fill: black;\n}';if(ot!==at||ut!==st){const rc=new RegExp("\\.".concat(at,"\\-"),"g"),sc=new RegExp("\\--".concat(at,"\\-"),"g"),oc=new RegExp("\\.".concat(st),"g");Hl=Hl.replace(rc,".".concat(ot,"-")).replace(sc,"--".concat(ot,"-")).replace(oc,".".concat(ut))}return Hl}let Nd=!1;function ensureCss(){Dd.autoAddCss&&!Nd&&(!function(at){if(!at||!su)return;const st=wc.createElement("style");st.setAttribute("type","text/css"),st.innerHTML=at;const ot=wc.head.childNodes;let ut=null;for(let Hl=ot.length-1;Hl>-1;Hl--){const at=ot[Hl],st=(at.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(st)>-1&&(ut=at)}wc.head.insertBefore(st,ut)}(css()),Nd=!0)}var Rd={mixout:()=>({dom:{css:css,insertCss:ensureCss}}),hooks:()=>({beforeDOMElementCreation(){ensureCss()},beforeI2svg(){ensureCss()}})};const Od=_c||{};Od[ad]||(Od[ad]={}),Od[ad].styles||(Od[ad].styles={}),Od[ad].hooks||(Od[ad].hooks={}),Od[ad].shims||(Od[ad].shims=[]);var Bd=Od[ad];const Fd=[],listener=function(){wc.removeEventListener("DOMContentLoaded",listener),jd=1,Fd.map((at=>at()))};let jd=!1;function toHtml(at){const{tag:st,attributes:ot={},children:ut=[]}=at;return"string"===typeof at?htmlEscape(at):"<".concat(st," ").concat(function(at){return Object.keys(at||{}).reduce(((st,ot)=>st+"".concat(ot,'="').concat(htmlEscape(at[ot]),'" ')),"").trim()}(ot),">").concat(ut.map(toHtml).join(""),"</").concat(st,">")}function iconFromMapping(at,st,ot){if(at&&at[st]&&at[st][ot])return{prefix:st,iconName:ot,icon:at[st][ot]}}su&&(jd=(wc.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(wc.readyState),jd||wc.addEventListener("DOMContentLoaded",listener));var reduce=function(at,st,ot,ut){var Hl,rc,sc,oc=Object.keys(at),_c=oc.length,wc=void 0!==ut?function(at,st){return function(ot,ut,Hl,rc){return at.call(st,ot,ut,Hl,rc)}}(st,ut):st;for(void 0===ot?(Hl=1,sc=at[oc[0]]):(Hl=0,sc=ot);Hl<_c;Hl++)sc=wc(sc,at[rc=oc[Hl]],rc,at);return sc};function toHex(at){const st=function(at){const st=[];let ot=0;const ut=at.length;for(;ot<ut;){const Hl=at.charCodeAt(ot++);if(Hl>=55296&&Hl<=56319&&ot<ut){const ut=at.charCodeAt(ot++);56320==(64512&ut)?st.push(((1023&Hl)<<10)+(1023&ut)+65536):(st.push(Hl),ot--)}else st.push(Hl)}return st}(at);return 1===st.length?st[0].toString(16):null}function normalizeIcons(at){return Object.keys(at).reduce(((st,ot)=>{const ut=at[ot];return!!ut.icon?st[ut.iconName]=ut.icon:st[ot]=ut,st}),{})}function defineIcons(at,st){let ot=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{skipHooks:ut=!1}=ot,Hl=normalizeIcons(st);"function"!==typeof Bd.hooks.addPack||ut?Bd.styles[at]=_objectSpread2(_objectSpread2({},Bd.styles[at]||{}),Hl):Bd.hooks.addPack(at,normalizeIcons(st)),"fas"===at&&defineIcons("fa",st)}const{styles:Ud,shims:Vd}=Bd,Gd=Object.keys(_d),Zd=Gd.reduce(((at,st)=>(at[st]=Object.keys(_d[st]),at)),{});let Hd=null,Wd={},qd={},Yd={},Qd={},Kd={};function getIconName(at,st){const ot=st.split("-"),ut=ot[0],Hl=ot.slice(1).join("-");return ut!==at||""===Hl||(rc=Hl,~Td.indexOf(rc))?null:Hl;var rc}const build=()=>{const lookup=at=>reduce(Ud,((st,ot,ut)=>(st[ut]=reduce(ot,at,{}),st)),{});Wd=lookup(((at,st,ot)=>{if(st[3]&&(at[st[3]]=ot),st[2]){st[2].filter((at=>"number"===typeof at)).forEach((st=>{at[st.toString(16)]=ot}))}return at})),qd=lookup(((at,st,ot)=>{if(at[ot]=ot,st[2]){st[2].filter((at=>"string"===typeof at)).forEach((st=>{at[st]=ot}))}return at})),Kd=lookup(((at,st,ot)=>{const ut=st[2];return at[ot]=ot,ut.forEach((st=>{at[st]=ot})),at}));const at="far"in Ud||Dd.autoFetchSvg,st=reduce(Vd,((st,ot)=>{const ut=ot[0];let Hl=ot[1];const rc=ot[2];return"far"!==Hl||at||(Hl="fas"),"string"===typeof ut&&(st.names[ut]={prefix:Hl,iconName:rc}),"number"===typeof ut&&(st.unicodes[ut.toString(16)]={prefix:Hl,iconName:rc}),st}),{names:{},unicodes:{}});Yd=st.names,Qd=st.unicodes,Hd=getCanonicalPrefix(Dd.styleDefault,{family:Dd.familyDefault})};var Xd;function byUnicode(at,st){return(Wd[at]||{})[st]}function byAlias(at,st){return(Kd[at]||{})[st]}function byOldName(at){return Yd[at]||{prefix:null,iconName:null}}function getDefaultUsablePrefix(){return Hd}Xd=at=>{Hd=getCanonicalPrefix(at.styleDefault,{family:Dd.familyDefault})},Ld.push(Xd),build();function getCanonicalPrefix(at){let st=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{family:ot=pu}=st,ut=fd[ot][at];if(ot===mu&&!at)return"fad";const Hl=yd[ot][at]||yd[ot][ut],rc=at in Bd.styles?at:null;return Hl||rc||null}function sortedUniqueValues(at){return at.sort().filter(((at,st,ot)=>ot.indexOf(at)===st))}function getCanonicalIcon(at){let st=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{skipLookups:ot=!1}=st;let ut=null;const Hl=td.concat(hh),rc=sortedUniqueValues(at.filter((at=>Hl.includes(at)))),sc=sortedUniqueValues(at.filter((at=>!td.includes(at)))),oc=rc.filter((at=>(ut=at,!uu.includes(at)))),[_c=null]=oc,wc=function(at){let st=pu;const ot=Gd.reduce(((at,st)=>(at[st]="".concat(Dd.cssPrefix,"-").concat(st),at)),{});return gu.forEach((ut=>{(at.includes(ot[ut])||at.some((at=>Zd[ut].includes(at))))&&(st=ut)})),st}(rc),Sc=_objectSpread2(_objectSpread2({},function(at){let st=[],ot=null;return at.forEach((at=>{const ut=getIconName(Dd.cssPrefix,at);ut?ot=ut:at&&st.push(at)})),{iconName:ot,rest:st}}(sc)),{},{prefix:getCanonicalPrefix(_c,{family:wc})});return _objectSpread2(_objectSpread2(_objectSpread2({},Sc),function(at){const{values:st,family:ot,canonical:ut,givenPrefix:Hl="",styles:rc={},config:sc={}}=at,oc=ot===mu,_c=st.includes("fa-duotone")||st.includes("fad"),wc="duotone"===sc.familyDefault,Sc="fad"===ut.prefix||"fa-duotone"===ut.prefix;!oc&&(_c||wc||Sc)&&(ut.prefix="fad");(st.includes("fa-brands")||st.includes("fab"))&&(ut.prefix="fab");if(!ut.prefix&&Jd.includes(ot)){if(Object.keys(rc).find((at=>$d.includes(at)))||sc.autoFetchSvg){const at=Au.get(ot).defaultShortPrefixId;ut.prefix=at,ut.iconName=byAlias(ut.prefix,ut.iconName)||ut.iconName}}"fa"!==ut.prefix&&"fa"!==Hl||(ut.prefix=getDefaultUsablePrefix()||"fas");return ut}({values:at,family:wc,styles:Ud,config:Dd,canonical:Sc,givenPrefix:ut})),function(at,st,ot){let{prefix:ut,iconName:Hl}=ot;if(at||!ut||!Hl)return{prefix:ut,iconName:Hl};const rc="fa"===st?byOldName(Hl):{},sc=byAlias(ut,Hl);Hl=rc.iconName||sc||Hl,ut=rc.prefix||ut,"far"!==ut||Ud.far||!Ud.fas||Dd.autoFetchSvg||(ut="fas");return{prefix:ut,iconName:Hl}}(ot,ut,Sc))}const Jd=gu.filter((at=>at!==pu||at!==mu)),$d=Object.keys(ed).filter((at=>at!==pu)).map((at=>Object.keys(ed[at]))).flat();let Ap=[],Ep={};const Dp={},Lp=Object.keys(Dp);function chainHooks(at,st){for(var ot=arguments.length,ut=new Array(ot>2?ot-2:0),Hl=2;Hl<ot;Hl++)ut[Hl-2]=arguments[Hl];return(Ep[at]||[]).forEach((at=>{st=at.apply(null,[st,...ut])})),st}function callHooks(at){for(var st=arguments.length,ot=new Array(st>1?st-1:0),ut=1;ut<st;ut++)ot[ut-1]=arguments[ut];(Ep[at]||[]).forEach((at=>{at.apply(null,ot)}))}function callProvided(){const at=arguments[0],st=Array.prototype.slice.call(arguments,1);return Dp[at]?Dp[at].apply(null,st):void 0}function findIconDefinition(at){"fa"===at.prefix&&(at.prefix="fas");let{iconName:st}=at;const ot=at.prefix||getDefaultUsablePrefix();if(st)return st=byAlias(ot,st)||st,iconFromMapping(Np.definitions,ot,st)||iconFromMapping(Bd.styles,ot,st)}const Np=new class{constructor(){this.definitions={}}add(){for(var at=arguments.length,st=new Array(at),ot=0;ot<at;ot++)st[ot]=arguments[ot];const ut=st.reduce(this._pullDefinitions,{});Object.keys(ut).forEach((at=>{this.definitions[at]=_objectSpread2(_objectSpread2({},this.definitions[at]||{}),ut[at]),defineIcons(at,ut[at]);const st=_d[pu][at];st&&defineIcons(st,ut[at]),build()}))}reset(){this.definitions={}}_pullDefinitions(at,st){const ot=st.prefix&&st.iconName&&st.icon?{0:st}:st;return Object.keys(ot).map((st=>{const{prefix:ut,iconName:Hl,icon:rc}=ot[st],sc=rc[2];at[ut]||(at[ut]={}),sc.length>0&&sc.forEach((st=>{"string"===typeof st&&(at[ut][st]=rc)})),at[ut][Hl]=rc})),at}},Rp={i2svg:function(){let at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return su?(callHooks("beforeI2svg",at),callProvided("pseudoElements2svg",at),callProvided("i2svg",at)):Promise.reject(new Error("Operation requires a DOM of some kind."))},watch:function(){let at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoReplaceSvgRoot:st}=at;var ot;!1===Dd.autoReplaceSvg&&(Dd.autoReplaceSvg=!0),Dd.observeMutations=!0,ot=()=>{autoReplace({autoReplaceSvgRoot:st}),callHooks("watch",at)},su&&(jd?setTimeout(ot,0):Fd.push(ot))}},Op={icon:at=>{if(null===at)return null;if("object"===typeof at&&at.prefix&&at.iconName)return{prefix:at.prefix,iconName:byAlias(at.prefix,at.iconName)||at.iconName};if(Array.isArray(at)&&2===at.length){const st=0===at[1].indexOf("fa-")?at[1].slice(3):at[1],ot=getCanonicalPrefix(at[0]);return{prefix:ot,iconName:byAlias(ot,st)||st}}if("string"===typeof at&&(at.indexOf("".concat(Dd.cssPrefix,"-"))>-1||at.match(bd))){const st=getCanonicalIcon(at.split(" "),{skipLookups:!0});return{prefix:st.prefix||getDefaultUsablePrefix(),iconName:byAlias(st.prefix,st.iconName)||st.iconName}}if("string"===typeof at){const st=getDefaultUsablePrefix();return{prefix:st,iconName:byAlias(st,at)||at}}}},Fp={noAuto:()=>{Dd.autoReplaceSvg=!1,Dd.observeMutations=!1,callHooks("noAuto")},config:Dd,dom:Rp,parse:Op,library:Np,findIconDefinition:findIconDefinition,toHtml:toHtml},autoReplace=function(){let at=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{autoReplaceSvgRoot:st=wc}=at;(Object.keys(Bd.styles).length>0||Dd.autoFetchSvg)&&su&&Dd.autoReplaceSvg&&Fp.dom.i2svg({node:st})};function domVariants(at,st){return Object.defineProperty(at,"abstract",{get:st}),Object.defineProperty(at,"html",{get:function(){return at.abstract.map((at=>toHtml(at)))}}),Object.defineProperty(at,"node",{get:function(){if(!su)return;const st=wc.createElement("div");return st.innerHTML=at.html,st.children}}),at}function makeInlineSvgAbstract(at){const{icons:{main:st,mask:ot},prefix:ut,iconName:Hl,transform:rc,symbol:sc,title:oc,maskId:_c,titleId:wc,extra:Sc,watchable:iu=!1}=at,{width:su,height:lu}=ot.found?ot:st,cu=Su.includes(ut),uu=[Dd.replacementClass,Hl?"".concat(Dd.cssPrefix,"-").concat(Hl):""].filter((at=>-1===Sc.classes.indexOf(at))).filter((at=>""!==at||!!at)).concat(Sc.classes).join(" ");let pu={children:[],attributes:_objectSpread2(_objectSpread2({},Sc.attributes),{},{"data-prefix":ut,"data-icon":Hl,class:uu,role:Sc.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(su," ").concat(lu)})};const mu=cu&&!~Sc.classes.indexOf("fa-fw")?{width:"".concat(su/lu*16*.0625,"em")}:{};iu&&(pu.attributes[ld]=""),oc&&(pu.children.push({tag:"title",attributes:{id:pu.attributes["aria-labelledby"]||"title-".concat(wc||nextUniqueId())},children:[oc]}),delete pu.attributes.title);const gu=_objectSpread2(_objectSpread2({},pu),{},{prefix:ut,iconName:Hl,main:st,mask:ot,maskId:_c,transform:rc,symbol:sc,styles:_objectSpread2(_objectSpread2({},mu),Sc.styles)}),{children:Au,attributes:yu}=ot.found&&st.found?callProvided("generateAbstractMask",gu)||{children:[],attributes:{}}:callProvided("generateAbstractIcon",gu)||{children:[],attributes:{}};return gu.children=Au,gu.attributes=yu,sc?function(at){let{prefix:st,iconName:ot,children:ut,attributes:Hl,symbol:rc}=at;const sc=!0===rc?"".concat(st,"-").concat(Dd.cssPrefix,"-").concat(ot):rc;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:_objectSpread2(_objectSpread2({},Hl),{},{id:sc}),children:ut}]}]}(gu):function(at){let{children:st,main:ot,mask:ut,attributes:Hl,styles:rc,transform:sc}=at;if(transformIsMeaningful(sc)&&ot.found&&!ut.found){const{width:at,height:st}=ot,ut={x:at/st/2,y:.5};Hl.style=joinStyles(_objectSpread2(_objectSpread2({},rc),{},{"transform-origin":"".concat(ut.x+sc.x/16,"em ").concat(ut.y+sc.y/16,"em")}))}return[{tag:"svg",attributes:Hl,children:st}]}(gu)}function makeLayersTextAbstract(at){const{content:st,width:ot,height:ut,transform:Hl,title:rc,extra:sc,watchable:oc=!1}=at,_c=_objectSpread2(_objectSpread2(_objectSpread2({},sc.attributes),rc?{title:rc}:{}),{},{class:sc.classes.join(" ")});oc&&(_c[ld]="");const wc=_objectSpread2({},sc.styles);transformIsMeaningful(Hl)&&(wc.transform=function(at){let{transform:st,width:ot=sd,height:ut=sd,startCentered:Hl=!1}=at,rc="";return rc+=Hl&&lu?"translate(".concat(st.x/Pd-ot/2,"em, ").concat(st.y/Pd-ut/2,"em) "):Hl?"translate(calc(-50% + ".concat(st.x/Pd,"em), calc(-50% + ").concat(st.y/Pd,"em)) "):"translate(".concat(st.x/Pd,"em, ").concat(st.y/Pd,"em) "),rc+="scale(".concat(st.size/Pd*(st.flipX?-1:1),", ").concat(st.size/Pd*(st.flipY?-1:1),") "),rc+="rotate(".concat(st.rotate,"deg) "),rc}({transform:Hl,startCentered:!0,width:ot,height:ut}),wc["-webkit-transform"]=wc.transform);const Sc=joinStyles(wc);Sc.length>0&&(_c.style=Sc);const iu=[];return iu.push({tag:"span",attributes:_c,children:[st]}),rc&&iu.push({tag:"span",attributes:{class:"sr-only"},children:[rc]}),iu}const{styles:jp}=Bd;function asFoundIcon(at){const st=at[0],ot=at[1],[ut]=at.slice(4);let Hl=null;return Hl=Array.isArray(ut)?{tag:"g",attributes:{class:"".concat(Dd.cssPrefix,"-").concat(Sd.GROUP)},children:[{tag:"path",attributes:{class:"".concat(Dd.cssPrefix,"-").concat(Sd.SECONDARY),fill:"currentColor",d:ut[0]}},{tag:"path",attributes:{class:"".concat(Dd.cssPrefix,"-").concat(Sd.PRIMARY),fill:"currentColor",d:ut[1]}}]}:{tag:"path",attributes:{fill:"currentColor",d:ut}},{found:!0,width:st,height:ot,icon:Hl}}const Up={found:!1,width:512,height:512};function findIcon(at,st){let ot=st;return"fa"===st&&null!==Dd.styleDefault&&(st=getDefaultUsablePrefix()),new Promise(((ut,Hl)=>{if("fa"===ot){const ot=byOldName(at)||{};at=ot.iconName||at,st=ot.prefix||st}if(at&&st&&jp[st]&&jp[st][at]){return ut(asFoundIcon(jp[st][at]))}!function(at,st){md||Dd.showMissingIcons||!at||console.error('Icon with name "'.concat(at,'" and prefix "').concat(st,'" is missing.'))}(at,st),ut(_objectSpread2(_objectSpread2({},Up),{},{icon:Dd.showMissingIcons&&at&&callProvided("missingIconAbstract")||{}}))}))}const noop$1=()=>{},Vp=Dd.measurePerformance&&iu&&iu.mark&&iu.measure?iu:{mark:noop$1,measure:noop$1},Gp='FA "6.7.2"',end=at=>{Vp.mark("".concat(Gp," ").concat(at," ends")),Vp.measure("".concat(Gp," ").concat(at),"".concat(Gp," ").concat(at," begins"),"".concat(Gp," ").concat(at," ends"))};var perf_begin=at=>(Vp.mark("".concat(Gp," ").concat(at," begins")),()=>end(at));const noop$2=()=>{};function isWatched(at){return"string"===typeof(at.getAttribute?at.getAttribute(ld):null)}function createElementNS(at){return wc.createElementNS("http://www.w3.org/2000/svg",at)}function createElement(at){return wc.createElement(at)}function convertSVG(at){let st=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{ceFn:ot=("svg"===at.tag?createElementNS:createElement)}=st;if("string"===typeof at)return wc.createTextNode(at);const ut=ot(at.tag);Object.keys(at.attributes||[]).forEach((function(st){ut.setAttribute(st,at.attributes[st])}));return(at.children||[]).forEach((function(at){ut.appendChild(convertSVG(at,{ceFn:ot}))})),ut}const Zp={replace:function(at){const st=at[0];if(st.parentNode)if(at[1].forEach((at=>{st.parentNode.insertBefore(convertSVG(at),st)})),null===st.getAttribute(ld)&&Dd.keepOriginalSource){let at=wc.createComment(function(at){let st=" ".concat(at.outerHTML," ");return st="".concat(st,"Font Awesome fontawesome.com "),st}(st));st.parentNode.replaceChild(at,st)}else st.remove()},nest:function(at){const st=at[0],ot=at[1];if(~classArray(st).indexOf(Dd.replacementClass))return Zp.replace(at);const ut=new RegExp("".concat(Dd.cssPrefix,"-.*"));if(delete ot[0].attributes.id,ot[0].attributes.class){const at=ot[0].attributes.class.split(" ").reduce(((at,st)=>(st===Dd.replacementClass||st.match(ut)?at.toSvg.push(st):at.toNode.push(st),at)),{toNode:[],toSvg:[]});ot[0].attributes.class=at.toSvg.join(" "),0===at.toNode.length?st.removeAttribute("class"):st.setAttribute("class",at.toNode.join(" "))}const Hl=ot.map((at=>toHtml(at))).join("\n");st.setAttribute(ld,""),st.innerHTML=Hl}};function performOperationSync(at){at()}function perform(at,st){const ot="function"===typeof st?st:noop$2;if(0===at.length)ot();else{let st=performOperationSync;"async"===Dd.mutateApproach&&(st=_c.requestAnimationFrame||performOperationSync),st((()=>{const st=!0===Dd.autoReplaceSvg?Zp.replace:Zp[Dd.autoReplaceSvg]||Zp.replace,ut=perf_begin("mutate");at.map(st),ut(),ot()}))}}let Hp=!1;function disableObservation(){Hp=!0}function enableObservation(){Hp=!1}let Wp=null;function observe(at){if(!Sc)return;if(!Dd.observeMutations)return;const{treeCallback:st=noop$2,nodeCallback:ot=noop$2,pseudoElementsCallback:ut=noop$2,observeMutationsRoot:Hl=wc}=at;Wp=new Sc((at=>{if(Hp)return;const Hl=getDefaultUsablePrefix();toArray(at).forEach((at=>{if("childList"===at.type&&at.addedNodes.length>0&&!isWatched(at.addedNodes[0])&&(Dd.searchPseudoElements&&ut(at.target),st(at.target)),"attributes"===at.type&&at.target.parentNode&&Dd.searchPseudoElements&&ut(at.target.parentNode),"attributes"===at.type&&isWatched(at.target)&&~Md.indexOf(at.attributeName))if("class"===at.attributeName&&function(at){const st=at.getAttribute?at.getAttribute(ud):null,ot=at.getAttribute?at.getAttribute(hd):null;return st&&ot}(at.target)){const{prefix:st,iconName:ot}=getCanonicalIcon(classArray(at.target));at.target.setAttribute(ud,st||Hl),ot&&at.target.setAttribute(hd,ot)}else(rc=at.target)&&rc.classList&&rc.classList.contains&&rc.classList.contains(Dd.replacementClass)&&ot(at.target);var rc}))})),su&&Wp.observe(Hl,{childList:!0,attributes:!0,characterData:!0,subtree:!0})}function classParser(at){const st=at.getAttribute("data-prefix"),ot=at.getAttribute("data-icon"),ut=void 0!==at.innerText?at.innerText.trim():"";let Hl=getCanonicalIcon(classArray(at));return Hl.prefix||(Hl.prefix=getDefaultUsablePrefix()),st&&ot&&(Hl.prefix=st,Hl.iconName=ot),Hl.iconName&&Hl.prefix||(Hl.prefix&&ut.length>0&&(Hl.iconName=(rc=Hl.prefix,sc=at.innerText,(qd[rc]||{})[sc]||byUnicode(Hl.prefix,toHex(at.innerText)))),!Hl.iconName&&Dd.autoFetchSvg&&at.firstChild&&at.firstChild.nodeType===Node.TEXT_NODE&&(Hl.iconName=at.firstChild.data)),Hl;var rc,sc}function parseMeta(at){let st=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{styleParser:!0};const{iconName:ot,prefix:ut,rest:Hl}=classParser(at),rc=function(at){const st=toArray(at.attributes).reduce(((at,st)=>("class"!==at.name&&"style"!==at.name&&(at[st.name]=st.value),at)),{}),ot=at.getAttribute("title"),ut=at.getAttribute("data-fa-title-id");return Dd.autoA11y&&(ot?st["aria-labelledby"]="".concat(Dd.replacementClass,"-title-").concat(ut||nextUniqueId()):(st["aria-hidden"]="true",st.focusable="false")),st}(at),sc=chainHooks("parseNodeAttributes",{},at);let oc=st.styleParser?function(at){const st=at.getAttribute("style");let ot=[];return st&&(ot=st.split(";").reduce(((at,st)=>{const ot=st.split(":"),ut=ot[0],Hl=ot.slice(1);return ut&&Hl.length>0&&(at[ut]=Hl.join(":").trim()),at}),{})),ot}(at):[];return _objectSpread2({iconName:ot,title:at.getAttribute("title"),titleId:at.getAttribute("data-fa-title-id"),prefix:ut,transform:zd,mask:{iconName:null,prefix:null,rest:[]},maskId:null,symbol:!1,extra:{classes:Hl,styles:oc,attributes:rc}},sc)}const{styles:qp}=Bd;function generateMutation(at){const st="nest"===Dd.autoReplaceSvg?parseMeta(at,{styleParser:!1}):parseMeta(at);return~st.extra.classes.indexOf(wd)?callProvided("generateLayersText",at,st):callProvided("generateSvgReplacementMutation",at,st)}function onTree(at){let st=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!su)return Promise.resolve();const ot=wc.documentElement.classList,hclAdd=at=>ot.add("".concat(dd,"-").concat(at)),hclRemove=at=>ot.remove("".concat(dd,"-").concat(at)),ut=Dd.autoFetchSvg?[...yu,...td]:uu.concat(Object.keys(qp));ut.includes("fa")||ut.push("fa");const Hl=[".".concat(wd,":not([").concat(ld,"])")].concat(ut.map((at=>".".concat(at,":not([").concat(ld,"])")))).join(", ");if(0===Hl.length)return Promise.resolve();let rc=[];try{rc=toArray(at.querySelectorAll(Hl))}catch(_c){}if(!(rc.length>0))return Promise.resolve();hclAdd("pending"),hclRemove("complete");const sc=perf_begin("onTree"),oc=rc.reduce(((at,st)=>{try{const ot=generateMutation(st);ot&&at.push(ot)}catch(_c){md||"MissingIcon"===_c.name&&console.error(_c)}return at}),[]);return new Promise(((at,ot)=>{Promise.all(oc).then((ot=>{perform(ot,(()=>{hclAdd("active"),hclAdd("complete"),hclRemove("pending"),"function"===typeof st&&st(),sc(),at()}))})).catch((at=>{sc(),ot(at)}))}))}function onNode(at){let st=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;generateMutation(at).then((at=>{at&&perform([at],st)}))}const render=function(at){let st=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:ot=zd,symbol:ut=!1,mask:Hl=null,maskId:rc=null,title:sc=null,titleId:oc=null,classes:_c=[],attributes:wc={},styles:Sc={}}=st;if(!at)return;const{prefix:iu,iconName:su,icon:lu}=at;return domVariants(_objectSpread2({type:"icon"},at),(()=>(callHooks("beforeDOMElementCreation",{iconDefinition:at,params:st}),Dd.autoA11y&&(sc?wc["aria-labelledby"]="".concat(Dd.replacementClass,"-title-").concat(oc||nextUniqueId()):(wc["aria-hidden"]="true",wc.focusable="false")),makeInlineSvgAbstract({icons:{main:asFoundIcon(lu),mask:Hl?asFoundIcon(Hl.icon):{found:!1,width:null,height:null,icon:{}}},prefix:iu,iconName:su,transform:_objectSpread2(_objectSpread2({},zd),ot),symbol:ut,title:sc,maskId:rc,titleId:oc,extra:{attributes:wc,styles:Sc,classes:_c}}))))};var Yp={mixout(){return{icon:(at=render,function(st){let ot=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const ut=(st||{}).icon?st:findIconDefinition(st||{});let{mask:Hl}=ot;return Hl&&(Hl=(Hl||{}).icon?Hl:findIconDefinition(Hl||{})),at(ut,_objectSpread2(_objectSpread2({},ot),{},{mask:Hl}))})};var at},hooks:()=>({mutationObserverCallbacks:at=>(at.treeCallback=onTree,at.nodeCallback=onNode,at)}),provides(at){at.i2svg=function(at){const{node:st=wc,callback:ot=()=>{}}=at;return onTree(st,ot)},at.generateSvgReplacementMutation=function(at,st){const{iconName:ot,title:ut,titleId:Hl,prefix:rc,transform:sc,symbol:oc,mask:_c,maskId:wc,extra:Sc}=st;return new Promise(((st,iu)=>{Promise.all([findIcon(ot,rc),_c.iconName?findIcon(_c.iconName,_c.prefix):Promise.resolve({found:!1,width:512,height:512,icon:{}})]).then((_c=>{let[iu,su]=_c;st([at,makeInlineSvgAbstract({icons:{main:iu,mask:su},prefix:rc,iconName:ot,transform:sc,symbol:oc,maskId:wc,title:ut,titleId:Hl,extra:Sc,watchable:!0})])})).catch(iu)}))},at.generateAbstractIcon=function(at){let{children:st,attributes:ot,main:ut,transform:Hl,styles:rc}=at;const sc=joinStyles(rc);let oc;return sc.length>0&&(ot.style=sc),transformIsMeaningful(Hl)&&(oc=callProvided("generateAbstractTransformGrouping",{main:ut,transform:Hl,containerWidth:ut.width,iconWidth:ut.width})),st.push(oc||ut.icon),{children:st,attributes:ot}}}},Qp={mixout:()=>({layer(at){let st=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{classes:ot=[]}=st;return domVariants({type:"layer"},(()=>{callHooks("beforeDOMElementCreation",{assembler:at,params:st});let ut=[];return at((at=>{Array.isArray(at)?at.map((at=>{ut=ut.concat(at.abstract)})):ut=ut.concat(at.abstract)})),[{tag:"span",attributes:{class:["".concat(Dd.cssPrefix,"-layers"),...ot].join(" ")},children:ut}]}))}})},Kp={mixout:()=>({counter(at){let st=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{title:ot=null,classes:ut=[],attributes:Hl={},styles:rc={}}=st;return domVariants({type:"counter",content:at},(()=>(callHooks("beforeDOMElementCreation",{content:at,params:st}),function(at){const{content:st,title:ot,extra:ut}=at,Hl=_objectSpread2(_objectSpread2(_objectSpread2({},ut.attributes),ot?{title:ot}:{}),{},{class:ut.classes.join(" ")}),rc=joinStyles(ut.styles);rc.length>0&&(Hl.style=rc);const sc=[];return sc.push({tag:"span",attributes:Hl,children:[st]}),ot&&sc.push({tag:"span",attributes:{class:"sr-only"},children:[ot]}),sc}({content:at.toString(),title:ot,extra:{attributes:Hl,styles:rc,classes:["".concat(Dd.cssPrefix,"-layers-counter"),...ut]}}))))}})},Xp={mixout:()=>({text(at){let st=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{transform:ot=zd,title:ut=null,classes:Hl=[],attributes:rc={},styles:sc={}}=st;return domVariants({type:"text",content:at},(()=>(callHooks("beforeDOMElementCreation",{content:at,params:st}),makeLayersTextAbstract({content:at,transform:_objectSpread2(_objectSpread2({},zd),ot),title:ut,extra:{attributes:rc,styles:sc,classes:["".concat(Dd.cssPrefix,"-layers-text"),...Hl]}}))))}}),provides(at){at.generateLayersText=function(at,st){const{title:ot,transform:ut,extra:Hl}=st;let rc=null,sc=null;if(lu){const st=parseInt(getComputedStyle(at).fontSize,10),ot=at.getBoundingClientRect();rc=ot.width/st,sc=ot.height/st}return Dd.autoA11y&&!ot&&(Hl.attributes["aria-hidden"]="true"),Promise.resolve([at,makeLayersTextAbstract({content:at.innerHTML,width:rc,height:sc,transform:ut,title:ot,extra:Hl,watchable:!0})])}}};const Jp=new RegExp('"',"ug"),$p=[1105920,1112319],em=_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2({},{FontAwesome:{normal:"fas",400:"fas"}}),{"Font Awesome 6 Free":{900:"fas",400:"far"},"Font Awesome 6 Pro":{900:"fas",400:"far",normal:"far",300:"fal",100:"fat"},"Font Awesome 6 Brands":{400:"fab",normal:"fab"},"Font Awesome 6 Duotone":{900:"fad",400:"fadr",normal:"fadr",300:"fadl",100:"fadt"},"Font Awesome 6 Sharp":{900:"fass",400:"fasr",normal:"fasr",300:"fasl",100:"fast"},"Font Awesome 6 Sharp Duotone":{900:"fasds",400:"fasdr",normal:"fasdr",300:"fasdl",100:"fasdt"}}),{"Font Awesome 5 Free":{900:"fas",400:"far"},"Font Awesome 5 Pro":{900:"fas",400:"far",normal:"far",300:"fal"},"Font Awesome 5 Brands":{400:"fab",normal:"fab"},"Font Awesome 5 Duotone":{900:"fad"}}),{"Font Awesome Kit":{400:"fak",normal:"fak"},"Font Awesome Kit Duotone":{400:"fakd",normal:"fakd"}}),tm=Object.keys(em).reduce(((at,st)=>(at[st.toLowerCase()]=em[st],at)),{}),im=Object.keys(tm).reduce(((at,st)=>{const ot=tm[st];return at[st]=ot[900]||[...Object.entries(ot)][0][1],at}),{});function replaceForPosition(at,st){const ot="".concat("data-fa-pseudo-element-pending").concat(st.replace(":","-"));return new Promise(((ut,Hl)=>{if(null!==at.getAttribute(ot))return ut();const rc=toArray(at.children).filter((at=>at.getAttribute(cd)===st))[0],sc=_c.getComputedStyle(at,st),oc=sc.getPropertyValue("font-family"),Sc=oc.match(Ed),iu=sc.getPropertyValue("font-weight"),su=sc.getPropertyValue("content");if(rc&&!Sc)return at.removeChild(rc),ut();if(Sc&&"none"!==su&&""!==su){const _c=sc.getPropertyValue("content");let su=function(at,st){const ot=at.replace(/^['"]|['"]$/g,"").toLowerCase(),ut=parseInt(st),Hl=isNaN(ut)?"normal":ut;return(tm[ot]||{})[Hl]||im[ot]}(oc,iu);const{value:lu,isSecondary:cu}=function(at){const st=at.replace(Jp,""),ot=function(at,st){const ot=at.length;let ut,Hl=at.charCodeAt(st);return Hl>=55296&&Hl<=56319&&ot>st+1&&(ut=at.charCodeAt(st+1),ut>=56320&&ut<=57343)?1024*(Hl-55296)+ut-56320+65536:Hl}(st,0),ut=ot>=$p[0]&&ot<=$p[1],Hl=2===st.length&&st[0]===st[1];return{value:toHex(Hl?st[0]:st),isSecondary:ut||Hl}}(_c),uu=Sc[0].startsWith("FontAwesome");let pu=byUnicode(su,lu),mu=pu;if(uu){const at=function(at){const st=Qd[at],ot=byUnicode("fas",at);return st||(ot?{prefix:"fas",iconName:ot}:null)||{prefix:null,iconName:null}}(lu);at.iconName&&at.prefix&&(pu=at.iconName,su=at.prefix)}if(!pu||cu||rc&&rc.getAttribute(ud)===su&&rc.getAttribute(hd)===mu)ut();else{at.setAttribute(ot,mu),rc&&at.removeChild(rc);const sc={iconName:null,title:null,titleId:null,prefix:null,transform:zd,symbol:!1,mask:{iconName:null,prefix:null,rest:[]},maskId:null,extra:{classes:[],styles:{},attributes:{}}},{extra:oc}=sc;oc.attributes[cd]=st,findIcon(pu,su).then((Hl=>{const rc=makeInlineSvgAbstract(_objectSpread2(_objectSpread2({},sc),{},{icons:{main:Hl,mask:{prefix:null,iconName:null,rest:[]}},prefix:su,iconName:mu,extra:oc,watchable:!0})),_c=wc.createElementNS("http://www.w3.org/2000/svg","svg");"::before"===st?at.insertBefore(_c,at.firstChild):at.appendChild(_c),_c.outerHTML=rc.map((at=>toHtml(at))).join("\n"),at.removeAttribute(ot),ut()})).catch(Hl)}}else ut()}))}function replace(at){return Promise.all([replaceForPosition(at,"::before"),replaceForPosition(at,"::after")])}function processable(at){return at.parentNode!==document.head&&!~pd.indexOf(at.tagName.toUpperCase())&&!at.getAttribute(cd)&&(!at.parentNode||"svg"!==at.parentNode.tagName)}function searchPseudoElements(at){if(su)return new Promise(((st,ot)=>{const ut=toArray(at.querySelectorAll("*")).filter(processable).map(replace),Hl=perf_begin("searchPseudoElements");disableObservation(),Promise.all(ut).then((()=>{Hl(),enableObservation(),st()})).catch((()=>{Hl(),enableObservation(),ot()}))}))}var nm={hooks:()=>({mutationObserverCallbacks:at=>(at.pseudoElementsCallback=searchPseudoElements,at)}),provides(at){at.pseudoElements2svg=function(at){const{node:st=wc}=at;Dd.searchPseudoElements&&searchPseudoElements(st)}}};let rm=!1;var am={mixout:()=>({dom:{unwatch(){disableObservation(),rm=!0}}}),hooks:()=>({bootstrap(){observe(chainHooks("mutationObserverCallbacks",{}))},noAuto(){Wp&&Wp.disconnect()},watch(at){const{observeMutationsRoot:st}=at;rm?enableObservation():observe(chainHooks("mutationObserverCallbacks",{observeMutationsRoot:st}))}})};const parseTransformString=at=>at.toLowerCase().split(" ").reduce(((at,st)=>{const ot=st.toLowerCase().split("-"),ut=ot[0];let Hl=ot.slice(1).join("-");if(ut&&"h"===Hl)return at.flipX=!0,at;if(ut&&"v"===Hl)return at.flipY=!0,at;if(Hl=parseFloat(Hl),isNaN(Hl))return at;switch(ut){case"grow":at.size=at.size+Hl;break;case"shrink":at.size=at.size-Hl;break;case"left":at.x=at.x-Hl;break;case"right":at.x=at.x+Hl;break;case"up":at.y=at.y-Hl;break;case"down":at.y=at.y+Hl;break;case"rotate":at.rotate=at.rotate+Hl}return at}),{size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0});var sm={mixout:()=>({parse:{transform:at=>parseTransformString(at)}}),hooks:()=>({parseNodeAttributes(at,st){const ot=st.getAttribute("data-fa-transform");return ot&&(at.transform=parseTransformString(ot)),at}}),provides(at){at.generateAbstractTransformGrouping=function(at){let{main:st,transform:ot,containerWidth:ut,iconWidth:Hl}=at;const rc={transform:"translate(".concat(ut/2," 256)")},sc="translate(".concat(32*ot.x,", ").concat(32*ot.y,") "),oc="scale(".concat(ot.size/16*(ot.flipX?-1:1),", ").concat(ot.size/16*(ot.flipY?-1:1),") "),_c="rotate(".concat(ot.rotate," 0 0)"),wc={outer:rc,inner:{transform:"".concat(sc," ").concat(oc," ").concat(_c)},path:{transform:"translate(".concat(Hl/2*-1," -256)")}};return{tag:"g",attributes:_objectSpread2({},wc.outer),children:[{tag:"g",attributes:_objectSpread2({},wc.inner),children:[{tag:st.icon.tag,children:st.icon.children,attributes:_objectSpread2(_objectSpread2({},st.icon.attributes),wc.path)}]}]}}}};const om={x:0,y:0,width:"100%",height:"100%"};function fillBlack(at){let st=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return at.attributes&&(at.attributes.fill||st)&&(at.attributes.fill="black"),at}var lm={hooks:()=>({parseNodeAttributes(at,st){const ot=st.getAttribute("data-fa-mask"),ut=ot?getCanonicalIcon(ot.split(" ").map((at=>at.trim()))):{prefix:null,iconName:null,rest:[]};return ut.prefix||(ut.prefix=getDefaultUsablePrefix()),at.mask=ut,at.maskId=st.getAttribute("data-fa-mask-id"),at}}),provides(at){at.generateAbstractMask=function(at){let{children:st,attributes:ot,main:ut,mask:Hl,maskId:rc,transform:sc}=at;const{width:oc,icon:_c}=ut,{width:wc,icon:Sc}=Hl,iu=function(at){let{transform:st,containerWidth:ot,iconWidth:ut}=at;const Hl={transform:"translate(".concat(ot/2," 256)")},rc="translate(".concat(32*st.x,", ").concat(32*st.y,") "),sc="scale(".concat(st.size/16*(st.flipX?-1:1),", ").concat(st.size/16*(st.flipY?-1:1),") "),oc="rotate(".concat(st.rotate," 0 0)");return{outer:Hl,inner:{transform:"".concat(rc," ").concat(sc," ").concat(oc)},path:{transform:"translate(".concat(ut/2*-1," -256)")}}}({transform:sc,containerWidth:wc,iconWidth:oc}),su={tag:"rect",attributes:_objectSpread2(_objectSpread2({},om),{},{fill:"white"})},lu=_c.children?{children:_c.children.map(fillBlack)}:{},cu={tag:"g",attributes:_objectSpread2({},iu.inner),children:[fillBlack(_objectSpread2({tag:_c.tag,attributes:_objectSpread2(_objectSpread2({},_c.attributes),iu.path)},lu))]},uu={tag:"g",attributes:_objectSpread2({},iu.outer),children:[cu]},pu="mask-".concat(rc||nextUniqueId()),mu="clip-".concat(rc||nextUniqueId()),gu={tag:"mask",attributes:_objectSpread2(_objectSpread2({},om),{},{id:pu,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[su,uu]},Au={tag:"defs",children:[{tag:"clipPath",attributes:{id:mu},children:(yu=Sc,"g"===yu.tag?yu.children:[yu])},gu]};var yu;return st.push(Au,{tag:"rect",attributes:_objectSpread2({fill:"currentColor","clip-path":"url(#".concat(mu,")"),mask:"url(#".concat(pu,")")},om)}),{children:st,attributes:ot}}}},cm={provides(at){let st=!1;_c.matchMedia&&(st=_c.matchMedia("(prefers-reduced-motion: reduce)").matches),at.missingIconAbstract=function(){const at=[],ot={fill:"currentColor"},ut={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};at.push({tag:"path",attributes:_objectSpread2(_objectSpread2({},ot),{},{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"})});const Hl=_objectSpread2(_objectSpread2({},ut),{},{attributeName:"opacity"}),rc={tag:"circle",attributes:_objectSpread2(_objectSpread2({},ot),{},{cx:"256",cy:"364",r:"28"}),children:[]};return st||rc.children.push({tag:"animate",attributes:_objectSpread2(_objectSpread2({},ut),{},{attributeName:"r",values:"28;14;28;28;14;28;"})},{tag:"animate",attributes:_objectSpread2(_objectSpread2({},Hl),{},{values:"1;0;1;1;0;1;"})}),at.push(rc),at.push({tag:"path",attributes:_objectSpread2(_objectSpread2({},ot),{},{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),children:st?[]:[{tag:"animate",attributes:_objectSpread2(_objectSpread2({},Hl),{},{values:"1;0;0;0;0;1;"})}]}),st||at.push({tag:"path",attributes:_objectSpread2(_objectSpread2({},ot),{},{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),children:[{tag:"animate",attributes:_objectSpread2(_objectSpread2({},Hl),{},{values:"0;0;1;1;0;0;"})}]}),{tag:"g",attributes:{class:"missing"},children:at}}}};!function(at,st){let{mixoutsTo:ot}=st;Ap=at,Ep={},Object.keys(Dp).forEach((at=>{-1===Lp.indexOf(at)&&delete Dp[at]})),Ap.forEach((at=>{const st=at.mixout?at.mixout():{};if(Object.keys(st).forEach((at=>{"function"===typeof st[at]&&(ot[at]=st[at]),"object"===typeof st[at]&&Object.keys(st[at]).forEach((ut=>{ot[at]||(ot[at]={}),ot[at][ut]=st[at][ut]}))})),at.hooks){const st=at.hooks();Object.keys(st).forEach((at=>{Ep[at]||(Ep[at]=[]),Ep[at].push(st[at])}))}at.provides&&at.provides(Dp)}))}([Rd,Yp,Qp,Kp,Xp,nm,am,sm,lm,cm,{hooks:()=>({parseNodeAttributes(at,st){const ot=st.getAttribute("data-fa-symbol"),ut=null!==ot&&(""===ot||ot);return at.symbol=ut,at}})}],{mixoutsTo:Fp});const um=Fp.icon},7929:(at,st,ot)=>{"use strict";ot.d(st,{iW_:()=>Hl});
/*!
 * Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 * Copyright 2024 Fonticons, Inc.
 */
const ut={prefix:"fas",iconName:"circle-info",icon:[512,512,["info-circle"],"f05a","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512zM216 336l24 0 0-64-24 0c-13.3 0-24-10.7-24-24s10.7-24 24-24l48 0c13.3 0 24 10.7 24 24l0 88 8 0c13.3 0 24 10.7 24 24s-10.7 24-24 24l-80 0c-13.3 0-24-10.7-24-24s10.7-24 24-24zm40-208a32 32 0 1 1 0 64 32 32 0 1 1 0-64z"]},Hl=ut},4161:(at,st,ot)=>{"use strict";ot.d(st,{AH:()=>i,Rf:()=>S,iz:()=>r,sk:()=>oc});
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const ut=globalThis,Hl=ut.ShadowRoot&&(void 0===ut.ShadyCSS||ut.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,rc=Symbol(),sc=new WeakMap;class n{constructor(at,st,ot){if(this._$cssResult$=!0,ot!==rc)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=at,this.t=st}get styleSheet(){let at=this.o;const st=this.t;if(Hl&&void 0===at){const ot=void 0!==st&&1===st.length;ot&&(at=sc.get(st)),void 0===at&&((this.o=at=new CSSStyleSheet).replaceSync(this.cssText),ot&&sc.set(st,at))}return at}toString(){return this.cssText}}const r=at=>new n("string"==typeof at?at:at+"",void 0,rc),i=function(at){for(var st=arguments.length,ot=new Array(st>1?st-1:0),ut=1;ut<st;ut++)ot[ut-1]=arguments[ut];const Hl=1===at.length?at[0]:ot.reduce(((st,ot,ut)=>st+(at=>{if(!0===at._$cssResult$)return at.cssText;if("number"==typeof at)return at;throw Error("Value passed to 'css' function must be a 'css' function result: "+at+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(ot)+at[ut+1]),at[0]);return new n(Hl,at,rc)},S=(at,st)=>{if(Hl)at.adoptedStyleSheets=st.map((at=>at instanceof CSSStyleSheet?at:at.styleSheet));else for(const ot of st){const st=document.createElement("style"),Hl=ut.litNonce;void 0!==Hl&&st.setAttribute("nonce",Hl),st.textContent=ot.cssText,at.appendChild(st)}},oc=Hl?at=>at:at=>at instanceof CSSStyleSheet?(at=>{let st="";for(const ot of at.cssRules)st+=ot.cssText;return r(st)})(at):at},8789:(at,st,ot)=>{"use strict";ot.d(st,{AH:()=>ut.AH,iz:()=>ut.iz,mN:()=>b});var ut=ot(4161);
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const{is:Hl,defineProperty:rc,getOwnPropertyDescriptor:sc,getOwnPropertyNames:oc,getOwnPropertySymbols:_c,getPrototypeOf:wc}=Object,Sc=globalThis,iu=Sc.trustedTypes,su=iu?iu.emptyScript:"",lu=Sc.reactiveElementPolyfillSupport,d=(at,st)=>at,cu={toAttribute(at,st){switch(st){case Boolean:at=at?su:null;break;case Object:case Array:at=null==at?at:JSON.stringify(at)}return at},fromAttribute(at,st){let ot=at;switch(st){case Boolean:ot=null!==at;break;case Number:ot=null===at?null:Number(at);break;case Object:case Array:try{ot=JSON.parse(at)}catch(at){ot=null}}return ot}},f=(at,st)=>!Hl(at,st),uu={attribute:!0,type:String,converter:cu,reflect:!1,hasChanged:f};Symbol.metadata??=Symbol("metadata"),Sc.litPropertyMetadata??=new WeakMap;class b extends HTMLElement{static addInitializer(at){this._$Ei(),(this.l??=[]).push(at)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(at,st){if(void 0===st&&(st=uu),st.state&&(st.attribute=!1),this._$Ei(),this.elementProperties.set(at,st),!st.noAccessor){const ot=Symbol(),ut=this.getPropertyDescriptor(at,ot,st);void 0!==ut&&rc(this.prototype,at,ut)}}static getPropertyDescriptor(at,st,ot){const{get:ut,set:Hl}=sc(this.prototype,at)??{get(){return this[st]},set(at){this[st]=at}};return{get(){return ut?.call(this)},set(st){const rc=ut?.call(this);Hl.call(this,st),this.requestUpdate(at,rc,ot)},configurable:!0,enumerable:!0}}static getPropertyOptions(at){return this.elementProperties.get(at)??uu}static _$Ei(){if(this.hasOwnProperty(d("elementProperties")))return;const at=wc(this);at.finalize(),void 0!==at.l&&(this.l=[...at.l]),this.elementProperties=new Map(at.elementProperties)}static finalize(){if(this.hasOwnProperty(d("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(d("properties"))){const at=this.properties,st=[...oc(at),..._c(at)];for(const ot of st)this.createProperty(ot,at[ot])}const at=this[Symbol.metadata];if(null!==at){const st=litPropertyMetadata.get(at);if(void 0!==st)for(const[at,ot]of st)this.elementProperties.set(at,ot)}this._$Eh=new Map;for(const[st,ot]of this.elementProperties){const at=this._$Eu(st,ot);void 0!==at&&this._$Eh.set(at,st)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(at){const st=[];if(Array.isArray(at)){const ot=new Set(at.flat(1/0).reverse());for(const at of ot)st.unshift((0,ut.sk)(at))}else void 0!==at&&st.push((0,ut.sk)(at));return st}static _$Eu(at,st){const ot=st.attribute;return!1===ot?void 0:"string"==typeof ot?ot:"string"==typeof at?at.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise((at=>this.enableUpdating=at)),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach((at=>at(this)))}addController(at){(this._$EO??=new Set).add(at),void 0!==this.renderRoot&&this.isConnected&&at.hostConnected?.()}removeController(at){this._$EO?.delete(at)}_$E_(){const at=new Map,st=this.constructor.elementProperties;for(const ot of st.keys())this.hasOwnProperty(ot)&&(at.set(ot,this[ot]),delete this[ot]);at.size>0&&(this._$Ep=at)}createRenderRoot(){const at=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return(0,ut.Rf)(at,this.constructor.elementStyles),at}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach((at=>at.hostConnected?.()))}enableUpdating(at){}disconnectedCallback(){this._$EO?.forEach((at=>at.hostDisconnected?.()))}attributeChangedCallback(at,st,ot){this._$AK(at,ot)}_$EC(at,st){const ot=this.constructor.elementProperties.get(at),ut=this.constructor._$Eu(at,ot);if(void 0!==ut&&!0===ot.reflect){const Hl=(void 0!==ot.converter?.toAttribute?ot.converter:cu).toAttribute(st,ot.type);this._$Em=at,null==Hl?this.removeAttribute(ut):this.setAttribute(ut,Hl),this._$Em=null}}_$AK(at,st){const ot=this.constructor,ut=ot._$Eh.get(at);if(void 0!==ut&&this._$Em!==ut){const at=ot.getPropertyOptions(ut),Hl="function"==typeof at.converter?{fromAttribute:at.converter}:void 0!==at.converter?.fromAttribute?at.converter:cu;this._$Em=ut,this[ut]=Hl.fromAttribute(st,at.type),this._$Em=null}}requestUpdate(at,st,ot){if(void 0!==at){if(ot??=this.constructor.getPropertyOptions(at),!(ot.hasChanged??f)(this[at],st))return;this.P(at,st,ot)}!1===this.isUpdatePending&&(this._$ES=this._$ET())}P(at,st,ot){this._$AL.has(at)||this._$AL.set(at,st),!0===ot.reflect&&this._$Em!==at&&(this._$Ej??=new Set).add(at)}async _$ET(){this.isUpdatePending=!0;try{await this._$ES}catch(at){Promise.reject(at)}const at=this.scheduleUpdate();return null!=at&&await at,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(const[at,st]of this._$Ep)this[at]=st;this._$Ep=void 0}const at=this.constructor.elementProperties;if(at.size>0)for(const[st,ot]of at)!0!==ot.wrapped||this._$AL.has(st)||void 0===this[st]||this.P(st,this[st],ot)}let at=!1;const st=this._$AL;try{at=this.shouldUpdate(st),at?(this.willUpdate(st),this._$EO?.forEach((at=>at.hostUpdate?.())),this.update(st)):this._$EU()}catch(st){throw at=!1,this._$EU(),st}at&&this._$AE(st)}willUpdate(at){}_$AE(at){this._$EO?.forEach((at=>at.hostUpdated?.())),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(at)),this.updated(at)}_$EU(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(at){return!0}update(at){this._$Ej&&=this._$Ej.forEach((at=>this._$EC(at,this[at]))),this._$EU()}updated(at){}firstUpdated(at){}}b.elementStyles=[],b.shadowRootOptions={mode:"open"},b[d("elementProperties")]=new Map,b[d("finalized")]=new Map,lu?.({ReactiveElement:b}),(Sc.reactiveElementVersions??=[]).push("2.0.4")},8983:(at,st,ot)=>{"use strict";ot.d(st,{c8:()=>yd});
/**
* (c) Iconify
*
* For the full copyright and license information, please view the license.txt
* files at https://github.com/iconify/iconify
*
* Licensed under MIT.
*
* @license MIT
* @version 3.0.0
*/
const ut=Object.freeze({left:0,top:0,width:16,height:16}),Hl=Object.freeze({rotate:0,vFlip:!1,hFlip:!1}),rc=Object.freeze({...ut,...Hl}),sc=Object.freeze({...rc,body:"",hidden:!1}),oc=Object.freeze({width:null,height:null}),_c=Object.freeze({...oc,...Hl});const wc=/[\s,]+/;const Sc={..._c,preserveAspectRatio:""};function getCustomisations(at){const st={...Sc},attr=(st,ot)=>at.getAttribute(st)||ot;var ot;return st.width=attr("width",null),st.height=attr("height",null),st.rotate=function(at,st){void 0===st&&(st=0);const ot=at.replace(/^-?[0-9.]*/,"");function cleanup(at){for(;at<0;)at+=4;return at%4}if(""===ot){const st=parseInt(at);return isNaN(st)?0:cleanup(st)}if(ot!==at){let st=0;switch(ot){case"%":st=25;break;case"deg":st=90}if(st){let ut=parseFloat(at.slice(0,at.length-ot.length));return isNaN(ut)?0:(ut/=st,ut%1===0?cleanup(ut):0)}}return st}(attr("rotate","")),ot=st,attr("flip","").split(wc).forEach((at=>{switch(at.trim()){case"horizontal":ot.hFlip=!0;break;case"vertical":ot.vFlip=!0}})),st.preserveAspectRatio=attr("preserveAspectRatio",attr("preserveaspectratio","")),st}const iu=/^[a-z0-9]+(-[a-z0-9]+)*$/,stringToIcon=function(at,st,ot,ut){void 0===ut&&(ut="");const Hl=at.split(":");if("@"===at.slice(0,1)){if(Hl.length<2||Hl.length>3)return null;ut=Hl.shift().slice(1)}if(Hl.length>3||!Hl.length)return null;if(Hl.length>1){const at=Hl.pop(),ot=Hl.pop(),rc={provider:Hl.length>0?Hl[0]:ut,prefix:ot,name:at};return st&&!validateIconName(rc)?null:rc}const rc=Hl[0],sc=rc.split("-");if(sc.length>1){const at={provider:ut,prefix:sc.shift(),name:sc.join("-")};return st&&!validateIconName(at)?null:at}if(ot&&""===ut){const at={provider:ut,prefix:"",name:rc};return st&&!validateIconName(at,ot)?null:at}return null},validateIconName=(at,st)=>!!at&&!(!(st&&""===at.prefix||at.prefix)||!at.name);function mergeIconData(at,st){const ot=function(at,st){const ot={};!at.hFlip!==!st.hFlip&&(ot.hFlip=!0),!at.vFlip!==!st.vFlip&&(ot.vFlip=!0);const ut=((at.rotate||0)+(st.rotate||0))%4;return ut&&(ot.rotate=ut),ot}(at,st);for(const ut in sc)ut in Hl?ut in at&&!(ut in ot)&&(ot[ut]=Hl[ut]):ut in st?ot[ut]=st[ut]:ut in at&&(ot[ut]=at[ut]);return ot}function internalGetIconData(at,st,ot){const ut=at.icons,Hl=at.aliases||Object.create(null);let rc={};function parse(at){rc=mergeIconData(ut[at]||Hl[at],rc)}return parse(st),ot.forEach(parse),mergeIconData(at,rc)}function parseIconSet(at,st){const ot=[];if("object"!==typeof at||"object"!==typeof at.icons)return ot;at.not_found instanceof Array&&at.not_found.forEach((at=>{st(at,null),ot.push(at)}));const ut=function(at){const st=at.icons,ot=at.aliases||Object.create(null),ut=Object.create(null);return Object.keys(st).concat(Object.keys(ot)).forEach((function resolve(at){if(st[at])return ut[at]=[];if(!(at in ut)){ut[at]=null;const st=ot[at]&&ot[at].parent,Hl=st&&resolve(st);Hl&&(ut[at]=[st].concat(Hl))}return ut[at]})),ut}(at);for(const Hl in ut){const rc=ut[Hl];rc&&(st(Hl,internalGetIconData(at,Hl,rc)),ot.push(Hl))}return ot}const su={provider:"",aliases:{},not_found:{},...ut};function checkOptionalProps(at,st){for(const ot in st)if(ot in at&&typeof at[ot]!==typeof st[ot])return!1;return!0}function quicklyValidateIconSet(at){if("object"!==typeof at||null===at)return null;const st=at;if("string"!==typeof st.prefix||!at.icons||"object"!==typeof at.icons)return null;if(!checkOptionalProps(at,su))return null;const ot=st.icons;for(const Hl in ot){const at=ot[Hl];if(!Hl||"string"!==typeof at.body||!checkOptionalProps(at,sc))return null}const ut=st.aliases||Object.create(null);for(const Hl in ut){const at=ut[Hl],st=at.parent;if(!Hl||"string"!==typeof st||!ot[st]&&!ut[st]||!checkOptionalProps(at,sc))return null}return st}const lu=Object.create(null);function getStorage(at,st){const ot=lu[at]||(lu[at]=Object.create(null));return ot[st]||(ot[st]=function(at,st){return{provider:at,prefix:st,icons:Object.create(null),missing:new Set}}(at,st))}function addIconSet(at,st){return quicklyValidateIconSet(st)?parseIconSet(st,((st,ot)=>{ot?at.icons[st]=ot:at.missing.add(st)})):[]}function listIcons$1(at,st){let ot=[];return("string"===typeof at?[at]:Object.keys(lu)).forEach((at=>{("string"===typeof at&&"string"===typeof st?[st]:Object.keys(lu[at]||{})).forEach((st=>{const ut=getStorage(at,st);ot=ot.concat(Object.keys(ut.icons).map((ot=>(""!==at?"@"+at+":":"")+st+":"+ot)))}))})),ot}let cu=!1;function allowSimpleNames(at){return"boolean"===typeof at&&(cu=at),cu}function getIconData(at){const st="string"===typeof at?stringToIcon(at,!0,cu):at;if(st){const at=getStorage(st.provider,st.prefix),ot=st.name;return at.icons[ot]||(at.missing.has(ot)?null:void 0)}}function addIcon$1(at,st){const ot=stringToIcon(at,!0,cu);if(!ot)return!1;const ut=getStorage(ot.provider,ot.prefix);return st?function(at,st,ot){try{if("string"===typeof ot.body)return at.icons[st]={...ot},!0}catch(ut){}return!1}(ut,ot.name,st):(ut.missing.add(ot.name),!0)}function addCollection$1(at,st){if("object"!==typeof at)return!1;if("string"!==typeof st&&(st=at.provider||""),cu&&!st&&!at.prefix){let st=!1;return quicklyValidateIconSet(at)&&(at.prefix="",parseIconSet(at,((at,ot)=>{addIcon$1(at,ot)&&(st=!0)}))),st}const ot=at.prefix;if(!validateIconName({prefix:ot,name:"a"}))return!1;return!!addIconSet(getStorage(st,ot),at)}function iconLoaded$1(at){return!!getIconData(at)}function getIcon$1(at){const st=getIconData(at);return st?{...rc,...st}:st}function removeCallback(at,st){at.forEach((at=>{const ot=at.loaderCallbacks;ot&&(at.loaderCallbacks=ot.filter((at=>at.id!==st)))}))}let uu=0;const pu=Object.create(null);function setAPIModule(at,st){pu[at]=st}function getAPIModule(at){return pu[at]||pu[""]}var mu={resources:[],index:0,timeout:2e3,rotate:750,random:!1,dataAfterTimeout:!1};function sendQuery(at,st,ot,ut){const Hl=at.resources.length,rc=at.random?Math.floor(Math.random()*Hl):at.index;let sc;if(at.random){let st=at.resources.slice(0);for(sc=[];st.length>1;){const at=Math.floor(Math.random()*st.length);sc.push(st[at]),st=st.slice(0,at).concat(st.slice(at+1))}sc=sc.concat(st)}else sc=at.resources.slice(rc).concat(at.resources.slice(0,rc));const oc=Date.now();let _c,wc="pending",Sc=0,iu=null,su=[],lu=[];function resetTimer(){iu&&(clearTimeout(iu),iu=null)}function abort(){"pending"===wc&&(wc="aborted"),resetTimer(),su.forEach((at=>{"pending"===at.status&&(at.status="aborted")})),su=[]}function subscribe(at,st){st&&(lu=[]),"function"===typeof at&&lu.push(at)}function failQuery(){wc="failed",lu.forEach((at=>{at(void 0,_c)}))}function clearQueue(){su.forEach((at=>{"pending"===at.status&&(at.status="aborted")})),su=[]}function execNext(){if("pending"!==wc)return;resetTimer();const ut=sc.shift();if(void 0===ut)return su.length?void(iu=setTimeout((()=>{resetTimer(),"pending"===wc&&(clearQueue(),failQuery())}),at.timeout)):void failQuery();const Hl={status:"pending",resource:ut,callback:(st,ot)=>{!function(st,ot,ut){const Hl="success"!==ot;switch(su=su.filter((at=>at!==st)),wc){case"pending":break;case"failed":if(Hl||!at.dataAfterTimeout)return;break;default:return}if("abort"===ot)return _c=ut,void failQuery();if(Hl)return _c=ut,void(su.length||(sc.length?execNext():failQuery()));if(resetTimer(),clearQueue(),!at.random){const ot=at.resources.indexOf(st.resource);-1!==ot&&ot!==at.index&&(at.index=ot)}wc="completed",lu.forEach((at=>{at(ut)}))}(Hl,st,ot)}};su.push(Hl),Sc++,iu=setTimeout(execNext,at.rotate),ot(ut,st,Hl.callback)}return"function"===typeof ut&&lu.push(ut),setTimeout(execNext),function(){return{startTime:oc,payload:st,status:wc,queriesSent:Sc,queriesPending:su.length,subscribe:subscribe,abort:abort}}}function initRedundancy(at){const st={...mu,...at};let ot=[];function cleanup(){ot=ot.filter((at=>"pending"===at().status))}return{query:function(at,ut,Hl){const rc=sendQuery(st,at,ut,((at,st)=>{cleanup(),Hl&&Hl(at,st)}));return ot.push(rc),rc},find:function(at){return ot.find((st=>at(st)))||null},setIndex:at=>{st.index=at},getIndex:()=>st.index,cleanup:cleanup}}function createAPIConfig(at){let st;if("string"===typeof at.resources)st=[at.resources];else if(st=at.resources,!(st instanceof Array)||!st.length)return null;return{resources:st,path:at.path||"/",maxURL:at.maxURL||500,rotate:at.rotate||750,timeout:at.timeout||5e3,random:!0===at.random,index:at.index||0,dataAfterTimeout:!1!==at.dataAfterTimeout}}const gu=Object.create(null),Au=["https://api.simplesvg.com","https://api.unisvg.com"],yu=[];for(;Au.length>0;)1===Au.length||Math.random()>.5?yu.push(Au.shift()):yu.push(Au.pop());function addAPIProvider$1(at,st){const ot=createAPIConfig(st);return null!==ot&&(gu[at]=ot,!0)}function getAPIConfig(at){return gu[at]}function listAPIProviders(){return Object.keys(gu)}function emptyCallback$1(){}gu[""]=createAPIConfig({resources:["https://api.iconify.design"].concat(yu)});const _u=Object.create(null);function sendAPIQuery(at,st,ot){let ut,Hl;if("string"===typeof at){const st=getAPIModule(at);if(!st)return ot(void 0,424),emptyCallback$1;Hl=st.send;const rc=function(at){if(!_u[at]){const st=getAPIConfig(at);if(!st)return;const ot={config:st,redundancy:initRedundancy(st)};_u[at]=ot}return _u[at]}(at);rc&&(ut=rc.redundancy)}else{const st=createAPIConfig(at);if(st){ut=initRedundancy(st);const ot=getAPIModule(at.resources?at.resources[0]:"");ot&&(Hl=ot.send)}}return ut&&Hl?ut.query(st,Hl,ot)().abort:(ot(void 0,424),emptyCallback$1)}function emptyCallback(){}function loadedNewIcons(at){at.iconsLoaderFlag||(at.iconsLoaderFlag=!0,setTimeout((()=>{at.iconsLoaderFlag=!1,function(at){at.pendingCallbacksFlag||(at.pendingCallbacksFlag=!0,setTimeout((()=>{at.pendingCallbacksFlag=!1;const st=at.loaderCallbacks?at.loaderCallbacks.slice(0):[];if(!st.length)return;let ot=!1;const ut=at.provider,Hl=at.prefix;st.forEach((st=>{const rc=st.icons,sc=rc.pending.length;rc.pending=rc.pending.filter((st=>{if(st.prefix!==Hl)return!0;const sc=st.name;if(at.icons[sc])rc.loaded.push({provider:ut,prefix:Hl,name:sc});else{if(!at.missing.has(sc))return ot=!0,!0;rc.missing.push({provider:ut,prefix:Hl,name:sc})}return!1})),rc.pending.length!==sc&&(ot||removeCallback([at],st.id),st.callback(rc.loaded.slice(0),rc.missing.slice(0),rc.pending.slice(0),st.abort))}))})))}(at)})))}function parseLoaderResponse(at,st,ot){function checkMissing(){const ot=at.pendingIcons;st.forEach((st=>{ot&&ot.delete(st),at.icons[st]||at.missing.add(st)}))}if(ot&&"object"===typeof ot)try{if(!addIconSet(at,ot).length)return void checkMissing()}catch(ut){console.error(ut)}checkMissing(),loadedNewIcons(at)}function parsePossiblyAsyncResponse(at,st){at instanceof Promise?at.then((at=>{st(at)})).catch((()=>{st(null)})):st(at)}function loadNewIcons(at,st){at.iconsToLoad?at.iconsToLoad=at.iconsToLoad.concat(st).sort():at.iconsToLoad=st,at.iconsQueueFlag||(at.iconsQueueFlag=!0,setTimeout((()=>{at.iconsQueueFlag=!1;const{provider:st,prefix:ot}=at,ut=at.iconsToLoad;if(delete at.iconsToLoad,!ut||!ut.length)return;const Hl=at.loadIcon;if(at.loadIcons&&(ut.length>1||!Hl))return void parsePossiblyAsyncResponse(at.loadIcons(ut,ot,st),(st=>{parseLoaderResponse(at,ut,st)}));if(Hl)return void ut.forEach((ut=>{parsePossiblyAsyncResponse(Hl(ut,ot,st),(st=>{parseLoaderResponse(at,[ut],st?{prefix:ot,icons:{[ut]:st}}:null)}))}));const{valid:rc,invalid:sc}=function(at){const st=[],ot=[];return at.forEach((at=>{(at.match(iu)?st:ot).push(at)})),{valid:st,invalid:ot}}(ut);if(sc.length&&parseLoaderResponse(at,sc,null),!rc.length)return;const oc=ot.match(iu)?getAPIModule(st):null;if(!oc)return void parseLoaderResponse(at,rc,null);oc.prepare(st,ot,rc).forEach((ot=>{sendAPIQuery(st,ot,(st=>{parseLoaderResponse(at,ot.icons,st)}))}))})))}const loadIcons$1=(at,st)=>{const ot=function(at,st,ot){void 0===st&&(st=!0),void 0===ot&&(ot=!1);const ut=[];return at.forEach((at=>{const Hl="string"===typeof at?stringToIcon(at,st,ot):at;Hl&&ut.push(Hl)})),ut}(at,!0,allowSimpleNames()),ut=function(at){const st={loaded:[],missing:[],pending:[]},ot=Object.create(null);at.sort(((at,st)=>at.provider!==st.provider?at.provider.localeCompare(st.provider):at.prefix!==st.prefix?at.prefix.localeCompare(st.prefix):at.name.localeCompare(st.name)));let ut={provider:"",prefix:"",name:""};return at.forEach((at=>{if(ut.name===at.name&&ut.prefix===at.prefix&&ut.provider===at.provider)return;ut=at;const Hl=at.provider,rc=at.prefix,sc=at.name,oc=ot[Hl]||(ot[Hl]=Object.create(null)),_c=oc[rc]||(oc[rc]=getStorage(Hl,rc));let wc;wc=sc in _c.icons?st.loaded:""===rc||_c.missing.has(sc)?st.missing:st.pending;const Sc={provider:Hl,prefix:rc,name:sc};wc.push(Sc)})),st}(ot);if(!ut.pending.length){let at=!0;return st&&setTimeout((()=>{at&&st(ut.loaded,ut.missing,ut.pending,emptyCallback)})),()=>{at=!1}}const Hl=Object.create(null),rc=[];let sc,oc;return ut.pending.forEach((at=>{const{provider:st,prefix:ot}=at;if(ot===oc&&st===sc)return;sc=st,oc=ot,rc.push(getStorage(st,ot));const ut=Hl[st]||(Hl[st]=Object.create(null));ut[ot]||(ut[ot]=[])})),ut.pending.forEach((at=>{const{provider:st,prefix:ot,name:ut}=at,rc=getStorage(st,ot),sc=rc.pendingIcons||(rc.pendingIcons=new Set);sc.has(ut)||(sc.add(ut),Hl[st][ot].push(ut))})),rc.forEach((at=>{const st=Hl[at.provider][at.prefix];st.length&&loadNewIcons(at,st)})),st?function(at,st,ot){const ut=uu++,Hl=removeCallback.bind(null,ot,ut);if(!st.pending.length)return Hl;const rc={id:ut,icons:st,callback:at,abort:Hl};return ot.forEach((at=>{(at.loaderCallbacks||(at.loaderCallbacks=[])).push(rc)})),Hl}(st,ut,rc):emptyCallback},loadIcon$1=at=>new Promise(((st,ot)=>{const ut="string"===typeof at?stringToIcon(at,!0):at;ut?loadIcons$1([ut||at],(Hl=>{if(Hl.length&&ut){const at=getIconData(ut);if(at)return void st({...rc,...at})}ot(at)})):ot(at)}));function testIconObject(at){try{const st="string"===typeof at?JSON.parse(at):at;if("string"===typeof st.body)return{...st}}catch(st){}}let xu=!1;try{xu=0===navigator.vendor.indexOf("Apple")}catch(bd){}const Su=/(-?[0-9.]*[0-9]+[0-9.]*)/g,Du=/^-?[0-9.]*[0-9]+[0-9.]*$/g;function calculateSize$1(at,st,ot){if(1===st)return at;if(ot=ot||100,"number"===typeof at)return Math.ceil(at*st*ot)/ot;if("string"!==typeof at)return at;const ut=at.split(Su);if(null===ut||!ut.length)return at;const Hl=[];let rc=ut.shift(),sc=Du.test(rc);for(;;){if(sc){const at=parseFloat(rc);isNaN(at)?Hl.push(rc):Hl.push(Math.ceil(at*st*ot)/ot)}else Hl.push(rc);if(rc=ut.shift(),void 0===rc)return Hl.join("");sc=!sc}}function iconToSVG(at,st){const ot={...rc,...at},ut={..._c,...st},Hl={left:ot.left,top:ot.top,width:ot.width,height:ot.height};let sc=ot.body;[ot,ut].forEach((at=>{const st=[],ot=at.hFlip,ut=at.vFlip;let rc,oc=at.rotate;switch(ot?ut?oc+=2:(st.push("translate("+(Hl.width+Hl.left).toString()+" "+(0-Hl.top).toString()+")"),st.push("scale(-1 1)"),Hl.top=Hl.left=0):ut&&(st.push("translate("+(0-Hl.left).toString()+" "+(Hl.height+Hl.top).toString()+")"),st.push("scale(1 -1)"),Hl.top=Hl.left=0),oc<0&&(oc-=4*Math.floor(oc/4)),oc%=4,oc){case 1:rc=Hl.height/2+Hl.top,st.unshift("rotate(90 "+rc.toString()+" "+rc.toString()+")");break;case 2:st.unshift("rotate(180 "+(Hl.width/2+Hl.left).toString()+" "+(Hl.height/2+Hl.top).toString()+")");break;case 3:rc=Hl.width/2+Hl.left,st.unshift("rotate(-90 "+rc.toString()+" "+rc.toString()+")")}oc%2===1&&(Hl.left!==Hl.top&&(rc=Hl.left,Hl.left=Hl.top,Hl.top=rc),Hl.width!==Hl.height&&(rc=Hl.width,Hl.width=Hl.height,Hl.height=rc)),st.length&&(sc=function(at,st,ot){const ut=function(at,st){void 0===st&&(st="defs");let ot="";const ut=at.indexOf("<"+st);for(;ut>=0;){const Hl=at.indexOf(">",ut),rc=at.indexOf("</"+st);if(-1===Hl||-1===rc)break;const sc=at.indexOf(">",rc);if(-1===sc)break;ot+=at.slice(Hl+1,rc).trim(),at=at.slice(0,ut).trim()+at.slice(sc+1)}return{defs:ot,content:at}}(at);return Hl=ut.defs,rc=st+ut.content+ot,Hl?"<defs>"+Hl+"</defs>"+rc:rc;var Hl,rc}(sc,'<g transform="'+st.join(" ")+'">',"</g>"))}));const oc=ut.width,wc=ut.height,Sc=Hl.width,iu=Hl.height;let su,lu;null===oc?(lu=null===wc?"1em":"auto"===wc?iu:wc,su=calculateSize$1(lu,Sc/iu)):(su="auto"===oc?Sc:oc,lu=null===wc?calculateSize$1(su,iu/Sc):"auto"===wc?iu:wc);const cu={},setAttr=(at,st)=>{(at=>"unset"===at||"undefined"===at||"none"===at)(st)||(cu[at]=st.toString())};setAttr("width",su),setAttr("height",lu);const uu=[Hl.left,Hl.top,Sc,iu];return cu.viewBox=uu.join(" "),{attributes:cu,viewBox:uu,body:sc}}function iconToHTML$1(at,st){let ot=-1===at.indexOf("xlink:")?"":' xmlns:xlink="http://www.w3.org/1999/xlink"';for(const ut in st)ot+=" "+ut+'="'+st[ut]+'"';return'<svg xmlns="http://www.w3.org/2000/svg"'+ot+">"+at+"</svg>"}function svgToURL$1(at){return'url("'+function(at){return"data:image/svg+xml,"+function(at){return at.replace(/"/g,"'").replace(/%/g,"%25").replace(/#/g,"%23").replace(/</g,"%3C").replace(/>/g,"%3E").replace(/\s+/g," ")}(at)}(at)+'")'}let Lu=(()=>{let at;try{if(at=fetch,"function"===typeof at)return at}catch(bd){}})();function setFetch(at){Lu=at}function getFetch(){return Lu}const $u={prepare:(at,st,ot)=>{const ut=[],Hl=function(at,st){const ot=getAPIConfig(at);if(!ot)return 0;let ut;if(ot.maxURL){let at=0;ot.resources.forEach((st=>{const ot=st;at=Math.max(at,ot.length)}));const Hl=st+".json?icons=";ut=ot.maxURL-at-ot.path.length-Hl.length}else ut=0;return ut}(at,st),rc="icons";let sc={type:rc,provider:at,prefix:st,icons:[]},oc=0;return ot.forEach(((ot,_c)=>{oc+=ot.length+1,oc>=Hl&&_c>0&&(ut.push(sc),sc={type:rc,provider:at,prefix:st,icons:[]},oc=ot.length),sc.icons.push(ot)})),ut.push(sc),ut},send:(at,st,ot)=>{if(!Lu)return void ot("abort",424);let ut=function(at){if("string"===typeof at){const st=getAPIConfig(at);if(st)return st.path}return"/"}(st.provider);switch(st.type){case"icons":{const at=st.prefix,ot=st.icons.join(",");ut+=at+".json?"+new URLSearchParams({icons:ot}).toString();break}case"custom":{const at=st.uri;ut+="/"===at.slice(0,1)?at.slice(1):at;break}default:return void ot("abort",400)}let Hl=503;Lu(at+ut).then((at=>{const st=at.status;if(200===st)return Hl=501,at.json();setTimeout((()=>{ot(function(at){return 404===at}(st)?"abort":"next",st)}))})).then((at=>{"object"===typeof at&&null!==at?setTimeout((()=>{ot("success",at)})):setTimeout((()=>{404===at?ot("abort",at):ot("next",Hl)}))})).catch((()=>{ot("next",Hl)}))}};function setCustomIconsLoader$1(at,st,ot){getStorage(ot||"",st).loadIcons=at}function setCustomIconLoader$1(at,st,ot){getStorage(ot||"",st).loadIcon=at}const hh="data-style";let ed="";function appendCustomStyle(at){ed=at}function updateStyle(at,st){let ot=Array.from(at.childNodes).find((at=>at.hasAttribute&&at.hasAttribute(hh)));ot||(ot=document.createElement("style"),ot.setAttribute(hh,hh),at.appendChild(ot)),ot.textContent=":host{display:inline-block;vertical-align:"+(st?"-0.125em":"0")+"}span,svg{display:block;margin:auto}"+ed}function exportFunctions(){let at;setAPIModule("",$u),allowSimpleNames(!0);try{at=window}catch(bd){}if(at){if(void 0!==at.IconifyPreload){const st=at.IconifyPreload,ot="Invalid IconifyPreload syntax.";"object"===typeof st&&null!==st&&(st instanceof Array?st:[st]).forEach((at=>{try{("object"!==typeof at||null===at||at instanceof Array||"object"!==typeof at.icons||"string"!==typeof at.prefix||!addCollection$1(at))&&console.error(ot)}catch(st){console.error(ot)}}))}if(void 0!==at.IconifyProviders){const ot=at.IconifyProviders;if("object"===typeof ot&&null!==ot)for(const at in ot){const ut="IconifyProviders["+at+"] is invalid.";try{const st=ot[at];if("object"!==typeof st||!st||void 0===st.resources)continue;addAPIProvider$1(at,st)||console.error(ut)}catch(st){console.error(ut)}}}}return{iconLoaded:iconLoaded$1,getIcon:getIcon$1,listIcons:listIcons$1,addIcon:addIcon$1,addCollection:addCollection$1,calculateSize:calculateSize$1,buildIcon:iconToSVG,iconToHTML:iconToHTML$1,svgToURL:svgToURL$1,loadIcons:loadIcons$1,loadIcon:loadIcon$1,addAPIProvider:addAPIProvider$1,setCustomIconLoader:setCustomIconLoader$1,setCustomIconsLoader:setCustomIconsLoader$1,appendCustomStyle:appendCustomStyle,_api:{getAPIConfig:getAPIConfig,setAPIModule:setAPIModule,sendAPIQuery:sendAPIQuery,setFetch:setFetch,getFetch:getFetch,listAPIProviders:listAPIProviders}}}const td={"background-color":"currentColor"},id={"background-color":"transparent"},nd={image:"var(--svg)",repeat:"no-repeat",size:"100% 100%"},rd={"-webkit-mask":td,mask:td,background:id};for(const wd in rd){const at=rd[wd];for(const st in nd)at[wd+"-"+st]=nd[st]}function fixSize(at){return at?at+(at.match(/^[-0-9.]+$/)?"px":""):"inherit"}let ad;function cleanUpInnerHTML(at){return void 0===ad&&function(){try{ad=window.trustedTypes.createPolicy("iconify",{createHTML:at=>at})}catch(bd){ad=null}}(),ad?ad.createHTML(at):at}function findIconElement(at){return Array.from(at.childNodes).find((at=>{const st=at.tagName&&at.tagName.toUpperCase();return"SPAN"===st||"SVG"===st}))}function renderIcon(at,st){const ot=st.icon.data,ut=st.customisations,Hl=iconToSVG(ot,ut);ut.preserveAspectRatio&&(Hl.attributes.preserveAspectRatio=ut.preserveAspectRatio);const sc=st.renderedMode;let oc;if("svg"===sc)oc=function(at){const st=document.createElement("span"),ot=at.attributes;let ut="";ot.width||(ut="width: inherit;"),ot.height||(ut+="height: inherit;"),ut&&(ot.style=ut);const Hl=iconToHTML$1(at.body,ot);return st.innerHTML=cleanUpInnerHTML(Hl),st.firstChild}(Hl);else oc=function(at,st,ot){const ut=document.createElement("span");let Hl=at.body;-1!==Hl.indexOf("<a")&&(Hl+="\x3c!-- "+Date.now()+" --\x3e");const rc=at.attributes,sc=svgToURL$1(iconToHTML$1(Hl,{...rc,width:st.width+"",height:st.height+""})),oc=ut.style,_c={"--svg":sc,width:fixSize(rc.width),height:fixSize(rc.height),...ot?td:id};for(const wc in _c)oc.setProperty(wc,_c[wc]);return ut}(Hl,{...rc,...ot},"mask"===sc);const _c=findIconElement(at);_c?"SPAN"===oc.tagName&&_c.tagName===oc.tagName?_c.setAttribute("style",oc.getAttribute("style")):at.replaceChild(oc,_c):at.appendChild(oc)}function setPendingState(at,st,ot){return{rendered:!1,inline:st,icon:at,lastRender:ot&&(ot.rendered?ot:ot.lastRender)}}const sd=function(at){let st,ot;void 0===at&&(at="iconify-icon");try{st=window.customElements,ot=window.HTMLElement}catch(bd){return}if(!st||!ot)return;const ut=st.get(at);if(ut)return ut;const Hl=["icon","mode","inline","noobserver","width","height","rotate","flip"],rc=class extends ot{constructor(){super(),this._shadowRoot=void 0,this._initialised=!1,this._state=void 0,this._checkQueued=!1,this._connected=!1,this._observer=null,this._visible=!0;const at=this._shadowRoot=this.attachShadow({mode:"open"}),st=this.hasAttribute("inline");updateStyle(at,st),this._state=setPendingState({value:""},st),this._queueCheck()}connectedCallback(){this._connected=!0,this.startObserver()}disconnectedCallback(){this._connected=!1,this.stopObserver()}static get observedAttributes(){return Hl.slice(0)}attributeChangedCallback(at){switch(at){case"inline":{const at=this.hasAttribute("inline"),st=this._state;at!==st.inline&&(st.inline=at,updateStyle(this._shadowRoot,at));break}case"noobserver":this.hasAttribute("noobserver")?this.startObserver():this.stopObserver();break;default:this._queueCheck()}}get icon(){const at=this.getAttribute("icon");if(at&&"{"===at.slice(0,1))try{return JSON.parse(at)}catch(bd){}return at}set icon(at){"object"===typeof at&&(at=JSON.stringify(at)),this.setAttribute("icon",at)}get inline(){return this.hasAttribute("inline")}set inline(at){at?this.setAttribute("inline","true"):this.removeAttribute("inline")}get observer(){return this.hasAttribute("observer")}set observer(at){at?this.setAttribute("observer","true"):this.removeAttribute("observer")}restartAnimation(){const at=this._state;if(at.rendered){const st=this._shadowRoot;if("svg"===at.renderedMode)try{return void st.lastChild.setCurrentTime(0)}catch(bd){}renderIcon(st,at)}}get status(){const at=this._state;return at.rendered?"rendered":null===at.icon.data?"failed":"loading"}_queueCheck(){this._checkQueued||(this._checkQueued=!0,setTimeout((()=>{this._check()})))}_check(){if(!this._checkQueued)return;this._checkQueued=!1;const at=this._state,st=this.getAttribute("icon");if(st!==at.icon.value)return void this._iconChanged(st);if(!at.rendered||!this._visible)return;const ot=this.getAttribute("mode"),ut=getCustomisations(this);at.attrMode===ot&&!function(at,st){for(const ot in Sc)if(at[ot]!==st[ot])return!0;return!1}(at.customisations,ut)&&findIconElement(this._shadowRoot)||this._renderIcon(at.icon,ut,ot)}_iconChanged(at){const st=function(at,st){if("object"===typeof at)return{data:testIconObject(at),value:at};if("string"!==typeof at)return{value:at};if(at.includes("{")){const st=testIconObject(at);if(st)return{data:st,value:at}}const ot=stringToIcon(at,!0,!0);if(!ot)return{value:at};const ut=getIconData(ot);if(void 0!==ut||!ot.prefix)return{value:at,name:ot,data:ut};const Hl=loadIcons$1([ot],(()=>st(at,ot,getIconData(ot))));return{value:at,name:ot,loading:Hl}}(at,((at,st,ot)=>{const ut=this._state;if(ut.rendered||this.getAttribute("icon")!==at)return;const Hl={value:at,name:st,data:ot};Hl.data?this._gotIconData(Hl):ut.icon=Hl}));st.data?this._gotIconData(st):this._state=setPendingState(st,this._state.inline,this._state)}_forceRender(){if(this._visible)this._queueCheck();else{const at=findIconElement(this._shadowRoot);at&&this._shadowRoot.removeChild(at)}}_gotIconData(at){this._checkQueued=!1,this._renderIcon(at,getCustomisations(this),this.getAttribute("mode"))}_renderIcon(at,st,ot){const ut=function(at,st){switch(st){case"svg":case"bg":case"mask":return st}return"style"===st||!xu&&-1!==at.indexOf("<a")?-1===at.indexOf("currentColor")?"bg":"mask":"svg"}(at.data.body,ot),Hl=this._state.inline;renderIcon(this._shadowRoot,this._state={rendered:!0,icon:at,inline:Hl,customisations:st,attrMode:ot,renderedMode:ut})}startObserver(){if(!this._observer&&!this.hasAttribute("noobserver"))try{this._observer=new IntersectionObserver((at=>{const st=at.some((at=>at.isIntersecting));st!==this._visible&&(this._visible=st,this._forceRender())})),this._observer.observe(this)}catch(bd){if(this._observer){try{this._observer.disconnect()}catch(bd){}this._observer=null}}}stopObserver(){this._observer&&(this._observer.disconnect(),this._observer=null,this._visible=!0,this._connected&&this._forceRender())}};Hl.forEach((at=>{at in rc.prototype||Object.defineProperty(rc.prototype,at,{get:function(){return this.getAttribute(at)},set:function(st){null!==st?this.setAttribute(at,st):this.removeAttribute(at)}})}));const sc=exportFunctions();for(const oc in sc)rc[oc]=rc.prototype[oc]=sc[oc];return st.define(at,rc),rc}()||exportFunctions(),{iconLoaded:od,getIcon:ld,listIcons:cd,addIcon:ud,addCollection:hd,calculateSize:dd,buildIcon:pd,iconToHTML:md,svgToURL:gd,loadIcons:fd,loadIcon:Ad,setCustomIconLoader:yd,setCustomIconsLoader:vd,addAPIProvider:_d,_api:xd}=sd},1331:(at,st,ot)=>{"use strict";ot.d(st,{AH:()=>ut.AH,WF:()=>r,iz:()=>ut.iz,qy:()=>Hl.qy,s6:()=>Hl.s6});var ut=ot(8789),Hl=ot(8531);
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
class r extends ut.mN{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){const at=super.createRenderRoot();return this.renderOptions.renderBefore??=at.firstChild,at}update(at){const st=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(at),this._$Do=(0,Hl.XX)(st,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Hl.c0}}r._$litElement$=!0,r.finalized=!0,globalThis.litElementHydrateSupport?.({LitElement:r});const rc=globalThis.litElementPolyfillSupport;rc?.({LitElement:r});(globalThis.litElementVersions??=[]).push("4.1.1")},533:(at,st,ot)=>{"use strict";ot.d(st,{OA:()=>ut,WL:()=>i,u$:()=>e});
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const ut={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},e=at=>function(){for(var st=arguments.length,ot=new Array(st),ut=0;ut<st;ut++)ot[ut]=arguments[ut];return{_$litDirective$:at,values:ot}};class i{constructor(at){}get _$AU(){return this._$AM._$AU}_$AT(at,st,ot){this._$Ct=at,this._$AM=st,this._$Ci=ot}_$AS(at,st){return this.update(at,st)}update(at,st){return this.render(...st)}}},9744:(at,st,ot)=>{"use strict";ot.d(st,{H:()=>rc});var ut=ot(8531),Hl=ot(533);
/**
 * @license
 * Copyright 2018 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const rc=(0,Hl.u$)(class extends Hl.WL{constructor(at){if(super(at),at.type!==Hl.OA.ATTRIBUTE||"class"!==at.name||at.strings?.length>2)throw Error("`classMap()` can only be used in the `class` attribute and must be the only part in the attribute.")}render(at){return" "+Object.keys(at).filter((st=>at[st])).join(" ")+" "}update(at,st){let[ot]=st;if(void 0===this.st){this.st=new Set,void 0!==at.strings&&(this.nt=new Set(at.strings.join(" ").split(/\s/).filter((at=>""!==at))));for(const at in ot)ot[at]&&!this.nt?.has(at)&&this.st.add(at);return this.render(ot)}const Hl=at.element.classList;for(const ut of this.st)ut in ot||(Hl.remove(ut),this.st.delete(ut));for(const ut in ot){const at=!!ot[ut];at===this.st.has(ut)||this.nt?.has(ut)||(at?(Hl.add(ut),this.st.add(ut)):(Hl.remove(ut),this.st.delete(ut)))}return ut.c0}})},4901:(at,st,ot)=>{"use strict";
/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
function*o(at,st){if(void 0!==at){let ot=0;for(const ut of at)yield st(ut,ot++)}}ot.d(st,{T:()=>o})},8531:(at,st,ot)=>{"use strict";ot.d(st,{JW:()=>_u,XX:()=>B,c0:()=>Su,ej:()=>xu,qy:()=>yu,s6:()=>Du});
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const ut=globalThis,Hl=ut.trustedTypes,rc=Hl?Hl.createPolicy("lit-html",{createHTML:at=>at}):void 0,sc="$lit$",oc=`lit$${Math.random().toFixed(9).slice(2)}$`,_c="?"+oc,wc=`<${_c}>`,Sc=document,l=()=>Sc.createComment(""),c=at=>null===at||"object"!=typeof at&&"function"!=typeof at,iu=Array.isArray,u=at=>iu(at)||"function"==typeof at?.[Symbol.iterator],su="[ \t\n\f\r]",lu=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,cu=/-->/g,uu=/>/g,pu=RegExp(`>|${su}(?:([^\\s"'>=/]+)(${su}*=${su}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),mu=/'/g,gu=/"/g,Au=/^(?:script|style|textarea|title)$/i,y=at=>function(st){for(var ot=arguments.length,ut=new Array(ot>1?ot-1:0),Hl=1;Hl<ot;Hl++)ut[Hl-1]=arguments[Hl];return{_$litType$:at,strings:st,values:ut}},yu=y(1),_u=y(2),xu=y(3),Su=Symbol.for("lit-noChange"),Du=Symbol.for("lit-nothing"),Lu=new WeakMap,$u=Sc.createTreeWalker(Sc,129);function P(at,st){if(!iu(at)||!at.hasOwnProperty("raw"))throw Error("invalid template strings array");return void 0!==rc?rc.createHTML(st):st}const V=(at,st)=>{const ot=at.length-1,ut=[];let Hl,rc=2===st?"<svg>":3===st?"<math>":"",_c=lu;for(let Sc=0;Sc<ot;Sc++){const st=at[Sc];let ot,iu,su=-1,yu=0;for(;yu<st.length&&(_c.lastIndex=yu,iu=_c.exec(st),null!==iu);)yu=_c.lastIndex,_c===lu?"!--"===iu[1]?_c=cu:void 0!==iu[1]?_c=uu:void 0!==iu[2]?(Au.test(iu[2])&&(Hl=RegExp("</"+iu[2],"g")),_c=pu):void 0!==iu[3]&&(_c=pu):_c===pu?">"===iu[0]?(_c=Hl??lu,su=-1):void 0===iu[1]?su=-2:(su=_c.lastIndex-iu[2].length,ot=iu[1],_c=void 0===iu[3]?pu:'"'===iu[3]?gu:mu):_c===gu||_c===mu?_c=pu:_c===cu||_c===uu?_c=lu:(_c=pu,Hl=void 0);const _u=_c===pu&&at[Sc+1].startsWith("/>")?" ":"";rc+=_c===lu?st+wc:su>=0?(ut.push(ot),st.slice(0,su)+sc+st.slice(su)+oc+_u):st+oc+(-2===su?Sc:_u)}return[P(at,rc+(at[ot]||"<?>")+(2===st?"</svg>":3===st?"</math>":"")),ut]};class N{constructor(at,st){let ot,{strings:ut,_$litType$:rc}=at;this.parts=[];let wc=0,Sc=0;const iu=ut.length-1,su=this.parts,[lu,cu]=V(ut,rc);if(this.el=N.createElement(lu,st),$u.currentNode=this.el.content,2===rc||3===rc){const at=this.el.content.firstChild;at.replaceWith(...at.childNodes)}for(;null!==(ot=$u.nextNode())&&su.length<iu;){if(1===ot.nodeType){if(ot.hasAttributes())for(const at of ot.getAttributeNames())if(at.endsWith(sc)){const st=cu[Sc++],ut=ot.getAttribute(at).split(oc),Hl=/([.?@])?(.*)/.exec(st);su.push({type:1,index:wc,name:Hl[2],strings:ut,ctor:"."===Hl[1]?H:"?"===Hl[1]?I:"@"===Hl[1]?L:k}),ot.removeAttribute(at)}else at.startsWith(oc)&&(su.push({type:6,index:wc}),ot.removeAttribute(at));if(Au.test(ot.tagName)){const at=ot.textContent.split(oc),st=at.length-1;if(st>0){ot.textContent=Hl?Hl.emptyScript:"";for(let ut=0;ut<st;ut++)ot.append(at[ut],l()),$u.nextNode(),su.push({type:2,index:++wc});ot.append(at[st],l())}}}else if(8===ot.nodeType)if(ot.data===_c)su.push({type:2,index:wc});else{let at=-1;for(;-1!==(at=ot.data.indexOf(oc,at+1));)su.push({type:7,index:wc}),at+=oc.length-1}wc++}}static createElement(at,st){const ot=Sc.createElement("template");return ot.innerHTML=at,ot}}function S(at,st,ot,ut){if(void 0===ot&&(ot=at),st===Su)return st;let Hl=void 0!==ut?ot._$Co?.[ut]:ot._$Cl;const rc=c(st)?void 0:st._$litDirective$;return Hl?.constructor!==rc&&(Hl?._$AO?.(!1),void 0===rc?Hl=void 0:(Hl=new rc(at),Hl._$AT(at,ot,ut)),void 0!==ut?(ot._$Co??=[])[ut]=Hl:ot._$Cl=Hl),void 0!==Hl&&(st=S(at,Hl._$AS(at,st.values),Hl,ut)),st}class M{constructor(at,st){this._$AV=[],this._$AN=void 0,this._$AD=at,this._$AM=st}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(at){const{el:{content:st},parts:ot}=this._$AD,ut=(at?.creationScope??Sc).importNode(st,!0);$u.currentNode=ut;let Hl=$u.nextNode(),rc=0,sc=0,oc=ot[0];for(;void 0!==oc;){if(rc===oc.index){let st;2===oc.type?st=new R(Hl,Hl.nextSibling,this,at):1===oc.type?st=new oc.ctor(Hl,oc.name,oc.strings,this,at):6===oc.type&&(st=new z(Hl,this,at)),this._$AV.push(st),oc=ot[++sc]}rc!==oc?.index&&(Hl=$u.nextNode(),rc++)}return $u.currentNode=Sc,ut}p(at){let st=0;for(const ot of this._$AV)void 0!==ot&&(void 0!==ot.strings?(ot._$AI(at,ot,st),st+=ot.strings.length-2):ot._$AI(at[st])),st++}}class R{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(at,st,ot,ut){this.type=2,this._$AH=Du,this._$AN=void 0,this._$AA=at,this._$AB=st,this._$AM=ot,this.options=ut,this._$Cv=ut?.isConnected??!0}get parentNode(){let at=this._$AA.parentNode;const st=this._$AM;return void 0!==st&&11===at?.nodeType&&(at=st.parentNode),at}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(at,st){void 0===st&&(st=this),at=S(this,at,st),c(at)?at===Du||null==at||""===at?(this._$AH!==Du&&this._$AR(),this._$AH=Du):at!==this._$AH&&at!==Su&&this._(at):void 0!==at._$litType$?this.$(at):void 0!==at.nodeType?this.T(at):u(at)?this.k(at):this._(at)}O(at){return this._$AA.parentNode.insertBefore(at,this._$AB)}T(at){this._$AH!==at&&(this._$AR(),this._$AH=this.O(at))}_(at){this._$AH!==Du&&c(this._$AH)?this._$AA.nextSibling.data=at:this.T(Sc.createTextNode(at)),this._$AH=at}$(at){const{values:st,_$litType$:ot}=at,ut="number"==typeof ot?this._$AC(at):(void 0===ot.el&&(ot.el=N.createElement(P(ot.h,ot.h[0]),this.options)),ot);if(this._$AH?._$AD===ut)this._$AH.p(st);else{const at=new M(ut,this),ot=at.u(this.options);at.p(st),this.T(ot),this._$AH=at}}_$AC(at){let st=Lu.get(at.strings);return void 0===st&&Lu.set(at.strings,st=new N(at)),st}k(at){iu(this._$AH)||(this._$AH=[],this._$AR());const st=this._$AH;let ot,ut=0;for(const Hl of at)ut===st.length?st.push(ot=new R(this.O(l()),this.O(l()),this,this.options)):ot=st[ut],ot._$AI(Hl),ut++;ut<st.length&&(this._$AR(ot&&ot._$AB.nextSibling,ut),st.length=ut)}_$AR(at,st){for(void 0===at&&(at=this._$AA.nextSibling),this._$AP?.(!1,!0,st);at&&at!==this._$AB;){const st=at.nextSibling;at.remove(),at=st}}setConnected(at){void 0===this._$AM&&(this._$Cv=at,this._$AP?.(at))}}class k{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(at,st,ot,ut,Hl){this.type=1,this._$AH=Du,this._$AN=void 0,this.element=at,this.name=st,this._$AM=ut,this.options=Hl,ot.length>2||""!==ot[0]||""!==ot[1]?(this._$AH=Array(ot.length-1).fill(new String),this.strings=ot):this._$AH=Du}_$AI(at,st,ot,ut){void 0===st&&(st=this);const Hl=this.strings;let rc=!1;if(void 0===Hl)at=S(this,at,st,0),rc=!c(at)||at!==this._$AH&&at!==Su,rc&&(this._$AH=at);else{const ut=at;let sc,oc;for(at=Hl[0],sc=0;sc<Hl.length-1;sc++)oc=S(this,ut[ot+sc],st,sc),oc===Su&&(oc=this._$AH[sc]),rc||=!c(oc)||oc!==this._$AH[sc],oc===Du?at=Du:at!==Du&&(at+=(oc??"")+Hl[sc+1]),this._$AH[sc]=oc}rc&&!ut&&this.j(at)}j(at){at===Du?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,at??"")}}class H extends k{constructor(){super(...arguments),this.type=3}j(at){this.element[this.name]=at===Du?void 0:at}}class I extends k{constructor(){super(...arguments),this.type=4}j(at){this.element.toggleAttribute(this.name,!!at&&at!==Du)}}class L extends k{constructor(at,st,ot,ut,Hl){super(at,st,ot,ut,Hl),this.type=5}_$AI(at,st){if(void 0===st&&(st=this),(at=S(this,at,st,0)??Du)===Su)return;const ot=this._$AH,ut=at===Du&&ot!==Du||at.capture!==ot.capture||at.once!==ot.once||at.passive!==ot.passive,Hl=at!==Du&&(ot===Du||ut);ut&&this.element.removeEventListener(this.name,this,ot),Hl&&this.element.addEventListener(this.name,this,at),this._$AH=at}handleEvent(at){"function"==typeof this._$AH?this._$AH.call(this.options?.host??this.element,at):this._$AH.handleEvent(at)}}class z{constructor(at,st,ot){this.element=at,this.type=6,this._$AN=void 0,this._$AM=st,this.options=ot}get _$AU(){return this._$AM._$AU}_$AI(at){S(this,at)}}const hh=ut.litHtmlPolyfillSupport;hh?.(N,R),(ut.litHtmlVersions??=[]).push("3.2.1");const B=(at,st,ot)=>{const ut=ot?.renderBefore??st;let Hl=ut._$litPart$;if(void 0===Hl){const at=ot?.renderBefore??null;ut._$litPart$=Hl=new R(st.insertBefore(l(),at),at,void 0,ot??{})}return Hl._$AI(at),Hl}},5080:(at,st,ot)=>{"use strict";ot.d(st,{Bk:()=>s,qy:()=>sc});var ut=ot(8531);
/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */const Hl=Symbol.for(""),o=at=>{if(at?.r===Hl)return at?._$litStatic$},s=at=>({_$litStatic$:at,r:Hl}),rc=new Map,n=at=>function(st){for(var ot=arguments.length,ut=new Array(ot>1?ot-1:0),Hl=1;Hl<ot;Hl++)ut[Hl-1]=arguments[Hl];const sc=ut.length;let oc,_c;const wc=[],Sc=[];let iu,su=0,lu=!1;for(;su<sc;){for(iu=st[su];su<sc&&void 0!==(_c=ut[su],oc=o(_c));)iu+=oc+st[++su],lu=!0;su!==sc&&Sc.push(_c),wc.push(iu),su++}if(su===sc&&wc.push(st[sc]),lu){const at=wc.join("$$lit$$");void 0===(st=rc.get(at))&&(wc.raw=wc,rc.set(at,st=wc)),ut=Sc}return at(st,...ut)},sc=n(ut.qy);n(ut.JW),n(ut.ej)},1198:(at,st,ot)=>{"use strict";ot.d(st,{H:()=>ut.H});var ut=ot(9744)},4542:(at,st,ot)=>{"use strict";ot.d(st,{AH:()=>ut.AH,WF:()=>ut.WF,iz:()=>ut.iz,qy:()=>ut.qy,s6:()=>ut.s6});ot(8789),ot(8531);var ut=ot(1331)},686:(at,st,ot)=>{"use strict";ot.d(st,{Bk:()=>ut.Bk,qy:()=>ut.qy});var ut=ot(5080)},748:(at,st,ot)=>{"use strict";ot.d(st,{Zs:()=>_c});var ut=ot(3336),Hl=Object.defineProperty,rc=Math.pow,l=(at,st)=>Hl(at,"name",{value:st,configurable:!0}),m=(at,st,ot)=>new Promise(((ut,Hl)=>{var s=at=>{try{a(ot.next(at))}catch(st){Hl(st)}},o=at=>{try{a(ot.throw(at))}catch(st){Hl(st)}},a=at=>at.done?ut(at.value):Promise.resolve(at.value).then(s,o);a((ot=ot.apply(at,st)).next())})),sc=(l(((at,st)=>{let ot=!1,ut="";return new(L.GridLayer.extend({createTile:l(((st,Hl)=>{let rc=document.createElement("img"),sc=new AbortController,oc=sc.signal;return rc.cancel=()=>{sc.abort()},ot||(at.getHeader().then((at=>{1===at.tileType?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):2===at.tileType?ut="image/png":3===at.tileType?ut="image/jpeg":4===at.tileType?ut="image/webp":5===at.tileType&&(ut="image/avif")})),ot=!0),at.getZxy(st.z,st.x,st.y,oc).then((at=>{if(at){let st=new Blob([at.data],{type:ut}),ot=window.URL.createObjectURL(st);rc.src=ot,rc.cancel=void 0,Hl(void 0,rc)}})).catch((at=>{if("AbortError"!==at.name)throw at})),rc}),"createTile"),_removeTile:l((function(at){let st=this._tiles[at];st&&(st.el.cancel&&st.el.cancel(),st.el.width=0,st.el.height=0,st.el.deleted=!0,L.DomUtil.remove(st.el),delete this._tiles[at],this.fire("tileunload",{tile:st.el,coords:this._keyToTileCoords(at)}))}),"_removeTile")}))(st)}),"leafletRasterLayer"),l((at=>(st,ot)=>{if(ot instanceof AbortController)return at(st,ot);let ut=new AbortController;return at(st,ut).then((at=>ot(void 0,at.data,at.cacheControl||"",at.expires||"")),(at=>ot(at))).catch((at=>ot(at))),{cancel:l((()=>ut.abort()),"cancel")}}),"v3compat")),oc=class{constructor(at){this.tilev4=l(((at,st)=>m(this,null,(function*(){if("json"===at.type){let st=at.url.substr(10),ot=this.tiles.get(st);if(ot||(ot=new Su(st),this.tiles.set(st,ot)),this.metadata)return{data:yield ot.getTileJson(at.url)};let ut=yield ot.getHeader();return(ut.minLon>=ut.maxLon||ut.minLat>=ut.maxLat)&&console.error(`Bounds of PMTiles archive ${ut.minLon},${ut.minLat},${ut.maxLon},${ut.maxLat} are not valid.`),{data:{tiles:[`${at.url}/{z}/{x}/{y}`],minzoom:ut.minZoom,maxzoom:ut.maxZoom,bounds:[ut.minLon,ut.minLat,ut.maxLon,ut.maxLat]}}}let ot=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),ut=at.url.match(ot);if(!ut)throw new Error("Invalid PMTiles protocol URL");let Hl=ut[1],rc=this.tiles.get(Hl);rc||(rc=new Su(Hl),this.tiles.set(Hl,rc));let sc=ut[2],oc=ut[3],_c=ut[4],wc=yield rc.getHeader(),Sc=yield null==rc?void 0:rc.getZxy(+sc,+oc,+_c,st.signal);if(Sc)return{data:new Uint8Array(Sc.data),cacheControl:Sc.cacheControl,expires:Sc.expires};if(1===wc.tileType){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}))),"tilev4"),this.tile=sc(this.tilev4),this.tiles=new Map,this.metadata=(null==at?void 0:at.metadata)||!1,this.errorOnMissingTile=(null==at?void 0:at.errorOnMissingTile)||!1}add(at){this.tiles.set(at.source.getKey(),at)}get(at){return this.tiles.get(at)}};l(oc,"Protocol");var _c=oc;function w(at,st){return 4294967296*(st>>>0)+(at>>>0)}function F(at,st){let ot=st.buf,ut=ot[st.pos++],Hl=(112&ut)>>4;if(ut<128||(ut=ot[st.pos++],Hl|=(127&ut)<<3,ut<128)||(ut=ot[st.pos++],Hl|=(127&ut)<<10,ut<128)||(ut=ot[st.pos++],Hl|=(127&ut)<<17,ut<128)||(ut=ot[st.pos++],Hl|=(127&ut)<<24,ut<128)||(ut=ot[st.pos++],Hl|=(1&ut)<<31,ut<128))return w(at,Hl);throw new Error("Expected varint not more than 10 bytes")}function v(at){let st=at.buf,ot=st[at.pos++],ut=127&ot;return ot<128||(ot=st[at.pos++],ut|=(127&ot)<<7,ot<128)||(ot=st[at.pos++],ut|=(127&ot)<<14,ot<128)||(ot=st[at.pos++],ut|=(127&ot)<<21,ot<128)?ut:(ot=st[at.pos],ut|=(15&ot)<<28,F(ut,at))}function k(at,st,ot,ut){if(0===ut){1===ot&&(st[0]=at-1-st[0],st[1]=at-1-st[1]);let ut=st[0];st[0]=st[1],st[1]=ut}}function N(at,st){let ot=rc(2,at),ut=st,Hl=st,sc=st,oc=[0,0],_c=1;for(;_c<ot;)ut=1&sc/2,Hl=1&(sc^ut),k(_c,oc,ut,Hl),oc[0]+=_c*ut,oc[1]+=_c*Hl,sc/=4,_c*=2;return[at,oc[0],oc[1]]}l(w,"toNum"),l(F,"readVarintRemainder"),l(v,"readVarint"),l(k,"rotate"),l(N,"idOnLevel");var wc=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function G(at,st,ot){if(at>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(st>rc(2,at)-1||ot>rc(2,at)-1)throw new Error("tile x/y outside zoom level bounds");let ut=wc[at],Hl=0,sc=0,oc=0,_c=[st,ot],Sc=rc(2,at)/2;for(;Sc>0;)Hl=(_c[0]&Sc)>0?1:0,sc=(_c[1]&Sc)>0?1:0,oc+=Sc*Sc*(3*Hl^sc),k(Sc,_c,Hl,sc),Sc/=2;return ut+oc}l(G,"zxyToTileId"),l((function(at){let st=0;for(let ot=0;ot<27;ot++){let ut=(1<<ot)*(1<<ot);if(st+ut>at)return N(ot,at-st);st+=ut}throw new Error("Tile zoom level exceeds max safe number limit (26)")}),"tileIdToZxy");var Sc,iu=((Sc=iu||{})[Sc.Unknown=0]="Unknown",Sc[Sc.None=1]="None",Sc[Sc.Gzip=2]="Gzip",Sc[Sc.Brotli=3]="Brotli",Sc[Sc.Zstd=4]="Zstd",Sc);function D(at,st){return m(this,null,(function*(){if(1===st||0===st)return at;if(2===st){if("undefined"==typeof globalThis.DecompressionStream)return(0,ut.Rq)(new Uint8Array(at));let st=new Response(at).body;if(!st)throw new Error("Failed to read response stream");let ot=st.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(ot).arrayBuffer()}throw new Error("Compression method not supported")}))}l(D,"defaultDecompress");var su,lu=((su=lu||{})[su.Unknown=0]="Unknown",su[su.Mvt=1]="Mvt",su[su.Png=2]="Png",su[su.Jpeg=3]="Jpeg",su[su.Webp=4]="Webp",su[su.Avif=5]="Avif",su);function _(at){return 1===at?".mvt":2===at?".png":3===at?".jpg":4===at?".webp":5===at?".avif":""}l(_,"tileTypeExt");function Q(at,st){let ot=0,ut=at.length-1;for(;ot<=ut;){let Hl=ut+ot>>1,rc=st-at[Hl].tileId;if(rc>0)ot=Hl+1;else{if(!(rc<0))return at[Hl];ut=Hl-1}}return ut>=0&&(0===at[ut].runLength||st-at[ut].tileId<at[ut].runLength)?at[ut]:null}l(Q,"findTile");var cu=class{constructor(at){this.file=at}getKey(){return this.file.name}getBytes(at,st){return m(this,null,(function*(){return{data:yield this.file.slice(at,at+st).arrayBuffer()}}))}};l(cu,"FileSource");var uu=class{constructor(at,st){void 0===st&&(st=new Headers),this.url=at,this.customHeaders=st,this.mustReload=!1;let ot="";"navigator"in globalThis&&(ot=globalThis.navigator.userAgent||"");let ut=ot.indexOf("Windows")>-1,Hl=/Chrome|Chromium|Edg|OPR|Brave/.test(ot);this.chromeWindowsNoCache=!1,ut&&Hl&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(at){this.customHeaders=at}getBytes(at,st,ot,ut){return m(this,null,(function*(){let Hl,rc;ot?rc=ot:(Hl=new AbortController,rc=Hl.signal);let sc,oc=new Headers(this.customHeaders);oc.set("range",`bytes=${at}-${at+st-1}`),this.mustReload?sc="reload":this.chromeWindowsNoCache&&(sc="no-store");let _c=yield fetch(this.url,{signal:rc,cache:sc,headers:oc});if(0===at&&416===_c.status){let at=_c.headers.get("Content-Range");if(!at||!at.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let st=+at.substr(8);_c=yield fetch(this.url,{signal:rc,cache:"reload",headers:{range:"bytes=0-"+(st-1)}})}let wc=_c.headers.get("Etag");if(null!=wc&&wc.startsWith("W/")&&(wc=null),416===_c.status||ut&&wc&&wc!==ut)throw this.mustReload=!0,new gu(`Server returned non-matching ETag ${ut} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(_c.status>=300)throw new Error(`Bad response code: ${_c.status}`);let Sc=_c.headers.get("Content-Length");if(200===_c.status&&(!Sc||+Sc>st))throw Hl&&Hl.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield _c.arrayBuffer(),etag:wc||void 0,cacheControl:_c.headers.get("Cache-Control")||void 0,expires:_c.headers.get("Expires")||void 0}}))}};l(uu,"FetchSource");var pu=uu;function g(at,st){let ot=at.getUint32(st+4,!0),ut=at.getUint32(st+0,!0);return ot*rc(2,32)+ut}function X(at,st){let ot=new DataView(at),ut=ot.getUint8(7);if(ut>3)throw new Error(`Archive is spec version ${ut} but this library supports up to spec version 3`);return{specVersion:ut,rootDirectoryOffset:g(ot,8),rootDirectoryLength:g(ot,16),jsonMetadataOffset:g(ot,24),jsonMetadataLength:g(ot,32),leafDirectoryOffset:g(ot,40),leafDirectoryLength:g(ot,48),tileDataOffset:g(ot,56),tileDataLength:g(ot,64),numAddressedTiles:g(ot,72),numTileEntries:g(ot,80),numTileContents:g(ot,88),clustered:1===ot.getUint8(96),internalCompression:ot.getUint8(97),tileCompression:ot.getUint8(98),tileType:ot.getUint8(99),minZoom:ot.getUint8(100),maxZoom:ot.getUint8(101),minLon:ot.getInt32(102,!0)/1e7,minLat:ot.getInt32(106,!0)/1e7,maxLon:ot.getInt32(110,!0)/1e7,maxLat:ot.getInt32(114,!0)/1e7,centerZoom:ot.getUint8(118),centerLon:ot.getInt32(119,!0)/1e7,centerLat:ot.getInt32(123,!0)/1e7,etag:st}}function Z(at){let st={buf:new Uint8Array(at),pos:0},ot=v(st),ut=[],Hl=0;for(let rc=0;rc<ot;rc++){let at=v(st);ut.push({tileId:Hl+at,offset:0,length:0,runLength:1}),Hl+=at}for(let rc=0;rc<ot;rc++)ut[rc].runLength=v(st);for(let rc=0;rc<ot;rc++)ut[rc].length=v(st);for(let rc=0;rc<ot;rc++){let at=v(st);ut[rc].offset=0===at&&rc>0?ut[rc-1].offset+ut[rc-1].length:at-1}return ut}l(g,"getUint64"),l(X,"bytesToHeader"),l(Z,"deserializeIndex");var mu=class extends Error{};l(mu,"EtagMismatch");var gu=mu;function K(at,st){return m(this,null,(function*(){let ot=yield at.getBytes(0,16384);if(19792!==new DataView(ot.data).getUint16(0,!0))throw new Error("Wrong magic number for PMTiles archive");let ut=X(ot.data.slice(0,127),ot.etag),Hl=ot.data.slice(ut.rootDirectoryOffset,ut.rootDirectoryOffset+ut.rootDirectoryLength),rc=`${at.getKey()}|${ut.etag||""}|${ut.rootDirectoryOffset}|${ut.rootDirectoryLength}`,sc=Z(yield st(Hl,ut.internalCompression));return[ut,[rc,sc.length,sc]]}))}function I(at,st,ot,ut,Hl){return m(this,null,(function*(){let rc=yield at.getBytes(ot,ut,void 0,Hl.etag),sc=Z(yield st(rc.data,Hl.internalCompression));if(0===sc.length)throw new Error("Empty directory is invalid");return sc}))}l(K,"getHeaderAndRoot"),l(I,"getDirectory");var Au=class{constructor(at,st,ot){void 0===at&&(at=100),void 0===st&&(st=!0),void 0===ot&&(ot=D),this.cache=new Map,this.maxCacheEntries=at,this.counter=1,this.decompress=ot}getHeader(at){return m(this,null,(function*(){let st=at.getKey(),ot=this.cache.get(st);if(ot)return ot.lastUsed=this.counter++,ot.data;let ut=yield K(at,this.decompress);return ut[1]&&this.cache.set(ut[1][0],{lastUsed:this.counter++,data:ut[1][2]}),this.cache.set(st,{lastUsed:this.counter++,data:ut[0]}),this.prune(),ut[0]}))}getDirectory(at,st,ot,ut){return m(this,null,(function*(){let Hl=`${at.getKey()}|${ut.etag||""}|${st}|${ot}`,rc=this.cache.get(Hl);if(rc)return rc.lastUsed=this.counter++,rc.data;let sc=yield I(at,this.decompress,st,ot,ut);return this.cache.set(Hl,{lastUsed:this.counter++,data:sc}),this.prune(),sc}))}prune(){if(this.cache.size>this.maxCacheEntries){let at,st=1/0;this.cache.forEach(((ot,ut)=>{ot.lastUsed<st&&(st=ot.lastUsed,at=ut)})),at&&this.cache.delete(at)}}invalidate(at){return m(this,null,(function*(){this.cache.delete(at.getKey())}))}};l(Au,"ResolvedValueCache");var yu=class{constructor(at,st,ot){void 0===at&&(at=100),void 0===st&&(st=!0),void 0===ot&&(ot=D),this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=at,this.counter=1,this.decompress=ot}getHeader(at){return m(this,null,(function*(){let st=at.getKey(),ot=this.cache.get(st);if(ot)return ot.lastUsed=this.counter++,yield ot.data;let ut=new Promise(((st,ot)=>{K(at,this.decompress).then((at=>{at[1]&&this.cache.set(at[1][0],{lastUsed:this.counter++,data:Promise.resolve(at[1][2])}),st(at[0]),this.prune()})).catch((at=>{ot(at)}))}));return this.cache.set(st,{lastUsed:this.counter++,data:ut}),ut}))}getDirectory(at,st,ot,ut){return m(this,null,(function*(){let Hl=`${at.getKey()}|${ut.etag||""}|${st}|${ot}`,rc=this.cache.get(Hl);if(rc)return rc.lastUsed=this.counter++,yield rc.data;let sc=new Promise(((Hl,rc)=>{I(at,this.decompress,st,ot,ut).then((at=>{Hl(at),this.prune()})).catch((at=>{rc(at)}))}));return this.cache.set(Hl,{lastUsed:this.counter++,data:sc}),sc}))}prune(){if(this.cache.size>=this.maxCacheEntries){let at,st=1/0;this.cache.forEach(((ot,ut)=>{ot.lastUsed<st&&(st=ot.lastUsed,at=ut)})),at&&this.cache.delete(at)}}invalidate(at){return m(this,null,(function*(){let st=at.getKey();if(this.invalidations.get(st))return yield this.invalidations.get(st);this.cache.delete(at.getKey());let ot=new Promise(((ot,ut)=>{this.getHeader(at).then((at=>{ot(),this.invalidations.delete(st)})).catch((at=>{ut(at)}))}));this.invalidations.set(st,ot)}))}};l(yu,"SharedPromiseCache");var _u=yu,xu=class{constructor(at,st,ot){this.source="string"==typeof at?new pu(at):at,this.decompress=ot||D,this.cache=st||new _u}getHeader(){return m(this,null,(function*(){return yield this.cache.getHeader(this.source)}))}getZxyAttempt(at,st,ot,ut){return m(this,null,(function*(){let Hl=G(at,st,ot),rc=yield this.cache.getHeader(this.source);if(at<rc.minZoom||at>rc.maxZoom)return;let sc=rc.rootDirectoryOffset,oc=rc.rootDirectoryLength;for(let at=0;at<=3;at++){let at=Q(yield this.cache.getDirectory(this.source,sc,oc,rc),Hl);if(!at)return;if(at.runLength>0){let st=yield this.source.getBytes(rc.tileDataOffset+at.offset,at.length,ut,rc.etag);return{data:yield this.decompress(st.data,rc.tileCompression),cacheControl:st.cacheControl,expires:st.expires}}sc=rc.leafDirectoryOffset+at.offset,oc=at.length}throw new Error("Maximum directory depth exceeded")}))}getZxy(at,st,ot,ut){return m(this,null,(function*(){try{return yield this.getZxyAttempt(at,st,ot,ut)}catch(Sc){if(Sc instanceof gu)return this.cache.invalidate(this.source),yield this.getZxyAttempt(at,st,ot,ut);throw Sc}}))}getMetadataAttempt(){return m(this,null,(function*(){let at=yield this.cache.getHeader(this.source),st=yield this.source.getBytes(at.jsonMetadataOffset,at.jsonMetadataLength,void 0,at.etag),ot=yield this.decompress(st.data,at.internalCompression),ut=new TextDecoder("utf-8");return JSON.parse(ut.decode(ot))}))}getMetadata(){return m(this,null,(function*(){try{return yield this.getMetadataAttempt()}catch(at){if(at instanceof gu)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw at}}))}getTileJson(at){return m(this,null,(function*(){let st=yield this.getHeader(),ot=yield this.getMetadata(),ut=_(st.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${at}/{z}/{x}/{y}${ut}`],vector_layers:ot.vector_layers,attribution:ot.attribution,description:ot.description,name:ot.name,version:ot.version,bounds:[st.minLon,st.minLat,st.maxLon,st.maxLat],center:[st.centerLon,st.centerLat,st.centerZoom],minzoom:st.minZoom,maxzoom:st.maxZoom}}))}};l(xu,"PMTiles");var Su=xu},9435:(at,st,ot)=>{"use strict";ot.d(st,{$EB:()=>su,$NF:()=>ImageLoader,$Yl:()=>ld,$_I:()=>Gd,$ei:()=>Su,A$4:()=>Uint16BufferAttribute,AQS:()=>arrayNeedsUint32,B69:()=>Object3D,BKk:()=>ShaderMaterial,BXX:()=>qp,B_h:()=>im,CSG:()=>MeshDepthMaterial,CVz:()=>Jp,CWW:()=>xm,Cfg:()=>jd,DXC:()=>LineSegments,Dmk:()=>Ep,EZo:()=>uu,EdD:()=>mu,FFZ:()=>Zm,FV:()=>Sd,FXf:()=>yu,Fn:()=>gm,GJx:()=>Nd,GWd:()=>Np,Gu$:()=>SphereGeometry,Gwm:()=>fd,H23:()=>fm,HIg:()=>Lp,HO_:()=>_m,HXV:()=>Kp,I9Y:()=>Vector2,IE4:()=>Zp,IUQ:()=>Vector4,Iit:()=>mergeUniforms,Jnc:()=>sc,K52:()=>Ad,KDk:()=>em,KLL:()=>Nm,KRh:()=>_d,Kef:()=>ym,Kwu:()=>pu,LAk:()=>Cd,LiQ:()=>hh,LlO:()=>Zf,LoY:()=>BufferGeometry,MW4:()=>Uint32BufferAttribute,Mjd:()=>Ed,N5j:()=>Cm,NRn:()=>Box3,NTi:()=>cu,Nex:()=>getByteLength,Nt7:()=>nd,Nv2:()=>VideoTexture,Nz6:()=>Hp,O9p:()=>Euler,OUM:()=>Zd,Om:()=>zd,OuU:()=>td,PPD:()=>Frustum,PTz:()=>Quaternion,Pq0:()=>Vector3,Q1f:()=>Color,QP0:()=>oc,Qev:()=>EventDispatcher,Qrf:()=>am,R3r:()=>WebXRController,RQf:()=>Kd,Riy:()=>$p,RrE:()=>od,RyA:()=>wc,S$4:()=>mm,THS:()=>BufferAttribute,TdN:()=>qm,TiK:()=>jm,TkQ:()=>Vp,U3G:()=>gd,V3x:()=>Ap,V9B:()=>MeshBasicMaterial,VCu:()=>DepthTexture,VT0:()=>Fp,Vb5:()=>rc,VxR:()=>zm,W9U:()=>Am,WNZ:()=>Hl,Wdf:()=>Wm,Wew:()=>Jd,Wk7:()=>_c,XG_:()=>vm,XIg:()=>lu,XJ7:()=>WireframeGeometry,XrR:()=>xd,Y9S:()=>FileLoader,YJl:()=>Group,Yuy:()=>Yd,Z58:()=>Scene,ZQM:()=>jp,Zcv:()=>Plane,Zr2:()=>Pm,_QJ:()=>lm,_Ut:()=>getUnlitUniformColorSpace,a55:()=>Jm,a5J:()=>om,aEY:()=>ad,aJ8:()=>kd,aVO:()=>MeshDistanceMaterial,amv:()=>Om,b4q:()=>CubeTexture,bC7:()=>hm,bCz:()=>gu,bI3:()=>km,bdM:()=>PlaneGeometry,bkx:()=>Qd,brA:()=>pd,bw0:()=>yd,c90:()=>Gp,cHt:()=>qd,caT:()=>vd,cj9:()=>$m,czI:()=>nm,dYF:()=>Data3DTexture,dcC:()=>Op,dwI:()=>Matrix3,e0p:()=>cd,eHc:()=>hd,eaF:()=>Mesh,eoi:()=>Um,er$:()=>Lm,f4X:()=>$u,fBL:()=>Wd,g7M:()=>Td,gJ2:()=>$d,gO9:()=>Au,gPd:()=>Texture,gWB:()=>Gm,ghU:()=>Rd,hB5:()=>Sc,hdd:()=>id,hgQ:()=>sd,hsX:()=>iu,hxR:()=>Bd,hy7:()=>Id,iNn:()=>BoxGeometry,ie2:()=>ed,ix0:()=>Xd,jR7:()=>Wp,jej:()=>probeAsync,jf0:()=>Dm,jzd:()=>Vm,k6Q:()=>Yp,k6q:()=>Ud,kO0:()=>Fm,kRr:()=>Vd,kTW:()=>Od,kTp:()=>Qp,kn4:()=>Matrix4,kyO:()=>wd,l2R:()=>hA,lGu:()=>dd,lPF:()=>createCanvasElement,lxW:()=>cloneUniforms,lyL:()=>um,mcG:()=>warnOnce,nNL:()=>Md,nST:()=>_u,nWS:()=>WebGLRenderTarget,nZQ:()=>ArrayCamera,o6l:()=>WebGLCubeRenderTarget,ojh:()=>Du,ojs:()=>pm,ov9:()=>ud,pBf:()=>Xp,pHI:()=>Fd,paN:()=>Up,ppV:()=>sg,psI:()=>sm,qUd:()=>OrthographicCamera,qa3:()=>tm,qad:()=>Lu,qq$:()=>createElementNS,rFo:()=>DataArrayTexture,rSH:()=>rm,sPf:()=>ut,tBo:()=>Raycaster,tJf:()=>Hd,uB5:()=>cm,uV5:()=>Pd,ubm:()=>PerspectiveCamera,vim:()=>Bm,vyJ:()=>Im,wfO:()=>Ld,wn6:()=>rd,wrO:()=>Dp,xFO:()=>Dd,xSv:()=>md,y3Z:()=>dm,y_p:()=>bd,zdS:()=>Rp,zgK:()=>Layers,znC:()=>xu});
/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */
const ut="179",Hl=0,rc=1,sc=2,oc=1,_c=2,wc=3,Sc=0,iu=1,su=2,lu=0,cu=1,uu=2,pu=3,mu=4,gu=5,Au=100,yu=101,_u=102,xu=103,Su=104,Du=200,Lu=201,$u=202,hh=203,ed=204,td=205,id=206,nd=207,rd=208,ad=209,sd=210,od=211,ld=212,cd=213,ud=214,hd=0,dd=1,pd=2,md=3,gd=4,fd=5,Ad=6,yd=7,vd=0,_d=1,xd=2,bd=0,wd=1,Ed=2,Md=3,Sd=4,Td=5,Cd=6,kd=7,Id=301,Dd=302,Ld=303,Pd=304,zd=306,Nd=1e3,Rd=1001,Od=1002,Bd=1003,Fd=1004,jd=1005,Ud=1006,Vd=1007,Gd=1008,Zd=1009,Hd=1010,Wd=1011,qd=1012,Yd=1013,Qd=1014,Kd=1015,Xd=1016,Jd=1017,$d=1018,Ap=1020,Ep=35902,Dp=1021,Lp=1022,Np=1023,Rp=1026,Op=1027,Fp=1028,jp=1029,Up=1030,Vp=1031,Gp=1033,Zp=33776,Hp=33777,Wp=33778,qp=33779,Yp=35840,Qp=35841,Kp=35842,Xp=35843,Jp=36196,$p=37492,em=37496,tm=37808,im=37809,nm=37810,rm=37811,am=37812,sm=37813,om=37814,lm=37815,cm=37816,um=37817,hm=37818,dm=37819,pm=37820,mm=37821,gm=36492,fm=36494,Am=36495,ym=36283,vm=36284,_m=36285,xm=36286,bm=2300,wm=2301,Em=2302,Mm=2400,Sm=2401,Tm=2402,Cm=3201,km=0,Im=1,Dm="",Lm="srgb",Pm="srgb-linear",zm="linear",Nm="srgb",Rm=7680,Om=512,Bm=513,Fm=514,jm=515,Um=516,Vm=517,Gm=518,Zm=519,Hm=35044,Wm="300 es",qm=2e3,Ym=2001;class EventDispatcher{addEventListener(at,st){void 0===this._listeners&&(this._listeners={});const ot=this._listeners;void 0===ot[at]&&(ot[at]=[]),-1===ot[at].indexOf(st)&&ot[at].push(st)}hasEventListener(at,st){const ot=this._listeners;return void 0!==ot&&(void 0!==ot[at]&&-1!==ot[at].indexOf(st))}removeEventListener(at,st){const ot=this._listeners;if(void 0===ot)return;const ut=ot[at];if(void 0!==ut){const at=ut.indexOf(st);-1!==at&&ut.splice(at,1)}}dispatchEvent(at){const st=this._listeners;if(void 0===st)return;const ot=st[at.type];if(void 0!==ot){at.target=this;const st=ot.slice(0);for(let ot=0,ut=st.length;ot<ut;ot++)st[ot].call(this,at);at.target=null}}}const Qm=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Km=1234567;const Xm=Math.PI/180,Jm=180/Math.PI;function generateUUID(){const at=4294967295*Math.random()|0,st=4294967295*Math.random()|0,ot=4294967295*Math.random()|0,ut=4294967295*Math.random()|0;return(Qm[255&at]+Qm[at>>8&255]+Qm[at>>16&255]+Qm[at>>24&255]+"-"+Qm[255&st]+Qm[st>>8&255]+"-"+Qm[st>>16&15|64]+Qm[st>>24&255]+"-"+Qm[63&ot|128]+Qm[ot>>8&255]+"-"+Qm[ot>>16&255]+Qm[ot>>24&255]+Qm[255&ut]+Qm[ut>>8&255]+Qm[ut>>16&255]+Qm[ut>>24&255]).toLowerCase()}function clamp(at,st,ot){return Math.max(st,Math.min(ot,at))}function euclideanModulo(at,st){return(at%st+st)%st}function lerp(at,st,ot){return(1-ot)*at+ot*st}function denormalize(at,st){switch(st.constructor){case Float32Array:return at;case Uint32Array:return at/4294967295;case Uint16Array:return at/65535;case Uint8Array:return at/255;case Int32Array:return Math.max(at/2147483647,-1);case Int16Array:return Math.max(at/32767,-1);case Int8Array:return Math.max(at/127,-1);default:throw new Error("Invalid component type.")}}function normalize(at,st){switch(st.constructor){case Float32Array:return at;case Uint32Array:return Math.round(4294967295*at);case Uint16Array:return Math.round(65535*at);case Uint8Array:return Math.round(255*at);case Int32Array:return Math.round(2147483647*at);case Int16Array:return Math.round(32767*at);case Int8Array:return Math.round(127*at);default:throw new Error("Invalid component type.")}}const $m={DEG2RAD:Xm,RAD2DEG:Jm,generateUUID:generateUUID,clamp:clamp,euclideanModulo:euclideanModulo,mapLinear:function(at,st,ot,ut,Hl){return ut+(at-st)*(Hl-ut)/(ot-st)},inverseLerp:function(at,st,ot){return at!==st?(ot-at)/(st-at):0},lerp:lerp,damp:function(at,st,ot,ut){return lerp(at,st,1-Math.exp(-ot*ut))},pingpong:function(at,st){return void 0===st&&(st=1),st-Math.abs(euclideanModulo(at,2*st)-st)},smoothstep:function(at,st,ot){return at<=st?0:at>=ot?1:(at=(at-st)/(ot-st))*at*(3-2*at)},smootherstep:function(at,st,ot){return at<=st?0:at>=ot?1:(at=(at-st)/(ot-st))*at*at*(at*(6*at-15)+10)},randInt:function(at,st){return at+Math.floor(Math.random()*(st-at+1))},randFloat:function(at,st){return at+Math.random()*(st-at)},randFloatSpread:function(at){return at*(.5-Math.random())},seededRandom:function(at){void 0!==at&&(Km=at);let st=Km+=1831565813;return st=Math.imul(st^st>>>15,1|st),st^=st+Math.imul(st^st>>>7,61|st),((st^st>>>14)>>>0)/4294967296},degToRad:function(at){return at*Xm},radToDeg:function(at){return at*Jm},isPowerOfTwo:function(at){return 0===(at&at-1)&&0!==at},ceilPowerOfTwo:function(at){return Math.pow(2,Math.ceil(Math.log(at)/Math.LN2))},floorPowerOfTwo:function(at){return Math.pow(2,Math.floor(Math.log(at)/Math.LN2))},setQuaternionFromProperEuler:function(at,st,ot,ut,Hl){const rc=Math.cos,sc=Math.sin,oc=rc(ot/2),_c=sc(ot/2),wc=rc((st+ut)/2),Sc=sc((st+ut)/2),iu=rc((st-ut)/2),su=sc((st-ut)/2),lu=rc((ut-st)/2),cu=sc((ut-st)/2);switch(Hl){case"XYX":at.set(oc*Sc,_c*iu,_c*su,oc*wc);break;case"YZY":at.set(_c*su,oc*Sc,_c*iu,oc*wc);break;case"ZXZ":at.set(_c*iu,_c*su,oc*Sc,oc*wc);break;case"XZX":at.set(oc*Sc,_c*cu,_c*lu,oc*wc);break;case"YXY":at.set(_c*lu,oc*Sc,_c*cu,oc*wc);break;case"ZYZ":at.set(_c*cu,_c*lu,oc*Sc,oc*wc);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+Hl)}},normalize:normalize,denormalize:denormalize};class Vector2{constructor(at,st){void 0===at&&(at=0),void 0===st&&(st=0),Vector2.prototype.isVector2=!0,this.x=at,this.y=st}get width(){return this.x}set width(at){this.x=at}get height(){return this.y}set height(at){this.y=at}set(at,st){return this.x=at,this.y=st,this}setScalar(at){return this.x=at,this.y=at,this}setX(at){return this.x=at,this}setY(at){return this.y=at,this}setComponent(at,st){switch(at){case 0:this.x=st;break;case 1:this.y=st;break;default:throw new Error("index is out of range: "+at)}return this}getComponent(at){switch(at){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+at)}}clone(){return new this.constructor(this.x,this.y)}copy(at){return this.x=at.x,this.y=at.y,this}add(at){return this.x+=at.x,this.y+=at.y,this}addScalar(at){return this.x+=at,this.y+=at,this}addVectors(at,st){return this.x=at.x+st.x,this.y=at.y+st.y,this}addScaledVector(at,st){return this.x+=at.x*st,this.y+=at.y*st,this}sub(at){return this.x-=at.x,this.y-=at.y,this}subScalar(at){return this.x-=at,this.y-=at,this}subVectors(at,st){return this.x=at.x-st.x,this.y=at.y-st.y,this}multiply(at){return this.x*=at.x,this.y*=at.y,this}multiplyScalar(at){return this.x*=at,this.y*=at,this}divide(at){return this.x/=at.x,this.y/=at.y,this}divideScalar(at){return this.multiplyScalar(1/at)}applyMatrix3(at){const st=this.x,ot=this.y,ut=at.elements;return this.x=ut[0]*st+ut[3]*ot+ut[6],this.y=ut[1]*st+ut[4]*ot+ut[7],this}min(at){return this.x=Math.min(this.x,at.x),this.y=Math.min(this.y,at.y),this}max(at){return this.x=Math.max(this.x,at.x),this.y=Math.max(this.y,at.y),this}clamp(at,st){return this.x=clamp(this.x,at.x,st.x),this.y=clamp(this.y,at.y,st.y),this}clampScalar(at,st){return this.x=clamp(this.x,at,st),this.y=clamp(this.y,at,st),this}clampLength(at,st){const ot=this.length();return this.divideScalar(ot||1).multiplyScalar(clamp(ot,at,st))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(at){return this.x*at.x+this.y*at.y}cross(at){return this.x*at.y-this.y*at.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(at){const st=Math.sqrt(this.lengthSq()*at.lengthSq());if(0===st)return Math.PI/2;const ot=this.dot(at)/st;return Math.acos(clamp(ot,-1,1))}distanceTo(at){return Math.sqrt(this.distanceToSquared(at))}distanceToSquared(at){const st=this.x-at.x,ot=this.y-at.y;return st*st+ot*ot}manhattanDistanceTo(at){return Math.abs(this.x-at.x)+Math.abs(this.y-at.y)}setLength(at){return this.normalize().multiplyScalar(at)}lerp(at,st){return this.x+=(at.x-this.x)*st,this.y+=(at.y-this.y)*st,this}lerpVectors(at,st,ot){return this.x=at.x+(st.x-at.x)*ot,this.y=at.y+(st.y-at.y)*ot,this}equals(at){return at.x===this.x&&at.y===this.y}fromArray(at,st){return void 0===st&&(st=0),this.x=at[st],this.y=at[st+1],this}toArray(at,st){return void 0===at&&(at=[]),void 0===st&&(st=0),at[st]=this.x,at[st+1]=this.y,at}fromBufferAttribute(at,st){return this.x=at.getX(st),this.y=at.getY(st),this}rotateAround(at,st){const ot=Math.cos(st),ut=Math.sin(st),Hl=this.x-at.x,rc=this.y-at.y;return this.x=Hl*ot-rc*ut+at.x,this.y=Hl*ut+rc*ot+at.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Quaternion{constructor(at,st,ot,ut){void 0===at&&(at=0),void 0===st&&(st=0),void 0===ot&&(ot=0),void 0===ut&&(ut=1),this.isQuaternion=!0,this._x=at,this._y=st,this._z=ot,this._w=ut}static slerpFlat(at,st,ot,ut,Hl,rc,sc){let oc=ot[ut+0],_c=ot[ut+1],wc=ot[ut+2],Sc=ot[ut+3];const iu=Hl[rc+0],su=Hl[rc+1],lu=Hl[rc+2],cu=Hl[rc+3];if(0===sc)return at[st+0]=oc,at[st+1]=_c,at[st+2]=wc,void(at[st+3]=Sc);if(1===sc)return at[st+0]=iu,at[st+1]=su,at[st+2]=lu,void(at[st+3]=cu);if(Sc!==cu||oc!==iu||_c!==su||wc!==lu){let at=1-sc;const st=oc*iu+_c*su+wc*lu+Sc*cu,ot=st>=0?1:-1,ut=1-st*st;if(ut>Number.EPSILON){const Hl=Math.sqrt(ut),rc=Math.atan2(Hl,st*ot);at=Math.sin(at*rc)/Hl,sc=Math.sin(sc*rc)/Hl}const Hl=sc*ot;if(oc=oc*at+iu*Hl,_c=_c*at+su*Hl,wc=wc*at+lu*Hl,Sc=Sc*at+cu*Hl,at===1-sc){const at=1/Math.sqrt(oc*oc+_c*_c+wc*wc+Sc*Sc);oc*=at,_c*=at,wc*=at,Sc*=at}}at[st]=oc,at[st+1]=_c,at[st+2]=wc,at[st+3]=Sc}static multiplyQuaternionsFlat(at,st,ot,ut,Hl,rc){const sc=ot[ut],oc=ot[ut+1],_c=ot[ut+2],wc=ot[ut+3],Sc=Hl[rc],iu=Hl[rc+1],su=Hl[rc+2],lu=Hl[rc+3];return at[st]=sc*lu+wc*Sc+oc*su-_c*iu,at[st+1]=oc*lu+wc*iu+_c*Sc-sc*su,at[st+2]=_c*lu+wc*su+sc*iu-oc*Sc,at[st+3]=wc*lu-sc*Sc-oc*iu-_c*su,at}get x(){return this._x}set x(at){this._x=at,this._onChangeCallback()}get y(){return this._y}set y(at){this._y=at,this._onChangeCallback()}get z(){return this._z}set z(at){this._z=at,this._onChangeCallback()}get w(){return this._w}set w(at){this._w=at,this._onChangeCallback()}set(at,st,ot,ut){return this._x=at,this._y=st,this._z=ot,this._w=ut,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(at){return this._x=at.x,this._y=at.y,this._z=at.z,this._w=at.w,this._onChangeCallback(),this}setFromEuler(at,st){void 0===st&&(st=!0);const ot=at._x,ut=at._y,Hl=at._z,rc=at._order,sc=Math.cos,oc=Math.sin,_c=sc(ot/2),wc=sc(ut/2),Sc=sc(Hl/2),iu=oc(ot/2),su=oc(ut/2),lu=oc(Hl/2);switch(rc){case"XYZ":this._x=iu*wc*Sc+_c*su*lu,this._y=_c*su*Sc-iu*wc*lu,this._z=_c*wc*lu+iu*su*Sc,this._w=_c*wc*Sc-iu*su*lu;break;case"YXZ":this._x=iu*wc*Sc+_c*su*lu,this._y=_c*su*Sc-iu*wc*lu,this._z=_c*wc*lu-iu*su*Sc,this._w=_c*wc*Sc+iu*su*lu;break;case"ZXY":this._x=iu*wc*Sc-_c*su*lu,this._y=_c*su*Sc+iu*wc*lu,this._z=_c*wc*lu+iu*su*Sc,this._w=_c*wc*Sc-iu*su*lu;break;case"ZYX":this._x=iu*wc*Sc-_c*su*lu,this._y=_c*su*Sc+iu*wc*lu,this._z=_c*wc*lu-iu*su*Sc,this._w=_c*wc*Sc+iu*su*lu;break;case"YZX":this._x=iu*wc*Sc+_c*su*lu,this._y=_c*su*Sc+iu*wc*lu,this._z=_c*wc*lu-iu*su*Sc,this._w=_c*wc*Sc-iu*su*lu;break;case"XZY":this._x=iu*wc*Sc-_c*su*lu,this._y=_c*su*Sc-iu*wc*lu,this._z=_c*wc*lu+iu*su*Sc,this._w=_c*wc*Sc+iu*su*lu;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+rc)}return!0===st&&this._onChangeCallback(),this}setFromAxisAngle(at,st){const ot=st/2,ut=Math.sin(ot);return this._x=at.x*ut,this._y=at.y*ut,this._z=at.z*ut,this._w=Math.cos(ot),this._onChangeCallback(),this}setFromRotationMatrix(at){const st=at.elements,ot=st[0],ut=st[4],Hl=st[8],rc=st[1],sc=st[5],oc=st[9],_c=st[2],wc=st[6],Sc=st[10],iu=ot+sc+Sc;if(iu>0){const at=.5/Math.sqrt(iu+1);this._w=.25/at,this._x=(wc-oc)*at,this._y=(Hl-_c)*at,this._z=(rc-ut)*at}else if(ot>sc&&ot>Sc){const at=2*Math.sqrt(1+ot-sc-Sc);this._w=(wc-oc)/at,this._x=.25*at,this._y=(ut+rc)/at,this._z=(Hl+_c)/at}else if(sc>Sc){const at=2*Math.sqrt(1+sc-ot-Sc);this._w=(Hl-_c)/at,this._x=(ut+rc)/at,this._y=.25*at,this._z=(oc+wc)/at}else{const at=2*Math.sqrt(1+Sc-ot-sc);this._w=(rc-ut)/at,this._x=(Hl+_c)/at,this._y=(oc+wc)/at,this._z=.25*at}return this._onChangeCallback(),this}setFromUnitVectors(at,st){let ot=at.dot(st)+1;return ot<1e-8?(ot=0,Math.abs(at.x)>Math.abs(at.z)?(this._x=-at.y,this._y=at.x,this._z=0,this._w=ot):(this._x=0,this._y=-at.z,this._z=at.y,this._w=ot)):(this._x=at.y*st.z-at.z*st.y,this._y=at.z*st.x-at.x*st.z,this._z=at.x*st.y-at.y*st.x,this._w=ot),this.normalize()}angleTo(at){return 2*Math.acos(Math.abs(clamp(this.dot(at),-1,1)))}rotateTowards(at,st){const ot=this.angleTo(at);if(0===ot)return this;const ut=Math.min(1,st/ot);return this.slerp(at,ut),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(at){return this._x*at._x+this._y*at._y+this._z*at._z+this._w*at._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let at=this.length();return 0===at?(this._x=0,this._y=0,this._z=0,this._w=1):(at=1/at,this._x=this._x*at,this._y=this._y*at,this._z=this._z*at,this._w=this._w*at),this._onChangeCallback(),this}multiply(at){return this.multiplyQuaternions(this,at)}premultiply(at){return this.multiplyQuaternions(at,this)}multiplyQuaternions(at,st){const ot=at._x,ut=at._y,Hl=at._z,rc=at._w,sc=st._x,oc=st._y,_c=st._z,wc=st._w;return this._x=ot*wc+rc*sc+ut*_c-Hl*oc,this._y=ut*wc+rc*oc+Hl*sc-ot*_c,this._z=Hl*wc+rc*_c+ot*oc-ut*sc,this._w=rc*wc-ot*sc-ut*oc-Hl*_c,this._onChangeCallback(),this}slerp(at,st){if(0===st)return this;if(1===st)return this.copy(at);const ot=this._x,ut=this._y,Hl=this._z,rc=this._w;let sc=rc*at._w+ot*at._x+ut*at._y+Hl*at._z;if(sc<0?(this._w=-at._w,this._x=-at._x,this._y=-at._y,this._z=-at._z,sc=-sc):this.copy(at),sc>=1)return this._w=rc,this._x=ot,this._y=ut,this._z=Hl,this;const oc=1-sc*sc;if(oc<=Number.EPSILON){const at=1-st;return this._w=at*rc+st*this._w,this._x=at*ot+st*this._x,this._y=at*ut+st*this._y,this._z=at*Hl+st*this._z,this.normalize(),this}const _c=Math.sqrt(oc),wc=Math.atan2(_c,sc),Sc=Math.sin((1-st)*wc)/_c,iu=Math.sin(st*wc)/_c;return this._w=rc*Sc+this._w*iu,this._x=ot*Sc+this._x*iu,this._y=ut*Sc+this._y*iu,this._z=Hl*Sc+this._z*iu,this._onChangeCallback(),this}slerpQuaternions(at,st,ot){return this.copy(at).slerp(st,ot)}random(){const at=2*Math.PI*Math.random(),st=2*Math.PI*Math.random(),ot=Math.random(),ut=Math.sqrt(1-ot),Hl=Math.sqrt(ot);return this.set(ut*Math.sin(at),ut*Math.cos(at),Hl*Math.sin(st),Hl*Math.cos(st))}equals(at){return at._x===this._x&&at._y===this._y&&at._z===this._z&&at._w===this._w}fromArray(at,st){return void 0===st&&(st=0),this._x=at[st],this._y=at[st+1],this._z=at[st+2],this._w=at[st+3],this._onChangeCallback(),this}toArray(at,st){return void 0===at&&(at=[]),void 0===st&&(st=0),at[st]=this._x,at[st+1]=this._y,at[st+2]=this._z,at[st+3]=this._w,at}fromBufferAttribute(at,st){return this._x=at.getX(st),this._y=at.getY(st),this._z=at.getZ(st),this._w=at.getW(st),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(at){return this._onChangeCallback=at,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Vector3{constructor(at,st,ot){void 0===at&&(at=0),void 0===st&&(st=0),void 0===ot&&(ot=0),Vector3.prototype.isVector3=!0,this.x=at,this.y=st,this.z=ot}set(at,st,ot){return void 0===ot&&(ot=this.z),this.x=at,this.y=st,this.z=ot,this}setScalar(at){return this.x=at,this.y=at,this.z=at,this}setX(at){return this.x=at,this}setY(at){return this.y=at,this}setZ(at){return this.z=at,this}setComponent(at,st){switch(at){case 0:this.x=st;break;case 1:this.y=st;break;case 2:this.z=st;break;default:throw new Error("index is out of range: "+at)}return this}getComponent(at){switch(at){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+at)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(at){return this.x=at.x,this.y=at.y,this.z=at.z,this}add(at){return this.x+=at.x,this.y+=at.y,this.z+=at.z,this}addScalar(at){return this.x+=at,this.y+=at,this.z+=at,this}addVectors(at,st){return this.x=at.x+st.x,this.y=at.y+st.y,this.z=at.z+st.z,this}addScaledVector(at,st){return this.x+=at.x*st,this.y+=at.y*st,this.z+=at.z*st,this}sub(at){return this.x-=at.x,this.y-=at.y,this.z-=at.z,this}subScalar(at){return this.x-=at,this.y-=at,this.z-=at,this}subVectors(at,st){return this.x=at.x-st.x,this.y=at.y-st.y,this.z=at.z-st.z,this}multiply(at){return this.x*=at.x,this.y*=at.y,this.z*=at.z,this}multiplyScalar(at){return this.x*=at,this.y*=at,this.z*=at,this}multiplyVectors(at,st){return this.x=at.x*st.x,this.y=at.y*st.y,this.z=at.z*st.z,this}applyEuler(at){return this.applyQuaternion(tg.setFromEuler(at))}applyAxisAngle(at,st){return this.applyQuaternion(tg.setFromAxisAngle(at,st))}applyMatrix3(at){const st=this.x,ot=this.y,ut=this.z,Hl=at.elements;return this.x=Hl[0]*st+Hl[3]*ot+Hl[6]*ut,this.y=Hl[1]*st+Hl[4]*ot+Hl[7]*ut,this.z=Hl[2]*st+Hl[5]*ot+Hl[8]*ut,this}applyNormalMatrix(at){return this.applyMatrix3(at).normalize()}applyMatrix4(at){const st=this.x,ot=this.y,ut=this.z,Hl=at.elements,rc=1/(Hl[3]*st+Hl[7]*ot+Hl[11]*ut+Hl[15]);return this.x=(Hl[0]*st+Hl[4]*ot+Hl[8]*ut+Hl[12])*rc,this.y=(Hl[1]*st+Hl[5]*ot+Hl[9]*ut+Hl[13])*rc,this.z=(Hl[2]*st+Hl[6]*ot+Hl[10]*ut+Hl[14])*rc,this}applyQuaternion(at){const st=this.x,ot=this.y,ut=this.z,Hl=at.x,rc=at.y,sc=at.z,oc=at.w,_c=2*(rc*ut-sc*ot),wc=2*(sc*st-Hl*ut),Sc=2*(Hl*ot-rc*st);return this.x=st+oc*_c+rc*Sc-sc*wc,this.y=ot+oc*wc+sc*_c-Hl*Sc,this.z=ut+oc*Sc+Hl*wc-rc*_c,this}project(at){return this.applyMatrix4(at.matrixWorldInverse).applyMatrix4(at.projectionMatrix)}unproject(at){return this.applyMatrix4(at.projectionMatrixInverse).applyMatrix4(at.matrixWorld)}transformDirection(at){const st=this.x,ot=this.y,ut=this.z,Hl=at.elements;return this.x=Hl[0]*st+Hl[4]*ot+Hl[8]*ut,this.y=Hl[1]*st+Hl[5]*ot+Hl[9]*ut,this.z=Hl[2]*st+Hl[6]*ot+Hl[10]*ut,this.normalize()}divide(at){return this.x/=at.x,this.y/=at.y,this.z/=at.z,this}divideScalar(at){return this.multiplyScalar(1/at)}min(at){return this.x=Math.min(this.x,at.x),this.y=Math.min(this.y,at.y),this.z=Math.min(this.z,at.z),this}max(at){return this.x=Math.max(this.x,at.x),this.y=Math.max(this.y,at.y),this.z=Math.max(this.z,at.z),this}clamp(at,st){return this.x=clamp(this.x,at.x,st.x),this.y=clamp(this.y,at.y,st.y),this.z=clamp(this.z,at.z,st.z),this}clampScalar(at,st){return this.x=clamp(this.x,at,st),this.y=clamp(this.y,at,st),this.z=clamp(this.z,at,st),this}clampLength(at,st){const ot=this.length();return this.divideScalar(ot||1).multiplyScalar(clamp(ot,at,st))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(at){return this.x*at.x+this.y*at.y+this.z*at.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(at){return this.normalize().multiplyScalar(at)}lerp(at,st){return this.x+=(at.x-this.x)*st,this.y+=(at.y-this.y)*st,this.z+=(at.z-this.z)*st,this}lerpVectors(at,st,ot){return this.x=at.x+(st.x-at.x)*ot,this.y=at.y+(st.y-at.y)*ot,this.z=at.z+(st.z-at.z)*ot,this}cross(at){return this.crossVectors(this,at)}crossVectors(at,st){const ot=at.x,ut=at.y,Hl=at.z,rc=st.x,sc=st.y,oc=st.z;return this.x=ut*oc-Hl*sc,this.y=Hl*rc-ot*oc,this.z=ot*sc-ut*rc,this}projectOnVector(at){const st=at.lengthSq();if(0===st)return this.set(0,0,0);const ot=at.dot(this)/st;return this.copy(at).multiplyScalar(ot)}projectOnPlane(at){return eg.copy(this).projectOnVector(at),this.sub(eg)}reflect(at){return this.sub(eg.copy(at).multiplyScalar(2*this.dot(at)))}angleTo(at){const st=Math.sqrt(this.lengthSq()*at.lengthSq());if(0===st)return Math.PI/2;const ot=this.dot(at)/st;return Math.acos(clamp(ot,-1,1))}distanceTo(at){return Math.sqrt(this.distanceToSquared(at))}distanceToSquared(at){const st=this.x-at.x,ot=this.y-at.y,ut=this.z-at.z;return st*st+ot*ot+ut*ut}manhattanDistanceTo(at){return Math.abs(this.x-at.x)+Math.abs(this.y-at.y)+Math.abs(this.z-at.z)}setFromSpherical(at){return this.setFromSphericalCoords(at.radius,at.phi,at.theta)}setFromSphericalCoords(at,st,ot){const ut=Math.sin(st)*at;return this.x=ut*Math.sin(ot),this.y=Math.cos(st)*at,this.z=ut*Math.cos(ot),this}setFromCylindrical(at){return this.setFromCylindricalCoords(at.radius,at.theta,at.y)}setFromCylindricalCoords(at,st,ot){return this.x=at*Math.sin(st),this.y=ot,this.z=at*Math.cos(st),this}setFromMatrixPosition(at){const st=at.elements;return this.x=st[12],this.y=st[13],this.z=st[14],this}setFromMatrixScale(at){const st=this.setFromMatrixColumn(at,0).length(),ot=this.setFromMatrixColumn(at,1).length(),ut=this.setFromMatrixColumn(at,2).length();return this.x=st,this.y=ot,this.z=ut,this}setFromMatrixColumn(at,st){return this.fromArray(at.elements,4*st)}setFromMatrix3Column(at,st){return this.fromArray(at.elements,3*st)}setFromEuler(at){return this.x=at._x,this.y=at._y,this.z=at._z,this}setFromColor(at){return this.x=at.r,this.y=at.g,this.z=at.b,this}equals(at){return at.x===this.x&&at.y===this.y&&at.z===this.z}fromArray(at,st){return void 0===st&&(st=0),this.x=at[st],this.y=at[st+1],this.z=at[st+2],this}toArray(at,st){return void 0===at&&(at=[]),void 0===st&&(st=0),at[st]=this.x,at[st+1]=this.y,at[st+2]=this.z,at}fromBufferAttribute(at,st){return this.x=at.getX(st),this.y=at.getY(st),this.z=at.getZ(st),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const at=Math.random()*Math.PI*2,st=2*Math.random()-1,ot=Math.sqrt(1-st*st);return this.x=ot*Math.cos(at),this.y=st,this.z=ot*Math.sin(at),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const eg=new Vector3,tg=new Quaternion;class Matrix3{constructor(at,st,ot,ut,Hl,rc,sc,oc,_c){Matrix3.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==at&&this.set(at,st,ot,ut,Hl,rc,sc,oc,_c)}set(at,st,ot,ut,Hl,rc,sc,oc,_c){const wc=this.elements;return wc[0]=at,wc[1]=ut,wc[2]=sc,wc[3]=st,wc[4]=Hl,wc[5]=oc,wc[6]=ot,wc[7]=rc,wc[8]=_c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(at){const st=this.elements,ot=at.elements;return st[0]=ot[0],st[1]=ot[1],st[2]=ot[2],st[3]=ot[3],st[4]=ot[4],st[5]=ot[5],st[6]=ot[6],st[7]=ot[7],st[8]=ot[8],this}extractBasis(at,st,ot){return at.setFromMatrix3Column(this,0),st.setFromMatrix3Column(this,1),ot.setFromMatrix3Column(this,2),this}setFromMatrix4(at){const st=at.elements;return this.set(st[0],st[4],st[8],st[1],st[5],st[9],st[2],st[6],st[10]),this}multiply(at){return this.multiplyMatrices(this,at)}premultiply(at){return this.multiplyMatrices(at,this)}multiplyMatrices(at,st){const ot=at.elements,ut=st.elements,Hl=this.elements,rc=ot[0],sc=ot[3],oc=ot[6],_c=ot[1],wc=ot[4],Sc=ot[7],iu=ot[2],su=ot[5],lu=ot[8],cu=ut[0],uu=ut[3],pu=ut[6],mu=ut[1],gu=ut[4],Au=ut[7],yu=ut[2],_u=ut[5],xu=ut[8];return Hl[0]=rc*cu+sc*mu+oc*yu,Hl[3]=rc*uu+sc*gu+oc*_u,Hl[6]=rc*pu+sc*Au+oc*xu,Hl[1]=_c*cu+wc*mu+Sc*yu,Hl[4]=_c*uu+wc*gu+Sc*_u,Hl[7]=_c*pu+wc*Au+Sc*xu,Hl[2]=iu*cu+su*mu+lu*yu,Hl[5]=iu*uu+su*gu+lu*_u,Hl[8]=iu*pu+su*Au+lu*xu,this}multiplyScalar(at){const st=this.elements;return st[0]*=at,st[3]*=at,st[6]*=at,st[1]*=at,st[4]*=at,st[7]*=at,st[2]*=at,st[5]*=at,st[8]*=at,this}determinant(){const at=this.elements,st=at[0],ot=at[1],ut=at[2],Hl=at[3],rc=at[4],sc=at[5],oc=at[6],_c=at[7],wc=at[8];return st*rc*wc-st*sc*_c-ot*Hl*wc+ot*sc*oc+ut*Hl*_c-ut*rc*oc}invert(){const at=this.elements,st=at[0],ot=at[1],ut=at[2],Hl=at[3],rc=at[4],sc=at[5],oc=at[6],_c=at[7],wc=at[8],Sc=wc*rc-sc*_c,iu=sc*oc-wc*Hl,su=_c*Hl-rc*oc,lu=st*Sc+ot*iu+ut*su;if(0===lu)return this.set(0,0,0,0,0,0,0,0,0);const cu=1/lu;return at[0]=Sc*cu,at[1]=(ut*_c-wc*ot)*cu,at[2]=(sc*ot-ut*rc)*cu,at[3]=iu*cu,at[4]=(wc*st-ut*oc)*cu,at[5]=(ut*Hl-sc*st)*cu,at[6]=su*cu,at[7]=(ot*oc-_c*st)*cu,at[8]=(rc*st-ot*Hl)*cu,this}transpose(){let at;const st=this.elements;return at=st[1],st[1]=st[3],st[3]=at,at=st[2],st[2]=st[6],st[6]=at,at=st[5],st[5]=st[7],st[7]=at,this}getNormalMatrix(at){return this.setFromMatrix4(at).invert().transpose()}transposeIntoArray(at){const st=this.elements;return at[0]=st[0],at[1]=st[3],at[2]=st[6],at[3]=st[1],at[4]=st[4],at[5]=st[7],at[6]=st[2],at[7]=st[5],at[8]=st[8],this}setUvTransform(at,st,ot,ut,Hl,rc,sc){const oc=Math.cos(Hl),_c=Math.sin(Hl);return this.set(ot*oc,ot*_c,-ot*(oc*rc+_c*sc)+rc+at,-ut*_c,ut*oc,-ut*(-_c*rc+oc*sc)+sc+st,0,0,1),this}scale(at,st){return this.premultiply(ig.makeScale(at,st)),this}rotate(at){return this.premultiply(ig.makeRotation(-at)),this}translate(at,st){return this.premultiply(ig.makeTranslation(at,st)),this}makeTranslation(at,st){return at.isVector2?this.set(1,0,at.x,0,1,at.y,0,0,1):this.set(1,0,at,0,1,st,0,0,1),this}makeRotation(at){const st=Math.cos(at),ot=Math.sin(at);return this.set(st,-ot,0,ot,st,0,0,0,1),this}makeScale(at,st){return this.set(at,0,0,0,st,0,0,0,1),this}equals(at){const st=this.elements,ot=at.elements;for(let ut=0;ut<9;ut++)if(st[ut]!==ot[ut])return!1;return!0}fromArray(at,st){void 0===st&&(st=0);for(let ot=0;ot<9;ot++)this.elements[ot]=at[ot+st];return this}toArray(at,st){void 0===at&&(at=[]),void 0===st&&(st=0);const ot=this.elements;return at[st]=ot[0],at[st+1]=ot[1],at[st+2]=ot[2],at[st+3]=ot[3],at[st+4]=ot[4],at[st+5]=ot[5],at[st+6]=ot[6],at[st+7]=ot[7],at[st+8]=ot[8],at}clone(){return(new this.constructor).fromArray(this.elements)}}const ig=new Matrix3;function arrayNeedsUint32(at){for(let st=at.length-1;st>=0;--st)if(at[st]>=65535)return!0;return!1}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;function createElementNS(at){return document.createElementNS("http://www.w3.org/1999/xhtml",at)}function createCanvasElement(){const at=createElementNS("canvas");return at.style.display="block",at}const ng={};function warnOnce(at){at in ng||(ng[at]=!0,console.warn(at))}function probeAsync(at,st,ot){return new Promise((function(ut,Hl){setTimeout((function probe(){switch(at.clientWaitSync(st,at.SYNC_FLUSH_COMMANDS_BIT,0)){case at.WAIT_FAILED:Hl();break;case at.TIMEOUT_EXPIRED:setTimeout(probe,ot);break;default:ut()}}),ot)}))}const rg=(new Matrix3).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),ag=(new Matrix3).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function createColorManagement(){const at={enabled:!0,workingColorSpace:Pm,spaces:{},convert:function(at,st,ot){return!1!==this.enabled&&st!==ot&&st&&ot?(this.spaces[st].transfer===Nm&&(at.r=SRGBToLinear(at.r),at.g=SRGBToLinear(at.g),at.b=SRGBToLinear(at.b)),this.spaces[st].primaries!==this.spaces[ot].primaries&&(at.applyMatrix3(this.spaces[st].toXYZ),at.applyMatrix3(this.spaces[ot].fromXYZ)),this.spaces[ot].transfer===Nm&&(at.r=LinearToSRGB(at.r),at.g=LinearToSRGB(at.g),at.b=LinearToSRGB(at.b)),at):at},workingToColorSpace:function(at,st){return this.convert(at,this.workingColorSpace,st)},colorSpaceToWorking:function(at,st){return this.convert(at,st,this.workingColorSpace)},getPrimaries:function(at){return this.spaces[at].primaries},getTransfer:function(at){return at===Dm?zm:this.spaces[at].transfer},getLuminanceCoefficients:function(at,st){return void 0===st&&(st=this.workingColorSpace),at.fromArray(this.spaces[st].luminanceCoefficients)},define:function(at){Object.assign(this.spaces,at)},_getMatrix:function(at,st,ot){return at.copy(this.spaces[st].toXYZ).multiply(this.spaces[ot].fromXYZ)},_getDrawingBufferColorSpace:function(at){return this.spaces[at].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(at){return void 0===at&&(at=this.workingColorSpace),this.spaces[at].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(st,ot){return warnOnce("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),at.workingToColorSpace(st,ot)},toWorkingColorSpace:function(st,ot){return warnOnce("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),at.colorSpaceToWorking(st,ot)}},st=[.64,.33,.3,.6,.15,.06],ot=[.2126,.7152,.0722],ut=[.3127,.329];return at.define({[Pm]:{primaries:st,whitePoint:ut,transfer:zm,toXYZ:rg,fromXYZ:ag,luminanceCoefficients:ot,workingColorSpaceConfig:{unpackColorSpace:Lm},outputColorSpaceConfig:{drawingBufferColorSpace:Lm}},[Lm]:{primaries:st,whitePoint:ut,transfer:Nm,toXYZ:rg,fromXYZ:ag,luminanceCoefficients:ot,outputColorSpaceConfig:{drawingBufferColorSpace:Lm}}}),at}const sg=createColorManagement();function SRGBToLinear(at){return at<.04045?.0773993808*at:Math.pow(.9478672986*at+.0521327014,2.4)}function LinearToSRGB(at){return at<.0031308?12.92*at:1.055*Math.pow(at,.41666)-.055}let og;class ImageUtils{static getDataURL(at,st){if(void 0===st&&(st="image/png"),/^data:/i.test(at.src))return at.src;if("undefined"===typeof HTMLCanvasElement)return at.src;let ot;if(at instanceof HTMLCanvasElement)ot=at;else{void 0===og&&(og=createElementNS("canvas")),og.width=at.width,og.height=at.height;const st=og.getContext("2d");at instanceof ImageData?st.putImageData(at,0,0):st.drawImage(at,0,0,at.width,at.height),ot=og}return ot.toDataURL(st)}static sRGBToLinear(at){if("undefined"!==typeof HTMLImageElement&&at instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&at instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&at instanceof ImageBitmap){const st=createElementNS("canvas");st.width=at.width,st.height=at.height;const ot=st.getContext("2d");ot.drawImage(at,0,0,at.width,at.height);const ut=ot.getImageData(0,0,at.width,at.height),Hl=ut.data;for(let at=0;at<Hl.length;at++)Hl[at]=255*SRGBToLinear(Hl[at]/255);return ot.putImageData(ut,0,0),st}if(at.data){const st=at.data.slice(0);for(let at=0;at<st.length;at++)st instanceof Uint8Array||st instanceof Uint8ClampedArray?st[at]=Math.floor(255*SRGBToLinear(st[at]/255)):st[at]=SRGBToLinear(st[at]);return{data:st,width:at.width,height:at.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),at}}let lg=0;class Source{constructor(at){void 0===at&&(at=null),this.isSource=!0,Object.defineProperty(this,"id",{value:lg++}),this.uuid=generateUUID(),this.data=at,this.dataReady=!0,this.version=0}getSize(at){const st=this.data;return st instanceof HTMLVideoElement?at.set(st.videoWidth,st.videoHeight,0):st instanceof VideoFrame?at.set(st.displayHeight,st.displayWidth,0):null!==st?at.set(st.width,st.height,st.depth||0):at.set(0,0,0),at}set needsUpdate(at){!0===at&&this.version++}toJSON(at){const st=void 0===at||"string"===typeof at;if(!st&&void 0!==at.images[this.uuid])return at.images[this.uuid];const ot={uuid:this.uuid,url:""},ut=this.data;if(null!==ut){let at;if(Array.isArray(ut)){at=[];for(let st=0,ot=ut.length;st<ot;st++)ut[st].isDataTexture?at.push(serializeImage(ut[st].image)):at.push(serializeImage(ut[st]))}else at=serializeImage(ut);ot.url=at}return st||(at.images[this.uuid]=ot),ot}}function serializeImage(at){return"undefined"!==typeof HTMLImageElement&&at instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&at instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&at instanceof ImageBitmap?ImageUtils.getDataURL(at):at.data?{data:Array.from(at.data),width:at.width,height:at.height,type:at.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let cg=0;const ug=new Vector3;class Texture extends EventDispatcher{constructor(at,st,ot,ut,Hl,rc,sc,oc,_c,wc){void 0===at&&(at=Texture.DEFAULT_IMAGE),void 0===st&&(st=Texture.DEFAULT_MAPPING),void 0===ot&&(ot=Rd),void 0===ut&&(ut=Rd),void 0===Hl&&(Hl=Ud),void 0===rc&&(rc=Gd),void 0===sc&&(sc=Np),void 0===oc&&(oc=Zd),void 0===_c&&(_c=Texture.DEFAULT_ANISOTROPY),void 0===wc&&(wc=Dm),super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:cg++}),this.uuid=generateUUID(),this.name="",this.source=new Source(at),this.mipmaps=[],this.mapping=st,this.channel=0,this.wrapS=ot,this.wrapT=ut,this.magFilter=Hl,this.minFilter=rc,this.anisotropy=_c,this.format=sc,this.internalFormat=null,this.type=oc,this.offset=new Vector2(0,0),this.repeat=new Vector2(1,1),this.center=new Vector2(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Matrix3,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=wc,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(at&&at.depth&&at.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(ug).x}get height(){return this.source.getSize(ug).y}get depth(){return this.source.getSize(ug).z}get image(){return this.source.data}set image(at){void 0===at&&(at=null),this.source.data=at}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(at,st){this.updateRanges.push({start:at,count:st})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return(new this.constructor).copy(this)}copy(at){return this.name=at.name,this.source=at.source,this.mipmaps=at.mipmaps.slice(0),this.mapping=at.mapping,this.channel=at.channel,this.wrapS=at.wrapS,this.wrapT=at.wrapT,this.magFilter=at.magFilter,this.minFilter=at.minFilter,this.anisotropy=at.anisotropy,this.format=at.format,this.internalFormat=at.internalFormat,this.type=at.type,this.offset.copy(at.offset),this.repeat.copy(at.repeat),this.center.copy(at.center),this.rotation=at.rotation,this.matrixAutoUpdate=at.matrixAutoUpdate,this.matrix.copy(at.matrix),this.generateMipmaps=at.generateMipmaps,this.premultiplyAlpha=at.premultiplyAlpha,this.flipY=at.flipY,this.unpackAlignment=at.unpackAlignment,this.colorSpace=at.colorSpace,this.renderTarget=at.renderTarget,this.isRenderTargetTexture=at.isRenderTargetTexture,this.isArrayTexture=at.isArrayTexture,this.userData=JSON.parse(JSON.stringify(at.userData)),this.needsUpdate=!0,this}setValues(at){for(const st in at){const ot=at[st];if(void 0===ot){console.warn(`THREE.Texture.setValues(): parameter '${st}' has value of undefined.`);continue}const ut=this[st];void 0!==ut?ut&&ot&&ut.isVector2&&ot.isVector2||ut&&ot&&ut.isVector3&&ot.isVector3||ut&&ot&&ut.isMatrix3&&ot.isMatrix3?ut.copy(ot):this[st]=ot:console.warn(`THREE.Texture.setValues(): property '${st}' does not exist.`)}}toJSON(at){const st=void 0===at||"string"===typeof at;if(!st&&void 0!==at.textures[this.uuid])return at.textures[this.uuid];const ot={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(at).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(ot.userData=this.userData),st||(at.textures[this.uuid]=ot),ot}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(at){if(300!==this.mapping)return at;if(at.applyMatrix3(this.matrix),at.x<0||at.x>1)switch(this.wrapS){case Nd:at.x=at.x-Math.floor(at.x);break;case Rd:at.x=at.x<0?0:1;break;case Od:1===Math.abs(Math.floor(at.x)%2)?at.x=Math.ceil(at.x)-at.x:at.x=at.x-Math.floor(at.x)}if(at.y<0||at.y>1)switch(this.wrapT){case Nd:at.y=at.y-Math.floor(at.y);break;case Rd:at.y=at.y<0?0:1;break;case Od:1===Math.abs(Math.floor(at.y)%2)?at.y=Math.ceil(at.y)-at.y:at.y=at.y-Math.floor(at.y)}return this.flipY&&(at.y=1-at.y),at}set needsUpdate(at){!0===at&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(at){!0===at&&this.pmremVersion++}}Texture.DEFAULT_IMAGE=null,Texture.DEFAULT_MAPPING=300,Texture.DEFAULT_ANISOTROPY=1;class Vector4{constructor(at,st,ot,ut){void 0===at&&(at=0),void 0===st&&(st=0),void 0===ot&&(ot=0),void 0===ut&&(ut=1),Vector4.prototype.isVector4=!0,this.x=at,this.y=st,this.z=ot,this.w=ut}get width(){return this.z}set width(at){this.z=at}get height(){return this.w}set height(at){this.w=at}set(at,st,ot,ut){return this.x=at,this.y=st,this.z=ot,this.w=ut,this}setScalar(at){return this.x=at,this.y=at,this.z=at,this.w=at,this}setX(at){return this.x=at,this}setY(at){return this.y=at,this}setZ(at){return this.z=at,this}setW(at){return this.w=at,this}setComponent(at,st){switch(at){case 0:this.x=st;break;case 1:this.y=st;break;case 2:this.z=st;break;case 3:this.w=st;break;default:throw new Error("index is out of range: "+at)}return this}getComponent(at){switch(at){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+at)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(at){return this.x=at.x,this.y=at.y,this.z=at.z,this.w=void 0!==at.w?at.w:1,this}add(at){return this.x+=at.x,this.y+=at.y,this.z+=at.z,this.w+=at.w,this}addScalar(at){return this.x+=at,this.y+=at,this.z+=at,this.w+=at,this}addVectors(at,st){return this.x=at.x+st.x,this.y=at.y+st.y,this.z=at.z+st.z,this.w=at.w+st.w,this}addScaledVector(at,st){return this.x+=at.x*st,this.y+=at.y*st,this.z+=at.z*st,this.w+=at.w*st,this}sub(at){return this.x-=at.x,this.y-=at.y,this.z-=at.z,this.w-=at.w,this}subScalar(at){return this.x-=at,this.y-=at,this.z-=at,this.w-=at,this}subVectors(at,st){return this.x=at.x-st.x,this.y=at.y-st.y,this.z=at.z-st.z,this.w=at.w-st.w,this}multiply(at){return this.x*=at.x,this.y*=at.y,this.z*=at.z,this.w*=at.w,this}multiplyScalar(at){return this.x*=at,this.y*=at,this.z*=at,this.w*=at,this}applyMatrix4(at){const st=this.x,ot=this.y,ut=this.z,Hl=this.w,rc=at.elements;return this.x=rc[0]*st+rc[4]*ot+rc[8]*ut+rc[12]*Hl,this.y=rc[1]*st+rc[5]*ot+rc[9]*ut+rc[13]*Hl,this.z=rc[2]*st+rc[6]*ot+rc[10]*ut+rc[14]*Hl,this.w=rc[3]*st+rc[7]*ot+rc[11]*ut+rc[15]*Hl,this}divide(at){return this.x/=at.x,this.y/=at.y,this.z/=at.z,this.w/=at.w,this}divideScalar(at){return this.multiplyScalar(1/at)}setAxisAngleFromQuaternion(at){this.w=2*Math.acos(at.w);const st=Math.sqrt(1-at.w*at.w);return st<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=at.x/st,this.y=at.y/st,this.z=at.z/st),this}setAxisAngleFromRotationMatrix(at){let st,ot,ut,Hl;const rc=.01,sc=.1,oc=at.elements,_c=oc[0],wc=oc[4],Sc=oc[8],iu=oc[1],su=oc[5],lu=oc[9],cu=oc[2],uu=oc[6],pu=oc[10];if(Math.abs(wc-iu)<rc&&Math.abs(Sc-cu)<rc&&Math.abs(lu-uu)<rc){if(Math.abs(wc+iu)<sc&&Math.abs(Sc+cu)<sc&&Math.abs(lu+uu)<sc&&Math.abs(_c+su+pu-3)<sc)return this.set(1,0,0,0),this;st=Math.PI;const at=(_c+1)/2,oc=(su+1)/2,mu=(pu+1)/2,gu=(wc+iu)/4,Au=(Sc+cu)/4,yu=(lu+uu)/4;return at>oc&&at>mu?at<rc?(ot=0,ut=.707106781,Hl=.707106781):(ot=Math.sqrt(at),ut=gu/ot,Hl=Au/ot):oc>mu?oc<rc?(ot=.707106781,ut=0,Hl=.707106781):(ut=Math.sqrt(oc),ot=gu/ut,Hl=yu/ut):mu<rc?(ot=.707106781,ut=.707106781,Hl=0):(Hl=Math.sqrt(mu),ot=Au/Hl,ut=yu/Hl),this.set(ot,ut,Hl,st),this}let mu=Math.sqrt((uu-lu)*(uu-lu)+(Sc-cu)*(Sc-cu)+(iu-wc)*(iu-wc));return Math.abs(mu)<.001&&(mu=1),this.x=(uu-lu)/mu,this.y=(Sc-cu)/mu,this.z=(iu-wc)/mu,this.w=Math.acos((_c+su+pu-1)/2),this}setFromMatrixPosition(at){const st=at.elements;return this.x=st[12],this.y=st[13],this.z=st[14],this.w=st[15],this}min(at){return this.x=Math.min(this.x,at.x),this.y=Math.min(this.y,at.y),this.z=Math.min(this.z,at.z),this.w=Math.min(this.w,at.w),this}max(at){return this.x=Math.max(this.x,at.x),this.y=Math.max(this.y,at.y),this.z=Math.max(this.z,at.z),this.w=Math.max(this.w,at.w),this}clamp(at,st){return this.x=clamp(this.x,at.x,st.x),this.y=clamp(this.y,at.y,st.y),this.z=clamp(this.z,at.z,st.z),this.w=clamp(this.w,at.w,st.w),this}clampScalar(at,st){return this.x=clamp(this.x,at,st),this.y=clamp(this.y,at,st),this.z=clamp(this.z,at,st),this.w=clamp(this.w,at,st),this}clampLength(at,st){const ot=this.length();return this.divideScalar(ot||1).multiplyScalar(clamp(ot,at,st))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(at){return this.x*at.x+this.y*at.y+this.z*at.z+this.w*at.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(at){return this.normalize().multiplyScalar(at)}lerp(at,st){return this.x+=(at.x-this.x)*st,this.y+=(at.y-this.y)*st,this.z+=(at.z-this.z)*st,this.w+=(at.w-this.w)*st,this}lerpVectors(at,st,ot){return this.x=at.x+(st.x-at.x)*ot,this.y=at.y+(st.y-at.y)*ot,this.z=at.z+(st.z-at.z)*ot,this.w=at.w+(st.w-at.w)*ot,this}equals(at){return at.x===this.x&&at.y===this.y&&at.z===this.z&&at.w===this.w}fromArray(at,st){return void 0===st&&(st=0),this.x=at[st],this.y=at[st+1],this.z=at[st+2],this.w=at[st+3],this}toArray(at,st){return void 0===at&&(at=[]),void 0===st&&(st=0),at[st]=this.x,at[st+1]=this.y,at[st+2]=this.z,at[st+3]=this.w,at}fromBufferAttribute(at,st){return this.x=at.getX(st),this.y=at.getY(st),this.z=at.getZ(st),this.w=at.getW(st),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class RenderTarget extends EventDispatcher{constructor(at,st,ot){void 0===at&&(at=1),void 0===st&&(st=1),void 0===ot&&(ot={}),super(),ot=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ud,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},ot),this.isRenderTarget=!0,this.width=at,this.height=st,this.depth=ot.depth,this.scissor=new Vector4(0,0,at,st),this.scissorTest=!1,this.viewport=new Vector4(0,0,at,st);const ut={width:at,height:st,depth:ot.depth},Hl=new Texture(ut);this.textures=[];const rc=ot.count;for(let sc=0;sc<rc;sc++)this.textures[sc]=Hl.clone(),this.textures[sc].isRenderTargetTexture=!0,this.textures[sc].renderTarget=this;this._setTextureOptions(ot),this.depthBuffer=ot.depthBuffer,this.stencilBuffer=ot.stencilBuffer,this.resolveDepthBuffer=ot.resolveDepthBuffer,this.resolveStencilBuffer=ot.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=ot.depthTexture,this.samples=ot.samples,this.multiview=ot.multiview}_setTextureOptions(at){void 0===at&&(at={});const st={minFilter:Ud,generateMipmaps:!1,flipY:!1,internalFormat:null};void 0!==at.mapping&&(st.mapping=at.mapping),void 0!==at.wrapS&&(st.wrapS=at.wrapS),void 0!==at.wrapT&&(st.wrapT=at.wrapT),void 0!==at.wrapR&&(st.wrapR=at.wrapR),void 0!==at.magFilter&&(st.magFilter=at.magFilter),void 0!==at.minFilter&&(st.minFilter=at.minFilter),void 0!==at.format&&(st.format=at.format),void 0!==at.type&&(st.type=at.type),void 0!==at.anisotropy&&(st.anisotropy=at.anisotropy),void 0!==at.colorSpace&&(st.colorSpace=at.colorSpace),void 0!==at.flipY&&(st.flipY=at.flipY),void 0!==at.generateMipmaps&&(st.generateMipmaps=at.generateMipmaps),void 0!==at.internalFormat&&(st.internalFormat=at.internalFormat);for(let ot=0;ot<this.textures.length;ot++){this.textures[ot].setValues(st)}}get texture(){return this.textures[0]}set texture(at){this.textures[0]=at}set depthTexture(at){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==at&&(at.renderTarget=this),this._depthTexture=at}get depthTexture(){return this._depthTexture}setSize(at,st,ot){if(void 0===ot&&(ot=1),this.width!==at||this.height!==st||this.depth!==ot){this.width=at,this.height=st,this.depth=ot;for(let ut=0,Hl=this.textures.length;ut<Hl;ut++)this.textures[ut].image.width=at,this.textures[ut].image.height=st,this.textures[ut].image.depth=ot,this.textures[ut].isArrayTexture=this.textures[ut].image.depth>1;this.dispose()}this.viewport.set(0,0,at,st),this.scissor.set(0,0,at,st)}clone(){return(new this.constructor).copy(this)}copy(at){this.width=at.width,this.height=at.height,this.depth=at.depth,this.scissor.copy(at.scissor),this.scissorTest=at.scissorTest,this.viewport.copy(at.viewport),this.textures.length=0;for(let st=0,ot=at.textures.length;st<ot;st++){this.textures[st]=at.textures[st].clone(),this.textures[st].isRenderTargetTexture=!0,this.textures[st].renderTarget=this;const ot=Object.assign({},at.textures[st].image);this.textures[st].source=new Source(ot)}return this.depthBuffer=at.depthBuffer,this.stencilBuffer=at.stencilBuffer,this.resolveDepthBuffer=at.resolveDepthBuffer,this.resolveStencilBuffer=at.resolveStencilBuffer,null!==at.depthTexture&&(this.depthTexture=at.depthTexture.clone()),this.samples=at.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class WebGLRenderTarget extends RenderTarget{constructor(at,st,ot){void 0===at&&(at=1),void 0===st&&(st=1),void 0===ot&&(ot={}),super(at,st,ot),this.isWebGLRenderTarget=!0}}class DataArrayTexture extends Texture{constructor(at,st,ot,ut){void 0===at&&(at=null),void 0===st&&(st=1),void 0===ot&&(ot=1),void 0===ut&&(ut=1),super(null),this.isDataArrayTexture=!0,this.image={data:at,width:st,height:ot,depth:ut},this.magFilter=Bd,this.minFilter=Bd,this.wrapR=Rd,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(at){this.layerUpdates.add(at)}clearLayerUpdates(){this.layerUpdates.clear()}}class Data3DTexture extends Texture{constructor(at,st,ot,ut){void 0===at&&(at=null),void 0===st&&(st=1),void 0===ot&&(ot=1),void 0===ut&&(ut=1),super(null),this.isData3DTexture=!0,this.image={data:at,width:st,height:ot,depth:ut},this.magFilter=Bd,this.minFilter=Bd,this.wrapR=Rd,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Box3{constructor(at,st){void 0===at&&(at=new Vector3(1/0,1/0,1/0)),void 0===st&&(st=new Vector3(-1/0,-1/0,-1/0)),this.isBox3=!0,this.min=at,this.max=st}set(at,st){return this.min.copy(at),this.max.copy(st),this}setFromArray(at){this.makeEmpty();for(let st=0,ot=at.length;st<ot;st+=3)this.expandByPoint(dg.fromArray(at,st));return this}setFromBufferAttribute(at){this.makeEmpty();for(let st=0,ot=at.count;st<ot;st++)this.expandByPoint(dg.fromBufferAttribute(at,st));return this}setFromPoints(at){this.makeEmpty();for(let st=0,ot=at.length;st<ot;st++)this.expandByPoint(at[st]);return this}setFromCenterAndSize(at,st){const ot=dg.copy(st).multiplyScalar(.5);return this.min.copy(at).sub(ot),this.max.copy(at).add(ot),this}setFromObject(at,st){return void 0===st&&(st=!1),this.makeEmpty(),this.expandByObject(at,st)}clone(){return(new this.constructor).copy(this)}copy(at){return this.min.copy(at.min),this.max.copy(at.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(at){return this.isEmpty()?at.set(0,0,0):at.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(at){return this.isEmpty()?at.set(0,0,0):at.subVectors(this.max,this.min)}expandByPoint(at){return this.min.min(at),this.max.max(at),this}expandByVector(at){return this.min.sub(at),this.max.add(at),this}expandByScalar(at){return this.min.addScalar(-at),this.max.addScalar(at),this}expandByObject(at,st){void 0===st&&(st=!1),at.updateWorldMatrix(!1,!1);const ot=at.geometry;if(void 0!==ot){const ut=ot.getAttribute("position");if(!0===st&&void 0!==ut&&!0!==at.isInstancedMesh)for(let st=0,ot=ut.count;st<ot;st++)!0===at.isMesh?at.getVertexPosition(st,dg):dg.fromBufferAttribute(ut,st),dg.applyMatrix4(at.matrixWorld),this.expandByPoint(dg);else void 0!==at.boundingBox?(null===at.boundingBox&&at.computeBoundingBox(),pg.copy(at.boundingBox)):(null===ot.boundingBox&&ot.computeBoundingBox(),pg.copy(ot.boundingBox)),pg.applyMatrix4(at.matrixWorld),this.union(pg)}const ut=at.children;for(let Hl=0,rc=ut.length;Hl<rc;Hl++)this.expandByObject(ut[Hl],st);return this}containsPoint(at){return at.x>=this.min.x&&at.x<=this.max.x&&at.y>=this.min.y&&at.y<=this.max.y&&at.z>=this.min.z&&at.z<=this.max.z}containsBox(at){return this.min.x<=at.min.x&&at.max.x<=this.max.x&&this.min.y<=at.min.y&&at.max.y<=this.max.y&&this.min.z<=at.min.z&&at.max.z<=this.max.z}getParameter(at,st){return st.set((at.x-this.min.x)/(this.max.x-this.min.x),(at.y-this.min.y)/(this.max.y-this.min.y),(at.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(at){return at.max.x>=this.min.x&&at.min.x<=this.max.x&&at.max.y>=this.min.y&&at.min.y<=this.max.y&&at.max.z>=this.min.z&&at.min.z<=this.max.z}intersectsSphere(at){return this.clampPoint(at.center,dg),dg.distanceToSquared(at.center)<=at.radius*at.radius}intersectsPlane(at){let st,ot;return at.normal.x>0?(st=at.normal.x*this.min.x,ot=at.normal.x*this.max.x):(st=at.normal.x*this.max.x,ot=at.normal.x*this.min.x),at.normal.y>0?(st+=at.normal.y*this.min.y,ot+=at.normal.y*this.max.y):(st+=at.normal.y*this.max.y,ot+=at.normal.y*this.min.y),at.normal.z>0?(st+=at.normal.z*this.min.z,ot+=at.normal.z*this.max.z):(st+=at.normal.z*this.max.z,ot+=at.normal.z*this.min.z),st<=-at.constant&&ot>=-at.constant}intersectsTriangle(at){if(this.isEmpty())return!1;this.getCenter(_g),xg.subVectors(this.max,_g),mg.subVectors(at.a,_g),gg.subVectors(at.b,_g),fg.subVectors(at.c,_g),Ag.subVectors(gg,mg),yg.subVectors(fg,gg),vg.subVectors(mg,fg);let st=[0,-Ag.z,Ag.y,0,-yg.z,yg.y,0,-vg.z,vg.y,Ag.z,0,-Ag.x,yg.z,0,-yg.x,vg.z,0,-vg.x,-Ag.y,Ag.x,0,-yg.y,yg.x,0,-vg.y,vg.x,0];return!!satForAxes(st,mg,gg,fg,xg)&&(st=[1,0,0,0,1,0,0,0,1],!!satForAxes(st,mg,gg,fg,xg)&&(bg.crossVectors(Ag,yg),st=[bg.x,bg.y,bg.z],satForAxes(st,mg,gg,fg,xg)))}clampPoint(at,st){return st.copy(at).clamp(this.min,this.max)}distanceToPoint(at){return this.clampPoint(at,dg).distanceTo(at)}getBoundingSphere(at){return this.isEmpty()?at.makeEmpty():(this.getCenter(at.center),at.radius=.5*this.getSize(dg).length()),at}intersect(at){return this.min.max(at.min),this.max.min(at.max),this.isEmpty()&&this.makeEmpty(),this}union(at){return this.min.min(at.min),this.max.max(at.max),this}applyMatrix4(at){return this.isEmpty()||(hg[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(at),hg[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(at),hg[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(at),hg[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(at),hg[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(at),hg[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(at),hg[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(at),hg[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(at),this.setFromPoints(hg)),this}translate(at){return this.min.add(at),this.max.add(at),this}equals(at){return at.min.equals(this.min)&&at.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(at){return this.min.fromArray(at.min),this.max.fromArray(at.max),this}}const hg=[new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3,new Vector3],dg=new Vector3,pg=new Box3,mg=new Vector3,gg=new Vector3,fg=new Vector3,Ag=new Vector3,yg=new Vector3,vg=new Vector3,_g=new Vector3,xg=new Vector3,bg=new Vector3,wg=new Vector3;function satForAxes(at,st,ot,ut,Hl){for(let rc=0,sc=at.length-3;rc<=sc;rc+=3){wg.fromArray(at,rc);const sc=Hl.x*Math.abs(wg.x)+Hl.y*Math.abs(wg.y)+Hl.z*Math.abs(wg.z),oc=st.dot(wg),_c=ot.dot(wg),wc=ut.dot(wg);if(Math.max(-Math.max(oc,_c,wc),Math.min(oc,_c,wc))>sc)return!1}return!0}const Eg=new Box3,Mg=new Vector3,Sg=new Vector3;class Sphere{constructor(at,st){void 0===at&&(at=new Vector3),void 0===st&&(st=-1),this.isSphere=!0,this.center=at,this.radius=st}set(at,st){return this.center.copy(at),this.radius=st,this}setFromPoints(at,st){const ot=this.center;void 0!==st?ot.copy(st):Eg.setFromPoints(at).getCenter(ot);let ut=0;for(let Hl=0,rc=at.length;Hl<rc;Hl++)ut=Math.max(ut,ot.distanceToSquared(at[Hl]));return this.radius=Math.sqrt(ut),this}copy(at){return this.center.copy(at.center),this.radius=at.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(at){return at.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(at){return at.distanceTo(this.center)-this.radius}intersectsSphere(at){const st=this.radius+at.radius;return at.center.distanceToSquared(this.center)<=st*st}intersectsBox(at){return at.intersectsSphere(this)}intersectsPlane(at){return Math.abs(at.distanceToPoint(this.center))<=this.radius}clampPoint(at,st){const ot=this.center.distanceToSquared(at);return st.copy(at),ot>this.radius*this.radius&&(st.sub(this.center).normalize(),st.multiplyScalar(this.radius).add(this.center)),st}getBoundingBox(at){return this.isEmpty()?(at.makeEmpty(),at):(at.set(this.center,this.center),at.expandByScalar(this.radius),at)}applyMatrix4(at){return this.center.applyMatrix4(at),this.radius=this.radius*at.getMaxScaleOnAxis(),this}translate(at){return this.center.add(at),this}expandByPoint(at){if(this.isEmpty())return this.center.copy(at),this.radius=0,this;Mg.subVectors(at,this.center);const st=Mg.lengthSq();if(st>this.radius*this.radius){const at=Math.sqrt(st),ot=.5*(at-this.radius);this.center.addScaledVector(Mg,ot/at),this.radius+=ot}return this}union(at){return at.isEmpty()?this:this.isEmpty()?(this.copy(at),this):(!0===this.center.equals(at.center)?this.radius=Math.max(this.radius,at.radius):(Sg.subVectors(at.center,this.center).setLength(at.radius),this.expandByPoint(Mg.copy(at.center).add(Sg)),this.expandByPoint(Mg.copy(at.center).sub(Sg))),this)}equals(at){return at.center.equals(this.center)&&at.radius===this.radius}clone(){return(new this.constructor).copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(at){return this.radius=at.radius,this.center.fromArray(at.center),this}}const Tg=new Vector3,Cg=new Vector3,kg=new Vector3,Ig=new Vector3,Dg=new Vector3,Lg=new Vector3,Pg=new Vector3;class Ray{constructor(at,st){void 0===at&&(at=new Vector3),void 0===st&&(st=new Vector3(0,0,-1)),this.origin=at,this.direction=st}set(at,st){return this.origin.copy(at),this.direction.copy(st),this}copy(at){return this.origin.copy(at.origin),this.direction.copy(at.direction),this}at(at,st){return st.copy(this.origin).addScaledVector(this.direction,at)}lookAt(at){return this.direction.copy(at).sub(this.origin).normalize(),this}recast(at){return this.origin.copy(this.at(at,Tg)),this}closestPointToPoint(at,st){st.subVectors(at,this.origin);const ot=st.dot(this.direction);return ot<0?st.copy(this.origin):st.copy(this.origin).addScaledVector(this.direction,ot)}distanceToPoint(at){return Math.sqrt(this.distanceSqToPoint(at))}distanceSqToPoint(at){const st=Tg.subVectors(at,this.origin).dot(this.direction);return st<0?this.origin.distanceToSquared(at):(Tg.copy(this.origin).addScaledVector(this.direction,st),Tg.distanceToSquared(at))}distanceSqToSegment(at,st,ot,ut){Cg.copy(at).add(st).multiplyScalar(.5),kg.copy(st).sub(at).normalize(),Ig.copy(this.origin).sub(Cg);const Hl=.5*at.distanceTo(st),rc=-this.direction.dot(kg),sc=Ig.dot(this.direction),oc=-Ig.dot(kg),_c=Ig.lengthSq(),wc=Math.abs(1-rc*rc);let Sc,iu,su,lu;if(wc>0)if(Sc=rc*oc-sc,iu=rc*sc-oc,lu=Hl*wc,Sc>=0)if(iu>=-lu)if(iu<=lu){const at=1/wc;Sc*=at,iu*=at,su=Sc*(Sc+rc*iu+2*sc)+iu*(rc*Sc+iu+2*oc)+_c}else iu=Hl,Sc=Math.max(0,-(rc*iu+sc)),su=-Sc*Sc+iu*(iu+2*oc)+_c;else iu=-Hl,Sc=Math.max(0,-(rc*iu+sc)),su=-Sc*Sc+iu*(iu+2*oc)+_c;else iu<=-lu?(Sc=Math.max(0,-(-rc*Hl+sc)),iu=Sc>0?-Hl:Math.min(Math.max(-Hl,-oc),Hl),su=-Sc*Sc+iu*(iu+2*oc)+_c):iu<=lu?(Sc=0,iu=Math.min(Math.max(-Hl,-oc),Hl),su=iu*(iu+2*oc)+_c):(Sc=Math.max(0,-(rc*Hl+sc)),iu=Sc>0?Hl:Math.min(Math.max(-Hl,-oc),Hl),su=-Sc*Sc+iu*(iu+2*oc)+_c);else iu=rc>0?-Hl:Hl,Sc=Math.max(0,-(rc*iu+sc)),su=-Sc*Sc+iu*(iu+2*oc)+_c;return ot&&ot.copy(this.origin).addScaledVector(this.direction,Sc),ut&&ut.copy(Cg).addScaledVector(kg,iu),su}intersectSphere(at,st){Tg.subVectors(at.center,this.origin);const ot=Tg.dot(this.direction),ut=Tg.dot(Tg)-ot*ot,Hl=at.radius*at.radius;if(ut>Hl)return null;const rc=Math.sqrt(Hl-ut),sc=ot-rc,oc=ot+rc;return oc<0?null:sc<0?this.at(oc,st):this.at(sc,st)}intersectsSphere(at){return!(at.radius<0)&&this.distanceSqToPoint(at.center)<=at.radius*at.radius}distanceToPlane(at){const st=at.normal.dot(this.direction);if(0===st)return 0===at.distanceToPoint(this.origin)?0:null;const ot=-(this.origin.dot(at.normal)+at.constant)/st;return ot>=0?ot:null}intersectPlane(at,st){const ot=this.distanceToPlane(at);return null===ot?null:this.at(ot,st)}intersectsPlane(at){const st=at.distanceToPoint(this.origin);if(0===st)return!0;return at.normal.dot(this.direction)*st<0}intersectBox(at,st){let ot,ut,Hl,rc,sc,oc;const _c=1/this.direction.x,wc=1/this.direction.y,Sc=1/this.direction.z,iu=this.origin;return _c>=0?(ot=(at.min.x-iu.x)*_c,ut=(at.max.x-iu.x)*_c):(ot=(at.max.x-iu.x)*_c,ut=(at.min.x-iu.x)*_c),wc>=0?(Hl=(at.min.y-iu.y)*wc,rc=(at.max.y-iu.y)*wc):(Hl=(at.max.y-iu.y)*wc,rc=(at.min.y-iu.y)*wc),ot>rc||Hl>ut?null:((Hl>ot||isNaN(ot))&&(ot=Hl),(rc<ut||isNaN(ut))&&(ut=rc),Sc>=0?(sc=(at.min.z-iu.z)*Sc,oc=(at.max.z-iu.z)*Sc):(sc=(at.max.z-iu.z)*Sc,oc=(at.min.z-iu.z)*Sc),ot>oc||sc>ut?null:((sc>ot||ot!==ot)&&(ot=sc),(oc<ut||ut!==ut)&&(ut=oc),ut<0?null:this.at(ot>=0?ot:ut,st)))}intersectsBox(at){return null!==this.intersectBox(at,Tg)}intersectTriangle(at,st,ot,ut,Hl){Dg.subVectors(st,at),Lg.subVectors(ot,at),Pg.crossVectors(Dg,Lg);let rc,sc=this.direction.dot(Pg);if(sc>0){if(ut)return null;rc=1}else{if(!(sc<0))return null;rc=-1,sc=-sc}Ig.subVectors(this.origin,at);const oc=rc*this.direction.dot(Lg.crossVectors(Ig,Lg));if(oc<0)return null;const _c=rc*this.direction.dot(Dg.cross(Ig));if(_c<0)return null;if(oc+_c>sc)return null;const wc=-rc*Ig.dot(Pg);return wc<0?null:this.at(wc/sc,Hl)}applyMatrix4(at){return this.origin.applyMatrix4(at),this.direction.transformDirection(at),this}equals(at){return at.origin.equals(this.origin)&&at.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class Matrix4{constructor(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu){Matrix4.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==at&&this.set(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu)}set(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc,iu,su,lu,cu,uu){const pu=this.elements;return pu[0]=at,pu[4]=st,pu[8]=ot,pu[12]=ut,pu[1]=Hl,pu[5]=rc,pu[9]=sc,pu[13]=oc,pu[2]=_c,pu[6]=wc,pu[10]=Sc,pu[14]=iu,pu[3]=su,pu[7]=lu,pu[11]=cu,pu[15]=uu,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Matrix4).fromArray(this.elements)}copy(at){const st=this.elements,ot=at.elements;return st[0]=ot[0],st[1]=ot[1],st[2]=ot[2],st[3]=ot[3],st[4]=ot[4],st[5]=ot[5],st[6]=ot[6],st[7]=ot[7],st[8]=ot[8],st[9]=ot[9],st[10]=ot[10],st[11]=ot[11],st[12]=ot[12],st[13]=ot[13],st[14]=ot[14],st[15]=ot[15],this}copyPosition(at){const st=this.elements,ot=at.elements;return st[12]=ot[12],st[13]=ot[13],st[14]=ot[14],this}setFromMatrix3(at){const st=at.elements;return this.set(st[0],st[3],st[6],0,st[1],st[4],st[7],0,st[2],st[5],st[8],0,0,0,0,1),this}extractBasis(at,st,ot){return at.setFromMatrixColumn(this,0),st.setFromMatrixColumn(this,1),ot.setFromMatrixColumn(this,2),this}makeBasis(at,st,ot){return this.set(at.x,st.x,ot.x,0,at.y,st.y,ot.y,0,at.z,st.z,ot.z,0,0,0,0,1),this}extractRotation(at){const st=this.elements,ot=at.elements,ut=1/zg.setFromMatrixColumn(at,0).length(),Hl=1/zg.setFromMatrixColumn(at,1).length(),rc=1/zg.setFromMatrixColumn(at,2).length();return st[0]=ot[0]*ut,st[1]=ot[1]*ut,st[2]=ot[2]*ut,st[3]=0,st[4]=ot[4]*Hl,st[5]=ot[5]*Hl,st[6]=ot[6]*Hl,st[7]=0,st[8]=ot[8]*rc,st[9]=ot[9]*rc,st[10]=ot[10]*rc,st[11]=0,st[12]=0,st[13]=0,st[14]=0,st[15]=1,this}makeRotationFromEuler(at){const st=this.elements,ot=at.x,ut=at.y,Hl=at.z,rc=Math.cos(ot),sc=Math.sin(ot),oc=Math.cos(ut),_c=Math.sin(ut),wc=Math.cos(Hl),Sc=Math.sin(Hl);if("XYZ"===at.order){const at=rc*wc,ot=rc*Sc,ut=sc*wc,Hl=sc*Sc;st[0]=oc*wc,st[4]=-oc*Sc,st[8]=_c,st[1]=ot+ut*_c,st[5]=at-Hl*_c,st[9]=-sc*oc,st[2]=Hl-at*_c,st[6]=ut+ot*_c,st[10]=rc*oc}else if("YXZ"===at.order){const at=oc*wc,ot=oc*Sc,ut=_c*wc,Hl=_c*Sc;st[0]=at+Hl*sc,st[4]=ut*sc-ot,st[8]=rc*_c,st[1]=rc*Sc,st[5]=rc*wc,st[9]=-sc,st[2]=ot*sc-ut,st[6]=Hl+at*sc,st[10]=rc*oc}else if("ZXY"===at.order){const at=oc*wc,ot=oc*Sc,ut=_c*wc,Hl=_c*Sc;st[0]=at-Hl*sc,st[4]=-rc*Sc,st[8]=ut+ot*sc,st[1]=ot+ut*sc,st[5]=rc*wc,st[9]=Hl-at*sc,st[2]=-rc*_c,st[6]=sc,st[10]=rc*oc}else if("ZYX"===at.order){const at=rc*wc,ot=rc*Sc,ut=sc*wc,Hl=sc*Sc;st[0]=oc*wc,st[4]=ut*_c-ot,st[8]=at*_c+Hl,st[1]=oc*Sc,st[5]=Hl*_c+at,st[9]=ot*_c-ut,st[2]=-_c,st[6]=sc*oc,st[10]=rc*oc}else if("YZX"===at.order){const at=rc*oc,ot=rc*_c,ut=sc*oc,Hl=sc*_c;st[0]=oc*wc,st[4]=Hl-at*Sc,st[8]=ut*Sc+ot,st[1]=Sc,st[5]=rc*wc,st[9]=-sc*wc,st[2]=-_c*wc,st[6]=ot*Sc+ut,st[10]=at-Hl*Sc}else if("XZY"===at.order){const at=rc*oc,ot=rc*_c,ut=sc*oc,Hl=sc*_c;st[0]=oc*wc,st[4]=-Sc,st[8]=_c*wc,st[1]=at*Sc+Hl,st[5]=rc*wc,st[9]=ot*Sc-ut,st[2]=ut*Sc-ot,st[6]=sc*wc,st[10]=Hl*Sc+at}return st[3]=0,st[7]=0,st[11]=0,st[12]=0,st[13]=0,st[14]=0,st[15]=1,this}makeRotationFromQuaternion(at){return this.compose(Rg,at,Og)}lookAt(at,st,ot){const ut=this.elements;return jg.subVectors(at,st),0===jg.lengthSq()&&(jg.z=1),jg.normalize(),Bg.crossVectors(ot,jg),0===Bg.lengthSq()&&(1===Math.abs(ot.z)?jg.x+=1e-4:jg.z+=1e-4,jg.normalize(),Bg.crossVectors(ot,jg)),Bg.normalize(),Fg.crossVectors(jg,Bg),ut[0]=Bg.x,ut[4]=Fg.x,ut[8]=jg.x,ut[1]=Bg.y,ut[5]=Fg.y,ut[9]=jg.y,ut[2]=Bg.z,ut[6]=Fg.z,ut[10]=jg.z,this}multiply(at){return this.multiplyMatrices(this,at)}premultiply(at){return this.multiplyMatrices(at,this)}multiplyMatrices(at,st){const ot=at.elements,ut=st.elements,Hl=this.elements,rc=ot[0],sc=ot[4],oc=ot[8],_c=ot[12],wc=ot[1],Sc=ot[5],iu=ot[9],su=ot[13],lu=ot[2],cu=ot[6],uu=ot[10],pu=ot[14],mu=ot[3],gu=ot[7],Au=ot[11],yu=ot[15],_u=ut[0],xu=ut[4],Su=ut[8],Du=ut[12],Lu=ut[1],$u=ut[5],hh=ut[9],ed=ut[13],td=ut[2],id=ut[6],nd=ut[10],rd=ut[14],ad=ut[3],sd=ut[7],od=ut[11],ld=ut[15];return Hl[0]=rc*_u+sc*Lu+oc*td+_c*ad,Hl[4]=rc*xu+sc*$u+oc*id+_c*sd,Hl[8]=rc*Su+sc*hh+oc*nd+_c*od,Hl[12]=rc*Du+sc*ed+oc*rd+_c*ld,Hl[1]=wc*_u+Sc*Lu+iu*td+su*ad,Hl[5]=wc*xu+Sc*$u+iu*id+su*sd,Hl[9]=wc*Su+Sc*hh+iu*nd+su*od,Hl[13]=wc*Du+Sc*ed+iu*rd+su*ld,Hl[2]=lu*_u+cu*Lu+uu*td+pu*ad,Hl[6]=lu*xu+cu*$u+uu*id+pu*sd,Hl[10]=lu*Su+cu*hh+uu*nd+pu*od,Hl[14]=lu*Du+cu*ed+uu*rd+pu*ld,Hl[3]=mu*_u+gu*Lu+Au*td+yu*ad,Hl[7]=mu*xu+gu*$u+Au*id+yu*sd,Hl[11]=mu*Su+gu*hh+Au*nd+yu*od,Hl[15]=mu*Du+gu*ed+Au*rd+yu*ld,this}multiplyScalar(at){const st=this.elements;return st[0]*=at,st[4]*=at,st[8]*=at,st[12]*=at,st[1]*=at,st[5]*=at,st[9]*=at,st[13]*=at,st[2]*=at,st[6]*=at,st[10]*=at,st[14]*=at,st[3]*=at,st[7]*=at,st[11]*=at,st[15]*=at,this}determinant(){const at=this.elements,st=at[0],ot=at[4],ut=at[8],Hl=at[12],rc=at[1],sc=at[5],oc=at[9],_c=at[13],wc=at[2],Sc=at[6],iu=at[10],su=at[14];return at[3]*(+Hl*oc*Sc-ut*_c*Sc-Hl*sc*iu+ot*_c*iu+ut*sc*su-ot*oc*su)+at[7]*(+st*oc*su-st*_c*iu+Hl*rc*iu-ut*rc*su+ut*_c*wc-Hl*oc*wc)+at[11]*(+st*_c*Sc-st*sc*su-Hl*rc*Sc+ot*rc*su+Hl*sc*wc-ot*_c*wc)+at[15]*(-ut*sc*wc-st*oc*Sc+st*sc*iu+ut*rc*Sc-ot*rc*iu+ot*oc*wc)}transpose(){const at=this.elements;let st;return st=at[1],at[1]=at[4],at[4]=st,st=at[2],at[2]=at[8],at[8]=st,st=at[6],at[6]=at[9],at[9]=st,st=at[3],at[3]=at[12],at[12]=st,st=at[7],at[7]=at[13],at[13]=st,st=at[11],at[11]=at[14],at[14]=st,this}setPosition(at,st,ot){const ut=this.elements;return at.isVector3?(ut[12]=at.x,ut[13]=at.y,ut[14]=at.z):(ut[12]=at,ut[13]=st,ut[14]=ot),this}invert(){const at=this.elements,st=at[0],ot=at[1],ut=at[2],Hl=at[3],rc=at[4],sc=at[5],oc=at[6],_c=at[7],wc=at[8],Sc=at[9],iu=at[10],su=at[11],lu=at[12],cu=at[13],uu=at[14],pu=at[15],mu=Sc*uu*_c-cu*iu*_c+cu*oc*su-sc*uu*su-Sc*oc*pu+sc*iu*pu,gu=lu*iu*_c-wc*uu*_c-lu*oc*su+rc*uu*su+wc*oc*pu-rc*iu*pu,Au=wc*cu*_c-lu*Sc*_c+lu*sc*su-rc*cu*su-wc*sc*pu+rc*Sc*pu,yu=lu*Sc*oc-wc*cu*oc-lu*sc*iu+rc*cu*iu+wc*sc*uu-rc*Sc*uu,_u=st*mu+ot*gu+ut*Au+Hl*yu;if(0===_u)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const xu=1/_u;return at[0]=mu*xu,at[1]=(cu*iu*Hl-Sc*uu*Hl-cu*ut*su+ot*uu*su+Sc*ut*pu-ot*iu*pu)*xu,at[2]=(sc*uu*Hl-cu*oc*Hl+cu*ut*_c-ot*uu*_c-sc*ut*pu+ot*oc*pu)*xu,at[3]=(Sc*oc*Hl-sc*iu*Hl-Sc*ut*_c+ot*iu*_c+sc*ut*su-ot*oc*su)*xu,at[4]=gu*xu,at[5]=(wc*uu*Hl-lu*iu*Hl+lu*ut*su-st*uu*su-wc*ut*pu+st*iu*pu)*xu,at[6]=(lu*oc*Hl-rc*uu*Hl-lu*ut*_c+st*uu*_c+rc*ut*pu-st*oc*pu)*xu,at[7]=(rc*iu*Hl-wc*oc*Hl+wc*ut*_c-st*iu*_c-rc*ut*su+st*oc*su)*xu,at[8]=Au*xu,at[9]=(lu*Sc*Hl-wc*cu*Hl-lu*ot*su+st*cu*su+wc*ot*pu-st*Sc*pu)*xu,at[10]=(rc*cu*Hl-lu*sc*Hl+lu*ot*_c-st*cu*_c-rc*ot*pu+st*sc*pu)*xu,at[11]=(wc*sc*Hl-rc*Sc*Hl-wc*ot*_c+st*Sc*_c+rc*ot*su-st*sc*su)*xu,at[12]=yu*xu,at[13]=(wc*cu*ut-lu*Sc*ut+lu*ot*iu-st*cu*iu-wc*ot*uu+st*Sc*uu)*xu,at[14]=(lu*sc*ut-rc*cu*ut-lu*ot*oc+st*cu*oc+rc*ot*uu-st*sc*uu)*xu,at[15]=(rc*Sc*ut-wc*sc*ut+wc*ot*oc-st*Sc*oc-rc*ot*iu+st*sc*iu)*xu,this}scale(at){const st=this.elements,ot=at.x,ut=at.y,Hl=at.z;return st[0]*=ot,st[4]*=ut,st[8]*=Hl,st[1]*=ot,st[5]*=ut,st[9]*=Hl,st[2]*=ot,st[6]*=ut,st[10]*=Hl,st[3]*=ot,st[7]*=ut,st[11]*=Hl,this}getMaxScaleOnAxis(){const at=this.elements,st=at[0]*at[0]+at[1]*at[1]+at[2]*at[2],ot=at[4]*at[4]+at[5]*at[5]+at[6]*at[6],ut=at[8]*at[8]+at[9]*at[9]+at[10]*at[10];return Math.sqrt(Math.max(st,ot,ut))}makeTranslation(at,st,ot){return at.isVector3?this.set(1,0,0,at.x,0,1,0,at.y,0,0,1,at.z,0,0,0,1):this.set(1,0,0,at,0,1,0,st,0,0,1,ot,0,0,0,1),this}makeRotationX(at){const st=Math.cos(at),ot=Math.sin(at);return this.set(1,0,0,0,0,st,-ot,0,0,ot,st,0,0,0,0,1),this}makeRotationY(at){const st=Math.cos(at),ot=Math.sin(at);return this.set(st,0,ot,0,0,1,0,0,-ot,0,st,0,0,0,0,1),this}makeRotationZ(at){const st=Math.cos(at),ot=Math.sin(at);return this.set(st,-ot,0,0,ot,st,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(at,st){const ot=Math.cos(st),ut=Math.sin(st),Hl=1-ot,rc=at.x,sc=at.y,oc=at.z,_c=Hl*rc,wc=Hl*sc;return this.set(_c*rc+ot,_c*sc-ut*oc,_c*oc+ut*sc,0,_c*sc+ut*oc,wc*sc+ot,wc*oc-ut*rc,0,_c*oc-ut*sc,wc*oc+ut*rc,Hl*oc*oc+ot,0,0,0,0,1),this}makeScale(at,st,ot){return this.set(at,0,0,0,0,st,0,0,0,0,ot,0,0,0,0,1),this}makeShear(at,st,ot,ut,Hl,rc){return this.set(1,ot,Hl,0,at,1,rc,0,st,ut,1,0,0,0,0,1),this}compose(at,st,ot){const ut=this.elements,Hl=st._x,rc=st._y,sc=st._z,oc=st._w,_c=Hl+Hl,wc=rc+rc,Sc=sc+sc,iu=Hl*_c,su=Hl*wc,lu=Hl*Sc,cu=rc*wc,uu=rc*Sc,pu=sc*Sc,mu=oc*_c,gu=oc*wc,Au=oc*Sc,yu=ot.x,_u=ot.y,xu=ot.z;return ut[0]=(1-(cu+pu))*yu,ut[1]=(su+Au)*yu,ut[2]=(lu-gu)*yu,ut[3]=0,ut[4]=(su-Au)*_u,ut[5]=(1-(iu+pu))*_u,ut[6]=(uu+mu)*_u,ut[7]=0,ut[8]=(lu+gu)*xu,ut[9]=(uu-mu)*xu,ut[10]=(1-(iu+cu))*xu,ut[11]=0,ut[12]=at.x,ut[13]=at.y,ut[14]=at.z,ut[15]=1,this}decompose(at,st,ot){const ut=this.elements;let Hl=zg.set(ut[0],ut[1],ut[2]).length();const rc=zg.set(ut[4],ut[5],ut[6]).length(),sc=zg.set(ut[8],ut[9],ut[10]).length();this.determinant()<0&&(Hl=-Hl),at.x=ut[12],at.y=ut[13],at.z=ut[14],Ng.copy(this);const oc=1/Hl,_c=1/rc,wc=1/sc;return Ng.elements[0]*=oc,Ng.elements[1]*=oc,Ng.elements[2]*=oc,Ng.elements[4]*=_c,Ng.elements[5]*=_c,Ng.elements[6]*=_c,Ng.elements[8]*=wc,Ng.elements[9]*=wc,Ng.elements[10]*=wc,st.setFromRotationMatrix(Ng),ot.x=Hl,ot.y=rc,ot.z=sc,this}makePerspective(at,st,ot,ut,Hl,rc,sc,oc){void 0===sc&&(sc=qm),void 0===oc&&(oc=!1);const _c=this.elements,wc=2*Hl/(st-at),Sc=2*Hl/(ot-ut),iu=(st+at)/(st-at),su=(ot+ut)/(ot-ut);let lu,cu;if(oc)lu=Hl/(rc-Hl),cu=rc*Hl/(rc-Hl);else if(sc===qm)lu=-(rc+Hl)/(rc-Hl),cu=-2*rc*Hl/(rc-Hl);else{if(sc!==Ym)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+sc);lu=-rc/(rc-Hl),cu=-rc*Hl/(rc-Hl)}return _c[0]=wc,_c[4]=0,_c[8]=iu,_c[12]=0,_c[1]=0,_c[5]=Sc,_c[9]=su,_c[13]=0,_c[2]=0,_c[6]=0,_c[10]=lu,_c[14]=cu,_c[3]=0,_c[7]=0,_c[11]=-1,_c[15]=0,this}makeOrthographic(at,st,ot,ut,Hl,rc,sc,oc){void 0===sc&&(sc=qm),void 0===oc&&(oc=!1);const _c=this.elements,wc=2/(st-at),Sc=2/(ot-ut),iu=-(st+at)/(st-at),su=-(ot+ut)/(ot-ut);let lu,cu;if(oc)lu=1/(rc-Hl),cu=rc/(rc-Hl);else if(sc===qm)lu=-2/(rc-Hl),cu=-(rc+Hl)/(rc-Hl);else{if(sc!==Ym)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+sc);lu=-1/(rc-Hl),cu=-Hl/(rc-Hl)}return _c[0]=wc,_c[4]=0,_c[8]=0,_c[12]=iu,_c[1]=0,_c[5]=Sc,_c[9]=0,_c[13]=su,_c[2]=0,_c[6]=0,_c[10]=lu,_c[14]=cu,_c[3]=0,_c[7]=0,_c[11]=0,_c[15]=1,this}equals(at){const st=this.elements,ot=at.elements;for(let ut=0;ut<16;ut++)if(st[ut]!==ot[ut])return!1;return!0}fromArray(at,st){void 0===st&&(st=0);for(let ot=0;ot<16;ot++)this.elements[ot]=at[ot+st];return this}toArray(at,st){void 0===at&&(at=[]),void 0===st&&(st=0);const ot=this.elements;return at[st]=ot[0],at[st+1]=ot[1],at[st+2]=ot[2],at[st+3]=ot[3],at[st+4]=ot[4],at[st+5]=ot[5],at[st+6]=ot[6],at[st+7]=ot[7],at[st+8]=ot[8],at[st+9]=ot[9],at[st+10]=ot[10],at[st+11]=ot[11],at[st+12]=ot[12],at[st+13]=ot[13],at[st+14]=ot[14],at[st+15]=ot[15],at}}const zg=new Vector3,Ng=new Matrix4,Rg=new Vector3(0,0,0),Og=new Vector3(1,1,1),Bg=new Vector3,Fg=new Vector3,jg=new Vector3,Ug=new Matrix4,Vg=new Quaternion;class Euler{constructor(at,st,ot,ut){void 0===at&&(at=0),void 0===st&&(st=0),void 0===ot&&(ot=0),void 0===ut&&(ut=Euler.DEFAULT_ORDER),this.isEuler=!0,this._x=at,this._y=st,this._z=ot,this._order=ut}get x(){return this._x}set x(at){this._x=at,this._onChangeCallback()}get y(){return this._y}set y(at){this._y=at,this._onChangeCallback()}get z(){return this._z}set z(at){this._z=at,this._onChangeCallback()}get order(){return this._order}set order(at){this._order=at,this._onChangeCallback()}set(at,st,ot,ut){return void 0===ut&&(ut=this._order),this._x=at,this._y=st,this._z=ot,this._order=ut,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(at){return this._x=at._x,this._y=at._y,this._z=at._z,this._order=at._order,this._onChangeCallback(),this}setFromRotationMatrix(at,st,ot){void 0===st&&(st=this._order),void 0===ot&&(ot=!0);const ut=at.elements,Hl=ut[0],rc=ut[4],sc=ut[8],oc=ut[1],_c=ut[5],wc=ut[9],Sc=ut[2],iu=ut[6],su=ut[10];switch(st){case"XYZ":this._y=Math.asin(clamp(sc,-1,1)),Math.abs(sc)<.9999999?(this._x=Math.atan2(-wc,su),this._z=Math.atan2(-rc,Hl)):(this._x=Math.atan2(iu,_c),this._z=0);break;case"YXZ":this._x=Math.asin(-clamp(wc,-1,1)),Math.abs(wc)<.9999999?(this._y=Math.atan2(sc,su),this._z=Math.atan2(oc,_c)):(this._y=Math.atan2(-Sc,Hl),this._z=0);break;case"ZXY":this._x=Math.asin(clamp(iu,-1,1)),Math.abs(iu)<.9999999?(this._y=Math.atan2(-Sc,su),this._z=Math.atan2(-rc,_c)):(this._y=0,this._z=Math.atan2(oc,Hl));break;case"ZYX":this._y=Math.asin(-clamp(Sc,-1,1)),Math.abs(Sc)<.9999999?(this._x=Math.atan2(iu,su),this._z=Math.atan2(oc,Hl)):(this._x=0,this._z=Math.atan2(-rc,_c));break;case"YZX":this._z=Math.asin(clamp(oc,-1,1)),Math.abs(oc)<.9999999?(this._x=Math.atan2(-wc,_c),this._y=Math.atan2(-Sc,Hl)):(this._x=0,this._y=Math.atan2(sc,su));break;case"XZY":this._z=Math.asin(-clamp(rc,-1,1)),Math.abs(rc)<.9999999?(this._x=Math.atan2(iu,_c),this._y=Math.atan2(sc,Hl)):(this._x=Math.atan2(-wc,su),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+st)}return this._order=st,!0===ot&&this._onChangeCallback(),this}setFromQuaternion(at,st,ot){return Ug.makeRotationFromQuaternion(at),this.setFromRotationMatrix(Ug,st,ot)}setFromVector3(at,st){return void 0===st&&(st=this._order),this.set(at.x,at.y,at.z,st)}reorder(at){return Vg.setFromEuler(this),this.setFromQuaternion(Vg,at)}equals(at){return at._x===this._x&&at._y===this._y&&at._z===this._z&&at._order===this._order}fromArray(at){return this._x=at[0],this._y=at[1],this._z=at[2],void 0!==at[3]&&(this._order=at[3]),this._onChangeCallback(),this}toArray(at,st){return void 0===at&&(at=[]),void 0===st&&(st=0),at[st]=this._x,at[st+1]=this._y,at[st+2]=this._z,at[st+3]=this._order,at}_onChange(at){return this._onChangeCallback=at,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Euler.DEFAULT_ORDER="XYZ";class Layers{constructor(){this.mask=1}set(at){this.mask=1<<at>>>0}enable(at){this.mask|=1<<at}enableAll(){this.mask=-1}toggle(at){this.mask^=1<<at}disable(at){this.mask&=~(1<<at)}disableAll(){this.mask=0}test(at){return 0!==(this.mask&at.mask)}isEnabled(at){return 0!==(this.mask&1<<at)}}let Gg=0;const Zg=new Vector3,Hg=new Quaternion,Wg=new Matrix4,qg=new Vector3,Yg=new Vector3,Qg=new Vector3,Kg=new Quaternion,Xg=new Vector3(1,0,0),Jg=new Vector3(0,1,0),$g=new Vector3(0,0,1),ef={type:"added"},tf={type:"removed"},nf={type:"childadded",child:null},rf={type:"childremoved",child:null};class Object3D extends EventDispatcher{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Gg++}),this.uuid=generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Object3D.DEFAULT_UP.clone();const at=new Vector3,st=new Euler,ot=new Quaternion,ut=new Vector3(1,1,1);st._onChange((function(){ot.setFromEuler(st,!1)})),ot._onChange((function(){st.setFromQuaternion(ot,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:at},rotation:{configurable:!0,enumerable:!0,value:st},quaternion:{configurable:!0,enumerable:!0,value:ot},scale:{configurable:!0,enumerable:!0,value:ut},modelViewMatrix:{value:new Matrix4},normalMatrix:{value:new Matrix3}}),this.matrix=new Matrix4,this.matrixWorld=new Matrix4,this.matrixAutoUpdate=Object3D.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Layers,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(at){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(at),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(at){return this.quaternion.premultiply(at),this}setRotationFromAxisAngle(at,st){this.quaternion.setFromAxisAngle(at,st)}setRotationFromEuler(at){this.quaternion.setFromEuler(at,!0)}setRotationFromMatrix(at){this.quaternion.setFromRotationMatrix(at)}setRotationFromQuaternion(at){this.quaternion.copy(at)}rotateOnAxis(at,st){return Hg.setFromAxisAngle(at,st),this.quaternion.multiply(Hg),this}rotateOnWorldAxis(at,st){return Hg.setFromAxisAngle(at,st),this.quaternion.premultiply(Hg),this}rotateX(at){return this.rotateOnAxis(Xg,at)}rotateY(at){return this.rotateOnAxis(Jg,at)}rotateZ(at){return this.rotateOnAxis($g,at)}translateOnAxis(at,st){return Zg.copy(at).applyQuaternion(this.quaternion),this.position.add(Zg.multiplyScalar(st)),this}translateX(at){return this.translateOnAxis(Xg,at)}translateY(at){return this.translateOnAxis(Jg,at)}translateZ(at){return this.translateOnAxis($g,at)}localToWorld(at){return this.updateWorldMatrix(!0,!1),at.applyMatrix4(this.matrixWorld)}worldToLocal(at){return this.updateWorldMatrix(!0,!1),at.applyMatrix4(Wg.copy(this.matrixWorld).invert())}lookAt(at,st,ot){at.isVector3?qg.copy(at):qg.set(at,st,ot);const ut=this.parent;this.updateWorldMatrix(!0,!1),Yg.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Wg.lookAt(Yg,qg,this.up):Wg.lookAt(qg,Yg,this.up),this.quaternion.setFromRotationMatrix(Wg),ut&&(Wg.extractRotation(ut.matrixWorld),Hg.setFromRotationMatrix(Wg),this.quaternion.premultiply(Hg.invert()))}add(at){if(arguments.length>1){for(let at=0;at<arguments.length;at++)this.add(arguments[at]);return this}return at===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",at),this):(at&&at.isObject3D?(at.removeFromParent(),at.parent=this,this.children.push(at),at.dispatchEvent(ef),nf.child=at,this.dispatchEvent(nf),nf.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",at),this)}remove(at){if(arguments.length>1){for(let at=0;at<arguments.length;at++)this.remove(arguments[at]);return this}const st=this.children.indexOf(at);return-1!==st&&(at.parent=null,this.children.splice(st,1),at.dispatchEvent(tf),rf.child=at,this.dispatchEvent(rf),rf.child=null),this}removeFromParent(){const at=this.parent;return null!==at&&at.remove(this),this}clear(){return this.remove(...this.children)}attach(at){return this.updateWorldMatrix(!0,!1),Wg.copy(this.matrixWorld).invert(),null!==at.parent&&(at.parent.updateWorldMatrix(!0,!1),Wg.multiply(at.parent.matrixWorld)),at.applyMatrix4(Wg),at.removeFromParent(),at.parent=this,this.children.push(at),at.updateWorldMatrix(!1,!0),at.dispatchEvent(ef),nf.child=at,this.dispatchEvent(nf),nf.child=null,this}getObjectById(at){return this.getObjectByProperty("id",at)}getObjectByName(at){return this.getObjectByProperty("name",at)}getObjectByProperty(at,st){if(this[at]===st)return this;for(let ot=0,ut=this.children.length;ot<ut;ot++){const ut=this.children[ot].getObjectByProperty(at,st);if(void 0!==ut)return ut}}getObjectsByProperty(at,st,ot){void 0===ot&&(ot=[]),this[at]===st&&ot.push(this);const ut=this.children;for(let Hl=0,rc=ut.length;Hl<rc;Hl++)ut[Hl].getObjectsByProperty(at,st,ot);return ot}getWorldPosition(at){return this.updateWorldMatrix(!0,!1),at.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(at){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Yg,at,Qg),at}getWorldScale(at){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Yg,Kg,at),at}getWorldDirection(at){this.updateWorldMatrix(!0,!1);const st=this.matrixWorld.elements;return at.set(st[8],st[9],st[10]).normalize()}raycast(){}traverse(at){at(this);const st=this.children;for(let ot=0,ut=st.length;ot<ut;ot++)st[ot].traverse(at)}traverseVisible(at){if(!1===this.visible)return;at(this);const st=this.children;for(let ot=0,ut=st.length;ot<ut;ot++)st[ot].traverseVisible(at)}traverseAncestors(at){const st=this.parent;null!==st&&(at(st),st.traverseAncestors(at))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(at){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||at)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,at=!0);const st=this.children;for(let ot=0,ut=st.length;ot<ut;ot++){st[ot].updateMatrixWorld(at)}}updateWorldMatrix(at,st){const ot=this.parent;if(!0===at&&null!==ot&&ot.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===st){const at=this.children;for(let st=0,ot=at.length;st<ot;st++){at[st].updateWorldMatrix(!1,!0)}}}toJSON(at){const st=void 0===at||"string"===typeof at,ot={};st&&(at={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},ot.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const ut={};function serialize(st,ot){return void 0===st[ot.uuid]&&(st[ot.uuid]=ot.toJSON(at)),ot.uuid}if(ut.uuid=this.uuid,ut.type=this.type,""!==this.name&&(ut.name=this.name),!0===this.castShadow&&(ut.castShadow=!0),!0===this.receiveShadow&&(ut.receiveShadow=!0),!1===this.visible&&(ut.visible=!1),!1===this.frustumCulled&&(ut.frustumCulled=!1),0!==this.renderOrder&&(ut.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(ut.userData=this.userData),ut.layers=this.layers.mask,ut.matrix=this.matrix.toArray(),ut.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(ut.matrixAutoUpdate=!1),this.isInstancedMesh&&(ut.type="InstancedMesh",ut.count=this.count,ut.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(ut.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(ut.type="BatchedMesh",ut.perObjectFrustumCulled=this.perObjectFrustumCulled,ut.sortObjects=this.sortObjects,ut.drawRanges=this._drawRanges,ut.reservedRanges=this._reservedRanges,ut.geometryInfo=this._geometryInfo.map((at=>({...at,boundingBox:at.boundingBox?at.boundingBox.toJSON():void 0,boundingSphere:at.boundingSphere?at.boundingSphere.toJSON():void 0}))),ut.instanceInfo=this._instanceInfo.map((at=>({...at}))),ut.availableInstanceIds=this._availableInstanceIds.slice(),ut.availableGeometryIds=this._availableGeometryIds.slice(),ut.nextIndexStart=this._nextIndexStart,ut.nextVertexStart=this._nextVertexStart,ut.geometryCount=this._geometryCount,ut.maxInstanceCount=this._maxInstanceCount,ut.maxVertexCount=this._maxVertexCount,ut.maxIndexCount=this._maxIndexCount,ut.geometryInitialized=this._geometryInitialized,ut.matricesTexture=this._matricesTexture.toJSON(at),ut.indirectTexture=this._indirectTexture.toJSON(at),null!==this._colorsTexture&&(ut.colorsTexture=this._colorsTexture.toJSON(at)),null!==this.boundingSphere&&(ut.boundingSphere=this.boundingSphere.toJSON()),null!==this.boundingBox&&(ut.boundingBox=this.boundingBox.toJSON())),this.isScene)this.background&&(this.background.isColor?ut.background=this.background.toJSON():this.background.isTexture&&(ut.background=this.background.toJSON(at).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(ut.environment=this.environment.toJSON(at).uuid);else if(this.isMesh||this.isLine||this.isPoints){ut.geometry=serialize(at.geometries,this.geometry);const st=this.geometry.parameters;if(void 0!==st&&void 0!==st.shapes){const ot=st.shapes;if(Array.isArray(ot))for(let st=0,ut=ot.length;st<ut;st++){const ut=ot[st];serialize(at.shapes,ut)}else serialize(at.shapes,ot)}}if(this.isSkinnedMesh&&(ut.bindMode=this.bindMode,ut.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(serialize(at.skeletons,this.skeleton),ut.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const st=[];for(let ot=0,ut=this.material.length;ot<ut;ot++)st.push(serialize(at.materials,this.material[ot]));ut.material=st}else ut.material=serialize(at.materials,this.material);if(this.children.length>0){ut.children=[];for(let st=0;st<this.children.length;st++)ut.children.push(this.children[st].toJSON(at).object)}if(this.animations.length>0){ut.animations=[];for(let st=0;st<this.animations.length;st++){const ot=this.animations[st];ut.animations.push(serialize(at.animations,ot))}}if(st){const st=extractFromCache(at.geometries),ut=extractFromCache(at.materials),Hl=extractFromCache(at.textures),rc=extractFromCache(at.images),sc=extractFromCache(at.shapes),oc=extractFromCache(at.skeletons),_c=extractFromCache(at.animations),wc=extractFromCache(at.nodes);st.length>0&&(ot.geometries=st),ut.length>0&&(ot.materials=ut),Hl.length>0&&(ot.textures=Hl),rc.length>0&&(ot.images=rc),sc.length>0&&(ot.shapes=sc),oc.length>0&&(ot.skeletons=oc),_c.length>0&&(ot.animations=_c),wc.length>0&&(ot.nodes=wc)}return ot.object=ut,ot;function extractFromCache(at){const st=[];for(const ot in at){const ut=at[ot];delete ut.metadata,st.push(ut)}return st}}clone(at){return(new this.constructor).copy(this,at)}copy(at,st){if(void 0===st&&(st=!0),this.name=at.name,this.up.copy(at.up),this.position.copy(at.position),this.rotation.order=at.rotation.order,this.quaternion.copy(at.quaternion),this.scale.copy(at.scale),this.matrix.copy(at.matrix),this.matrixWorld.copy(at.matrixWorld),this.matrixAutoUpdate=at.matrixAutoUpdate,this.matrixWorldAutoUpdate=at.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=at.matrixWorldNeedsUpdate,this.layers.mask=at.layers.mask,this.visible=at.visible,this.castShadow=at.castShadow,this.receiveShadow=at.receiveShadow,this.frustumCulled=at.frustumCulled,this.renderOrder=at.renderOrder,this.animations=at.animations.slice(),this.userData=JSON.parse(JSON.stringify(at.userData)),!0===st)for(let ot=0;ot<at.children.length;ot++){const st=at.children[ot];this.add(st.clone())}return this}}Object3D.DEFAULT_UP=new Vector3(0,1,0),Object3D.DEFAULT_MATRIX_AUTO_UPDATE=!0,Object3D.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const af=new Vector3,sf=new Vector3,of=new Vector3,lf=new Vector3,cf=new Vector3,uf=new Vector3,hf=new Vector3,df=new Vector3,pf=new Vector3,mf=new Vector3,gf=new Vector4,ff=new Vector4,Af=new Vector4;class Triangle{constructor(at,st,ot){void 0===at&&(at=new Vector3),void 0===st&&(st=new Vector3),void 0===ot&&(ot=new Vector3),this.a=at,this.b=st,this.c=ot}static getNormal(at,st,ot,ut){ut.subVectors(ot,st),af.subVectors(at,st),ut.cross(af);const Hl=ut.lengthSq();return Hl>0?ut.multiplyScalar(1/Math.sqrt(Hl)):ut.set(0,0,0)}static getBarycoord(at,st,ot,ut,Hl){af.subVectors(ut,st),sf.subVectors(ot,st),of.subVectors(at,st);const rc=af.dot(af),sc=af.dot(sf),oc=af.dot(of),_c=sf.dot(sf),wc=sf.dot(of),Sc=rc*_c-sc*sc;if(0===Sc)return Hl.set(0,0,0),null;const iu=1/Sc,su=(_c*oc-sc*wc)*iu,lu=(rc*wc-sc*oc)*iu;return Hl.set(1-su-lu,lu,su)}static containsPoint(at,st,ot,ut){return null!==this.getBarycoord(at,st,ot,ut,lf)&&(lf.x>=0&&lf.y>=0&&lf.x+lf.y<=1)}static getInterpolation(at,st,ot,ut,Hl,rc,sc,oc){return null===this.getBarycoord(at,st,ot,ut,lf)?(oc.x=0,oc.y=0,"z"in oc&&(oc.z=0),"w"in oc&&(oc.w=0),null):(oc.setScalar(0),oc.addScaledVector(Hl,lf.x),oc.addScaledVector(rc,lf.y),oc.addScaledVector(sc,lf.z),oc)}static getInterpolatedAttribute(at,st,ot,ut,Hl,rc){return gf.setScalar(0),ff.setScalar(0),Af.setScalar(0),gf.fromBufferAttribute(at,st),ff.fromBufferAttribute(at,ot),Af.fromBufferAttribute(at,ut),rc.setScalar(0),rc.addScaledVector(gf,Hl.x),rc.addScaledVector(ff,Hl.y),rc.addScaledVector(Af,Hl.z),rc}static isFrontFacing(at,st,ot,ut){return af.subVectors(ot,st),sf.subVectors(at,st),af.cross(sf).dot(ut)<0}set(at,st,ot){return this.a.copy(at),this.b.copy(st),this.c.copy(ot),this}setFromPointsAndIndices(at,st,ot,ut){return this.a.copy(at[st]),this.b.copy(at[ot]),this.c.copy(at[ut]),this}setFromAttributeAndIndices(at,st,ot,ut){return this.a.fromBufferAttribute(at,st),this.b.fromBufferAttribute(at,ot),this.c.fromBufferAttribute(at,ut),this}clone(){return(new this.constructor).copy(this)}copy(at){return this.a.copy(at.a),this.b.copy(at.b),this.c.copy(at.c),this}getArea(){return af.subVectors(this.c,this.b),sf.subVectors(this.a,this.b),.5*af.cross(sf).length()}getMidpoint(at){return at.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(at){return Triangle.getNormal(this.a,this.b,this.c,at)}getPlane(at){return at.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(at,st){return Triangle.getBarycoord(at,this.a,this.b,this.c,st)}getInterpolation(at,st,ot,ut,Hl){return Triangle.getInterpolation(at,this.a,this.b,this.c,st,ot,ut,Hl)}containsPoint(at){return Triangle.containsPoint(at,this.a,this.b,this.c)}isFrontFacing(at){return Triangle.isFrontFacing(this.a,this.b,this.c,at)}intersectsBox(at){return at.intersectsTriangle(this)}closestPointToPoint(at,st){const ot=this.a,ut=this.b,Hl=this.c;let rc,sc;cf.subVectors(ut,ot),uf.subVectors(Hl,ot),df.subVectors(at,ot);const oc=cf.dot(df),_c=uf.dot(df);if(oc<=0&&_c<=0)return st.copy(ot);pf.subVectors(at,ut);const wc=cf.dot(pf),Sc=uf.dot(pf);if(wc>=0&&Sc<=wc)return st.copy(ut);const iu=oc*Sc-wc*_c;if(iu<=0&&oc>=0&&wc<=0)return rc=oc/(oc-wc),st.copy(ot).addScaledVector(cf,rc);mf.subVectors(at,Hl);const su=cf.dot(mf),lu=uf.dot(mf);if(lu>=0&&su<=lu)return st.copy(Hl);const cu=su*_c-oc*lu;if(cu<=0&&_c>=0&&lu<=0)return sc=_c/(_c-lu),st.copy(ot).addScaledVector(uf,sc);const uu=wc*lu-su*Sc;if(uu<=0&&Sc-wc>=0&&su-lu>=0)return hf.subVectors(Hl,ut),sc=(Sc-wc)/(Sc-wc+(su-lu)),st.copy(ut).addScaledVector(hf,sc);const pu=1/(uu+cu+iu);return rc=cu*pu,sc=iu*pu,st.copy(ot).addScaledVector(cf,rc).addScaledVector(uf,sc)}equals(at){return at.a.equals(this.a)&&at.b.equals(this.b)&&at.c.equals(this.c)}}const yf={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},vf={h:0,s:0,l:0},_f={h:0,s:0,l:0};function hue2rgb(at,st,ot){return ot<0&&(ot+=1),ot>1&&(ot-=1),ot<1/6?at+6*(st-at)*ot:ot<.5?st:ot<2/3?at+6*(st-at)*(2/3-ot):at}class Color{constructor(at,st,ot){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(at,st,ot)}set(at,st,ot){if(void 0===st&&void 0===ot){const st=at;st&&st.isColor?this.copy(st):"number"===typeof st?this.setHex(st):"string"===typeof st&&this.setStyle(st)}else this.setRGB(at,st,ot);return this}setScalar(at){return this.r=at,this.g=at,this.b=at,this}setHex(at,st){return void 0===st&&(st=Lm),at=Math.floor(at),this.r=(at>>16&255)/255,this.g=(at>>8&255)/255,this.b=(255&at)/255,sg.colorSpaceToWorking(this,st),this}setRGB(at,st,ot,ut){return void 0===ut&&(ut=sg.workingColorSpace),this.r=at,this.g=st,this.b=ot,sg.colorSpaceToWorking(this,ut),this}setHSL(at,st,ot,ut){if(void 0===ut&&(ut=sg.workingColorSpace),at=euclideanModulo(at,1),st=clamp(st,0,1),ot=clamp(ot,0,1),0===st)this.r=this.g=this.b=ot;else{const ut=ot<=.5?ot*(1+st):ot+st-ot*st,Hl=2*ot-ut;this.r=hue2rgb(Hl,ut,at+1/3),this.g=hue2rgb(Hl,ut,at),this.b=hue2rgb(Hl,ut,at-1/3)}return sg.colorSpaceToWorking(this,ut),this}setStyle(at,st){function handleAlpha(st){void 0!==st&&parseFloat(st)<1&&console.warn("THREE.Color: Alpha component of "+at+" will be ignored.")}let ot;if(void 0===st&&(st=Lm),ot=/^(\w+)\(([^\)]*)\)/.exec(at)){let ut;const Hl=ot[1],rc=ot[2];switch(Hl){case"rgb":case"rgba":if(ut=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(rc))return handleAlpha(ut[4]),this.setRGB(Math.min(255,parseInt(ut[1],10))/255,Math.min(255,parseInt(ut[2],10))/255,Math.min(255,parseInt(ut[3],10))/255,st);if(ut=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(rc))return handleAlpha(ut[4]),this.setRGB(Math.min(100,parseInt(ut[1],10))/100,Math.min(100,parseInt(ut[2],10))/100,Math.min(100,parseInt(ut[3],10))/100,st);break;case"hsl":case"hsla":if(ut=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(rc))return handleAlpha(ut[4]),this.setHSL(parseFloat(ut[1])/360,parseFloat(ut[2])/100,parseFloat(ut[3])/100,st);break;default:console.warn("THREE.Color: Unknown color model "+at)}}else if(ot=/^\#([A-Fa-f\d]+)$/.exec(at)){const ut=ot[1],Hl=ut.length;if(3===Hl)return this.setRGB(parseInt(ut.charAt(0),16)/15,parseInt(ut.charAt(1),16)/15,parseInt(ut.charAt(2),16)/15,st);if(6===Hl)return this.setHex(parseInt(ut,16),st);console.warn("THREE.Color: Invalid hex color "+at)}else if(at&&at.length>0)return this.setColorName(at,st);return this}setColorName(at,st){void 0===st&&(st=Lm);const ot=yf[at.toLowerCase()];return void 0!==ot?this.setHex(ot,st):console.warn("THREE.Color: Unknown color "+at),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(at){return this.r=at.r,this.g=at.g,this.b=at.b,this}copySRGBToLinear(at){return this.r=SRGBToLinear(at.r),this.g=SRGBToLinear(at.g),this.b=SRGBToLinear(at.b),this}copyLinearToSRGB(at){return this.r=LinearToSRGB(at.r),this.g=LinearToSRGB(at.g),this.b=LinearToSRGB(at.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(at){return void 0===at&&(at=Lm),sg.workingToColorSpace(xf.copy(this),at),65536*Math.round(clamp(255*xf.r,0,255))+256*Math.round(clamp(255*xf.g,0,255))+Math.round(clamp(255*xf.b,0,255))}getHexString(at){return void 0===at&&(at=Lm),("000000"+this.getHex(at).toString(16)).slice(-6)}getHSL(at,st){void 0===st&&(st=sg.workingColorSpace),sg.workingToColorSpace(xf.copy(this),st);const ot=xf.r,ut=xf.g,Hl=xf.b,rc=Math.max(ot,ut,Hl),sc=Math.min(ot,ut,Hl);let oc,_c;const wc=(sc+rc)/2;if(sc===rc)oc=0,_c=0;else{const at=rc-sc;switch(_c=wc<=.5?at/(rc+sc):at/(2-rc-sc),rc){case ot:oc=(ut-Hl)/at+(ut<Hl?6:0);break;case ut:oc=(Hl-ot)/at+2;break;case Hl:oc=(ot-ut)/at+4}oc/=6}return at.h=oc,at.s=_c,at.l=wc,at}getRGB(at,st){return void 0===st&&(st=sg.workingColorSpace),sg.workingToColorSpace(xf.copy(this),st),at.r=xf.r,at.g=xf.g,at.b=xf.b,at}getStyle(at){void 0===at&&(at=Lm),sg.workingToColorSpace(xf.copy(this),at);const st=xf.r,ot=xf.g,ut=xf.b;return at!==Lm?`color(${at} ${st.toFixed(3)} ${ot.toFixed(3)} ${ut.toFixed(3)})`:`rgb(${Math.round(255*st)},${Math.round(255*ot)},${Math.round(255*ut)})`}offsetHSL(at,st,ot){return this.getHSL(vf),this.setHSL(vf.h+at,vf.s+st,vf.l+ot)}add(at){return this.r+=at.r,this.g+=at.g,this.b+=at.b,this}addColors(at,st){return this.r=at.r+st.r,this.g=at.g+st.g,this.b=at.b+st.b,this}addScalar(at){return this.r+=at,this.g+=at,this.b+=at,this}sub(at){return this.r=Math.max(0,this.r-at.r),this.g=Math.max(0,this.g-at.g),this.b=Math.max(0,this.b-at.b),this}multiply(at){return this.r*=at.r,this.g*=at.g,this.b*=at.b,this}multiplyScalar(at){return this.r*=at,this.g*=at,this.b*=at,this}lerp(at,st){return this.r+=(at.r-this.r)*st,this.g+=(at.g-this.g)*st,this.b+=(at.b-this.b)*st,this}lerpColors(at,st,ot){return this.r=at.r+(st.r-at.r)*ot,this.g=at.g+(st.g-at.g)*ot,this.b=at.b+(st.b-at.b)*ot,this}lerpHSL(at,st){this.getHSL(vf),at.getHSL(_f);const ot=lerp(vf.h,_f.h,st),ut=lerp(vf.s,_f.s,st),Hl=lerp(vf.l,_f.l,st);return this.setHSL(ot,ut,Hl),this}setFromVector3(at){return this.r=at.x,this.g=at.y,this.b=at.z,this}applyMatrix3(at){const st=this.r,ot=this.g,ut=this.b,Hl=at.elements;return this.r=Hl[0]*st+Hl[3]*ot+Hl[6]*ut,this.g=Hl[1]*st+Hl[4]*ot+Hl[7]*ut,this.b=Hl[2]*st+Hl[5]*ot+Hl[8]*ut,this}equals(at){return at.r===this.r&&at.g===this.g&&at.b===this.b}fromArray(at,st){return void 0===st&&(st=0),this.r=at[st],this.g=at[st+1],this.b=at[st+2],this}toArray(at,st){return void 0===at&&(at=[]),void 0===st&&(st=0),at[st]=this.r,at[st+1]=this.g,at[st+2]=this.b,at}fromBufferAttribute(at,st){return this.r=at.getX(st),this.g=at.getY(st),this.b=at.getZ(st),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const xf=new Color;Color.NAMES=yf;let bf=0;class Material extends EventDispatcher{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:bf++}),this.uuid=generateUUID(),this.name="",this.type="Material",this.blending=cu,this.side=Sc,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=ed,this.blendDst=td,this.blendEquation=Au,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Color(0,0,0),this.blendAlpha=0,this.depthFunc=md,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Rm,this.stencilZFail=Rm,this.stencilZPass=Rm,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(at){this._alphaTest>0!==at>0&&this.version++,this._alphaTest=at}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(at){if(void 0!==at)for(const st in at){const ot=at[st];if(void 0===ot){console.warn(`THREE.Material: parameter '${st}' has value of undefined.`);continue}const ut=this[st];void 0!==ut?ut&&ut.isColor?ut.set(ot):ut&&ut.isVector3&&ot&&ot.isVector3?ut.copy(ot):this[st]=ot:console.warn(`THREE.Material: '${st}' is not a property of THREE.${this.type}.`)}}toJSON(at){const st=void 0===at||"string"===typeof at;st&&(at={textures:{},images:{}});const ot={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};function extractFromCache(at){const st=[];for(const ot in at){const ut=at[ot];delete ut.metadata,st.push(ut)}return st}if(ot.uuid=this.uuid,ot.type=this.type,""!==this.name&&(ot.name=this.name),this.color&&this.color.isColor&&(ot.color=this.color.getHex()),void 0!==this.roughness&&(ot.roughness=this.roughness),void 0!==this.metalness&&(ot.metalness=this.metalness),void 0!==this.sheen&&(ot.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(ot.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(ot.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(ot.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(ot.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(ot.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(ot.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(ot.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(ot.shininess=this.shininess),void 0!==this.clearcoat&&(ot.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(ot.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(ot.clearcoatMap=this.clearcoatMap.toJSON(at).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(ot.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(at).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(ot.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(at).uuid,ot.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(ot.dispersion=this.dispersion),void 0!==this.iridescence&&(ot.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(ot.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(ot.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(ot.iridescenceMap=this.iridescenceMap.toJSON(at).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(ot.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(at).uuid),void 0!==this.anisotropy&&(ot.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(ot.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(ot.anisotropyMap=this.anisotropyMap.toJSON(at).uuid),this.map&&this.map.isTexture&&(ot.map=this.map.toJSON(at).uuid),this.matcap&&this.matcap.isTexture&&(ot.matcap=this.matcap.toJSON(at).uuid),this.alphaMap&&this.alphaMap.isTexture&&(ot.alphaMap=this.alphaMap.toJSON(at).uuid),this.lightMap&&this.lightMap.isTexture&&(ot.lightMap=this.lightMap.toJSON(at).uuid,ot.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(ot.aoMap=this.aoMap.toJSON(at).uuid,ot.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(ot.bumpMap=this.bumpMap.toJSON(at).uuid,ot.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(ot.normalMap=this.normalMap.toJSON(at).uuid,ot.normalMapType=this.normalMapType,ot.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(ot.displacementMap=this.displacementMap.toJSON(at).uuid,ot.displacementScale=this.displacementScale,ot.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(ot.roughnessMap=this.roughnessMap.toJSON(at).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(ot.metalnessMap=this.metalnessMap.toJSON(at).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(ot.emissiveMap=this.emissiveMap.toJSON(at).uuid),this.specularMap&&this.specularMap.isTexture&&(ot.specularMap=this.specularMap.toJSON(at).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(ot.specularIntensityMap=this.specularIntensityMap.toJSON(at).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(ot.specularColorMap=this.specularColorMap.toJSON(at).uuid),this.envMap&&this.envMap.isTexture&&(ot.envMap=this.envMap.toJSON(at).uuid,void 0!==this.combine&&(ot.combine=this.combine)),void 0!==this.envMapRotation&&(ot.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(ot.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(ot.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(ot.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(ot.gradientMap=this.gradientMap.toJSON(at).uuid),void 0!==this.transmission&&(ot.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(ot.transmissionMap=this.transmissionMap.toJSON(at).uuid),void 0!==this.thickness&&(ot.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(ot.thicknessMap=this.thicknessMap.toJSON(at).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(ot.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(ot.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(ot.size=this.size),null!==this.shadowSide&&(ot.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(ot.sizeAttenuation=this.sizeAttenuation),this.blending!==cu&&(ot.blending=this.blending),this.side!==Sc&&(ot.side=this.side),!0===this.vertexColors&&(ot.vertexColors=!0),this.opacity<1&&(ot.opacity=this.opacity),!0===this.transparent&&(ot.transparent=!0),this.blendSrc!==ed&&(ot.blendSrc=this.blendSrc),this.blendDst!==td&&(ot.blendDst=this.blendDst),this.blendEquation!==Au&&(ot.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(ot.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(ot.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(ot.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(ot.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(ot.blendAlpha=this.blendAlpha),this.depthFunc!==md&&(ot.depthFunc=this.depthFunc),!1===this.depthTest&&(ot.depthTest=this.depthTest),!1===this.depthWrite&&(ot.depthWrite=this.depthWrite),!1===this.colorWrite&&(ot.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(ot.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(ot.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(ot.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(ot.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Rm&&(ot.stencilFail=this.stencilFail),this.stencilZFail!==Rm&&(ot.stencilZFail=this.stencilZFail),this.stencilZPass!==Rm&&(ot.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(ot.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(ot.rotation=this.rotation),!0===this.polygonOffset&&(ot.polygonOffset=!0),0!==this.polygonOffsetFactor&&(ot.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(ot.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(ot.linewidth=this.linewidth),void 0!==this.dashSize&&(ot.dashSize=this.dashSize),void 0!==this.gapSize&&(ot.gapSize=this.gapSize),void 0!==this.scale&&(ot.scale=this.scale),!0===this.dithering&&(ot.dithering=!0),this.alphaTest>0&&(ot.alphaTest=this.alphaTest),!0===this.alphaHash&&(ot.alphaHash=!0),!0===this.alphaToCoverage&&(ot.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(ot.premultipliedAlpha=!0),!0===this.forceSinglePass&&(ot.forceSinglePass=!0),!0===this.wireframe&&(ot.wireframe=!0),this.wireframeLinewidth>1&&(ot.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(ot.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(ot.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(ot.flatShading=!0),!1===this.visible&&(ot.visible=!1),!1===this.toneMapped&&(ot.toneMapped=!1),!1===this.fog&&(ot.fog=!1),Object.keys(this.userData).length>0&&(ot.userData=this.userData),st){const st=extractFromCache(at.textures),ut=extractFromCache(at.images);st.length>0&&(ot.textures=st),ut.length>0&&(ot.images=ut)}return ot}clone(){return(new this.constructor).copy(this)}copy(at){this.name=at.name,this.blending=at.blending,this.side=at.side,this.vertexColors=at.vertexColors,this.opacity=at.opacity,this.transparent=at.transparent,this.blendSrc=at.blendSrc,this.blendDst=at.blendDst,this.blendEquation=at.blendEquation,this.blendSrcAlpha=at.blendSrcAlpha,this.blendDstAlpha=at.blendDstAlpha,this.blendEquationAlpha=at.blendEquationAlpha,this.blendColor.copy(at.blendColor),this.blendAlpha=at.blendAlpha,this.depthFunc=at.depthFunc,this.depthTest=at.depthTest,this.depthWrite=at.depthWrite,this.stencilWriteMask=at.stencilWriteMask,this.stencilFunc=at.stencilFunc,this.stencilRef=at.stencilRef,this.stencilFuncMask=at.stencilFuncMask,this.stencilFail=at.stencilFail,this.stencilZFail=at.stencilZFail,this.stencilZPass=at.stencilZPass,this.stencilWrite=at.stencilWrite;const st=at.clippingPlanes;let ot=null;if(null!==st){const at=st.length;ot=new Array(at);for(let ut=0;ut!==at;++ut)ot[ut]=st[ut].clone()}return this.clippingPlanes=ot,this.clipIntersection=at.clipIntersection,this.clipShadows=at.clipShadows,this.shadowSide=at.shadowSide,this.colorWrite=at.colorWrite,this.precision=at.precision,this.polygonOffset=at.polygonOffset,this.polygonOffsetFactor=at.polygonOffsetFactor,this.polygonOffsetUnits=at.polygonOffsetUnits,this.dithering=at.dithering,this.alphaTest=at.alphaTest,this.alphaHash=at.alphaHash,this.alphaToCoverage=at.alphaToCoverage,this.premultipliedAlpha=at.premultipliedAlpha,this.forceSinglePass=at.forceSinglePass,this.visible=at.visible,this.toneMapped=at.toneMapped,this.userData=JSON.parse(JSON.stringify(at.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(at){!0===at&&this.version++}}class MeshBasicMaterial extends Material{constructor(at){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Color(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Euler,this.combine=vd,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(at)}copy(at){return super.copy(at),this.color.copy(at.color),this.map=at.map,this.lightMap=at.lightMap,this.lightMapIntensity=at.lightMapIntensity,this.aoMap=at.aoMap,this.aoMapIntensity=at.aoMapIntensity,this.specularMap=at.specularMap,this.alphaMap=at.alphaMap,this.envMap=at.envMap,this.envMapRotation.copy(at.envMapRotation),this.combine=at.combine,this.reflectivity=at.reflectivity,this.refractionRatio=at.refractionRatio,this.wireframe=at.wireframe,this.wireframeLinewidth=at.wireframeLinewidth,this.wireframeLinecap=at.wireframeLinecap,this.wireframeLinejoin=at.wireframeLinejoin,this.fog=at.fog,this}}const wf=new Vector3,Ef=new Vector2;let Mf=0;class BufferAttribute{constructor(at,st,ot){if(void 0===ot&&(ot=!1),Array.isArray(at))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:Mf++}),this.name="",this.array=at,this.itemSize=st,this.count=void 0!==at?at.length/st:0,this.normalized=ot,this.usage=Hm,this.updateRanges=[],this.gpuType=Kd,this.version=0}onUploadCallback(){}set needsUpdate(at){!0===at&&this.version++}setUsage(at){return this.usage=at,this}addUpdateRange(at,st){this.updateRanges.push({start:at,count:st})}clearUpdateRanges(){this.updateRanges.length=0}copy(at){return this.name=at.name,this.array=new at.array.constructor(at.array),this.itemSize=at.itemSize,this.count=at.count,this.normalized=at.normalized,this.usage=at.usage,this.gpuType=at.gpuType,this}copyAt(at,st,ot){at*=this.itemSize,ot*=st.itemSize;for(let ut=0,Hl=this.itemSize;ut<Hl;ut++)this.array[at+ut]=st.array[ot+ut];return this}copyArray(at){return this.array.set(at),this}applyMatrix3(at){if(2===this.itemSize)for(let st=0,ot=this.count;st<ot;st++)Ef.fromBufferAttribute(this,st),Ef.applyMatrix3(at),this.setXY(st,Ef.x,Ef.y);else if(3===this.itemSize)for(let st=0,ot=this.count;st<ot;st++)wf.fromBufferAttribute(this,st),wf.applyMatrix3(at),this.setXYZ(st,wf.x,wf.y,wf.z);return this}applyMatrix4(at){for(let st=0,ot=this.count;st<ot;st++)wf.fromBufferAttribute(this,st),wf.applyMatrix4(at),this.setXYZ(st,wf.x,wf.y,wf.z);return this}applyNormalMatrix(at){for(let st=0,ot=this.count;st<ot;st++)wf.fromBufferAttribute(this,st),wf.applyNormalMatrix(at),this.setXYZ(st,wf.x,wf.y,wf.z);return this}transformDirection(at){for(let st=0,ot=this.count;st<ot;st++)wf.fromBufferAttribute(this,st),wf.transformDirection(at),this.setXYZ(st,wf.x,wf.y,wf.z);return this}set(at,st){return void 0===st&&(st=0),this.array.set(at,st),this}getComponent(at,st){let ot=this.array[at*this.itemSize+st];return this.normalized&&(ot=denormalize(ot,this.array)),ot}setComponent(at,st,ot){return this.normalized&&(ot=normalize(ot,this.array)),this.array[at*this.itemSize+st]=ot,this}getX(at){let st=this.array[at*this.itemSize];return this.normalized&&(st=denormalize(st,this.array)),st}setX(at,st){return this.normalized&&(st=normalize(st,this.array)),this.array[at*this.itemSize]=st,this}getY(at){let st=this.array[at*this.itemSize+1];return this.normalized&&(st=denormalize(st,this.array)),st}setY(at,st){return this.normalized&&(st=normalize(st,this.array)),this.array[at*this.itemSize+1]=st,this}getZ(at){let st=this.array[at*this.itemSize+2];return this.normalized&&(st=denormalize(st,this.array)),st}setZ(at,st){return this.normalized&&(st=normalize(st,this.array)),this.array[at*this.itemSize+2]=st,this}getW(at){let st=this.array[at*this.itemSize+3];return this.normalized&&(st=denormalize(st,this.array)),st}setW(at,st){return this.normalized&&(st=normalize(st,this.array)),this.array[at*this.itemSize+3]=st,this}setXY(at,st,ot){return at*=this.itemSize,this.normalized&&(st=normalize(st,this.array),ot=normalize(ot,this.array)),this.array[at+0]=st,this.array[at+1]=ot,this}setXYZ(at,st,ot,ut){return at*=this.itemSize,this.normalized&&(st=normalize(st,this.array),ot=normalize(ot,this.array),ut=normalize(ut,this.array)),this.array[at+0]=st,this.array[at+1]=ot,this.array[at+2]=ut,this}setXYZW(at,st,ot,ut,Hl){return at*=this.itemSize,this.normalized&&(st=normalize(st,this.array),ot=normalize(ot,this.array),ut=normalize(ut,this.array),Hl=normalize(Hl,this.array)),this.array[at+0]=st,this.array[at+1]=ot,this.array[at+2]=ut,this.array[at+3]=Hl,this}onUpload(at){return this.onUploadCallback=at,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const at={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(at.name=this.name),this.usage!==Hm&&(at.usage=this.usage),at}}class Uint16BufferAttribute extends BufferAttribute{constructor(at,st,ot){super(new Uint16Array(at),st,ot)}}class Uint32BufferAttribute extends BufferAttribute{constructor(at,st,ot){super(new Uint32Array(at),st,ot)}}class Float32BufferAttribute extends BufferAttribute{constructor(at,st,ot){super(new Float32Array(at),st,ot)}}let Sf=0;const Tf=new Matrix4,Cf=new Object3D,kf=new Vector3,If=new Box3,Df=new Box3,Lf=new Vector3;class BufferGeometry extends EventDispatcher{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:Sf++}),this.uuid=generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(at){return Array.isArray(at)?this.index=new(arrayNeedsUint32(at)?Uint32BufferAttribute:Uint16BufferAttribute)(at,1):this.index=at,this}setIndirect(at){return this.indirect=at,this}getIndirect(){return this.indirect}getAttribute(at){return this.attributes[at]}setAttribute(at,st){return this.attributes[at]=st,this}deleteAttribute(at){return delete this.attributes[at],this}hasAttribute(at){return void 0!==this.attributes[at]}addGroup(at,st,ot){void 0===ot&&(ot=0),this.groups.push({start:at,count:st,materialIndex:ot})}clearGroups(){this.groups=[]}setDrawRange(at,st){this.drawRange.start=at,this.drawRange.count=st}applyMatrix4(at){const st=this.attributes.position;void 0!==st&&(st.applyMatrix4(at),st.needsUpdate=!0);const ot=this.attributes.normal;if(void 0!==ot){const st=(new Matrix3).getNormalMatrix(at);ot.applyNormalMatrix(st),ot.needsUpdate=!0}const ut=this.attributes.tangent;return void 0!==ut&&(ut.transformDirection(at),ut.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(at){return Tf.makeRotationFromQuaternion(at),this.applyMatrix4(Tf),this}rotateX(at){return Tf.makeRotationX(at),this.applyMatrix4(Tf),this}rotateY(at){return Tf.makeRotationY(at),this.applyMatrix4(Tf),this}rotateZ(at){return Tf.makeRotationZ(at),this.applyMatrix4(Tf),this}translate(at,st,ot){return Tf.makeTranslation(at,st,ot),this.applyMatrix4(Tf),this}scale(at,st,ot){return Tf.makeScale(at,st,ot),this.applyMatrix4(Tf),this}lookAt(at){return Cf.lookAt(at),Cf.updateMatrix(),this.applyMatrix4(Cf.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(kf).negate(),this.translate(kf.x,kf.y,kf.z),this}setFromPoints(at){const st=this.getAttribute("position");if(void 0===st){const st=[];for(let ot=0,ut=at.length;ot<ut;ot++){const ut=at[ot];st.push(ut.x,ut.y,ut.z||0)}this.setAttribute("position",new Float32BufferAttribute(st,3))}else{const ot=Math.min(at.length,st.count);for(let ut=0;ut<ot;ut++){const ot=at[ut];st.setXYZ(ut,ot.x,ot.y,ot.z||0)}at.length>st.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),st.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Box3);const at=this.attributes.position,st=this.morphAttributes.position;if(at&&at.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new Vector3(-1/0,-1/0,-1/0),new Vector3(1/0,1/0,1/0));if(void 0!==at){if(this.boundingBox.setFromBufferAttribute(at),st)for(let ot=0,ut=st.length;ot<ut;ot++){const at=st[ot];If.setFromBufferAttribute(at),this.morphTargetsRelative?(Lf.addVectors(this.boundingBox.min,If.min),this.boundingBox.expandByPoint(Lf),Lf.addVectors(this.boundingBox.max,If.max),this.boundingBox.expandByPoint(Lf)):(this.boundingBox.expandByPoint(If.min),this.boundingBox.expandByPoint(If.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Sphere);const at=this.attributes.position,st=this.morphAttributes.position;if(at&&at.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new Vector3,1/0);if(at){const ot=this.boundingSphere.center;if(If.setFromBufferAttribute(at),st)for(let at=0,Hl=st.length;at<Hl;at++){const ot=st[at];Df.setFromBufferAttribute(ot),this.morphTargetsRelative?(Lf.addVectors(If.min,Df.min),If.expandByPoint(Lf),Lf.addVectors(If.max,Df.max),If.expandByPoint(Lf)):(If.expandByPoint(Df.min),If.expandByPoint(Df.max))}If.getCenter(ot);let ut=0;for(let st=0,Hl=at.count;st<Hl;st++)Lf.fromBufferAttribute(at,st),ut=Math.max(ut,ot.distanceToSquared(Lf));if(st)for(let Hl=0,rc=st.length;Hl<rc;Hl++){const rc=st[Hl],sc=this.morphTargetsRelative;for(let st=0,Hl=rc.count;st<Hl;st++)Lf.fromBufferAttribute(rc,st),sc&&(kf.fromBufferAttribute(at,st),Lf.add(kf)),ut=Math.max(ut,ot.distanceToSquared(Lf))}this.boundingSphere.radius=Math.sqrt(ut),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const at=this.index,st=this.attributes;if(null===at||void 0===st.position||void 0===st.normal||void 0===st.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const ot=st.position,ut=st.normal,Hl=st.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new BufferAttribute(new Float32Array(4*ot.count),4));const rc=this.getAttribute("tangent"),sc=[],oc=[];for(let _u=0;_u<ot.count;_u++)sc[_u]=new Vector3,oc[_u]=new Vector3;const _c=new Vector3,wc=new Vector3,Sc=new Vector3,iu=new Vector2,su=new Vector2,lu=new Vector2,cu=new Vector3,uu=new Vector3;function handleTriangle(at,st,ut){_c.fromBufferAttribute(ot,at),wc.fromBufferAttribute(ot,st),Sc.fromBufferAttribute(ot,ut),iu.fromBufferAttribute(Hl,at),su.fromBufferAttribute(Hl,st),lu.fromBufferAttribute(Hl,ut),wc.sub(_c),Sc.sub(_c),su.sub(iu),lu.sub(iu);const rc=1/(su.x*lu.y-lu.x*su.y);isFinite(rc)&&(cu.copy(wc).multiplyScalar(lu.y).addScaledVector(Sc,-su.y).multiplyScalar(rc),uu.copy(Sc).multiplyScalar(su.x).addScaledVector(wc,-lu.x).multiplyScalar(rc),sc[at].add(cu),sc[st].add(cu),sc[ut].add(cu),oc[at].add(uu),oc[st].add(uu),oc[ut].add(uu))}let pu=this.groups;0===pu.length&&(pu=[{start:0,count:at.count}]);for(let _u=0,xu=pu.length;_u<xu;++_u){const st=pu[_u],ot=st.start;for(let ut=ot,Hl=ot+st.count;ut<Hl;ut+=3)handleTriangle(at.getX(ut+0),at.getX(ut+1),at.getX(ut+2))}const mu=new Vector3,gu=new Vector3,Au=new Vector3,yu=new Vector3;function handleVertex(at){Au.fromBufferAttribute(ut,at),yu.copy(Au);const st=sc[at];mu.copy(st),mu.sub(Au.multiplyScalar(Au.dot(st))).normalize(),gu.crossVectors(yu,st);const ot=gu.dot(oc[at])<0?-1:1;rc.setXYZW(at,mu.x,mu.y,mu.z,ot)}for(let _u=0,xu=pu.length;_u<xu;++_u){const st=pu[_u],ot=st.start;for(let ut=ot,Hl=ot+st.count;ut<Hl;ut+=3)handleVertex(at.getX(ut+0)),handleVertex(at.getX(ut+1)),handleVertex(at.getX(ut+2))}}computeVertexNormals(){const at=this.index,st=this.getAttribute("position");if(void 0!==st){let ot=this.getAttribute("normal");if(void 0===ot)ot=new BufferAttribute(new Float32Array(3*st.count),3),this.setAttribute("normal",ot);else for(let at=0,st=ot.count;at<st;at++)ot.setXYZ(at,0,0,0);const ut=new Vector3,Hl=new Vector3,rc=new Vector3,sc=new Vector3,oc=new Vector3,_c=new Vector3,wc=new Vector3,Sc=new Vector3;if(at)for(let iu=0,su=at.count;iu<su;iu+=3){const su=at.getX(iu+0),lu=at.getX(iu+1),cu=at.getX(iu+2);ut.fromBufferAttribute(st,su),Hl.fromBufferAttribute(st,lu),rc.fromBufferAttribute(st,cu),wc.subVectors(rc,Hl),Sc.subVectors(ut,Hl),wc.cross(Sc),sc.fromBufferAttribute(ot,su),oc.fromBufferAttribute(ot,lu),_c.fromBufferAttribute(ot,cu),sc.add(wc),oc.add(wc),_c.add(wc),ot.setXYZ(su,sc.x,sc.y,sc.z),ot.setXYZ(lu,oc.x,oc.y,oc.z),ot.setXYZ(cu,_c.x,_c.y,_c.z)}else for(let at=0,iu=st.count;at<iu;at+=3)ut.fromBufferAttribute(st,at+0),Hl.fromBufferAttribute(st,at+1),rc.fromBufferAttribute(st,at+2),wc.subVectors(rc,Hl),Sc.subVectors(ut,Hl),wc.cross(Sc),ot.setXYZ(at+0,wc.x,wc.y,wc.z),ot.setXYZ(at+1,wc.x,wc.y,wc.z),ot.setXYZ(at+2,wc.x,wc.y,wc.z);this.normalizeNormals(),ot.needsUpdate=!0}}normalizeNormals(){const at=this.attributes.normal;for(let st=0,ot=at.count;st<ot;st++)Lf.fromBufferAttribute(at,st),Lf.normalize(),at.setXYZ(st,Lf.x,Lf.y,Lf.z)}toNonIndexed(){function convertBufferAttribute(at,st){const ot=at.array,ut=at.itemSize,Hl=at.normalized,rc=new ot.constructor(st.length*ut);let sc=0,oc=0;for(let _c=0,wc=st.length;_c<wc;_c++){sc=at.isInterleavedBufferAttribute?st[_c]*at.data.stride+at.offset:st[_c]*ut;for(let at=0;at<ut;at++)rc[oc++]=ot[sc++]}return new BufferAttribute(rc,ut,Hl)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const at=new BufferGeometry,st=this.index.array,ot=this.attributes;for(const rc in ot){const ut=convertBufferAttribute(ot[rc],st);at.setAttribute(rc,ut)}const ut=this.morphAttributes;for(const rc in ut){const ot=[],Hl=ut[rc];for(let at=0,ut=Hl.length;at<ut;at++){const ut=convertBufferAttribute(Hl[at],st);ot.push(ut)}at.morphAttributes[rc]=ot}at.morphTargetsRelative=this.morphTargetsRelative;const Hl=this.groups;for(let rc=0,sc=Hl.length;rc<sc;rc++){const st=Hl[rc];at.addGroup(st.start,st.count,st.materialIndex)}return at}toJSON(){const at={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(at.uuid=this.uuid,at.type=this.type,""!==this.name&&(at.name=this.name),Object.keys(this.userData).length>0&&(at.userData=this.userData),void 0!==this.parameters){const st=this.parameters;for(const ot in st)void 0!==st[ot]&&(at[ot]=st[ot]);return at}at.data={attributes:{}};const st=this.index;null!==st&&(at.data.index={type:st.array.constructor.name,array:Array.prototype.slice.call(st.array)});const ot=this.attributes;for(const oc in ot){const st=ot[oc];at.data.attributes[oc]=st.toJSON(at.data)}const ut={};let Hl=!1;for(const oc in this.morphAttributes){const st=this.morphAttributes[oc],ot=[];for(let ut=0,Hl=st.length;ut<Hl;ut++){const Hl=st[ut];ot.push(Hl.toJSON(at.data))}ot.length>0&&(ut[oc]=ot,Hl=!0)}Hl&&(at.data.morphAttributes=ut,at.data.morphTargetsRelative=this.morphTargetsRelative);const rc=this.groups;rc.length>0&&(at.data.groups=JSON.parse(JSON.stringify(rc)));const sc=this.boundingSphere;return null!==sc&&(at.data.boundingSphere=sc.toJSON()),at}clone(){return(new this.constructor).copy(this)}copy(at){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const st={};this.name=at.name;const ot=at.index;null!==ot&&this.setIndex(ot.clone());const ut=at.attributes;for(const _c in ut){const at=ut[_c];this.setAttribute(_c,at.clone(st))}const Hl=at.morphAttributes;for(const _c in Hl){const at=[],ot=Hl[_c];for(let ut=0,Hl=ot.length;ut<Hl;ut++)at.push(ot[ut].clone(st));this.morphAttributes[_c]=at}this.morphTargetsRelative=at.morphTargetsRelative;const rc=at.groups;for(let _c=0,wc=rc.length;_c<wc;_c++){const at=rc[_c];this.addGroup(at.start,at.count,at.materialIndex)}const sc=at.boundingBox;null!==sc&&(this.boundingBox=sc.clone());const oc=at.boundingSphere;return null!==oc&&(this.boundingSphere=oc.clone()),this.drawRange.start=at.drawRange.start,this.drawRange.count=at.drawRange.count,this.userData=at.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Pf=new Matrix4,zf=new Ray,Nf=new Sphere,Rf=new Vector3,Of=new Vector3,Bf=new Vector3,Ff=new Vector3,jf=new Vector3,Uf=new Vector3,Vf=new Vector3,Gf=new Vector3;class Mesh extends Object3D{constructor(at,st){void 0===at&&(at=new BufferGeometry),void 0===st&&(st=new MeshBasicMaterial),super(),this.isMesh=!0,this.type="Mesh",this.geometry=at,this.material=st,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(at,st){return super.copy(at,st),void 0!==at.morphTargetInfluences&&(this.morphTargetInfluences=at.morphTargetInfluences.slice()),void 0!==at.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},at.morphTargetDictionary)),this.material=Array.isArray(at.material)?at.material.slice():at.material,this.geometry=at.geometry,this}updateMorphTargets(){const at=this.geometry.morphAttributes,st=Object.keys(at);if(st.length>0){const ot=at[st[0]];if(void 0!==ot){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let at=0,st=ot.length;at<st;at++){const st=ot[at].name||String(at);this.morphTargetInfluences.push(0),this.morphTargetDictionary[st]=at}}}}getVertexPosition(at,st){const ot=this.geometry,ut=ot.attributes.position,Hl=ot.morphAttributes.position,rc=ot.morphTargetsRelative;st.fromBufferAttribute(ut,at);const sc=this.morphTargetInfluences;if(Hl&&sc){Uf.set(0,0,0);for(let ot=0,ut=Hl.length;ot<ut;ot++){const ut=sc[ot],oc=Hl[ot];0!==ut&&(jf.fromBufferAttribute(oc,at),rc?Uf.addScaledVector(jf,ut):Uf.addScaledVector(jf.sub(st),ut))}st.add(Uf)}return st}raycast(at,st){const ot=this.geometry,ut=this.material,Hl=this.matrixWorld;if(void 0!==ut){if(null===ot.boundingSphere&&ot.computeBoundingSphere(),Nf.copy(ot.boundingSphere),Nf.applyMatrix4(Hl),zf.copy(at.ray).recast(at.near),!1===Nf.containsPoint(zf.origin)){if(null===zf.intersectSphere(Nf,Rf))return;if(zf.origin.distanceToSquared(Rf)>(at.far-at.near)**2)return}Pf.copy(Hl).invert(),zf.copy(at.ray).applyMatrix4(Pf),null!==ot.boundingBox&&!1===zf.intersectsBox(ot.boundingBox)||this._computeIntersections(at,st,zf)}}_computeIntersections(at,st,ot){let ut;const Hl=this.geometry,rc=this.material,sc=Hl.index,oc=Hl.attributes.position,_c=Hl.attributes.uv,wc=Hl.attributes.uv1,Sc=Hl.attributes.normal,iu=Hl.groups,su=Hl.drawRange;if(null!==sc)if(Array.isArray(rc))for(let lu=0,cu=iu.length;lu<cu;lu++){const Hl=iu[lu],oc=rc[Hl.materialIndex];for(let rc=Math.max(Hl.start,su.start),iu=Math.min(sc.count,Math.min(Hl.start+Hl.count,su.start+su.count));rc<iu;rc+=3){ut=checkGeometryIntersection(this,oc,at,ot,_c,wc,Sc,sc.getX(rc),sc.getX(rc+1),sc.getX(rc+2)),ut&&(ut.faceIndex=Math.floor(rc/3),ut.face.materialIndex=Hl.materialIndex,st.push(ut))}}else{for(let Hl=Math.max(0,su.start),oc=Math.min(sc.count,su.start+su.count);Hl<oc;Hl+=3){ut=checkGeometryIntersection(this,rc,at,ot,_c,wc,Sc,sc.getX(Hl),sc.getX(Hl+1),sc.getX(Hl+2)),ut&&(ut.faceIndex=Math.floor(Hl/3),st.push(ut))}}else if(void 0!==oc)if(Array.isArray(rc))for(let lu=0,cu=iu.length;lu<cu;lu++){const Hl=iu[lu],sc=rc[Hl.materialIndex];for(let rc=Math.max(Hl.start,su.start),iu=Math.min(oc.count,Math.min(Hl.start+Hl.count,su.start+su.count));rc<iu;rc+=3){ut=checkGeometryIntersection(this,sc,at,ot,_c,wc,Sc,rc,rc+1,rc+2),ut&&(ut.faceIndex=Math.floor(rc/3),ut.face.materialIndex=Hl.materialIndex,st.push(ut))}}else{for(let Hl=Math.max(0,su.start),sc=Math.min(oc.count,su.start+su.count);Hl<sc;Hl+=3){ut=checkGeometryIntersection(this,rc,at,ot,_c,wc,Sc,Hl,Hl+1,Hl+2),ut&&(ut.faceIndex=Math.floor(Hl/3),st.push(ut))}}}}function checkGeometryIntersection(at,st,ot,ut,Hl,rc,sc,oc,_c,wc){at.getVertexPosition(oc,Of),at.getVertexPosition(_c,Bf),at.getVertexPosition(wc,Ff);const su=function(at,st,ot,ut,Hl,rc,sc,oc){let _c;if(_c=st.side===iu?ut.intersectTriangle(sc,rc,Hl,!0,oc):ut.intersectTriangle(Hl,rc,sc,st.side===Sc,oc),null===_c)return null;Gf.copy(oc),Gf.applyMatrix4(at.matrixWorld);const wc=ot.ray.origin.distanceTo(Gf);return wc<ot.near||wc>ot.far?null:{distance:wc,point:Gf.clone(),object:at}}(at,st,ot,ut,Of,Bf,Ff,Vf);if(su){const at=new Vector3;Triangle.getBarycoord(Vf,Of,Bf,Ff,at),Hl&&(su.uv=Triangle.getInterpolatedAttribute(Hl,oc,_c,wc,at,new Vector2)),rc&&(su.uv1=Triangle.getInterpolatedAttribute(rc,oc,_c,wc,at,new Vector2)),sc&&(su.normal=Triangle.getInterpolatedAttribute(sc,oc,_c,wc,at,new Vector3),su.normal.dot(ut.direction)>0&&su.normal.multiplyScalar(-1));const st={a:oc,b:_c,c:wc,normal:new Vector3,materialIndex:0};Triangle.getNormal(Of,Bf,Ff,st.normal),su.face=st,su.barycoord=at}return su}class BoxGeometry extends BufferGeometry{constructor(at,st,ot,ut,Hl,rc){void 0===at&&(at=1),void 0===st&&(st=1),void 0===ot&&(ot=1),void 0===ut&&(ut=1),void 0===Hl&&(Hl=1),void 0===rc&&(rc=1),super(),this.type="BoxGeometry",this.parameters={width:at,height:st,depth:ot,widthSegments:ut,heightSegments:Hl,depthSegments:rc};const sc=this;ut=Math.floor(ut),Hl=Math.floor(Hl),rc=Math.floor(rc);const oc=[],_c=[],wc=[],Sc=[];let iu=0,su=0;function buildPlane(at,st,ot,ut,Hl,rc,lu,cu,uu,pu,mu){const gu=rc/uu,Au=lu/pu,yu=rc/2,_u=lu/2,xu=cu/2,Su=uu+1,Du=pu+1;let Lu=0,$u=0;const hh=new Vector3;for(let sc=0;sc<Du;sc++){const rc=sc*Au-_u;for(let oc=0;oc<Su;oc++){const iu=oc*gu-yu;hh[at]=iu*ut,hh[st]=rc*Hl,hh[ot]=xu,_c.push(hh.x,hh.y,hh.z),hh[at]=0,hh[st]=0,hh[ot]=cu>0?1:-1,wc.push(hh.x,hh.y,hh.z),Sc.push(oc/uu),Sc.push(1-sc/pu),Lu+=1}}for(let sc=0;sc<pu;sc++)for(let at=0;at<uu;at++){const st=iu+at+Su*sc,ot=iu+at+Su*(sc+1),ut=iu+(at+1)+Su*(sc+1),Hl=iu+(at+1)+Su*sc;oc.push(st,ot,Hl),oc.push(ot,ut,Hl),$u+=6}sc.addGroup(su,$u,mu),su+=$u,iu+=Lu}buildPlane("z","y","x",-1,-1,ot,st,at,rc,Hl,0),buildPlane("z","y","x",1,-1,ot,st,-at,rc,Hl,1),buildPlane("x","z","y",1,1,at,ot,st,ut,rc,2),buildPlane("x","z","y",1,-1,at,ot,-st,ut,rc,3),buildPlane("x","y","z",1,-1,at,st,ot,ut,Hl,4),buildPlane("x","y","z",-1,-1,at,st,-ot,ut,Hl,5),this.setIndex(oc),this.setAttribute("position",new Float32BufferAttribute(_c,3)),this.setAttribute("normal",new Float32BufferAttribute(wc,3)),this.setAttribute("uv",new Float32BufferAttribute(Sc,2))}copy(at){return super.copy(at),this.parameters=Object.assign({},at.parameters),this}static fromJSON(at){return new BoxGeometry(at.width,at.height,at.depth,at.widthSegments,at.heightSegments,at.depthSegments)}}function cloneUniforms(at){const st={};for(const ot in at){st[ot]={};for(const ut in at[ot]){const Hl=at[ot][ut];Hl&&(Hl.isColor||Hl.isMatrix3||Hl.isMatrix4||Hl.isVector2||Hl.isVector3||Hl.isVector4||Hl.isTexture||Hl.isQuaternion)?Hl.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),st[ot][ut]=null):st[ot][ut]=Hl.clone():Array.isArray(Hl)?st[ot][ut]=Hl.slice():st[ot][ut]=Hl}}return st}function mergeUniforms(at){const st={};for(let ot=0;ot<at.length;ot++){const ut=cloneUniforms(at[ot]);for(const at in ut)st[at]=ut[at]}return st}function getUnlitUniformColorSpace(at){const st=at.getRenderTarget();return null===st?at.outputColorSpace:!0===st.isXRRenderTarget?st.texture.colorSpace:sg.workingColorSpace}const Zf={clone:cloneUniforms,merge:mergeUniforms};class ShaderMaterial extends Material{constructor(at){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==at&&this.setValues(at)}copy(at){return super.copy(at),this.fragmentShader=at.fragmentShader,this.vertexShader=at.vertexShader,this.uniforms=cloneUniforms(at.uniforms),this.uniformsGroups=function(at){const st=[];for(let ot=0;ot<at.length;ot++)st.push(at[ot].clone());return st}(at.uniformsGroups),this.defines=Object.assign({},at.defines),this.wireframe=at.wireframe,this.wireframeLinewidth=at.wireframeLinewidth,this.fog=at.fog,this.lights=at.lights,this.clipping=at.clipping,this.extensions=Object.assign({},at.extensions),this.glslVersion=at.glslVersion,this}toJSON(at){const st=super.toJSON(at);st.glslVersion=this.glslVersion,st.uniforms={};for(const ut in this.uniforms){const ot=this.uniforms[ut].value;ot&&ot.isTexture?st.uniforms[ut]={type:"t",value:ot.toJSON(at).uuid}:ot&&ot.isColor?st.uniforms[ut]={type:"c",value:ot.getHex()}:ot&&ot.isVector2?st.uniforms[ut]={type:"v2",value:ot.toArray()}:ot&&ot.isVector3?st.uniforms[ut]={type:"v3",value:ot.toArray()}:ot&&ot.isVector4?st.uniforms[ut]={type:"v4",value:ot.toArray()}:ot&&ot.isMatrix3?st.uniforms[ut]={type:"m3",value:ot.toArray()}:ot&&ot.isMatrix4?st.uniforms[ut]={type:"m4",value:ot.toArray()}:st.uniforms[ut]={value:ot}}Object.keys(this.defines).length>0&&(st.defines=this.defines),st.vertexShader=this.vertexShader,st.fragmentShader=this.fragmentShader,st.lights=this.lights,st.clipping=this.clipping;const ot={};for(const ut in this.extensions)!0===this.extensions[ut]&&(ot[ut]=!0);return Object.keys(ot).length>0&&(st.extensions=ot),st}}class Camera extends Object3D{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Matrix4,this.projectionMatrix=new Matrix4,this.projectionMatrixInverse=new Matrix4,this.coordinateSystem=qm,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(at,st){return super.copy(at,st),this.matrixWorldInverse.copy(at.matrixWorldInverse),this.projectionMatrix.copy(at.projectionMatrix),this.projectionMatrixInverse.copy(at.projectionMatrixInverse),this.coordinateSystem=at.coordinateSystem,this}getWorldDirection(at){return super.getWorldDirection(at).negate()}updateMatrixWorld(at){super.updateMatrixWorld(at),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(at,st){super.updateWorldMatrix(at,st),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const Hf=new Vector3,Wf=new Vector2,qf=new Vector2;class PerspectiveCamera extends Camera{constructor(at,st,ot,ut){void 0===at&&(at=50),void 0===st&&(st=1),void 0===ot&&(ot=.1),void 0===ut&&(ut=2e3),super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=at,this.zoom=1,this.near=ot,this.far=ut,this.focus=10,this.aspect=st,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(at,st){return super.copy(at,st),this.fov=at.fov,this.zoom=at.zoom,this.near=at.near,this.far=at.far,this.focus=at.focus,this.aspect=at.aspect,this.view=null===at.view?null:Object.assign({},at.view),this.filmGauge=at.filmGauge,this.filmOffset=at.filmOffset,this}setFocalLength(at){const st=.5*this.getFilmHeight()/at;this.fov=2*Jm*Math.atan(st),this.updateProjectionMatrix()}getFocalLength(){const at=Math.tan(.5*Xm*this.fov);return.5*this.getFilmHeight()/at}getEffectiveFOV(){return 2*Jm*Math.atan(Math.tan(.5*Xm*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(at,st,ot){Hf.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),st.set(Hf.x,Hf.y).multiplyScalar(-at/Hf.z),Hf.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),ot.set(Hf.x,Hf.y).multiplyScalar(-at/Hf.z)}getViewSize(at,st){return this.getViewBounds(at,Wf,qf),st.subVectors(qf,Wf)}setViewOffset(at,st,ot,ut,Hl,rc){this.aspect=at/st,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=at,this.view.fullHeight=st,this.view.offsetX=ot,this.view.offsetY=ut,this.view.width=Hl,this.view.height=rc,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const at=this.near;let st=at*Math.tan(.5*Xm*this.fov)/this.zoom,ot=2*st,ut=this.aspect*ot,Hl=-.5*ut;const rc=this.view;if(null!==this.view&&this.view.enabled){const at=rc.fullWidth,sc=rc.fullHeight;Hl+=rc.offsetX*ut/at,st-=rc.offsetY*ot/sc,ut*=rc.width/at,ot*=rc.height/sc}const sc=this.filmOffset;0!==sc&&(Hl+=at*sc/this.getFilmWidth()),this.projectionMatrix.makePerspective(Hl,Hl+ut,st,st-ot,at,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(at){const st=super.toJSON(at);return st.object.fov=this.fov,st.object.zoom=this.zoom,st.object.near=this.near,st.object.far=this.far,st.object.focus=this.focus,st.object.aspect=this.aspect,null!==this.view&&(st.object.view=Object.assign({},this.view)),st.object.filmGauge=this.filmGauge,st.object.filmOffset=this.filmOffset,st}}const Yf=-90;class CubeCamera extends Object3D{constructor(at,st,ot){super(),this.type="CubeCamera",this.renderTarget=ot,this.coordinateSystem=null,this.activeMipmapLevel=0;const ut=new PerspectiveCamera(Yf,1,at,st);ut.layers=this.layers,this.add(ut);const Hl=new PerspectiveCamera(Yf,1,at,st);Hl.layers=this.layers,this.add(Hl);const rc=new PerspectiveCamera(Yf,1,at,st);rc.layers=this.layers,this.add(rc);const sc=new PerspectiveCamera(Yf,1,at,st);sc.layers=this.layers,this.add(sc);const oc=new PerspectiveCamera(Yf,1,at,st);oc.layers=this.layers,this.add(oc);const _c=new PerspectiveCamera(Yf,1,at,st);_c.layers=this.layers,this.add(_c)}updateCoordinateSystem(){const at=this.coordinateSystem,st=this.children.concat(),[ot,ut,Hl,rc,sc,oc]=st;for(const _c of st)this.remove(_c);if(at===qm)ot.up.set(0,1,0),ot.lookAt(1,0,0),ut.up.set(0,1,0),ut.lookAt(-1,0,0),Hl.up.set(0,0,-1),Hl.lookAt(0,1,0),rc.up.set(0,0,1),rc.lookAt(0,-1,0),sc.up.set(0,1,0),sc.lookAt(0,0,1),oc.up.set(0,1,0),oc.lookAt(0,0,-1);else{if(at!==Ym)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+at);ot.up.set(0,-1,0),ot.lookAt(-1,0,0),ut.up.set(0,-1,0),ut.lookAt(1,0,0),Hl.up.set(0,0,1),Hl.lookAt(0,1,0),rc.up.set(0,0,-1),rc.lookAt(0,-1,0),sc.up.set(0,-1,0),sc.lookAt(0,0,1),oc.up.set(0,-1,0),oc.lookAt(0,0,-1)}for(const _c of st)this.add(_c),_c.updateMatrixWorld()}update(at,st){null===this.parent&&this.updateMatrixWorld();const{renderTarget:ot,activeMipmapLevel:ut}=this;this.coordinateSystem!==at.coordinateSystem&&(this.coordinateSystem=at.coordinateSystem,this.updateCoordinateSystem());const[Hl,rc,sc,oc,_c,wc]=this.children,Sc=at.getRenderTarget(),iu=at.getActiveCubeFace(),su=at.getActiveMipmapLevel(),lu=at.xr.enabled;at.xr.enabled=!1;const cu=ot.texture.generateMipmaps;ot.texture.generateMipmaps=!1,at.setRenderTarget(ot,0,ut),at.render(st,Hl),at.setRenderTarget(ot,1,ut),at.render(st,rc),at.setRenderTarget(ot,2,ut),at.render(st,sc),at.setRenderTarget(ot,3,ut),at.render(st,oc),at.setRenderTarget(ot,4,ut),at.render(st,_c),ot.texture.generateMipmaps=cu,at.setRenderTarget(ot,5,ut),at.render(st,wc),at.setRenderTarget(Sc,iu,su),at.xr.enabled=lu,ot.texture.needsPMREMUpdate=!0}}class CubeTexture extends Texture{constructor(at,st,ot,ut,Hl,rc,sc,oc,_c,wc){void 0===at&&(at=[]),void 0===st&&(st=Id),super(at,st,ot,ut,Hl,rc,sc,oc,_c,wc),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(at){this.image=at}}class WebGLCubeRenderTarget extends WebGLRenderTarget{constructor(at,st){void 0===at&&(at=1),void 0===st&&(st={}),super(at,at,st),this.isWebGLCubeRenderTarget=!0;const ot={width:at,height:at,depth:1},ut=[ot,ot,ot,ot,ot,ot];this.texture=new CubeTexture(ut),this._setTextureOptions(st),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(at,st){this.texture.type=st.type,this.texture.colorSpace=st.colorSpace,this.texture.generateMipmaps=st.generateMipmaps,this.texture.minFilter=st.minFilter,this.texture.magFilter=st.magFilter;const ot={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},ut=new BoxGeometry(5,5,5),Hl=new ShaderMaterial({name:"CubemapFromEquirect",uniforms:cloneUniforms(ot.uniforms),vertexShader:ot.vertexShader,fragmentShader:ot.fragmentShader,side:iu,blending:lu});Hl.uniforms.tEquirect.value=st;const rc=new Mesh(ut,Hl),sc=st.minFilter;st.minFilter===Gd&&(st.minFilter=Ud);return new CubeCamera(1,10,this).update(at,rc),st.minFilter=sc,rc.geometry.dispose(),rc.material.dispose(),this}clear(at,st,ot,ut){void 0===st&&(st=!0),void 0===ot&&(ot=!0),void 0===ut&&(ut=!0);const Hl=at.getRenderTarget();for(let rc=0;rc<6;rc++)at.setRenderTarget(this,rc),at.clear(st,ot,ut);at.setRenderTarget(Hl)}}class Group extends Object3D{constructor(){super(),this.isGroup=!0,this.type="Group"}}const Qf={type:"move"};class WebXRController{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Group,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Group,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Vector3,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Vector3),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Group,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Vector3,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Vector3),this._grip}dispatchEvent(at){return null!==this._targetRay&&this._targetRay.dispatchEvent(at),null!==this._grip&&this._grip.dispatchEvent(at),null!==this._hand&&this._hand.dispatchEvent(at),this}connect(at){if(at&&at.hand){const st=this._hand;if(st)for(const ot of at.hand.values())this._getHandJoint(st,ot)}return this.dispatchEvent({type:"connected",data:at}),this}disconnect(at){return this.dispatchEvent({type:"disconnected",data:at}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(at,st,ot){let ut=null,Hl=null,rc=null;const sc=this._targetRay,oc=this._grip,_c=this._hand;if(at&&"visible-blurred"!==st.session.visibilityState){if(_c&&at.hand){rc=!0;for(const rc of at.hand.values()){const at=st.getJointPose(rc,ot),ut=this._getHandJoint(_c,rc);null!==at&&(ut.matrix.fromArray(at.transform.matrix),ut.matrix.decompose(ut.position,ut.rotation,ut.scale),ut.matrixWorldNeedsUpdate=!0,ut.jointRadius=at.radius),ut.visible=null!==at}const ut=_c.joints["index-finger-tip"],Hl=_c.joints["thumb-tip"],sc=ut.position.distanceTo(Hl.position),oc=.02,wc=.005;_c.inputState.pinching&&sc>oc+wc?(_c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:at.handedness,target:this})):!_c.inputState.pinching&&sc<=oc-wc&&(_c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:at.handedness,target:this}))}else null!==oc&&at.gripSpace&&(Hl=st.getPose(at.gripSpace,ot),null!==Hl&&(oc.matrix.fromArray(Hl.transform.matrix),oc.matrix.decompose(oc.position,oc.rotation,oc.scale),oc.matrixWorldNeedsUpdate=!0,Hl.linearVelocity?(oc.hasLinearVelocity=!0,oc.linearVelocity.copy(Hl.linearVelocity)):oc.hasLinearVelocity=!1,Hl.angularVelocity?(oc.hasAngularVelocity=!0,oc.angularVelocity.copy(Hl.angularVelocity)):oc.hasAngularVelocity=!1));null!==sc&&(ut=st.getPose(at.targetRaySpace,ot),null===ut&&null!==Hl&&(ut=Hl),null!==ut&&(sc.matrix.fromArray(ut.transform.matrix),sc.matrix.decompose(sc.position,sc.rotation,sc.scale),sc.matrixWorldNeedsUpdate=!0,ut.linearVelocity?(sc.hasLinearVelocity=!0,sc.linearVelocity.copy(ut.linearVelocity)):sc.hasLinearVelocity=!1,ut.angularVelocity?(sc.hasAngularVelocity=!0,sc.angularVelocity.copy(ut.angularVelocity)):sc.hasAngularVelocity=!1,this.dispatchEvent(Qf)))}return null!==sc&&(sc.visible=null!==ut),null!==oc&&(oc.visible=null!==Hl),null!==_c&&(_c.visible=null!==rc),this}_getHandJoint(at,st){if(void 0===at.joints[st.jointName]){const ot=new Group;ot.matrixAutoUpdate=!1,ot.visible=!1,at.joints[st.jointName]=ot,at.add(ot)}return at.joints[st.jointName]}}class Scene extends Object3D{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Euler,this.environmentIntensity=1,this.environmentRotation=new Euler,this.overrideMaterial=null,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(at,st){return super.copy(at,st),null!==at.background&&(this.background=at.background.clone()),null!==at.environment&&(this.environment=at.environment.clone()),null!==at.fog&&(this.fog=at.fog.clone()),this.backgroundBlurriness=at.backgroundBlurriness,this.backgroundIntensity=at.backgroundIntensity,this.backgroundRotation.copy(at.backgroundRotation),this.environmentIntensity=at.environmentIntensity,this.environmentRotation.copy(at.environmentRotation),null!==at.overrideMaterial&&(this.overrideMaterial=at.overrideMaterial.clone()),this.matrixAutoUpdate=at.matrixAutoUpdate,this}toJSON(at){const st=super.toJSON(at);return null!==this.fog&&(st.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(st.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(st.object.backgroundIntensity=this.backgroundIntensity),st.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(st.object.environmentIntensity=this.environmentIntensity),st.object.environmentRotation=this.environmentRotation.toArray(),st}}const Kf=new Vector3,Xf=new Vector3,Jf=new Matrix3;class Plane{constructor(at,st){void 0===at&&(at=new Vector3(1,0,0)),void 0===st&&(st=0),this.isPlane=!0,this.normal=at,this.constant=st}set(at,st){return this.normal.copy(at),this.constant=st,this}setComponents(at,st,ot,ut){return this.normal.set(at,st,ot),this.constant=ut,this}setFromNormalAndCoplanarPoint(at,st){return this.normal.copy(at),this.constant=-st.dot(this.normal),this}setFromCoplanarPoints(at,st,ot){const ut=Kf.subVectors(ot,st).cross(Xf.subVectors(at,st)).normalize();return this.setFromNormalAndCoplanarPoint(ut,at),this}copy(at){return this.normal.copy(at.normal),this.constant=at.constant,this}normalize(){const at=1/this.normal.length();return this.normal.multiplyScalar(at),this.constant*=at,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(at){return this.normal.dot(at)+this.constant}distanceToSphere(at){return this.distanceToPoint(at.center)-at.radius}projectPoint(at,st){return st.copy(at).addScaledVector(this.normal,-this.distanceToPoint(at))}intersectLine(at,st){const ot=at.delta(Kf),ut=this.normal.dot(ot);if(0===ut)return 0===this.distanceToPoint(at.start)?st.copy(at.start):null;const Hl=-(at.start.dot(this.normal)+this.constant)/ut;return Hl<0||Hl>1?null:st.copy(at.start).addScaledVector(ot,Hl)}intersectsLine(at){const st=this.distanceToPoint(at.start),ot=this.distanceToPoint(at.end);return st<0&&ot>0||ot<0&&st>0}intersectsBox(at){return at.intersectsPlane(this)}intersectsSphere(at){return at.intersectsPlane(this)}coplanarPoint(at){return at.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(at,st){const ot=st||Jf.getNormalMatrix(at),ut=this.coplanarPoint(Kf).applyMatrix4(at),Hl=this.normal.applyMatrix3(ot).normalize();return this.constant=-ut.dot(Hl),this}translate(at){return this.constant-=at.dot(this.normal),this}equals(at){return at.normal.equals(this.normal)&&at.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const $f=new Sphere,eA=new Vector2(.5,.5),tA=new Vector3;class Frustum{constructor(at,st,ot,ut,Hl,rc){void 0===at&&(at=new Plane),void 0===st&&(st=new Plane),void 0===ot&&(ot=new Plane),void 0===ut&&(ut=new Plane),void 0===Hl&&(Hl=new Plane),void 0===rc&&(rc=new Plane),this.planes=[at,st,ot,ut,Hl,rc]}set(at,st,ot,ut,Hl,rc){const sc=this.planes;return sc[0].copy(at),sc[1].copy(st),sc[2].copy(ot),sc[3].copy(ut),sc[4].copy(Hl),sc[5].copy(rc),this}copy(at){const st=this.planes;for(let ot=0;ot<6;ot++)st[ot].copy(at.planes[ot]);return this}setFromProjectionMatrix(at,st,ot){void 0===st&&(st=qm),void 0===ot&&(ot=!1);const ut=this.planes,Hl=at.elements,rc=Hl[0],sc=Hl[1],oc=Hl[2],_c=Hl[3],wc=Hl[4],Sc=Hl[5],iu=Hl[6],su=Hl[7],lu=Hl[8],cu=Hl[9],uu=Hl[10],pu=Hl[11],mu=Hl[12],gu=Hl[13],Au=Hl[14],yu=Hl[15];if(ut[0].setComponents(_c-rc,su-wc,pu-lu,yu-mu).normalize(),ut[1].setComponents(_c+rc,su+wc,pu+lu,yu+mu).normalize(),ut[2].setComponents(_c+sc,su+Sc,pu+cu,yu+gu).normalize(),ut[3].setComponents(_c-sc,su-Sc,pu-cu,yu-gu).normalize(),ot)ut[4].setComponents(oc,iu,uu,Au).normalize(),ut[5].setComponents(_c-oc,su-iu,pu-uu,yu-Au).normalize();else if(ut[4].setComponents(_c-oc,su-iu,pu-uu,yu-Au).normalize(),st===qm)ut[5].setComponents(_c+oc,su+iu,pu+uu,yu+Au).normalize();else{if(st!==Ym)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+st);ut[5].setComponents(oc,iu,uu,Au).normalize()}return this}intersectsObject(at){if(void 0!==at.boundingSphere)null===at.boundingSphere&&at.computeBoundingSphere(),$f.copy(at.boundingSphere).applyMatrix4(at.matrixWorld);else{const st=at.geometry;null===st.boundingSphere&&st.computeBoundingSphere(),$f.copy(st.boundingSphere).applyMatrix4(at.matrixWorld)}return this.intersectsSphere($f)}intersectsSprite(at){$f.center.set(0,0,0);const st=eA.distanceTo(at.center);return $f.radius=.7071067811865476+st,$f.applyMatrix4(at.matrixWorld),this.intersectsSphere($f)}intersectsSphere(at){const st=this.planes,ot=at.center,ut=-at.radius;for(let Hl=0;Hl<6;Hl++){if(st[Hl].distanceToPoint(ot)<ut)return!1}return!0}intersectsBox(at){const st=this.planes;for(let ot=0;ot<6;ot++){const ut=st[ot];if(tA.x=ut.normal.x>0?at.max.x:at.min.x,tA.y=ut.normal.y>0?at.max.y:at.min.y,tA.z=ut.normal.z>0?at.max.z:at.min.z,ut.distanceToPoint(tA)<0)return!1}return!0}containsPoint(at){const st=this.planes;for(let ot=0;ot<6;ot++)if(st[ot].distanceToPoint(at)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}class LineBasicMaterial extends Material{constructor(at){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Color(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(at)}copy(at){return super.copy(at),this.color.copy(at.color),this.map=at.map,this.linewidth=at.linewidth,this.linecap=at.linecap,this.linejoin=at.linejoin,this.fog=at.fog,this}}const iA=new Vector3,nA=new Vector3,rA=new Matrix4,aA=new Ray,sA=new Sphere,oA=new Vector3,lA=new Vector3;class Line extends Object3D{constructor(at,st){void 0===at&&(at=new BufferGeometry),void 0===st&&(st=new LineBasicMaterial),super(),this.isLine=!0,this.type="Line",this.geometry=at,this.material=st,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(at,st){return super.copy(at,st),this.material=Array.isArray(at.material)?at.material.slice():at.material,this.geometry=at.geometry,this}computeLineDistances(){const at=this.geometry;if(null===at.index){const st=at.attributes.position,ot=[0];for(let at=1,ut=st.count;at<ut;at++)iA.fromBufferAttribute(st,at-1),nA.fromBufferAttribute(st,at),ot[at]=ot[at-1],ot[at]+=iA.distanceTo(nA);at.setAttribute("lineDistance",new Float32BufferAttribute(ot,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(at,st){const ot=this.geometry,ut=this.matrixWorld,Hl=at.params.Line.threshold,rc=ot.drawRange;if(null===ot.boundingSphere&&ot.computeBoundingSphere(),sA.copy(ot.boundingSphere),sA.applyMatrix4(ut),sA.radius+=Hl,!1===at.ray.intersectsSphere(sA))return;rA.copy(ut).invert(),aA.copy(at.ray).applyMatrix4(rA);const sc=Hl/((this.scale.x+this.scale.y+this.scale.z)/3),oc=sc*sc,_c=this.isLineSegments?2:1,wc=ot.index,Sc=ot.attributes.position;if(null!==wc){const ot=Math.max(0,rc.start),ut=Math.min(wc.count,rc.start+rc.count);for(let Hl=ot,rc=ut-1;Hl<rc;Hl+=_c){const ot=wc.getX(Hl),ut=wc.getX(Hl+1),rc=checkIntersection(this,at,aA,oc,ot,ut,Hl);rc&&st.push(rc)}if(this.isLineLoop){const Hl=wc.getX(ut-1),rc=wc.getX(ot),sc=checkIntersection(this,at,aA,oc,Hl,rc,ut-1);sc&&st.push(sc)}}else{const ot=Math.max(0,rc.start),ut=Math.min(Sc.count,rc.start+rc.count);for(let Hl=ot,rc=ut-1;Hl<rc;Hl+=_c){const ot=checkIntersection(this,at,aA,oc,Hl,Hl+1,Hl);ot&&st.push(ot)}if(this.isLineLoop){const Hl=checkIntersection(this,at,aA,oc,ut-1,ot,ut-1);Hl&&st.push(Hl)}}}updateMorphTargets(){const at=this.geometry.morphAttributes,st=Object.keys(at);if(st.length>0){const ot=at[st[0]];if(void 0!==ot){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let at=0,st=ot.length;at<st;at++){const st=ot[at].name||String(at);this.morphTargetInfluences.push(0),this.morphTargetDictionary[st]=at}}}}}function checkIntersection(at,st,ot,ut,Hl,rc,sc){const oc=at.geometry.attributes.position;iA.fromBufferAttribute(oc,Hl),nA.fromBufferAttribute(oc,rc);if(ot.distanceSqToSegment(iA,nA,oA,lA)>ut)return;oA.applyMatrix4(at.matrixWorld);const _c=st.ray.origin.distanceTo(oA);return _c<st.near||_c>st.far?void 0:{distance:_c,point:lA.clone().applyMatrix4(at.matrixWorld),index:sc,face:null,faceIndex:null,barycoord:null,object:at}}const cA=new Vector3,uA=new Vector3;class LineSegments extends Line{constructor(at,st){super(at,st),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const at=this.geometry;if(null===at.index){const st=at.attributes.position,ot=[];for(let at=0,ut=st.count;at<ut;at+=2)cA.fromBufferAttribute(st,at),uA.fromBufferAttribute(st,at+1),ot[at]=0===at?0:ot[at-1],ot[at+1]=ot[at]+cA.distanceTo(uA);at.setAttribute("lineDistance",new Float32BufferAttribute(ot,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class VideoTexture extends Texture{constructor(at,st,ot,ut,Hl,rc,sc,oc,_c){void 0===Hl&&(Hl=Ud),void 0===rc&&(rc=Ud),super(at,st,ot,ut,Hl,rc,sc,oc,_c),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const wc=this;"requestVideoFrameCallback"in at&&(this._requestVideoFrameCallbackId=at.requestVideoFrameCallback((function updateVideo(){wc.needsUpdate=!0,wc._requestVideoFrameCallbackId=at.requestVideoFrameCallback(updateVideo)})))}clone(){return new this.constructor(this.image).copy(this)}update(){const at=this.image;!1==="requestVideoFrameCallback"in at&&at.readyState>=at.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){0!==this._requestVideoFrameCallbackId&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class DepthTexture extends Texture{constructor(at,st,ot,ut,Hl,rc,sc,oc,_c,wc,Sc){if(void 0===ot&&(ot=Qd),void 0===sc&&(sc=Bd),void 0===oc&&(oc=Bd),void 0===wc&&(wc=Rp),void 0===Sc&&(Sc=1),wc!==Rp&&wc!==Op)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");super({width:at,height:st,depth:Sc},ut,Hl,rc,sc,oc,wc,ot,_c),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(at){return super.copy(at),this.source=new Source(Object.assign({},at.image)),this.compareFunction=at.compareFunction,this}toJSON(at){const st=super.toJSON(at);return null!==this.compareFunction&&(st.compareFunction=this.compareFunction),st}}class PlaneGeometry extends BufferGeometry{constructor(at,st,ot,ut){void 0===at&&(at=1),void 0===st&&(st=1),void 0===ot&&(ot=1),void 0===ut&&(ut=1),super(),this.type="PlaneGeometry",this.parameters={width:at,height:st,widthSegments:ot,heightSegments:ut};const Hl=at/2,rc=st/2,sc=Math.floor(ot),oc=Math.floor(ut),_c=sc+1,wc=oc+1,Sc=at/sc,iu=st/oc,su=[],lu=[],cu=[],uu=[];for(let pu=0;pu<wc;pu++){const at=pu*iu-rc;for(let st=0;st<_c;st++){const ot=st*Sc-Hl;lu.push(ot,-at,0),cu.push(0,0,1),uu.push(st/sc),uu.push(1-pu/oc)}}for(let pu=0;pu<oc;pu++)for(let at=0;at<sc;at++){const st=at+_c*pu,ot=at+_c*(pu+1),ut=at+1+_c*(pu+1),Hl=at+1+_c*pu;su.push(st,ot,Hl),su.push(ot,ut,Hl)}this.setIndex(su),this.setAttribute("position",new Float32BufferAttribute(lu,3)),this.setAttribute("normal",new Float32BufferAttribute(cu,3)),this.setAttribute("uv",new Float32BufferAttribute(uu,2))}copy(at){return super.copy(at),this.parameters=Object.assign({},at.parameters),this}static fromJSON(at){return new PlaneGeometry(at.width,at.height,at.widthSegments,at.heightSegments)}}class SphereGeometry extends BufferGeometry{constructor(at,st,ot,ut,Hl,rc,sc){void 0===at&&(at=1),void 0===st&&(st=32),void 0===ot&&(ot=16),void 0===ut&&(ut=0),void 0===Hl&&(Hl=2*Math.PI),void 0===rc&&(rc=0),void 0===sc&&(sc=Math.PI),super(),this.type="SphereGeometry",this.parameters={radius:at,widthSegments:st,heightSegments:ot,phiStart:ut,phiLength:Hl,thetaStart:rc,thetaLength:sc},st=Math.max(3,Math.floor(st)),ot=Math.max(2,Math.floor(ot));const oc=Math.min(rc+sc,Math.PI);let _c=0;const wc=[],Sc=new Vector3,iu=new Vector3,su=[],lu=[],cu=[],uu=[];for(let pu=0;pu<=ot;pu++){const su=[],mu=pu/ot;let gu=0;0===pu&&0===rc?gu=.5/st:pu===ot&&oc===Math.PI&&(gu=-.5/st);for(let ot=0;ot<=st;ot++){const oc=ot/st;Sc.x=-at*Math.cos(ut+oc*Hl)*Math.sin(rc+mu*sc),Sc.y=at*Math.cos(rc+mu*sc),Sc.z=at*Math.sin(ut+oc*Hl)*Math.sin(rc+mu*sc),lu.push(Sc.x,Sc.y,Sc.z),iu.copy(Sc).normalize(),cu.push(iu.x,iu.y,iu.z),uu.push(oc+gu,1-mu),su.push(_c++)}wc.push(su)}for(let pu=0;pu<ot;pu++)for(let at=0;at<st;at++){const st=wc[pu][at+1],ut=wc[pu][at],Hl=wc[pu+1][at],sc=wc[pu+1][at+1];(0!==pu||rc>0)&&su.push(st,ut,sc),(pu!==ot-1||oc<Math.PI)&&su.push(ut,Hl,sc)}this.setIndex(su),this.setAttribute("position",new Float32BufferAttribute(lu,3)),this.setAttribute("normal",new Float32BufferAttribute(cu,3)),this.setAttribute("uv",new Float32BufferAttribute(uu,2))}copy(at){return super.copy(at),this.parameters=Object.assign({},at.parameters),this}static fromJSON(at){return new SphereGeometry(at.radius,at.widthSegments,at.heightSegments,at.phiStart,at.phiLength,at.thetaStart,at.thetaLength)}}class WireframeGeometry extends BufferGeometry{constructor(at){if(void 0===at&&(at=null),super(),this.type="WireframeGeometry",this.parameters={geometry:at},null!==at){const st=[],ot=new Set,ut=new Vector3,Hl=new Vector3;if(null!==at.index){const rc=at.attributes.position,sc=at.index;let oc=at.groups;0===oc.length&&(oc=[{start:0,count:sc.count,materialIndex:0}]);for(let at=0,_c=oc.length;at<_c;++at){const _c=oc[at],wc=_c.start;for(let at=wc,oc=wc+_c.count;at<oc;at+=3)for(let _c=0;_c<3;_c++){const oc=sc.getX(at+_c),wc=sc.getX(at+(_c+1)%3);ut.fromBufferAttribute(rc,oc),Hl.fromBufferAttribute(rc,wc),!0===isUniqueEdge(ut,Hl,ot)&&(st.push(ut.x,ut.y,ut.z),st.push(Hl.x,Hl.y,Hl.z))}}}else{const rc=at.attributes.position;for(let at=0,sc=rc.count/3;at<sc;at++)for(let oc=0;oc<3;oc++){const sc=3*at+oc,_c=3*at+(oc+1)%3;ut.fromBufferAttribute(rc,sc),Hl.fromBufferAttribute(rc,_c),!0===isUniqueEdge(ut,Hl,ot)&&(st.push(ut.x,ut.y,ut.z),st.push(Hl.x,Hl.y,Hl.z))}}this.setAttribute("position",new Float32BufferAttribute(st,3))}}copy(at){return super.copy(at),this.parameters=Object.assign({},at.parameters),this}}function isUniqueEdge(at,st,ot){const ut=`${at.x},${at.y},${at.z}-${st.x},${st.y},${st.z}`,Hl=`${st.x},${st.y},${st.z}-${at.x},${at.y},${at.z}`;return!0!==ot.has(ut)&&!0!==ot.has(Hl)&&(ot.add(ut),ot.add(Hl),!0)}class MeshDepthMaterial extends Material{constructor(at){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(at)}copy(at){return super.copy(at),this.depthPacking=at.depthPacking,this.map=at.map,this.alphaMap=at.alphaMap,this.displacementMap=at.displacementMap,this.displacementScale=at.displacementScale,this.displacementBias=at.displacementBias,this.wireframe=at.wireframe,this.wireframeLinewidth=at.wireframeLinewidth,this}}class MeshDistanceMaterial extends Material{constructor(at){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(at)}copy(at){return super.copy(at),this.map=at.map,this.alphaMap=at.alphaMap,this.displacementMap=at.displacementMap,this.displacementScale=at.displacementScale,this.displacementBias=at.displacementBias,this}}function convertArray(at,st){return at&&at.constructor!==st?"number"===typeof st.BYTES_PER_ELEMENT?new st(at):Array.prototype.slice.call(at):at}function isTypedArray(at){return ArrayBuffer.isView(at)&&!(at instanceof DataView)}class Interpolant{constructor(at,st,ot,ut){this.parameterPositions=at,this._cachedIndex=0,this.resultBuffer=void 0!==ut?ut:new st.constructor(ot),this.sampleValues=st,this.valueSize=ot,this.settings=null,this.DefaultSettings_={}}evaluate(at){const st=this.parameterPositions;let ot=this._cachedIndex,ut=st[ot],Hl=st[ot-1];e:{t:{let rc;i:{n:if(!(at<ut)){for(let rc=ot+2;;){if(void 0===ut){if(at<Hl)break n;return ot=st.length,this._cachedIndex=ot,this.copySampleValue_(ot-1)}if(ot===rc)break;if(Hl=ut,ut=st[++ot],at<ut)break t}rc=st.length;break i}if(at>=Hl)break e;{const sc=st[1];at<sc&&(ot=2,Hl=sc);for(let rc=ot-2;;){if(void 0===Hl)return this._cachedIndex=0,this.copySampleValue_(0);if(ot===rc)break;if(ut=Hl,Hl=st[--ot-1],at>=Hl)break t}rc=ot,ot=0}}for(;ot<rc;){const ut=ot+rc>>>1;at<st[ut]?rc=ut:ot=ut+1}if(ut=st[ot],Hl=st[ot-1],void 0===Hl)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===ut)return ot=st.length,this._cachedIndex=ot,this.copySampleValue_(ot-1)}this._cachedIndex=ot,this.intervalChanged_(ot,Hl,ut)}return this.interpolate_(ot,Hl,at,ut)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(at){const st=this.resultBuffer,ot=this.sampleValues,ut=this.valueSize,Hl=at*ut;for(let rc=0;rc!==ut;++rc)st[rc]=ot[Hl+rc];return st}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class CubicInterpolant extends Interpolant{constructor(at,st,ot,ut){super(at,st,ot,ut),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Mm,endingEnd:Mm}}intervalChanged_(at,st,ot){const ut=this.parameterPositions;let Hl=at-2,rc=at+1,sc=ut[Hl],oc=ut[rc];if(void 0===sc)switch(this.getSettings_().endingStart){case Sm:Hl=at,sc=2*st-ot;break;case Tm:Hl=ut.length-2,sc=st+ut[Hl]-ut[Hl+1];break;default:Hl=at,sc=ot}if(void 0===oc)switch(this.getSettings_().endingEnd){case Sm:rc=at,oc=2*ot-st;break;case Tm:rc=1,oc=ot+ut[1]-ut[0];break;default:rc=at-1,oc=st}const _c=.5*(ot-st),wc=this.valueSize;this._weightPrev=_c/(st-sc),this._weightNext=_c/(oc-ot),this._offsetPrev=Hl*wc,this._offsetNext=rc*wc}interpolate_(at,st,ot,ut){const Hl=this.resultBuffer,rc=this.sampleValues,sc=this.valueSize,oc=at*sc,_c=oc-sc,wc=this._offsetPrev,Sc=this._offsetNext,iu=this._weightPrev,su=this._weightNext,lu=(ot-st)/(ut-st),cu=lu*lu,uu=cu*lu,pu=-iu*uu+2*iu*cu-iu*lu,mu=(1+iu)*uu+(-1.5-2*iu)*cu+(-.5+iu)*lu+1,gu=(-1-su)*uu+(1.5+su)*cu+.5*lu,Au=su*uu-su*cu;for(let yu=0;yu!==sc;++yu)Hl[yu]=pu*rc[wc+yu]+mu*rc[_c+yu]+gu*rc[oc+yu]+Au*rc[Sc+yu];return Hl}}class LinearInterpolant extends Interpolant{constructor(at,st,ot,ut){super(at,st,ot,ut)}interpolate_(at,st,ot,ut){const Hl=this.resultBuffer,rc=this.sampleValues,sc=this.valueSize,oc=at*sc,_c=oc-sc,wc=(ot-st)/(ut-st),Sc=1-wc;for(let iu=0;iu!==sc;++iu)Hl[iu]=rc[_c+iu]*Sc+rc[oc+iu]*wc;return Hl}}class DiscreteInterpolant extends Interpolant{constructor(at,st,ot,ut){super(at,st,ot,ut)}interpolate_(at){return this.copySampleValue_(at-1)}}class KeyframeTrack{constructor(at,st,ot,ut){if(void 0===at)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===st||0===st.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+at);this.name=at,this.times=convertArray(st,this.TimeBufferType),this.values=convertArray(ot,this.ValueBufferType),this.setInterpolation(ut||this.DefaultInterpolation)}static toJSON(at){const st=at.constructor;let ot;if(st.toJSON!==this.toJSON)ot=st.toJSON(at);else{ot={name:at.name,times:convertArray(at.times,Array),values:convertArray(at.values,Array)};const st=at.getInterpolation();st!==at.DefaultInterpolation&&(ot.interpolation=st)}return ot.type=at.ValueTypeName,ot}InterpolantFactoryMethodDiscrete(at){return new DiscreteInterpolant(this.times,this.values,this.getValueSize(),at)}InterpolantFactoryMethodLinear(at){return new LinearInterpolant(this.times,this.values,this.getValueSize(),at)}InterpolantFactoryMethodSmooth(at){return new CubicInterpolant(this.times,this.values,this.getValueSize(),at)}setInterpolation(at){let st;switch(at){case bm:st=this.InterpolantFactoryMethodDiscrete;break;case wm:st=this.InterpolantFactoryMethodLinear;break;case Em:st=this.InterpolantFactoryMethodSmooth}if(void 0===st){const st="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(at===this.DefaultInterpolation)throw new Error(st);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",st),this}return this.createInterpolant=st,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return bm;case this.InterpolantFactoryMethodLinear:return wm;case this.InterpolantFactoryMethodSmooth:return Em}}getValueSize(){return this.values.length/this.times.length}shift(at){if(0!==at){const st=this.times;for(let ot=0,ut=st.length;ot!==ut;++ot)st[ot]+=at}return this}scale(at){if(1!==at){const st=this.times;for(let ot=0,ut=st.length;ot!==ut;++ot)st[ot]*=at}return this}trim(at,st){const ot=this.times,ut=ot.length;let Hl=0,rc=ut-1;for(;Hl!==ut&&ot[Hl]<at;)++Hl;for(;-1!==rc&&ot[rc]>st;)--rc;if(++rc,0!==Hl||rc!==ut){Hl>=rc&&(rc=Math.max(rc,1),Hl=rc-1);const at=this.getValueSize();this.times=ot.slice(Hl,rc),this.values=this.values.slice(Hl*at,rc*at)}return this}validate(){let at=!0;const st=this.getValueSize();st-Math.floor(st)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),at=!1);const ot=this.times,ut=this.values,Hl=ot.length;0===Hl&&(console.error("THREE.KeyframeTrack: Track is empty.",this),at=!1);let rc=null;for(let sc=0;sc!==Hl;sc++){const st=ot[sc];if("number"===typeof st&&isNaN(st)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,sc,st),at=!1;break}if(null!==rc&&rc>st){console.error("THREE.KeyframeTrack: Out of order keys.",this,sc,st,rc),at=!1;break}rc=st}if(void 0!==ut&&isTypedArray(ut))for(let sc=0,oc=ut.length;sc!==oc;++sc){const st=ut[sc];if(isNaN(st)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,sc,st),at=!1;break}}return at}optimize(){const at=this.times.slice(),st=this.values.slice(),ot=this.getValueSize(),ut=this.getInterpolation()===Em,Hl=at.length-1;let rc=1;for(let sc=1;sc<Hl;++sc){let Hl=!1;const oc=at[sc];if(oc!==at[sc+1]&&(1!==sc||oc!==at[0]))if(ut)Hl=!0;else{const at=sc*ot,ut=at-ot,rc=at+ot;for(let sc=0;sc!==ot;++sc){const ot=st[at+sc];if(ot!==st[ut+sc]||ot!==st[rc+sc]){Hl=!0;break}}}if(Hl){if(sc!==rc){at[rc]=at[sc];const ut=sc*ot,Hl=rc*ot;for(let at=0;at!==ot;++at)st[Hl+at]=st[ut+at]}++rc}}if(Hl>0){at[rc]=at[Hl];for(let at=Hl*ot,ut=rc*ot,sc=0;sc!==ot;++sc)st[ut+sc]=st[at+sc];++rc}return rc!==at.length?(this.times=at.slice(0,rc),this.values=st.slice(0,rc*ot)):(this.times=at,this.values=st),this}clone(){const at=this.times.slice(),st=this.values.slice(),ot=new(0,this.constructor)(this.name,at,st);return ot.createInterpolant=this.createInterpolant,ot}}KeyframeTrack.prototype.ValueTypeName="",KeyframeTrack.prototype.TimeBufferType=Float32Array,KeyframeTrack.prototype.ValueBufferType=Float32Array,KeyframeTrack.prototype.DefaultInterpolation=wm;class BooleanKeyframeTrack extends KeyframeTrack{constructor(at,st,ot){super(at,st,ot)}}BooleanKeyframeTrack.prototype.ValueTypeName="bool",BooleanKeyframeTrack.prototype.ValueBufferType=Array,BooleanKeyframeTrack.prototype.DefaultInterpolation=bm,BooleanKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0,BooleanKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class ColorKeyframeTrack extends KeyframeTrack{constructor(at,st,ot,ut){super(at,st,ot,ut)}}ColorKeyframeTrack.prototype.ValueTypeName="color";class NumberKeyframeTrack extends KeyframeTrack{constructor(at,st,ot,ut){super(at,st,ot,ut)}}NumberKeyframeTrack.prototype.ValueTypeName="number";class QuaternionLinearInterpolant extends Interpolant{constructor(at,st,ot,ut){super(at,st,ot,ut)}interpolate_(at,st,ot,ut){const Hl=this.resultBuffer,rc=this.sampleValues,sc=this.valueSize,oc=(ot-st)/(ut-st);let _c=at*sc;for(let wc=_c+sc;_c!==wc;_c+=4)Quaternion.slerpFlat(Hl,0,rc,_c-sc,rc,_c,oc);return Hl}}class QuaternionKeyframeTrack extends KeyframeTrack{constructor(at,st,ot,ut){super(at,st,ot,ut)}InterpolantFactoryMethodLinear(at){return new QuaternionLinearInterpolant(this.times,this.values,this.getValueSize(),at)}}QuaternionKeyframeTrack.prototype.ValueTypeName="quaternion",QuaternionKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class StringKeyframeTrack extends KeyframeTrack{constructor(at,st,ot){super(at,st,ot)}}StringKeyframeTrack.prototype.ValueTypeName="string",StringKeyframeTrack.prototype.ValueBufferType=Array,StringKeyframeTrack.prototype.DefaultInterpolation=bm,StringKeyframeTrack.prototype.InterpolantFactoryMethodLinear=void 0,StringKeyframeTrack.prototype.InterpolantFactoryMethodSmooth=void 0;class VectorKeyframeTrack extends KeyframeTrack{constructor(at,st,ot,ut){super(at,st,ot,ut)}}VectorKeyframeTrack.prototype.ValueTypeName="vector";const hA={enabled:!1,files:{},add:function(at,st){!1!==this.enabled&&(this.files[at]=st)},get:function(at){if(!1!==this.enabled)return this.files[at]},remove:function(at){delete this.files[at]},clear:function(){this.files={}}};class LoadingManager{constructor(at,st,ot){const ut=this;let Hl,rc=!1,sc=0,oc=0;const _c=[];this.onStart=void 0,this.onLoad=at,this.onProgress=st,this.onError=ot,this.abortController=new AbortController,this.itemStart=function(at){oc++,!1===rc&&void 0!==ut.onStart&&ut.onStart(at,sc,oc),rc=!0},this.itemEnd=function(at){sc++,void 0!==ut.onProgress&&ut.onProgress(at,sc,oc),sc===oc&&(rc=!1,void 0!==ut.onLoad&&ut.onLoad())},this.itemError=function(at){void 0!==ut.onError&&ut.onError(at)},this.resolveURL=function(at){return Hl?Hl(at):at},this.setURLModifier=function(at){return Hl=at,this},this.addHandler=function(at,st){return _c.push(at,st),this},this.removeHandler=function(at){const st=_c.indexOf(at);return-1!==st&&_c.splice(st,2),this},this.getHandler=function(at){for(let st=0,ot=_c.length;st<ot;st+=2){const ot=_c[st],ut=_c[st+1];if(ot.global&&(ot.lastIndex=0),ot.test(at))return ut}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const dA=new LoadingManager;class Loader{constructor(at){this.manager=void 0!==at?at:dA,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(at,st){const ot=this;return new Promise((function(ut,Hl){ot.load(at,ut,st,Hl)}))}parse(){}setCrossOrigin(at){return this.crossOrigin=at,this}setWithCredentials(at){return this.withCredentials=at,this}setPath(at){return this.path=at,this}setResourcePath(at){return this.resourcePath=at,this}setRequestHeader(at){return this.requestHeader=at,this}abort(){return this}}Loader.DEFAULT_MATERIAL_NAME="__DEFAULT";const pA={};class HttpError extends Error{constructor(at,st){super(at),this.response=st}}class FileLoader extends Loader{constructor(at){super(at),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(at,st,ot,ut){void 0===at&&(at=""),void 0!==this.path&&(at=this.path+at),at=this.manager.resolveURL(at);const Hl=hA.get(`file:${at}`);if(void 0!==Hl)return this.manager.itemStart(at),setTimeout((()=>{st&&st(Hl),this.manager.itemEnd(at)}),0),Hl;if(void 0!==pA[at])return void pA[at].push({onLoad:st,onProgress:ot,onError:ut});pA[at]=[],pA[at].push({onLoad:st,onProgress:ot,onError:ut});const rc=new Request(at,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:"function"===typeof AbortSignal.any?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),sc=this.mimeType,oc=this.responseType;fetch(rc).then((st=>{if(200===st.status||0===st.status){if(0===st.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"===typeof ReadableStream||void 0===st.body||void 0===st.body.getReader)return st;const ot=pA[at],ut=st.body.getReader(),Hl=st.headers.get("X-File-Size")||st.headers.get("Content-Length"),rc=Hl?parseInt(Hl):0,sc=0!==rc;let oc=0;const _c=new ReadableStream({start(at){!function readData(){ut.read().then((st=>{let{done:ut,value:Hl}=st;if(ut)at.close();else{oc+=Hl.byteLength;const st=new ProgressEvent("progress",{lengthComputable:sc,loaded:oc,total:rc});for(let at=0,ut=ot.length;at<ut;at++){const ut=ot[at];ut.onProgress&&ut.onProgress(st)}at.enqueue(Hl),readData()}}),(st=>{at.error(st)}))}()}});return new Response(_c)}throw new HttpError(`fetch for "${st.url}" responded with ${st.status}: ${st.statusText}`,st)})).then((at=>{switch(oc){case"arraybuffer":return at.arrayBuffer();case"blob":return at.blob();case"document":return at.text().then((at=>(new DOMParser).parseFromString(at,sc)));case"json":return at.json();default:if(""===sc)return at.text();{const st=/charset="?([^;"\s]*)"?/i.exec(sc),ot=st&&st[1]?st[1].toLowerCase():void 0,ut=new TextDecoder(ot);return at.arrayBuffer().then((at=>ut.decode(at)))}}})).then((st=>{hA.add(`file:${at}`,st);const ot=pA[at];delete pA[at];for(let at=0,ut=ot.length;at<ut;at++){const ut=ot[at];ut.onLoad&&ut.onLoad(st)}})).catch((st=>{const ot=pA[at];if(void 0===ot)throw this.manager.itemError(at),st;delete pA[at];for(let at=0,ut=ot.length;at<ut;at++){const ut=ot[at];ut.onError&&ut.onError(st)}this.manager.itemError(at)})).finally((()=>{this.manager.itemEnd(at)})),this.manager.itemStart(at)}setResponseType(at){return this.responseType=at,this}setMimeType(at){return this.mimeType=at,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}const mA=new WeakMap;class ImageLoader extends Loader{constructor(at){super(at)}load(at,st,ot,ut){void 0!==this.path&&(at=this.path+at),at=this.manager.resolveURL(at);const Hl=this,rc=hA.get(`image:${at}`);if(void 0!==rc){if(!0===rc.complete)Hl.manager.itemStart(at),setTimeout((function(){st&&st(rc),Hl.manager.itemEnd(at)}),0);else{let at=mA.get(rc);void 0===at&&(at=[],mA.set(rc,at)),at.push({onLoad:st,onError:ut})}return rc}const sc=createElementNS("img");function onImageLoad(){removeEventListeners(),st&&st(this);const ot=mA.get(this)||[];for(let at=0;at<ot.length;at++){const st=ot[at];st.onLoad&&st.onLoad(this)}mA.delete(this),Hl.manager.itemEnd(at)}function onImageError(st){removeEventListeners(),ut&&ut(st),hA.remove(`image:${at}`);const ot=mA.get(this)||[];for(let at=0;at<ot.length;at++){const ut=ot[at];ut.onError&&ut.onError(st)}mA.delete(this),Hl.manager.itemError(at),Hl.manager.itemEnd(at)}function removeEventListeners(){sc.removeEventListener("load",onImageLoad,!1),sc.removeEventListener("error",onImageError,!1)}return sc.addEventListener("load",onImageLoad,!1),sc.addEventListener("error",onImageError,!1),"data:"!==at.slice(0,5)&&void 0!==this.crossOrigin&&(sc.crossOrigin=this.crossOrigin),hA.add(`image:${at}`,sc),Hl.manager.itemStart(at),sc.src=at,sc}}class OrthographicCamera extends Camera{constructor(at,st,ot,ut,Hl,rc){void 0===at&&(at=-1),void 0===st&&(st=1),void 0===ot&&(ot=1),void 0===ut&&(ut=-1),void 0===Hl&&(Hl=.1),void 0===rc&&(rc=2e3),super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=at,this.right=st,this.top=ot,this.bottom=ut,this.near=Hl,this.far=rc,this.updateProjectionMatrix()}copy(at,st){return super.copy(at,st),this.left=at.left,this.right=at.right,this.top=at.top,this.bottom=at.bottom,this.near=at.near,this.far=at.far,this.zoom=at.zoom,this.view=null===at.view?null:Object.assign({},at.view),this}setViewOffset(at,st,ot,ut,Hl,rc){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=at,this.view.fullHeight=st,this.view.offsetX=ot,this.view.offsetY=ut,this.view.width=Hl,this.view.height=rc,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const at=(this.right-this.left)/(2*this.zoom),st=(this.top-this.bottom)/(2*this.zoom),ot=(this.right+this.left)/2,ut=(this.top+this.bottom)/2;let Hl=ot-at,rc=ot+at,sc=ut+st,oc=ut-st;if(null!==this.view&&this.view.enabled){const at=(this.right-this.left)/this.view.fullWidth/this.zoom,st=(this.top-this.bottom)/this.view.fullHeight/this.zoom;Hl+=at*this.view.offsetX,rc=Hl+at*this.view.width,sc-=st*this.view.offsetY,oc=sc-st*this.view.height}this.projectionMatrix.makeOrthographic(Hl,rc,sc,oc,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(at){const st=super.toJSON(at);return st.object.zoom=this.zoom,st.object.left=this.left,st.object.right=this.right,st.object.top=this.top,st.object.bottom=this.bottom,st.object.near=this.near,st.object.far=this.far,null!==this.view&&(st.object.view=Object.assign({},this.view)),st}}new WeakMap;class ArrayCamera extends PerspectiveCamera{constructor(at){void 0===at&&(at=[]),super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=at}}const gA="\\[\\]\\.:\\/",fA=new RegExp("["+gA+"]","g"),AA="[^"+gA+"]",yA="[^"+gA.replace("\\.","")+"]",vA=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",AA)+/(WCOD+)?/.source.replace("WCOD",yA)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",AA)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",AA)+"$"),_A=["material","materials","bones","map"];class PropertyBinding{constructor(at,st,ot){this.path=st,this.parsedPath=ot||PropertyBinding.parseTrackName(st),this.node=PropertyBinding.findNode(at,this.parsedPath.nodeName),this.rootNode=at,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(at,st,ot){return at&&at.isAnimationObjectGroup?new PropertyBinding.Composite(at,st,ot):new PropertyBinding(at,st,ot)}static sanitizeNodeName(at){return at.replace(/\s/g,"_").replace(fA,"")}static parseTrackName(at){const st=vA.exec(at);if(null===st)throw new Error("PropertyBinding: Cannot parse trackName: "+at);const ot={nodeName:st[2],objectName:st[3],objectIndex:st[4],propertyName:st[5],propertyIndex:st[6]},ut=ot.nodeName&&ot.nodeName.lastIndexOf(".");if(void 0!==ut&&-1!==ut){const at=ot.nodeName.substring(ut+1);-1!==_A.indexOf(at)&&(ot.nodeName=ot.nodeName.substring(0,ut),ot.objectName=at)}if(null===ot.propertyName||0===ot.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+at);return ot}static findNode(at,st){if(void 0===st||""===st||"."===st||-1===st||st===at.name||st===at.uuid)return at;if(at.skeleton){const ot=at.skeleton.getBoneByName(st);if(void 0!==ot)return ot}if(at.children){const searchNodeSubtree=function(at){for(let ot=0;ot<at.length;ot++){const ut=at[ot];if(ut.name===st||ut.uuid===st)return ut;const Hl=searchNodeSubtree(ut.children);if(Hl)return Hl}return null},ot=searchNodeSubtree(at.children);if(ot)return ot}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(at,st){at[st]=this.targetObject[this.propertyName]}_getValue_array(at,st){const ot=this.resolvedProperty;for(let ut=0,Hl=ot.length;ut!==Hl;++ut)at[st++]=ot[ut]}_getValue_arrayElement(at,st){at[st]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(at,st){this.resolvedProperty.toArray(at,st)}_setValue_direct(at,st){this.targetObject[this.propertyName]=at[st]}_setValue_direct_setNeedsUpdate(at,st){this.targetObject[this.propertyName]=at[st],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(at,st){this.targetObject[this.propertyName]=at[st],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(at,st){const ot=this.resolvedProperty;for(let ut=0,Hl=ot.length;ut!==Hl;++ut)ot[ut]=at[st++]}_setValue_array_setNeedsUpdate(at,st){const ot=this.resolvedProperty;for(let ut=0,Hl=ot.length;ut!==Hl;++ut)ot[ut]=at[st++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(at,st){const ot=this.resolvedProperty;for(let ut=0,Hl=ot.length;ut!==Hl;++ut)ot[ut]=at[st++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(at,st){this.resolvedProperty[this.propertyIndex]=at[st]}_setValue_arrayElement_setNeedsUpdate(at,st){this.resolvedProperty[this.propertyIndex]=at[st],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(at,st){this.resolvedProperty[this.propertyIndex]=at[st],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(at,st){this.resolvedProperty.fromArray(at,st)}_setValue_fromArray_setNeedsUpdate(at,st){this.resolvedProperty.fromArray(at,st),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(at,st){this.resolvedProperty.fromArray(at,st),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(at,st){this.bind(),this.getValue(at,st)}_setValue_unbound(at,st){this.bind(),this.setValue(at,st)}bind(){let at=this.node;const st=this.parsedPath,ot=st.objectName,ut=st.propertyName;let Hl=st.propertyIndex;if(at||(at=PropertyBinding.findNode(this.rootNode,st.nodeName),this.node=at),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!at)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(ot){let ut=st.objectIndex;switch(ot){case"materials":if(!at.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!at.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);at=at.material.materials;break;case"bones":if(!at.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);at=at.skeleton.bones;for(let st=0;st<at.length;st++)if(at[st].name===ut){ut=st;break}break;case"map":if("map"in at){at=at.map;break}if(!at.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!at.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);at=at.material.map;break;default:if(void 0===at[ot])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);at=at[ot]}if(void 0!==ut){if(void 0===at[ut])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,at);at=at[ut]}}const rc=at[ut];if(void 0===rc){const ot=st.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+ot+"."+ut+" but it wasn't found.",at)}let sc=this.Versioning.None;this.targetObject=at,!0===at.isMaterial?sc=this.Versioning.NeedsUpdate:!0===at.isObject3D&&(sc=this.Versioning.MatrixWorldNeedsUpdate);let oc=this.BindingType.Direct;if(void 0!==Hl){if("morphTargetInfluences"===ut){if(!at.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!at.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==at.morphTargetDictionary[Hl]&&(Hl=at.morphTargetDictionary[Hl])}oc=this.BindingType.ArrayElement,this.resolvedProperty=rc,this.propertyIndex=Hl}else void 0!==rc.fromArray&&void 0!==rc.toArray?(oc=this.BindingType.HasFromToArray,this.resolvedProperty=rc):Array.isArray(rc)?(oc=this.BindingType.EntireArray,this.resolvedProperty=rc):this.propertyName=ut;this.getValue=this.GetterByBindingType[oc],this.setValue=this.SetterByBindingTypeAndVersioning[oc][sc]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}PropertyBinding.Composite=class{constructor(at,st,ot){const ut=ot||PropertyBinding.parseTrackName(st);this._targetGroup=at,this._bindings=at.subscribe_(st,ut)}getValue(at,st){this.bind();const ot=this._targetGroup.nCachedObjects_,ut=this._bindings[ot];void 0!==ut&&ut.getValue(at,st)}setValue(at,st){const ot=this._bindings;for(let ut=this._targetGroup.nCachedObjects_,Hl=ot.length;ut!==Hl;++ut)ot[ut].setValue(at,st)}bind(){const at=this._bindings;for(let st=this._targetGroup.nCachedObjects_,ot=at.length;st!==ot;++st)at[st].bind()}unbind(){const at=this._bindings;for(let st=this._targetGroup.nCachedObjects_,ot=at.length;st!==ot;++st)at[st].unbind()}},PropertyBinding.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},PropertyBinding.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},PropertyBinding.prototype.GetterByBindingType=[PropertyBinding.prototype._getValue_direct,PropertyBinding.prototype._getValue_array,PropertyBinding.prototype._getValue_arrayElement,PropertyBinding.prototype._getValue_toArray],PropertyBinding.prototype.SetterByBindingTypeAndVersioning=[[PropertyBinding.prototype._setValue_direct,PropertyBinding.prototype._setValue_direct_setNeedsUpdate,PropertyBinding.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_array,PropertyBinding.prototype._setValue_array_setNeedsUpdate,PropertyBinding.prototype._setValue_array_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_arrayElement,PropertyBinding.prototype._setValue_arrayElement_setNeedsUpdate,PropertyBinding.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[PropertyBinding.prototype._setValue_fromArray,PropertyBinding.prototype._setValue_fromArray_setNeedsUpdate,PropertyBinding.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];new Float32Array(1);const xA=new Matrix4;class Raycaster{constructor(at,st,ot,ut){void 0===ot&&(ot=0),void 0===ut&&(ut=1/0),this.ray=new Ray(at,st),this.near=ot,this.far=ut,this.camera=null,this.layers=new Layers,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(at,st){this.ray.set(at,st)}setFromCamera(at,st){st.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(st.matrixWorld),this.ray.direction.set(at.x,at.y,.5).unproject(st).sub(this.ray.origin).normalize(),this.camera=st):st.isOrthographicCamera?(this.ray.origin.set(at.x,at.y,(st.near+st.far)/(st.near-st.far)).unproject(st),this.ray.direction.set(0,0,-1).transformDirection(st.matrixWorld),this.camera=st):console.error("THREE.Raycaster: Unsupported camera type: "+st.type)}setFromXRController(at){return xA.identity().extractRotation(at.matrixWorld),this.ray.origin.setFromMatrixPosition(at.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(xA),this}intersectObject(at,st,ot){return void 0===st&&(st=!0),void 0===ot&&(ot=[]),intersect(at,this,ot,st),ot.sort(ascSort),ot}intersectObjects(at,st,ot){void 0===st&&(st=!0),void 0===ot&&(ot=[]);for(let ut=0,Hl=at.length;ut<Hl;ut++)intersect(at[ut],this,ot,st);return ot.sort(ascSort),ot}}function ascSort(at,st){return at.distance-st.distance}function intersect(at,st,ot,ut){let Hl=!0;if(at.layers.test(st.layers)){!1===at.raycast(st,ot)&&(Hl=!1)}if(!0===Hl&&!0===ut){const ut=at.children;for(let at=0,Hl=ut.length;at<Hl;at++)intersect(ut[at],st,ot,!0)}}function getByteLength(at,st,ot,ut){const Hl=function(at){switch(at){case Zd:case Hd:return{byteLength:1,components:1};case qd:case Wd:case Xd:return{byteLength:2,components:1};case Jd:case $d:return{byteLength:2,components:4};case Qd:case Yd:case Kd:return{byteLength:4,components:1};case Ep:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${at}.`)}(ut);switch(ot){case Dp:return at*st;case Fp:case jp:return at*st/Hl.components*Hl.byteLength;case Up:case Vp:return at*st*2/Hl.components*Hl.byteLength;case Lp:return at*st*3/Hl.components*Hl.byteLength;case Np:case Gp:return at*st*4/Hl.components*Hl.byteLength;case Zp:case Hp:return Math.floor((at+3)/4)*Math.floor((st+3)/4)*8;case Wp:case qp:return Math.floor((at+3)/4)*Math.floor((st+3)/4)*16;case Qp:case Xp:return Math.max(at,16)*Math.max(st,8)/4;case Yp:case Kp:return Math.max(at,8)*Math.max(st,8)/2;case Jp:case $p:return Math.floor((at+3)/4)*Math.floor((st+3)/4)*8;case em:case tm:return Math.floor((at+3)/4)*Math.floor((st+3)/4)*16;case im:return Math.floor((at+4)/5)*Math.floor((st+3)/4)*16;case nm:return Math.floor((at+4)/5)*Math.floor((st+4)/5)*16;case rm:return Math.floor((at+5)/6)*Math.floor((st+4)/5)*16;case am:return Math.floor((at+5)/6)*Math.floor((st+5)/6)*16;case sm:return Math.floor((at+7)/8)*Math.floor((st+4)/5)*16;case om:return Math.floor((at+7)/8)*Math.floor((st+5)/6)*16;case lm:return Math.floor((at+7)/8)*Math.floor((st+7)/8)*16;case cm:return Math.floor((at+9)/10)*Math.floor((st+4)/5)*16;case um:return Math.floor((at+9)/10)*Math.floor((st+5)/6)*16;case hm:return Math.floor((at+9)/10)*Math.floor((st+7)/8)*16;case dm:return Math.floor((at+9)/10)*Math.floor((st+9)/10)*16;case pm:return Math.floor((at+11)/12)*Math.floor((st+9)/10)*16;case mm:return Math.floor((at+11)/12)*Math.floor((st+11)/12)*16;case gm:case fm:case Am:return Math.ceil(at/4)*Math.ceil(st/4)*16;case ym:case vm:return Math.ceil(at/4)*Math.ceil(st/4)*8;case _m:case xm:return Math.ceil(at/4)*Math.ceil(st/4)*16}throw new Error(`Unable to determine texture byte length for ${ot} format.`)}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:ut}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=ut)},9408:(at,st,ot)=>{"use strict";ot.d(st,{JeP:()=>WebGLRenderer});var ut=ot(9435);
/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function WebGLAnimation(){let at=null,st=!1,ot=null,ut=null;function onAnimationFrame(st,Hl){ot(st,Hl),ut=at.requestAnimationFrame(onAnimationFrame)}return{start:function(){!0!==st&&null!==ot&&(ut=at.requestAnimationFrame(onAnimationFrame),st=!0)},stop:function(){at.cancelAnimationFrame(ut),st=!1},setAnimationLoop:function(at){ot=at},setContext:function(st){at=st}}}function WebGLAttributes(at){const st=new WeakMap;return{get:function(at){return at.isInterleavedBufferAttribute&&(at=at.data),st.get(at)},remove:function(ot){ot.isInterleavedBufferAttribute&&(ot=ot.data);const ut=st.get(ot);ut&&(at.deleteBuffer(ut.buffer),st.delete(ot))},update:function(ot,ut){if(ot.isInterleavedBufferAttribute&&(ot=ot.data),ot.isGLBufferAttribute){const at=st.get(ot);return void((!at||at.version<ot.version)&&st.set(ot,{buffer:ot.buffer,type:ot.type,bytesPerElement:ot.elementSize,version:ot.version}))}const Hl=st.get(ot);if(void 0===Hl)st.set(ot,function(st,ot){const ut=st.array,Hl=st.usage,rc=ut.byteLength,sc=at.createBuffer();let oc;if(at.bindBuffer(ot,sc),at.bufferData(ot,ut,Hl),st.onUploadCallback(),ut instanceof Float32Array)oc=at.FLOAT;else if("undefined"!==typeof Float16Array&&ut instanceof Float16Array)oc=at.HALF_FLOAT;else if(ut instanceof Uint16Array)oc=st.isFloat16BufferAttribute?at.HALF_FLOAT:at.UNSIGNED_SHORT;else if(ut instanceof Int16Array)oc=at.SHORT;else if(ut instanceof Uint32Array)oc=at.UNSIGNED_INT;else if(ut instanceof Int32Array)oc=at.INT;else if(ut instanceof Int8Array)oc=at.BYTE;else if(ut instanceof Uint8Array)oc=at.UNSIGNED_BYTE;else{if(!(ut instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+ut);oc=at.UNSIGNED_BYTE}return{buffer:sc,type:oc,bytesPerElement:ut.BYTES_PER_ELEMENT,version:st.version,size:rc}}(ot,ut));else if(Hl.version<ot.version){if(Hl.size!==ot.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(st,ot,ut){const Hl=ot.array,rc=ot.updateRanges;if(at.bindBuffer(ut,st),0===rc.length)at.bufferSubData(ut,0,Hl);else{rc.sort(((at,st)=>at.start-st.start));let st=0;for(let at=1;at<rc.length;at++){const ot=rc[st],ut=rc[at];ut.start<=ot.start+ot.count+1?ot.count=Math.max(ot.count,ut.start+ut.count-ot.start):(++st,rc[st]=ut)}rc.length=st+1;for(let ot=0,sc=rc.length;ot<sc;ot++){const st=rc[ot];at.bufferSubData(ut,st.start*Hl.BYTES_PER_ELEMENT,Hl,st.start,st.count)}ot.clearUpdateRanges()}ot.onUploadCallback()}(Hl.buffer,ot,ut),Hl.version=ot.version}}}}const Hl={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\tfloat depth = unpackRGBAToDepth( texture2D( depths, uv ) );\n\t\t#ifdef USE_REVERSEDEPTHBUF\n\t\t\treturn step( depth, compare );\n\t\t#else\n\t\t\treturn step( compare, depth );\n\t\t#endif\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\t#ifdef USE_REVERSEDEPTHBUF\n\t\t\tfloat hard_shadow = step( distribution.x, compare );\n\t\t#else\n\t\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\t#endif\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\t#ifdef USE_REVERSEDEPTHBUF\n\t\tfloat fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];\n\t#else\n\t\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;\n\t#endif\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},rc={common:{diffuse:{value:new ut.Q1f(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new ut.dwI},alphaMap:{value:null},alphaMapTransform:{value:new ut.dwI},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new ut.dwI}},envmap:{envMap:{value:null},envMapRotation:{value:new ut.dwI},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new ut.dwI}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new ut.dwI}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new ut.dwI},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new ut.dwI},normalScale:{value:new ut.I9Y(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new ut.dwI},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new ut.dwI}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new ut.dwI}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new ut.dwI}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new ut.Q1f(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new ut.Q1f(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new ut.dwI},alphaTest:{value:0},uvTransform:{value:new ut.dwI}},sprite:{diffuse:{value:new ut.Q1f(16777215)},opacity:{value:1},center:{value:new ut.I9Y(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new ut.dwI},alphaMap:{value:null},alphaMapTransform:{value:new ut.dwI},alphaTest:{value:0}}},sc={basic:{uniforms:(0,ut.Iit)([rc.common,rc.specularmap,rc.envmap,rc.aomap,rc.lightmap,rc.fog]),vertexShader:Hl.meshbasic_vert,fragmentShader:Hl.meshbasic_frag},lambert:{uniforms:(0,ut.Iit)([rc.common,rc.specularmap,rc.envmap,rc.aomap,rc.lightmap,rc.emissivemap,rc.bumpmap,rc.normalmap,rc.displacementmap,rc.fog,rc.lights,{emissive:{value:new ut.Q1f(0)}}]),vertexShader:Hl.meshlambert_vert,fragmentShader:Hl.meshlambert_frag},phong:{uniforms:(0,ut.Iit)([rc.common,rc.specularmap,rc.envmap,rc.aomap,rc.lightmap,rc.emissivemap,rc.bumpmap,rc.normalmap,rc.displacementmap,rc.fog,rc.lights,{emissive:{value:new ut.Q1f(0)},specular:{value:new ut.Q1f(1118481)},shininess:{value:30}}]),vertexShader:Hl.meshphong_vert,fragmentShader:Hl.meshphong_frag},standard:{uniforms:(0,ut.Iit)([rc.common,rc.envmap,rc.aomap,rc.lightmap,rc.emissivemap,rc.bumpmap,rc.normalmap,rc.displacementmap,rc.roughnessmap,rc.metalnessmap,rc.fog,rc.lights,{emissive:{value:new ut.Q1f(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Hl.meshphysical_vert,fragmentShader:Hl.meshphysical_frag},toon:{uniforms:(0,ut.Iit)([rc.common,rc.aomap,rc.lightmap,rc.emissivemap,rc.bumpmap,rc.normalmap,rc.displacementmap,rc.gradientmap,rc.fog,rc.lights,{emissive:{value:new ut.Q1f(0)}}]),vertexShader:Hl.meshtoon_vert,fragmentShader:Hl.meshtoon_frag},matcap:{uniforms:(0,ut.Iit)([rc.common,rc.bumpmap,rc.normalmap,rc.displacementmap,rc.fog,{matcap:{value:null}}]),vertexShader:Hl.meshmatcap_vert,fragmentShader:Hl.meshmatcap_frag},points:{uniforms:(0,ut.Iit)([rc.points,rc.fog]),vertexShader:Hl.points_vert,fragmentShader:Hl.points_frag},dashed:{uniforms:(0,ut.Iit)([rc.common,rc.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Hl.linedashed_vert,fragmentShader:Hl.linedashed_frag},depth:{uniforms:(0,ut.Iit)([rc.common,rc.displacementmap]),vertexShader:Hl.depth_vert,fragmentShader:Hl.depth_frag},normal:{uniforms:(0,ut.Iit)([rc.common,rc.bumpmap,rc.normalmap,rc.displacementmap,{opacity:{value:1}}]),vertexShader:Hl.meshnormal_vert,fragmentShader:Hl.meshnormal_frag},sprite:{uniforms:(0,ut.Iit)([rc.sprite,rc.fog]),vertexShader:Hl.sprite_vert,fragmentShader:Hl.sprite_frag},background:{uniforms:{uvTransform:{value:new ut.dwI},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Hl.background_vert,fragmentShader:Hl.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new ut.dwI}},vertexShader:Hl.backgroundCube_vert,fragmentShader:Hl.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Hl.cube_vert,fragmentShader:Hl.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Hl.equirect_vert,fragmentShader:Hl.equirect_frag},distanceRGBA:{uniforms:(0,ut.Iit)([rc.common,rc.displacementmap,{referencePosition:{value:new ut.Pq0},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Hl.distanceRGBA_vert,fragmentShader:Hl.distanceRGBA_frag},shadow:{uniforms:(0,ut.Iit)([rc.lights,rc.fog,{color:{value:new ut.Q1f(0)},opacity:{value:1}}]),vertexShader:Hl.shadow_vert,fragmentShader:Hl.shadow_frag}};sc.physical={uniforms:(0,ut.Iit)([sc.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new ut.dwI},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new ut.dwI},clearcoatNormalScale:{value:new ut.I9Y(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new ut.dwI},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new ut.dwI},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new ut.dwI},sheen:{value:0},sheenColor:{value:new ut.Q1f(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new ut.dwI},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new ut.dwI},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new ut.dwI},transmissionSamplerSize:{value:new ut.I9Y},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new ut.dwI},attenuationDistance:{value:0},attenuationColor:{value:new ut.Q1f(0)},specularColor:{value:new ut.Q1f(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new ut.dwI},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new ut.dwI},anisotropyVector:{value:new ut.I9Y},anisotropyMap:{value:null},anisotropyMapTransform:{value:new ut.dwI}}]),vertexShader:Hl.meshphysical_vert,fragmentShader:Hl.meshphysical_frag};const oc={r:0,b:0,g:0},_c=new ut.O9p,wc=new ut.kn4;function WebGLBackground(at,st,ot,Hl,rc,Sc,iu){const su=new ut.Q1f(0);let lu,cu,uu=!0===Sc?0:1,pu=null,mu=0,gu=null;function getBackground(at){let ut=!0===at.isScene?at.background:null;if(ut&&ut.isTexture){ut=(at.backgroundBlurriness>0?ot:st).get(ut)}return ut}function setClear(st,ot){st.getRGB(oc,(0,ut._Ut)(at)),Hl.buffers.color.setClear(oc.r,oc.g,oc.b,ot,iu)}return{getClearColor:function(){return su},setClearColor:function(at,st){void 0===st&&(st=1),su.set(at),uu=st,setClear(su,uu)},getClearAlpha:function(){return uu},setClearAlpha:function(at){uu=at,setClear(su,uu)},render:function(st){let ot=!1;const ut=getBackground(st);null===ut?setClear(su,uu):ut&&ut.isColor&&(setClear(ut,1),ot=!0);const rc=at.xr.getEnvironmentBlendMode();"additive"===rc?Hl.buffers.color.setClear(0,0,0,1,iu):"alpha-blend"===rc&&Hl.buffers.color.setClear(0,0,0,0,iu),(at.autoClear||ot)&&(Hl.buffers.depth.setTest(!0),Hl.buffers.depth.setMask(!0),Hl.buffers.color.setMask(!0),at.clear(at.autoClearColor,at.autoClearDepth,at.autoClearStencil))},addToRenderList:function(st,ot){const Hl=getBackground(ot);Hl&&(Hl.isCubeTexture||Hl.mapping===ut.Om)?(void 0===cu&&(cu=new ut.eaF(new ut.iNn(1,1,1),new ut.BKk({name:"BackgroundCubeMaterial",uniforms:(0,ut.lxW)(sc.backgroundCube.uniforms),vertexShader:sc.backgroundCube.vertexShader,fragmentShader:sc.backgroundCube.fragmentShader,side:ut.hsX,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),cu.geometry.deleteAttribute("normal"),cu.geometry.deleteAttribute("uv"),cu.onBeforeRender=function(at,st,ot){this.matrixWorld.copyPosition(ot.matrixWorld)},Object.defineProperty(cu.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),rc.update(cu)),_c.copy(ot.backgroundRotation),_c.x*=-1,_c.y*=-1,_c.z*=-1,Hl.isCubeTexture&&!1===Hl.isRenderTargetTexture&&(_c.y*=-1,_c.z*=-1),cu.material.uniforms.envMap.value=Hl,cu.material.uniforms.flipEnvMap.value=Hl.isCubeTexture&&!1===Hl.isRenderTargetTexture?-1:1,cu.material.uniforms.backgroundBlurriness.value=ot.backgroundBlurriness,cu.material.uniforms.backgroundIntensity.value=ot.backgroundIntensity,cu.material.uniforms.backgroundRotation.value.setFromMatrix4(wc.makeRotationFromEuler(_c)),cu.material.toneMapped=ut.ppV.getTransfer(Hl.colorSpace)!==ut.KLL,pu===Hl&&mu===Hl.version&&gu===at.toneMapping||(cu.material.needsUpdate=!0,pu=Hl,mu=Hl.version,gu=at.toneMapping),cu.layers.enableAll(),st.unshift(cu,cu.geometry,cu.material,0,0,null)):Hl&&Hl.isTexture&&(void 0===lu&&(lu=new ut.eaF(new ut.bdM(2,2),new ut.BKk({name:"BackgroundMaterial",uniforms:(0,ut.lxW)(sc.background.uniforms),vertexShader:sc.background.vertexShader,fragmentShader:sc.background.fragmentShader,side:ut.hB5,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),lu.geometry.deleteAttribute("normal"),Object.defineProperty(lu.material,"map",{get:function(){return this.uniforms.t2D.value}}),rc.update(lu)),lu.material.uniforms.t2D.value=Hl,lu.material.uniforms.backgroundIntensity.value=ot.backgroundIntensity,lu.material.toneMapped=ut.ppV.getTransfer(Hl.colorSpace)!==ut.KLL,!0===Hl.matrixAutoUpdate&&Hl.updateMatrix(),lu.material.uniforms.uvTransform.value.copy(Hl.matrix),pu===Hl&&mu===Hl.version&&gu===at.toneMapping||(lu.material.needsUpdate=!0,pu=Hl,mu=Hl.version,gu=at.toneMapping),lu.layers.enableAll(),st.unshift(lu,lu.geometry,lu.material,0,0,null))},dispose:function(){void 0!==cu&&(cu.geometry.dispose(),cu.material.dispose(),cu=void 0),void 0!==lu&&(lu.geometry.dispose(),lu.material.dispose(),lu=void 0)}}}function WebGLBindingStates(at,st){const ot=at.getParameter(at.MAX_VERTEX_ATTRIBS),Hl={},rc=createBindingState(null);let sc=rc,oc=!1;function bindVertexArrayObject(st){return at.bindVertexArray(st)}function deleteVertexArrayObject(st){return at.deleteVertexArray(st)}function createBindingState(at){const st=[],ut=[],Hl=[];for(let rc=0;rc<ot;rc++)st[rc]=0,ut[rc]=0,Hl[rc]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:st,enabledAttributes:ut,attributeDivisors:Hl,object:at,attributes:{},index:null}}function initAttributes(){const at=sc.newAttributes;for(let st=0,ot=at.length;st<ot;st++)at[st]=0}function enableAttribute(at){enableAttributeAndDivisor(at,0)}function enableAttributeAndDivisor(st,ot){const ut=sc.newAttributes,Hl=sc.enabledAttributes,rc=sc.attributeDivisors;ut[st]=1,0===Hl[st]&&(at.enableVertexAttribArray(st),Hl[st]=1),rc[st]!==ot&&(at.vertexAttribDivisor(st,ot),rc[st]=ot)}function disableUnusedAttributes(){const st=sc.newAttributes,ot=sc.enabledAttributes;for(let ut=0,Hl=ot.length;ut<Hl;ut++)ot[ut]!==st[ut]&&(at.disableVertexAttribArray(ut),ot[ut]=0)}function vertexAttribPointer(st,ot,ut,Hl,rc,sc,oc){!0===oc?at.vertexAttribIPointer(st,ot,ut,rc,sc):at.vertexAttribPointer(st,ot,ut,Hl,rc,sc)}function reset(){resetDefaultState(),oc=!0,sc!==rc&&(sc=rc,bindVertexArrayObject(sc.object))}function resetDefaultState(){rc.geometry=null,rc.program=null,rc.wireframe=!1}return{setup:function(ot,rc,_c,wc,Sc){let iu=!1;const su=function(st,ot,ut){const rc=!0===ut.wireframe;let sc=Hl[st.id];void 0===sc&&(sc={},Hl[st.id]=sc);let oc=sc[ot.id];void 0===oc&&(oc={},sc[ot.id]=oc);let _c=oc[rc];void 0===_c&&(_c=createBindingState(at.createVertexArray()),oc[rc]=_c);return _c}(wc,_c,rc);sc!==su&&(sc=su,bindVertexArrayObject(sc.object)),iu=function(at,st,ot,ut){const Hl=sc.attributes,rc=st.attributes;let oc=0;const _c=ot.getAttributes();for(const sc in _c){if(_c[sc].location>=0){const st=Hl[sc];let ot=rc[sc];if(void 0===ot&&("instanceMatrix"===sc&&at.instanceMatrix&&(ot=at.instanceMatrix),"instanceColor"===sc&&at.instanceColor&&(ot=at.instanceColor)),void 0===st)return!0;if(st.attribute!==ot)return!0;if(ot&&st.data!==ot.data)return!0;oc++}}return sc.attributesNum!==oc||sc.index!==ut}(ot,wc,_c,Sc),iu&&function(at,st,ot,ut){const Hl={},rc=st.attributes;let oc=0;const _c=ot.getAttributes();for(const sc in _c){if(_c[sc].location>=0){let st=rc[sc];void 0===st&&("instanceMatrix"===sc&&at.instanceMatrix&&(st=at.instanceMatrix),"instanceColor"===sc&&at.instanceColor&&(st=at.instanceColor));const ot={};ot.attribute=st,st&&st.data&&(ot.data=st.data),Hl[sc]=ot,oc++}}sc.attributes=Hl,sc.attributesNum=oc,sc.index=ut}(ot,wc,_c,Sc),null!==Sc&&st.update(Sc,at.ELEMENT_ARRAY_BUFFER),(iu||oc)&&(oc=!1,function(ot,Hl,rc,sc){initAttributes();const oc=sc.attributes,_c=rc.getAttributes(),wc=Hl.defaultAttributeValues;for(const Sc in _c){const Hl=_c[Sc];if(Hl.location>=0){let rc=oc[Sc];if(void 0===rc&&("instanceMatrix"===Sc&&ot.instanceMatrix&&(rc=ot.instanceMatrix),"instanceColor"===Sc&&ot.instanceColor&&(rc=ot.instanceColor)),void 0!==rc){const oc=rc.normalized,_c=rc.itemSize,wc=st.get(rc);if(void 0===wc)continue;const Sc=wc.buffer,iu=wc.type,su=wc.bytesPerElement,lu=iu===at.INT||iu===at.UNSIGNED_INT||rc.gpuType===ut.Yuy;if(rc.isInterleavedBufferAttribute){const st=rc.data,ut=st.stride,wc=rc.offset;if(st.isInstancedInterleavedBuffer){for(let at=0;at<Hl.locationSize;at++)enableAttributeAndDivisor(Hl.location+at,st.meshPerAttribute);!0!==ot.isInstancedMesh&&void 0===sc._maxInstanceCount&&(sc._maxInstanceCount=st.meshPerAttribute*st.count)}else for(let at=0;at<Hl.locationSize;at++)enableAttribute(Hl.location+at);at.bindBuffer(at.ARRAY_BUFFER,Sc);for(let at=0;at<Hl.locationSize;at++)vertexAttribPointer(Hl.location+at,_c/Hl.locationSize,iu,oc,ut*su,(wc+_c/Hl.locationSize*at)*su,lu)}else{if(rc.isInstancedBufferAttribute){for(let at=0;at<Hl.locationSize;at++)enableAttributeAndDivisor(Hl.location+at,rc.meshPerAttribute);!0!==ot.isInstancedMesh&&void 0===sc._maxInstanceCount&&(sc._maxInstanceCount=rc.meshPerAttribute*rc.count)}else for(let at=0;at<Hl.locationSize;at++)enableAttribute(Hl.location+at);at.bindBuffer(at.ARRAY_BUFFER,Sc);for(let at=0;at<Hl.locationSize;at++)vertexAttribPointer(Hl.location+at,_c/Hl.locationSize,iu,oc,_c*su,_c/Hl.locationSize*at*su,lu)}}else if(void 0!==wc){const st=wc[Sc];if(void 0!==st)switch(st.length){case 2:at.vertexAttrib2fv(Hl.location,st);break;case 3:at.vertexAttrib3fv(Hl.location,st);break;case 4:at.vertexAttrib4fv(Hl.location,st);break;default:at.vertexAttrib1fv(Hl.location,st)}}}}disableUnusedAttributes()}(ot,rc,_c,wc),null!==Sc&&at.bindBuffer(at.ELEMENT_ARRAY_BUFFER,st.get(Sc).buffer))},reset:reset,resetDefaultState:resetDefaultState,dispose:function(){reset();for(const at in Hl){const st=Hl[at];for(const at in st){const ot=st[at];for(const at in ot)deleteVertexArrayObject(ot[at].object),delete ot[at];delete st[at]}delete Hl[at]}},releaseStatesOfGeometry:function(at){if(void 0===Hl[at.id])return;const st=Hl[at.id];for(const ot in st){const at=st[ot];for(const st in at)deleteVertexArrayObject(at[st].object),delete at[st];delete st[ot]}delete Hl[at.id]},releaseStatesOfProgram:function(at){for(const st in Hl){const ot=Hl[st];if(void 0===ot[at.id])continue;const ut=ot[at.id];for(const at in ut)deleteVertexArrayObject(ut[at].object),delete ut[at];delete ot[at.id]}},initAttributes:initAttributes,enableAttribute:enableAttribute,disableUnusedAttributes:disableUnusedAttributes}}function WebGLBufferRenderer(at,st,ot){let ut;function renderInstances(st,Hl,rc){0!==rc&&(at.drawArraysInstanced(ut,st,Hl,rc),ot.update(Hl,ut,rc))}this.setMode=function(at){ut=at},this.render=function(st,Hl){at.drawArrays(ut,st,Hl),ot.update(Hl,ut,1)},this.renderInstances=renderInstances,this.renderMultiDraw=function(at,Hl,rc){if(0===rc)return;st.get("WEBGL_multi_draw").multiDrawArraysWEBGL(ut,at,0,Hl,0,rc);let sc=0;for(let st=0;st<rc;st++)sc+=Hl[st];ot.update(sc,ut,1)},this.renderMultiDrawInstances=function(at,Hl,rc,sc){if(0===rc)return;const oc=st.get("WEBGL_multi_draw");if(null===oc)for(let st=0;st<at.length;st++)renderInstances(at[st],Hl[st],sc[st]);else{oc.multiDrawArraysInstancedWEBGL(ut,at,0,Hl,0,sc,0,rc);let st=0;for(let at=0;at<rc;at++)st+=Hl[at]*sc[at];ot.update(st,ut,1)}}}function WebGLCapabilities(at,st,ot,Hl){let rc;function getMaxPrecision(st){if("highp"===st){if(at.getShaderPrecisionFormat(at.VERTEX_SHADER,at.HIGH_FLOAT).precision>0&&at.getShaderPrecisionFormat(at.FRAGMENT_SHADER,at.HIGH_FLOAT).precision>0)return"highp";st="mediump"}return"mediump"===st&&at.getShaderPrecisionFormat(at.VERTEX_SHADER,at.MEDIUM_FLOAT).precision>0&&at.getShaderPrecisionFormat(at.FRAGMENT_SHADER,at.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let sc=void 0!==ot.precision?ot.precision:"highp";const oc=getMaxPrecision(sc);oc!==sc&&(console.warn("THREE.WebGLRenderer:",sc,"not supported, using",oc,"instead."),sc=oc);const _c=!0===ot.logarithmicDepthBuffer,wc=!0===ot.reversedDepthBuffer&&st.has("EXT_clip_control"),Sc=at.getParameter(at.MAX_TEXTURE_IMAGE_UNITS),iu=at.getParameter(at.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==rc)return rc;if(!0===st.has("EXT_texture_filter_anisotropic")){const ot=st.get("EXT_texture_filter_anisotropic");rc=at.getParameter(ot.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else rc=0;return rc},getMaxPrecision:getMaxPrecision,textureFormatReadable:function(st){return st===ut.GWd||Hl.convert(st)===at.getParameter(at.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(ot){const rc=ot===ut.ix0&&(st.has("EXT_color_buffer_half_float")||st.has("EXT_color_buffer_float"));return!(ot!==ut.OUM&&Hl.convert(ot)!==at.getParameter(at.IMPLEMENTATION_COLOR_READ_TYPE)&&ot!==ut.RQf&&!rc)},precision:sc,logarithmicDepthBuffer:_c,reversedDepthBuffer:wc,maxTextures:Sc,maxVertexTextures:iu,maxTextureSize:at.getParameter(at.MAX_TEXTURE_SIZE),maxCubemapSize:at.getParameter(at.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:at.getParameter(at.MAX_VERTEX_ATTRIBS),maxVertexUniforms:at.getParameter(at.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:at.getParameter(at.MAX_VARYING_VECTORS),maxFragmentUniforms:at.getParameter(at.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:iu>0,maxSamples:at.getParameter(at.MAX_SAMPLES)}}function WebGLClipping(at){const st=this;let ot=null,Hl=0,rc=!1,sc=!1;const oc=new ut.Zcv,_c=new ut.dwI,wc={value:null,needsUpdate:!1};function projectPlanes(at,ot,ut,Hl){const rc=null!==at?at.length:0;let sc=null;if(0!==rc){if(sc=wc.value,!0!==Hl||null===sc){const st=ut+4*rc,Hl=ot.matrixWorldInverse;_c.getNormalMatrix(Hl),(null===sc||sc.length<st)&&(sc=new Float32Array(st));for(let ot=0,wc=ut;ot!==rc;++ot,wc+=4)oc.copy(at[ot]).applyMatrix4(Hl,_c),oc.normal.toArray(sc,wc),sc[wc+3]=oc.constant}wc.value=sc,wc.needsUpdate=!0}return st.numPlanes=rc,st.numIntersection=0,sc}this.uniform=wc,this.numPlanes=0,this.numIntersection=0,this.init=function(at,st){const ot=0!==at.length||st||0!==Hl||rc;return rc=st,Hl=at.length,ot},this.beginShadows=function(){sc=!0,projectPlanes(null)},this.endShadows=function(){sc=!1},this.setGlobalState=function(at,st){ot=projectPlanes(at,st,0)},this.setState=function(ut,oc,_c){const Sc=ut.clippingPlanes,iu=ut.clipIntersection,su=ut.clipShadows,lu=at.get(ut);if(!rc||null===Sc||0===Sc.length||sc&&!su)sc?projectPlanes(null):function(){wc.value!==ot&&(wc.value=ot,wc.needsUpdate=Hl>0);st.numPlanes=Hl,st.numIntersection=0}();else{const at=sc?0:Hl,st=4*at;let ut=lu.clippingState||null;wc.value=ut,ut=projectPlanes(Sc,oc,st,_c);for(let Hl=0;Hl!==st;++Hl)ut[Hl]=ot[Hl];lu.clippingState=ut,this.numIntersection=iu?this.numPlanes:0,this.numPlanes+=at}}}function WebGLCubeMaps(at){let st=new WeakMap;function mapTextureMapping(at,st){return st===ut.wfO?at.mapping=ut.hy7:st===ut.uV5&&(at.mapping=ut.xFO),at}function onTextureDispose(at){const ot=at.target;ot.removeEventListener("dispose",onTextureDispose);const ut=st.get(ot);void 0!==ut&&(st.delete(ot),ut.dispose())}return{get:function(ot){if(ot&&ot.isTexture){const Hl=ot.mapping;if(Hl===ut.wfO||Hl===ut.uV5){if(st.has(ot)){return mapTextureMapping(st.get(ot).texture,ot.mapping)}{const Hl=ot.image;if(Hl&&Hl.height>0){const rc=new ut.o6l(Hl.height);return rc.fromEquirectangularTexture(at,ot),st.set(ot,rc),ot.addEventListener("dispose",onTextureDispose),mapTextureMapping(rc.texture,ot.mapping)}return null}}}return ot},dispose:function(){st=new WeakMap}}}const Sc=[.125,.215,.35,.446,.526,.582],iu=20,su=new ut.qUd,lu=new ut.Q1f;let cu=null,uu=0,pu=0,mu=!1;const gu=(1+Math.sqrt(5))/2,Au=1/gu,yu=[new ut.Pq0(-gu,Au,0),new ut.Pq0(gu,Au,0),new ut.Pq0(-Au,0,gu),new ut.Pq0(Au,0,gu),new ut.Pq0(0,gu,-Au),new ut.Pq0(0,gu,Au),new ut.Pq0(-1,1,-1),new ut.Pq0(1,1,-1),new ut.Pq0(-1,1,1),new ut.Pq0(1,1,1)],_u=new ut.Pq0;class PMREMGenerator{constructor(at){this._renderer=at,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(at,st,ot,ut,Hl){void 0===st&&(st=0),void 0===ot&&(ot=.1),void 0===ut&&(ut=100),void 0===Hl&&(Hl={});const{size:rc=256,position:sc=_u}=Hl;cu=this._renderer.getRenderTarget(),uu=this._renderer.getActiveCubeFace(),pu=this._renderer.getActiveMipmapLevel(),mu=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(rc);const oc=this._allocateTargets();return oc.depthBuffer=!0,this._sceneToCubeUV(at,ot,ut,oc,sc),st>0&&this._blur(oc,0,0,st),this._applyPMREM(oc),this._cleanup(oc),oc}fromEquirectangular(at,st){return void 0===st&&(st=null),this._fromTexture(at,st)}fromCubemap(at,st){return void 0===st&&(st=null),this._fromTexture(at,st)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=_getCubemapMaterial(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=_getEquirectMaterial(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(at){this._lodMax=Math.floor(Math.log2(at)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let at=0;at<this._lodPlanes.length;at++)this._lodPlanes[at].dispose()}_cleanup(at){this._renderer.setRenderTarget(cu,uu,pu),this._renderer.xr.enabled=mu,at.scissorTest=!1,_setViewport(at,0,0,at.width,at.height)}_fromTexture(at,st){at.mapping===ut.hy7||at.mapping===ut.xFO?this._setSize(0===at.image.length?16:at.image[0].width||at.image[0].image.width):this._setSize(at.image.width/4),cu=this._renderer.getRenderTarget(),uu=this._renderer.getActiveCubeFace(),pu=this._renderer.getActiveMipmapLevel(),mu=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const ot=st||this._allocateTargets();return this._textureToCubeUV(at,ot),this._applyPMREM(ot),this._cleanup(ot),ot}_allocateTargets(){const at=3*Math.max(this._cubeSize,112),st=4*this._cubeSize,ot={magFilter:ut.k6q,minFilter:ut.k6q,generateMipmaps:!1,type:ut.ix0,format:ut.GWd,colorSpace:ut.Zr2,depthBuffer:!1},Hl=_createRenderTarget(at,st,ot);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==at||this._pingPongRenderTarget.height!==st){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=_createRenderTarget(at,st,ot);const{_lodMax:Hl}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(at){const st=[],ot=[],Hl=[];let rc=at;const sc=at-4+1+Sc.length;for(let oc=0;oc<sc;oc++){const sc=Math.pow(2,rc);ot.push(sc);let _c=1/sc;oc>at-4?_c=Sc[oc-at+4-1]:0===oc&&(_c=0),Hl.push(_c);const wc=1/(sc-2),iu=-wc,su=1+wc,lu=[iu,iu,su,iu,su,su,iu,iu,su,su,iu,su],cu=6,uu=6,pu=3,mu=2,gu=1,Au=new Float32Array(pu*uu*cu),yu=new Float32Array(mu*uu*cu),_u=new Float32Array(gu*uu*cu);for(let at=0;at<cu;at++){const st=at%3*2/3-1,ot=at>2?0:-1,ut=[st,ot,0,st+2/3,ot,0,st+2/3,ot+1,0,st,ot,0,st+2/3,ot+1,0,st,ot+1,0];Au.set(ut,pu*uu*at),yu.set(lu,mu*uu*at);const Hl=[at,at,at,at,at,at];_u.set(Hl,gu*uu*at)}const xu=new ut.LoY;xu.setAttribute("position",new ut.THS(Au,pu)),xu.setAttribute("uv",new ut.THS(yu,mu)),xu.setAttribute("faceIndex",new ut.THS(_u,gu)),st.push(xu),rc>4&&rc--}return{lodPlanes:st,sizeLods:ot,sigmas:Hl}}(Hl)),this._blurMaterial=function(at,st,ot){const Hl=new Float32Array(iu),rc=new ut.Pq0(0,1,0),sc=new ut.BKk({name:"SphericalGaussianBlur",defines:{n:iu,CUBEUV_TEXEL_WIDTH:1/st,CUBEUV_TEXEL_HEIGHT:1/ot,CUBEUV_MAX_MIP:`${at}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:Hl},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:rc}},vertexShader:_getCommonVertexShader(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:ut.XIg,depthTest:!1,depthWrite:!1});return sc}(Hl,at,st)}return Hl}_compileMaterial(at){const st=new ut.eaF(this._lodPlanes[0],at);this._renderer.compile(st,su)}_sceneToCubeUV(at,st,ot,Hl,rc){const sc=new ut.ubm(90,1,st,ot),oc=[1,-1,1,1,1,1],_c=[1,1,1,-1,-1,-1],wc=this._renderer,Sc=wc.autoClear,iu=wc.toneMapping;wc.getClearColor(lu),wc.toneMapping=ut.y_p,wc.autoClear=!1;wc.state.buffers.depth.getReversed()&&(wc.setRenderTarget(Hl),wc.clearDepth(),wc.setRenderTarget(null));const su=new ut.V9B({name:"PMREM.Background",side:ut.hsX,depthWrite:!1,depthTest:!1}),cu=new ut.eaF(new ut.iNn,su);let uu=!1;const pu=at.background;pu?pu.isColor&&(su.color.copy(pu),at.background=null,uu=!0):(su.color.copy(lu),uu=!0);for(let ut=0;ut<6;ut++){const st=ut%3;0===st?(sc.up.set(0,oc[ut],0),sc.position.set(rc.x,rc.y,rc.z),sc.lookAt(rc.x+_c[ut],rc.y,rc.z)):1===st?(sc.up.set(0,0,oc[ut]),sc.position.set(rc.x,rc.y,rc.z),sc.lookAt(rc.x,rc.y+_c[ut],rc.z)):(sc.up.set(0,oc[ut],0),sc.position.set(rc.x,rc.y,rc.z),sc.lookAt(rc.x,rc.y,rc.z+_c[ut]));const ot=this._cubeSize;_setViewport(Hl,st*ot,ut>2?ot:0,ot,ot),wc.setRenderTarget(Hl),uu&&wc.render(cu,sc),wc.render(at,sc)}cu.geometry.dispose(),cu.material.dispose(),wc.toneMapping=iu,wc.autoClear=Sc,at.background=pu}_textureToCubeUV(at,st){const ot=this._renderer,Hl=at.mapping===ut.hy7||at.mapping===ut.xFO;Hl?(null===this._cubemapMaterial&&(this._cubemapMaterial=_getCubemapMaterial()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===at.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=_getEquirectMaterial());const rc=Hl?this._cubemapMaterial:this._equirectMaterial,sc=new ut.eaF(this._lodPlanes[0],rc);rc.uniforms.envMap.value=at;const oc=this._cubeSize;_setViewport(st,0,0,3*oc,2*oc),ot.setRenderTarget(st),ot.render(sc,su)}_applyPMREM(at){const st=this._renderer,ot=st.autoClear;st.autoClear=!1;const ut=this._lodPlanes.length;for(let Hl=1;Hl<ut;Hl++){const st=Math.sqrt(this._sigmas[Hl]*this._sigmas[Hl]-this._sigmas[Hl-1]*this._sigmas[Hl-1]),ot=yu[(ut-Hl-1)%yu.length];this._blur(at,Hl-1,Hl,st,ot)}st.autoClear=ot}_blur(at,st,ot,ut,Hl){const rc=this._pingPongRenderTarget;this._halfBlur(at,rc,st,ot,ut,"latitudinal",Hl),this._halfBlur(rc,at,ot,ot,ut,"longitudinal",Hl)}_halfBlur(at,st,ot,Hl,rc,sc,oc){const _c=this._renderer,wc=this._blurMaterial;"latitudinal"!==sc&&"longitudinal"!==sc&&console.error("blur direction must be either latitudinal or longitudinal!");const Sc=new ut.eaF(this._lodPlanes[Hl],wc),lu=wc.uniforms,cu=this._sizeLods[ot]-1,uu=isFinite(rc)?Math.PI/(2*cu):2*Math.PI/39,pu=rc/uu,mu=isFinite(rc)?1+Math.floor(3*pu):iu;mu>iu&&console.warn(`sigmaRadians, ${rc}, is too large and will clip, as it requested ${mu} samples when the maximum is set to 20`);const gu=[];let Au=0;for(let ut=0;ut<iu;++ut){const at=ut/pu,st=Math.exp(-at*at/2);gu.push(st),0===ut?Au+=st:ut<mu&&(Au+=2*st)}for(let ut=0;ut<gu.length;ut++)gu[ut]=gu[ut]/Au;lu.envMap.value=at.texture,lu.samples.value=mu,lu.weights.value=gu,lu.latitudinal.value="latitudinal"===sc,oc&&(lu.poleAxis.value=oc);const{_lodMax:yu}=this;lu.dTheta.value=uu,lu.mipInt.value=yu-ot;const _u=this._sizeLods[Hl];_setViewport(st,3*_u*(Hl>yu-4?Hl-yu+4:0),4*(this._cubeSize-_u),3*_u,2*_u),_c.setRenderTarget(st),_c.render(Sc,su)}}function _createRenderTarget(at,st,ot){const Hl=new ut.nWS(at,st,ot);return Hl.texture.mapping=ut.Om,Hl.texture.name="PMREM.cubeUv",Hl.scissorTest=!0,Hl}function _setViewport(at,st,ot,ut,Hl){at.viewport.set(st,ot,ut,Hl),at.scissor.set(st,ot,ut,Hl)}function _getEquirectMaterial(){return new ut.BKk({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:_getCommonVertexShader(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:ut.XIg,depthTest:!1,depthWrite:!1})}function _getCubemapMaterial(){return new ut.BKk({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:_getCommonVertexShader(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:ut.XIg,depthTest:!1,depthWrite:!1})}function _getCommonVertexShader(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function WebGLCubeUVMaps(at){let st=new WeakMap,ot=null;function onTextureDispose(at){const ot=at.target;ot.removeEventListener("dispose",onTextureDispose);const ut=st.get(ot);void 0!==ut&&(st.delete(ot),ut.dispose())}return{get:function(Hl){if(Hl&&Hl.isTexture){const rc=Hl.mapping,sc=rc===ut.wfO||rc===ut.uV5,oc=rc===ut.hy7||rc===ut.xFO;if(sc||oc){let ut=st.get(Hl);const rc=void 0!==ut?ut.texture.pmremVersion:0;if(Hl.isRenderTargetTexture&&Hl.pmremVersion!==rc)return null===ot&&(ot=new PMREMGenerator(at)),ut=sc?ot.fromEquirectangular(Hl,ut):ot.fromCubemap(Hl,ut),ut.texture.pmremVersion=Hl.pmremVersion,st.set(Hl,ut),ut.texture;if(void 0!==ut)return ut.texture;{const rc=Hl.image;return sc&&rc&&rc.height>0||oc&&rc&&function(at){let st=0;const ot=6;for(let ut=0;ut<ot;ut++)void 0!==at[ut]&&st++;return st===ot}(rc)?(null===ot&&(ot=new PMREMGenerator(at)),ut=sc?ot.fromEquirectangular(Hl):ot.fromCubemap(Hl),ut.texture.pmremVersion=Hl.pmremVersion,st.set(Hl,ut),Hl.addEventListener("dispose",onTextureDispose),ut.texture):null}}}return Hl},dispose:function(){st=new WeakMap,null!==ot&&(ot.dispose(),ot=null)}}}function WebGLExtensions(at){const st={};function getExtension(ot){if(void 0!==st[ot])return st[ot];let ut;switch(ot){case"WEBGL_depth_texture":ut=at.getExtension("WEBGL_depth_texture")||at.getExtension("MOZ_WEBGL_depth_texture")||at.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":ut=at.getExtension("EXT_texture_filter_anisotropic")||at.getExtension("MOZ_EXT_texture_filter_anisotropic")||at.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":ut=at.getExtension("WEBGL_compressed_texture_s3tc")||at.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||at.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":ut=at.getExtension("WEBGL_compressed_texture_pvrtc")||at.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:ut=at.getExtension(ot)}return st[ot]=ut,ut}return{has:function(at){return null!==getExtension(at)},init:function(){getExtension("EXT_color_buffer_float"),getExtension("WEBGL_clip_cull_distance"),getExtension("OES_texture_float_linear"),getExtension("EXT_color_buffer_half_float"),getExtension("WEBGL_multisampled_render_to_texture"),getExtension("WEBGL_render_shared_exponent")},get:function(at){const st=getExtension(at);return null===st&&(0,ut.mcG)("THREE.WebGLRenderer: "+at+" extension not supported."),st}}}function WebGLGeometries(at,st,ot,Hl){const rc={},sc=new WeakMap;function onGeometryDispose(at){const ut=at.target;null!==ut.index&&st.remove(ut.index);for(const ot in ut.attributes)st.remove(ut.attributes[ot]);ut.removeEventListener("dispose",onGeometryDispose),delete rc[ut.id];const oc=sc.get(ut);oc&&(st.remove(oc),sc.delete(ut)),Hl.releaseStatesOfGeometry(ut),!0===ut.isInstancedBufferGeometry&&delete ut._maxInstanceCount,ot.memory.geometries--}function updateWireframeAttribute(at){const ot=[],Hl=at.index,rc=at.attributes.position;let oc=0;if(null!==Hl){const at=Hl.array;oc=Hl.version;for(let st=0,ut=at.length;st<ut;st+=3){const ut=at[st+0],Hl=at[st+1],rc=at[st+2];ot.push(ut,Hl,Hl,rc,rc,ut)}}else{if(void 0===rc)return;{const at=rc.array;oc=rc.version;for(let st=0,ut=at.length/3-1;st<ut;st+=3){const at=st+0,ut=st+1,Hl=st+2;ot.push(at,ut,ut,Hl,Hl,at)}}}const _c=new((0,ut.AQS)(ot)?ut.MW4:ut.A$4)(ot,1);_c.version=oc;const wc=sc.get(at);wc&&st.remove(wc),sc.set(at,_c)}return{get:function(at,st){return!0===rc[st.id]||(st.addEventListener("dispose",onGeometryDispose),rc[st.id]=!0,ot.memory.geometries++),st},update:function(ot){const ut=ot.attributes;for(const Hl in ut)st.update(ut[Hl],at.ARRAY_BUFFER)},getWireframeAttribute:function(at){const st=sc.get(at);if(st){const ot=at.index;null!==ot&&st.version<ot.version&&updateWireframeAttribute(at)}else updateWireframeAttribute(at);return sc.get(at)}}}function WebGLIndexedBufferRenderer(at,st,ot){let ut,Hl,rc;function renderInstances(st,sc,oc){0!==oc&&(at.drawElementsInstanced(ut,sc,Hl,st*rc,oc),ot.update(sc,ut,oc))}this.setMode=function(at){ut=at},this.setIndex=function(at){Hl=at.type,rc=at.bytesPerElement},this.render=function(st,sc){at.drawElements(ut,sc,Hl,st*rc),ot.update(sc,ut,1)},this.renderInstances=renderInstances,this.renderMultiDraw=function(at,rc,sc){if(0===sc)return;st.get("WEBGL_multi_draw").multiDrawElementsWEBGL(ut,rc,0,Hl,at,0,sc);let oc=0;for(let st=0;st<sc;st++)oc+=rc[st];ot.update(oc,ut,1)},this.renderMultiDrawInstances=function(at,sc,oc,_c){if(0===oc)return;const wc=st.get("WEBGL_multi_draw");if(null===wc)for(let st=0;st<at.length;st++)renderInstances(at[st]/rc,sc[st],_c[st]);else{wc.multiDrawElementsInstancedWEBGL(ut,sc,0,Hl,at,0,_c,0,oc);let st=0;for(let at=0;at<oc;at++)st+=sc[at]*_c[at];ot.update(st,ut,1)}}}function WebGLInfo(at){const st={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:st,programs:null,autoReset:!0,reset:function(){st.calls=0,st.triangles=0,st.points=0,st.lines=0},update:function(ot,ut,Hl){switch(st.calls++,ut){case at.TRIANGLES:st.triangles+=Hl*(ot/3);break;case at.LINES:st.lines+=Hl*(ot/2);break;case at.LINE_STRIP:st.lines+=Hl*(ot-1);break;case at.LINE_LOOP:st.lines+=Hl*ot;break;case at.POINTS:st.points+=Hl*ot;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",ut)}}}}function WebGLMorphtargets(at,st,ot){const Hl=new WeakMap,rc=new ut.IUQ;return{update:function(sc,oc,_c){const wc=sc.morphTargetInfluences,Sc=oc.morphAttributes.position||oc.morphAttributes.normal||oc.morphAttributes.color,iu=void 0!==Sc?Sc.length:0;let su=Hl.get(oc);if(void 0===su||su.count!==iu){void 0!==su&&su.texture.dispose();const lu=void 0!==oc.morphAttributes.position,cu=void 0!==oc.morphAttributes.normal,uu=void 0!==oc.morphAttributes.color,pu=oc.morphAttributes.position||[],mu=oc.morphAttributes.normal||[],gu=oc.morphAttributes.color||[];let Au=0;!0===lu&&(Au=1),!0===cu&&(Au=2),!0===uu&&(Au=3);let yu=oc.attributes.position.count*Au,_u=1;yu>st.maxTextureSize&&(_u=Math.ceil(yu/st.maxTextureSize),yu=st.maxTextureSize);const xu=new Float32Array(yu*_u*4*iu),Su=new ut.rFo(xu,yu,_u,iu);Su.type=ut.RQf,Su.needsUpdate=!0;const Du=4*Au;for(let Lu=0;Lu<iu;Lu++){const $u=pu[Lu],hh=mu[Lu],ed=gu[Lu],td=yu*_u*4*Lu;for(let id=0;id<$u.count;id++){const nd=id*Du;!0===lu&&(rc.fromBufferAttribute($u,id),xu[td+nd+0]=rc.x,xu[td+nd+1]=rc.y,xu[td+nd+2]=rc.z,xu[td+nd+3]=0),!0===cu&&(rc.fromBufferAttribute(hh,id),xu[td+nd+4]=rc.x,xu[td+nd+5]=rc.y,xu[td+nd+6]=rc.z,xu[td+nd+7]=0),!0===uu&&(rc.fromBufferAttribute(ed,id),xu[td+nd+8]=rc.x,xu[td+nd+9]=rc.y,xu[td+nd+10]=rc.z,xu[td+nd+11]=4===ed.itemSize?rc.w:1)}}function disposeTexture(){Su.dispose(),Hl.delete(oc),oc.removeEventListener("dispose",disposeTexture)}su={count:iu,texture:Su,size:new ut.I9Y(yu,_u)},Hl.set(oc,su),oc.addEventListener("dispose",disposeTexture)}if(!0===sc.isInstancedMesh&&null!==sc.morphTexture)_c.getUniforms().setValue(at,"morphTexture",sc.morphTexture,ot);else{let rd=0;for(let sd=0;sd<wc.length;sd++)rd+=wc[sd];const ad=oc.morphTargetsRelative?1:1-rd;_c.getUniforms().setValue(at,"morphTargetBaseInfluence",ad),_c.getUniforms().setValue(at,"morphTargetInfluences",wc)}_c.getUniforms().setValue(at,"morphTargetsTexture",su.texture,ot),_c.getUniforms().setValue(at,"morphTargetsTextureSize",su.size)}}}function WebGLObjects(at,st,ot,ut){let Hl=new WeakMap;function onInstancedMeshDispose(at){const st=at.target;st.removeEventListener("dispose",onInstancedMeshDispose),ot.remove(st.instanceMatrix),null!==st.instanceColor&&ot.remove(st.instanceColor)}return{update:function(rc){const sc=ut.render.frame,oc=rc.geometry,_c=st.get(rc,oc);if(Hl.get(_c)!==sc&&(st.update(_c),Hl.set(_c,sc)),rc.isInstancedMesh&&(!1===rc.hasEventListener("dispose",onInstancedMeshDispose)&&rc.addEventListener("dispose",onInstancedMeshDispose),Hl.get(rc)!==sc&&(ot.update(rc.instanceMatrix,at.ARRAY_BUFFER),null!==rc.instanceColor&&ot.update(rc.instanceColor,at.ARRAY_BUFFER),Hl.set(rc,sc))),rc.isSkinnedMesh){const at=rc.skeleton;Hl.get(at)!==sc&&(at.update(),Hl.set(at,sc))}return _c},dispose:function(){Hl=new WeakMap}}}const xu=new ut.gPd,Su=new ut.VCu(1,1),Du=new ut.rFo,Lu=new ut.dYF,$u=new ut.b4q,hh=[],ed=[],td=new Float32Array(16),id=new Float32Array(9),nd=new Float32Array(4);function flatten(at,st,ot){const ut=at[0];if(ut<=0||ut>0)return at;const Hl=st*ot;let rc=hh[Hl];if(void 0===rc&&(rc=new Float32Array(Hl),hh[Hl]=rc),0!==st){ut.toArray(rc,0);for(let ut=1,Hl=0;ut!==st;++ut)Hl+=ot,at[ut].toArray(rc,Hl)}return rc}function arraysEqual(at,st){if(at.length!==st.length)return!1;for(let ot=0,ut=at.length;ot<ut;ot++)if(at[ot]!==st[ot])return!1;return!0}function copyArray(at,st){for(let ot=0,ut=st.length;ot<ut;ot++)at[ot]=st[ot]}function allocTexUnits(at,st){let ot=ed[st];void 0===ot&&(ot=new Int32Array(st),ed[st]=ot);for(let ut=0;ut!==st;++ut)ot[ut]=at.allocateTextureUnit();return ot}function setValueV1f(at,st){const ot=this.cache;ot[0]!==st&&(at.uniform1f(this.addr,st),ot[0]=st)}function setValueV2f(at,st){const ot=this.cache;if(void 0!==st.x)ot[0]===st.x&&ot[1]===st.y||(at.uniform2f(this.addr,st.x,st.y),ot[0]=st.x,ot[1]=st.y);else{if(arraysEqual(ot,st))return;at.uniform2fv(this.addr,st),copyArray(ot,st)}}function setValueV3f(at,st){const ot=this.cache;if(void 0!==st.x)ot[0]===st.x&&ot[1]===st.y&&ot[2]===st.z||(at.uniform3f(this.addr,st.x,st.y,st.z),ot[0]=st.x,ot[1]=st.y,ot[2]=st.z);else if(void 0!==st.r)ot[0]===st.r&&ot[1]===st.g&&ot[2]===st.b||(at.uniform3f(this.addr,st.r,st.g,st.b),ot[0]=st.r,ot[1]=st.g,ot[2]=st.b);else{if(arraysEqual(ot,st))return;at.uniform3fv(this.addr,st),copyArray(ot,st)}}function setValueV4f(at,st){const ot=this.cache;if(void 0!==st.x)ot[0]===st.x&&ot[1]===st.y&&ot[2]===st.z&&ot[3]===st.w||(at.uniform4f(this.addr,st.x,st.y,st.z,st.w),ot[0]=st.x,ot[1]=st.y,ot[2]=st.z,ot[3]=st.w);else{if(arraysEqual(ot,st))return;at.uniform4fv(this.addr,st),copyArray(ot,st)}}function setValueM2(at,st){const ot=this.cache,ut=st.elements;if(void 0===ut){if(arraysEqual(ot,st))return;at.uniformMatrix2fv(this.addr,!1,st),copyArray(ot,st)}else{if(arraysEqual(ot,ut))return;nd.set(ut),at.uniformMatrix2fv(this.addr,!1,nd),copyArray(ot,ut)}}function setValueM3(at,st){const ot=this.cache,ut=st.elements;if(void 0===ut){if(arraysEqual(ot,st))return;at.uniformMatrix3fv(this.addr,!1,st),copyArray(ot,st)}else{if(arraysEqual(ot,ut))return;id.set(ut),at.uniformMatrix3fv(this.addr,!1,id),copyArray(ot,ut)}}function setValueM4(at,st){const ot=this.cache,ut=st.elements;if(void 0===ut){if(arraysEqual(ot,st))return;at.uniformMatrix4fv(this.addr,!1,st),copyArray(ot,st)}else{if(arraysEqual(ot,ut))return;td.set(ut),at.uniformMatrix4fv(this.addr,!1,td),copyArray(ot,ut)}}function setValueV1i(at,st){const ot=this.cache;ot[0]!==st&&(at.uniform1i(this.addr,st),ot[0]=st)}function setValueV2i(at,st){const ot=this.cache;if(void 0!==st.x)ot[0]===st.x&&ot[1]===st.y||(at.uniform2i(this.addr,st.x,st.y),ot[0]=st.x,ot[1]=st.y);else{if(arraysEqual(ot,st))return;at.uniform2iv(this.addr,st),copyArray(ot,st)}}function setValueV3i(at,st){const ot=this.cache;if(void 0!==st.x)ot[0]===st.x&&ot[1]===st.y&&ot[2]===st.z||(at.uniform3i(this.addr,st.x,st.y,st.z),ot[0]=st.x,ot[1]=st.y,ot[2]=st.z);else{if(arraysEqual(ot,st))return;at.uniform3iv(this.addr,st),copyArray(ot,st)}}function setValueV4i(at,st){const ot=this.cache;if(void 0!==st.x)ot[0]===st.x&&ot[1]===st.y&&ot[2]===st.z&&ot[3]===st.w||(at.uniform4i(this.addr,st.x,st.y,st.z,st.w),ot[0]=st.x,ot[1]=st.y,ot[2]=st.z,ot[3]=st.w);else{if(arraysEqual(ot,st))return;at.uniform4iv(this.addr,st),copyArray(ot,st)}}function setValueV1ui(at,st){const ot=this.cache;ot[0]!==st&&(at.uniform1ui(this.addr,st),ot[0]=st)}function setValueV2ui(at,st){const ot=this.cache;if(void 0!==st.x)ot[0]===st.x&&ot[1]===st.y||(at.uniform2ui(this.addr,st.x,st.y),ot[0]=st.x,ot[1]=st.y);else{if(arraysEqual(ot,st))return;at.uniform2uiv(this.addr,st),copyArray(ot,st)}}function setValueV3ui(at,st){const ot=this.cache;if(void 0!==st.x)ot[0]===st.x&&ot[1]===st.y&&ot[2]===st.z||(at.uniform3ui(this.addr,st.x,st.y,st.z),ot[0]=st.x,ot[1]=st.y,ot[2]=st.z);else{if(arraysEqual(ot,st))return;at.uniform3uiv(this.addr,st),copyArray(ot,st)}}function setValueV4ui(at,st){const ot=this.cache;if(void 0!==st.x)ot[0]===st.x&&ot[1]===st.y&&ot[2]===st.z&&ot[3]===st.w||(at.uniform4ui(this.addr,st.x,st.y,st.z,st.w),ot[0]=st.x,ot[1]=st.y,ot[2]=st.z,ot[3]=st.w);else{if(arraysEqual(ot,st))return;at.uniform4uiv(this.addr,st),copyArray(ot,st)}}function setValueT1(at,st,ot){const Hl=this.cache,rc=ot.allocateTextureUnit();let sc;Hl[0]!==rc&&(at.uniform1i(this.addr,rc),Hl[0]=rc),this.type===at.SAMPLER_2D_SHADOW?(Su.compareFunction=ut.TiK,sc=Su):sc=xu,ot.setTexture2D(st||sc,rc)}function setValueT3D1(at,st,ot){const ut=this.cache,Hl=ot.allocateTextureUnit();ut[0]!==Hl&&(at.uniform1i(this.addr,Hl),ut[0]=Hl),ot.setTexture3D(st||Lu,Hl)}function setValueT6(at,st,ot){const ut=this.cache,Hl=ot.allocateTextureUnit();ut[0]!==Hl&&(at.uniform1i(this.addr,Hl),ut[0]=Hl),ot.setTextureCube(st||$u,Hl)}function setValueT2DArray1(at,st,ot){const ut=this.cache,Hl=ot.allocateTextureUnit();ut[0]!==Hl&&(at.uniform1i(this.addr,Hl),ut[0]=Hl),ot.setTexture2DArray(st||Du,Hl)}function setValueV1fArray(at,st){at.uniform1fv(this.addr,st)}function setValueV2fArray(at,st){const ot=flatten(st,this.size,2);at.uniform2fv(this.addr,ot)}function setValueV3fArray(at,st){const ot=flatten(st,this.size,3);at.uniform3fv(this.addr,ot)}function setValueV4fArray(at,st){const ot=flatten(st,this.size,4);at.uniform4fv(this.addr,ot)}function setValueM2Array(at,st){const ot=flatten(st,this.size,4);at.uniformMatrix2fv(this.addr,!1,ot)}function setValueM3Array(at,st){const ot=flatten(st,this.size,9);at.uniformMatrix3fv(this.addr,!1,ot)}function setValueM4Array(at,st){const ot=flatten(st,this.size,16);at.uniformMatrix4fv(this.addr,!1,ot)}function setValueV1iArray(at,st){at.uniform1iv(this.addr,st)}function setValueV2iArray(at,st){at.uniform2iv(this.addr,st)}function setValueV3iArray(at,st){at.uniform3iv(this.addr,st)}function setValueV4iArray(at,st){at.uniform4iv(this.addr,st)}function setValueV1uiArray(at,st){at.uniform1uiv(this.addr,st)}function setValueV2uiArray(at,st){at.uniform2uiv(this.addr,st)}function setValueV3uiArray(at,st){at.uniform3uiv(this.addr,st)}function setValueV4uiArray(at,st){at.uniform4uiv(this.addr,st)}function setValueT1Array(at,st,ot){const ut=this.cache,Hl=st.length,rc=allocTexUnits(ot,Hl);arraysEqual(ut,rc)||(at.uniform1iv(this.addr,rc),copyArray(ut,rc));for(let sc=0;sc!==Hl;++sc)ot.setTexture2D(st[sc]||xu,rc[sc])}function setValueT3DArray(at,st,ot){const ut=this.cache,Hl=st.length,rc=allocTexUnits(ot,Hl);arraysEqual(ut,rc)||(at.uniform1iv(this.addr,rc),copyArray(ut,rc));for(let sc=0;sc!==Hl;++sc)ot.setTexture3D(st[sc]||Lu,rc[sc])}function setValueT6Array(at,st,ot){const ut=this.cache,Hl=st.length,rc=allocTexUnits(ot,Hl);arraysEqual(ut,rc)||(at.uniform1iv(this.addr,rc),copyArray(ut,rc));for(let sc=0;sc!==Hl;++sc)ot.setTextureCube(st[sc]||$u,rc[sc])}function setValueT2DArrayArray(at,st,ot){const ut=this.cache,Hl=st.length,rc=allocTexUnits(ot,Hl);arraysEqual(ut,rc)||(at.uniform1iv(this.addr,rc),copyArray(ut,rc));for(let sc=0;sc!==Hl;++sc)ot.setTexture2DArray(st[sc]||Du,rc[sc])}class SingleUniform{constructor(at,st,ot){this.id=at,this.addr=ot,this.cache=[],this.type=st.type,this.setValue=function(at){switch(at){case 5126:return setValueV1f;case 35664:return setValueV2f;case 35665:return setValueV3f;case 35666:return setValueV4f;case 35674:return setValueM2;case 35675:return setValueM3;case 35676:return setValueM4;case 5124:case 35670:return setValueV1i;case 35667:case 35671:return setValueV2i;case 35668:case 35672:return setValueV3i;case 35669:case 35673:return setValueV4i;case 5125:return setValueV1ui;case 36294:return setValueV2ui;case 36295:return setValueV3ui;case 36296:return setValueV4ui;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1;case 35679:case 36299:case 36307:return setValueT3D1;case 35680:case 36300:case 36308:case 36293:return setValueT6;case 36289:case 36303:case 36311:case 36292:return setValueT2DArray1}}(st.type)}}class PureArrayUniform{constructor(at,st,ot){this.id=at,this.addr=ot,this.cache=[],this.type=st.type,this.size=st.size,this.setValue=function(at){switch(at){case 5126:return setValueV1fArray;case 35664:return setValueV2fArray;case 35665:return setValueV3fArray;case 35666:return setValueV4fArray;case 35674:return setValueM2Array;case 35675:return setValueM3Array;case 35676:return setValueM4Array;case 5124:case 35670:return setValueV1iArray;case 35667:case 35671:return setValueV2iArray;case 35668:case 35672:return setValueV3iArray;case 35669:case 35673:return setValueV4iArray;case 5125:return setValueV1uiArray;case 36294:return setValueV2uiArray;case 36295:return setValueV3uiArray;case 36296:return setValueV4uiArray;case 35678:case 36198:case 36298:case 36306:case 35682:return setValueT1Array;case 35679:case 36299:case 36307:return setValueT3DArray;case 35680:case 36300:case 36308:case 36293:return setValueT6Array;case 36289:case 36303:case 36311:case 36292:return setValueT2DArrayArray}}(st.type)}}class StructuredUniform{constructor(at){this.id=at,this.seq=[],this.map={}}setValue(at,st,ot){const ut=this.seq;for(let Hl=0,rc=ut.length;Hl!==rc;++Hl){const rc=ut[Hl];rc.setValue(at,st[rc.id],ot)}}}const rd=/(\w+)(\])?(\[|\.)?/g;function addUniform(at,st){at.seq.push(st),at.map[st.id]=st}function parseUniform(at,st,ot){const ut=at.name,Hl=ut.length;for(rd.lastIndex=0;;){const rc=rd.exec(ut),sc=rd.lastIndex;let oc=rc[1];const _c="]"===rc[2],wc=rc[3];if(_c&&(oc|=0),void 0===wc||"["===wc&&sc+2===Hl){addUniform(ot,void 0===wc?new SingleUniform(oc,at,st):new PureArrayUniform(oc,at,st));break}{let at=ot.map[oc];void 0===at&&(at=new StructuredUniform(oc),addUniform(ot,at)),ot=at}}}class WebGLUniforms{constructor(at,st){this.seq=[],this.map={};const ot=at.getProgramParameter(st,at.ACTIVE_UNIFORMS);for(let ut=0;ut<ot;++ut){const ot=at.getActiveUniform(st,ut);parseUniform(ot,at.getUniformLocation(st,ot.name),this)}}setValue(at,st,ot,ut){const Hl=this.map[st];void 0!==Hl&&Hl.setValue(at,ot,ut)}setOptional(at,st,ot){const ut=st[ot];void 0!==ut&&this.setValue(at,ot,ut)}static upload(at,st,ot,ut){for(let Hl=0,rc=st.length;Hl!==rc;++Hl){const rc=st[Hl],sc=ot[rc.id];!1!==sc.needsUpdate&&rc.setValue(at,sc.value,ut)}}static seqWithValue(at,st){const ot=[];for(let ut=0,Hl=at.length;ut!==Hl;++ut){const Hl=at[ut];Hl.id in st&&ot.push(Hl)}return ot}}function WebGLShader(at,st,ot){const ut=at.createShader(st);return at.shaderSource(ut,ot),at.compileShader(ut),ut}let ad=0;const sd=new ut.dwI;function getShaderErrors(at,st,ot){const ut=at.getShaderParameter(st,at.COMPILE_STATUS),Hl=(at.getShaderInfoLog(st)||"").trim();if(ut&&""===Hl)return"";const rc=/ERROR: 0:(\d+)/.exec(Hl);if(rc){const ut=parseInt(rc[1]);return ot.toUpperCase()+"\n\n"+Hl+"\n\n"+function(at,st){const ot=at.split("\n"),ut=[],Hl=Math.max(st-6,0),rc=Math.min(st+6,ot.length);for(let sc=Hl;sc<rc;sc++){const at=sc+1;ut.push(`${at===st?">":" "} ${at}: ${ot[sc]}`)}return ut.join("\n")}(at.getShaderSource(st),ut)}return Hl}function getTexelEncodingFunction(at,st){const ot=function(at){ut.ppV._getMatrix(sd,ut.ppV.workingColorSpace,at);const st=`mat3( ${sd.elements.map((at=>at.toFixed(4)))} )`;switch(ut.ppV.getTransfer(at)){case ut.VxR:return[st,"LinearTransferOETF"];case ut.KLL:return[st,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",at),[st,"LinearTransferOETF"]}}(st);return[`vec4 ${at}( vec4 value ) {`,`\treturn ${ot[1]}( vec4( value.rgb * ${ot[0]}, value.a ) );`,"}"].join("\n")}function getToneMappingFunction(at,st){let ot;switch(st){case ut.kyO:ot="Linear";break;case ut.Mjd:ot="Reinhard";break;case ut.nNL:ot="Cineon";break;case ut.FV:ot="ACESFilmic";break;case ut.LAk:ot="AgX";break;case ut.aJ8:ot="Neutral";break;case ut.g7M:ot="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",st),ot="Linear"}return"vec3 "+at+"( vec3 color ) { return "+ot+"ToneMapping( color ); }"}const od=new ut.Pq0;function getLuminanceFunction(){ut.ppV.getLuminanceCoefficients(od);return["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${od.x.toFixed(4)}, ${od.y.toFixed(4)}, ${od.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")}function filterEmptyLine(at){return""!==at}function replaceLightNums(at,st){const ot=st.numSpotLightShadows+st.numSpotLightMaps-st.numSpotLightShadowsWithMaps;return at.replace(/NUM_DIR_LIGHTS/g,st.numDirLights).replace(/NUM_SPOT_LIGHTS/g,st.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,st.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,ot).replace(/NUM_RECT_AREA_LIGHTS/g,st.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,st.numPointLights).replace(/NUM_HEMI_LIGHTS/g,st.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,st.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,st.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,st.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,st.numPointLightShadows)}function replaceClippingPlaneNums(at,st){return at.replace(/NUM_CLIPPING_PLANES/g,st.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,st.numClippingPlanes-st.numClipIntersection)}const ld=/^[ \t]*#include +<([\w\d./]+)>/gm;function resolveIncludes(at){return at.replace(ld,includeReplacer)}const cd=new Map;function includeReplacer(at,st){let ot=Hl[st];if(void 0===ot){const at=cd.get(st);if(void 0===at)throw new Error("Can not resolve #include <"+st+">");ot=Hl[at],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',st,at)}return resolveIncludes(ot)}const ud=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function unrollLoops(at){return at.replace(ud,loopReplacer)}function loopReplacer(at,st,ot,ut){let Hl="";for(let rc=parseInt(st);rc<parseInt(ot);rc++)Hl+=ut.replace(/\[\s*i\s*\]/g,"[ "+rc+" ]").replace(/UNROLLED_LOOP_INDEX/g,rc);return Hl}function generatePrecision(at){let st=`precision ${at.precision} float;\n\tprecision ${at.precision} int;\n\tprecision ${at.precision} sampler2D;\n\tprecision ${at.precision} samplerCube;\n\tprecision ${at.precision} sampler3D;\n\tprecision ${at.precision} sampler2DArray;\n\tprecision ${at.precision} sampler2DShadow;\n\tprecision ${at.precision} samplerCubeShadow;\n\tprecision ${at.precision} sampler2DArrayShadow;\n\tprecision ${at.precision} isampler2D;\n\tprecision ${at.precision} isampler3D;\n\tprecision ${at.precision} isamplerCube;\n\tprecision ${at.precision} isampler2DArray;\n\tprecision ${at.precision} usampler2D;\n\tprecision ${at.precision} usampler3D;\n\tprecision ${at.precision} usamplerCube;\n\tprecision ${at.precision} usampler2DArray;\n\t`;return"highp"===at.precision?st+="\n#define HIGH_PRECISION":"mediump"===at.precision?st+="\n#define MEDIUM_PRECISION":"lowp"===at.precision&&(st+="\n#define LOW_PRECISION"),st}function WebGLProgram(at,st,ot,rc){const sc=at.getContext(),oc=ot.defines;let _c=ot.vertexShader,wc=ot.fragmentShader;const Sc=function(at){let st="SHADOWMAP_TYPE_BASIC";return at.shadowMapType===ut.QP0?st="SHADOWMAP_TYPE_PCF":at.shadowMapType===ut.Wk7?st="SHADOWMAP_TYPE_PCF_SOFT":at.shadowMapType===ut.RyA&&(st="SHADOWMAP_TYPE_VSM"),st}(ot),iu=function(at){let st="ENVMAP_TYPE_CUBE";if(at.envMap)switch(at.envMapMode){case ut.hy7:case ut.xFO:st="ENVMAP_TYPE_CUBE";break;case ut.Om:st="ENVMAP_TYPE_CUBE_UV"}return st}(ot),su=function(at){let st="ENVMAP_MODE_REFLECTION";at.envMap&&at.envMapMode===ut.xFO&&(st="ENVMAP_MODE_REFRACTION");return st}(ot),lu=function(at){let st="ENVMAP_BLENDING_NONE";if(at.envMap)switch(at.combine){case ut.caT:st="ENVMAP_BLENDING_MULTIPLY";break;case ut.KRh:st="ENVMAP_BLENDING_MIX";break;case ut.XrR:st="ENVMAP_BLENDING_ADD"}return st}(ot),cu=function(at){const st=at.envMapCubeUVHeight;if(null===st)return null;const ot=Math.log2(st)-2,ut=1/st;return{texelWidth:1/(3*Math.max(Math.pow(2,ot),112)),texelHeight:ut,maxMip:ot}}(ot),uu=function(at){return[at.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",at.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(filterEmptyLine).join("\n")}(ot),pu=function(at){const st=[];for(const ot in at){const ut=at[ot];!1!==ut&&st.push("#define "+ot+" "+ut)}return st.join("\n")}(oc),mu=sc.createProgram();let gu,Au,yu=ot.glslVersion?"#version "+ot.glslVersion+"\n":"";ot.isRawShaderMaterial?(gu=["#define SHADER_TYPE "+ot.shaderType,"#define SHADER_NAME "+ot.shaderName,pu].filter(filterEmptyLine).join("\n"),gu.length>0&&(gu+="\n"),Au=["#define SHADER_TYPE "+ot.shaderType,"#define SHADER_NAME "+ot.shaderName,pu].filter(filterEmptyLine).join("\n"),Au.length>0&&(Au+="\n")):(gu=[generatePrecision(ot),"#define SHADER_TYPE "+ot.shaderType,"#define SHADER_NAME "+ot.shaderName,pu,ot.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",ot.batching?"#define USE_BATCHING":"",ot.batchingColor?"#define USE_BATCHING_COLOR":"",ot.instancing?"#define USE_INSTANCING":"",ot.instancingColor?"#define USE_INSTANCING_COLOR":"",ot.instancingMorph?"#define USE_INSTANCING_MORPH":"",ot.useFog&&ot.fog?"#define USE_FOG":"",ot.useFog&&ot.fogExp2?"#define FOG_EXP2":"",ot.map?"#define USE_MAP":"",ot.envMap?"#define USE_ENVMAP":"",ot.envMap?"#define "+su:"",ot.lightMap?"#define USE_LIGHTMAP":"",ot.aoMap?"#define USE_AOMAP":"",ot.bumpMap?"#define USE_BUMPMAP":"",ot.normalMap?"#define USE_NORMALMAP":"",ot.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",ot.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",ot.displacementMap?"#define USE_DISPLACEMENTMAP":"",ot.emissiveMap?"#define USE_EMISSIVEMAP":"",ot.anisotropy?"#define USE_ANISOTROPY":"",ot.anisotropyMap?"#define USE_ANISOTROPYMAP":"",ot.clearcoatMap?"#define USE_CLEARCOATMAP":"",ot.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",ot.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",ot.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",ot.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",ot.specularMap?"#define USE_SPECULARMAP":"",ot.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",ot.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",ot.roughnessMap?"#define USE_ROUGHNESSMAP":"",ot.metalnessMap?"#define USE_METALNESSMAP":"",ot.alphaMap?"#define USE_ALPHAMAP":"",ot.alphaHash?"#define USE_ALPHAHASH":"",ot.transmission?"#define USE_TRANSMISSION":"",ot.transmissionMap?"#define USE_TRANSMISSIONMAP":"",ot.thicknessMap?"#define USE_THICKNESSMAP":"",ot.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",ot.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",ot.mapUv?"#define MAP_UV "+ot.mapUv:"",ot.alphaMapUv?"#define ALPHAMAP_UV "+ot.alphaMapUv:"",ot.lightMapUv?"#define LIGHTMAP_UV "+ot.lightMapUv:"",ot.aoMapUv?"#define AOMAP_UV "+ot.aoMapUv:"",ot.emissiveMapUv?"#define EMISSIVEMAP_UV "+ot.emissiveMapUv:"",ot.bumpMapUv?"#define BUMPMAP_UV "+ot.bumpMapUv:"",ot.normalMapUv?"#define NORMALMAP_UV "+ot.normalMapUv:"",ot.displacementMapUv?"#define DISPLACEMENTMAP_UV "+ot.displacementMapUv:"",ot.metalnessMapUv?"#define METALNESSMAP_UV "+ot.metalnessMapUv:"",ot.roughnessMapUv?"#define ROUGHNESSMAP_UV "+ot.roughnessMapUv:"",ot.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+ot.anisotropyMapUv:"",ot.clearcoatMapUv?"#define CLEARCOATMAP_UV "+ot.clearcoatMapUv:"",ot.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+ot.clearcoatNormalMapUv:"",ot.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+ot.clearcoatRoughnessMapUv:"",ot.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+ot.iridescenceMapUv:"",ot.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+ot.iridescenceThicknessMapUv:"",ot.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+ot.sheenColorMapUv:"",ot.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+ot.sheenRoughnessMapUv:"",ot.specularMapUv?"#define SPECULARMAP_UV "+ot.specularMapUv:"",ot.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+ot.specularColorMapUv:"",ot.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+ot.specularIntensityMapUv:"",ot.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+ot.transmissionMapUv:"",ot.thicknessMapUv?"#define THICKNESSMAP_UV "+ot.thicknessMapUv:"",ot.vertexTangents&&!1===ot.flatShading?"#define USE_TANGENT":"",ot.vertexColors?"#define USE_COLOR":"",ot.vertexAlphas?"#define USE_COLOR_ALPHA":"",ot.vertexUv1s?"#define USE_UV1":"",ot.vertexUv2s?"#define USE_UV2":"",ot.vertexUv3s?"#define USE_UV3":"",ot.pointsUvs?"#define USE_POINTS_UV":"",ot.flatShading?"#define FLAT_SHADED":"",ot.skinning?"#define USE_SKINNING":"",ot.morphTargets?"#define USE_MORPHTARGETS":"",ot.morphNormals&&!1===ot.flatShading?"#define USE_MORPHNORMALS":"",ot.morphColors?"#define USE_MORPHCOLORS":"",ot.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+ot.morphTextureStride:"",ot.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+ot.morphTargetsCount:"",ot.doubleSided?"#define DOUBLE_SIDED":"",ot.flipSided?"#define FLIP_SIDED":"",ot.shadowMapEnabled?"#define USE_SHADOWMAP":"",ot.shadowMapEnabled?"#define "+Sc:"",ot.sizeAttenuation?"#define USE_SIZEATTENUATION":"",ot.numLightProbes>0?"#define USE_LIGHT_PROBES":"",ot.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",ot.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(filterEmptyLine).join("\n"),Au=[generatePrecision(ot),"#define SHADER_TYPE "+ot.shaderType,"#define SHADER_NAME "+ot.shaderName,pu,ot.useFog&&ot.fog?"#define USE_FOG":"",ot.useFog&&ot.fogExp2?"#define FOG_EXP2":"",ot.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",ot.map?"#define USE_MAP":"",ot.matcap?"#define USE_MATCAP":"",ot.envMap?"#define USE_ENVMAP":"",ot.envMap?"#define "+iu:"",ot.envMap?"#define "+su:"",ot.envMap?"#define "+lu:"",cu?"#define CUBEUV_TEXEL_WIDTH "+cu.texelWidth:"",cu?"#define CUBEUV_TEXEL_HEIGHT "+cu.texelHeight:"",cu?"#define CUBEUV_MAX_MIP "+cu.maxMip+".0":"",ot.lightMap?"#define USE_LIGHTMAP":"",ot.aoMap?"#define USE_AOMAP":"",ot.bumpMap?"#define USE_BUMPMAP":"",ot.normalMap?"#define USE_NORMALMAP":"",ot.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",ot.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",ot.emissiveMap?"#define USE_EMISSIVEMAP":"",ot.anisotropy?"#define USE_ANISOTROPY":"",ot.anisotropyMap?"#define USE_ANISOTROPYMAP":"",ot.clearcoat?"#define USE_CLEARCOAT":"",ot.clearcoatMap?"#define USE_CLEARCOATMAP":"",ot.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",ot.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",ot.dispersion?"#define USE_DISPERSION":"",ot.iridescence?"#define USE_IRIDESCENCE":"",ot.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",ot.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",ot.specularMap?"#define USE_SPECULARMAP":"",ot.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",ot.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",ot.roughnessMap?"#define USE_ROUGHNESSMAP":"",ot.metalnessMap?"#define USE_METALNESSMAP":"",ot.alphaMap?"#define USE_ALPHAMAP":"",ot.alphaTest?"#define USE_ALPHATEST":"",ot.alphaHash?"#define USE_ALPHAHASH":"",ot.sheen?"#define USE_SHEEN":"",ot.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",ot.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",ot.transmission?"#define USE_TRANSMISSION":"",ot.transmissionMap?"#define USE_TRANSMISSIONMAP":"",ot.thicknessMap?"#define USE_THICKNESSMAP":"",ot.vertexTangents&&!1===ot.flatShading?"#define USE_TANGENT":"",ot.vertexColors||ot.instancingColor||ot.batchingColor?"#define USE_COLOR":"",ot.vertexAlphas?"#define USE_COLOR_ALPHA":"",ot.vertexUv1s?"#define USE_UV1":"",ot.vertexUv2s?"#define USE_UV2":"",ot.vertexUv3s?"#define USE_UV3":"",ot.pointsUvs?"#define USE_POINTS_UV":"",ot.gradientMap?"#define USE_GRADIENTMAP":"",ot.flatShading?"#define FLAT_SHADED":"",ot.doubleSided?"#define DOUBLE_SIDED":"",ot.flipSided?"#define FLIP_SIDED":"",ot.shadowMapEnabled?"#define USE_SHADOWMAP":"",ot.shadowMapEnabled?"#define "+Sc:"",ot.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",ot.numLightProbes>0?"#define USE_LIGHT_PROBES":"",ot.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",ot.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",ot.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",ot.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",ot.toneMapping!==ut.y_p?"#define TONE_MAPPING":"",ot.toneMapping!==ut.y_p?Hl.tonemapping_pars_fragment:"",ot.toneMapping!==ut.y_p?getToneMappingFunction("toneMapping",ot.toneMapping):"",ot.dithering?"#define DITHERING":"",ot.opaque?"#define OPAQUE":"",Hl.colorspace_pars_fragment,getTexelEncodingFunction("linearToOutputTexel",ot.outputColorSpace),getLuminanceFunction(),ot.useDepthPacking?"#define DEPTH_PACKING "+ot.depthPacking:"","\n"].filter(filterEmptyLine).join("\n")),_c=resolveIncludes(_c),_c=replaceLightNums(_c,ot),_c=replaceClippingPlaneNums(_c,ot),wc=resolveIncludes(wc),wc=replaceLightNums(wc,ot),wc=replaceClippingPlaneNums(wc,ot),_c=unrollLoops(_c),wc=unrollLoops(wc),!0!==ot.isRawShaderMaterial&&(yu="#version 300 es\n",gu=[uu,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+gu,Au=["#define varying in",ot.glslVersion===ut.Wdf?"":"layout(location = 0) out highp vec4 pc_fragColor;",ot.glslVersion===ut.Wdf?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+Au);const _u=yu+gu+_c,xu=yu+Au+wc,Su=WebGLShader(sc,sc.VERTEX_SHADER,_u),Du=WebGLShader(sc,sc.FRAGMENT_SHADER,xu);function onFirstUse(st){if(at.debug.checkShaderErrors){const ot=sc.getProgramInfoLog(mu)||"",ut=sc.getShaderInfoLog(Su)||"",Hl=sc.getShaderInfoLog(Du)||"",rc=ot.trim(),oc=ut.trim(),_c=Hl.trim();let wc=!0,Sc=!0;if(!1===sc.getProgramParameter(mu,sc.LINK_STATUS))if(wc=!1,"function"===typeof at.debug.onShaderError)at.debug.onShaderError(sc,mu,Su,Du);else{const at=getShaderErrors(sc,Su,"vertex"),ot=getShaderErrors(sc,Du,"fragment");console.error("THREE.WebGLProgram: Shader Error "+sc.getError()+" - VALIDATE_STATUS "+sc.getProgramParameter(mu,sc.VALIDATE_STATUS)+"\n\nMaterial Name: "+st.name+"\nMaterial Type: "+st.type+"\n\nProgram Info Log: "+rc+"\n"+at+"\n"+ot)}else""!==rc?console.warn("THREE.WebGLProgram: Program Info Log:",rc):""!==oc&&""!==_c||(Sc=!1);Sc&&(st.diagnostics={runnable:wc,programLog:rc,vertexShader:{log:oc,prefix:gu},fragmentShader:{log:_c,prefix:Au}})}sc.deleteShader(Su),sc.deleteShader(Du),Lu=new WebGLUniforms(sc,mu),$u=function(at,st){const ot={},ut=at.getProgramParameter(st,at.ACTIVE_ATTRIBUTES);for(let Hl=0;Hl<ut;Hl++){const ut=at.getActiveAttrib(st,Hl),rc=ut.name;let sc=1;ut.type===at.FLOAT_MAT2&&(sc=2),ut.type===at.FLOAT_MAT3&&(sc=3),ut.type===at.FLOAT_MAT4&&(sc=4),ot[rc]={type:ut.type,location:at.getAttribLocation(st,rc),locationSize:sc}}return ot}(sc,mu)}let Lu,$u;sc.attachShader(mu,Su),sc.attachShader(mu,Du),void 0!==ot.index0AttributeName?sc.bindAttribLocation(mu,0,ot.index0AttributeName):!0===ot.morphTargets&&sc.bindAttribLocation(mu,0,"position"),sc.linkProgram(mu),this.getUniforms=function(){return void 0===Lu&&onFirstUse(this),Lu},this.getAttributes=function(){return void 0===$u&&onFirstUse(this),$u};let hh=!1===ot.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===hh&&(hh=sc.getProgramParameter(mu,37297)),hh},this.destroy=function(){rc.releaseStatesOfProgram(this),sc.deleteProgram(mu),this.program=void 0},this.type=ot.shaderType,this.name=ot.shaderName,this.id=ad++,this.cacheKey=st,this.usedTimes=1,this.program=mu,this.vertexShader=Su,this.fragmentShader=Du,this}let hd=0;class WebGLShaderCache{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(at){const st=at.vertexShader,ot=at.fragmentShader,ut=this._getShaderStage(st),Hl=this._getShaderStage(ot),rc=this._getShaderCacheForMaterial(at);return!1===rc.has(ut)&&(rc.add(ut),ut.usedTimes++),!1===rc.has(Hl)&&(rc.add(Hl),Hl.usedTimes++),this}remove(at){const st=this.materialCache.get(at);for(const ot of st)ot.usedTimes--,0===ot.usedTimes&&this.shaderCache.delete(ot.code);return this.materialCache.delete(at),this}getVertexShaderID(at){return this._getShaderStage(at.vertexShader).id}getFragmentShaderID(at){return this._getShaderStage(at.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(at){const st=this.materialCache;let ot=st.get(at);return void 0===ot&&(ot=new Set,st.set(at,ot)),ot}_getShaderStage(at){const st=this.shaderCache;let ot=st.get(at);return void 0===ot&&(ot=new WebGLShaderStage(at),st.set(at,ot)),ot}}class WebGLShaderStage{constructor(at){this.id=hd++,this.code=at,this.usedTimes=0}}function WebGLPrograms(at,st,ot,Hl,rc,oc,_c){const wc=new ut.zgK,Sc=new WebGLShaderCache,iu=new Set,su=[],lu=rc.logarithmicDepthBuffer,cu=rc.vertexTextures;let uu=rc.precision;const pu={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function getChannel(at){return iu.add(at),0===at?"uv":`uv${at}`}return{getParameters:function(oc,wc,su,mu,gu){const Au=mu.fog,yu=gu.geometry,_u=oc.isMeshStandardMaterial?mu.environment:null,xu=(oc.isMeshStandardMaterial?ot:st).get(oc.envMap||_u),Su=xu&&xu.mapping===ut.Om?xu.image.height:null,Du=pu[oc.type];null!==oc.precision&&(uu=rc.getMaxPrecision(oc.precision),uu!==oc.precision&&console.warn("THREE.WebGLProgram.getParameters:",oc.precision,"not supported, using",uu,"instead."));const Lu=yu.morphAttributes.position||yu.morphAttributes.normal||yu.morphAttributes.color,$u=void 0!==Lu?Lu.length:0;let hh,ed,td,id,nd=0;if(void 0!==yu.morphAttributes.position&&(nd=1),void 0!==yu.morphAttributes.normal&&(nd=2),void 0!==yu.morphAttributes.color&&(nd=3),Du){const at=sc[Du];hh=at.vertexShader,ed=at.fragmentShader}else hh=oc.vertexShader,ed=oc.fragmentShader,Sc.update(oc),td=Sc.getVertexShaderID(oc),id=Sc.getFragmentShaderID(oc);const rd=at.getRenderTarget(),ad=at.state.buffers.depth.getReversed(),sd=!0===gu.isInstancedMesh,od=!0===gu.isBatchedMesh,ld=!!oc.map,cd=!!oc.matcap,ud=!!xu,hd=!!oc.aoMap,dd=!!oc.lightMap,pd=!!oc.bumpMap,md=!!oc.normalMap,gd=!!oc.displacementMap,fd=!!oc.emissiveMap,Ad=!!oc.metalnessMap,yd=!!oc.roughnessMap,vd=oc.anisotropy>0,_d=oc.clearcoat>0,xd=oc.dispersion>0,bd=oc.iridescence>0,wd=oc.sheen>0,Ed=oc.transmission>0,Md=vd&&!!oc.anisotropyMap,Sd=_d&&!!oc.clearcoatMap,Td=_d&&!!oc.clearcoatNormalMap,Cd=_d&&!!oc.clearcoatRoughnessMap,kd=bd&&!!oc.iridescenceMap,Id=bd&&!!oc.iridescenceThicknessMap,Dd=wd&&!!oc.sheenColorMap,Ld=wd&&!!oc.sheenRoughnessMap,Pd=!!oc.specularMap,zd=!!oc.specularColorMap,Nd=!!oc.specularIntensityMap,Rd=Ed&&!!oc.transmissionMap,Od=Ed&&!!oc.thicknessMap,Bd=!!oc.gradientMap,Fd=!!oc.alphaMap,jd=oc.alphaTest>0,Ud=!!oc.alphaHash,Vd=!!oc.extensions;let Gd=ut.y_p;oc.toneMapped&&(null!==rd&&!0!==rd.isXRRenderTarget||(Gd=at.toneMapping));const Zd={shaderID:Du,shaderType:oc.type,shaderName:oc.name,vertexShader:hh,fragmentShader:ed,defines:oc.defines,customVertexShaderID:td,customFragmentShaderID:id,isRawShaderMaterial:!0===oc.isRawShaderMaterial,glslVersion:oc.glslVersion,precision:uu,batching:od,batchingColor:od&&null!==gu._colorsTexture,instancing:sd,instancingColor:sd&&null!==gu.instanceColor,instancingMorph:sd&&null!==gu.morphTexture,supportsVertexTextures:cu,outputColorSpace:null===rd?at.outputColorSpace:!0===rd.isXRRenderTarget?rd.texture.colorSpace:ut.Zr2,alphaToCoverage:!!oc.alphaToCoverage,map:ld,matcap:cd,envMap:ud,envMapMode:ud&&xu.mapping,envMapCubeUVHeight:Su,aoMap:hd,lightMap:dd,bumpMap:pd,normalMap:md,displacementMap:cu&&gd,emissiveMap:fd,normalMapObjectSpace:md&&oc.normalMapType===ut.vyJ,normalMapTangentSpace:md&&oc.normalMapType===ut.bI3,metalnessMap:Ad,roughnessMap:yd,anisotropy:vd,anisotropyMap:Md,clearcoat:_d,clearcoatMap:Sd,clearcoatNormalMap:Td,clearcoatRoughnessMap:Cd,dispersion:xd,iridescence:bd,iridescenceMap:kd,iridescenceThicknessMap:Id,sheen:wd,sheenColorMap:Dd,sheenRoughnessMap:Ld,specularMap:Pd,specularColorMap:zd,specularIntensityMap:Nd,transmission:Ed,transmissionMap:Rd,thicknessMap:Od,gradientMap:Bd,opaque:!1===oc.transparent&&oc.blending===ut.NTi&&!1===oc.alphaToCoverage,alphaMap:Fd,alphaTest:jd,alphaHash:Ud,combine:oc.combine,mapUv:ld&&getChannel(oc.map.channel),aoMapUv:hd&&getChannel(oc.aoMap.channel),lightMapUv:dd&&getChannel(oc.lightMap.channel),bumpMapUv:pd&&getChannel(oc.bumpMap.channel),normalMapUv:md&&getChannel(oc.normalMap.channel),displacementMapUv:gd&&getChannel(oc.displacementMap.channel),emissiveMapUv:fd&&getChannel(oc.emissiveMap.channel),metalnessMapUv:Ad&&getChannel(oc.metalnessMap.channel),roughnessMapUv:yd&&getChannel(oc.roughnessMap.channel),anisotropyMapUv:Md&&getChannel(oc.anisotropyMap.channel),clearcoatMapUv:Sd&&getChannel(oc.clearcoatMap.channel),clearcoatNormalMapUv:Td&&getChannel(oc.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Cd&&getChannel(oc.clearcoatRoughnessMap.channel),iridescenceMapUv:kd&&getChannel(oc.iridescenceMap.channel),iridescenceThicknessMapUv:Id&&getChannel(oc.iridescenceThicknessMap.channel),sheenColorMapUv:Dd&&getChannel(oc.sheenColorMap.channel),sheenRoughnessMapUv:Ld&&getChannel(oc.sheenRoughnessMap.channel),specularMapUv:Pd&&getChannel(oc.specularMap.channel),specularColorMapUv:zd&&getChannel(oc.specularColorMap.channel),specularIntensityMapUv:Nd&&getChannel(oc.specularIntensityMap.channel),transmissionMapUv:Rd&&getChannel(oc.transmissionMap.channel),thicknessMapUv:Od&&getChannel(oc.thicknessMap.channel),alphaMapUv:Fd&&getChannel(oc.alphaMap.channel),vertexTangents:!!yu.attributes.tangent&&(md||vd),vertexColors:oc.vertexColors,vertexAlphas:!0===oc.vertexColors&&!!yu.attributes.color&&4===yu.attributes.color.itemSize,pointsUvs:!0===gu.isPoints&&!!yu.attributes.uv&&(ld||Fd),fog:!!Au,useFog:!0===oc.fog,fogExp2:!!Au&&Au.isFogExp2,flatShading:!0===oc.flatShading&&!1===oc.wireframe,sizeAttenuation:!0===oc.sizeAttenuation,logarithmicDepthBuffer:lu,reversedDepthBuffer:ad,skinning:!0===gu.isSkinnedMesh,morphTargets:void 0!==yu.morphAttributes.position,morphNormals:void 0!==yu.morphAttributes.normal,morphColors:void 0!==yu.morphAttributes.color,morphTargetsCount:$u,morphTextureStride:nd,numDirLights:wc.directional.length,numPointLights:wc.point.length,numSpotLights:wc.spot.length,numSpotLightMaps:wc.spotLightMap.length,numRectAreaLights:wc.rectArea.length,numHemiLights:wc.hemi.length,numDirLightShadows:wc.directionalShadowMap.length,numPointLightShadows:wc.pointShadowMap.length,numSpotLightShadows:wc.spotShadowMap.length,numSpotLightShadowsWithMaps:wc.numSpotLightShadowsWithMaps,numLightProbes:wc.numLightProbes,numClippingPlanes:_c.numPlanes,numClipIntersection:_c.numIntersection,dithering:oc.dithering,shadowMapEnabled:at.shadowMap.enabled&&su.length>0,shadowMapType:at.shadowMap.type,toneMapping:Gd,decodeVideoTexture:ld&&!0===oc.map.isVideoTexture&&ut.ppV.getTransfer(oc.map.colorSpace)===ut.KLL,decodeVideoTextureEmissive:fd&&!0===oc.emissiveMap.isVideoTexture&&ut.ppV.getTransfer(oc.emissiveMap.colorSpace)===ut.KLL,premultipliedAlpha:oc.premultipliedAlpha,doubleSided:oc.side===ut.$EB,flipSided:oc.side===ut.hsX,useDepthPacking:oc.depthPacking>=0,depthPacking:oc.depthPacking||0,index0AttributeName:oc.index0AttributeName,extensionClipCullDistance:Vd&&!0===oc.extensions.clipCullDistance&&Hl.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Vd&&!0===oc.extensions.multiDraw||od)&&Hl.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:Hl.has("KHR_parallel_shader_compile"),customProgramCacheKey:oc.customProgramCacheKey()};return Zd.vertexUv1s=iu.has(1),Zd.vertexUv2s=iu.has(2),Zd.vertexUv3s=iu.has(3),iu.clear(),Zd},getProgramCacheKey:function(st){const ot=[];if(st.shaderID?ot.push(st.shaderID):(ot.push(st.customVertexShaderID),ot.push(st.customFragmentShaderID)),void 0!==st.defines)for(const at in st.defines)ot.push(at),ot.push(st.defines[at]);return!1===st.isRawShaderMaterial&&(!function(at,st){at.push(st.precision),at.push(st.outputColorSpace),at.push(st.envMapMode),at.push(st.envMapCubeUVHeight),at.push(st.mapUv),at.push(st.alphaMapUv),at.push(st.lightMapUv),at.push(st.aoMapUv),at.push(st.bumpMapUv),at.push(st.normalMapUv),at.push(st.displacementMapUv),at.push(st.emissiveMapUv),at.push(st.metalnessMapUv),at.push(st.roughnessMapUv),at.push(st.anisotropyMapUv),at.push(st.clearcoatMapUv),at.push(st.clearcoatNormalMapUv),at.push(st.clearcoatRoughnessMapUv),at.push(st.iridescenceMapUv),at.push(st.iridescenceThicknessMapUv),at.push(st.sheenColorMapUv),at.push(st.sheenRoughnessMapUv),at.push(st.specularMapUv),at.push(st.specularColorMapUv),at.push(st.specularIntensityMapUv),at.push(st.transmissionMapUv),at.push(st.thicknessMapUv),at.push(st.combine),at.push(st.fogExp2),at.push(st.sizeAttenuation),at.push(st.morphTargetsCount),at.push(st.morphAttributeCount),at.push(st.numDirLights),at.push(st.numPointLights),at.push(st.numSpotLights),at.push(st.numSpotLightMaps),at.push(st.numHemiLights),at.push(st.numRectAreaLights),at.push(st.numDirLightShadows),at.push(st.numPointLightShadows),at.push(st.numSpotLightShadows),at.push(st.numSpotLightShadowsWithMaps),at.push(st.numLightProbes),at.push(st.shadowMapType),at.push(st.toneMapping),at.push(st.numClippingPlanes),at.push(st.numClipIntersection),at.push(st.depthPacking)}(ot,st),function(at,st){wc.disableAll(),st.supportsVertexTextures&&wc.enable(0);st.instancing&&wc.enable(1);st.instancingColor&&wc.enable(2);st.instancingMorph&&wc.enable(3);st.matcap&&wc.enable(4);st.envMap&&wc.enable(5);st.normalMapObjectSpace&&wc.enable(6);st.normalMapTangentSpace&&wc.enable(7);st.clearcoat&&wc.enable(8);st.iridescence&&wc.enable(9);st.alphaTest&&wc.enable(10);st.vertexColors&&wc.enable(11);st.vertexAlphas&&wc.enable(12);st.vertexUv1s&&wc.enable(13);st.vertexUv2s&&wc.enable(14);st.vertexUv3s&&wc.enable(15);st.vertexTangents&&wc.enable(16);st.anisotropy&&wc.enable(17);st.alphaHash&&wc.enable(18);st.batching&&wc.enable(19);st.dispersion&&wc.enable(20);st.batchingColor&&wc.enable(21);st.gradientMap&&wc.enable(22);at.push(wc.mask),wc.disableAll(),st.fog&&wc.enable(0);st.useFog&&wc.enable(1);st.flatShading&&wc.enable(2);st.logarithmicDepthBuffer&&wc.enable(3);st.reversedDepthBuffer&&wc.enable(4);st.skinning&&wc.enable(5);st.morphTargets&&wc.enable(6);st.morphNormals&&wc.enable(7);st.morphColors&&wc.enable(8);st.premultipliedAlpha&&wc.enable(9);st.shadowMapEnabled&&wc.enable(10);st.doubleSided&&wc.enable(11);st.flipSided&&wc.enable(12);st.useDepthPacking&&wc.enable(13);st.dithering&&wc.enable(14);st.transmission&&wc.enable(15);st.sheen&&wc.enable(16);st.opaque&&wc.enable(17);st.pointsUvs&&wc.enable(18);st.decodeVideoTexture&&wc.enable(19);st.decodeVideoTextureEmissive&&wc.enable(20);st.alphaToCoverage&&wc.enable(21);at.push(wc.mask)}(ot,st),ot.push(at.outputColorSpace)),ot.push(st.customProgramCacheKey),ot.join()},getUniforms:function(at){const st=pu[at.type];let ot;if(st){const at=sc[st];ot=ut.LlO.clone(at.uniforms)}else ot=at.uniforms;return ot},acquireProgram:function(st,ot){let ut;for(let at=0,Hl=su.length;at<Hl;at++){const st=su[at];if(st.cacheKey===ot){ut=st,++ut.usedTimes;break}}return void 0===ut&&(ut=new WebGLProgram(at,ot,st,oc),su.push(ut)),ut},releaseProgram:function(at){if(0===--at.usedTimes){const st=su.indexOf(at);su[st]=su[su.length-1],su.pop(),at.destroy()}},releaseShaderCache:function(at){Sc.remove(at)},programs:su,dispose:function(){Sc.dispose()}}}function WebGLProperties(){let at=new WeakMap;return{has:function(st){return at.has(st)},get:function(st){let ot=at.get(st);return void 0===ot&&(ot={},at.set(st,ot)),ot},remove:function(st){at.delete(st)},update:function(st,ot,ut){at.get(st)[ot]=ut},dispose:function(){at=new WeakMap}}}function painterSortStable(at,st){return at.groupOrder!==st.groupOrder?at.groupOrder-st.groupOrder:at.renderOrder!==st.renderOrder?at.renderOrder-st.renderOrder:at.material.id!==st.material.id?at.material.id-st.material.id:at.z!==st.z?at.z-st.z:at.id-st.id}function reversePainterSortStable(at,st){return at.groupOrder!==st.groupOrder?at.groupOrder-st.groupOrder:at.renderOrder!==st.renderOrder?at.renderOrder-st.renderOrder:at.z!==st.z?st.z-at.z:at.id-st.id}function WebGLRenderList(){const at=[];let st=0;const ot=[],ut=[],Hl=[];function getNextRenderItem(ot,ut,Hl,rc,sc,oc){let _c=at[st];return void 0===_c?(_c={id:ot.id,object:ot,geometry:ut,material:Hl,groupOrder:rc,renderOrder:ot.renderOrder,z:sc,group:oc},at[st]=_c):(_c.id=ot.id,_c.object=ot,_c.geometry=ut,_c.material=Hl,_c.groupOrder=rc,_c.renderOrder=ot.renderOrder,_c.z=sc,_c.group=oc),st++,_c}return{opaque:ot,transmissive:ut,transparent:Hl,init:function(){st=0,ot.length=0,ut.length=0,Hl.length=0},push:function(at,st,rc,sc,oc,_c){const wc=getNextRenderItem(at,st,rc,sc,oc,_c);rc.transmission>0?ut.push(wc):!0===rc.transparent?Hl.push(wc):ot.push(wc)},unshift:function(at,st,rc,sc,oc,_c){const wc=getNextRenderItem(at,st,rc,sc,oc,_c);rc.transmission>0?ut.unshift(wc):!0===rc.transparent?Hl.unshift(wc):ot.unshift(wc)},finish:function(){for(let ot=st,ut=at.length;ot<ut;ot++){const st=at[ot];if(null===st.id)break;st.id=null,st.object=null,st.geometry=null,st.material=null,st.group=null}},sort:function(at,st){ot.length>1&&ot.sort(at||painterSortStable),ut.length>1&&ut.sort(st||reversePainterSortStable),Hl.length>1&&Hl.sort(st||reversePainterSortStable)}}}function WebGLRenderLists(){let at=new WeakMap;return{get:function(st,ot){const ut=at.get(st);let Hl;return void 0===ut?(Hl=new WebGLRenderList,at.set(st,[Hl])):ot>=ut.length?(Hl=new WebGLRenderList,ut.push(Hl)):Hl=ut[ot],Hl},dispose:function(){at=new WeakMap}}}function UniformsCache(){const at={};return{get:function(st){if(void 0!==at[st.id])return at[st.id];let ot;switch(st.type){case"DirectionalLight":ot={direction:new ut.Pq0,color:new ut.Q1f};break;case"SpotLight":ot={position:new ut.Pq0,direction:new ut.Pq0,color:new ut.Q1f,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":ot={position:new ut.Pq0,color:new ut.Q1f,distance:0,decay:0};break;case"HemisphereLight":ot={direction:new ut.Pq0,skyColor:new ut.Q1f,groundColor:new ut.Q1f};break;case"RectAreaLight":ot={color:new ut.Q1f,position:new ut.Pq0,halfWidth:new ut.Pq0,halfHeight:new ut.Pq0}}return at[st.id]=ot,ot}}}let dd=0;function shadowCastingAndTexturingLightsFirst(at,st){return(st.castShadow?2:0)-(at.castShadow?2:0)+(st.map?1:0)-(at.map?1:0)}function WebGLLights(at){const st=new UniformsCache,ot=function(){const at={};return{get:function(st){if(void 0!==at[st.id])return at[st.id];let ot;switch(st.type){case"DirectionalLight":case"SpotLight":ot={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ut.I9Y};break;case"PointLight":ot={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new ut.I9Y,shadowCameraNear:1,shadowCameraFar:1e3}}return at[st.id]=ot,ot}}}(),Hl={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let rc=0;rc<9;rc++)Hl.probe.push(new ut.Pq0);const sc=new ut.Pq0,oc=new ut.kn4,_c=new ut.kn4;return{setup:function(ut){let sc=0,oc=0,_c=0;for(let at=0;at<9;at++)Hl.probe[at].set(0,0,0);let wc=0,Sc=0,iu=0,su=0,lu=0,cu=0,uu=0,pu=0,mu=0,gu=0,Au=0;ut.sort(shadowCastingAndTexturingLightsFirst);for(let at=0,rc=ut.length;at<rc;at++){const rc=ut[at],yu=rc.color,_u=rc.intensity,xu=rc.distance,Su=rc.shadow&&rc.shadow.map?rc.shadow.map.texture:null;if(rc.isAmbientLight)sc+=yu.r*_u,oc+=yu.g*_u,_c+=yu.b*_u;else if(rc.isLightProbe){for(let at=0;at<9;at++)Hl.probe[at].addScaledVector(rc.sh.coefficients[at],_u);Au++}else if(rc.isDirectionalLight){const at=st.get(rc);if(at.color.copy(rc.color).multiplyScalar(rc.intensity),rc.castShadow){const at=rc.shadow,st=ot.get(rc);st.shadowIntensity=at.intensity,st.shadowBias=at.bias,st.shadowNormalBias=at.normalBias,st.shadowRadius=at.radius,st.shadowMapSize=at.mapSize,Hl.directionalShadow[wc]=st,Hl.directionalShadowMap[wc]=Su,Hl.directionalShadowMatrix[wc]=rc.shadow.matrix,cu++}Hl.directional[wc]=at,wc++}else if(rc.isSpotLight){const at=st.get(rc);at.position.setFromMatrixPosition(rc.matrixWorld),at.color.copy(yu).multiplyScalar(_u),at.distance=xu,at.coneCos=Math.cos(rc.angle),at.penumbraCos=Math.cos(rc.angle*(1-rc.penumbra)),at.decay=rc.decay,Hl.spot[iu]=at;const ut=rc.shadow;if(rc.map&&(Hl.spotLightMap[mu]=rc.map,mu++,ut.updateMatrices(rc),rc.castShadow&&gu++),Hl.spotLightMatrix[iu]=ut.matrix,rc.castShadow){const at=ot.get(rc);at.shadowIntensity=ut.intensity,at.shadowBias=ut.bias,at.shadowNormalBias=ut.normalBias,at.shadowRadius=ut.radius,at.shadowMapSize=ut.mapSize,Hl.spotShadow[iu]=at,Hl.spotShadowMap[iu]=Su,pu++}iu++}else if(rc.isRectAreaLight){const at=st.get(rc);at.color.copy(yu).multiplyScalar(_u),at.halfWidth.set(.5*rc.width,0,0),at.halfHeight.set(0,.5*rc.height,0),Hl.rectArea[su]=at,su++}else if(rc.isPointLight){const at=st.get(rc);if(at.color.copy(rc.color).multiplyScalar(rc.intensity),at.distance=rc.distance,at.decay=rc.decay,rc.castShadow){const at=rc.shadow,st=ot.get(rc);st.shadowIntensity=at.intensity,st.shadowBias=at.bias,st.shadowNormalBias=at.normalBias,st.shadowRadius=at.radius,st.shadowMapSize=at.mapSize,st.shadowCameraNear=at.camera.near,st.shadowCameraFar=at.camera.far,Hl.pointShadow[Sc]=st,Hl.pointShadowMap[Sc]=Su,Hl.pointShadowMatrix[Sc]=rc.shadow.matrix,uu++}Hl.point[Sc]=at,Sc++}else if(rc.isHemisphereLight){const at=st.get(rc);at.skyColor.copy(rc.color).multiplyScalar(_u),at.groundColor.copy(rc.groundColor).multiplyScalar(_u),Hl.hemi[lu]=at,lu++}}su>0&&(!0===at.has("OES_texture_float_linear")?(Hl.rectAreaLTC1=rc.LTC_FLOAT_1,Hl.rectAreaLTC2=rc.LTC_FLOAT_2):(Hl.rectAreaLTC1=rc.LTC_HALF_1,Hl.rectAreaLTC2=rc.LTC_HALF_2)),Hl.ambient[0]=sc,Hl.ambient[1]=oc,Hl.ambient[2]=_c;const yu=Hl.hash;yu.directionalLength===wc&&yu.pointLength===Sc&&yu.spotLength===iu&&yu.rectAreaLength===su&&yu.hemiLength===lu&&yu.numDirectionalShadows===cu&&yu.numPointShadows===uu&&yu.numSpotShadows===pu&&yu.numSpotMaps===mu&&yu.numLightProbes===Au||(Hl.directional.length=wc,Hl.spot.length=iu,Hl.rectArea.length=su,Hl.point.length=Sc,Hl.hemi.length=lu,Hl.directionalShadow.length=cu,Hl.directionalShadowMap.length=cu,Hl.pointShadow.length=uu,Hl.pointShadowMap.length=uu,Hl.spotShadow.length=pu,Hl.spotShadowMap.length=pu,Hl.directionalShadowMatrix.length=cu,Hl.pointShadowMatrix.length=uu,Hl.spotLightMatrix.length=pu+mu-gu,Hl.spotLightMap.length=mu,Hl.numSpotLightShadowsWithMaps=gu,Hl.numLightProbes=Au,yu.directionalLength=wc,yu.pointLength=Sc,yu.spotLength=iu,yu.rectAreaLength=su,yu.hemiLength=lu,yu.numDirectionalShadows=cu,yu.numPointShadows=uu,yu.numSpotShadows=pu,yu.numSpotMaps=mu,yu.numLightProbes=Au,Hl.version=dd++)},setupView:function(at,st){let ot=0,ut=0,rc=0,wc=0,Sc=0;const iu=st.matrixWorldInverse;for(let su=0,lu=at.length;su<lu;su++){const st=at[su];if(st.isDirectionalLight){const at=Hl.directional[ot];at.direction.setFromMatrixPosition(st.matrixWorld),sc.setFromMatrixPosition(st.target.matrixWorld),at.direction.sub(sc),at.direction.transformDirection(iu),ot++}else if(st.isSpotLight){const at=Hl.spot[rc];at.position.setFromMatrixPosition(st.matrixWorld),at.position.applyMatrix4(iu),at.direction.setFromMatrixPosition(st.matrixWorld),sc.setFromMatrixPosition(st.target.matrixWorld),at.direction.sub(sc),at.direction.transformDirection(iu),rc++}else if(st.isRectAreaLight){const at=Hl.rectArea[wc];at.position.setFromMatrixPosition(st.matrixWorld),at.position.applyMatrix4(iu),_c.identity(),oc.copy(st.matrixWorld),oc.premultiply(iu),_c.extractRotation(oc),at.halfWidth.set(.5*st.width,0,0),at.halfHeight.set(0,.5*st.height,0),at.halfWidth.applyMatrix4(_c),at.halfHeight.applyMatrix4(_c),wc++}else if(st.isPointLight){const at=Hl.point[ut];at.position.setFromMatrixPosition(st.matrixWorld),at.position.applyMatrix4(iu),ut++}else if(st.isHemisphereLight){const at=Hl.hemi[Sc];at.direction.setFromMatrixPosition(st.matrixWorld),at.direction.transformDirection(iu),Sc++}}},state:Hl}}function WebGLRenderState(at){const st=new WebGLLights(at),ot=[],ut=[];const Hl={lightsArray:ot,shadowsArray:ut,camera:null,lights:st,transmissionRenderTarget:{}};return{init:function(at){Hl.camera=at,ot.length=0,ut.length=0},state:Hl,setupLights:function(){st.setup(ot)},setupLightsView:function(at){st.setupView(ot,at)},pushLight:function(at){ot.push(at)},pushShadow:function(at){ut.push(at)}}}function WebGLRenderStates(at){let st=new WeakMap;return{get:function(ot,ut){void 0===ut&&(ut=0);const Hl=st.get(ot);let rc;return void 0===Hl?(rc=new WebGLRenderState(at),st.set(ot,[rc])):ut>=Hl.length?(rc=new WebGLRenderState(at),Hl.push(rc)):rc=Hl[ut],rc},dispose:function(){st=new WeakMap}}}function WebGLShadowMap(at,st,ot){let Hl=new ut.PPD;const rc=new ut.I9Y,sc=new ut.I9Y,oc=new ut.IUQ,_c=new ut.CSG({depthPacking:ut.N5j}),wc=new ut.aVO,Sc={},iu=ot.maxTextureSize,su={[ut.hB5]:ut.hsX,[ut.hsX]:ut.hB5,[ut.$EB]:ut.$EB},lu=new ut.BKk({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new ut.I9Y},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),cu=lu.clone();cu.defines.HORIZONTAL_PASS=1;const uu=new ut.LoY;uu.setAttribute("position",new ut.THS(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const pu=new ut.eaF(uu,lu),mu=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=ut.QP0;let gu=this.type;function VSMPass(ot,Hl){const sc=st.update(pu);lu.defines.VSM_SAMPLES!==ot.blurSamples&&(lu.defines.VSM_SAMPLES=ot.blurSamples,cu.defines.VSM_SAMPLES=ot.blurSamples,lu.needsUpdate=!0,cu.needsUpdate=!0),null===ot.mapPass&&(ot.mapPass=new ut.nWS(rc.x,rc.y)),lu.uniforms.shadow_pass.value=ot.map.texture,lu.uniforms.resolution.value=ot.mapSize,lu.uniforms.radius.value=ot.radius,at.setRenderTarget(ot.mapPass),at.clear(),at.renderBufferDirect(Hl,null,sc,lu,pu,null),cu.uniforms.shadow_pass.value=ot.mapPass.texture,cu.uniforms.resolution.value=ot.mapSize,cu.uniforms.radius.value=ot.radius,at.setRenderTarget(ot.map),at.clear(),at.renderBufferDirect(Hl,null,sc,cu,pu,null)}function getDepthMaterial(st,ot,Hl,rc){let sc=null;const oc=!0===Hl.isPointLight?st.customDistanceMaterial:st.customDepthMaterial;if(void 0!==oc)sc=oc;else if(sc=!0===Hl.isPointLight?wc:_c,at.localClippingEnabled&&!0===ot.clipShadows&&Array.isArray(ot.clippingPlanes)&&0!==ot.clippingPlanes.length||ot.displacementMap&&0!==ot.displacementScale||ot.alphaMap&&ot.alphaTest>0||ot.map&&ot.alphaTest>0||!0===ot.alphaToCoverage){const at=sc.uuid,st=ot.uuid;let ut=Sc[at];void 0===ut&&(ut={},Sc[at]=ut);let Hl=ut[st];void 0===Hl&&(Hl=sc.clone(),ut[st]=Hl,ot.addEventListener("dispose",onMaterialDispose)),sc=Hl}if(sc.visible=ot.visible,sc.wireframe=ot.wireframe,rc===ut.RyA?sc.side=null!==ot.shadowSide?ot.shadowSide:ot.side:sc.side=null!==ot.shadowSide?ot.shadowSide:su[ot.side],sc.alphaMap=ot.alphaMap,sc.alphaTest=!0===ot.alphaToCoverage?.5:ot.alphaTest,sc.map=ot.map,sc.clipShadows=ot.clipShadows,sc.clippingPlanes=ot.clippingPlanes,sc.clipIntersection=ot.clipIntersection,sc.displacementMap=ot.displacementMap,sc.displacementScale=ot.displacementScale,sc.displacementBias=ot.displacementBias,sc.wireframeLinewidth=ot.wireframeLinewidth,sc.linewidth=ot.linewidth,!0===Hl.isPointLight&&!0===sc.isMeshDistanceMaterial){at.properties.get(sc).light=Hl}return sc}function renderObject(ot,rc,sc,oc,_c){if(!1===ot.visible)return;if(ot.layers.test(rc.layers)&&(ot.isMesh||ot.isLine||ot.isPoints)&&(ot.castShadow||ot.receiveShadow&&_c===ut.RyA)&&(!ot.frustumCulled||Hl.intersectsObject(ot))){ot.modelViewMatrix.multiplyMatrices(sc.matrixWorldInverse,ot.matrixWorld);const ut=st.update(ot),Hl=ot.material;if(Array.isArray(Hl)){const st=ut.groups;for(let wc=0,Sc=st.length;wc<Sc;wc++){const Sc=st[wc],iu=Hl[Sc.materialIndex];if(iu&&iu.visible){const st=getDepthMaterial(ot,iu,oc,_c);ot.onBeforeShadow(at,ot,rc,sc,ut,st,Sc),at.renderBufferDirect(sc,null,ut,st,ot,Sc),ot.onAfterShadow(at,ot,rc,sc,ut,st,Sc)}}}else if(Hl.visible){const st=getDepthMaterial(ot,Hl,oc,_c);ot.onBeforeShadow(at,ot,rc,sc,ut,st,null),at.renderBufferDirect(sc,null,ut,st,ot,null),ot.onAfterShadow(at,ot,rc,sc,ut,st,null)}}const wc=ot.children;for(let at=0,st=wc.length;at<st;at++)renderObject(wc[at],rc,sc,oc,_c)}function onMaterialDispose(at){at.target.removeEventListener("dispose",onMaterialDispose);for(const st in Sc){const ot=Sc[st],ut=at.target.uuid;if(ut in ot){ot[ut].dispose(),delete ot[ut]}}}this.render=function(st,ot,_c){if(!1===mu.enabled)return;if(!1===mu.autoUpdate&&!1===mu.needsUpdate)return;if(0===st.length)return;const wc=at.getRenderTarget(),Sc=at.getActiveCubeFace(),su=at.getActiveMipmapLevel(),lu=at.state;lu.setBlending(ut.XIg),lu.buffers.depth.getReversed()?lu.buffers.color.setClear(0,0,0,0):lu.buffers.color.setClear(1,1,1,1),lu.buffers.depth.setTest(!0),lu.setScissorTest(!1);const cu=gu!==ut.RyA&&this.type===ut.RyA,uu=gu===ut.RyA&&this.type!==ut.RyA;for(let pu=0,mu=st.length;pu<mu;pu++){const wc=st[pu],Sc=wc.shadow;if(void 0===Sc){console.warn("THREE.WebGLShadowMap:",wc,"has no shadow.");continue}if(!1===Sc.autoUpdate&&!1===Sc.needsUpdate)continue;rc.copy(Sc.mapSize);const su=Sc.getFrameExtents();if(rc.multiply(su),sc.copy(Sc.mapSize),(rc.x>iu||rc.y>iu)&&(rc.x>iu&&(sc.x=Math.floor(iu/su.x),rc.x=sc.x*su.x,Sc.mapSize.x=sc.x),rc.y>iu&&(sc.y=Math.floor(iu/su.y),rc.y=sc.y*su.y,Sc.mapSize.y=sc.y)),null===Sc.map||!0===cu||!0===uu){const at=this.type!==ut.RyA?{minFilter:ut.hxR,magFilter:ut.hxR}:{};null!==Sc.map&&Sc.map.dispose(),Sc.map=new ut.nWS(rc.x,rc.y,at),Sc.map.texture.name=wc.name+".shadowMap",Sc.camera.updateProjectionMatrix()}at.setRenderTarget(Sc.map),at.clear();const mu=Sc.getViewportCount();for(let at=0;at<mu;at++){const st=Sc.getViewport(at);oc.set(sc.x*st.x,sc.y*st.y,sc.x*st.z,sc.y*st.w),lu.viewport(oc),Sc.updateMatrices(wc,at),Hl=Sc.getFrustum(),renderObject(ot,_c,Sc.camera,wc,this.type)}!0!==Sc.isPointLightShadow&&this.type===ut.RyA&&VSMPass(Sc,_c),Sc.needsUpdate=!1}gu=this.type,mu.needsUpdate=!1,at.setRenderTarget(wc,Sc,su)}}const pd={[ut.eHc]:ut.lGu,[ut.brA]:ut.K52,[ut.U3G]:ut.bw0,[ut.xSv]:ut.Gwm,[ut.lGu]:ut.eHc,[ut.K52]:ut.brA,[ut.bw0]:ut.U3G,[ut.Gwm]:ut.xSv};function WebGLState(at,st){const ot=new function(){let st=!1;const ot=new ut.IUQ;let Hl=null;const rc=new ut.IUQ(0,0,0,0);return{setMask:function(ot){Hl===ot||st||(at.colorMask(ot,ot,ot,ot),Hl=ot)},setLocked:function(at){st=at},setClear:function(st,ut,Hl,sc,oc){!0===oc&&(st*=sc,ut*=sc,Hl*=sc),ot.set(st,ut,Hl,sc),!1===rc.equals(ot)&&(at.clearColor(st,ut,Hl,sc),rc.copy(ot))},reset:function(){st=!1,Hl=null,rc.set(-1,0,0,0)}}},Hl=new function(){let ot=!1,Hl=!1,rc=null,sc=null,oc=null;return{setReversed:function(at){if(Hl!==at){const ot=st.get("EXT_clip_control");at?ot.clipControlEXT(ot.LOWER_LEFT_EXT,ot.ZERO_TO_ONE_EXT):ot.clipControlEXT(ot.LOWER_LEFT_EXT,ot.NEGATIVE_ONE_TO_ONE_EXT),Hl=at;const ut=oc;oc=null,this.setClear(ut)}},getReversed:function(){return Hl},setTest:function(st){st?enable(at.DEPTH_TEST):disable(at.DEPTH_TEST)},setMask:function(st){rc===st||ot||(at.depthMask(st),rc=st)},setFunc:function(st){if(Hl&&(st=pd[st]),sc!==st){switch(st){case ut.eHc:at.depthFunc(at.NEVER);break;case ut.lGu:at.depthFunc(at.ALWAYS);break;case ut.brA:at.depthFunc(at.LESS);break;case ut.xSv:at.depthFunc(at.LEQUAL);break;case ut.U3G:at.depthFunc(at.EQUAL);break;case ut.Gwm:at.depthFunc(at.GEQUAL);break;case ut.K52:at.depthFunc(at.GREATER);break;case ut.bw0:at.depthFunc(at.NOTEQUAL);break;default:at.depthFunc(at.LEQUAL)}sc=st}},setLocked:function(at){ot=at},setClear:function(st){oc!==st&&(Hl&&(st=1-st),at.clearDepth(st),oc=st)},reset:function(){ot=!1,rc=null,sc=null,oc=null,Hl=!1}}},rc=new function(){let st=!1,ot=null,ut=null,Hl=null,rc=null,sc=null,oc=null,_c=null,wc=null;return{setTest:function(ot){st||(ot?enable(at.STENCIL_TEST):disable(at.STENCIL_TEST))},setMask:function(ut){ot===ut||st||(at.stencilMask(ut),ot=ut)},setFunc:function(st,ot,sc){ut===st&&Hl===ot&&rc===sc||(at.stencilFunc(st,ot,sc),ut=st,Hl=ot,rc=sc)},setOp:function(st,ot,ut){sc===st&&oc===ot&&_c===ut||(at.stencilOp(st,ot,ut),sc=st,oc=ot,_c=ut)},setLocked:function(at){st=at},setClear:function(st){wc!==st&&(at.clearStencil(st),wc=st)},reset:function(){st=!1,ot=null,ut=null,Hl=null,rc=null,sc=null,oc=null,_c=null,wc=null}}},sc=new WeakMap,oc=new WeakMap;let _c={},wc={},Sc=new WeakMap,iu=[],su=null,lu=!1,cu=null,uu=null,pu=null,mu=null,gu=null,Au=null,yu=null,_u=new ut.Q1f(0,0,0),xu=0,Su=!1,Du=null,Lu=null,$u=null,hh=null,ed=null;const td=at.getParameter(at.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let id=!1,nd=0;const rd=at.getParameter(at.VERSION);-1!==rd.indexOf("WebGL")?(nd=parseFloat(/^WebGL (\d)/.exec(rd)[1]),id=nd>=1):-1!==rd.indexOf("OpenGL ES")&&(nd=parseFloat(/^OpenGL ES (\d)/.exec(rd)[1]),id=nd>=2);let ad=null,sd={};const od=at.getParameter(at.SCISSOR_BOX),ld=at.getParameter(at.VIEWPORT),cd=(new ut.IUQ).fromArray(od),ud=(new ut.IUQ).fromArray(ld);function createTexture(st,ot,ut,Hl){const rc=new Uint8Array(4),sc=at.createTexture();at.bindTexture(st,sc),at.texParameteri(st,at.TEXTURE_MIN_FILTER,at.NEAREST),at.texParameteri(st,at.TEXTURE_MAG_FILTER,at.NEAREST);for(let oc=0;oc<ut;oc++)st===at.TEXTURE_3D||st===at.TEXTURE_2D_ARRAY?at.texImage3D(ot,0,at.RGBA,1,1,Hl,0,at.RGBA,at.UNSIGNED_BYTE,rc):at.texImage2D(ot+oc,0,at.RGBA,1,1,0,at.RGBA,at.UNSIGNED_BYTE,rc);return sc}const hd={};function enable(st){!0!==_c[st]&&(at.enable(st),_c[st]=!0)}function disable(st){!1!==_c[st]&&(at.disable(st),_c[st]=!1)}hd[at.TEXTURE_2D]=createTexture(at.TEXTURE_2D,at.TEXTURE_2D,1),hd[at.TEXTURE_CUBE_MAP]=createTexture(at.TEXTURE_CUBE_MAP,at.TEXTURE_CUBE_MAP_POSITIVE_X,6),hd[at.TEXTURE_2D_ARRAY]=createTexture(at.TEXTURE_2D_ARRAY,at.TEXTURE_2D_ARRAY,1,1),hd[at.TEXTURE_3D]=createTexture(at.TEXTURE_3D,at.TEXTURE_3D,1,1),ot.setClear(0,0,0,1),Hl.setClear(1),rc.setClear(0),enable(at.DEPTH_TEST),Hl.setFunc(ut.xSv),setFlipSided(!1),setCullFace(ut.Vb5),enable(at.CULL_FACE),setBlending(ut.XIg);const dd={[ut.gO9]:at.FUNC_ADD,[ut.FXf]:at.FUNC_SUBTRACT,[ut.nST]:at.FUNC_REVERSE_SUBTRACT};dd[ut.znC]=at.MIN,dd[ut.$ei]=at.MAX;const md={[ut.ojh]:at.ZERO,[ut.qad]:at.ONE,[ut.f4X]:at.SRC_COLOR,[ut.ie2]:at.SRC_ALPHA,[ut.hgQ]:at.SRC_ALPHA_SATURATE,[ut.wn6]:at.DST_COLOR,[ut.hdd]:at.DST_ALPHA,[ut.LiQ]:at.ONE_MINUS_SRC_COLOR,[ut.OuU]:at.ONE_MINUS_SRC_ALPHA,[ut.aEY]:at.ONE_MINUS_DST_COLOR,[ut.Nt7]:at.ONE_MINUS_DST_ALPHA,[ut.RrE]:at.CONSTANT_COLOR,[ut.$Yl]:at.ONE_MINUS_CONSTANT_COLOR,[ut.e0p]:at.CONSTANT_ALPHA,[ut.ov9]:at.ONE_MINUS_CONSTANT_ALPHA};function setBlending(st,ot,Hl,rc,sc,oc,_c,wc,Sc,iu){if(st!==ut.XIg){if(!1===lu&&(enable(at.BLEND),lu=!0),st===ut.bCz)sc=sc||ot,oc=oc||Hl,_c=_c||rc,ot===uu&&sc===gu||(at.blendEquationSeparate(dd[ot],dd[sc]),uu=ot,gu=sc),Hl===pu&&rc===mu&&oc===Au&&_c===yu||(at.blendFuncSeparate(md[Hl],md[rc],md[oc],md[_c]),pu=Hl,mu=rc,Au=oc,yu=_c),!1!==wc.equals(_u)&&Sc===xu||(at.blendColor(wc.r,wc.g,wc.b,Sc),_u.copy(wc),xu=Sc),cu=st,Su=!1;else if(st!==cu||iu!==Su){if(uu===ut.gO9&&gu===ut.gO9||(at.blendEquation(at.FUNC_ADD),uu=ut.gO9,gu=ut.gO9),iu)switch(st){case ut.NTi:at.blendFuncSeparate(at.ONE,at.ONE_MINUS_SRC_ALPHA,at.ONE,at.ONE_MINUS_SRC_ALPHA);break;case ut.EZo:at.blendFunc(at.ONE,at.ONE);break;case ut.Kwu:at.blendFuncSeparate(at.ZERO,at.ONE_MINUS_SRC_COLOR,at.ZERO,at.ONE);break;case ut.EdD:at.blendFuncSeparate(at.DST_COLOR,at.ONE_MINUS_SRC_ALPHA,at.ZERO,at.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",st)}else switch(st){case ut.NTi:at.blendFuncSeparate(at.SRC_ALPHA,at.ONE_MINUS_SRC_ALPHA,at.ONE,at.ONE_MINUS_SRC_ALPHA);break;case ut.EZo:at.blendFuncSeparate(at.SRC_ALPHA,at.ONE,at.ONE,at.ONE);break;case ut.Kwu:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case ut.EdD:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",st)}pu=null,mu=null,Au=null,yu=null,_u.set(0,0,0),xu=0,cu=st,Su=iu}}else!0===lu&&(disable(at.BLEND),lu=!1)}function setFlipSided(st){Du!==st&&(st?at.frontFace(at.CW):at.frontFace(at.CCW),Du=st)}function setCullFace(st){st!==ut.WNZ?(enable(at.CULL_FACE),st!==Lu&&(st===ut.Vb5?at.cullFace(at.BACK):st===ut.Jnc?at.cullFace(at.FRONT):at.cullFace(at.FRONT_AND_BACK))):disable(at.CULL_FACE),Lu=st}function setPolygonOffset(st,ot,ut){st?(enable(at.POLYGON_OFFSET_FILL),hh===ot&&ed===ut||(at.polygonOffset(ot,ut),hh=ot,ed=ut)):disable(at.POLYGON_OFFSET_FILL)}return{buffers:{color:ot,depth:Hl,stencil:rc},enable:enable,disable:disable,bindFramebuffer:function(st,ot){return wc[st]!==ot&&(at.bindFramebuffer(st,ot),wc[st]=ot,st===at.DRAW_FRAMEBUFFER&&(wc[at.FRAMEBUFFER]=ot),st===at.FRAMEBUFFER&&(wc[at.DRAW_FRAMEBUFFER]=ot),!0)},drawBuffers:function(st,ot){let ut=iu,Hl=!1;if(st){ut=Sc.get(ot),void 0===ut&&(ut=[],Sc.set(ot,ut));const rc=st.textures;if(ut.length!==rc.length||ut[0]!==at.COLOR_ATTACHMENT0){for(let st=0,ot=rc.length;st<ot;st++)ut[st]=at.COLOR_ATTACHMENT0+st;ut.length=rc.length,Hl=!0}}else ut[0]!==at.BACK&&(ut[0]=at.BACK,Hl=!0);Hl&&at.drawBuffers(ut)},useProgram:function(st){return su!==st&&(at.useProgram(st),su=st,!0)},setBlending:setBlending,setMaterial:function(st,sc){st.side===ut.$EB?disable(at.CULL_FACE):enable(at.CULL_FACE);let oc=st.side===ut.hsX;sc&&(oc=!oc),setFlipSided(oc),st.blending===ut.NTi&&!1===st.transparent?setBlending(ut.XIg):setBlending(st.blending,st.blendEquation,st.blendSrc,st.blendDst,st.blendEquationAlpha,st.blendSrcAlpha,st.blendDstAlpha,st.blendColor,st.blendAlpha,st.premultipliedAlpha),Hl.setFunc(st.depthFunc),Hl.setTest(st.depthTest),Hl.setMask(st.depthWrite),ot.setMask(st.colorWrite);const _c=st.stencilWrite;rc.setTest(_c),_c&&(rc.setMask(st.stencilWriteMask),rc.setFunc(st.stencilFunc,st.stencilRef,st.stencilFuncMask),rc.setOp(st.stencilFail,st.stencilZFail,st.stencilZPass)),setPolygonOffset(st.polygonOffset,st.polygonOffsetFactor,st.polygonOffsetUnits),!0===st.alphaToCoverage?enable(at.SAMPLE_ALPHA_TO_COVERAGE):disable(at.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:setFlipSided,setCullFace:setCullFace,setLineWidth:function(st){st!==$u&&(id&&at.lineWidth(st),$u=st)},setPolygonOffset:setPolygonOffset,setScissorTest:function(st){st?enable(at.SCISSOR_TEST):disable(at.SCISSOR_TEST)},activeTexture:function(st){void 0===st&&(st=at.TEXTURE0+td-1),ad!==st&&(at.activeTexture(st),ad=st)},bindTexture:function(st,ot,ut){void 0===ut&&(ut=null===ad?at.TEXTURE0+td-1:ad);let Hl=sd[ut];void 0===Hl&&(Hl={type:void 0,texture:void 0},sd[ut]=Hl),Hl.type===st&&Hl.texture===ot||(ad!==ut&&(at.activeTexture(ut),ad=ut),at.bindTexture(st,ot||hd[st]),Hl.type=st,Hl.texture=ot)},unbindTexture:function(){const st=sd[ad];void 0!==st&&void 0!==st.type&&(at.bindTexture(st.type,null),st.type=void 0,st.texture=void 0)},compressedTexImage2D:function(){try{at.compressedTexImage2D(...arguments)}catch(st){console.error("THREE.WebGLState:",st)}},compressedTexImage3D:function(){try{at.compressedTexImage3D(...arguments)}catch(st){console.error("THREE.WebGLState:",st)}},texImage2D:function(){try{at.texImage2D(...arguments)}catch(st){console.error("THREE.WebGLState:",st)}},texImage3D:function(){try{at.texImage3D(...arguments)}catch(st){console.error("THREE.WebGLState:",st)}},updateUBOMapping:function(st,ot){let ut=oc.get(ot);void 0===ut&&(ut=new WeakMap,oc.set(ot,ut));let Hl=ut.get(st);void 0===Hl&&(Hl=at.getUniformBlockIndex(ot,st.name),ut.set(st,Hl))},uniformBlockBinding:function(st,ot){const ut=oc.get(ot).get(st);sc.get(ot)!==ut&&(at.uniformBlockBinding(ot,ut,st.__bindingPointIndex),sc.set(ot,ut))},texStorage2D:function(){try{at.texStorage2D(...arguments)}catch(st){console.error("THREE.WebGLState:",st)}},texStorage3D:function(){try{at.texStorage3D(...arguments)}catch(st){console.error("THREE.WebGLState:",st)}},texSubImage2D:function(){try{at.texSubImage2D(...arguments)}catch(st){console.error("THREE.WebGLState:",st)}},texSubImage3D:function(){try{at.texSubImage3D(...arguments)}catch(st){console.error("THREE.WebGLState:",st)}},compressedTexSubImage2D:function(){try{at.compressedTexSubImage2D(...arguments)}catch(st){console.error("THREE.WebGLState:",st)}},compressedTexSubImage3D:function(){try{at.compressedTexSubImage3D(...arguments)}catch(st){console.error("THREE.WebGLState:",st)}},scissor:function(st){!1===cd.equals(st)&&(at.scissor(st.x,st.y,st.z,st.w),cd.copy(st))},viewport:function(st){!1===ud.equals(st)&&(at.viewport(st.x,st.y,st.z,st.w),ud.copy(st))},reset:function(){at.disable(at.BLEND),at.disable(at.CULL_FACE),at.disable(at.DEPTH_TEST),at.disable(at.POLYGON_OFFSET_FILL),at.disable(at.SCISSOR_TEST),at.disable(at.STENCIL_TEST),at.disable(at.SAMPLE_ALPHA_TO_COVERAGE),at.blendEquation(at.FUNC_ADD),at.blendFunc(at.ONE,at.ZERO),at.blendFuncSeparate(at.ONE,at.ZERO,at.ONE,at.ZERO),at.blendColor(0,0,0,0),at.colorMask(!0,!0,!0,!0),at.clearColor(0,0,0,0),at.depthMask(!0),at.depthFunc(at.LESS),Hl.setReversed(!1),at.clearDepth(1),at.stencilMask(4294967295),at.stencilFunc(at.ALWAYS,0,4294967295),at.stencilOp(at.KEEP,at.KEEP,at.KEEP),at.clearStencil(0),at.cullFace(at.BACK),at.frontFace(at.CCW),at.polygonOffset(0,0),at.activeTexture(at.TEXTURE0),at.bindFramebuffer(at.FRAMEBUFFER,null),at.bindFramebuffer(at.DRAW_FRAMEBUFFER,null),at.bindFramebuffer(at.READ_FRAMEBUFFER,null),at.useProgram(null),at.lineWidth(1),at.scissor(0,0,at.canvas.width,at.canvas.height),at.viewport(0,0,at.canvas.width,at.canvas.height),_c={},ad=null,sd={},wc={},Sc=new WeakMap,iu=[],su=null,lu=!1,cu=null,uu=null,pu=null,mu=null,gu=null,Au=null,yu=null,_u=new ut.Q1f(0,0,0),xu=0,Su=!1,Du=null,Lu=null,$u=null,hh=null,ed=null,cd.set(0,0,at.canvas.width,at.canvas.height),ud.set(0,0,at.canvas.width,at.canvas.height),ot.reset(),Hl.reset(),rc.reset()}}}function WebGLTextures(at,st,ot,Hl,rc,sc,oc){const _c=st.has("WEBGL_multisampled_render_to_texture")?st.get("WEBGL_multisampled_render_to_texture"):null,wc="undefined"!==typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),Sc=new ut.I9Y,iu=new WeakMap;let su;const lu=new WeakMap;let cu=!1;try{cu="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(_u){}function createCanvas(at,st){return cu?new OffscreenCanvas(at,st):(0,ut.qq$)("canvas")}function resizeImage(at,st,ot){let ut=1;const Hl=getDimensions(at);if((Hl.width>ot||Hl.height>ot)&&(ut=ot/Math.max(Hl.width,Hl.height)),ut<1){if("undefined"!==typeof HTMLImageElement&&at instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&at instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&at instanceof ImageBitmap||"undefined"!==typeof VideoFrame&&at instanceof VideoFrame){const ot=Math.floor(ut*Hl.width),rc=Math.floor(ut*Hl.height);void 0===su&&(su=createCanvas(ot,rc));const sc=st?createCanvas(ot,rc):su;sc.width=ot,sc.height=rc;return sc.getContext("2d").drawImage(at,0,0,ot,rc),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Hl.width+"x"+Hl.height+") to ("+ot+"x"+rc+")."),sc}return"data"in at&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Hl.width+"x"+Hl.height+")."),at}return at}function textureNeedsGenerateMipmaps(at){return at.generateMipmaps}function generateMipmap(st){at.generateMipmap(st)}function getTargetType(st){return st.isWebGLCubeRenderTarget?at.TEXTURE_CUBE_MAP:st.isWebGL3DRenderTarget?at.TEXTURE_3D:st.isWebGLArrayRenderTarget||st.isCompressedArrayTexture?at.TEXTURE_2D_ARRAY:at.TEXTURE_2D}function getInternalFormat(ot,Hl,rc,sc,oc){if(void 0===oc&&(oc=!1),null!==ot){if(void 0!==at[ot])return at[ot];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+ot+"'")}let _c=Hl;if(Hl===at.RED&&(rc===at.FLOAT&&(_c=at.R32F),rc===at.HALF_FLOAT&&(_c=at.R16F),rc===at.UNSIGNED_BYTE&&(_c=at.R8)),Hl===at.RED_INTEGER&&(rc===at.UNSIGNED_BYTE&&(_c=at.R8UI),rc===at.UNSIGNED_SHORT&&(_c=at.R16UI),rc===at.UNSIGNED_INT&&(_c=at.R32UI),rc===at.BYTE&&(_c=at.R8I),rc===at.SHORT&&(_c=at.R16I),rc===at.INT&&(_c=at.R32I)),Hl===at.RG&&(rc===at.FLOAT&&(_c=at.RG32F),rc===at.HALF_FLOAT&&(_c=at.RG16F),rc===at.UNSIGNED_BYTE&&(_c=at.RG8)),Hl===at.RG_INTEGER&&(rc===at.UNSIGNED_BYTE&&(_c=at.RG8UI),rc===at.UNSIGNED_SHORT&&(_c=at.RG16UI),rc===at.UNSIGNED_INT&&(_c=at.RG32UI),rc===at.BYTE&&(_c=at.RG8I),rc===at.SHORT&&(_c=at.RG16I),rc===at.INT&&(_c=at.RG32I)),Hl===at.RGB_INTEGER&&(rc===at.UNSIGNED_BYTE&&(_c=at.RGB8UI),rc===at.UNSIGNED_SHORT&&(_c=at.RGB16UI),rc===at.UNSIGNED_INT&&(_c=at.RGB32UI),rc===at.BYTE&&(_c=at.RGB8I),rc===at.SHORT&&(_c=at.RGB16I),rc===at.INT&&(_c=at.RGB32I)),Hl===at.RGBA_INTEGER&&(rc===at.UNSIGNED_BYTE&&(_c=at.RGBA8UI),rc===at.UNSIGNED_SHORT&&(_c=at.RGBA16UI),rc===at.UNSIGNED_INT&&(_c=at.RGBA32UI),rc===at.BYTE&&(_c=at.RGBA8I),rc===at.SHORT&&(_c=at.RGBA16I),rc===at.INT&&(_c=at.RGBA32I)),Hl===at.RGB&&rc===at.UNSIGNED_INT_5_9_9_9_REV&&(_c=at.RGB9_E5),Hl===at.RGBA){const st=oc?ut.VxR:ut.ppV.getTransfer(sc);rc===at.FLOAT&&(_c=at.RGBA32F),rc===at.HALF_FLOAT&&(_c=at.RGBA16F),rc===at.UNSIGNED_BYTE&&(_c=st===ut.KLL?at.SRGB8_ALPHA8:at.RGBA8),rc===at.UNSIGNED_SHORT_4_4_4_4&&(_c=at.RGBA4),rc===at.UNSIGNED_SHORT_5_5_5_1&&(_c=at.RGB5_A1)}return _c!==at.R16F&&_c!==at.R32F&&_c!==at.RG16F&&_c!==at.RG32F&&_c!==at.RGBA16F&&_c!==at.RGBA32F||st.get("EXT_color_buffer_float"),_c}function getInternalDepthFormat(st,ot){let Hl;return st?null===ot||ot===ut.bkx||ot===ut.V3x?Hl=at.DEPTH24_STENCIL8:ot===ut.RQf?Hl=at.DEPTH32F_STENCIL8:ot===ut.cHt&&(Hl=at.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===ot||ot===ut.bkx||ot===ut.V3x?Hl=at.DEPTH_COMPONENT24:ot===ut.RQf?Hl=at.DEPTH_COMPONENT32F:ot===ut.cHt&&(Hl=at.DEPTH_COMPONENT16),Hl}function getMipLevels(at,st){return!0===textureNeedsGenerateMipmaps(at)||at.isFramebufferTexture&&at.minFilter!==ut.hxR&&at.minFilter!==ut.k6q?Math.log2(Math.max(st.width,st.height))+1:void 0!==at.mipmaps&&at.mipmaps.length>0?at.mipmaps.length:at.isCompressedTexture&&Array.isArray(at.image)?st.mipmaps.length:1}function onTextureDispose(at){const st=at.target;st.removeEventListener("dispose",onTextureDispose),function(at){const st=Hl.get(at);if(void 0===st.__webglInit)return;const ot=at.source,ut=lu.get(ot);if(ut){const Hl=ut[st.__cacheKey];Hl.usedTimes--,0===Hl.usedTimes&&deleteTexture(at),0===Object.keys(ut).length&&lu.delete(ot)}Hl.remove(at)}(st),st.isVideoTexture&&iu.delete(st)}function onRenderTargetDispose(st){const ot=st.target;ot.removeEventListener("dispose",onRenderTargetDispose),function(st){const ot=Hl.get(st);st.depthTexture&&(st.depthTexture.dispose(),Hl.remove(st.depthTexture));if(st.isWebGLCubeRenderTarget)for(let Hl=0;Hl<6;Hl++){if(Array.isArray(ot.__webglFramebuffer[Hl]))for(let st=0;st<ot.__webglFramebuffer[Hl].length;st++)at.deleteFramebuffer(ot.__webglFramebuffer[Hl][st]);else at.deleteFramebuffer(ot.__webglFramebuffer[Hl]);ot.__webglDepthbuffer&&at.deleteRenderbuffer(ot.__webglDepthbuffer[Hl])}else{if(Array.isArray(ot.__webglFramebuffer))for(let st=0;st<ot.__webglFramebuffer.length;st++)at.deleteFramebuffer(ot.__webglFramebuffer[st]);else at.deleteFramebuffer(ot.__webglFramebuffer);if(ot.__webglDepthbuffer&&at.deleteRenderbuffer(ot.__webglDepthbuffer),ot.__webglMultisampledFramebuffer&&at.deleteFramebuffer(ot.__webglMultisampledFramebuffer),ot.__webglColorRenderbuffer)for(let st=0;st<ot.__webglColorRenderbuffer.length;st++)ot.__webglColorRenderbuffer[st]&&at.deleteRenderbuffer(ot.__webglColorRenderbuffer[st]);ot.__webglDepthRenderbuffer&&at.deleteRenderbuffer(ot.__webglDepthRenderbuffer)}const ut=st.textures;for(let rc=0,sc=ut.length;rc<sc;rc++){const st=Hl.get(ut[rc]);st.__webglTexture&&(at.deleteTexture(st.__webglTexture),oc.memory.textures--),Hl.remove(ut[rc])}Hl.remove(st)}(ot)}function deleteTexture(st){const ot=Hl.get(st);at.deleteTexture(ot.__webglTexture);const ut=st.source;delete lu.get(ut)[ot.__cacheKey],oc.memory.textures--}let uu=0;function setTexture2D(st,ut){const rc=Hl.get(st);if(st.isVideoTexture&&function(at){const st=oc.render.frame;iu.get(at)!==st&&(iu.set(at,st),at.update())}(st),!1===st.isRenderTargetTexture&&!0!==st.isExternalTexture&&st.version>0&&rc.__version!==st.version){const at=st.image;if(null===at)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==at.complete)return void uploadTexture(rc,st,ut);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}else st.isExternalTexture&&(rc.__webglTexture=st.sourceTexture?st.sourceTexture:null);ot.bindTexture(at.TEXTURE_2D,rc.__webglTexture,at.TEXTURE0+ut)}const pu={[ut.GJx]:at.REPEAT,[ut.ghU]:at.CLAMP_TO_EDGE,[ut.kTW]:at.MIRRORED_REPEAT},mu={[ut.hxR]:at.NEAREST,[ut.pHI]:at.NEAREST_MIPMAP_NEAREST,[ut.Cfg]:at.NEAREST_MIPMAP_LINEAR,[ut.k6q]:at.LINEAR,[ut.kRr]:at.LINEAR_MIPMAP_NEAREST,[ut.$_I]:at.LINEAR_MIPMAP_LINEAR},gu={[ut.amv]:at.NEVER,[ut.FFZ]:at.ALWAYS,[ut.vim]:at.LESS,[ut.TiK]:at.LEQUAL,[ut.kO0]:at.EQUAL,[ut.gWB]:at.GEQUAL,[ut.eoi]:at.GREATER,[ut.jzd]:at.NOTEQUAL};function setTextureParameters(ot,sc){if(sc.type!==ut.RQf||!1!==st.has("OES_texture_float_linear")||sc.magFilter!==ut.k6q&&sc.magFilter!==ut.kRr&&sc.magFilter!==ut.Cfg&&sc.magFilter!==ut.$_I&&sc.minFilter!==ut.k6q&&sc.minFilter!==ut.kRr&&sc.minFilter!==ut.Cfg&&sc.minFilter!==ut.$_I||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),at.texParameteri(ot,at.TEXTURE_WRAP_S,pu[sc.wrapS]),at.texParameteri(ot,at.TEXTURE_WRAP_T,pu[sc.wrapT]),ot!==at.TEXTURE_3D&&ot!==at.TEXTURE_2D_ARRAY||at.texParameteri(ot,at.TEXTURE_WRAP_R,pu[sc.wrapR]),at.texParameteri(ot,at.TEXTURE_MAG_FILTER,mu[sc.magFilter]),at.texParameteri(ot,at.TEXTURE_MIN_FILTER,mu[sc.minFilter]),sc.compareFunction&&(at.texParameteri(ot,at.TEXTURE_COMPARE_MODE,at.COMPARE_REF_TO_TEXTURE),at.texParameteri(ot,at.TEXTURE_COMPARE_FUNC,gu[sc.compareFunction])),!0===st.has("EXT_texture_filter_anisotropic")){if(sc.magFilter===ut.hxR)return;if(sc.minFilter!==ut.Cfg&&sc.minFilter!==ut.$_I)return;if(sc.type===ut.RQf&&!1===st.has("OES_texture_float_linear"))return;if(sc.anisotropy>1||Hl.get(sc).__currentAnisotropy){const ut=st.get("EXT_texture_filter_anisotropic");at.texParameterf(ot,ut.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(sc.anisotropy,rc.getMaxAnisotropy())),Hl.get(sc).__currentAnisotropy=sc.anisotropy}}}function initTexture(st,ot){let ut=!1;void 0===st.__webglInit&&(st.__webglInit=!0,ot.addEventListener("dispose",onTextureDispose));const Hl=ot.source;let rc=lu.get(Hl);void 0===rc&&(rc={},lu.set(Hl,rc));const sc=function(at){const st=[];return st.push(at.wrapS),st.push(at.wrapT),st.push(at.wrapR||0),st.push(at.magFilter),st.push(at.minFilter),st.push(at.anisotropy),st.push(at.internalFormat),st.push(at.format),st.push(at.type),st.push(at.generateMipmaps),st.push(at.premultiplyAlpha),st.push(at.flipY),st.push(at.unpackAlignment),st.push(at.colorSpace),st.join()}(ot);if(sc!==st.__cacheKey){void 0===rc[sc]&&(rc[sc]={texture:at.createTexture(),usedTimes:0},oc.memory.textures++,ut=!0),rc[sc].usedTimes++;const Hl=rc[st.__cacheKey];void 0!==Hl&&(rc[st.__cacheKey].usedTimes--,0===Hl.usedTimes&&deleteTexture(ot)),st.__cacheKey=sc,st.__webglTexture=rc[sc].texture}return ut}function getRow(at,st,ot){return Math.floor(Math.floor(at/ot)/st)}function uploadTexture(st,oc,_c){let wc=at.TEXTURE_2D;(oc.isDataArrayTexture||oc.isCompressedArrayTexture)&&(wc=at.TEXTURE_2D_ARRAY),oc.isData3DTexture&&(wc=at.TEXTURE_3D);const Sc=initTexture(st,oc),iu=oc.source;ot.bindTexture(wc,st.__webglTexture,at.TEXTURE0+_c);const su=Hl.get(iu);if(iu.version!==su.__version||!0===Sc){ot.activeTexture(at.TEXTURE0+_c);const st=ut.ppV.getPrimaries(ut.ppV.workingColorSpace),Hl=oc.colorSpace===ut.jf0?null:ut.ppV.getPrimaries(oc.colorSpace),lu=oc.colorSpace===ut.jf0||st===Hl?at.NONE:at.BROWSER_DEFAULT_WEBGL;at.pixelStorei(at.UNPACK_FLIP_Y_WEBGL,oc.flipY),at.pixelStorei(at.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oc.premultiplyAlpha),at.pixelStorei(at.UNPACK_ALIGNMENT,oc.unpackAlignment),at.pixelStorei(at.UNPACK_COLORSPACE_CONVERSION_WEBGL,lu);let cu=resizeImage(oc.image,!1,rc.maxTextureSize);cu=verifyColorSpace(oc,cu);const uu=sc.convert(oc.format,oc.colorSpace),pu=sc.convert(oc.type);let mu,gu=getInternalFormat(oc.internalFormat,uu,pu,oc.colorSpace,oc.isVideoTexture);setTextureParameters(wc,oc);const Au=oc.mipmaps,yu=!0!==oc.isVideoTexture,_u=void 0===su.__version||!0===Sc,xu=iu.dataReady,Su=getMipLevels(oc,cu);if(oc.isDepthTexture)gu=getInternalDepthFormat(oc.format===ut.dcC,oc.type),_u&&(yu?ot.texStorage2D(at.TEXTURE_2D,1,gu,cu.width,cu.height):ot.texImage2D(at.TEXTURE_2D,0,gu,cu.width,cu.height,0,uu,pu,null));else if(oc.isDataTexture)if(Au.length>0){yu&&_u&&ot.texStorage2D(at.TEXTURE_2D,Su,gu,Au[0].width,Au[0].height);for(let st=0,ut=Au.length;st<ut;st++)mu=Au[st],yu?xu&&ot.texSubImage2D(at.TEXTURE_2D,st,0,0,mu.width,mu.height,uu,pu,mu.data):ot.texImage2D(at.TEXTURE_2D,st,gu,mu.width,mu.height,0,uu,pu,mu.data);oc.generateMipmaps=!1}else yu?(_u&&ot.texStorage2D(at.TEXTURE_2D,Su,gu,cu.width,cu.height),xu&&function(st,ut,Hl,rc){const sc=st.updateRanges;if(0===sc.length)ot.texSubImage2D(at.TEXTURE_2D,0,0,0,ut.width,ut.height,Hl,rc,ut.data);else{sc.sort(((at,st)=>at.start-st.start));let oc=0;for(let at=1;at<sc.length;at++){const st=sc[oc],ot=sc[at],Hl=st.start+st.count,rc=getRow(ot.start,ut.width,4),_c=getRow(st.start,ut.width,4);ot.start<=Hl+1&&rc===_c&&getRow(ot.start+ot.count-1,ut.width,4)===rc?st.count=Math.max(st.count,ot.start+ot.count-st.start):(++oc,sc[oc]=ot)}sc.length=oc+1;const _c=at.getParameter(at.UNPACK_ROW_LENGTH),wc=at.getParameter(at.UNPACK_SKIP_PIXELS),Sc=at.getParameter(at.UNPACK_SKIP_ROWS);at.pixelStorei(at.UNPACK_ROW_LENGTH,ut.width);for(let st=0,iu=sc.length;st<iu;st++){const oc=sc[st],_c=Math.floor(oc.start/4),wc=Math.ceil(oc.count/4),Sc=_c%ut.width,iu=Math.floor(_c/ut.width),su=wc,lu=1;at.pixelStorei(at.UNPACK_SKIP_PIXELS,Sc),at.pixelStorei(at.UNPACK_SKIP_ROWS,iu),ot.texSubImage2D(at.TEXTURE_2D,0,Sc,iu,su,lu,Hl,rc,ut.data)}st.clearUpdateRanges(),at.pixelStorei(at.UNPACK_ROW_LENGTH,_c),at.pixelStorei(at.UNPACK_SKIP_PIXELS,wc),at.pixelStorei(at.UNPACK_SKIP_ROWS,Sc)}}(oc,cu,uu,pu)):ot.texImage2D(at.TEXTURE_2D,0,gu,cu.width,cu.height,0,uu,pu,cu.data);else if(oc.isCompressedTexture)if(oc.isCompressedArrayTexture){yu&&_u&&ot.texStorage3D(at.TEXTURE_2D_ARRAY,Su,gu,Au[0].width,Au[0].height,cu.depth);for(let st=0,Hl=Au.length;st<Hl;st++)if(mu=Au[st],oc.format!==ut.GWd)if(null!==uu)if(yu){if(xu)if(oc.layerUpdates.size>0){const Hl=(0,ut.Nex)(mu.width,mu.height,oc.format,oc.type);for(const ut of oc.layerUpdates){const rc=mu.data.subarray(ut*Hl/mu.data.BYTES_PER_ELEMENT,(ut+1)*Hl/mu.data.BYTES_PER_ELEMENT);ot.compressedTexSubImage3D(at.TEXTURE_2D_ARRAY,st,0,0,ut,mu.width,mu.height,1,uu,rc)}oc.clearLayerUpdates()}else ot.compressedTexSubImage3D(at.TEXTURE_2D_ARRAY,st,0,0,0,mu.width,mu.height,cu.depth,uu,mu.data)}else ot.compressedTexImage3D(at.TEXTURE_2D_ARRAY,st,gu,mu.width,mu.height,cu.depth,0,mu.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else yu?xu&&ot.texSubImage3D(at.TEXTURE_2D_ARRAY,st,0,0,0,mu.width,mu.height,cu.depth,uu,pu,mu.data):ot.texImage3D(at.TEXTURE_2D_ARRAY,st,gu,mu.width,mu.height,cu.depth,0,uu,pu,mu.data)}else{yu&&_u&&ot.texStorage2D(at.TEXTURE_2D,Su,gu,Au[0].width,Au[0].height);for(let st=0,Hl=Au.length;st<Hl;st++)mu=Au[st],oc.format!==ut.GWd?null!==uu?yu?xu&&ot.compressedTexSubImage2D(at.TEXTURE_2D,st,0,0,mu.width,mu.height,uu,mu.data):ot.compressedTexImage2D(at.TEXTURE_2D,st,gu,mu.width,mu.height,0,mu.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):yu?xu&&ot.texSubImage2D(at.TEXTURE_2D,st,0,0,mu.width,mu.height,uu,pu,mu.data):ot.texImage2D(at.TEXTURE_2D,st,gu,mu.width,mu.height,0,uu,pu,mu.data)}else if(oc.isDataArrayTexture)if(yu){if(_u&&ot.texStorage3D(at.TEXTURE_2D_ARRAY,Su,gu,cu.width,cu.height,cu.depth),xu)if(oc.layerUpdates.size>0){const st=(0,ut.Nex)(cu.width,cu.height,oc.format,oc.type);for(const ut of oc.layerUpdates){const Hl=cu.data.subarray(ut*st/cu.data.BYTES_PER_ELEMENT,(ut+1)*st/cu.data.BYTES_PER_ELEMENT);ot.texSubImage3D(at.TEXTURE_2D_ARRAY,0,0,0,ut,cu.width,cu.height,1,uu,pu,Hl)}oc.clearLayerUpdates()}else ot.texSubImage3D(at.TEXTURE_2D_ARRAY,0,0,0,0,cu.width,cu.height,cu.depth,uu,pu,cu.data)}else ot.texImage3D(at.TEXTURE_2D_ARRAY,0,gu,cu.width,cu.height,cu.depth,0,uu,pu,cu.data);else if(oc.isData3DTexture)yu?(_u&&ot.texStorage3D(at.TEXTURE_3D,Su,gu,cu.width,cu.height,cu.depth),xu&&ot.texSubImage3D(at.TEXTURE_3D,0,0,0,0,cu.width,cu.height,cu.depth,uu,pu,cu.data)):ot.texImage3D(at.TEXTURE_3D,0,gu,cu.width,cu.height,cu.depth,0,uu,pu,cu.data);else if(oc.isFramebufferTexture){if(_u)if(yu)ot.texStorage2D(at.TEXTURE_2D,Su,gu,cu.width,cu.height);else{let st=cu.width,ut=cu.height;for(let Hl=0;Hl<Su;Hl++)ot.texImage2D(at.TEXTURE_2D,Hl,gu,st,ut,0,uu,pu,null),st>>=1,ut>>=1}}else if(Au.length>0){if(yu&&_u){const st=getDimensions(Au[0]);ot.texStorage2D(at.TEXTURE_2D,Su,gu,st.width,st.height)}for(let st=0,ut=Au.length;st<ut;st++)mu=Au[st],yu?xu&&ot.texSubImage2D(at.TEXTURE_2D,st,0,0,uu,pu,mu):ot.texImage2D(at.TEXTURE_2D,st,gu,uu,pu,mu);oc.generateMipmaps=!1}else if(yu){if(_u){const st=getDimensions(cu);ot.texStorage2D(at.TEXTURE_2D,Su,gu,st.width,st.height)}xu&&ot.texSubImage2D(at.TEXTURE_2D,0,0,0,uu,pu,cu)}else ot.texImage2D(at.TEXTURE_2D,0,gu,uu,pu,cu);textureNeedsGenerateMipmaps(oc)&&generateMipmap(wc),su.__version=iu.version,oc.onUpdate&&oc.onUpdate(oc)}st.__version=oc.version}function setupFrameBufferTexture(st,ut,rc,oc,wc,Sc){const iu=sc.convert(rc.format,rc.colorSpace),su=sc.convert(rc.type),lu=getInternalFormat(rc.internalFormat,iu,su,rc.colorSpace),cu=Hl.get(ut),uu=Hl.get(rc);if(uu.__renderTarget=ut,!cu.__hasExternalTextures){const st=Math.max(1,ut.width>>Sc),Hl=Math.max(1,ut.height>>Sc);wc===at.TEXTURE_3D||wc===at.TEXTURE_2D_ARRAY?ot.texImage3D(wc,Sc,lu,st,Hl,ut.depth,0,iu,su,null):ot.texImage2D(wc,Sc,lu,st,Hl,0,iu,su,null)}ot.bindFramebuffer(at.FRAMEBUFFER,st),useMultisampledRTT(ut)?_c.framebufferTexture2DMultisampleEXT(at.FRAMEBUFFER,oc,wc,uu.__webglTexture,0,getRenderTargetSamples(ut)):(wc===at.TEXTURE_2D||wc>=at.TEXTURE_CUBE_MAP_POSITIVE_X&&wc<=at.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&at.framebufferTexture2D(at.FRAMEBUFFER,oc,wc,uu.__webglTexture,Sc),ot.bindFramebuffer(at.FRAMEBUFFER,null)}function setupRenderBufferStorage(st,ot,ut){if(at.bindRenderbuffer(at.RENDERBUFFER,st),ot.depthBuffer){const Hl=ot.depthTexture,rc=Hl&&Hl.isDepthTexture?Hl.type:null,sc=getInternalDepthFormat(ot.stencilBuffer,rc),oc=ot.stencilBuffer?at.DEPTH_STENCIL_ATTACHMENT:at.DEPTH_ATTACHMENT,wc=getRenderTargetSamples(ot);useMultisampledRTT(ot)?_c.renderbufferStorageMultisampleEXT(at.RENDERBUFFER,wc,sc,ot.width,ot.height):ut?at.renderbufferStorageMultisample(at.RENDERBUFFER,wc,sc,ot.width,ot.height):at.renderbufferStorage(at.RENDERBUFFER,sc,ot.width,ot.height),at.framebufferRenderbuffer(at.FRAMEBUFFER,oc,at.RENDERBUFFER,st)}else{const st=ot.textures;for(let Hl=0;Hl<st.length;Hl++){const rc=st[Hl],oc=sc.convert(rc.format,rc.colorSpace),wc=sc.convert(rc.type),Sc=getInternalFormat(rc.internalFormat,oc,wc,rc.colorSpace),iu=getRenderTargetSamples(ot);ut&&!1===useMultisampledRTT(ot)?at.renderbufferStorageMultisample(at.RENDERBUFFER,iu,Sc,ot.width,ot.height):useMultisampledRTT(ot)?_c.renderbufferStorageMultisampleEXT(at.RENDERBUFFER,iu,Sc,ot.width,ot.height):at.renderbufferStorage(at.RENDERBUFFER,Sc,ot.width,ot.height)}}at.bindRenderbuffer(at.RENDERBUFFER,null)}function setupDepthTexture(st,rc){if(rc&&rc.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(ot.bindFramebuffer(at.FRAMEBUFFER,st),!rc.depthTexture||!rc.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const sc=Hl.get(rc.depthTexture);sc.__renderTarget=rc,sc.__webglTexture&&rc.depthTexture.image.width===rc.width&&rc.depthTexture.image.height===rc.height||(rc.depthTexture.image.width=rc.width,rc.depthTexture.image.height=rc.height,rc.depthTexture.needsUpdate=!0),setTexture2D(rc.depthTexture,0);const oc=sc.__webglTexture,wc=getRenderTargetSamples(rc);if(rc.depthTexture.format===ut.zdS)useMultisampledRTT(rc)?_c.framebufferTexture2DMultisampleEXT(at.FRAMEBUFFER,at.DEPTH_ATTACHMENT,at.TEXTURE_2D,oc,0,wc):at.framebufferTexture2D(at.FRAMEBUFFER,at.DEPTH_ATTACHMENT,at.TEXTURE_2D,oc,0);else{if(rc.depthTexture.format!==ut.dcC)throw new Error("Unknown depthTexture format");useMultisampledRTT(rc)?_c.framebufferTexture2DMultisampleEXT(at.FRAMEBUFFER,at.DEPTH_STENCIL_ATTACHMENT,at.TEXTURE_2D,oc,0,wc):at.framebufferTexture2D(at.FRAMEBUFFER,at.DEPTH_STENCIL_ATTACHMENT,at.TEXTURE_2D,oc,0)}}function setupDepthRenderbuffer(st){const ut=Hl.get(st),rc=!0===st.isWebGLCubeRenderTarget;if(ut.__boundDepthTexture!==st.depthTexture){const at=st.depthTexture;if(ut.__depthDisposeCallback&&ut.__depthDisposeCallback(),at){const disposeEvent=()=>{delete ut.__boundDepthTexture,delete ut.__depthDisposeCallback,at.removeEventListener("dispose",disposeEvent)};at.addEventListener("dispose",disposeEvent),ut.__depthDisposeCallback=disposeEvent}ut.__boundDepthTexture=at}if(st.depthTexture&&!ut.__autoAllocateDepthBuffer){if(rc)throw new Error("target.depthTexture not supported in Cube render targets");const at=st.texture.mipmaps;at&&at.length>0?setupDepthTexture(ut.__webglFramebuffer[0],st):setupDepthTexture(ut.__webglFramebuffer,st)}else if(rc){ut.__webglDepthbuffer=[];for(let Hl=0;Hl<6;Hl++)if(ot.bindFramebuffer(at.FRAMEBUFFER,ut.__webglFramebuffer[Hl]),void 0===ut.__webglDepthbuffer[Hl])ut.__webglDepthbuffer[Hl]=at.createRenderbuffer(),setupRenderBufferStorage(ut.__webglDepthbuffer[Hl],st,!1);else{const ot=st.stencilBuffer?at.DEPTH_STENCIL_ATTACHMENT:at.DEPTH_ATTACHMENT,rc=ut.__webglDepthbuffer[Hl];at.bindRenderbuffer(at.RENDERBUFFER,rc),at.framebufferRenderbuffer(at.FRAMEBUFFER,ot,at.RENDERBUFFER,rc)}}else{const Hl=st.texture.mipmaps;if(Hl&&Hl.length>0?ot.bindFramebuffer(at.FRAMEBUFFER,ut.__webglFramebuffer[0]):ot.bindFramebuffer(at.FRAMEBUFFER,ut.__webglFramebuffer),void 0===ut.__webglDepthbuffer)ut.__webglDepthbuffer=at.createRenderbuffer(),setupRenderBufferStorage(ut.__webglDepthbuffer,st,!1);else{const ot=st.stencilBuffer?at.DEPTH_STENCIL_ATTACHMENT:at.DEPTH_ATTACHMENT,Hl=ut.__webglDepthbuffer;at.bindRenderbuffer(at.RENDERBUFFER,Hl),at.framebufferRenderbuffer(at.FRAMEBUFFER,ot,at.RENDERBUFFER,Hl)}}ot.bindFramebuffer(at.FRAMEBUFFER,null)}const Au=[],yu=[];function getRenderTargetSamples(at){return Math.min(rc.maxSamples,at.samples)}function useMultisampledRTT(at){const ot=Hl.get(at);return at.samples>0&&!0===st.has("WEBGL_multisampled_render_to_texture")&&!1!==ot.__useRenderToTexture}function verifyColorSpace(at,st){const ot=at.colorSpace,Hl=at.format,rc=at.type;return!0===at.isCompressedTexture||!0===at.isVideoTexture||ot!==ut.Zr2&&ot!==ut.jf0&&(ut.ppV.getTransfer(ot)===ut.KLL?Hl===ut.GWd&&rc===ut.OUM||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ot)),st}function getDimensions(at){return"undefined"!==typeof HTMLImageElement&&at instanceof HTMLImageElement?(Sc.width=at.naturalWidth||at.width,Sc.height=at.naturalHeight||at.height):"undefined"!==typeof VideoFrame&&at instanceof VideoFrame?(Sc.width=at.displayWidth,Sc.height=at.displayHeight):(Sc.width=at.width,Sc.height=at.height),Sc}this.allocateTextureUnit=function(){const at=uu;return at>=rc.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+at+" texture units while this GPU supports only "+rc.maxTextures),uu+=1,at},this.resetTextureUnits=function(){uu=0},this.setTexture2D=setTexture2D,this.setTexture2DArray=function(st,ut){const rc=Hl.get(st);!1===st.isRenderTargetTexture&&st.version>0&&rc.__version!==st.version?uploadTexture(rc,st,ut):ot.bindTexture(at.TEXTURE_2D_ARRAY,rc.__webglTexture,at.TEXTURE0+ut)},this.setTexture3D=function(st,ut){const rc=Hl.get(st);!1===st.isRenderTargetTexture&&st.version>0&&rc.__version!==st.version?uploadTexture(rc,st,ut):ot.bindTexture(at.TEXTURE_3D,rc.__webglTexture,at.TEXTURE0+ut)},this.setTextureCube=function(st,oc){const _c=Hl.get(st);st.version>0&&_c.__version!==st.version?function(st,oc,_c){if(6!==oc.image.length)return;const wc=initTexture(st,oc),Sc=oc.source;ot.bindTexture(at.TEXTURE_CUBE_MAP,st.__webglTexture,at.TEXTURE0+_c);const iu=Hl.get(Sc);if(Sc.version!==iu.__version||!0===wc){ot.activeTexture(at.TEXTURE0+_c);const st=ut.ppV.getPrimaries(ut.ppV.workingColorSpace),Hl=oc.colorSpace===ut.jf0?null:ut.ppV.getPrimaries(oc.colorSpace),su=oc.colorSpace===ut.jf0||st===Hl?at.NONE:at.BROWSER_DEFAULT_WEBGL;at.pixelStorei(at.UNPACK_FLIP_Y_WEBGL,oc.flipY),at.pixelStorei(at.UNPACK_PREMULTIPLY_ALPHA_WEBGL,oc.premultiplyAlpha),at.pixelStorei(at.UNPACK_ALIGNMENT,oc.unpackAlignment),at.pixelStorei(at.UNPACK_COLORSPACE_CONVERSION_WEBGL,su);const lu=oc.isCompressedTexture||oc.image[0].isCompressedTexture,cu=oc.image[0]&&oc.image[0].isDataTexture,uu=[];for(let at=0;at<6;at++)uu[at]=lu||cu?cu?oc.image[at].image:oc.image[at]:resizeImage(oc.image[at],!0,rc.maxCubemapSize),uu[at]=verifyColorSpace(oc,uu[at]);const pu=uu[0],mu=sc.convert(oc.format,oc.colorSpace),gu=sc.convert(oc.type),Au=getInternalFormat(oc.internalFormat,mu,gu,oc.colorSpace),yu=!0!==oc.isVideoTexture,_u=void 0===iu.__version||!0===wc,xu=Sc.dataReady;let Su,Du=getMipLevels(oc,pu);if(setTextureParameters(at.TEXTURE_CUBE_MAP,oc),lu){yu&&_u&&ot.texStorage2D(at.TEXTURE_CUBE_MAP,Du,Au,pu.width,pu.height);for(let st=0;st<6;st++){Su=uu[st].mipmaps;for(let Hl=0;Hl<Su.length;Hl++){const rc=Su[Hl];oc.format!==ut.GWd?null!==mu?yu?xu&&ot.compressedTexSubImage2D(at.TEXTURE_CUBE_MAP_POSITIVE_X+st,Hl,0,0,rc.width,rc.height,mu,rc.data):ot.compressedTexImage2D(at.TEXTURE_CUBE_MAP_POSITIVE_X+st,Hl,Au,rc.width,rc.height,0,rc.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):yu?xu&&ot.texSubImage2D(at.TEXTURE_CUBE_MAP_POSITIVE_X+st,Hl,0,0,rc.width,rc.height,mu,gu,rc.data):ot.texImage2D(at.TEXTURE_CUBE_MAP_POSITIVE_X+st,Hl,Au,rc.width,rc.height,0,mu,gu,rc.data)}}}else{if(Su=oc.mipmaps,yu&&_u){Su.length>0&&Du++;const st=getDimensions(uu[0]);ot.texStorage2D(at.TEXTURE_CUBE_MAP,Du,Au,st.width,st.height)}for(let st=0;st<6;st++)if(cu){yu?xu&&ot.texSubImage2D(at.TEXTURE_CUBE_MAP_POSITIVE_X+st,0,0,0,uu[st].width,uu[st].height,mu,gu,uu[st].data):ot.texImage2D(at.TEXTURE_CUBE_MAP_POSITIVE_X+st,0,Au,uu[st].width,uu[st].height,0,mu,gu,uu[st].data);for(let ut=0;ut<Su.length;ut++){const Hl=Su[ut].image[st].image;yu?xu&&ot.texSubImage2D(at.TEXTURE_CUBE_MAP_POSITIVE_X+st,ut+1,0,0,Hl.width,Hl.height,mu,gu,Hl.data):ot.texImage2D(at.TEXTURE_CUBE_MAP_POSITIVE_X+st,ut+1,Au,Hl.width,Hl.height,0,mu,gu,Hl.data)}}else{yu?xu&&ot.texSubImage2D(at.TEXTURE_CUBE_MAP_POSITIVE_X+st,0,0,0,mu,gu,uu[st]):ot.texImage2D(at.TEXTURE_CUBE_MAP_POSITIVE_X+st,0,Au,mu,gu,uu[st]);for(let ut=0;ut<Su.length;ut++){const Hl=Su[ut];yu?xu&&ot.texSubImage2D(at.TEXTURE_CUBE_MAP_POSITIVE_X+st,ut+1,0,0,mu,gu,Hl.image[st]):ot.texImage2D(at.TEXTURE_CUBE_MAP_POSITIVE_X+st,ut+1,Au,mu,gu,Hl.image[st])}}}textureNeedsGenerateMipmaps(oc)&&generateMipmap(at.TEXTURE_CUBE_MAP),iu.__version=Sc.version,oc.onUpdate&&oc.onUpdate(oc)}st.__version=oc.version}(_c,st,oc):ot.bindTexture(at.TEXTURE_CUBE_MAP,_c.__webglTexture,at.TEXTURE0+oc)},this.rebindTextures=function(st,ot,ut){const rc=Hl.get(st);void 0!==ot&&setupFrameBufferTexture(rc.__webglFramebuffer,st,st.texture,at.COLOR_ATTACHMENT0,at.TEXTURE_2D,0),void 0!==ut&&setupDepthRenderbuffer(st)},this.setupRenderTarget=function(st){const ut=st.texture,rc=Hl.get(st),_c=Hl.get(ut);st.addEventListener("dispose",onRenderTargetDispose);const wc=st.textures,Sc=!0===st.isWebGLCubeRenderTarget,iu=wc.length>1;if(iu||(void 0===_c.__webglTexture&&(_c.__webglTexture=at.createTexture()),_c.__version=ut.version,oc.memory.textures++),Sc){rc.__webglFramebuffer=[];for(let st=0;st<6;st++)if(ut.mipmaps&&ut.mipmaps.length>0){rc.__webglFramebuffer[st]=[];for(let ot=0;ot<ut.mipmaps.length;ot++)rc.__webglFramebuffer[st][ot]=at.createFramebuffer()}else rc.__webglFramebuffer[st]=at.createFramebuffer()}else{if(ut.mipmaps&&ut.mipmaps.length>0){rc.__webglFramebuffer=[];for(let st=0;st<ut.mipmaps.length;st++)rc.__webglFramebuffer[st]=at.createFramebuffer()}else rc.__webglFramebuffer=at.createFramebuffer();if(iu)for(let st=0,ot=wc.length;st<ot;st++){const ot=Hl.get(wc[st]);void 0===ot.__webglTexture&&(ot.__webglTexture=at.createTexture(),oc.memory.textures++)}if(st.samples>0&&!1===useMultisampledRTT(st)){rc.__webglMultisampledFramebuffer=at.createFramebuffer(),rc.__webglColorRenderbuffer=[],ot.bindFramebuffer(at.FRAMEBUFFER,rc.__webglMultisampledFramebuffer);for(let ot=0;ot<wc.length;ot++){const ut=wc[ot];rc.__webglColorRenderbuffer[ot]=at.createRenderbuffer(),at.bindRenderbuffer(at.RENDERBUFFER,rc.__webglColorRenderbuffer[ot]);const Hl=sc.convert(ut.format,ut.colorSpace),oc=sc.convert(ut.type),_c=getInternalFormat(ut.internalFormat,Hl,oc,ut.colorSpace,!0===st.isXRRenderTarget),Sc=getRenderTargetSamples(st);at.renderbufferStorageMultisample(at.RENDERBUFFER,Sc,_c,st.width,st.height),at.framebufferRenderbuffer(at.FRAMEBUFFER,at.COLOR_ATTACHMENT0+ot,at.RENDERBUFFER,rc.__webglColorRenderbuffer[ot])}at.bindRenderbuffer(at.RENDERBUFFER,null),st.depthBuffer&&(rc.__webglDepthRenderbuffer=at.createRenderbuffer(),setupRenderBufferStorage(rc.__webglDepthRenderbuffer,st,!0)),ot.bindFramebuffer(at.FRAMEBUFFER,null)}}if(Sc){ot.bindTexture(at.TEXTURE_CUBE_MAP,_c.__webglTexture),setTextureParameters(at.TEXTURE_CUBE_MAP,ut);for(let ot=0;ot<6;ot++)if(ut.mipmaps&&ut.mipmaps.length>0)for(let Hl=0;Hl<ut.mipmaps.length;Hl++)setupFrameBufferTexture(rc.__webglFramebuffer[ot][Hl],st,ut,at.COLOR_ATTACHMENT0,at.TEXTURE_CUBE_MAP_POSITIVE_X+ot,Hl);else setupFrameBufferTexture(rc.__webglFramebuffer[ot],st,ut,at.COLOR_ATTACHMENT0,at.TEXTURE_CUBE_MAP_POSITIVE_X+ot,0);textureNeedsGenerateMipmaps(ut)&&generateMipmap(at.TEXTURE_CUBE_MAP),ot.unbindTexture()}else if(iu){for(let ut=0,sc=wc.length;ut<sc;ut++){const sc=wc[ut],oc=Hl.get(sc);let _c=at.TEXTURE_2D;(st.isWebGL3DRenderTarget||st.isWebGLArrayRenderTarget)&&(_c=st.isWebGL3DRenderTarget?at.TEXTURE_3D:at.TEXTURE_2D_ARRAY),ot.bindTexture(_c,oc.__webglTexture),setTextureParameters(_c,sc),setupFrameBufferTexture(rc.__webglFramebuffer,st,sc,at.COLOR_ATTACHMENT0+ut,_c,0),textureNeedsGenerateMipmaps(sc)&&generateMipmap(_c)}ot.unbindTexture()}else{let Hl=at.TEXTURE_2D;if((st.isWebGL3DRenderTarget||st.isWebGLArrayRenderTarget)&&(Hl=st.isWebGL3DRenderTarget?at.TEXTURE_3D:at.TEXTURE_2D_ARRAY),ot.bindTexture(Hl,_c.__webglTexture),setTextureParameters(Hl,ut),ut.mipmaps&&ut.mipmaps.length>0)for(let ot=0;ot<ut.mipmaps.length;ot++)setupFrameBufferTexture(rc.__webglFramebuffer[ot],st,ut,at.COLOR_ATTACHMENT0,Hl,ot);else setupFrameBufferTexture(rc.__webglFramebuffer,st,ut,at.COLOR_ATTACHMENT0,Hl,0);textureNeedsGenerateMipmaps(ut)&&generateMipmap(Hl),ot.unbindTexture()}st.depthBuffer&&setupDepthRenderbuffer(st)},this.updateRenderTargetMipmap=function(at){const st=at.textures;for(let ut=0,rc=st.length;ut<rc;ut++){const rc=st[ut];if(textureNeedsGenerateMipmaps(rc)){const st=getTargetType(at),ut=Hl.get(rc).__webglTexture;ot.bindTexture(st,ut),generateMipmap(st),ot.unbindTexture()}}},this.updateMultisampleRenderTarget=function(st){if(st.samples>0)if(!1===useMultisampledRTT(st)){const ut=st.textures,rc=st.width,sc=st.height;let oc=at.COLOR_BUFFER_BIT;const _c=st.stencilBuffer?at.DEPTH_STENCIL_ATTACHMENT:at.DEPTH_ATTACHMENT,Sc=Hl.get(st),iu=ut.length>1;if(iu)for(let st=0;st<ut.length;st++)ot.bindFramebuffer(at.FRAMEBUFFER,Sc.__webglMultisampledFramebuffer),at.framebufferRenderbuffer(at.FRAMEBUFFER,at.COLOR_ATTACHMENT0+st,at.RENDERBUFFER,null),ot.bindFramebuffer(at.FRAMEBUFFER,Sc.__webglFramebuffer),at.framebufferTexture2D(at.DRAW_FRAMEBUFFER,at.COLOR_ATTACHMENT0+st,at.TEXTURE_2D,null,0);ot.bindFramebuffer(at.READ_FRAMEBUFFER,Sc.__webglMultisampledFramebuffer);const su=st.texture.mipmaps;su&&su.length>0?ot.bindFramebuffer(at.DRAW_FRAMEBUFFER,Sc.__webglFramebuffer[0]):ot.bindFramebuffer(at.DRAW_FRAMEBUFFER,Sc.__webglFramebuffer);for(let ot=0;ot<ut.length;ot++){if(st.resolveDepthBuffer&&(st.depthBuffer&&(oc|=at.DEPTH_BUFFER_BIT),st.stencilBuffer&&st.resolveStencilBuffer&&(oc|=at.STENCIL_BUFFER_BIT)),iu){at.framebufferRenderbuffer(at.READ_FRAMEBUFFER,at.COLOR_ATTACHMENT0,at.RENDERBUFFER,Sc.__webglColorRenderbuffer[ot]);const st=Hl.get(ut[ot]).__webglTexture;at.framebufferTexture2D(at.DRAW_FRAMEBUFFER,at.COLOR_ATTACHMENT0,at.TEXTURE_2D,st,0)}at.blitFramebuffer(0,0,rc,sc,0,0,rc,sc,oc,at.NEAREST),!0===wc&&(Au.length=0,yu.length=0,Au.push(at.COLOR_ATTACHMENT0+ot),st.depthBuffer&&!1===st.resolveDepthBuffer&&(Au.push(_c),yu.push(_c),at.invalidateFramebuffer(at.DRAW_FRAMEBUFFER,yu)),at.invalidateFramebuffer(at.READ_FRAMEBUFFER,Au))}if(ot.bindFramebuffer(at.READ_FRAMEBUFFER,null),ot.bindFramebuffer(at.DRAW_FRAMEBUFFER,null),iu)for(let st=0;st<ut.length;st++){ot.bindFramebuffer(at.FRAMEBUFFER,Sc.__webglMultisampledFramebuffer),at.framebufferRenderbuffer(at.FRAMEBUFFER,at.COLOR_ATTACHMENT0+st,at.RENDERBUFFER,Sc.__webglColorRenderbuffer[st]);const rc=Hl.get(ut[st]).__webglTexture;ot.bindFramebuffer(at.FRAMEBUFFER,Sc.__webglFramebuffer),at.framebufferTexture2D(at.DRAW_FRAMEBUFFER,at.COLOR_ATTACHMENT0+st,at.TEXTURE_2D,rc,0)}ot.bindFramebuffer(at.DRAW_FRAMEBUFFER,Sc.__webglMultisampledFramebuffer)}else if(st.depthBuffer&&!1===st.resolveDepthBuffer&&wc){const ot=st.stencilBuffer?at.DEPTH_STENCIL_ATTACHMENT:at.DEPTH_ATTACHMENT;at.invalidateFramebuffer(at.DRAW_FRAMEBUFFER,[ot])}},this.setupDepthRenderbuffer=setupDepthRenderbuffer,this.setupFrameBufferTexture=setupFrameBufferTexture,this.useMultisampledRTT=useMultisampledRTT}function WebGLUtils(at,st){return{convert:function(ot,Hl){let rc;void 0===Hl&&(Hl=ut.jf0);const sc=ut.ppV.getTransfer(Hl);if(ot===ut.OUM)return at.UNSIGNED_BYTE;if(ot===ut.Wew)return at.UNSIGNED_SHORT_4_4_4_4;if(ot===ut.gJ2)return at.UNSIGNED_SHORT_5_5_5_1;if(ot===ut.Dmk)return at.UNSIGNED_INT_5_9_9_9_REV;if(ot===ut.tJf)return at.BYTE;if(ot===ut.fBL)return at.SHORT;if(ot===ut.cHt)return at.UNSIGNED_SHORT;if(ot===ut.Yuy)return at.INT;if(ot===ut.bkx)return at.UNSIGNED_INT;if(ot===ut.RQf)return at.FLOAT;if(ot===ut.ix0)return at.HALF_FLOAT;if(ot===ut.wrO)return at.ALPHA;if(ot===ut.HIg)return at.RGB;if(ot===ut.GWd)return at.RGBA;if(ot===ut.zdS)return at.DEPTH_COMPONENT;if(ot===ut.dcC)return at.DEPTH_STENCIL;if(ot===ut.VT0)return at.RED;if(ot===ut.ZQM)return at.RED_INTEGER;if(ot===ut.paN)return at.RG;if(ot===ut.TkQ)return at.RG_INTEGER;if(ot===ut.c90)return at.RGBA_INTEGER;if(ot===ut.IE4||ot===ut.Nz6||ot===ut.jR7||ot===ut.BXX)if(sc===ut.KLL){if(rc=st.get("WEBGL_compressed_texture_s3tc_srgb"),null===rc)return null;if(ot===ut.IE4)return rc.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(ot===ut.Nz6)return rc.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(ot===ut.jR7)return rc.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(ot===ut.BXX)return rc.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(rc=st.get("WEBGL_compressed_texture_s3tc"),null===rc)return null;if(ot===ut.IE4)return rc.COMPRESSED_RGB_S3TC_DXT1_EXT;if(ot===ut.Nz6)return rc.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(ot===ut.jR7)return rc.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(ot===ut.BXX)return rc.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(ot===ut.k6Q||ot===ut.kTp||ot===ut.HXV||ot===ut.pBf){if(rc=st.get("WEBGL_compressed_texture_pvrtc"),null===rc)return null;if(ot===ut.k6Q)return rc.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(ot===ut.kTp)return rc.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(ot===ut.HXV)return rc.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(ot===ut.pBf)return rc.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(ot===ut.CVz||ot===ut.Riy||ot===ut.KDk){if(rc=st.get("WEBGL_compressed_texture_etc"),null===rc)return null;if(ot===ut.CVz||ot===ut.Riy)return sc===ut.KLL?rc.COMPRESSED_SRGB8_ETC2:rc.COMPRESSED_RGB8_ETC2;if(ot===ut.KDk)return sc===ut.KLL?rc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:rc.COMPRESSED_RGBA8_ETC2_EAC}if(ot===ut.qa3||ot===ut.B_h||ot===ut.czI||ot===ut.rSH||ot===ut.Qrf||ot===ut.psI||ot===ut.a5J||ot===ut._QJ||ot===ut.uB5||ot===ut.lyL||ot===ut.bC7||ot===ut.y3Z||ot===ut.ojs||ot===ut.S$4){if(rc=st.get("WEBGL_compressed_texture_astc"),null===rc)return null;if(ot===ut.qa3)return sc===ut.KLL?rc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:rc.COMPRESSED_RGBA_ASTC_4x4_KHR;if(ot===ut.B_h)return sc===ut.KLL?rc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:rc.COMPRESSED_RGBA_ASTC_5x4_KHR;if(ot===ut.czI)return sc===ut.KLL?rc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:rc.COMPRESSED_RGBA_ASTC_5x5_KHR;if(ot===ut.rSH)return sc===ut.KLL?rc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:rc.COMPRESSED_RGBA_ASTC_6x5_KHR;if(ot===ut.Qrf)return sc===ut.KLL?rc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:rc.COMPRESSED_RGBA_ASTC_6x6_KHR;if(ot===ut.psI)return sc===ut.KLL?rc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:rc.COMPRESSED_RGBA_ASTC_8x5_KHR;if(ot===ut.a5J)return sc===ut.KLL?rc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:rc.COMPRESSED_RGBA_ASTC_8x6_KHR;if(ot===ut._QJ)return sc===ut.KLL?rc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:rc.COMPRESSED_RGBA_ASTC_8x8_KHR;if(ot===ut.uB5)return sc===ut.KLL?rc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:rc.COMPRESSED_RGBA_ASTC_10x5_KHR;if(ot===ut.lyL)return sc===ut.KLL?rc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:rc.COMPRESSED_RGBA_ASTC_10x6_KHR;if(ot===ut.bC7)return sc===ut.KLL?rc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:rc.COMPRESSED_RGBA_ASTC_10x8_KHR;if(ot===ut.y3Z)return sc===ut.KLL?rc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:rc.COMPRESSED_RGBA_ASTC_10x10_KHR;if(ot===ut.ojs)return sc===ut.KLL?rc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:rc.COMPRESSED_RGBA_ASTC_12x10_KHR;if(ot===ut.S$4)return sc===ut.KLL?rc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:rc.COMPRESSED_RGBA_ASTC_12x12_KHR}if(ot===ut.Fn||ot===ut.H23||ot===ut.W9U){if(rc=st.get("EXT_texture_compression_bptc"),null===rc)return null;if(ot===ut.Fn)return sc===ut.KLL?rc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:rc.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(ot===ut.H23)return rc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(ot===ut.W9U)return rc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(ot===ut.Kef||ot===ut.XG_||ot===ut.HO_||ot===ut.CWW){if(rc=st.get("EXT_texture_compression_rgtc"),null===rc)return null;if(ot===ut.Fn)return rc.COMPRESSED_RED_RGTC1_EXT;if(ot===ut.XG_)return rc.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(ot===ut.HO_)return rc.COMPRESSED_RED_GREEN_RGTC2_EXT;if(ot===ut.CWW)return rc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return ot===ut.V3x?at.UNSIGNED_INT_24_8:void 0!==at[ot]?at[ot]:null}}}class ExternalTexture extends ut.gPd{constructor(at){void 0===at&&(at=null),super(),this.sourceTexture=at,this.isExternalTexture=!0}}class WebXRDepthSensing{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(at,st){if(null===this.texture){const ot=new ExternalTexture(at.texture);at.depthNear===st.depthNear&&at.depthFar===st.depthFar||(this.depthNear=at.depthNear,this.depthFar=at.depthFar),this.texture=ot}}getMesh(at){if(null!==this.texture&&null===this.mesh){const st=at.cameras[0].viewport,ot=new ut.BKk({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:st.z},depthHeight:{value:st.w}}});this.mesh=new ut.eaF(new ut.bdM(20,20),ot)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class WebXRManager extends ut.Qev{constructor(at,st){super();const ot=this;let Hl=null,rc=1,sc=null,oc="local-floor",_c=1,wc=null,Sc=null,iu=null,su=null,lu=null,cu=null;const uu=new WebXRDepthSensing,pu={},mu=st.getContextAttributes();let gu=null,Au=null;const yu=[],_u=[],xu=new ut.I9Y;let Su=null;const Du=new ut.ubm;Du.viewport=new ut.IUQ;const Lu=new ut.ubm;Lu.viewport=new ut.IUQ;const $u=[Du,Lu],hh=new ut.nZQ;let ed=null,td=null;function onSessionEvent(at){const st=_u.indexOf(at.inputSource);if(-1===st)return;const ot=yu[st];void 0!==ot&&(ot.update(at.inputSource,at.frame,wc||sc),ot.dispatchEvent({type:at.type,data:at.inputSource}))}function onSessionEnd(){Hl.removeEventListener("select",onSessionEvent),Hl.removeEventListener("selectstart",onSessionEvent),Hl.removeEventListener("selectend",onSessionEvent),Hl.removeEventListener("squeeze",onSessionEvent),Hl.removeEventListener("squeezestart",onSessionEvent),Hl.removeEventListener("squeezeend",onSessionEvent),Hl.removeEventListener("end",onSessionEnd),Hl.removeEventListener("inputsourceschange",onInputSourcesChange);for(let at=0;at<yu.length;at++){const st=_u[at];null!==st&&(_u[at]=null,yu[at].disconnect(st))}ed=null,td=null,uu.reset();for(const at in pu)delete pu[at];at.setRenderTarget(gu),lu=null,su=null,iu=null,Hl=null,Au=null,ad.stop(),ot.isPresenting=!1,at.setPixelRatio(Su),at.setSize(xu.width,xu.height,!1),ot.dispatchEvent({type:"sessionend"})}function onInputSourcesChange(at){for(let st=0;st<at.removed.length;st++){const ot=at.removed[st],ut=_u.indexOf(ot);ut>=0&&(_u[ut]=null,yu[ut].disconnect(ot))}for(let st=0;st<at.added.length;st++){const ot=at.added[st];let ut=_u.indexOf(ot);if(-1===ut){for(let at=0;at<yu.length;at++){if(at>=_u.length){_u.push(ot),ut=at;break}if(null===_u[at]){_u[at]=ot,ut=at;break}}if(-1===ut)break}const Hl=yu[ut];Hl&&Hl.connect(ot)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(at){let st=yu[at];return void 0===st&&(st=new ut.R3r,yu[at]=st),st.getTargetRaySpace()},this.getControllerGrip=function(at){let st=yu[at];return void 0===st&&(st=new ut.R3r,yu[at]=st),st.getGripSpace()},this.getHand=function(at){let st=yu[at];return void 0===st&&(st=new ut.R3r,yu[at]=st),st.getHandSpace()},this.setFramebufferScaleFactor=function(at){rc=at,!0===ot.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(at){oc=at,!0===ot.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return wc||sc},this.setReferenceSpace=function(at){wc=at},this.getBaseLayer=function(){return null!==su?su:lu},this.getBinding=function(){return iu},this.getFrame=function(){return cu},this.getSession=function(){return Hl},this.setSession=async function(Sc){if(Hl=Sc,null!==Hl){gu=at.getRenderTarget(),Hl.addEventListener("select",onSessionEvent),Hl.addEventListener("selectstart",onSessionEvent),Hl.addEventListener("selectend",onSessionEvent),Hl.addEventListener("squeeze",onSessionEvent),Hl.addEventListener("squeezestart",onSessionEvent),Hl.addEventListener("squeezeend",onSessionEvent),Hl.addEventListener("end",onSessionEnd),Hl.addEventListener("inputsourceschange",onInputSourcesChange),!0!==mu.xrCompatible&&await st.makeXRCompatible(),Su=at.getPixelRatio(),at.getSize(xu),"undefined"!==typeof XRWebGLBinding&&(iu=new XRWebGLBinding(Hl,st));if(null!==iu&&"createProjectionLayer"in XRWebGLBinding.prototype){let ot=null,sc=null,oc=null;mu.depth&&(oc=mu.stencil?st.DEPTH24_STENCIL8:st.DEPTH_COMPONENT24,ot=mu.stencil?ut.dcC:ut.zdS,sc=mu.stencil?ut.V3x:ut.bkx);const _c={colorFormat:st.RGBA8,depthFormat:oc,scaleFactor:rc};su=iu.createProjectionLayer(_c),Hl.updateRenderState({layers:[su]}),at.setPixelRatio(1),at.setSize(su.textureWidth,su.textureHeight,!1),Au=new ut.nWS(su.textureWidth,su.textureHeight,{format:ut.GWd,type:ut.OUM,depthTexture:new ut.VCu(su.textureWidth,su.textureHeight,sc,void 0,void 0,void 0,void 0,void 0,void 0,ot),stencilBuffer:mu.stencil,colorSpace:at.outputColorSpace,samples:mu.antialias?4:0,resolveDepthBuffer:!1===su.ignoreDepthValues,resolveStencilBuffer:!1===su.ignoreDepthValues})}else{const ot={antialias:mu.antialias,alpha:!0,depth:mu.depth,stencil:mu.stencil,framebufferScaleFactor:rc};lu=new XRWebGLLayer(Hl,st,ot),Hl.updateRenderState({baseLayer:lu}),at.setPixelRatio(1),at.setSize(lu.framebufferWidth,lu.framebufferHeight,!1),Au=new ut.nWS(lu.framebufferWidth,lu.framebufferHeight,{format:ut.GWd,type:ut.OUM,colorSpace:at.outputColorSpace,stencilBuffer:mu.stencil,resolveDepthBuffer:!1===lu.ignoreDepthValues,resolveStencilBuffer:!1===lu.ignoreDepthValues})}Au.isXRRenderTarget=!0,this.setFoveation(_c),wc=null,sc=await Hl.requestReferenceSpace(oc),ad.setContext(Hl),ad.start(),ot.isPresenting=!0,ot.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==Hl)return Hl.environmentBlendMode},this.getDepthTexture=function(){return uu.getDepthTexture()};const id=new ut.Pq0,nd=new ut.Pq0;function updateCamera(at,st){null===st?at.matrixWorld.copy(at.matrix):at.matrixWorld.multiplyMatrices(st.matrixWorld,at.matrix),at.matrixWorldInverse.copy(at.matrixWorld).invert()}this.updateCamera=function(at){if(null===Hl)return;let st=at.near,ot=at.far;null!==uu.texture&&(uu.depthNear>0&&(st=uu.depthNear),uu.depthFar>0&&(ot=uu.depthFar)),hh.near=Lu.near=Du.near=st,hh.far=Lu.far=Du.far=ot,ed===hh.near&&td===hh.far||(Hl.updateRenderState({depthNear:hh.near,depthFar:hh.far}),ed=hh.near,td=hh.far),hh.layers.mask=6|at.layers.mask,Du.layers.mask=3&hh.layers.mask,Lu.layers.mask=5&hh.layers.mask;const rc=at.parent,sc=hh.cameras;updateCamera(hh,rc);for(let ut=0;ut<sc.length;ut++)updateCamera(sc[ut],rc);2===sc.length?function(at,st,ot){id.setFromMatrixPosition(st.matrixWorld),nd.setFromMatrixPosition(ot.matrixWorld);const ut=id.distanceTo(nd),Hl=st.projectionMatrix.elements,rc=ot.projectionMatrix.elements,sc=Hl[14]/(Hl[10]-1),oc=Hl[14]/(Hl[10]+1),_c=(Hl[9]+1)/Hl[5],wc=(Hl[9]-1)/Hl[5],Sc=(Hl[8]-1)/Hl[0],iu=(rc[8]+1)/rc[0],su=sc*Sc,lu=sc*iu,cu=ut/(-Sc+iu),uu=cu*-Sc;if(st.matrixWorld.decompose(at.position,at.quaternion,at.scale),at.translateX(uu),at.translateZ(cu),at.matrixWorld.compose(at.position,at.quaternion,at.scale),at.matrixWorldInverse.copy(at.matrixWorld).invert(),-1===Hl[10])at.projectionMatrix.copy(st.projectionMatrix),at.projectionMatrixInverse.copy(st.projectionMatrixInverse);else{const st=sc+cu,ot=oc+cu,Hl=su-uu,rc=lu+(ut-uu),Sc=_c*oc/ot*st,iu=wc*oc/ot*st;at.projectionMatrix.makePerspective(Hl,rc,Sc,iu,st,ot),at.projectionMatrixInverse.copy(at.projectionMatrix).invert()}}(hh,Du,Lu):hh.projectionMatrix.copy(Du.projectionMatrix),function(at,st,ot){null===ot?at.matrix.copy(st.matrixWorld):(at.matrix.copy(ot.matrixWorld),at.matrix.invert(),at.matrix.multiply(st.matrixWorld));at.matrix.decompose(at.position,at.quaternion,at.scale),at.updateMatrixWorld(!0),at.projectionMatrix.copy(st.projectionMatrix),at.projectionMatrixInverse.copy(st.projectionMatrixInverse),at.isPerspectiveCamera&&(at.fov=2*ut.a55*Math.atan(1/at.projectionMatrix.elements[5]),at.zoom=1)}(at,hh,rc)},this.getCamera=function(){return hh},this.getFoveation=function(){if(null!==su||null!==lu)return _c},this.setFoveation=function(at){_c=at,null!==su&&(su.fixedFoveation=at),null!==lu&&void 0!==lu.fixedFoveation&&(lu.fixedFoveation=at)},this.hasDepthSensing=function(){return null!==uu.texture},this.getDepthSensingMesh=function(){return uu.getMesh(hh)},this.getCameraTexture=function(at){return pu[at]};let rd=null;const ad=new WebGLAnimation;ad.setAnimationLoop((function(st,rc){if(Sc=rc.getViewerPose(wc||sc),cu=rc,null!==Sc){const st=Sc.views;null!==lu&&(at.setRenderTargetFramebuffer(Au,lu.framebuffer),at.setRenderTarget(Au));let ot=!1;st.length!==hh.cameras.length&&(hh.cameras.length=0,ot=!0);for(let Hl=0;Hl<st.length;Hl++){const rc=st[Hl];let sc=null;if(null!==lu)sc=lu.getViewport(rc);else{const st=iu.getViewSubImage(su,rc);sc=st.viewport,0===Hl&&(at.setRenderTargetTextures(Au,st.colorTexture,st.depthStencilTexture),at.setRenderTarget(Au))}let oc=$u[Hl];void 0===oc&&(oc=new ut.ubm,oc.layers.enable(Hl),oc.viewport=new ut.IUQ,$u[Hl]=oc),oc.matrix.fromArray(rc.transform.matrix),oc.matrix.decompose(oc.position,oc.quaternion,oc.scale),oc.projectionMatrix.fromArray(rc.projectionMatrix),oc.projectionMatrixInverse.copy(oc.projectionMatrix).invert(),oc.viewport.set(sc.x,sc.y,sc.width,sc.height),0===Hl&&(hh.matrix.copy(oc.matrix),hh.matrix.decompose(hh.position,hh.quaternion,hh.scale)),!0===ot&&hh.cameras.push(oc)}const rc=Hl.enabledFeatures;if(rc&&rc.includes("depth-sensing")&&"gpu-optimized"==Hl.depthUsage&&iu){const at=iu.getDepthInformation(st[0]);at&&at.isValid&&at.texture&&uu.init(at,Hl.renderState)}if(rc&&rc.includes("camera-access")&&(at.state.unbindTexture(),iu))for(let at=0;at<st.length;at++){const ot=st[at].camera;if(ot){let at=pu[ot];at||(at=new ExternalTexture,pu[ot]=at);const st=iu.getCameraImage(ot);at.sourceTexture=st}}}for(let at=0;at<yu.length;at++){const st=_u[at],ot=yu[at];null!==st&&void 0!==ot&&ot.update(st,rc,wc||sc)}rd&&rd(st,rc),rc.detectedPlanes&&ot.dispatchEvent({type:"planesdetected",data:rc}),cu=null})),this.setAnimationLoop=function(at){rd=at},this.dispose=function(){}}}const md=new ut.O9p,gd=new ut.kn4;function WebGLMaterials(at,st){function refreshTransformUniform(at,st){!0===at.matrixAutoUpdate&&at.updateMatrix(),st.value.copy(at.matrix)}function refreshUniformsCommon(at,ot){at.opacity.value=ot.opacity,ot.color&&at.diffuse.value.copy(ot.color),ot.emissive&&at.emissive.value.copy(ot.emissive).multiplyScalar(ot.emissiveIntensity),ot.map&&(at.map.value=ot.map,refreshTransformUniform(ot.map,at.mapTransform)),ot.alphaMap&&(at.alphaMap.value=ot.alphaMap,refreshTransformUniform(ot.alphaMap,at.alphaMapTransform)),ot.bumpMap&&(at.bumpMap.value=ot.bumpMap,refreshTransformUniform(ot.bumpMap,at.bumpMapTransform),at.bumpScale.value=ot.bumpScale,ot.side===ut.hsX&&(at.bumpScale.value*=-1)),ot.normalMap&&(at.normalMap.value=ot.normalMap,refreshTransformUniform(ot.normalMap,at.normalMapTransform),at.normalScale.value.copy(ot.normalScale),ot.side===ut.hsX&&at.normalScale.value.negate()),ot.displacementMap&&(at.displacementMap.value=ot.displacementMap,refreshTransformUniform(ot.displacementMap,at.displacementMapTransform),at.displacementScale.value=ot.displacementScale,at.displacementBias.value=ot.displacementBias),ot.emissiveMap&&(at.emissiveMap.value=ot.emissiveMap,refreshTransformUniform(ot.emissiveMap,at.emissiveMapTransform)),ot.specularMap&&(at.specularMap.value=ot.specularMap,refreshTransformUniform(ot.specularMap,at.specularMapTransform)),ot.alphaTest>0&&(at.alphaTest.value=ot.alphaTest);const Hl=st.get(ot),rc=Hl.envMap,sc=Hl.envMapRotation;rc&&(at.envMap.value=rc,md.copy(sc),md.x*=-1,md.y*=-1,md.z*=-1,rc.isCubeTexture&&!1===rc.isRenderTargetTexture&&(md.y*=-1,md.z*=-1),at.envMapRotation.value.setFromMatrix4(gd.makeRotationFromEuler(md)),at.flipEnvMap.value=rc.isCubeTexture&&!1===rc.isRenderTargetTexture?-1:1,at.reflectivity.value=ot.reflectivity,at.ior.value=ot.ior,at.refractionRatio.value=ot.refractionRatio),ot.lightMap&&(at.lightMap.value=ot.lightMap,at.lightMapIntensity.value=ot.lightMapIntensity,refreshTransformUniform(ot.lightMap,at.lightMapTransform)),ot.aoMap&&(at.aoMap.value=ot.aoMap,at.aoMapIntensity.value=ot.aoMapIntensity,refreshTransformUniform(ot.aoMap,at.aoMapTransform))}return{refreshFogUniforms:function(st,ot){ot.color.getRGB(st.fogColor.value,(0,ut._Ut)(at)),ot.isFog?(st.fogNear.value=ot.near,st.fogFar.value=ot.far):ot.isFogExp2&&(st.fogDensity.value=ot.density)},refreshMaterialUniforms:function(at,ot,Hl,rc,sc){ot.isMeshBasicMaterial||ot.isMeshLambertMaterial?refreshUniformsCommon(at,ot):ot.isMeshToonMaterial?(refreshUniformsCommon(at,ot),function(at,st){st.gradientMap&&(at.gradientMap.value=st.gradientMap)}(at,ot)):ot.isMeshPhongMaterial?(refreshUniformsCommon(at,ot),function(at,st){at.specular.value.copy(st.specular),at.shininess.value=Math.max(st.shininess,1e-4)}(at,ot)):ot.isMeshStandardMaterial?(refreshUniformsCommon(at,ot),function(at,st){at.metalness.value=st.metalness,st.metalnessMap&&(at.metalnessMap.value=st.metalnessMap,refreshTransformUniform(st.metalnessMap,at.metalnessMapTransform));at.roughness.value=st.roughness,st.roughnessMap&&(at.roughnessMap.value=st.roughnessMap,refreshTransformUniform(st.roughnessMap,at.roughnessMapTransform));st.envMap&&(at.envMapIntensity.value=st.envMapIntensity)}(at,ot),ot.isMeshPhysicalMaterial&&function(at,st,ot){at.ior.value=st.ior,st.sheen>0&&(at.sheenColor.value.copy(st.sheenColor).multiplyScalar(st.sheen),at.sheenRoughness.value=st.sheenRoughness,st.sheenColorMap&&(at.sheenColorMap.value=st.sheenColorMap,refreshTransformUniform(st.sheenColorMap,at.sheenColorMapTransform)),st.sheenRoughnessMap&&(at.sheenRoughnessMap.value=st.sheenRoughnessMap,refreshTransformUniform(st.sheenRoughnessMap,at.sheenRoughnessMapTransform)));st.clearcoat>0&&(at.clearcoat.value=st.clearcoat,at.clearcoatRoughness.value=st.clearcoatRoughness,st.clearcoatMap&&(at.clearcoatMap.value=st.clearcoatMap,refreshTransformUniform(st.clearcoatMap,at.clearcoatMapTransform)),st.clearcoatRoughnessMap&&(at.clearcoatRoughnessMap.value=st.clearcoatRoughnessMap,refreshTransformUniform(st.clearcoatRoughnessMap,at.clearcoatRoughnessMapTransform)),st.clearcoatNormalMap&&(at.clearcoatNormalMap.value=st.clearcoatNormalMap,refreshTransformUniform(st.clearcoatNormalMap,at.clearcoatNormalMapTransform),at.clearcoatNormalScale.value.copy(st.clearcoatNormalScale),st.side===ut.hsX&&at.clearcoatNormalScale.value.negate()));st.dispersion>0&&(at.dispersion.value=st.dispersion);st.iridescence>0&&(at.iridescence.value=st.iridescence,at.iridescenceIOR.value=st.iridescenceIOR,at.iridescenceThicknessMinimum.value=st.iridescenceThicknessRange[0],at.iridescenceThicknessMaximum.value=st.iridescenceThicknessRange[1],st.iridescenceMap&&(at.iridescenceMap.value=st.iridescenceMap,refreshTransformUniform(st.iridescenceMap,at.iridescenceMapTransform)),st.iridescenceThicknessMap&&(at.iridescenceThicknessMap.value=st.iridescenceThicknessMap,refreshTransformUniform(st.iridescenceThicknessMap,at.iridescenceThicknessMapTransform)));st.transmission>0&&(at.transmission.value=st.transmission,at.transmissionSamplerMap.value=ot.texture,at.transmissionSamplerSize.value.set(ot.width,ot.height),st.transmissionMap&&(at.transmissionMap.value=st.transmissionMap,refreshTransformUniform(st.transmissionMap,at.transmissionMapTransform)),at.thickness.value=st.thickness,st.thicknessMap&&(at.thicknessMap.value=st.thicknessMap,refreshTransformUniform(st.thicknessMap,at.thicknessMapTransform)),at.attenuationDistance.value=st.attenuationDistance,at.attenuationColor.value.copy(st.attenuationColor));st.anisotropy>0&&(at.anisotropyVector.value.set(st.anisotropy*Math.cos(st.anisotropyRotation),st.anisotropy*Math.sin(st.anisotropyRotation)),st.anisotropyMap&&(at.anisotropyMap.value=st.anisotropyMap,refreshTransformUniform(st.anisotropyMap,at.anisotropyMapTransform)));at.specularIntensity.value=st.specularIntensity,at.specularColor.value.copy(st.specularColor),st.specularColorMap&&(at.specularColorMap.value=st.specularColorMap,refreshTransformUniform(st.specularColorMap,at.specularColorMapTransform));st.specularIntensityMap&&(at.specularIntensityMap.value=st.specularIntensityMap,refreshTransformUniform(st.specularIntensityMap,at.specularIntensityMapTransform))}(at,ot,sc)):ot.isMeshMatcapMaterial?(refreshUniformsCommon(at,ot),function(at,st){st.matcap&&(at.matcap.value=st.matcap)}(at,ot)):ot.isMeshDepthMaterial?refreshUniformsCommon(at,ot):ot.isMeshDistanceMaterial?(refreshUniformsCommon(at,ot),function(at,ot){const ut=st.get(ot).light;at.referencePosition.value.setFromMatrixPosition(ut.matrixWorld),at.nearDistance.value=ut.shadow.camera.near,at.farDistance.value=ut.shadow.camera.far}(at,ot)):ot.isMeshNormalMaterial?refreshUniformsCommon(at,ot):ot.isLineBasicMaterial?(function(at,st){at.diffuse.value.copy(st.color),at.opacity.value=st.opacity,st.map&&(at.map.value=st.map,refreshTransformUniform(st.map,at.mapTransform))}(at,ot),ot.isLineDashedMaterial&&function(at,st){at.dashSize.value=st.dashSize,at.totalSize.value=st.dashSize+st.gapSize,at.scale.value=st.scale}(at,ot)):ot.isPointsMaterial?function(at,st,ot,ut){at.diffuse.value.copy(st.color),at.opacity.value=st.opacity,at.size.value=st.size*ot,at.scale.value=.5*ut,st.map&&(at.map.value=st.map,refreshTransformUniform(st.map,at.uvTransform));st.alphaMap&&(at.alphaMap.value=st.alphaMap,refreshTransformUniform(st.alphaMap,at.alphaMapTransform));st.alphaTest>0&&(at.alphaTest.value=st.alphaTest)}(at,ot,Hl,rc):ot.isSpriteMaterial?function(at,st){at.diffuse.value.copy(st.color),at.opacity.value=st.opacity,at.rotation.value=st.rotation,st.map&&(at.map.value=st.map,refreshTransformUniform(st.map,at.mapTransform));st.alphaMap&&(at.alphaMap.value=st.alphaMap,refreshTransformUniform(st.alphaMap,at.alphaMapTransform));st.alphaTest>0&&(at.alphaTest.value=st.alphaTest)}(at,ot):ot.isShadowMaterial?(at.color.value.copy(ot.color),at.opacity.value=ot.opacity):ot.isShaderMaterial&&(ot.uniformsNeedUpdate=!1)}}}function WebGLUniformsGroups(at,st,ot,ut){let Hl={},rc={},sc=[];const oc=at.getParameter(at.MAX_UNIFORM_BUFFER_BINDINGS);function hasUniformChanged(at,st,ot,ut){const Hl=at.value,rc=st+"_"+ot;if(void 0===ut[rc])return ut[rc]="number"===typeof Hl||"boolean"===typeof Hl?Hl:Hl.clone(),!0;{const at=ut[rc];if("number"===typeof Hl||"boolean"===typeof Hl){if(at!==Hl)return ut[rc]=Hl,!0}else if(!1===at.equals(Hl))return at.copy(Hl),!0}return!1}function getUniformSize(at){const st={boundary:0,storage:0};return"number"===typeof at||"boolean"===typeof at?(st.boundary=4,st.storage=4):at.isVector2?(st.boundary=8,st.storage=8):at.isVector3||at.isColor?(st.boundary=16,st.storage=12):at.isVector4?(st.boundary=16,st.storage=16):at.isMatrix3?(st.boundary=48,st.storage=48):at.isMatrix4?(st.boundary=64,st.storage=64):at.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",at),st}function onUniformsGroupsDispose(st){const ot=st.target;ot.removeEventListener("dispose",onUniformsGroupsDispose);const ut=sc.indexOf(ot.__bindingPointIndex);sc.splice(ut,1),at.deleteBuffer(Hl[ot.id]),delete Hl[ot.id],delete rc[ot.id]}return{bind:function(at,st){const ot=st.program;ut.uniformBlockBinding(at,ot)},update:function(ot,_c){let wc=Hl[ot.id];void 0===wc&&(!function(at){const st=at.uniforms;let ot=0;const ut=16;for(let rc=0,sc=st.length;rc<sc;rc++){const at=Array.isArray(st[rc])?st[rc]:[st[rc]];for(let st=0,Hl=at.length;st<Hl;st++){const Hl=at[st],rc=Array.isArray(Hl.value)?Hl.value:[Hl.value];for(let at=0,st=rc.length;at<st;at++){const st=getUniformSize(rc[at]),sc=ot%ut,oc=sc%st.boundary,_c=sc+oc;ot+=oc,0!==_c&&ut-_c<st.storage&&(ot+=ut-_c),Hl.__data=new Float32Array(st.storage/Float32Array.BYTES_PER_ELEMENT),Hl.__offset=ot,ot+=st.storage}}}const Hl=ot%ut;Hl>0&&(ot+=ut-Hl);at.__size=ot,at.__cache={}}(ot),wc=function(st){const ot=function(){for(let at=0;at<oc;at++)if(-1===sc.indexOf(at))return sc.push(at),at;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();st.__bindingPointIndex=ot;const ut=at.createBuffer(),Hl=st.__size,rc=st.usage;return at.bindBuffer(at.UNIFORM_BUFFER,ut),at.bufferData(at.UNIFORM_BUFFER,Hl,rc),at.bindBuffer(at.UNIFORM_BUFFER,null),at.bindBufferBase(at.UNIFORM_BUFFER,ot,ut),ut}(ot),Hl[ot.id]=wc,ot.addEventListener("dispose",onUniformsGroupsDispose));const Sc=_c.program;ut.updateUBOMapping(ot,Sc);const iu=st.render.frame;rc[ot.id]!==iu&&(!function(st){const ot=Hl[st.id],ut=st.uniforms,rc=st.__cache;at.bindBuffer(at.UNIFORM_BUFFER,ot);for(let Hl=0,sc=ut.length;Hl<sc;Hl++){const st=Array.isArray(ut[Hl])?ut[Hl]:[ut[Hl]];for(let ot=0,ut=st.length;ot<ut;ot++){const ut=st[ot];if(!0===hasUniformChanged(ut,Hl,ot,rc)){const st=ut.__offset,ot=Array.isArray(ut.value)?ut.value:[ut.value];let Hl=0;for(let rc=0;rc<ot.length;rc++){const sc=ot[rc],oc=getUniformSize(sc);"number"===typeof sc||"boolean"===typeof sc?(ut.__data[0]=sc,at.bufferSubData(at.UNIFORM_BUFFER,st+Hl,ut.__data)):sc.isMatrix3?(ut.__data[0]=sc.elements[0],ut.__data[1]=sc.elements[1],ut.__data[2]=sc.elements[2],ut.__data[3]=0,ut.__data[4]=sc.elements[3],ut.__data[5]=sc.elements[4],ut.__data[6]=sc.elements[5],ut.__data[7]=0,ut.__data[8]=sc.elements[6],ut.__data[9]=sc.elements[7],ut.__data[10]=sc.elements[8],ut.__data[11]=0):(sc.toArray(ut.__data,Hl),Hl+=oc.storage/Float32Array.BYTES_PER_ELEMENT)}at.bufferSubData(at.UNIFORM_BUFFER,st,ut.__data)}}}at.bindBuffer(at.UNIFORM_BUFFER,null)}(ot),rc[ot.id]=iu)},dispose:function(){for(const st in Hl)at.deleteBuffer(Hl[st]);sc=[],Hl={},rc={}}}}class WebGLRenderer{constructor(at){void 0===at&&(at={});const{canvas:st=(0,ut.lPF)(),context:ot=null,depth:Hl=!0,stencil:rc=!1,alpha:sc=!1,antialias:oc=!1,premultipliedAlpha:_c=!0,preserveDrawingBuffer:wc=!1,powerPreference:Sc="default",failIfMajorPerformanceCaveat:iu=!1,reversedDepthBuffer:su=!1}=at;let lu;if(this.isWebGLRenderer=!0,null!==ot){if("undefined"!==typeof WebGLRenderingContext&&ot instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");lu=ot.getContextAttributes().alpha}else lu=sc;const cu=new Uint32Array(4),uu=new Int32Array(4);let pu=null,mu=null;const gu=[],Au=[];this.domElement=st,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=ut.y_p,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const yu=this;let _u=!1;this._outputColorSpace=ut.er$;let xu=0,Su=0,Du=null,Lu=-1,$u=null;const hh=new ut.IUQ,ed=new ut.IUQ;let td=null;const id=new ut.Q1f(0);let nd=0,rd=st.width,ad=st.height,sd=1,od=null,ld=null;const cd=new ut.IUQ(0,0,rd,ad),ud=new ut.IUQ(0,0,rd,ad);let hd=!1;const dd=new ut.PPD;let pd=!1,md=!1;const gd=new ut.kn4,fd=new ut.Pq0,Ad=new ut.IUQ,yd={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let vd=!1;function getTargetPixelRatio(){return null===Du?sd:1}let _d,xd,bd,wd,Ed,Md,Sd,Td,Cd,kd,Id,Dd,Ld,Pd,zd,Nd,Rd,Od,Bd,Fd,jd,Ud,Vd,Gd,Zd=ot;function getContext(at,ot){return st.getContext(at,ot)}try{const at={alpha:!0,depth:Hl,stencil:rc,antialias:oc,premultipliedAlpha:_c,preserveDrawingBuffer:wc,powerPreference:Sc,failIfMajorPerformanceCaveat:iu};if("setAttribute"in st&&st.setAttribute("data-engine",`three.js r${ut.sPf}`),st.addEventListener("webglcontextlost",onContextLost,!1),st.addEventListener("webglcontextrestored",onContextRestore,!1),st.addEventListener("webglcontextcreationerror",onContextCreationError,!1),null===Zd){const st="webgl2";if(Zd=getContext(st,at),null===Zd)throw getContext(st)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(Xd){throw console.error("THREE.WebGLRenderer: "+Xd.message),Xd}function initGLContext(){_d=new WebGLExtensions(Zd),_d.init(),Ud=new WebGLUtils(Zd,_d),xd=new WebGLCapabilities(Zd,_d,at,Ud),bd=new WebGLState(Zd,_d),xd.reversedDepthBuffer&&su&&bd.buffers.depth.setReversed(!0),wd=new WebGLInfo(Zd),Ed=new WebGLProperties,Md=new WebGLTextures(Zd,_d,bd,Ed,xd,Ud,wd),Sd=new WebGLCubeMaps(yu),Td=new WebGLCubeUVMaps(yu),Cd=new WebGLAttributes(Zd),Vd=new WebGLBindingStates(Zd,Cd),kd=new WebGLGeometries(Zd,Cd,wd,Vd),Id=new WebGLObjects(Zd,kd,Cd,wd),Bd=new WebGLMorphtargets(Zd,xd,Md),Nd=new WebGLClipping(Ed),Dd=new WebGLPrograms(yu,Sd,Td,_d,xd,Vd,Nd),Ld=new WebGLMaterials(yu,Ed),Pd=new WebGLRenderLists,zd=new WebGLRenderStates(_d),Od=new WebGLBackground(yu,Sd,Td,bd,Id,lu,_c),Rd=new WebGLShadowMap(yu,Id,xd),Gd=new WebGLUniformsGroups(Zd,wd,xd,bd),Fd=new WebGLBufferRenderer(Zd,_d,wd),jd=new WebGLIndexedBufferRenderer(Zd,_d,wd),wd.programs=Dd.programs,yu.capabilities=xd,yu.extensions=_d,yu.properties=Ed,yu.renderLists=Pd,yu.shadowMap=Rd,yu.state=bd,yu.info=wd}initGLContext();const Hd=new WebXRManager(yu,Zd);function onContextLost(at){at.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),_u=!0}function onContextRestore(){console.log("THREE.WebGLRenderer: Context Restored."),_u=!1;const at=wd.autoReset,st=Rd.enabled,ot=Rd.autoUpdate,ut=Rd.needsUpdate,Hl=Rd.type;initGLContext(),wd.autoReset=at,Rd.enabled=st,Rd.autoUpdate=ot,Rd.needsUpdate=ut,Rd.type=Hl}function onContextCreationError(at){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",at.statusMessage)}function onMaterialDispose(at){const st=at.target;st.removeEventListener("dispose",onMaterialDispose),function(at){(function(at){const st=Ed.get(at).programs;void 0!==st&&(st.forEach((function(at){Dd.releaseProgram(at)})),at.isShaderMaterial&&Dd.releaseShaderCache(at))})(at),Ed.remove(at)}(st)}function prepareMaterial(at,st,ot){!0===at.transparent&&at.side===ut.$EB&&!1===at.forceSinglePass?(at.side=ut.hsX,at.needsUpdate=!0,getProgram(at,st,ot),at.side=ut.hB5,at.needsUpdate=!0,getProgram(at,st,ot),at.side=ut.$EB):getProgram(at,st,ot)}this.xr=Hd,this.getContext=function(){return Zd},this.getContextAttributes=function(){return Zd.getContextAttributes()},this.forceContextLoss=function(){const at=_d.get("WEBGL_lose_context");at&&at.loseContext()},this.forceContextRestore=function(){const at=_d.get("WEBGL_lose_context");at&&at.restoreContext()},this.getPixelRatio=function(){return sd},this.setPixelRatio=function(at){void 0!==at&&(sd=at,this.setSize(rd,ad,!1))},this.getSize=function(at){return at.set(rd,ad)},this.setSize=function(at,ot,ut){void 0===ut&&(ut=!0),Hd.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(rd=at,ad=ot,st.width=Math.floor(at*sd),st.height=Math.floor(ot*sd),!0===ut&&(st.style.width=at+"px",st.style.height=ot+"px"),this.setViewport(0,0,at,ot))},this.getDrawingBufferSize=function(at){return at.set(rd*sd,ad*sd).floor()},this.setDrawingBufferSize=function(at,ot,ut){rd=at,ad=ot,sd=ut,st.width=Math.floor(at*ut),st.height=Math.floor(ot*ut),this.setViewport(0,0,at,ot)},this.getCurrentViewport=function(at){return at.copy(hh)},this.getViewport=function(at){return at.copy(cd)},this.setViewport=function(at,st,ot,ut){at.isVector4?cd.set(at.x,at.y,at.z,at.w):cd.set(at,st,ot,ut),bd.viewport(hh.copy(cd).multiplyScalar(sd).round())},this.getScissor=function(at){return at.copy(ud)},this.setScissor=function(at,st,ot,ut){at.isVector4?ud.set(at.x,at.y,at.z,at.w):ud.set(at,st,ot,ut),bd.scissor(ed.copy(ud).multiplyScalar(sd).round())},this.getScissorTest=function(){return hd},this.setScissorTest=function(at){bd.setScissorTest(hd=at)},this.setOpaqueSort=function(at){od=at},this.setTransparentSort=function(at){ld=at},this.getClearColor=function(at){return at.copy(Od.getClearColor())},this.setClearColor=function(){Od.setClearColor(...arguments)},this.getClearAlpha=function(){return Od.getClearAlpha()},this.setClearAlpha=function(){Od.setClearAlpha(...arguments)},this.clear=function(at,st,ot){void 0===at&&(at=!0),void 0===st&&(st=!0),void 0===ot&&(ot=!0);let Hl=0;if(at){let at=!1;if(null!==Du){const st=Du.texture.format;at=st===ut.c90||st===ut.TkQ||st===ut.ZQM}if(at){const at=Du.texture.type,st=at===ut.OUM||at===ut.bkx||at===ut.cHt||at===ut.V3x||at===ut.Wew||at===ut.gJ2,ot=Od.getClearColor(),Hl=Od.getClearAlpha(),rc=ot.r,sc=ot.g,oc=ot.b;st?(cu[0]=rc,cu[1]=sc,cu[2]=oc,cu[3]=Hl,Zd.clearBufferuiv(Zd.COLOR,0,cu)):(uu[0]=rc,uu[1]=sc,uu[2]=oc,uu[3]=Hl,Zd.clearBufferiv(Zd.COLOR,0,uu))}else Hl|=Zd.COLOR_BUFFER_BIT}st&&(Hl|=Zd.DEPTH_BUFFER_BIT),ot&&(Hl|=Zd.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Zd.clear(Hl)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){st.removeEventListener("webglcontextlost",onContextLost,!1),st.removeEventListener("webglcontextrestored",onContextRestore,!1),st.removeEventListener("webglcontextcreationerror",onContextCreationError,!1),Od.dispose(),Pd.dispose(),zd.dispose(),Ed.dispose(),Sd.dispose(),Td.dispose(),Id.dispose(),Vd.dispose(),Gd.dispose(),Dd.dispose(),Hd.dispose(),Hd.removeEventListener("sessionstart",onXRSessionStart),Hd.removeEventListener("sessionend",onXRSessionEnd),qd.stop()},this.renderBufferDirect=function(at,st,ot,Hl,rc,sc){null===st&&(st=yd);const oc=rc.isMesh&&rc.matrixWorld.determinant()<0,_c=function(at,st,ot,Hl,rc){!0!==st.isScene&&(st=yd);Md.resetTextureUnits();const sc=st.fog,oc=Hl.isMeshStandardMaterial?st.environment:null,_c=null===Du?yu.outputColorSpace:!0===Du.isXRRenderTarget?Du.texture.colorSpace:ut.Zr2,wc=(Hl.isMeshStandardMaterial?Td:Sd).get(Hl.envMap||oc),Sc=!0===Hl.vertexColors&&!!ot.attributes.color&&4===ot.attributes.color.itemSize,iu=!!ot.attributes.tangent&&(!!Hl.normalMap||Hl.anisotropy>0),su=!!ot.morphAttributes.position,lu=!!ot.morphAttributes.normal,cu=!!ot.morphAttributes.color;let uu=ut.y_p;Hl.toneMapped&&(null!==Du&&!0!==Du.isXRRenderTarget||(uu=yu.toneMapping));const pu=ot.morphAttributes.position||ot.morphAttributes.normal||ot.morphAttributes.color,gu=void 0!==pu?pu.length:0,Au=Ed.get(Hl),_u=mu.state.lights;if(!0===pd&&(!0===md||at!==$u)){const st=at===$u&&Hl.id===Lu;Nd.setState(Hl,at,st)}let xu=!1;Hl.version===Au.__version?Au.needsLights&&Au.lightsStateVersion!==_u.state.version||Au.outputColorSpace!==_c||rc.isBatchedMesh&&!1===Au.batching?xu=!0:rc.isBatchedMesh||!0!==Au.batching?rc.isBatchedMesh&&!0===Au.batchingColor&&null===rc.colorTexture||rc.isBatchedMesh&&!1===Au.batchingColor&&null!==rc.colorTexture||rc.isInstancedMesh&&!1===Au.instancing?xu=!0:rc.isInstancedMesh||!0!==Au.instancing?rc.isSkinnedMesh&&!1===Au.skinning?xu=!0:rc.isSkinnedMesh||!0!==Au.skinning?rc.isInstancedMesh&&!0===Au.instancingColor&&null===rc.instanceColor||rc.isInstancedMesh&&!1===Au.instancingColor&&null!==rc.instanceColor||rc.isInstancedMesh&&!0===Au.instancingMorph&&null===rc.morphTexture||rc.isInstancedMesh&&!1===Au.instancingMorph&&null!==rc.morphTexture||Au.envMap!==wc||!0===Hl.fog&&Au.fog!==sc?xu=!0:void 0===Au.numClippingPlanes||Au.numClippingPlanes===Nd.numPlanes&&Au.numIntersection===Nd.numIntersection?(Au.vertexAlphas!==Sc||Au.vertexTangents!==iu||Au.morphTargets!==su||Au.morphNormals!==lu||Au.morphColors!==cu||Au.toneMapping!==uu||Au.morphTargetsCount!==gu)&&(xu=!0):xu=!0:xu=!0:xu=!0:xu=!0:(xu=!0,Au.__version=Hl.version);let Su=Au.currentProgram;!0===xu&&(Su=getProgram(Hl,st,rc));let hh=!1,ed=!1,td=!1;const id=Su.getUniforms(),nd=Au.uniforms;bd.useProgram(Su.program)&&(hh=!0,ed=!0,td=!0);Hl.id!==Lu&&(Lu=Hl.id,ed=!0);if(hh||$u!==at){bd.buffers.depth.getReversed()&&!0!==at.reversedDepth&&(at._reversedDepth=!0,at.updateProjectionMatrix()),id.setValue(Zd,"projectionMatrix",at.projectionMatrix),id.setValue(Zd,"viewMatrix",at.matrixWorldInverse);const st=id.map.cameraPosition;void 0!==st&&st.setValue(Zd,fd.setFromMatrixPosition(at.matrixWorld)),xd.logarithmicDepthBuffer&&id.setValue(Zd,"logDepthBufFC",2/(Math.log(at.far+1)/Math.LN2)),(Hl.isMeshPhongMaterial||Hl.isMeshToonMaterial||Hl.isMeshLambertMaterial||Hl.isMeshBasicMaterial||Hl.isMeshStandardMaterial||Hl.isShaderMaterial)&&id.setValue(Zd,"isOrthographic",!0===at.isOrthographicCamera),$u!==at&&($u=at,ed=!0,td=!0)}if(rc.isSkinnedMesh){id.setOptional(Zd,rc,"bindMatrix"),id.setOptional(Zd,rc,"bindMatrixInverse");const at=rc.skeleton;at&&(null===at.boneTexture&&at.computeBoneTexture(),id.setValue(Zd,"boneTexture",at.boneTexture,Md))}rc.isBatchedMesh&&(id.setOptional(Zd,rc,"batchingTexture"),id.setValue(Zd,"batchingTexture",rc._matricesTexture,Md),id.setOptional(Zd,rc,"batchingIdTexture"),id.setValue(Zd,"batchingIdTexture",rc._indirectTexture,Md),id.setOptional(Zd,rc,"batchingColorTexture"),null!==rc._colorsTexture&&id.setValue(Zd,"batchingColorTexture",rc._colorsTexture,Md));const rd=ot.morphAttributes;void 0===rd.position&&void 0===rd.normal&&void 0===rd.color||Bd.update(rc,ot,Su);(ed||Au.receiveShadow!==rc.receiveShadow)&&(Au.receiveShadow=rc.receiveShadow,id.setValue(Zd,"receiveShadow",rc.receiveShadow));Hl.isMeshGouraudMaterial&&null!==Hl.envMap&&(nd.envMap.value=wc,nd.flipEnvMap.value=wc.isCubeTexture&&!1===wc.isRenderTargetTexture?-1:1);Hl.isMeshStandardMaterial&&null===Hl.envMap&&null!==st.environment&&(nd.envMapIntensity.value=st.environmentIntensity);ed&&(id.setValue(Zd,"toneMappingExposure",yu.toneMappingExposure),Au.needsLights&&(ld=td,(od=nd).ambientLightColor.needsUpdate=ld,od.lightProbe.needsUpdate=ld,od.directionalLights.needsUpdate=ld,od.directionalLightShadows.needsUpdate=ld,od.pointLights.needsUpdate=ld,od.pointLightShadows.needsUpdate=ld,od.spotLights.needsUpdate=ld,od.spotLightShadows.needsUpdate=ld,od.rectAreaLights.needsUpdate=ld,od.hemisphereLights.needsUpdate=ld),sc&&!0===Hl.fog&&Ld.refreshFogUniforms(nd,sc),Ld.refreshMaterialUniforms(nd,Hl,sd,ad,mu.state.transmissionRenderTarget[at.id]),WebGLUniforms.upload(Zd,getUniformList(Au),nd,Md));var od,ld;Hl.isShaderMaterial&&!0===Hl.uniformsNeedUpdate&&(WebGLUniforms.upload(Zd,getUniformList(Au),nd,Md),Hl.uniformsNeedUpdate=!1);Hl.isSpriteMaterial&&id.setValue(Zd,"center",rc.center);if(id.setValue(Zd,"modelViewMatrix",rc.modelViewMatrix),id.setValue(Zd,"normalMatrix",rc.normalMatrix),id.setValue(Zd,"modelMatrix",rc.matrixWorld),Hl.isShaderMaterial||Hl.isRawShaderMaterial){const at=Hl.uniformsGroups;for(let st=0,ot=at.length;st<ot;st++){const ot=at[st];Gd.update(ot,Su),Gd.bind(ot,Su)}}return Su}(at,st,ot,Hl,rc);bd.setMaterial(Hl,oc);let wc=ot.index,Sc=1;if(!0===Hl.wireframe){if(wc=kd.getWireframeAttribute(ot),void 0===wc)return;Sc=2}const iu=ot.drawRange,su=ot.attributes.position;let lu=iu.start*Sc,cu=(iu.start+iu.count)*Sc;null!==sc&&(lu=Math.max(lu,sc.start*Sc),cu=Math.min(cu,(sc.start+sc.count)*Sc)),null!==wc?(lu=Math.max(lu,0),cu=Math.min(cu,wc.count)):void 0!==su&&null!==su&&(lu=Math.max(lu,0),cu=Math.min(cu,su.count));const uu=cu-lu;if(uu<0||uu===1/0)return;let pu;Vd.setup(rc,Hl,_c,ot,wc);let gu=Fd;if(null!==wc&&(pu=Cd.get(wc),gu=jd,gu.setIndex(pu)),rc.isMesh)!0===Hl.wireframe?(bd.setLineWidth(Hl.wireframeLinewidth*getTargetPixelRatio()),gu.setMode(Zd.LINES)):gu.setMode(Zd.TRIANGLES);else if(rc.isLine){let at=Hl.linewidth;void 0===at&&(at=1),bd.setLineWidth(at*getTargetPixelRatio()),rc.isLineSegments?gu.setMode(Zd.LINES):rc.isLineLoop?gu.setMode(Zd.LINE_LOOP):gu.setMode(Zd.LINE_STRIP)}else rc.isPoints?gu.setMode(Zd.POINTS):rc.isSprite&&gu.setMode(Zd.TRIANGLES);if(rc.isBatchedMesh)if(null!==rc._multiDrawInstances)(0,ut.mcG)("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),gu.renderMultiDrawInstances(rc._multiDrawStarts,rc._multiDrawCounts,rc._multiDrawCount,rc._multiDrawInstances);else if(_d.get("WEBGL_multi_draw"))gu.renderMultiDraw(rc._multiDrawStarts,rc._multiDrawCounts,rc._multiDrawCount);else{const at=rc._multiDrawStarts,st=rc._multiDrawCounts,ot=rc._multiDrawCount,ut=wc?Cd.get(wc).bytesPerElement:1,sc=Ed.get(Hl).currentProgram.getUniforms();for(let Hl=0;Hl<ot;Hl++)sc.setValue(Zd,"_gl_DrawID",Hl),gu.render(at[Hl]/ut,st[Hl])}else if(rc.isInstancedMesh)gu.renderInstances(lu,uu,rc.count);else if(ot.isInstancedBufferGeometry){const at=void 0!==ot._maxInstanceCount?ot._maxInstanceCount:1/0,st=Math.min(ot.instanceCount,at);gu.renderInstances(lu,uu,st)}else gu.render(lu,uu)},this.compile=function(at,st,ot){void 0===ot&&(ot=null),null===ot&&(ot=at),mu=zd.get(ot),mu.init(st),Au.push(mu),ot.traverseVisible((function(at){at.isLight&&at.layers.test(st.layers)&&(mu.pushLight(at),at.castShadow&&mu.pushShadow(at))})),at!==ot&&at.traverseVisible((function(at){at.isLight&&at.layers.test(st.layers)&&(mu.pushLight(at),at.castShadow&&mu.pushShadow(at))})),mu.setupLights();const ut=new Set;return at.traverse((function(at){if(!(at.isMesh||at.isPoints||at.isLine||at.isSprite))return;const st=at.material;if(st)if(Array.isArray(st))for(let Hl=0;Hl<st.length;Hl++){const rc=st[Hl];prepareMaterial(rc,ot,at),ut.add(rc)}else prepareMaterial(st,ot,at),ut.add(st)})),mu=Au.pop(),ut},this.compileAsync=function(at,st,ot){void 0===ot&&(ot=null);const ut=this.compile(at,st,ot);return new Promise((st=>{function checkMaterialsReady(){ut.forEach((function(at){Ed.get(at).currentProgram.isReady()&&ut.delete(at)})),0!==ut.size?setTimeout(checkMaterialsReady,10):st(at)}null!==_d.get("KHR_parallel_shader_compile")?checkMaterialsReady():setTimeout(checkMaterialsReady,10)}))};let Wd=null;function onXRSessionStart(){qd.stop()}function onXRSessionEnd(){qd.start()}const qd=new WebGLAnimation;function projectObject(at,st,ot,ut){if(!1===at.visible)return;if(at.layers.test(st.layers))if(at.isGroup)ot=at.renderOrder;else if(at.isLOD)!0===at.autoUpdate&&at.update(st);else if(at.isLight)mu.pushLight(at),at.castShadow&&mu.pushShadow(at);else if(at.isSprite){if(!at.frustumCulled||dd.intersectsSprite(at)){ut&&Ad.setFromMatrixPosition(at.matrixWorld).applyMatrix4(gd);const st=Id.update(at),Hl=at.material;Hl.visible&&pu.push(at,st,Hl,ot,Ad.z,null)}}else if((at.isMesh||at.isLine||at.isPoints)&&(!at.frustumCulled||dd.intersectsObject(at))){const st=Id.update(at),Hl=at.material;if(ut&&(void 0!==at.boundingSphere?(null===at.boundingSphere&&at.computeBoundingSphere(),Ad.copy(at.boundingSphere.center)):(null===st.boundingSphere&&st.computeBoundingSphere(),Ad.copy(st.boundingSphere.center)),Ad.applyMatrix4(at.matrixWorld).applyMatrix4(gd)),Array.isArray(Hl)){const ut=st.groups;for(let rc=0,sc=ut.length;rc<sc;rc++){const sc=ut[rc],oc=Hl[sc.materialIndex];oc&&oc.visible&&pu.push(at,st,oc,ot,Ad.z,sc)}}else Hl.visible&&pu.push(at,st,Hl,ot,Ad.z,null)}const Hl=at.children;for(let rc=0,sc=Hl.length;rc<sc;rc++)projectObject(Hl[rc],st,ot,ut)}function renderScene(at,st,ot,ut){const Hl=at.opaque,rc=at.transmissive,sc=at.transparent;mu.setupLightsView(ot),!0===pd&&Nd.setGlobalState(yu.clippingPlanes,ot),ut&&bd.viewport(hh.copy(ut)),Hl.length>0&&renderObjects(Hl,st,ot),rc.length>0&&renderObjects(rc,st,ot),sc.length>0&&renderObjects(sc,st,ot),bd.buffers.depth.setTest(!0),bd.buffers.depth.setMask(!0),bd.buffers.color.setMask(!0),bd.setPolygonOffset(!1)}function renderTransmissionPass(at,st,ot,Hl){if(null!==(!0===ot.isScene?ot.overrideMaterial:null))return;void 0===mu.state.transmissionRenderTarget[Hl.id]&&(mu.state.transmissionRenderTarget[Hl.id]=new ut.nWS(1,1,{generateMipmaps:!0,type:_d.has("EXT_color_buffer_half_float")||_d.has("EXT_color_buffer_float")?ut.ix0:ut.OUM,minFilter:ut.$_I,samples:4,stencilBuffer:rc,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:ut.ppV.workingColorSpace}));const sc=mu.state.transmissionRenderTarget[Hl.id],oc=Hl.viewport||hh;sc.setSize(oc.z*yu.transmissionResolutionScale,oc.w*yu.transmissionResolutionScale);const _c=yu.getRenderTarget(),wc=yu.getActiveCubeFace(),Sc=yu.getActiveMipmapLevel();yu.setRenderTarget(sc),yu.getClearColor(id),nd=yu.getClearAlpha(),nd<1&&yu.setClearColor(16777215,.5),yu.clear(),vd&&Od.render(ot);const iu=yu.toneMapping;yu.toneMapping=ut.y_p;const su=Hl.viewport;if(void 0!==Hl.viewport&&(Hl.viewport=void 0),mu.setupLightsView(Hl),!0===pd&&Nd.setGlobalState(yu.clippingPlanes,Hl),renderObjects(at,ot,Hl),Md.updateMultisampleRenderTarget(sc),Md.updateRenderTargetMipmap(sc),!1===_d.has("WEBGL_multisampled_render_to_texture")){let at=!1;for(let rc=0,sc=st.length;rc<sc;rc++){const sc=st[rc],oc=sc.object,_c=sc.geometry,wc=sc.material,Sc=sc.group;if(wc.side===ut.$EB&&oc.layers.test(Hl.layers)){const st=wc.side;wc.side=ut.hsX,wc.needsUpdate=!0,renderObject(oc,ot,Hl,_c,wc,Sc),wc.side=st,wc.needsUpdate=!0,at=!0}}!0===at&&(Md.updateMultisampleRenderTarget(sc),Md.updateRenderTargetMipmap(sc))}yu.setRenderTarget(_c,wc,Sc),yu.setClearColor(id,nd),void 0!==su&&(Hl.viewport=su),yu.toneMapping=iu}function renderObjects(at,st,ot){const ut=!0===st.isScene?st.overrideMaterial:null;for(let Hl=0,rc=at.length;Hl<rc;Hl++){const rc=at[Hl],sc=rc.object,oc=rc.geometry,_c=rc.group;let wc=rc.material;!0===wc.allowOverride&&null!==ut&&(wc=ut),sc.layers.test(ot.layers)&&renderObject(sc,st,ot,oc,wc,_c)}}function renderObject(at,st,ot,Hl,rc,sc){at.onBeforeRender(yu,st,ot,Hl,rc,sc),at.modelViewMatrix.multiplyMatrices(ot.matrixWorldInverse,at.matrixWorld),at.normalMatrix.getNormalMatrix(at.modelViewMatrix),rc.onBeforeRender(yu,st,ot,Hl,at,sc),!0===rc.transparent&&rc.side===ut.$EB&&!1===rc.forceSinglePass?(rc.side=ut.hsX,rc.needsUpdate=!0,yu.renderBufferDirect(ot,st,Hl,rc,at,sc),rc.side=ut.hB5,rc.needsUpdate=!0,yu.renderBufferDirect(ot,st,Hl,rc,at,sc),rc.side=ut.$EB):yu.renderBufferDirect(ot,st,Hl,rc,at,sc),at.onAfterRender(yu,st,ot,Hl,rc,sc)}function getProgram(at,st,ot){!0!==st.isScene&&(st=yd);const ut=Ed.get(at),Hl=mu.state.lights,rc=mu.state.shadowsArray,sc=Hl.state.version,oc=Dd.getParameters(at,Hl.state,rc,st,ot),_c=Dd.getProgramCacheKey(oc);let wc=ut.programs;ut.environment=at.isMeshStandardMaterial?st.environment:null,ut.fog=st.fog,ut.envMap=(at.isMeshStandardMaterial?Td:Sd).get(at.envMap||ut.environment),ut.envMapRotation=null!==ut.environment&&null===at.envMap?st.environmentRotation:at.envMapRotation,void 0===wc&&(at.addEventListener("dispose",onMaterialDispose),wc=new Map,ut.programs=wc);let Sc=wc.get(_c);if(void 0!==Sc){if(ut.currentProgram===Sc&&ut.lightsStateVersion===sc)return updateCommonMaterialProperties(at,oc),Sc}else oc.uniforms=Dd.getUniforms(at),at.onBeforeCompile(oc,yu),Sc=Dd.acquireProgram(oc,_c),wc.set(_c,Sc),ut.uniforms=oc.uniforms;const iu=ut.uniforms;return(at.isShaderMaterial||at.isRawShaderMaterial)&&!0!==at.clipping||(iu.clippingPlanes=Nd.uniform),updateCommonMaterialProperties(at,oc),ut.needsLights=function(at){return at.isMeshLambertMaterial||at.isMeshToonMaterial||at.isMeshPhongMaterial||at.isMeshStandardMaterial||at.isShadowMaterial||at.isShaderMaterial&&!0===at.lights}(at),ut.lightsStateVersion=sc,ut.needsLights&&(iu.ambientLightColor.value=Hl.state.ambient,iu.lightProbe.value=Hl.state.probe,iu.directionalLights.value=Hl.state.directional,iu.directionalLightShadows.value=Hl.state.directionalShadow,iu.spotLights.value=Hl.state.spot,iu.spotLightShadows.value=Hl.state.spotShadow,iu.rectAreaLights.value=Hl.state.rectArea,iu.ltc_1.value=Hl.state.rectAreaLTC1,iu.ltc_2.value=Hl.state.rectAreaLTC2,iu.pointLights.value=Hl.state.point,iu.pointLightShadows.value=Hl.state.pointShadow,iu.hemisphereLights.value=Hl.state.hemi,iu.directionalShadowMap.value=Hl.state.directionalShadowMap,iu.directionalShadowMatrix.value=Hl.state.directionalShadowMatrix,iu.spotShadowMap.value=Hl.state.spotShadowMap,iu.spotLightMatrix.value=Hl.state.spotLightMatrix,iu.spotLightMap.value=Hl.state.spotLightMap,iu.pointShadowMap.value=Hl.state.pointShadowMap,iu.pointShadowMatrix.value=Hl.state.pointShadowMatrix),ut.currentProgram=Sc,ut.uniformsList=null,Sc}function getUniformList(at){if(null===at.uniformsList){const st=at.currentProgram.getUniforms();at.uniformsList=WebGLUniforms.seqWithValue(st.seq,at.uniforms)}return at.uniformsList}function updateCommonMaterialProperties(at,st){const ot=Ed.get(at);ot.outputColorSpace=st.outputColorSpace,ot.batching=st.batching,ot.batchingColor=st.batchingColor,ot.instancing=st.instancing,ot.instancingColor=st.instancingColor,ot.instancingMorph=st.instancingMorph,ot.skinning=st.skinning,ot.morphTargets=st.morphTargets,ot.morphNormals=st.morphNormals,ot.morphColors=st.morphColors,ot.morphTargetsCount=st.morphTargetsCount,ot.numClippingPlanes=st.numClippingPlanes,ot.numIntersection=st.numClipIntersection,ot.vertexAlphas=st.vertexAlphas,ot.vertexTangents=st.vertexTangents,ot.toneMapping=st.toneMapping}qd.setAnimationLoop((function(at){Wd&&Wd(at)})),"undefined"!==typeof self&&qd.setContext(self),this.setAnimationLoop=function(at){Wd=at,Hd.setAnimationLoop(at),null===at?qd.stop():qd.start()},Hd.addEventListener("sessionstart",onXRSessionStart),Hd.addEventListener("sessionend",onXRSessionEnd),this.render=function(at,st){if(void 0!==st&&!0!==st.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===_u)return;if(!0===at.matrixWorldAutoUpdate&&at.updateMatrixWorld(),null===st.parent&&!0===st.matrixWorldAutoUpdate&&st.updateMatrixWorld(),!0===Hd.enabled&&!0===Hd.isPresenting&&(!0===Hd.cameraAutoUpdate&&Hd.updateCamera(st),st=Hd.getCamera()),!0===at.isScene&&at.onBeforeRender(yu,at,st,Du),mu=zd.get(at,Au.length),mu.init(st),Au.push(mu),gd.multiplyMatrices(st.projectionMatrix,st.matrixWorldInverse),dd.setFromProjectionMatrix(gd,ut.TdN,st.reversedDepth),md=this.localClippingEnabled,pd=Nd.init(this.clippingPlanes,md),pu=Pd.get(at,gu.length),pu.init(),gu.push(pu),!0===Hd.enabled&&!0===Hd.isPresenting){const at=yu.xr.getDepthSensingMesh();null!==at&&projectObject(at,st,-1/0,yu.sortObjects)}projectObject(at,st,0,yu.sortObjects),pu.finish(),!0===yu.sortObjects&&pu.sort(od,ld),vd=!1===Hd.enabled||!1===Hd.isPresenting||!1===Hd.hasDepthSensing(),vd&&Od.addToRenderList(pu,at),this.info.render.frame++,!0===pd&&Nd.beginShadows();const ot=mu.state.shadowsArray;Rd.render(ot,at,st),!0===pd&&Nd.endShadows(),!0===this.info.autoReset&&this.info.reset();const Hl=pu.opaque,rc=pu.transmissive;if(mu.setupLights(),st.isArrayCamera){const ot=st.cameras;if(rc.length>0)for(let st=0,ut=ot.length;st<ut;st++){renderTransmissionPass(Hl,rc,at,ot[st])}vd&&Od.render(at);for(let st=0,ut=ot.length;st<ut;st++){const ut=ot[st];renderScene(pu,at,ut,ut.viewport)}}else rc.length>0&&renderTransmissionPass(Hl,rc,at,st),vd&&Od.render(at),renderScene(pu,at,st);null!==Du&&0===Su&&(Md.updateMultisampleRenderTarget(Du),Md.updateRenderTargetMipmap(Du)),!0===at.isScene&&at.onAfterRender(yu,at,st),Vd.resetDefaultState(),Lu=-1,$u=null,Au.pop(),Au.length>0?(mu=Au[Au.length-1],!0===pd&&Nd.setGlobalState(yu.clippingPlanes,mu.state.camera)):mu=null,gu.pop(),pu=gu.length>0?gu[gu.length-1]:null},this.getActiveCubeFace=function(){return xu},this.getActiveMipmapLevel=function(){return Su},this.getRenderTarget=function(){return Du},this.setRenderTargetTextures=function(at,st,ot){const ut=Ed.get(at);ut.__autoAllocateDepthBuffer=!1===at.resolveDepthBuffer,!1===ut.__autoAllocateDepthBuffer&&(ut.__useRenderToTexture=!1),Ed.get(at.texture).__webglTexture=st,Ed.get(at.depthTexture).__webglTexture=ut.__autoAllocateDepthBuffer?void 0:ot,ut.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(at,st){const ot=Ed.get(at);ot.__webglFramebuffer=st,ot.__useDefaultFramebuffer=void 0===st};const Yd=Zd.createFramebuffer();this.setRenderTarget=function(at,st,ot){void 0===st&&(st=0),void 0===ot&&(ot=0),Du=at,xu=st,Su=ot;let ut=!0,Hl=null,rc=!1,sc=!1;if(at){const oc=Ed.get(at);if(void 0!==oc.__useDefaultFramebuffer)bd.bindFramebuffer(Zd.FRAMEBUFFER,null),ut=!1;else if(void 0===oc.__webglFramebuffer)Md.setupRenderTarget(at);else if(oc.__hasExternalTextures)Md.rebindTextures(at,Ed.get(at.texture).__webglTexture,Ed.get(at.depthTexture).__webglTexture);else if(at.depthBuffer){const st=at.depthTexture;if(oc.__boundDepthTexture!==st){if(null!==st&&Ed.has(st)&&(at.width!==st.image.width||at.height!==st.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Md.setupDepthRenderbuffer(at)}}const _c=at.texture;(_c.isData3DTexture||_c.isDataArrayTexture||_c.isCompressedArrayTexture)&&(sc=!0);const wc=Ed.get(at).__webglFramebuffer;at.isWebGLCubeRenderTarget?(Hl=Array.isArray(wc[st])?wc[st][ot]:wc[st],rc=!0):Hl=at.samples>0&&!1===Md.useMultisampledRTT(at)?Ed.get(at).__webglMultisampledFramebuffer:Array.isArray(wc)?wc[ot]:wc,hh.copy(at.viewport),ed.copy(at.scissor),td=at.scissorTest}else hh.copy(cd).multiplyScalar(sd).floor(),ed.copy(ud).multiplyScalar(sd).floor(),td=hd;0!==ot&&(Hl=Yd);if(bd.bindFramebuffer(Zd.FRAMEBUFFER,Hl)&&ut&&bd.drawBuffers(at,Hl),bd.viewport(hh),bd.scissor(ed),bd.setScissorTest(td),rc){const ut=Ed.get(at.texture);Zd.framebufferTexture2D(Zd.FRAMEBUFFER,Zd.COLOR_ATTACHMENT0,Zd.TEXTURE_CUBE_MAP_POSITIVE_X+st,ut.__webglTexture,ot)}else if(sc){const ut=st;for(let st=0;st<at.textures.length;st++){const Hl=Ed.get(at.textures[st]);Zd.framebufferTextureLayer(Zd.FRAMEBUFFER,Zd.COLOR_ATTACHMENT0+st,Hl.__webglTexture,ot,ut)}}else if(null!==at&&0!==ot){const st=Ed.get(at.texture);Zd.framebufferTexture2D(Zd.FRAMEBUFFER,Zd.COLOR_ATTACHMENT0,Zd.TEXTURE_2D,st.__webglTexture,ot)}Lu=-1},this.readRenderTargetPixels=function(at,st,ot,ut,Hl,rc,sc,oc){if(void 0===oc&&(oc=0),!at||!at.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let _c=Ed.get(at).__webglFramebuffer;if(at.isWebGLCubeRenderTarget&&void 0!==sc&&(_c=_c[sc]),_c){bd.bindFramebuffer(Zd.FRAMEBUFFER,_c);try{const sc=at.textures[oc],_c=sc.format,wc=sc.type;if(!xd.textureFormatReadable(_c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!xd.textureTypeReadable(wc))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");st>=0&&st<=at.width-ut&&ot>=0&&ot<=at.height-Hl&&(at.textures.length>1&&Zd.readBuffer(Zd.COLOR_ATTACHMENT0+oc),Zd.readPixels(st,ot,ut,Hl,Ud.convert(_c),Ud.convert(wc),rc))}finally{const at=null!==Du?Ed.get(Du).__webglFramebuffer:null;bd.bindFramebuffer(Zd.FRAMEBUFFER,at)}}},this.readRenderTargetPixelsAsync=async function(at,st,ot,Hl,rc,sc,oc,_c){if(void 0===_c&&(_c=0),!at||!at.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let wc=Ed.get(at).__webglFramebuffer;if(at.isWebGLCubeRenderTarget&&void 0!==oc&&(wc=wc[oc]),wc){if(st>=0&&st<=at.width-Hl&&ot>=0&&ot<=at.height-rc){bd.bindFramebuffer(Zd.FRAMEBUFFER,wc);const oc=at.textures[_c],Sc=oc.format,iu=oc.type;if(!xd.textureFormatReadable(Sc))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!xd.textureTypeReadable(iu))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const su=Zd.createBuffer();Zd.bindBuffer(Zd.PIXEL_PACK_BUFFER,su),Zd.bufferData(Zd.PIXEL_PACK_BUFFER,sc.byteLength,Zd.STREAM_READ),at.textures.length>1&&Zd.readBuffer(Zd.COLOR_ATTACHMENT0+_c),Zd.readPixels(st,ot,Hl,rc,Ud.convert(Sc),Ud.convert(iu),0);const lu=null!==Du?Ed.get(Du).__webglFramebuffer:null;bd.bindFramebuffer(Zd.FRAMEBUFFER,lu);const cu=Zd.fenceSync(Zd.SYNC_GPU_COMMANDS_COMPLETE,0);return Zd.flush(),await(0,ut.jej)(Zd,cu,4),Zd.bindBuffer(Zd.PIXEL_PACK_BUFFER,su),Zd.getBufferSubData(Zd.PIXEL_PACK_BUFFER,0,sc),Zd.deleteBuffer(su),Zd.deleteSync(cu),sc}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(at,st,ot){void 0===st&&(st=null),void 0===ot&&(ot=0);const ut=Math.pow(2,-ot),Hl=Math.floor(at.image.width*ut),rc=Math.floor(at.image.height*ut),sc=null!==st?st.x:0,oc=null!==st?st.y:0;Md.setTexture2D(at,0),Zd.copyTexSubImage2D(Zd.TEXTURE_2D,ot,0,0,sc,oc,Hl,rc),bd.unbindTexture()};const Qd=Zd.createFramebuffer(),Kd=Zd.createFramebuffer();this.copyTextureToTexture=function(at,st,ot,Hl,rc,sc){let oc,_c,wc,Sc,iu,su,lu,cu,uu;void 0===ot&&(ot=null),void 0===Hl&&(Hl=null),void 0===rc&&(rc=0),void 0===sc&&(sc=null),null===sc&&(0!==rc?((0,ut.mcG)("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),sc=rc,rc=0):sc=0);const pu=at.isCompressedTexture?at.mipmaps[sc]:at.image;if(null!==ot)oc=ot.max.x-ot.min.x,_c=ot.max.y-ot.min.y,wc=ot.isBox3?ot.max.z-ot.min.z:1,Sc=ot.min.x,iu=ot.min.y,su=ot.isBox3?ot.min.z:0;else{const st=Math.pow(2,-rc);oc=Math.floor(pu.width*st),_c=Math.floor(pu.height*st),wc=at.isDataArrayTexture?pu.depth:at.isData3DTexture?Math.floor(pu.depth*st):1,Sc=0,iu=0,su=0}null!==Hl?(lu=Hl.x,cu=Hl.y,uu=Hl.z):(lu=0,cu=0,uu=0);const mu=Ud.convert(st.format),gu=Ud.convert(st.type);let Au;st.isData3DTexture?(Md.setTexture3D(st,0),Au=Zd.TEXTURE_3D):st.isDataArrayTexture||st.isCompressedArrayTexture?(Md.setTexture2DArray(st,0),Au=Zd.TEXTURE_2D_ARRAY):(Md.setTexture2D(st,0),Au=Zd.TEXTURE_2D),Zd.pixelStorei(Zd.UNPACK_FLIP_Y_WEBGL,st.flipY),Zd.pixelStorei(Zd.UNPACK_PREMULTIPLY_ALPHA_WEBGL,st.premultiplyAlpha),Zd.pixelStorei(Zd.UNPACK_ALIGNMENT,st.unpackAlignment);const yu=Zd.getParameter(Zd.UNPACK_ROW_LENGTH),_u=Zd.getParameter(Zd.UNPACK_IMAGE_HEIGHT),xu=Zd.getParameter(Zd.UNPACK_SKIP_PIXELS),Su=Zd.getParameter(Zd.UNPACK_SKIP_ROWS),Du=Zd.getParameter(Zd.UNPACK_SKIP_IMAGES);Zd.pixelStorei(Zd.UNPACK_ROW_LENGTH,pu.width),Zd.pixelStorei(Zd.UNPACK_IMAGE_HEIGHT,pu.height),Zd.pixelStorei(Zd.UNPACK_SKIP_PIXELS,Sc),Zd.pixelStorei(Zd.UNPACK_SKIP_ROWS,iu),Zd.pixelStorei(Zd.UNPACK_SKIP_IMAGES,su);const Lu=at.isDataArrayTexture||at.isData3DTexture,$u=st.isDataArrayTexture||st.isData3DTexture;if(at.isDepthTexture){const ot=Ed.get(at),ut=Ed.get(st),Hl=Ed.get(ot.__renderTarget),pu=Ed.get(ut.__renderTarget);bd.bindFramebuffer(Zd.READ_FRAMEBUFFER,Hl.__webglFramebuffer),bd.bindFramebuffer(Zd.DRAW_FRAMEBUFFER,pu.__webglFramebuffer);for(let mu=0;mu<wc;mu++)Lu&&(Zd.framebufferTextureLayer(Zd.READ_FRAMEBUFFER,Zd.COLOR_ATTACHMENT0,Ed.get(at).__webglTexture,rc,su+mu),Zd.framebufferTextureLayer(Zd.DRAW_FRAMEBUFFER,Zd.COLOR_ATTACHMENT0,Ed.get(st).__webglTexture,sc,uu+mu)),Zd.blitFramebuffer(Sc,iu,oc,_c,lu,cu,oc,_c,Zd.DEPTH_BUFFER_BIT,Zd.NEAREST);bd.bindFramebuffer(Zd.READ_FRAMEBUFFER,null),bd.bindFramebuffer(Zd.DRAW_FRAMEBUFFER,null)}else if(0!==rc||at.isRenderTargetTexture||Ed.has(at)){const ot=Ed.get(at),ut=Ed.get(st);bd.bindFramebuffer(Zd.READ_FRAMEBUFFER,Qd),bd.bindFramebuffer(Zd.DRAW_FRAMEBUFFER,Kd);for(let at=0;at<wc;at++)Lu?Zd.framebufferTextureLayer(Zd.READ_FRAMEBUFFER,Zd.COLOR_ATTACHMENT0,ot.__webglTexture,rc,su+at):Zd.framebufferTexture2D(Zd.READ_FRAMEBUFFER,Zd.COLOR_ATTACHMENT0,Zd.TEXTURE_2D,ot.__webglTexture,rc),$u?Zd.framebufferTextureLayer(Zd.DRAW_FRAMEBUFFER,Zd.COLOR_ATTACHMENT0,ut.__webglTexture,sc,uu+at):Zd.framebufferTexture2D(Zd.DRAW_FRAMEBUFFER,Zd.COLOR_ATTACHMENT0,Zd.TEXTURE_2D,ut.__webglTexture,sc),0!==rc?Zd.blitFramebuffer(Sc,iu,oc,_c,lu,cu,oc,_c,Zd.COLOR_BUFFER_BIT,Zd.NEAREST):$u?Zd.copyTexSubImage3D(Au,sc,lu,cu,uu+at,Sc,iu,oc,_c):Zd.copyTexSubImage2D(Au,sc,lu,cu,Sc,iu,oc,_c);bd.bindFramebuffer(Zd.READ_FRAMEBUFFER,null),bd.bindFramebuffer(Zd.DRAW_FRAMEBUFFER,null)}else $u?at.isDataTexture||at.isData3DTexture?Zd.texSubImage3D(Au,sc,lu,cu,uu,oc,_c,wc,mu,gu,pu.data):st.isCompressedArrayTexture?Zd.compressedTexSubImage3D(Au,sc,lu,cu,uu,oc,_c,wc,mu,pu.data):Zd.texSubImage3D(Au,sc,lu,cu,uu,oc,_c,wc,mu,gu,pu):at.isDataTexture?Zd.texSubImage2D(Zd.TEXTURE_2D,sc,lu,cu,oc,_c,mu,gu,pu.data):at.isCompressedTexture?Zd.compressedTexSubImage2D(Zd.TEXTURE_2D,sc,lu,cu,pu.width,pu.height,mu,pu.data):Zd.texSubImage2D(Zd.TEXTURE_2D,sc,lu,cu,oc,_c,mu,gu,pu);Zd.pixelStorei(Zd.UNPACK_ROW_LENGTH,yu),Zd.pixelStorei(Zd.UNPACK_IMAGE_HEIGHT,_u),Zd.pixelStorei(Zd.UNPACK_SKIP_PIXELS,xu),Zd.pixelStorei(Zd.UNPACK_SKIP_ROWS,Su),Zd.pixelStorei(Zd.UNPACK_SKIP_IMAGES,Du),0===sc&&st.generateMipmaps&&Zd.generateMipmap(Au),bd.unbindTexture()},this.copyTextureToTexture3D=function(at,st,ot,Hl,rc){return void 0===ot&&(ot=null),void 0===Hl&&(Hl=null),void 0===rc&&(rc=0),(0,ut.mcG)('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(at,st,ot,Hl,rc)},this.initRenderTarget=function(at){void 0===Ed.get(at).__webglFramebuffer&&Md.setupRenderTarget(at)},this.initTexture=function(at){at.isCubeTexture?Md.setTextureCube(at,0):at.isData3DTexture?Md.setTexture3D(at,0):at.isDataArrayTexture||at.isCompressedArrayTexture?Md.setTexture2DArray(at,0):Md.setTexture2D(at,0),bd.unbindTexture()},this.resetState=function(){xu=0,Su=0,Du=null,bd.reset(),Vd.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ut.TdN}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(at){this._outputColorSpace=at;const st=this.getContext();st.drawingBufferColorSpace=ut.ppV._getDrawingBufferColorSpace(at),st.unpackColorSpace=ut.ppV._getUnpackColorSpace()}}},8330:at=>{"use strict";at.exports=JSON.parse('{"rE":"4.1.0","Jk":{"O":"https://gitlab.com/panoramax/clients/web-viewer"}}')},4149:at=>{"use strict";at.exports=JSON.parse('{"maplibre":{"GeolocateControl.LocationNotAvailable":"Placering ikke tilg\xe6ngelig","GeolocateControl.FindMyLocation":"Find min placering"},"pnx":{"minimize":"Skjul dette modul, du kan vise det igen ved hj\xe6lp af knappen i nederste venstre hj\xf8rne","share_embed_docs":"L\xe6s mere om indlejringskonfiguration","zoom":"Zoom","zoomOut":"Zoom ud","zoomIn":"Zoom ind","moveUp":"Ryk opad","moveDown":"Ryk nedad","moveLeft":"Ryk til venstre","moveRight":"Ryk til h\xf8jre","moveMiddle":"Centreret visning","expand":"Udvid","expand_info":"F\xe5 modulet til at blive vist p\xe5 hele siden","show_psv":"Vis billedfremviseren","show_map":"Vis kortet","options":"Valgmuligheder","filters":"Filtre","layers":"Lag","search":"S\xf8g","search_empty":"Ingen resultater fundet","search_user":"S\xf8g efter et brugernavn\u2026","share":"Del","share_links":"Links","share_page":"Link til dette billede","share_image":"HD-billede","share_rss":"RSS-feed","share_rss_title":"RSS-feed med nye sekvenser i det aktuelt synlige kortomr\xe5de","share_embed":"Indlejr p\xe5 din hjemmeside","share_print":"Udskriv","copy":"Kopi\xe9r","copied":"Kopieret","error_retry":"Pr\xf8v igen senere","sequence_next":"N\xe6ste billede i sekvensen","sequence_play":"Afspil denne sekvens","sequence_more":"Flere afspilningsmuligheder","sequence_speed":"Afspillerens hastighed","legend_license":"Licens: {l}","legend_title":"Vis detaljer om billedet","error_click":"Forts\xe6t","error":"Vi har et problem\u2026","search_address":"S\xf8g efter en adresse, by\u2026","sequence_pause":"S\xe6t sekvensen p\xe5 pause","sequence_prev":"Forrige billede i sekvensen","loading_labels_serious":["\ud83d\uddfa\ufe0f Indl\xe6ser kortdata","\ud83d\udda5\ufe0f Anmoder API","\ud83d\uddbc\ufe0f Indl\xe6ser thumbnails","\ud83d\udd0d Analyserer EXIF-metadata","\ud83c\udfd8\ufe0f 3D-rendering","\ud83d\udcf7 Initialiserer 360\xb0-billeder","\ud83d\udfe0 Farveafstemning","\ud83d\udcaf Beregning af kvalitetsscore \xa9","\ud83d\udce1 Downloader opdateringer","\ud83c\udf0d Henter kortfliser","\ud83d\udcf8 Behandler skygger"],"edit_osm":"Rediger OSM","josm_live":"Aktiv\xe9r automatisk JOSM-synkronisering ved indl\xe6sning af billeder","loading_labels_fun":["\ud83e\udd8c Registrering af skilte om hjortekrydsning","\ud83d\ude98 S\xf8ger Panoramax Car \xa9","\u2615 Injicerer koffein","\ud83d\ude00 Smil, du er blevet kortlagt!","\ud83d\udc08 Deler kattebilleder","\ud83d\ude34 Reducerer overspringshandlinger","\ud83e\uded6 Brygger te","\ud83d\udc27 \xc5bner kildekode","\ud83d\ude87 Indekser undergrundsstationer","\ud83e\uddf9 Metadata-oprydning","\ud83d\ude92 Sender billeder af brandstation","\ud83d\udeb2 Opdatering af Greenways","\ud83d\ude89 Gennemgang af perron p\xe5 station","\ud83d\udef0\ufe0f S\xf8ger efter satellitter","\ud83d\udc65 Skriver personaer","\ud83d\udc1f Finder fish and chip butik","\ud83e\uddd1\u200d\ud83d\udcbb Gr\xe6nseflade til fejlfinding","\ud83d\udcc8 Inkrementelle statistikker","\ud83e\udd16 L\xe6rer semantik","\ud83c\udfa8 Redesign af gr\xe6nseflade","\ud83d\udcc5 Planl\xe6gning af foto-kortl\xe6gningsfester","\ud83e\uddc0 Modning af cheddars","\ud83c\udf04 Beregning af Cornwalls solskin","\ud83c\udf0a M\xe5ling af h\xf8jvande"],"error_psv":"Photo Sphere Viewer indl\xe6ses ikke korrekt","error_nopic":"Intet billede tilg\xe6ngeligt p\xe5 den givne position","error_api":"Billedserveren er ikke tilg\xe6ngelig","error_webgl":"WebGL underst\xf8ttes ikke af din browser","filter_date":"Dato","filter_date_1month":"1 m\xe5ned","filter_date_1year":"1 \xe5r","filter_user":"Bruger","filter_user_mypics":"Mine billeder","filter_picture":"Billedtype","filter_zoom_in":"Zoom ind p\xe5 kortet for at se dette filter","picture_flat":"Klassisk","picture_360":"360\xb0","filter_qualityscore_help":"Klik for at aktivere eller deaktivere","map_background":"Kortbaggrund","map_background_aerial":"Luftfoto","map_background_streets":"Gader","map_theme":"Korttema","error_pic":"Det \xf8nskede billede blev ikke fundet","error_api_compatibility":"Billedserveren er ikke kompatibel med denne version af fremviseren","filter_qualityscore":"Kvalitetsscore","error_josm":"JOSM svarer ikke, k\xf8rer den, og er fjernstyring aktiveret?","metadata_general_seqid_link":"G\xe5 til JSON-beskrivelse af sekvensen","map_theme_default":"Klassisk","map_theme_age_1":"> 2 \xe5r","map_theme_age_2":"< 2 \xe5r","map_theme_age_3":"< 1 \xe5r","map_theme_age_4":"< 1 m\xe5ned","map_theme_type":"Kameratype","map_theme_score":"Kvalitetsscore","contrast":"Aktiv\xe9r h\xf8jere billedkontrast","metadata_general_picid":"Billede","metadata_general_seqid":"Sekvens","metadata_general_picid_link":"G\xe5 til JSON-beskrivelse af billedet","metadata_general_author":"Forfatter","metadata_general_license":"Licens","metadata_general_license_link":"Se den fulde licensbeskrivelse","metadata_general_date":"Optagelsesdato","metadata_camera":"Kamera","metadata_camera_make":"Fabrikat","metadata_camera_model":"Model","metadata_camera_type":"Type","metadata_camera_resolution":"Opl\xf8sning","metadata_camera_focal_length":"Br\xe6ndvidde","metadata_location_latitude":"Breddegrad","metadata_location_orientation":"Retning","metadata_location_precision":"Pr\xe6cision i positionering","metadata_quality":"Kvalitet","metadata_quality_score":"Global score","metadata_quality_gps_score":"Positioneringsscore","metadata_quality_help":"F\xe5 mere at vide om kvalitetsscore","map_theme_age":"Optagelsesdato","metadata_location":"Position","metadata":"Metadata for billede","metadata_location_longitude":"L\xe6ngdegrad","metadata_quality_resolution_score":"Opl\xf8sningsscore","metadata_quality_missing":"ingen v\xe6rdi indstillet i billedet","metadata_exif":"EXIF","metadata_exif_name":"Tag","metadata_exif_value":"V\xe6rdi","report":"Indberet","report_auth":"Denne indberetning vil blive sendt via din konto \\"{a}\\"","report_nature_label":"Problemets karakter","report_nature":{"":"V\xe6lg problemets art\u2026","blur_missing":"En persons ansigt eller bils nummerplade er synlig","blur_excess":"Et objekt, der ikke har brug for sl\xf8ring, sl\xf8res","inappropriate":"Billedet er upassende (ikke relevant, n\xf8genhed\u2026)","privacy":"En privat sti eller ejendom er synlig","picture_low_quality":"Billedet er af meget d\xe5rlig kvalitet","mislocated":"Billedet er d\xe5rligt placeret p\xe5 kortet","copyright":"Billedet kr\xe6nker ophavsretten","other":"Enhver anden form for problem"},"report_whole_sequence":"Det g\xe6lder hele sekvensen","report_details":"Yderligere detaljer","report_details_placeholder":"Hvis du vil, kan du tilf\xf8je detaljer om problemet, og hvad det drejer sig om","report_email":"Din e-mail","report_email_placeholder":"Valgfri","report_submit":"Indsend","report_wait":"Sender indberetning \u2026","report_success":"Indberetningen er blevet sendt. Den vil blive gennemg\xe5et s\xe5 hurtigt som muligt.","report_failure":"Der opstod en fejl under oprettelse af indberetning: {e}. Pr\xf8v venligst igen senere.","qualityscore_title":"Om kvalitetsscoren","qualityscore_doc_2":"Bed\xf8mmelsen vises for brugerne som en A/B/C/D/E-score (A er den bedste, E den d\xe5rligste) og vises grafisk via denne skala:","qualityscore_doc_3":"Den beregnes ud fra GPS-pr\xe6cision og billedopl\xf8sning. Et professionelt system vil have en A-rating, et 360\xb0 actionkamera vil have en B-rating, og en smartphone vil have en C/D/E-rating.","qualityscore_doc_link":"Yderligere oplysninger om kvalitetsscoren","qualityscore_doc_1":"Panoramax tilbyder en kvalitetsscore for hvert billede. Det giver mulighed for nem kortfiltrering og overskuelig visning af tilg\xe6ngelige billeder af h\xf8j kvalitet.","minimize_short":"Skjul","id":"iD","josm":"JOSM","metadata_general_instance":"Oprindelse instans","contribute_id":"Bidrag til OpenStreetMap med iD-editor","geo_uri":"Ekstern app","picture_flat_long":"Klassisk billede","picture_360_long":"Panoramabillede","metadata_summary":"Opsummering","metadata_general_copy_id":"Kopi-ID","metadata_general_copy_picid":"Kopi billed-ID","filter_date_6months":"6 m\xe5neder","picture_all":"Alle","panoramax":"Panoramax","semantics_send_ok":"Dine redigeringer blev indsendt"},"psv":{"loadError":"Panoramaet kan ikke indl\xe6ses","twoFingers":"Brug to fingre til at navigere","ctrlZoom":"Brug ctrl + scroll til at zoome ind p\xe5 billedet"},"map":{"loading":"Indl\xe6ser\u2026","thumbnail":"Miniature af billedet, der holdes","not_public":"Ikke offentligt synlig","slow_loading":"Kortet indl\xe6ses langsomt og kan virke defekt","map_data":"Kortdata: {m}","more_panoramax":"F\xe5 mere at vide om Panoramax"}}')},369:at=>{"use strict";at.exports=JSON.parse('{"pnx":{"options":"Optionen","filters":"Filter","search":"Suche","layers":"Ebenen","share_links":"Links","share_page":"Link zu diesem Bild","loading_labels_fun":["\ud83e\udd8c Erkennung von \\"Reh kreuzt\\"-Schildern","\ud83d\ude98 Suche Panoramax-Auto \xa9","\u2615 Koffeininjektion","\ud83d\ude00 L\xe4chle, Du wirst kartografiert!","\ud83d\udc08 Katzenfotos teilen","\ud83d\ude34 Reduzieren der Prokrastination","\ud83c\udf7a\ufe0f Bier brauen","\ud83d\udc27 Quellcode \xf6ffnen","\ud83d\udee3\ufe0f Indizierung der Autobahnen","\ud83e\uddf9 Metadatenreinigung","\ud83d\ude92 Senden der Fotos der Feuerwehren","\ud83d\udeb2 Gr\xfcne Radwege identifiziert","\ud83d\ude89 Durchgang zum Bahnsteig","\ud83d\udef0\ufe0f Suche Satelliten","\ud83d\udc65 Personas anlegen","\ud83c\udf2d\ufe0f Lokalisierung der Currywurst","\ud83e\uddd1\u200d\ud83d\udcbb Debugging des Interfaces","\ud83d\udcc8 Hochz\xe4hlen der Statistiken","\ud83e\udd16 Lerne Semantik","\ud83c\udfa8 \xdcberarbeitung des Interface","\ud83d\udcc5 Plane Fotomapping-Parties","\ud83e\uddc0 Reifen des Emmentalers","\ud83c\udf04 Berechnen des Sonnenscheins","\ud83c\udf0a Messung der Gezeiten"],"search_empty":"Keine Ergebnisse gefunden","share":"Teilen","metadata_general_picid":"Bild","zoom":"Zoom","zoomOut":"Herauszoomen","zoomIn":"Hereinzoomen","moveUp":"Nach oben","moveDown":"Nach unten","moveRight":"Nach rechts","moveMiddle":"Sicht zentrieren","map_theme_age":"Aufnahmedatum","expand":"Vergr\xf6\xdfern","expand_info":"Widget im Vollbild anzeigen","show_psv":"Bildbetrachter anzeigen","show_map":"Karte anzeigen","search_user":"Benutzernamen suchen\u2026","filter_zoom_in":"Vergr\xf6\xdfere die Karte, um diesen Filter zu sehen","picture_flat":"Klassisch","picture_360":"360\xb0","filter_camera_model":"Nach Kameramodell","map_background":"Kartenhintergrund","map_background_aerial":"Satelliten","map_background_streets":"Stra\xdfen","map_theme":"Karten-Art","metadata_exif_name":"Schlagwort","metadata_exif_value":"Wert","map_theme_age_2":"<2 Jahre","map_theme_age_3":"<1 Jahr","map_theme_type":"Kameratyp","contrast":"H\xf6heren Bildkontrast aktivieren","metadata":"Bildmetadaten","metadata_general_seqid":"Sequenz","metadata_general_picid_link":"Zur JOSN-Beschreibung des Bildes gehen","loading_labels_serious":["\ud83d\uddfa\ufe0f Lade Kartendaten","\ud83d\udda5\ufe0f API anfragen","\ud83d\uddbc\ufe0f Vorschaubilder laden","\ud83d\udd0d EXIF-Metadaten analysieren","\ud83c\udfd8\ufe0f 3D-Rendering","\ud83d\udcf7 360\xb0 Fotos initialisieren","\ud83d\udfe0 Farben ausgleichen","\ud83d\udcaf Berechne Qualit\xe4tswert \xa9","\ud83d\udce1 Herunterladen von Updates","\ud83c\udf0d Lade Kartenaussschnitte","\ud83d\udcf8 Bearbeitung der Schatten"],"search_address":"Suche nach eine Adresse, Stadt, \u2026","share_image":"HD-Bild","share_rss":"RSS-Feed","share_embed":"Auf Webseite einbetten","share_print":"Drucken","copy":"Kopieren","copied":"Kopiert","error":"Ein Fehler ist aufgetreten\u2026","sequence_next":"N\xe4chstes Foto in der Sequenz","sequence_play":"Sequenz abspielen","sequence_pause":"Sequenz pausieren","sequence_prev":"Vorheriges Foto in der Sequenz","sequence_more":"Mehr Abspieloptionen","sequence_speed":"Abspielgeschwindigkeit","legend_license":"Lizenz: {l}","edit_osm":"OSM editieren","id":"iD","josm":"JOSM","josm_live":"Einschalten der automatischen JOSM-Synchronisierung beim Laden eines Bildes","error_psv":"Betrachter f\xfcr die Photospheres wurde nicht richtig geladen","error_pic":"Gesuchtes Foto wurde nicht gefunden","error_nopic":"Kein Foto verf\xfcgbar an dieser Position","error_api":"Foto-Server ist nicht verf\xfcgbar","error_josm":"JOSM reagiert nicht, ist es ge\xf6ffnet und die Remote eingeschaltet?","error_api_compatibility":"Der Foto-Server ist nicht mit dieser Version des Betrachters kompatibel","filter_date":"Datum","filter_user":"Benutzer","filter_picture":"Foto-Art","map_theme_default":"Klassisch","map_theme_age_1":">2 Jahre","metadata_general_seqid_link":"Zur JSON-Beschreibung der Sequenz gehen","metadata_general_author":"Autor","metadata_general_license":"Lizenz","metadata_general_date":"Aufnahmedatum","metadata_camera":"Kamera","metadata_camera_make":"Hersteller","metadata_camera_model":"Modell","metadata_camera_type":"Typ","metadata_camera_focal_length":"Brennweite","metadata_location":"Position","metadata_location_longitude":"L\xe4ngengrad","metadata_location_latitude":"Breitengrad","metadata_location_orientation":"Richtung","metadata_location_precision":"Pr\xe4zision der Positionierung","metadata_exif":"EXIF","minimize":"Widget verbergen. Du kannst es \xfcber die Schaltfl\xe4che in der linken, unteren Ecke wieder einblenden","map_theme_age_4":"< 1 Monat","error_subtitle":"Bitte versuchen sie es sp\xe4ter erneut, oder schauen sie in die Web-Browser-Konsole f\xfcr mehr Details.","moveLeft":"Nach links","share_rss_title":"RSS-Feed neuer Sequenzen auf dem aktuell sichtbaren Kartenbereich","error_webgl":"WebGL wird von ihrem Browser nicht unterst\xfctzt","metadata_general_license_link":"Volle Lizenzbeschreibung ansehen","share_embed_docs":"Mehr \xfcber die Einbettungs-Konfiguration lesen","report_nature":{"":"Art des Problems ausw\xe4hlen\u2026","inappropriate":"Bild ist unangemessen (irrelevant, Nacktheit, ...)","picture_low_quality":"Bild hat eine schlechte Qualit\xe4t","blur_missing":"Das Gesicht einer Person oder ein KFZ-Kennzeichen ist sichtbar","blur_excess":"Ein Objekt wurde unkenntlich gemacht, obwohl es nicht erforderlich war","privacy":"Ein privater Pfad oder ein privates Grundst\xfcck ist sichtbar","mislocated":"Bild ist falsch auf der Karte verortet","copyright":"Bild verletzt das Urheberrecht","other":"Andere Art von Problem"},"report_details_placeholder":"Du kannst optional Details \xfcber das Problem hinzuf\xfcgen","report_auth":"Dieser Report wird durch ihren Account \\"{a}\\" gesendet","report_nature_label":"Ursache des Problems","report_whole_sequence":"Dies betrifft die gesamte Sequenz","report_details":"Weitere Details","report_email":"Ihre Email","report_email_placeholder":"Optional","report_submit":"Absenden","report_success":"Ihr Bericht wurde erfolgreich gesendet. Er wird so schnell wie m\xf6glich \xfcberpr\xfcft.","report_failure":"Ein Fehler ist bei der Erstellung des Reports aufgetreten: {e}. Bitte versuchen sie es erneut.","report":"Melden","legend_title":"Zeige Bilderdetails","report_wait":"Bericht senden\u2026","error_click":"Weiter","error_retry":"Bitte sp\xe4ter erneut versuchen","metadata_camera_resolution":"Aufl\xf6sung","filter_user_mypics":"Meine Fotos","metadata_quality_missing":"kein Wert im Foto gesetzt","filter_date_1month":"1 Monat","filter_date_1year":"1 Jahr","filter_qualityscore":"Qualit\xe4tswert","filter_qualityscore_help":"Klicken, um zu aktivieren oder deaktivieren","map_theme_score":"Qualit\xe4tswert","metadata_quality":"Qualit\xe4t","metadata_quality_help":"Erfahre mehr \xfcber den Qualit\xe4tswert","metadata_quality_resolution_score":"Aufl\xf6sungswertung","metadata_quality_gps_score":"Positionswertung","metadata_quality_score":"Gesamtwertung","qualityscore_title":"\xdcber den Qualit\xe4tsfaktor","qualityscore_doc_link":"Weitere Informationen zur Berechnung des Qualit\xe4tsfaktors findest du in unserer Dokumentation","qualityscore_doc_1":"Panoramax bietet einen Qualit\xe4tsfaktor f\xfcr jedes Bild. Es erm\xf6glicht eine einfache Kartenfilterung und eine umfassende Anzeige der Verf\xfcgbarkeit hochwertiger Bilder.","qualityscore_doc_2":"Die Note wird den Benutzern als A/B/C/D/E-Bewertung angezeigt (A ist die beste, E die schlechteste) und anhand dieser Skala grafisch dargestellt:","qualityscore_doc_3":"Die Berechnung erfolgt auf der Grundlage der GPS-Genauigkeit und der Bildaufl\xf6sung. Ein professionelles System wird mit A bewertet, eine 360-Grad-Action-Kamera mit B und ein Smartphone mit C/D/E.","minimize_short":"Verbergen","semantics_features_none":"Bislang wurde kein Feature erkannt oder annotiert in diesem Bild.","semantics_features_default_title":"Feature #{nb}","semantics_features_subtitle":"{nb} assozierte Eigenschaften","semantics_show_all_tags":"Alle Schlagworte anzeigen","semantics_title":"Schlagworte","semantics_tags":"{nb] Schlagworte","semantics_features":"Erkannte Features","semantics_hide_all_tags":"Alle Schlagworte verbergen","semantics_annotation_tooltip":"Klicken um Details zu sehen","semantics_key":"Schl\xfcssel","semantics_value":"Wert","semantics_key_doc":"Mehr \xfcber diesen Schl\xfcssel erfahren","semantics_value_doc":"Mehr \xfcber dieses Schlagwort erfahren","semantics_tags_picture":"Foto-Schlagworte","semantics_tags_picture_none":"Bislang wurden keine Schlagworte f\xfcr dieses Foto gesetzt.","semantics_show_annotations":"Fotoannotierungen anzeigen","semantics_hide_annotations":"Fotoannotierungen verbergen","semantics_wikidata_properties":{"P31":"Instanz von","P279":"Unterklasse von","P361":"Teil von"},"metadata_exif_doc":"Dokumentation der EXIF Tags","metadata_exif_doc_title":"Zur Exiv2 Dokumentation f\xfcr die vollen Details zu EXIF und den XMP Tag Definitionen","metadata_location_coordinates":"Koordinaten (L\xe4ngengrad, Breitengrad)","metadata_location_copy":"Kopiere {v}","metadata_location_copy_more":"Mehr Optionen zum Kopieren der Koordinaten","whats_panoramax":"Panoramax ist eine Geo-Commons f\xfcr Gebietsfotos.","picture_360_long":"Panoramafoto","metadata_summary":"Zusammenfassung","filter_date_6months":"6 Monate","picture_all":"Alle","picture_flat_long":"Klassisches Foto","metadata_general_instance":"Quellinstanz","geo_uri":"Externe App","contribute_id":"Zu OpenStreetMap mit dem iD Editor beitragen","metadata_general_copy_id":"ID kopieren","metadata_general_copy_picid":"Kopiere Foto ID","semantics_qualifiers":"Qualifikationskriterien","panoramax":"Panoramax","semantics_zero_annotations":"Zu diesem Bild sind keine Anmerkungen vorhanden","semantics_hashtags":"Bild-Hashtags","semantics_editor_error":"Die Syntax ist ung\xfcltig. Deine Tags sollten so aussehen:\\nSchl\xfcssel=Wert\\nPr\xe4fix|Schl\xfcssel=Wert\\nPr\xe4fix|Schl\xfcssel[Qualif_Schl\xfcssel=Qualif_Wert]=Wert\\n\\nDie maximale L\xe4nge eines Schl\xfcssels betr\xe4gt 256 Zeichen, die eines Wertes betr\xe4gt 2048 Zeichen.","semantics_cantsave_invalid":"\xc4nderungen k\xf6nnen nicht angewendet werden, Eingabe ist ung\xfcltig","semantics_editor_example":"Schl\xfcssel=Wert\\nPr\xe4fix|Schl\xfcssel=Wert","semantics_edit":"Attribute bearbeiten","semantics_save":"\xc4nderungen speichern","semantics_undo":"\xc4nderungen abbrechen","semantics_send_fail":"\xc4nderungen k\xf6nnen nicht angewendet werden, bitte versuche es sp\xe4ter noch einmal","semantics_send_ok":"\xc4nderungen wurden erfolgreich hochgeladen","semantics_save_drawn_annotation":"Position speichern","semantics_undo_drawn_annotation":"Abbrechen","semantics_save_drawn_annotation_incomplete":"Sie m\xfcssen vor der Validierung ein Rechteck dass in das Foto passt zeichnen","semantics_delete_annotation":"Annotierung l\xf6schen","semantics_delete_annotation_confirm":"Wollen sie diese Annotierung wirklich l\xf6schen?","semantics_add_annotation":"Neue Annotierung hinzuf\xfcgen","semantics_draw_annotation":"Klicken Sie erst auf die Ecke des Elements, das Sie darstellen m\xf6chten. Klicken Sie dann auf die gegen\xfcberliegende Ecke. Sie k\xf6nnen erneut auf eine Ecke klicken, um diese zu verschieben."},"psv":{"twoFingers":"Nutze zwei Finger zum Navigieren","ctrlZoom":"Nutze Strg+Scrollen, um das Bild zuvergr\xf6\xdfern","loadError":"Das Panorama konnte nicht geladen werden"},"map":{"thumbnail":"Vorschau des marktierten Fotos","not_public":"Nicht \xf6ffentlich sichtbar","loading":"Laden\u2026","slow_loading":"Die Karte wird nur langsam geladen und k\xf6nnte fehlerhaft erscheinen","map_data":"Kartendaten: {m}","more_panoramax":"Mehr Infos \xfcber Panoramax"},"maplibre":{"GeolocateControl.FindMyLocation":"Meinen Standort finden","GeolocateControl.LocationNotAvailable":"Standort nicht verf\xfcgbar"}}')},389:at=>{"use strict";at.exports=JSON.parse('{"psv":{"twoFingers":"Use two fingers to navigate","ctrlZoom":"Use ctrl + scroll to zoom the image","loadError":"The panorama can\'t be loaded"},"maplibre":{"GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available"},"pnx":{"zoom":"Zoom","zoomOut":"Zoom out","zoomIn":"Zoom in","moveUp":"Move up","moveDown":"Move down","moveLeft":"Move left","moveRight":"Move right","moveMiddle":"Center view","expand":"Expand","expand_info":"Make the widget appear in full page","show_psv":"Show the picture viewer","show_map":"Show the map","minimize":"Hide this widget, you can show it again using button in bottom left corner","minimize_short":"Hide","options":"Options","filters":"Filters","layers":"Layers","search":"Search","search_empty":"No results found","search_address":"Search an address, city\u2026","search_user":"Search a username\u2026","share":"Share","share_links":"Links","share_page":"Link to this picture","share_image":"HD Image","share_rss":"RSS feed","share_rss_title":"RSS feed of new sequences in the currently visible map area","share_embed":"Embed on your website","share_embed_docs":"Read more about embed configuration","share_print":"Print","panoramax":"Panoramax","whats_panoramax":"Panoramax is the geo-commons for territories\' pictures.","copy":"Copy","copied":"Copied","error":"We have a problem\u2026","error_click":"Continue","error_retry":"Please retry later","sequence_next":"Next picture in sequence","sequence_play":"Play along this sequence","sequence_pause":"Pause sequence","sequence_prev":"Previous picture in sequence","sequence_more":"More play options","sequence_speed":"Player speed","legend_license":"License: {l}","legend_title":"Show details of picture","id":"iD","contribute_id":"Contribute to OpenStreetMap with iD editor","geo_uri":"External app","josm":"JOSM","josm_live":"Enable JOSM automatic sync on picture loading","loading_labels_serious":["\ud83d\uddfa\ufe0f Loading map data","\ud83d\udda5\ufe0f Querying API","\ud83d\uddbc\ufe0f Loading thumbnails","\ud83d\udd0d Analyzing EXIF metadata","\ud83c\udfd8\ufe0f 3D rendering","\ud83d\udcf7 Initializing 360\xb0 pictures","\ud83d\udfe0 Colour balancing","\ud83d\udcaf Computing Quality Score \xa9","\ud83d\udce1 Downloading updates","\ud83c\udf0d Fetching map tiles","\ud83d\udcf8 Processing shadows"],"loading_labels_fun":["\ud83e\udd8c Detecting deer crossing signs","\ud83d\ude98 Searching Panoramax Car \xa9","\u2615 Injecting caffeine","\ud83d\ude00 Smile, you\'re mapped!","\ud83d\udc08 Sharing cat pictures","\ud83d\ude34 Reducing procrastination","\ud83e\uded6 Brewing tea","\ud83d\udc27 Opening source code","\ud83d\ude87 Indexing Underground stations","\ud83e\uddf9 Metadata cleanup","\ud83d\ude92 Sending fire station photos","\ud83d\udeb2 Greenways update","\ud83d\ude89 Station platform walkthrough","\ud83d\udef0\ufe0f Searching satellites","\ud83d\udc65 Writing personas","\ud83d\udc1f Locating chip shops","\ud83e\uddd1\u200d\ud83d\udcbb Debugging interface","\ud83d\udcc8 Incrementing statistics","\ud83e\udd16 Learning semantics","\ud83c\udfa8 Interface redesign","\ud83d\udcc5 Planning photo-mapping-parties","\ud83e\uddc0 Maturing cheddars","\ud83c\udf04 Calculating Cornish sunshine","\ud83c\udf0a Measuring the high tides"],"error_psv":"Photo Sphere Viewer is not loading properly","error_pic":"Requested picture wasn\'t found","error_nopic":"No picture available at given position","error_api":"The pictures server is not available","error_webgl":"WebGL is not supported by your browser","error_josm":"JOSM doesn\'t respond, is it running and is remote enabled?","error_api_compatibility":"The pictures server is not compatible with this viewer version","filter_date":"Date","filter_date_1month":"1 month","filter_date_6months":"6 months","filter_date_1year":"1 year","filter_user":"User","filter_user_mypics":"My pictures","filter_picture":"Picture type","filter_zoom_in":"Zoom-in the map to see this filter","picture_all":"All","picture_flat":"Classic","picture_360":"360\xb0","picture_flat_long":"Classic picture","picture_360_long":"Panoramic picture","filter_qualityscore":"Quality score","filter_qualityscore_help":"Click to enable or disable","qualityscore_title":"About the quality score","qualityscore_doc_1":"Panoramax offers a Quality Score for each picture. It allows easy map filtering and comprehensive display of high-quality pictures availability.","qualityscore_doc_2":"The grade is shown to users as a A/B/C/D/E score (A is the best, E the worst), and shown graphically through this scale:","qualityscore_doc_3":"It is computed based on GPS precision and picture resolution. A professional system will have an A-rating, a 360\xb0 action camera will have a B-rating, and a smartphone will be C/D/E-rated.","qualityscore_doc_link":"Know more about the Quality Score","map_background":"Map background","map_background_aerial":"Aerial","map_background_streets":"Streets","map_theme":"Map theme","map_theme_default":"Classic","map_theme_age":"Capture date","map_theme_age_1":"> 2 years","map_theme_age_2":"< 2 years","map_theme_age_3":"< 1 year","map_theme_age_4":"< 1 month","map_theme_type":"Camera type","map_theme_score":"Quality score","contrast":"Enable higher image contrast","metadata":"Picture metadata","metadata_summary":"Summary","metadata_general_copy_id":"Copy ID","metadata_general_copy_picid":"Copy picture ID","metadata_general_picid":"Picture","metadata_general_seqid":"Sequence","metadata_general_picid_link":"Go to JSON description of the picture","metadata_general_seqid_link":"Go to JSON description of the sequence","metadata_general_author":"Author","metadata_general_license":"License","metadata_general_license_link":"See the full licence description","metadata_general_date":"Capture date","metadata_general_instance":"Origin instance","metadata_camera":"Camera","metadata_camera_make":"Make","metadata_camera_model":"Model","metadata_camera_type":"Type","metadata_camera_resolution":"Resolution","metadata_camera_focal_length":"Focal length","metadata_location":"Position","metadata_location_coordinates":"Coordinates (longitude, latitude)","metadata_location_orientation":"Direction","metadata_location_precision":"Positioning precision","metadata_location_copy":"Copy {v}","metadata_location_copy_more":"More coordinates copy options","metadata_quality":"Quality","metadata_quality_help":"Know more about Quality Score","metadata_quality_score":"Global score","metadata_quality_gps_score":"Positioning score","metadata_quality_resolution_score":"Resolution score","metadata_quality_missing":"no value set in picture","metadata_exif":"EXIF","metadata_exif_name":"Tag","metadata_exif_value":"Value","metadata_exif_doc":"Docs for EXIF tags","metadata_exif_doc_title":"Go to Exiv2 documentation to have full details on EXIF and XMP tags definitions","semantics_title":"Tags","semantics_tags":"{nb} tags","semantics_features":"Picture features","semantics_features_none":"No feature has been drawn in this picture yet.","semantics_features_default_title":"Feature {nb}","semantics_features_subtitle":"{nb} associated properties","semantics_annotation_tooltip":"Click to see details","semantics_show_all_tags":"Show all tags","semantics_hide_all_tags":"Hide all tags","semantics_key":"Key","semantics_value":"Value","semantics_key_doc":"Know more about this key","semantics_value_doc":"Know more about this tag","semantics_tags_picture":"Picture tags","semantics_tags_picture_none":"No tags has been set for this picture yet.","semantics_qualifiers":"Qualifiers","semantics_show_annotations":"Display picture features","semantics_hide_annotations":"Hide picture features","semantics_zero_annotations":"No features drawn on this picture","semantics_add_annotation":"Add a new feature","semantics_draw_annotation":"First, click on the corner of the feature you\'d like to represent. Then, click on the opposite corner. You can click again on a corner to move it.","semantics_save_drawn_annotation":"Save position","semantics_undo_drawn_annotation":"Cancel","semantics_save_drawn_annotation_incomplete":"You must draw a rectangle that fits on the picture before validating","semantics_delete_annotation":"Delete this feature","semantics_delete_annotation_confirm":"Do you really want to delete this feature ?","semantics_hashtags":"Picture hashtags","semantics_wikidata_properties":{"P31":"instance of","P279":"subclass of","P361":"part of"},"semantics_editor_error":"The syntax is invalid. Your tags may look like:\\nkey=value\\nprefix|key=value\\nprefix|key[qualif_key=qualif_val]=value\\n\\nMax key length is 256 characters, max value length 2048 characters.","semantics_editor_example":"key=value\\nprefix|key=value","semantics_edit":"Edit attributes","semantics_save":"Save your changes","semantics_undo":"Cancel your edits","semantics_cantsave_invalid":"Cannot save changes, input is invalid","semantics_send_fail":"Unable to save your changes, please try again later","semantics_send_ok":"Your edits were sent successfully","semantics_login_needed":"In order to edit picture tags or features, you need to log in on Panoramax {n} instance. Do you want to log-in ?","report":"Report","report_auth":"This report will be sent using your account \\"{a}\\"","report_nature_label":"Cause of the issue","report_nature":{"":"Select the nature of issue\u2026","blur_missing":"A person\'s face or car license plate is visible","blur_excess":"An unnecessary blur was applied to an object","inappropriate":"Picture is inappropriate (unrelated, nudity\u2026)","privacy":"A private path or property is visible","picture_low_quality":"Image is low quality","mislocated":"Picture is poorly positioned on map","copyright":"Picture infringes copyright","other":"Any other kind of issue"},"report_whole_sequence":"This concerns the entire sequence","report_details":"Additional details","report_details_placeholder":"Optionally, you can add details about the issue","report_email":"Your email","report_email_placeholder":"Optional","report_submit":"Submit","report_wait":"Sending report\u2026","report_success":"Report was sent successfully. It will be reviewed as soon as possible.","report_failure":"An error occurred when creating report: {e}. Please try again later."},"map":{"loading":"Loading\u2026","thumbnail":"Thumbnail of hovered picture","not_public":"Not publicly visible","slow_loading":"Map is slow to load and could appear broken","map_data":"Map based on {m}","more_panoramax":"Discover more about Panoramax"}}')},9946:at=>{"use strict";at.exports=JSON.parse('{"psv":{"twoFingers":"Uzu du fingrojn por navigi","ctrlZoom":"Uzu ctrl + rulumo por zomi la bildon","loadError":"La bildo ne povas esti \u015dar\u011dita"},"pnx":{"zoom":"Zomo","zoomOut":"Malzomo","zoomIn":"Zomi","moveUp":"Movi supren","moveDown":"Movi malsupren","moveLeft":"Movi maldekstren","moveRight":"Movi dekstren","moveMiddle":"Centri vido","expand":"Pligrandigi","expand_info":"Aperigu la fenestra\u0135on en plena pa\u011do","show_psv":"Montri la bildspektilo","show_map":"Montri la mapo","minimize":"Maski la fenestra\u0135o, vu povas montri \u011din denove kun la butono en malsupra maldekstra angulo","sequence_prev":"Anta\u016da foto en la sekvenco","sequence_more":"Pli da ludopcioj","sequence_speed":"Rapideco de legado","sequence_next":"Sekva foto en la sekvenco","sequence_play":"Foliumi \u0109i tiun sinsekvon","sequence_pause":"Pa\u016dzi la sekvenco","copy":"Kopii","copied":"Kopiita","error":"Ni havas problemon\u2026","error_click":"Kontinui","error_retry":"Bonvolu reprovi poste","search_address":"Ser\u0109i adreson, urbon\u2026","filters":"Filtriloj","layers":"Tavoloj","search":"Ser\u0109i","share_embed_docs":"Pli pri enigito sur via retpa\u011daro","search_empty":"Neniu rezulto trovita","search_user":"Ser\u0109i uzantnomon\u2026","share":"Kunhavigi","share_links":"Ligiloj","share_page":"Ligilo de la foto","share_image":"HD bildo","share_rss":"RSS abonfluo","share_rss_title":"RSS abonfluo de la novaj sekvecoj en la nuntempe videbla mapzono","share_embed":"Enigita en via retpa\u011daro","share_print":"Presi","edit_osm":"Modifi OSM","legend_license":"Rajtigilo : {l}","josm_live":"Ebligas a\u016dtomatan JOSM-sinkronigon dum \u015dar\u011do de bildo","loading_labels_serious":["\ud83d\uddfa\ufe0f \u015cargo de la bazmapon","\ud83d\udda5\ufe0f API demandado","\ud83d\uddbc\ufe0f \u015car\u011do de miniaturoj","\ud83d\udd0d Analizo de EXIF-metadatumoj","\ud83c\udfd8\ufe0f 3D-rendumo","\ud83d\udcf7 Inico de 360\xb0-bildoj","\ud83d\udfe0 Kolora ekvilibrigo","\ud83d\udcaf Kalkulo de kvalitpoentaro \xa9","\ud83d\udce1 El\u015dutante \u011disdatoj","\ud83c\udf0d Reakirante mapkaheloj","\ud83d\udcf8 Traktadante ombroj"],"legend_title":"Montri la detaloj de la bildo","error_api":"La bildservilo ne estas disponebla","error_josm":"JOSM ne respondis. \u0108u \u011di funkcias kaj la regilo estas \u015daltita?","error_webgl":"WebGL ne estas subtenata per via retumilo","loading_labels_fun":["\ud83e\udd8c Detekto de cervinaj vojmontriloj","\ud83d\ude98 Ser\u0109o de Panoramax-a\u016dto \xa9","\u2615 Injekto de kafeino","\ud83d\ude00 Ridetu, vi estas mapita!","\ud83d\udc08 Kunhavigo de katbildoj","\ud83d\ude34 Redukto de prokrastado","\ud83d\udcd6 Lernado de Esperanto","\ud83d\udc27 Malfermo de fontkodo","\ud83d\ude87 Indekso de subteraj stacioj","\ud83e\uddf9 Purigo de metadatumoj","\ud83d\ude92 Sendado de fotoj de fajrostacioj","\ud83d\udeb2 \u011cisdatigo de verdaj vojoj","\ud83d\ude89 Promenado tra stacioplatformoj","\ud83d\udef0\ufe0f Ser\u0109o de satelitoj","\ud83d\udc65 Verkado de roluloj","\u2747\ufe0f Lokalizo de la Esperanto-flagoj","\ud83e\uddd1\u200d\ud83d\udcbb Sencimigado de la interfaco","\ud83d\udcc8 Alkrementi de la statistikoj","\ud83e\udd16 Lernadante semantiko","\ud83c\udfa8 Interfaca redezajno","\ud83d\udcc5 Planante fota-mapa-festoj","\ud83e\uddc0 Finmaturigo de la froma\u011doj","\ud83c\udf04 Kalkulante la sunbrilon de la Saharo","\ud83c\udf0a Mezurado de la altaj tajdoj"],"picture_360":"360\xb0","picture_flat":"Klasika","report_nature_label":"Speco de problemo","report_nature":{"":"Elektu la specon de problemo\u2026","blur_missing":"Viza\u011do a\u016d numerplato estas videbla","copyright":"La bildo malobeas kopirajton","blur_excess":"Objekto kiu ne bezonis malklari\u011don estas malklarigita","inappropriate":"La bildo estas neta\u016dga (nevera, nudeco...)","privacy":"Privata vojo a\u016d poseda\u0135o estas videbla","picture_low_quality":"La bildo estas de tre malbona kvalito","mislocated":"La bildo estas malbone poziciigita sur la mapo","other":"\u0108ia alia speco de problemo"},"report":"Raporti","report_auth":"\u0108i tiu raporto estos sendita per via konto \\"{a}\\"","filter_date":"Dato","filter_user_mypics":"Miaj fotoj","options":"Opcioj","error_api_compatibility":"La fotoservilo ne kongruas kun \u0109i tiu spektilo","filter_qualityscore":"Kvalitpoentaro","filter_qualityscore_help":"Alllaku por aktivigi a\u016d mal\u015dalti","map_theme_age":"Dato de fotado","map_theme_age_1":"> 2 jaroj","map_theme_age_2":"< 2 jaroj","map_theme_age_3":"< 1 jaro","map_theme_age_4":"< 1 monato","map_theme_score":"Kvalitpoentaro","metadata":"Metadatenoj de la bildo","map_theme_type":"Fotiltipo","metadata_general_seqid":"Sekvenco","metadata_camera_resolution":"Difino","metadata_quality_resolution_score":"Rezolucia poentaro","error_psv":"Foto-Sfera Spektilo ne \u015dar\u011di\u011das \u011duste","error_pic":"La petita bildo ne estis trovita","error_nopic":"Neniu bildo disponeblas \u0109e la donita pozicio","filter_user":"Uzanto","map_theme_default":"Klasika","filter_date_1month":"1 monato","filter_date_1year":"1 jaro","contrast":"Pliigi bildkontraston","metadata_general_picid":"Foto","filter_picture":"Bilda tipo","filter_zoom_in":"Zomu en la mapo por vidi tiun filtrilon","map_background":"Bazmapo","map_background_aerial":"Aera","map_background_streets":"Stratoj","map_theme":"Mapa etoso","metadata_general_picid_link":"Iru al la JSON-priskribo de la foto","metadata_general_seqid_link":"Iru al la JSON-priskribo de la sekvenco","metadata_general_author":"A\u016dtoro","metadata_general_license":"Rajtigilo","metadata_general_license_link":"Vidi la kompletan rajtigilon en la priskribo","metadata_general_date":"Dato de la fotado","metadata_camera":"Fotilo","metadata_camera_make":"Faristo","metadata_camera_model":"\u015cablono","metadata_camera_type":"Tipo","metadata_camera_focal_length":"Fokuslongo","metadata_location":"Pozicio","metadata_location_longitude":"Longitudo","metadata_location_latitude":"Latitudo","metadata_location_orientation":"Direkto","metadata_location_precision":"Pozicia precizeco","metadata_quality":"Kvalito","metadata_quality_help":"Pli pri la Kvalitapoentaro","metadata_quality_score":"Malloka poentaro","metadata_quality_gps_score":"Pozicia poentaro","metadata_quality_missing":"neniu valoro en la bildo","metadata_exif":"EXIF","metadata_exif_name":"Etikedo","metadata_exif_value":"Valoro","report_whole_sequence":"\u0108i tio koncernas la tutan sekvencon","report_details":"Aliaj detaloj","report_email":"Via retpo\u015dto","report_submit":"Sendi","report_wait":"Sendante raporton\u2026","report_success":"La raporto estis sukcese sendita. \u011ci estos reviziita balda\u016d.","report_details_placeholder":"Opcie, vi povas aldoni detalojn pri la problemo","report_email_placeholder":"Opcie","report_failure":"Eraro okazis dum kreo de la raporto: {e}. Bonvolu provi denove poste.","qualityscore_doc_3":"\u011ci estas kalkulita surbaze de GPS-precizeco kaj bildrezolucio. Profesiaj sistemoj havos A-poentaron, 360\xb0-akcifotilo havos B-poentaron, kaj po\u015dtelefono havos C/D/E-poentaron.","qualityscore_title":"Pri la kvalita poentaro","qualityscore_doc_1":"Panoramax ofertas Kvalitan Poentaron por \u0109iu bildo. \u011ci ebligas facilan mapfiltradon kaj ampleksan vidigon de la havebleco de altkvalitaj bildoj.","qualityscore_doc_link":"Pli da detaloj pri la kalkulo de la Kvalita Poentaro estas disponeblaj en nia dokumentado","minimize_short":"Maski","qualityscore_doc_2":"La poentaro estas montrita al uzantoj kiel litero A/B/C/D/E (A estas la plej bona, E la plej malbona) kaj grafike prezentita per \u0109i tiu skalo:","id":"iD","josm":"JOSM","contribute_id":"Kontribuu al OpenStreetMap kun iD-modifilo","filter_date_6months":"6 monatoj","picture_all":"\u0108iuj","picture_flat_long":"Klasika foto","picture_360_long":"Panorama foto","metadata_summary":"Resumo","metadata_general_copy_id":"Kopii la ID-on","metadata_general_copy_picid":"Kopii la fotan ID-on","metadata_general_instance":"Origina instanco","geo_uri":"Ekseteraj aplika\u0135oj","semantics_title":"Etikedoj","semantics_tags":"{nb} etikedoj","semantics_features":"Detektitaj objektoj","semantics_features_none":"No objekto estis ankora\u016d detektita a\u016d prinotita en \u0109i tiu foto.","semantics_features_default_title":"Objekto #{nb}","metadata_exif_doc":"Dokumentoj por EXIF-etikedoj","metadata_exif_doc_title":"Iru al la dokumentaro de Exiv2 por havi plenajn detalojn pri difinoj de EXIF kaj XMP-etikedoj","metadata_location_coordinates":"Koordinatoj (longitudo, latitudo)","metadata_location_copy":"Kopii {v}","metadata_location_copy_more":"Pli da ebloj por kopii koordinatojn","whats_panoramax":"Panoramax estas la geokomuna\u0135o por teritoriaj fotoj.","semantics_features_subtitle":"{nb} asociitaj atributoj","semantics_tags_picture_none":"Ankora\u016d neniuj atributoj estas difinitaj por \u0109i tiu foto.","semantics_hide_all_tags":"Maski la atributojn","semantics_key":"\u015closilo","semantics_value":"Valoro","semantics_show_all_tags":"Vidi \u0109iujn atributojn","semantics_tags_picture":"Foto-atributoj","semantics_value_doc":"Lernu pli pri \u0109i tiu atributo","semantics_qualifiers":"Kvalifikiloj","semantics_hide_annotations":"Maski bildajn komentojn","semantics_wikidata_properties":{"P279":"subklaso de","P361":"parto de","P31":"instanco de"},"share_picture":"Foto","semantics_annotation_tooltip":"Alklaku por vidi la detalojn","semantics_show_annotations":"Montri bildajn komentojn","semantics_key_doc":"Lernu pli pri \u0109i tiu \u015dlosilo"},"maplibre":{"GeolocateControl.FindMyLocation":"Trovi mian pozicion","GeolocateControl.LocationNotAvailable":"Loko ne disponeblas"},"map":{"slow_loading":"La mapo \u015dar\u011das malrapide kaj povus aperi rompi\u011dinta","loading":"\u015car\u011danto\u2026","thumbnail":"Miniaturo de la surflikta bildo","not_public":"Ne publike videbla","more_panoramax":"Malkovri pli pri Panoramax","map_data":"Kartaj datumoj : {m}"}}')},8302:at=>{"use strict";at.exports=JSON.parse('{"pnx":{"report_auth":"La denuncia se enviar\xe1 usando tu cuenta \xab{a}\xbb","report":"Denunciar imagen","report_nature_label":"Tipo de problema","report_nature":{"":"Selecciona el tipo de problema\u2026","blur_missing":"Se ve el rostro de una persona, o una matr\xedcula","blur_excess":"Est\xe1 borroso un objeto que no hac\xeda falta ocultar","inappropriate":"La imagen no es apropiada (irrelevante, desnudez, \u2026)","privacy":"Se ve un camino privado, o una propiedad privada","mislocated":"La localizaci\xf3n de la imagen en el mapa no es correcta","picture_low_quality":"La calidad de la imagen es pobre","copyright":"La imagen infringe derechos de autor","other":"Otro tipo de problema"},"sequence_more":"M\xe1s opciones de reproducci\xf3n","sequence_speed":"Velocidad de reproducci\xf3n","legend_license":"Licencia: {l}","edit_osm":"Editar OpenStreetMap","id":"iD","josm":"JOSM","josm_live":"Activar la sincronizaci\xf3n autom\xe1tica de JOSM cuando se carga una imagen","loading_labels_serious":["\ud83d\uddfa\ufe0f Cargando datos del mapa","\ud83d\udda5\ufe0f Consultando la API","\ud83d\uddbc\ufe0f Cargando vistas previas","\ud83d\udd0d Analizando metadatos EXIF","\ud83c\udfd8\ufe0f Renderizado 3D","\ud83d\udcf7 Preparando im\xe1genes 360\xb0","\ud83d\udfe0 Ajustando balance de color","\ud83d\udcaf C\xe1lculo del nivel de calidad \xa9"],"metadata":"Metadatos de la imagen","map_theme_type":"Tipo de c\xe1mara","contrast":"Dar m\xe1s contraste a la imagen","zoom":"Acercar/alejar","zoomOut":"Alejar","map_background_streets":"Calles","loading_labels_fun":["\ud83e\udd8c Detectando paneles de cruce de alces","\ud83d\ude98 Buscando el Coche Panoramax \xa9","\u2615 Inyectando cafe\xedna","\ud83d\ude00 \xa1Sonr\xede, est\xe1s siendo mapeado!","\ud83d\udc08 Compartiendo fotos de gatos","\ud83d\ude34 Reduciendo la procrastinaci\xf3n","\ud83e\uded6 Preparando el t\xe9","\ud83d\udc27 Abriendo el c\xf3digo fuente","\ud83d\ude87 Indexando estaciones del metro","\ud83e\uddf9 Limpieza de metadatos","\ud83d\ude92 Enviando fotos de estaciones de bomberos","\ud83d\udeb2 Actualizando v\xedas verdes","\ud83d\ude89 Paseo por el and\xe9n de la estaci\xf3n","\ud83d\udef0\ufe0f Buscando sat\xe9lites","\ud83d\udc65 Describiendo tipolog\xedas de persona","\ud83d\udc1f Localizando tiendas de fish & chips","\ud83e\uddd1\u200d\ud83d\udcbb Buscando gazapos de la interfaz","\ud83d\udcc8 Incrementando estad\xedsticas"],"metadata_general_license_link":"Ir a la descripci\xf3n completa de la licencia","metadata_general_picid":"Identificador de la imagen","metadata_general_license":"Licencia","report_details_placeholder":"Opcional; puedes a\xf1adir m\xe1s detalles sobre el problema y por qu\xe9 te preocupa","expand":"Expandir","expand_info":"Mostrar el elemento ocupando toda la p\xe1gina","show_psv":"Mostrar el visor de im\xe1genes","show_map":"Mostrar el mapa","zoomIn":"Acercar","moveUp":"Desplazar hacia arriba","moveDown":"Desplazar hacia abajo","moveLeft":"Desplazar hacia la izquierda","moveRight":"Desplazar hacia la derecha","moveMiddle":"Centrar la vista","minimize":"Esconder este elemento. Para mostrarlo de nuevo, pulsa el bot\xf3n en la esquina inferior izquierda","options":"Opciones","filters":"Filtros","layers":"Capas","search":"Buscar","search_empty":"No se encontraron resultados","search_address":"Buscar una direcci\xf3n, una ciudad, \u2026","search_user":"Buscar un usuario\u2026","share":"Compartir","share_links":"Enlaces","share_page":"Enlace a esta p\xe1gina","share_image":"Imagen de alta calidad","share_rss":"Flujo RSS","share_rss_title":"Flujo RSS de las nuevas secuencias en el \xe1rea visible del mapa","share_embed":"Incrustar en tu p\xe1gina web","share_embed_docs":"M\xe1s informaci\xf3n sobre c\xf3mo configurar el incrustado","share_print":"Imprimir","copy":"Copiar","copied":"Copiado","error":"Hay un problema\u2026","sequence_next":"Siguiente imagen de la secuencia","sequence_play":"Reproducir esta secuencia","sequence_pause":"Pausar la secuencia","sequence_prev":"Imagen anterior de la secuencia","error_click":"Continuar","error_retry":"Por favor, int\xe9ntalo m\xe1s tarde","error_psv":"El visor de fotos esf\xe9ricas no se carga correctamente","error_pic":"No se encuentra la imagen que quer\xedamos","error_nopic":"No hay im\xe1genes para la posici\xf3n dada","error_api":"El servidor de im\xe1genes no est\xe1 disponible","error_webgl":"Este navegador no admite WebGL","error_josm":"JOSM no responde. \xbfEst\xe1 abierto, y admite el modo de Control Remoto?","error_api_compatibility":"El servidor de im\xe1genes no es compatible con esta versi\xf3n del visor","filter_date":"Fecha","filter_user":"Usuario","filter_picture":"Tipo de imagen","filter_zoom_in":"Ac\xe9rcate para poder ver filtros","picture_flat":"Cl\xe1sico","picture_360":"360\xb0","filter_camera_model":"Por modelo de c\xe1mara","map_background":"Fondo de mapa","map_background_aerial":"Vista a\xe9rea","map_theme":"Tema de mapa","map_theme_default":"Cl\xe1sico","map_theme_age":"Fecha de toma de imagen","map_theme_age_1":"M\xe1s de dos a\xf1os","map_theme_age_2":"Menos de dos a\xf1os","map_theme_age_3":"Menos de un a\xf1o","map_theme_age_4":"Menos de un mes","metadata_general_seqid":"Identificador de la secuencia","metadata_general_picid_link":"Ir a la descripci\xf3n de la imagen en formato JSON","metadata_general_seqid_link":"Ir a la descripci\xf3n de la secuencia en formato JSON","metadata_general_author":"Autor","metadata_general_date":"Fecha de toma de imagen","metadata_camera":"C\xe1mara","metadata_camera_make":"Marca","metadata_camera_model":"Modelo","metadata_camera_type":"Tipo","metadata_camera_focal_length":"Distancia focal","metadata_location":"Localizaci\xf3n","metadata_location_longitude":"Longitud","metadata_location_latitude":"Latitud","metadata_location_orientation":"Orientaci\xf3n","metadata_location_precision":"Precisi\xf3n de la localizaci\xf3n","metadata_exif":"EXIF / XMP","metadata_exif_name":"Etiqueta","metadata_exif_value":"Valor","report_whole_sequence":"El problema afecta a la secuencia entera","report_details":"M\xe1s detalles","report_email":"Tu direcci\xf3n de correo electr\xf3nico","report_email_placeholder":"Opcional","report_submit":"Enviar","report_success":"La denuncia se ha enviado correctamente. Ser\xe1 revisada lo antes posible.","report_failure":"Ocurri\xf3 un error al crear la denuncia: {e}. Por favor, int\xe9ntalo m\xe1s tarde.","map_theme_score":"Nivel de calidad","filter_qualityscore":"Nivel de calidad","filter_qualityscore_help":"Haga clic para habilitar o deshabilitar","legend_title":"Ver detalles de la imagen","metadata_camera_resolution":"Resoluci\xf3n","metadata_quality":"Puntuaci\xf3n de calidad","metadata_quality_help":"M\xe1s informaci\xf3n sobre el nivel de calidad","metadata_quality_score":"Valoraci\xf3n general","metadata_quality_gps_score":"Puntuaci\xf3n de posicionamiento","metadata_quality_resolution_score":"Puntuaci\xf3n de resoluci\xf3n","metadata_quality_missing":"no hay informaci\xf3n en la imagen","report_wait":"Env\xedo del informe\u2026"},"psv":{"ctrlZoom":"Utiliza Control+rueda de desplazamiento para acercar/alejar","loadError":"Este panorama no se puede cargar","twoFingers":"Desplaza el mapa con dos dedos"},"maplibre":{"GeolocateControl.FindMyLocation":"Local\xedzame","GeolocateControl.LocationNotAvailable":"Localizaci\xf3n no disponible"},"map":{"loading":"Cargando\u2026","thumbnail":"Vista previa de la imagen bajo el cursor","not_public":"No es visible p\xfablicamente","slow_loading":"La mapa tarda mucho en cargarse y puede parecer rota"}}')},5222:at=>{"use strict";at.exports=JSON.parse('{"psv":{"twoFingers":"Utilisez deux doigts pour vous d\xe9placer","ctrlZoom":"Utilisez ctrl + scroll pour zoomer dans l\'image","loadError":"L\'image ne peut pas \xeatre charg\xe9e"},"maplibre":{"GeolocateControl.FindMyLocation":"Afficher ma position","GeolocateControl.LocationNotAvailable":"GPS non-disponible"},"pnx":{"zoom":"Zoom","zoomOut":"D\xe9zoomer","zoomIn":"Zoomer","moveUp":"Vers le haut","moveDown":"Vers le bas","moveLeft":"Vers la gauche","moveRight":"Vers la droite","moveMiddle":"Centrer la vue","expand":"Agrandir","expand_info":"Faire appara\xeetre ce widget en pleine page","show_psv":"Afficher la visionneuse de photos","show_map":"Afficher la carte","minimize":"Masquer ce widget, vous pouvez l\'afficher de nouveau gr\xe2ce au bouton dans le coin en bas \xe0 gauche","minimize_short":"Masquer","options":"Options","filters":"Filtres","layers":"Calques","search":"Rechercher","search_empty":"Aucun r\xe9sultat","search_address":"Rechercher une adresse, ville\u2026","search_user":"Rechercher un nom d\'utilisateur\u2026","share":"Partager","share_links":"Liens utiles","share_page":"Lien de la photo","share_image":"Image HD","share_rss":"Flux RSS","share_rss_title":"Flux RSS des nouvelles s\xe9quences dans la zone visible sur la carte","share_embed":"Int\xe9gration sur votre site","share_embed_docs":"D\xe9couvrir plus de possibilit\xe9s pour l\'int\xe9gration sur votre site","share_print":"Imprimer","panoramax":"Panoramax","whats_panoramax":"Panoramax est le g\xe9ocommun des photos des territoires.","copy":"Copier","copied":"Copi\xe9","error":"On a un probl\xe8me\u2026","error_click":"Continuer","error_retry":"Merci de r\xe9essayer plus tard","sequence_next":"Photo suivante dans la s\xe9quence","sequence_play":"Parcourir cette s\xe9quence","sequence_pause":"Mettre en pause la s\xe9quence","sequence_prev":"Photo pr\xe9c\xe9dente dans la s\xe9quence","sequence_more":"Plus d\'options de lecture","sequence_speed":"Vitesse de lecture","legend_license":"Licence : {l}","legend_title":"Afficher les d\xe9tails de l\'image","id":"iD","contribute_id":"Contribuez \xe0 OpenStreetMap avec l\'\xe9diteur iD","geo_uri":"App externe","josm":"JOSM","josm_live":"Active la synchronisation automatique de JOSM lors du chargement d\'une photo","loading_labels_serious":["\ud83d\uddfa\ufe0f Chargement du fond de carte","\ud83d\udda5\ufe0f Interrogation de l\'API","\ud83d\uddbc\ufe0f Chargement des miniatures","\ud83d\udd0d Analyse des m\xe9tadonn\xe9es EXIF","\ud83c\udfd8\ufe0f Cr\xe9ation du rendu 3D","\ud83d\udcf7 Initialisation des vues 360\xb0","\ud83d\udfe0 \xc9quilibrage des couleurs","\ud83d\udcaf Calcul du score qualit\xe9 \xa9","\ud83d\udce1 T\xe9l\xe9chargement des mises \xe0 jour","\ud83c\udf0d R\xe9cup\xe9ration des tuiles","\ud83d\udcf8 Traitement des ombres"],"loading_labels_fun":["\ud83e\udd8c D\xe9tection des panneaux biche","\ud83d\ude98 Recherche de la Panoramax Car \xa9","\u2615 Injection de caf\xe9ine","\ud83d\ude00 Souriez, vous \xeates mapp\xe9s !","\ud83d\udc08 Partage de photos de chats","\ud83d\ude34 R\xe9duction de la procrastination","\ud83c\uddf7\ud83c\uddea Chargement : 974%","\ud83d\udc27 Ouverture du code source","\ud83e\udd81 Indexation des traboules","\ud83e\uddf9 Nettoyage des m\xe9tadonn\xe9es","\ud83d\ude92 Envoi des photos du SDIS","\ud83d\udeb2 Mise \xe0 jour des voies vertes","\ud83d\ude89 Remont\xe9e des quais de gare","\ud83d\udef0\ufe0f Recherche de satellites","\ud83d\udc65 \xc9criture des personas","\ud83e\udd5e Localisation des cr\xeaperies","\ud83e\uddd1\u200d\ud83d\udcbb D\xe9boguage de l\'interface","\ud83d\udcc8 Incr\xe9mentation des statistiques","\ud83e\udd16 Apprentissage de la s\xe9mantique","\ud83c\udfa8 Redesign de l\'interface","\ud83d\udcc5 Planification des photos-carto-parties","\ud83e\uddc0 Affinage des fromages","\ud83c\udf04 Calcul de l\'ensoleillement corse","\ud83c\udf0a Mesure des grandes mar\xe9es"],"error_psv":"Photo Sphere Viewer ne s\'est pas charg\xe9 correctement","error_pic":"La photo demand\xe9e est introuvable","error_nopic":"Aucune photo disponible autour de la localisation recherch\xe9e","error_api":"Le serveur de photos n\'est pas disponible","error_webgl":"WebGL n\'est pas support\xe9 par votre navigateur","error_josm":"JOSM n\'a pas r\xe9pondu, est-il bien lanc\xe9 et la t\xe9l\xe9commande activ\xe9e ?","error_api_compatibility":"Le serveur de photos n\'est pas compatible avec cette visionneuse","filter_date":"Date","filter_date_1month":"1 mois","filter_date_6months":"6 mois","filter_date_1year":"1 an","filter_user":"Utilisateur","filter_user_mypics":"Mes photos","filter_picture":"Type d\'image","picture_all":"Tout","picture_flat":"Classique","picture_360":"360\xb0","picture_flat_long":"Photo classique","picture_360_long":"Photo panoramique","filter_qualityscore":"Score de qualit\xe9","filter_qualityscore_help":"Cliquez pour activer ou d\xe9sactiver","qualityscore_title":"\xc0 propos du score de qualit\xe9","qualityscore_doc_1":"Panoramax propose un Score de Qualit\xe9 pour chacune de ses photos. Cela facilite le filtre et la recherche de photos de bonne qualit\xe9 sur la carte.","qualityscore_doc_2":"Le score est affich\xe9 sous la forme d\'une lettre A/B/C/D/E (A \xe9tant le meilleur, E le moins bon), et visualisable gr\xe2ce \xe0 cette \xe9chelle :","qualityscore_doc_3":"Il est calcul\xe9 en fonction de la pr\xe9cision du GPS ainsi que la r\xe9solution de la photo. Un mat\xe9riel professionnel aura une note de A, une cam\xe9ra sportive 360\xb0 une note de B, et un smartphone une note de C \xe0 E.","qualityscore_doc_link":"En savoir plus sur le Score de Qualit\xe9","filter_zoom_in":"Zoomez la carte pour voir ce filtre","map_background":"Fond de carte","map_background_aerial":"Satellite","map_background_streets":"Plan","map_theme":"Rendu de carte","map_theme_default":"Classique","map_theme_age":"Date de prise de vue","map_theme_age_1":"> 2 ans","map_theme_age_2":"< 2 ans","map_theme_age_3":"< 1 an","map_theme_age_4":"< 1 mois","map_theme_type":"Type de cam\xe9ra","map_theme_score":"Score de qualit\xe9","contrast":"Augmenter le contraste de l\'image","metadata":"M\xe9tadonn\xe9es de la photo","metadata_summary":"R\xe9sum\xe9","metadata_general_copy_id":"Copier l\'ID","metadata_general_copy_picid":"Copier l\'ID de photo","metadata_general_picid":"Photo","metadata_general_seqid":"S\xe9quence","metadata_general_picid_link":"Aller au descriptif JSON de la photo","metadata_general_seqid_link":"Aller au descriptif JSON de la s\xe9quence","metadata_general_author":"Auteur","metadata_general_license":"Licence","metadata_general_license_link":"Voir la description compl\xe8te de la licence","metadata_general_date":"Date de prise de vue","metadata_general_instance":"Instance d\'origine","metadata_camera":"Appareil","metadata_camera_make":"Fabricant","metadata_camera_model":"Mod\xe8le","metadata_camera_type":"Type","metadata_camera_resolution":"R\xe9solution","metadata_camera_focal_length":"Longueur focale","metadata_location":"Position","metadata_location_coordinates":"Coordonn\xe9es (longitude, latitude)","metadata_location_orientation":"Direction","metadata_location_precision":"Pr\xe9cision du positionnement","metadata_location_copy":"Copier {v}","metadata_location_copy_more":"Copier d\'autres formats de coordonn\xe9es","metadata_quality":"Qualit\xe9","metadata_quality_help":"En savoir plus sur le score de qualit\xe9","metadata_quality_score":"Note globale","metadata_quality_gps_score":"Note du positionnement","metadata_quality_resolution_score":"Note de la r\xe9solution","metadata_quality_missing":"pas d\'info dans l\'image","metadata_exif":"EXIF","metadata_exif_name":"Balise","metadata_exif_value":"Valeur","metadata_exif_doc":"Doc des attributs EXIF","metadata_exif_doc_title":"Ac\xe9\xe9der \xe0 la doc Exiv2 pour en savoir plus sur les attributs EXIF et XMP","semantics_title":"Tags","semantics_tags":"{nb} attributs","semantics_features":"Objets dans la photo","semantics_features_none":"Aucun objet n\'a \xe9t\xe9 d\xe9tect\xe9 ou annot\xe9 dans cette photo pour l\'instant.","semantics_features_default_title":"Objet {nb}","semantics_features_subtitle":"{nb} attributs associ\xe9s","semantics_annotation_tooltip":"Cliquez pour voir les d\xe9tails","semantics_show_all_tags":"Voir tous les attributs","semantics_hide_all_tags":"Masquer les attributs","semantics_key":"Cl\xe9","semantics_value":"Valeur","semantics_key_doc":"En savoir plus \xe0 propos de cette cl\xe9","semantics_value_doc":"En savoir plus \xe0 propos de cet attribut","semantics_tags_picture":"Attributs de la photo","semantics_tags_picture_none":"Aucun attribut n\'a \xe9t\xe9 d\xe9fini pour cette photo pour l\'instant.","semantics_qualifiers":"Qualificateurs","semantics_show_annotations":"Afficher les objets dans la photo","semantics_hide_annotations":"Masquer les objets dans la photo","semantics_zero_annotations":"Aucun objet dessin\xe9 dans cette photo","semantics_add_annotation":"Ajouter un nouvel objet","semantics_draw_annotation":"D\'abord, cliquez sur un coin de l\'objet \xe0 dessiner. Puis, cliquez sur le coin oppos\xe9. Vous pouvez cliquer \xe0 nouveau sur un coin pour le d\xe9placer.","semantics_save_drawn_annotation":"Enregistrer","semantics_undo_drawn_annotation":"Annuler","semantics_save_drawn_annotation_incomplete":"Vous devez dessiner un rectangle bien dans l\'image avant de valider.","semantics_delete_annotation":"Supprimer cet objet","semantics_delete_annotation_confirm":"\xcates-vous s\xfbr(e) de vouloir supprimer cet objet ?","semantics_hashtags":"Mots-di\xe8se de la photo","semantics_wikidata_properties":{"P31":"instance de","P279":"sous-classe de","P361":"partie de"},"semantics_editor_error":"La syntaxe est invalide. Vos attributs doivent avoir cette forme:\\ncl\xe9=valeur\\npr\xe9fixe|cl\xe9=valeur\\npr\xe9fixe|cl\xe9[qualif_cl\xe9=qualif_val]=valeur\\n\\nLongueur max des cl\xe9s : 256 caract\xe8res, max des valeurs 2048 caract\xe8res.","semantics_editor_example":"cl\xe9=valeur\\npr\xe9fixe|cl\xe9=valeur","semantics_edit":"Modifier les attributs","semantics_save":"Enregistrer vos modifications","semantics_undo":"Annuler vos modifications","semantics_cantsave_invalid":"Impossible de sauvegarder les modifications, les attributs ne sont pas valides","semantics_send_fail":"Nous n\'avons pas pu enregistrer vos modifications, merci de r\xe9essayer plus tard","semantics_send_ok":"Vos modifications ont bien \xe9t\xe9 enregistr\xe9es","semantics_login_needed":"Afin de pouvoir modifier les attributs ou objets de la photo, vous devez vous connecter sur l\'instance Panoramax {n}. Voulez-vous vous connecter ?","report":"Signaler","report_auth":"Ce signalement sera envoy\xe9 en utilisant votre compte \\"{a}\\"","report_nature_label":"Nature du probl\xe8me","report_nature":{"":"S\xe9lectionnez la nature du probl\xe8me\u2026","blur_missing":"Un visage ou une plaque d\'immatriculation est visible","blur_excess":"Un objet qui ne n\xe9cessite pas de floutage est flout\xe9","inappropriate":"L\'image est inappropri\xe9e (non pertinente, nudit\xe9\u2026)","privacy":"Un chemin priv\xe9 ou une propri\xe9t\xe9 priv\xe9e est visible","picture_low_quality":"L\'image est de mauvaise qualit\xe9","mislocated":"L\'image est mal g\xe9olocalis\xe9e","copyright":"L\'image enfreint les droits d\'auteur","other":"Tout autre type de probl\xe8me"},"report_whole_sequence":"Cela concerne toute la s\xe9quence","report_details":"D\xe9tails suppl\xe9mentaires","report_details_placeholder":"Optionnel, vous pouvez ajouter des d\xe9tails sur le probl\xe8me","report_email":"Votre email","report_email_placeholder":"Optionnel","report_submit":"Envoyer","report_wait":"Envoi du signalement en cours\u2026","report_success":"Le signalement a \xe9t\xe9 envoy\xe9 avec succ\xe8s. Il sera examin\xe9 d\xe8s que possible.","report_failure":"Une erreur est survenue lors de la cr\xe9ation du signalement : {e}. Veuillez r\xe9essayer plus tard."},"map":{"loading":"Chargement\u2026","thumbnail":"Miniature de la photo survol\xe9e","not_public":"Masqu\xe9 au public","slow_loading":"La carte est longue \xe0 charger et pourrait appara\xeetre cass\xe9e","map_data":"Carte bas\xe9e sur {m}","more_panoramax":"En savoir plus sur Panoramax"}}')},6909:at=>{"use strict";at.exports=JSON.parse('{"psv":{"twoFingers":"K\xe9t ujjal navig\xe1lhat","ctrlZoom":"K\xf6zel\xedt\xe9s vagy t\xe1vol\xedt\xe1s: Ctrl + g\xf6rget\xe9s","loadError":"A panor\xe1ma nem t\xf6lthet\u0151 be"},"pnx":{"zoom":"Nagy\xedt\xe1s","zoomOut":"T\xe1vol\xedt\xe1s","zoomIn":"K\xf6zel\xedt\xe9s","moveUp":"Mozg\xe1s fel","moveDown":"Mozg\xe1s le","moveLeft":"Mozg\xe1s balra","moveRight":"Mozg\xe1s jobbra","moveMiddle":"N\xe9zet k\xf6z\xe9pre hoz\xe1sa","expand":"B\u0151v\xedt\xe9s","expand_info":"Widget megjelen\xedt\xe9se teljes oldalon","show_psv":"K\xe9pn\xe9zeget\u0151 megjelen\xedt\xe9se","show_map":"T\xe9rk\xe9p megjelen\xedt\xe9se","minimize":"Widget elrejt\xe9se; a bal als\xf3 sarokban l\xe9v\u0151 gombbal \xfajra megjelen\xedtheti","options":"Be\xe1ll\xedt\xe1sok","filters":"Sz\u0171r\u0151k","layers":"R\xe9tegek","share":"Megoszt\xe1s","search":"Keres\xe9s","search_empty":"Nincs tal\xe1lat","share_links":"Linkek","share_page":"Link erre az oldalra","share_image":"Nagy felbont\xe1s\xfa (HD) k\xe9p","share_rss":"RSS h\xedrcsatorna","share_rss_title":"A t\xe9rk\xe9p l\xe1that\xf3 ter\xfclet\xe9n l\xe9v\u0151 \xfaj sorozatok RSS-h\xedrcsatorn\xe1ja","share_embed":"Be\xe1gyaz\xe1s a weboldaladon","share_print":"Nyomtat\xe1s","copy":"M\xe1sol\xe1s","copied":"M\xe1solva","error":"Ajjaj, baj van\u2026","error_subtitle":"Pr\xf3b\xe1lja \xfajra k\xe9s\u0151bb, vagy n\xe9zze meg a b\xf6ng\xe9sz\u0151konzolt a tov\xe1bbi r\xe9szletek\xe9rt.","sequence_next":"A sorozat k\xf6vetkez\u0151 k\xe9pe","sequence_play":"Sorozat lej\xe1tsz\xe1sa","sequence_pause":"Sorozatlej\xe1tsz\xe1s sz\xfcneteltet\xe9se","sequence_prev":"A sorozat el\u0151z\u0151 k\xe9pe","sequence_more":"Tov\xe1bbi lej\xe1tsz\xe1si lehet\u0151s\xe9gek","sequence_speed":"Lej\xe1tsz\xe1s sebess\xe9ge","legend_license":"Licenc: {l}","edit_osm":"OSM szerkeszt\xe9se","id":"iD","josm":"JOSM","josm_live":"JOSM automatikus szinkroniz\xe1l\xe1s\xe1nak enged\xe9lyez\xe9se k\xe9pbet\xf6lt\xe9skor","loading_labels_serious":["\ud83d\uddfa\ufe0f T\xe9rk\xe9padatok bet\xf6lt\xe9se","\ud83d\udda5\ufe0f API lek\xe9rdez\xe9se","\ud83d\uddbc\ufe0f B\xe9lyegk\xe9pek bet\xf6lt\xe9se","\ud83d\udd0d EXIF metaadatok elemz\xe9se","\ud83c\udfd8\ufe0f 3D megjelen\xedt\xe9s","\ud83d\udcf7 360\xb0-os k\xe9pek inicializ\xe1l\xe1sa","\ud83d\udfe0 Sz\xednek kiegyenl\xedt\xe9se","\ud83d\udcaf Min\u0151s\xe9gi pontsz\xe1m kisz\xe1m\xedt\xe1sa \xa9"],"loading_labels_fun":["\ud83e\udd8c Vadvesz\xe9lyt jelz\u0151 t\xe1bla \xe9szlel\xe9se","\ud83d\ude98 Panoramax aut\xf3 \xa9 keres\xe9se","\u2615 Koffeininjekci\xf3","\ud83d\ude00 Mosolyogj, fel lett\xe9l t\xe9rk\xe9pezve!","\ud83d\udc08 Kiscic\xe1s k\xe9pek megoszt\xe1sa","\ud83d\ude34 Halogat\xe1s cs\xf6kkent\xe9se","\ud83e\uded6 Tea megf\u0151z\xe9se","\ud83d\udc27 Forr\xe1sk\xf3d felnyit\xe1sa","\ud83d\ude87 Metr\xf3\xe1llom\xe1sok indexel\xe9se","\ud83e\uddf9 Metaadatok tisztogat\xe1sa","\ud83d\ude92 T\u0171zolt\xf3s\xe1gr\xf3l sz\xf3l\xf3 fot\xf3k bek\xfcld\xe9se","\ud83d\udeb2 Z\xf6ldutak friss\xedt\xe9se","\ud83d\ude89 Peronok bej\xe1r\xe1sa","\ud83d\udef0\ufe0f M\u0171holdak keres\xe9se","\ud83d\udc65 Person\xe1k meg\xedr\xe1sa","\ud83d\udc1f S\xfcltkrumplikap\xf3k lokaliz\xe1l\xe1sa","\ud83e\uddd1\u200d\ud83d\udcbb Hibakeres\u0151 fel\xfclet","\ud83d\udcc8 Statisztika n\xf6vel\xe9se"],"error_psv":"A Photo Sphere Viewer (g\xf6mbpanor\xe1ma-n\xe9zeget\u0151) nem t\xf6lt\u0151dik be megfelel\u0151en","error_pic":"A k\xe9rt k\xe9p nem tal\xe1lhat\xf3","error_nopic":"Az adott helyen nem \xe9rhet\u0151 el k\xe9p","error_api":"A k\xe9pkiszolg\xe1l\xf3 nem \xe9rhet\u0151 el","error_webgl":"A WebGL nem t\xe1mogatott ebben a b\xf6ng\xe9sz\u0151ben","error_josm":"A JOSM nem v\xe1laszol. Val\xf3ban fut \xe9s el\xe9rhet\u0151 t\xe1volr\xf3l?","error_api_compatibility":"A k\xe9pkiszolg\xe1l\xf3 nem kompatibilis a k\xe9pn\xe9zeget\u0151 ezen verzi\xf3j\xe1val","filter_date":"D\xe1tum szerint","filter_user":"Felhaszn\xe1l\xf3 szerint","filter_picture":"K\xe9pt\xedpus szerint","picture_flat":"Klasszikus","picture_360":"360\xb0","filter_camera_model":"Kameramodell szerint","map_background":"T\xe9rk\xe9ph\xe1tt\xe9r","map_background_aerial":"L\xe9gi felv\xe9tel","map_background_streets":"k\xe9pUtca","map_theme":"T\xe9rk\xe9p t\xe9m\xe1ja","map_theme_default":"Klasszikus","map_theme_age":"K\xe9pk\xe9sz\xedt\xe9s ideje","map_theme_age_1":"> 2 \xe9ve","map_theme_age_2":"< 2 \xe9ve","map_theme_age_3":"< 1 \xe9ve","map_theme_age_4":"< 1 h\xf3napja","map_theme_type":"Kamerat\xedpus","contrast":"Nagyobb k\xe9pkontraszt enged\xe9lyez\xe9se","metadata":"K\xe9p metaadatai","metadata_general_picid":"K\xe9p azonos\xedt\xf3js","metadata_general_seqid":"Sorozat azonos\xedt\xf3ja","metadata_general_picid_link":"Ugr\xe1s a k\xe9p JSON le\xedr\xe1s\xe1hoz","metadata_general_seqid_link":"Ugr\xe1s a sorozat JSON le\xedr\xe1s\xe1hoz","metadata_general_author":"Szerz\u0151","metadata_general_license":"Licenc (enged\xe9ly)","metadata_general_license_link":"Ugr\xe1s a licenc teljes le\xedr\xe1s\xe1hoz","metadata_general_date":"K\xe9sz\xedt\xe9s d\xe1tuma","metadata_camera":"Kamera","metadata_camera_make":"Gy\xe1rt\xf3","metadata_camera_model":"Modell","metadata_camera_type":"T\xedpus","metadata_camera_focal_length":"Gy\xfajt\xf3t\xe1vols\xe1g","metadata_location":"Helysz\xedn","metadata_location_longitude":"Hossz\xfas\xe1g","metadata_location_latitude":"Sz\xe9less\xe9g","metadata_location_orientation":"Felv\xe9tel ir\xe1nya","metadata_location_precision":"Helymeghat\xe1roz\xe1s pontoss\xe1ga","metadata_exif":"EXIF / XMP","metadata_exif_name":"C\xedmke","metadata_exif_value":"\xc9rt\xe9k","report":"K\xe9p bejelent\xe9se","report_auth":"A jelent\xe9s a fi\xf3kod ({a}) felhaszn\xe1l\xe1s\xe1val lesz elk\xfcldve","report_nature":{"":"Probl\xe9ma jelleg\xe9nek kiv\xe1laszt\xe1sa\u2026","blur_missing":"A k\xe9pen l\xe1tszik egy szem\xe9ly arca vagy egy rendsz\xe1mt\xe1bla","blur_excess":"A k\xe9pen el van hom\xe1lyos\xedtva egy olyan objektum, amelynek \xe9lesnek kellene lennie","inappropriate":"A k\xe9p nem megfelel\u0151 (irrelev\xe1ns, meztelens\xe9get jelen\xedt meg stb.)","privacy":"A k\xe9pen mag\xe1n\xfat vagy mag\xe1nter\xfclet l\xe1that\xf3","picture_low_quality":"A k\xe9p nagyon rossz min\u0151s\xe9g\u0171","mislocated":"A k\xe9p rosszul van elhelyezve a t\xe9rk\xe9pen","copyright":"A k\xe9p szerz\u0151i jogot s\xe9rt","other":"B\xe1rmilyen m\xe1s jelleg\u0171 probl\xe9ma"},"report_nature_label":"Probl\xe9ma jellege","report_details":"Tov\xe1bbi r\xe9szletek","filter_zoom_in":"Nagy\xedts a sz\u0171r\u0151k l\xe1that\xf3v\xe1 t\xe9tel\xe9hez","report_email":"E-mail-c\xedm","report_email_placeholder":"Nem k\xf6telez\u0151","report_submit":"Bek\xfcld\xe9s","report_success":"A jelent\xe9s sikeresen be lett k\xfcldve; a lehet\u0151 leghamarabb megvizsg\xe1ljuk.","report_failure":"Hiba t\xf6rt\xe9nt a jelent\xe9s l\xe9trehoz\xe1sakor: {e}. K\xe9rj\xfck, pr\xf3b\xe1ld meg k\xe9s\u0151bb \xfajra.","search_user":"Felhaszn\xe1l\xf3n\xe9v keres\xe9se\u2026","search_address":"C\xedm, v\xe1ros stb. keres\xe9se\u2026","share_embed_docs":"Tov\xe1bbi inform\xe1ci\xf3 a be\xe1gyaz\xe1s konfigur\xe1l\xe1s\xe1r\xf3l","error_click":"Kattints a folytat\xe1shoz","error_retry":"K\xe9rj\xfck, pr\xf3b\xe1ld meg k\xe9s\u0151bb","legend_title":"K\xe9p adatainak megjelen\xedt\xe9se","report_whole_sequence":"A teljes sorozatra vonatkozik","report_wait":"Jelent\xe9s bek\xfcld\xe9se folyamatban\u2026","report_details_placeholder":"Megadhatsz tov\xe1bbi r\xe9szleteket a probl\xe9m\xe1r\xf3l (nem k\xf6telez\u0151)","filter_qualityscore_help":"Kattints az enged\xe9lyez\xe9shez vagy a letilt\xe1shoz","filter_qualityscore":"Min\u0151s\xe9gi pontsz\xe1m","map_theme_score":"Min\u0151s\xe9gi pontsz\xe1m","metadata_camera_resolution":"Felbont\xe1s","metadata_quality":"Min\u0151s\xe9gi pontsz\xe1m","metadata_quality_help":"Tov\xe1bbi tudnival\xf3k a min\u0151s\xe9gi pontsz\xe1mr\xf3l","metadata_quality_score":"\xd6sszes\xedtett pontsz\xe1m","metadata_quality_gps_score":"Pozicion\xe1l\xe1si pontsz\xe1m","metadata_quality_resolution_score":"Felbont\xe1si pontsz\xe1m","metadata_quality_missing":"a k\xe9pben nincs megadva \xe9rt\xe9k"},"map":{"loading":"Bet\xf6lt\xe9s\u2026","thumbnail":"A kurzor alatti k\xe9p b\xe9lyegk\xe9pe","not_public":"Nem l\xe1that\xf3 nyilv\xe1nosan","slow_loading":"A t\xe9rk\xe9p lassan t\xf6lt\u0151dik be, \xe9s lehet, hogy lerobbant"},"maplibre":{"GeolocateControl.FindMyLocation":"Tart\xf3zkod\xe1si hely megtal\xe1l\xe1sa","GeolocateControl.LocationNotAvailable":"Tart\xf3zkod\xe1si hely nem \xe9rhet\u0151 el"}}')},4895:at=>{"use strict";at.exports=JSON.parse('{"pnx":{"expand":"Espandi","zoomOut":"Rimpicciolisci","zoomIn":"Ingrandisci","zoom":"Zoom","moveUp":"Muovi in alto","moveDown":"Muovi in basso","moveLeft":"Muovi a sinistra","moveRight":"Muovi a destra","expand_info":"Fai apparire il widget a schermo pieno","options":"Opzioni","filters":"Filtri","layers":"Livelli","search":"Cerca","search_empty":"Nessun risultato trovato","search_address":"Cerca un indirizzo, citt\xe0\u2026","search_user":"Cerca un nome utente\u2026","share":"Condividi","share_links":"Collegamenti","share_page":"Collegamento a questa immagine","share_image":"Immagine HD","share_embed":"Incorpora nel tuo sito web","share_embed_docs":"Scopri di pi\xf9 sulla configurazione della incorporazione","share_print":"Stampa","copy":"Copia","copied":"Copiato","error":"Abbiamo un problema\u2026","error_click":"Continuare","error_retry":"Riprovare pi\xf9 tardi","sequence_play":"Riproduci questa sequenza","sequence_pause":"Pausa la sequenza","sequence_speed":"Velocit\xe0 di riproduzione","legend_license":"Licenza: {l}","legend_title":"Mostra dettagli della foto","edit_osm":"Modifica OSM","loading_labels_serious":["\ud83d\uddfa\ufe0f Caricamento dei dati della mappa","\ud83d\udda5\ufe0f Interrogazione delle API","\ud83d\uddbc\ufe0f Caricamento delle miniature","\ud83d\udd0d Analisi dei metadata EXIF","\ud83c\udfd8\ufe0f Creazione del rendering 3D","\ud83d\udcf7 Inizializzazione delle foto a 360\xb0","\ud83d\udfe0 Bilanciamento del colore","\ud83d\udcaf Calcolo del punteggio della qualit\xe0 \xa9","\ud83d\udce1 Scaricamento degli aggiornamenti","\ud83c\udf0d Recupero dei tasselli della mappa","\ud83d\udcf8 Elaborazione delle ombre"],"loading_labels_fun":["\ud83e\udd8c Rilevazione dei cartelli di attraversamento dei cervi","\ud83d\ude98 Ricerca dell\u2019auto Panoramax \xa9","\u2615 Iniezione di caffeina","\ud83d\ude00 Sorridete, siete stati mappati!","\ud83d\udc08 Condivisione delle foto di gatti","\ud83d\ude34 Riduzione della procrastinazione","\ud83e\uded6 Preparazione del t\xe8","\ud83d\udc27 Apertura del codice sorgente","\ud83d\ude87 Indicizzazione delle stazioni della metro","\ud83e\uddf9 Pulizia dei metadata","\ud83d\ude92 Invio delle foto delle stazioni dei pompieri","\ud83d\udeb2 Aggiornamento delle strade verdi","\ud83d\ude89 Passeggiata sulle banchine della stazione","\ud83d\udef0\ufe0f Ricerca dei satelliti","\ud83d\udc65 Scrittura delle persone","\ud83d\udc1f Ricerca dei negozi di patatine fritte","\ud83e\uddd1\u200d\ud83d\udcbb Debug dell\u2019interfaccia","\ud83d\udcc8 Incremento delle statistiche","\ud83e\udd16 Apprendimento della semantica","\ud83c\udfa8 Riprogettazione dell\u2019interfaccia","\ud83d\udcc5 Pianificazione di eventi di photo-mapping","\ud83e\uddc0 Affinamento dei formaggi","\ud83c\udf04 Calcolo della nebbia in Valpadana","\ud83c\udf0a Misurazione delle grandi maree"],"error_psv":"Il visualizzatore delle foto sferiche non si sta caricando correttamente","error_pic":"La foto richiesta non \xe8 stata trovata","error_nopic":"Nessuna foto disponibile alla posizione richiesta","error_api":"Il server delle foto non \xe8 disponibile","error_webgl":"Il tuo browser non supporta WebGL","error_josm":"JOSM non risponde, \xe8 in esecuzione con il controllo remoto abilitato?","error_api_compatibility":"Il server delle foto non \xe8 compatibile con questa versione del visualizzatore","filter_date":"Data","filter_date_1month":"1 mese","filter_date_1year":"1 anno","filter_user_mypics":"Le mie foto","filter_picture":"Tipo di foto","filter_zoom_in":"Ingrandisci la mappa per vedere questo filtro","picture_flat":"Classica","picture_360":"360\xb0","filter_qualityscore_help":"Clicca per abilitare o disabilitare","map_background":"Sfondo della mappa","map_background_aerial":"Satellite","map_background_streets":"Strade","map_theme":"Tema della mappa","map_theme_default":"Classica","map_theme_age":"Data di acquisizione","map_theme_age_2":"< 2 anni","map_theme_age_3":"< 1 anno","map_theme_age_4":"< 1 mese","map_theme_score":"Punteggio della qualit\xe0","contrast":"Abilita un maggiore contrasto della foto","metadata":"Metadata della foto","metadata_general_picid":"Foto","metadata_general_picid_link":"Vai alla descrizione JSON della foto","metadata_general_seqid_link":"Vai alla descrizione JSON della sequenza","metadata_general_author":"Autore","metadata_general_license":"Licenza","metadata_general_date":"Data di acquisizione","metadata_camera":"Fotocamera","metadata_camera_make":"Costruttore","metadata_camera_model":"Modello","metadata_camera_type":"Tipo","metadata_camera_resolution":"Risoluzione","metadata_location":"Posizione","metadata_location_longitude":"Longitudine","metadata_location_latitude":"Latitudine","metadata_location_precision":"Precisione della posizione","metadata_quality":"Qualit\xe0","metadata_quality_score":"Punteggio globale","metadata_quality_gps_score":"Punteggio della posizione","metadata_quality_resolution_score":"Punteggio della risoluzione","metadata_exif":"EXIF","metadata_exif_name":"Attributo","report_auth":"Questa segnalazione verr\xe0 inviata usando la tua utenza \u201c{a}\u201d","report_nature_label":"Causa del problema","report_nature":{"blur_excess":"\xc8 stata applicata ad un oggetto una sfocatura non necessaria","inappropriate":"La foto \xe8 inappropriata (non pertinente, nudo, \u2026)","mislocated":"La posizione della foto sulla mappa \xe8 sbagliata","copyright":"La foto viola il diritto d\u2019autore","other":"Qualsiasi altro tipo di problema","picture_low_quality":"La foto \xe8 di bassa qualit\xe0","":"Selezione la natura del problema\u2026","blur_missing":"Sono visibili la faccia di una persona o la targa di un\u2019auto","privacy":"Sono visibili un sentiero o una propriet\xe0 privati"},"report_whole_sequence":"Riguarda l\u2019intera sequenza","report_details":"Ulteriori dettagli","report_email":"La tua e-mail","report_email_placeholder":"Facoltativo","report_submit":"Invia","report_wait":"Invio della segnalazione\u2026","report_failure":"\xc8 avvenuto un errore durante la creazione della segnalazione: {e}. Riprovare pi\xf9 tardi.","moveMiddle":"Centra la visuale","show_map":"Mostra la mappa","sequence_next":"Prossima foto nella sequenza","map_theme_age_1":"> 2 anni","map_theme_type":"Tipo di fotocamera","minimize":"Nascondi il widget, puoi mostrarlo di nuovo usando il pulsante nell\u2019angolo in basso a sinistra","metadata_general_license_link":"Vedi la descrizione completa della licenza","share_rss":"Feed RSS","show_psv":"Mostra il visualizzatore delle foto","share_rss_title":"Feed RSS delle nuove sequenze nell\u2019attuale area visibile della mappa","sequence_prev":"Foto precedente della sequenza","sequence_more":"Altre opzioni di riproduzione","josm_live":"Abilita la sincronizzazione automatica di JOSM al caricamento delle foto","metadata_general_seqid":"Sequenza","metadata_camera_focal_length":"Lunghezza focale","filter_user":"Utente","metadata_location_orientation":"Direzione","filter_qualityscore":"Punteggio della qualit\xe0","metadata_quality_help":"Per saperne di pi\xf9 sul punteggio della qualit\xe0","metadata_quality_missing":"Nessun valore impostato nella foto","metadata_exif_value":"Valore","report":"Segnala","report_details_placeholder":"Facoltativo, puoi aggiungere dei dettagli sul problema","report_success":"La segnalazione \xe8 stata inviata correttamente. Non appena possibile verr\xe0 esaminata.","minimize_short":"Nascondi","qualityscore_title":"Informazioni sul punteggio della qualit\xe0","qualityscore_doc_1":"Panoramax propone un Punteggio della qualit\xe0 per ogni foto. Ci\xf2 permette di filtrare facilmente la mappa e mostrare le foto di alta qualit\xe0 disponibili.","qualityscore_doc_2":"Il voto \xe8 mostrato agli utenti con un valore tipo A/B/C/D/E (A \xe8 il voto migliore, E il peggiore) e graficamente viene mostrato con la seguente scala:","qualityscore_doc_link":"Nella nostra documentazione sono presenti maggiori dettagli sul calcolo del Punteggio della qualit\xe0.","qualityscore_doc_3":"Esso \xe8 calcolato basandosi sulla precisione del GPS e sulla risoluzione della foto. Un sistema professionale avr\xe0 un punteggio A, un action camera a 360\xb0 avr\xe0 un punteggio B e uno smartphone verr\xe0 classificato come C, D o E.","metadata_general_instance":"Istanza di origine","josm":"JOSM","picture_flat_long":"Foto classica","picture_360_long":"Foto panoramica","metadata_summary":"Sintesi","metadata_general_copy_id":"Copia l\u2019ID","metadata_general_copy_picid":"Copia l\u2019ID della foto","id":"iD","contribute_id":"Contribuisci a OpenStreetMap con l\u2019editor iD","geo_uri":"App esterna","filter_date_6months":"6 mesi","picture_all":"Tutte","metadata_exif_doc":"Doc per gli attributi EXIF","metadata_exif_doc_title":"Vai alla documentazione di Exiv2 per i dettagli completi sulle definizioni degli attributi EXIF e XMP","semantics_value":"Valore","semantics_key_doc":"Per saperne di pi\xf9 su questa chiave","semantics_title":"Etichette","semantics_features":"Oggetti rilevati","semantics_features_none":"Non \xe8 ancora stato rilevato alcun oggetto in questa foto.","semantics_features_default_title":"Oggetto #{nb}","semantics_features_subtitle":"{nb} propriet\xe0 associate","semantics_tags":"{nb} attributi","semantics_show_all_tags":"Mostra tutti gli attributi","semantics_hide_all_tags":"Nascondi tutti gli attributi","semantics_key":"Chiave","semantics_value_doc":"Per saperne di pi\xf9 su questa etichetta","semantics_wikidata_properties":{"P361":"parte di","P31":"instanza di","P279":"sottoclasse di"},"semantics_hide_annotations":"Nascondi le annotazioni della foto","semantics_tags_picture":"Etichette della foto","semantics_show_annotations":"Mostra le annotazioni della foto","semantics_annotation_tooltip":"Clicca per vedere i dettagli","semantics_tags_picture_none":"Non \xe8 stata ancora aggiunta alcuna etichetta su questa foto.","semantics_qualifiers":"Qualificatori","metadata_location_coordinates":"Coordinate (longitudine, latitudine)","metadata_location_copy":"Copia {v}","metadata_location_copy_more":"Ulteriori opzioni per la copia delle coordinate","whats_panoramax":"Panoramax \xe8 la geo-commons per le foto dei territori.","panoramax":"Panoramax","semantics_zero_annotations":"Nessuna annotazione impostata per questa immagine","semantics_hashtags":"Hashtag dell\u2019immagine","semantics_editor_error":"La sintassi non \xe8 valida. Le tue etichette devono avere la seguente forma:\\nchiave=valore\\nprefisso|chiave=valore\\nprefisso|chiave[qualif_chiave=qualif_valore]=valore\\n\\nLa lunghezza massima di una chiave \xe8 di 256 caratteri, quella di un valore \xe8 di 2048 caratteri.","semantics_editor_example":"chiave=valore\\nprefisso|chiave=valore","semantics_edit":"Modifica gli attributi","semantics_save":"Salva le tue modifiche","semantics_undo":"Annulla le tue modifiche","semantics_send_fail":"Non \xe8 stato possibile salvare le tue modifiche, riprova pi\xf9 tardi","semantics_cantsave_invalid":"Impossibile salvare le modifiche, input non valido","semantics_send_ok":"Le tue modifiche sono state inviate con successo","semantics_add_annotation":"Aggiungi una nuova annotazione","semantics_draw_annotation":"Per prima cosa fai clic su un angolo dell\u2019elemento che vorresti rappresentare. Poi fai clic sull\u2019angolo opposto. Per spostarle un angolo fai clic di nuovo su di esso.","semantics_save_drawn_annotation":"Salva posizione","semantics_undo_drawn_annotation":"Annulla","semantics_save_drawn_annotation_incomplete":"Devi disegnare un rettangolo all\u2019interno dell\u2019immagine prima di validarlo","semantics_delete_annotation":"Elimina questa annotazione","semantics_delete_annotation_confirm":"Vuoi veramente eliminare questa annotazione?"},"psv":{"loadError":"Impossibile caricare l\u2019immagine panoramica","ctrlZoom":"Utilizza Ctrl + rotellina del mouse per ingrandire l\u2019immagine","twoFingers":"Usa due dita per spostarti"},"maplibre":{"GeolocateControl.FindMyLocation":"Trova la mia posizione","GeolocateControl.LocationNotAvailable":"Posizione non disponibile"},"map":{"loading":"Caricamento\u2026","thumbnail":"Miniatura della foto passata con il mouse","not_public":"Non pubblicamente visibile","slow_loading":"La mappa impiega troppo tempo a caricarsi e potrebbe apparire a pezzi","map_data":"Dati cartografici: {m}","more_panoramax":"Per saperne di pi\xf9 su Panoramax"}}')},3979:at=>{"use strict";at.exports=JSON.parse('{"pnx":{"metadata_general_picid":"\u753b\u50cf\u8b58\u5225\u5b50","loading_labels_fun":["\ud83e\udd8c \u9e7f\u306e\u6a2a\u65ad\u6a19\u8b58\u306e\u691c\u51fa","\ud83d\ude98 Panoramax Car \xa9\u3092\u691c\u7d22","\u2615 \u30ab\u30d5\u30a7\u30a4\u30f3\u306e\u6ce8\u5165","\ud83d\ude00 \u7b11\u3063\u3066\u304f\u3060\u3055\u3044\u3001\u3042\u306a\u305f\u306f\u5730\u56f3\u306b\u8f09\u3063\u3066\u3044\u307e\u3059\uff01","\ud83d\udc08 \u732b\u306e\u5199\u771f\u3092\u5171\u6709\u3059\u308b","\ud83d\ude34 \u5148\u5ef6\u3070\u3057\u3092\u6e1b\u3089\u3059","\ud83e\uded6 \u304a\u8336\u3092\u6df9\u308c\u308b","\ud83d\udc27 \u30bd\u30fc\u30b9\u30b3\u30fc\u30c9\u3092\u516c\u958b","\ud83d\ude87 \u5730\u4e0b\u9244\u99c5\u306e\u7d22\u5f15","\ud83e\uddf9 \u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u30af\u30ea\u30fc\u30f3\u30a2\u30c3\u30d7","\ud83d\ude92 \u6d88\u9632\u7f72\u306e\u5199\u771f\u3092\u9001\u4fe1","\ud83d\udeb2 \u30b0\u30ea\u30fc\u30f3\u30a6\u30a7\u30a4\u30ba\u306e\u66f4\u65b0","\ud83d\ude89 \u99c5\u306e\u30db\u30fc\u30e0\u306e\u30a6\u30a9\u30fc\u30af\u30b9\u30eb\u30fc","\ud83d\udef0\ufe0f \u885b\u661f\u306e\u63a2\u7d22","\ud83d\udc65 \u30da\u30eb\u30bd\u30ca\u3092\u66f8\u304f","\ud83d\udc1f \u30c1\u30c3\u30d7\u30b7\u30e7\u30c3\u30d7\u306e\u5834\u6240","\ud83e\uddd1\u200d\ud83d\udcbb \u30c7\u30d0\u30c3\u30b0\u30a4\u30f3\u30bf\u30fc\u30d5\u30a7\u30fc\u30b9","\ud83d\udcc8 \u7d71\u8a08\u306e\u5897\u52a0"],"share_embed_docs":"\u57cb\u3081\u8fbc\u307f\u8a2d\u5b9a\u306e\u8a73\u7d30\u3092\u8aad\u3080","filter_zoom_in":"\u3053\u306e\u30d5\u30a3\u30eb\u30bf\u30fc\u3092\u8868\u793a\u3059\u308b\u306b\u306f\u62e1\u5927\u3057\u3066\u304f\u3060\u3055\u3044","metadata_camera_type":"\u30bf\u30a4\u30d7","minimize":"\u3053\u306e\u30a6\u30a3\u30b8\u30a7\u30c3\u30c8\u3092\u975e\u8868\u793a\u306b\u3059\u308b\u306b\u306f\u3001\u5de6\u4e0b\u306e\u30dc\u30bf\u30f3\u3092\u4f7f\u7528\u3057\u3066\u518d\u5ea6\u8868\u793a\u3057\u307e\u3059","error_psv":"Photo Sphere Viewer \u304c\u6b63\u3057\u304f\u8aad\u307f\u8fbc\u307e\u308c\u307e\u305b\u3093\u3067\u3057\u305f","error_josm":"JOSM \u304c\u5fdc\u7b54\u3057\u307e\u305b\u3093\u3002\u5b9f\u884c\u3055\u308c\u3066\u3044\u3066\u3001\u30ea\u30e2\u30fc\u30c8\u304c\u6709\u52b9\u306b\u306a\u3063\u3066\u3044\u307e\u3059\u304b?","filter_user":"\u30e6\u30fc\u30b6\u30fc","qualityscore_doc_3":"\u3053\u308c\u306f GPS \u306e\u7cbe\u5ea6\u3068\u753b\u50cf\u306e\u89e3\u50cf\u5ea6\u306b\u57fa\u3065\u3044\u3066\u8a08\u7b97\u3055\u308c\u307e\u3059\u3002\u30d7\u30ed\u4ed5\u69d8\u306e\u30b7\u30b9\u30c6\u30e0\u306f A \u8a55\u4fa1\u3001360\xb0 \u30a2\u30af\u30b7\u30e7\u30f3 \u30ab\u30e1\u30e9\u306f B \u8a55\u4fa1\u3001\u30b9\u30de\u30fc\u30c8\u30d5\u30a9\u30f3\u306f C/D/E \u8a55\u4fa1\u306b\u306a\u308a\u307e\u3059\u3002","report_nature":{"inappropriate":"\u5199\u771f\u304c\u4e0d\u9069\u5207\u3067\u3059\uff08\u7121\u95a2\u4fc2\u3001\u30cc\u30fc\u30c9\u306a\u3069\uff09","":"\u554f\u984c\u306e\u6027\u8cea\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044\u2026","blur_missing":"\u4eba\u306e\u9854\u3084\u8eca\u306e\u30ca\u30f3\u30d0\u30fc\u30d7\u30ec\u30fc\u30c8\u304c\u898b\u3048\u308b","blur_excess":"\u307c\u304b\u3059\u5fc5\u8981\u306e\u306a\u3044\u30aa\u30d6\u30b8\u30a7\u30af\u30c8\u304c\u307c\u3084\u3051\u3066\u3044\u308b","privacy":"\u30d7\u30e9\u30a4\u30d9\u30fc\u30c8\u30d1\u30b9\u307e\u305f\u306f\u30d7\u30ed\u30d1\u30c6\u30a3\u304c\u8868\u793a\u3055\u308c\u307e\u3059","picture_low_quality":"\u753b\u50cf\u306e\u54c1\u8cea\u304c\u60aa\u3044","mislocated":"\u5730\u56f3\u4e0a\u306e\u5199\u771f\u306e\u4f4d\u7f6e\u304c\u9069\u5207\u3067\u306f\u3042\u308a\u307e\u305b\u3093","copyright":"\u753b\u50cf\u306f\u8457\u4f5c\u6a29\u3092\u4fb5\u5bb3\u3057\u3066\u3044\u307e\u3059","other":"\u305d\u306e\u4ed6\u306e\u554f\u984c"},"sequence_next":"\u6b21\u306e\u753b\u50cf","sequence_play":"\u3053\u306e\u30b7\u30fc\u30b1\u30f3\u30b9\u306b\u6cbf\u3063\u3066\u30d7\u30ec\u30a4\u3057\u3066\u304f\u3060\u3055\u3044","sequence_pause":"\u4e00\u6642\u505c\u6b62\u30b7\u30fc\u30b1\u30f3\u30b9","sequence_prev":"\u524d\u306e\u753b\u50cf","sequence_more":"\u3088\u308a\u591a\u304f\u306e\u30d7\u30ec\u30a4\u30aa\u30d7\u30b7\u30e7\u30f3","sequence_speed":"\u30d7\u30ec\u30a4\u30e4\u30fc\u306e\u30b9\u30d4\u30fc\u30c9","legend_license":"\u30e9\u30a4\u30bb\u30f3\u30b9: {l}","legend_title":"\u5199\u771f\u306e\u8a73\u7d30\u3092\u8868\u793a","edit_osm":"OSM\u306b\u8ca2\u732e\u3059\u308b","josm_live":"\u753b\u50cf\u8aad\u307f\u8fbc\u307f\u6642\u306bJOSM\u81ea\u52d5\u540c\u671f\u3092\u6709\u52b9\u306b\u3059\u308b","loading_labels_serious":["\ud83d\uddfa\ufe0f \u30de\u30c3\u30d7\u30c7\u30fc\u30bf\u306e\u8aad\u307f\u8fbc\u307f","\ud83d\udda5\ufe0f \u30af\u30a8\u30eaAPI","\ud83d\uddbc\ufe0f \u30b5\u30e0\u30cd\u30a4\u30eb\u3092\u8aad\u307f\u8fbc\u3093\u3067\u3044\u307e\u3059","\ud83d\udd0d EXIF\u30e1\u30bf\u30c7\u30fc\u30bf\u306e\u5206\u6790","\ud83c\udfd8\ufe0f 3D\u30ec\u30f3\u30c0\u30ea\u30f3\u30b0","\ud83d\udcf7 360\xb0\u5199\u771f\u3092\u521d\u671f\u5316\u3057\u3066\u3044\u307e\u3059","\ud83d\udfe0 \u8272\u306e\u30d0\u30e9\u30f3\u30b9","\ud83d\udcaf \u30b3\u30f3\u30d4\u30e5\u30fc\u30c6\u30a3\u30f3\u30b0\u54c1\u8cea\u30b9\u30b3\u30a2 \xa9"],"error_pic":"\u8981\u6c42\u3055\u308c\u305f\u5199\u771f\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093\u3067\u3057\u305f","error_nopic":"\u6307\u5b9a\u3055\u308c\u305f\u4f4d\u7f6e\u306b\u306f\u753b\u50cf\u304c\u3042\u308a\u307e\u305b\u3093","error_api":"\u5199\u771f\u30b5\u30fc\u30d0\u30fc\u304c\u5229\u7528\u3067\u304d\u307e\u305b\u3093","error_webgl":"WebGL\u306f\u30d6\u30e9\u30a6\u30b6\u3067\u30b5\u30dd\u30fc\u30c8\u3055\u308c\u3066\u3044\u307e\u305b\u3093","error_api_compatibility":"\u753b\u50cf\u30b5\u30fc\u30d0\u30fc\u306f\u3053\u306e\u30d3\u30e5\u30fc\u30a2\u306e\u30d0\u30fc\u30b8\u30e7\u30f3\u3068\u4e92\u63db\u6027\u304c\u3042\u308a\u307e\u305b\u3093","filter_date":"\u65e5\u4ed8","filter_date_1month":"1\u30f6\u6708","filter_date_1year":"1\u5e74","filter_user_mypics":"\u79c1\u306e\u5199\u771f","filter_picture":"\u753b\u50cf\u30bf\u30a4\u30d7","picture_flat":"\u30af\u30e9\u30b7\u30c3\u30af","picture_360":"360\xb0","filter_qualityscore":"\u54c1\u8cea\u30b9\u30b3\u30a2","filter_qualityscore_help":"\u30af\u30ea\u30c3\u30af\u3057\u3066\u6709\u52b9\u307e\u305f\u306f\u7121\u52b9\u306b\u3057\u307e\u3059","qualityscore_title":"\u54c1\u8cea\u30b9\u30b3\u30a2\u306b\u3064\u3044\u3066","qualityscore_doc_1":"Panoramax \u306f\u3001\u5404\u5199\u771f\u306b\u54c1\u8cea\u30b9\u30b3\u30a2\u3092\u63d0\u4f9b\u3057\u307e\u3059\u3002\u3053\u308c\u306b\u3088\u308a\u3001\u5730\u56f3\u30d5\u30a3\u30eb\u30bf\u30ea\u30f3\u30b0\u304c\u7c21\u5358\u306b\u306a\u308a\u3001\u9ad8\u54c1\u8cea\u306e\u5199\u771f\u306e\u53ef\u7528\u6027\u3092\u5305\u62ec\u7684\u306b\u8868\u793a\u3067\u304d\u307e\u3059\u3002","qualityscore_doc_2":"\u8a55\u4fa1\u306f A/B/C/D/E \u30b9\u30b3\u30a2 (A \u304c\u6700\u9ad8\u3001E \u304c\u6700\u4f4e) \u3068\u3057\u3066\u30e6\u30fc\u30b6\u30fc\u306b\u8868\u793a\u3055\u308c\u3001\u6b21\u306e\u30b9\u30b1\u30fc\u30eb\u3067\u30b0\u30e9\u30d5\u8868\u793a\u3055\u308c\u307e\u3059\u3002","qualityscore_doc_link":"\u54c1\u8cea\u30b9\u30b3\u30a2\u306e\u8a08\u7b97\u306e\u8a73\u7d30\u306b\u3064\u3044\u3066\u306f\u3001\u30c9\u30ad\u30e5\u30e1\u30f3\u30c8\u3092\u3054\u89a7\u304f\u3060\u3055\u3044\u3002","map_background":"\u5730\u56f3\u306e\u80cc\u666f","map_background_aerial":"\u822a\u7a7a\u5199\u771f","map_background_streets":"\u901a\u308a","map_theme":"\u30de\u30c3\u30d7\u30c6\u30fc\u30de","map_theme_default":"\u30af\u30e9\u30b7\u30c3\u30af","map_theme_age":"\u64ae\u5f71\u65e5","map_theme_age_1":"2\u6b73\u4ee5\u4e0a","map_theme_age_2":"2\u6b73\u672a\u6e80","map_theme_age_3":"1\u6b73\u672a\u6e80","map_theme_age_4":"1\u304b\u6708\u672a\u6e80","map_theme_type":"\u30ab\u30e1\u30e9\u30bf\u30a4\u30d7","map_theme_score":"\u54c1\u8cea\u30b9\u30b3\u30a2","contrast":"\u3088\u308a\u9ad8\u3044\u753b\u50cf\u30b3\u30f3\u30c8\u30e9\u30b9\u30c8\u3092\u6709\u52b9\u306b\u3059\u308b","metadata":"\u753b\u50cf\u30e1\u30bf\u30c7\u30fc\u30bf","metadata_general_seqid":"\u30b7\u30fc\u30b1\u30f3\u30b9\u8b58\u5225\u5b50","metadata_general_picid_link":"\u753b\u50cf\u306eJSON\u8aac\u660e\u3078\u79fb\u52d5","metadata_general_seqid_link":"\u30b7\u30fc\u30b1\u30f3\u30b9\u306eJSON\u8a18\u8ff0\u3078\u79fb\u52d5","metadata_general_author":"\u8457\u8005","metadata_general_license":"\u30e9\u30a4\u30bb\u30f3\u30b9","metadata_general_license_link":"\u30e9\u30a4\u30bb\u30f3\u30b9\u306e\u5b8c\u5168\u306a\u8aac\u660e\u3092\u898b\u308b","metadata_general_date":"\u64ae\u5f71\u65e5","metadata_camera":"\u30ab\u30e1\u30e9","metadata_camera_make":"\u30e1\u30fc\u30ab\u30fc","metadata_camera_model":"\u30e2\u30c7\u30eb","metadata_camera_resolution":"\u89e3\u50cf\u5ea6","metadata_camera_focal_length":"\u7126\u70b9\u8ddd\u96e2","metadata_location":"\u4f4d\u7f6e","metadata_location_longitude":"\u7d4c\u5ea6","metadata_location_latitude":"\u7def\u5ea6","metadata_location_orientation":"\u64ae\u5f71\u65b9\u5411","metadata_location_precision":"\u4f4d\u7f6e\u6c7a\u3081\u7cbe\u5ea6","metadata_quality":"\u54c1\u8cea\u30b9\u30b3\u30a2","metadata_quality_help":"\u54c1\u8cea\u30b9\u30b3\u30a2\u306b\u3064\u3044\u3066\u8a73\u3057\u304f\u77e5\u308b","metadata_quality_score":"\u30b0\u30ed\u30fc\u30d0\u30eb\u30b9\u30b3\u30a2","metadata_quality_gps_score":"\u30dd\u30b8\u30b7\u30e7\u30cb\u30f3\u30b0\u30b9\u30b3\u30a2","metadata_quality_resolution_score":"\u89e3\u6c7a\u30b9\u30b3\u30a2","metadata_quality_missing":"\u753b\u50cf\u306b\u5024\u304c\u8a2d\u5b9a\u3055\u308c\u3066\u3044\u307e\u305b\u3093","metadata_exif":"EXIF / XMP","metadata_exif_name":"\u30bf\u30b0","metadata_exif_value":"\u4fa1\u5024","report":"\u5199\u771f\u3092\u5831\u544a\u3059\u308b","report_auth":"\u3053\u306e\u30ec\u30dd\u30fc\u30c8\u306f\u3042\u306a\u305f\u306e\u30a2\u30ab\u30a6\u30f3\u30c8\u300c{a}\u300d\u3092\u4f7f\u7528\u3057\u3066\u9001\u4fe1\u3055\u308c\u307e\u3059","report_nature_label":"\u554f\u984c\u306e\u6027\u8cea","report_whole_sequence":"\u3053\u308c\u306f\u30b7\u30fc\u30b1\u30f3\u30b9\u5168\u4f53\u306b\u95a2\u4fc2\u3059\u308b","report_details":"\u8ffd\u52a0\u306e\u8a73\u7d30","report_details_placeholder":"\u30aa\u30d7\u30b7\u30e7\u30f3\u3068\u3057\u3066\u3001\u554f\u984c\u306e\u8a73\u7d30\u3068\u305d\u308c\u304c\u3069\u306e\u3088\u3046\u306b\u95a2\u4fc2\u3057\u3066\u3044\u308b\u304b\u3092\u8ffd\u52a0\u3067\u304d\u307e\u3059","report_email":"\u3042\u306a\u305f\u306e\u30e1\u30fc\u30eb","report_email_placeholder":"\u30aa\u30d7\u30b7\u30e7\u30f3","report_submit":"\u9001\u4fe1","report_wait":"\u30ec\u30dd\u30fc\u30c8\u3092\u9001\u4fe1\u3057\u3066\u3044\u307e\u3059\u2026","report_success":"\u30ec\u30dd\u30fc\u30c8\u306f\u6b63\u5e38\u306b\u9001\u4fe1\u3055\u308c\u307e\u3057\u305f\u3002\u3067\u304d\u308b\u3060\u3051\u65e9\u304f\u78ba\u8a8d\u3055\u308c\u307e\u3059\u3002","report_failure":"\u30ec\u30dd\u30fc\u30c8\u306e\u4f5c\u6210\u4e2d\u306b\u30a8\u30e9\u30fc\u304c\u767a\u751f\u3057\u307e\u3057\u305f: {e}\u3002\u3057\u3070\u3089\u304f\u3057\u3066\u304b\u3089\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044\u3002","zoom":"\u30ba\u30fc\u30e0","zoomOut":"\u30ba\u30fc\u30e0\u30a2\u30a6\u30c8","zoomIn":"\u30ba\u30fc\u30e0\u30a4\u30f3","moveUp":"\u4e0a\u306b\u79fb\u52d5","moveDown":"\u4e0b\u306b\u79fb\u52d5","moveLeft":"\u5de6\u306b\u79fb\u52d5","moveRight":"\u53f3\u306b\u79fb\u52d5","moveMiddle":"\u30d3\u30e5\u30fc\u3092\u4e2d\u592e\u306b\u914d\u7f6e\u3059\u308b","expand":"\u62e1\u5927\u3059\u308b","expand_info":"\u30a6\u30a3\u30b8\u30a7\u30c3\u30c8\u3092\u5168\u30da\u30fc\u30b8\u306b\u8868\u793a\u3059\u308b","show_psv":"\u753b\u50cf\u30d3\u30e5\u30fc\u30a2\u3092\u8868\u793a\u3059\u308b","show_map":"\u5730\u56f3\u3092\u8868\u793a","minimize_short":"\u96a0\u308c\u308b","options":"\u30aa\u30d7\u30b7\u30e7\u30f3","filters":"\u30d5\u30a3\u30eb\u30bf\u30fc","layers":"\u30ec\u30a4\u30e4\u30fc","search":"\u691c\u7d22","search_empty":"\u7d50\u679c\u306a\u3057","search_address":"\u4f4f\u6240\u3001\u5e02\u533a\u753a\u6751\u306a\u3069\u3092\u691c\u7d22","search_user":"\u30e6\u30fc\u30b6\u30fc\u540d\u3092\u691c\u7d22\u2026","share":"\u5171\u6709","share_links":"\u30ea\u30f3\u30af","share_page":"\u3053\u306e\u30da\u30fc\u30b8\u3078\u306e\u30ea\u30f3\u30af","share_image":"HD\u753b\u50cf","share_rss":"RSS\u30d5\u30a3\u30fc\u30c9","share_rss_title":"\u73fe\u5728\u8868\u793a\u3055\u308c\u3066\u3044\u308b\u30de\u30c3\u30d7\u30a8\u30ea\u30a2\u5185\u306e\u65b0\u3057\u3044\u30b7\u30fc\u30b1\u30f3\u30b9\u306e RSS \u30d5\u30a3\u30fc\u30c9","share_embed":"\u30a6\u30a7\u30d6\u30b5\u30a4\u30c8\u306b\u57cb\u3081\u8fbc\u3080","share_print":"\u5370\u5237","copy":"\u30b3\u30d4\u30fc","copied":"\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f","error":"\u554f\u984c\u304c\u767a\u751f\u3057\u307e\u3057\u305f\u2026","error_click":"\u7d9a\u304f","error_retry":"\u5f8c\u3067\u3082\u3046\u4e00\u5ea6\u304a\u8a66\u3057\u304f\u3060\u3055\u3044"},"map":{"loading":"\u8aad\u307f\u8fbc\u307f\u4e2d\u2026","thumbnail":"\u30db\u30d0\u30fc\u3057\u305f\u753b\u50cf\u306e\u30b5\u30e0\u30cd\u30a4\u30eb","not_public":"\u516c\u958b\u3055\u308c\u306a\u3044","slow_loading":"\u30de\u30c3\u30d7\u306e\u8aad\u307f\u8fbc\u307f\u304c\u9045\u304f\u3001\u58ca\u308c\u3066\u3044\u308b\u3088\u3046\u306b\u898b\u3048\u308b\u5834\u5408\u304c\u3042\u308a\u307e\u3059"},"psv":{"twoFingers":"2\u672c\u306e\u6307\u3067\u79fb\u52d5\u3057\u307e\u3059","ctrlZoom":"Ctrl + \u30b9\u30af\u30ed\u30fc\u30eb\u3067\u753b\u50cf\u3092\u62e1\u5927\u3057\u307e\u3059","loadError":"\u753b\u50cf\u3092\u8aad\u307f\u8fbc\u3081\u307e\u305b\u3093"},"maplibre":{"GeolocateControl.FindMyLocation":"\u81ea\u5206\u306e\u4f4d\u7f6e\u3092\u8868\u793a","GeolocateControl.LocationNotAvailable":"GPS\u306f\u5229\u7528\u3067\u304d\u307e\u305b\u3093"}}')},6920:at=>{"use strict";at.exports=JSON.parse('{"pnx":{"zoomIn":"Zoom in","zoom":"Zoom","zoomOut":"Zoom uit","moveDown":"Naar beneden","search_user":"Zoek een gebruikersnaam\u2026","moveUp":"Ga omhoog","share_rss":"RSS-feed","loading_labels_serious":["\ud83d\uddfa\ufe0f Kaart aan het laden","\ud83d\udda5\ufe0f API opvragen","\ud83d\uddbc\ufe0f Miniatuurweergaven laden","\ud83d\udd0d EXIF metadata analyseren","\ud83c\udfd8\ufe0f 3D-rendering","\ud83d\udcf7 360\xb0 afbeelden initialiseren","\ud83d\udfe0 Kleur balancering","\ud83d\udcaf Bereken kwaliteits-score \xa9","\ud83d\udce1 Updates downloaden","\ud83c\udf0d Kaarttegels ophalen","\ud83d\udcf8 Schaduwen verwerken"],"share_embed_docs":"Lees meer over embedded instellingen","sequence_pause":"Pauzeer sequentie","sequence_prev":"Vorige afbeelding uit de sequentie","id":"iD","josm":"JOSM","sequence_more":"Meer afspeelmogelijkheden","sequence_speed":"Afspeel snelheid","edit_osm":"OSM aanpassen","moveLeft":"Naar links","moveRight":"Naar rechts","moveMiddle":"Middelpunt","expand":"Vergroot","show_psv":"Toon de afbeeldingsviewer","show_map":"Toon de kaart","options":"Opties","filters":"Filters","layers":"Lagen","search":"Zoek","search_empty":"Geen resultaat gevonden","search_address":"Zoek een adres, stad\u2026","share":"Deel","share_links":"Links","share_page":"Link naar deze foto","share_image":"HD afbeelding","share_embed":"Embedden op uw website","share_print":"Afdrukken","copy":"Kopieer","copied":"Gekopieerd","error":"We hebben een probleem\u2026","sequence_next":"Volgende afbeelding van de sequentie","error_click":"Klik om verder te gaan","error_retry":"Probeer later opnieuw","legend_license":"Licentie: {l}","legend_title":"Toon gegevens van de afbeelding","sequence_play":"Speel deze sequentie af","expand_info":"De widget op de volledige pagina weergeven","minimize":"Verberg deze widget, je kan hem terug tonen met de knop linksonder","loading_labels_fun":["\ud83e\udd8c Detectie verkeersborden overstekende herten","\ud83d\ude98 Panoramax auto zoeken \xa9","\u2615 Cafe\xefne-injectie","\ud83d\ude00 Gelukt, je kaart is gekaart!","\ud83d\udc08 Foto\'s delen van katten","\ud83d\ude34 Uitstelgedrag verminderen","\ud83e\uded6 Thee zetten","\ud83d\udc27 Broncode openen","\ud83d\ude87 Indexering metrostations","\ud83e\uddf9 Metadata opschonen","\ud83d\ude92 Foto\'s van brandweerkazernes versturen","\ud83d\udeb2 Fiets- en wandelpaden bijwerken","\ud83d\ude89 Perron doorgang","\ud83d\udef0\ufe0f Satellieten zoeken","\ud83d\udc65 Personas opslaan","\ud83e\udd5e Pannenkoekenhuizen localiseren","\ud83e\uddd1\u200d\ud83d\udcbb Interface debuggen","\ud83d\udcc8 Statistieken verhogen","\ud83e\udd16 Semantiek aanleren","\ud83c\udfa8 Interface herontwerpen","\ud83d\udcc5 Fotomappingparty\'s plannen","\ud83e\uddc0 Kazen laten rijpen","\ud83c\udf04 Prachtige zonneschijn berekenen","\ud83c\udf0a Meten van het hoogwater"],"share_rss_title":"RSS-feed van nieuwe reeksen in het nu zichtbare kaartgebied","josm_live":"Schakel JOSM automatische synchronisatie in bij het laden van afbeeldingen","minimize_short":"Verbergen","error_psv":"Photo Sphere Viewer werd niet correct geladen","error_nopic":"Geen foto beschikbaar op de aangegeven locatie","error_api":"De fotoserver is niet beschikbaar","error_webgl":"WebGL wordt niet ondersteund door je browser","error_api_compatibility":"De fotoserver is niet compatibel met deze viewer","filter_date_1month":"1 maand","filter_date_1year":"1 jaar","filter_user":"Gebruiker","filter_user_mypics":"Mijn foto\'s","filter_picture":"Afbeeldingstype","picture_flat":"Klassiek","picture_360":"360\xb0","filter_qualityscore":"Kwaliteitsscore","qualityscore_doc_2":"De score wordt getoond als een letter A/B/C/D/E (waarbij A het beste is en E het slechtse), en wordt grafisch weergegeven volgens deze schaal:","qualityscore_doc_link":"Meer weten over de Kwaliteitsscore","map_background":"Kaartachtergrond","map_background_aerial":"Satelliet","map_background_streets":"Straten","map_theme":"Kaartthema","map_theme_default":"Klassiek","map_theme_age":"Opnamedatum","map_theme_age_3":"< 1 jaar","map_theme_age_4":"< 1 maand","filter_qualityscore_help":"Klik om aan- of uit te schakelen","report_failure":"Er is een fout opgetreden bij het aanmaken van het rapport: {e}. Probleem later opnieuw.","map_theme_score":"Kwaliteitsscore","contrast":"Afbeeldingscontrast verhogen","metadata":"Metadata van de foto","metadata_camera_make":"Fabrikant","filter_date":"Datum","filter_zoom_in":"Zoom in om dit filter te zien","metadata_general_license_link":"De volledige beschrijving van de licentie bekijken","metadata_general_seqid":"Serie","metadata_general_picid_link":"Ga naar de JSON-beschrijving van de foto","metadata_general_seqid_link":"Ga naar de JSON-beschrijving van de sequentie","metadata_general_author":"Auteur","error_josm":"JOSM antwoord niet, is het actief en is afstandsbediening ingeschakeld?","qualityscore_title":"Over de kwaliteitsscore","metadata_general_license":"Licentie","error_pic":"The gevraagde foto werd niet gevonden","map_theme_age_2":"< 2 jaar","metadata_general_picid":"Afbeelding","metadata_general_date":"Opnamedatum","map_theme_type":"Cameratype","qualityscore_doc_1":"Panoramax toont een Kwaliteitsscore voor elke foto. Dit vergemakkelijkt filtering en laat toe om foto\'s van hoge kwaliteit te vinden.","qualityscore_doc_3":"Hij wordt berekend op basis van de GPS-nauwkeurigheid en resolutie van de foto. Een professioneel systeem zal een A-score hebben, een 360\xb0 actiecamera een B-score, en een smartphone een C/D/E-score.","map_theme_age_1":"> 2 jaar","report_details_placeholder":"Je kan, optioneel, details over het probleem toevoegen","metadata_camera":"Apparaat","metadata_camera_model":"Model","metadata_camera_type":"Type","metadata_camera_resolution":"Resolutie","metadata_camera_focal_length":"Brandpuntsafstand","metadata_location":"Positie","metadata_location_longitude":"Longitude","metadata_location_latitude":"Latitude","metadata_location_orientation":"Richting","metadata_location_precision":"Nauwkeurigheid van de positionering","metadata_quality":"Kwaliteit","metadata_quality_help":"Meer weten over de Kwaliteitsscore","metadata_quality_score":"Globale score","metadata_quality_gps_score":"Positioneringsscore","metadata_quality_resolution_score":"Resolutiescore","metadata_quality_missing":"geen info in de afbeelding","metadata_exif":"EXIF","metadata_exif_name":"Tag","metadata_exif_value":"Waarde","report":"Rapporteer","report_auth":"Dit rapport zal worden verstuurd met je account \\"{a}\\"","report_nature_label":"Oorzaak van het probleem","report_nature":{"":"Selecteer de aard van het probleem \u2026","blur_missing":"Het gezicht van een persoon of een nummerplaat is zichtbaar","blur_excess":"Een overbodige vervaging werd toegepast op een object","inappropriate":"De foto is ongepast (ongerelateerd, naaktheid \u2026)","privacy":"Een private weg of een privaat eigendom is zichtbaar","picture_low_quality":"De foto is van lage kwaliteit","mislocated":"De foto is slecht gepositioneerd","copyright":"De foto schendt het auteursrecht","other":"Een ander soort probleem"},"report_whole_sequence":"Dit betreft de volledige sequentie","report_details":"Aanvullende details","report_email":"Je e-mail","report_email_placeholder":"Optioneel","report_submit":"Verzenden","report_wait":"Rapport verzenden \u2026","report_success":"Het rapport werd succesvol verzonden. Het zal zo snel mogelijk behandeld worden.","whats_panoramax":"Panoramax is de geo-commons voor foto\'s van gebieden.","contribute_id":"Bijdragen aan OpenStreetMap met de iD-editor","geo_uri":"Externe app","semantics_hide_all_tags":"Verberg alle tags","semantics_key":"Sleutel","semantics_value":"Waarde","semantics_key_doc":"Meer weten over deze sleutel","semantics_value_doc":"Meer weten over deze tag","semantics_title":"Tags","semantics_tags":"{nb} tags","semantics_features":"Gedetecteerde eigenschappen","semantics_features_none":"Er is nog geen eigenschap gedetecteerd of geannoteerd in deze afbeelding.","semantics_features_default_title":"Eigenschap #{nb}","semantics_features_subtitle":"{nb} geassocieerde eigenschappen","semantics_show_all_tags":"Toon alle tags","metadata_general_instance":"Bron instance","semantics_annotation_tooltip":"Klik om details te zien","semantics_tags_picture":"Afbeelding tags","semantics_tags_picture_none":"Er zijn nog geen tags ingesteld voor deze afbeelding.","semantics_qualifiers":"Kwalificaties","semantics_show_annotations":"afbeelding-aantekeningen weergeven","semantics_hide_annotations":"afbeelding-aantekeningen verbergen","semantics_wikidata_properties":{"P31":"Instance van","P279":"subklasse van","P361":"onderdeel van"},"metadata_exif_doc":"Documenten voor EXIF-tags","metadata_exif_doc_title":"Ga naar documentatie van Exiv2 voor volledige informatie over definities van EXIF- en XMP-tags","metadata_location_copy":"Kopieer {v}","metadata_location_copy_more":"Meer kopieeropties voor co\xf6rdinaten","metadata_general_copy_picid":"Kopieer afbeelding ID","filter_date_6months":"6 maanden","picture_360_long":"Panorama afbeelding","metadata_summary":"Samenvatting","metadata_general_copy_id":"Kopieer ID","picture_flat_long":"Klassieke afbeelding","metadata_location_coordinates":"Co\xf6rdinaten (lengtegraad, breedtegraad)","picture_all":"Alles","semantics_zero_annotations":"Geen aantekeningen bij deze afbeelding","semantics_hashtags":"Foto-hashtags","panoramax":"Panoramax","semantics_editor_error":"De syntax is ongeldig. Je tags moeten eruit zien als:\\nsleutel=waarde\\nprefix|sleutel=waarde\\nprefix|sleutel[qualif_sleutel=qualif_waarde]=waarde\\n\\nMaximale lengte van de sleutel: 256 karakters, maximale lengte van de waarde: 2048 karakters.","semantics_save":"Je wijzigingen opslaan","semantics_editor_example":"sleutel=waarde\\nprefix|sleutel=waarde","semantics_edit":"De attributen bewerken","semantics_undo":"Je bewerkingen annuleren","semantics_send_ok":"Je bewerkingen werden succesvol verzonden","semantics_cantsave_invalid":"Kan wijzigingen niet opslaan, input is ongeldig","semantics_send_fail":"Wijzigingen opslaan mislukt, probeer later opnieuw","semantics_save_drawn_annotation":"Bewaar positie","semantics_undo_drawn_annotation":"Annuleer","semantics_save_drawn_annotation_incomplete":"Er moet een rechthoek getekend worden die op de afbeelding past voor validatie mogelijk is","semantics_delete_annotation":"verwijder deze aantekening","semantics_delete_annotation_confirm":"Wil je deze aantekening echt verwijderen ?","semantics_add_annotation":"Voeg aantekening toe","semantics_draw_annotation":"Klik eerst op de hoek van het element dat je wilt weergeven. Klik vervolgens op de tegenoverliggende hoek. Je kunt nogmaals op een hoek klikken om deze te verplaatsen."},"psv":{"twoFingers":"Gebruik twee vingers om te navigeren","ctrlZoom":"Gebruik ctrl + scroll om de afbeelding in en uit te zoomen","loadError":"Het panorama kan niet worden geupload"},"maplibre":{"GeolocateControl.FindMyLocation":"Mijn locatie zoeken","GeolocateControl.LocationNotAvailable":"Locatitie niet beschikbaar"},"map":{"loading":"Laden \u2026","slow_loading":"De kaart laadt traag en kan er gebroken uitzien","thumbnail":"Thumbnail van de aangeduide foto","not_public":"Niet openbaar zichtbaar","map_data":"Kaartdata: {m}","more_panoramax":"Meer weten over Panoramax"}}')},9026:at=>{"use strict";at.exports=JSON.parse('{"pnx":{"moveRight":"Przesu\u0144 w prawo","sequence_speed":"Pr\u0119dko\u015b\u0107 odtwarzania","metadata_camera_model":"Model","search_address":"Szukaj adres, miasto\u2026","zoom":"Przybli\u017cenie","zoomIn":"Przybli\u017c","moveUp":"Przesu\u0144 w g\xf3r\u0119","moveDown":"Przesu\u0144 w d\xf3\u0142","moveLeft":"Przesu\u0144 w lewo","moveMiddle":"Wycentruj widok","expand":"Rozszerz","show_psv":"Poka\u017c przegl\u0105dark\u0119 zdj\u0119\u0107","show_map":"Poka\u017c map\u0119","options":"Opcje","filters":"Filtry","layers":"Warstwy","search":"Szukaj","search_empty":"Brak wynik\xf3w","search_user":"Szukaj nazwy u\u017cytkownika\u2026","share":"Udost\u0119pnij","share_links":"Linki","share_page":"Link do tej strony","share_rss":"Kana\u0142 RSS","share_print":"Drukuj","copy":"Kopiuj","copied":"Skopiowano","error":"Mamy problem\u2026","error_click":"Kliknij, aby kontynuowa\u0107","error_retry":"Prosz\u0119 spr\xf3buj p\xf3\u017aniej","sequence_next":"Nast\u0119pne zdj\u0119cie w sekwencji","sequence_pause":"Spauzuj sekwencj\u0119","sequence_prev":"Poprzednie zdj\u0119cie w sekwencji","sequence_more":"Wi\u0119cej opcji odtwarzania","legend_license":"Licencja: {l}","legend_title":"Poka\u017c szczeg\xf3\u0142y zdj\u0119cia","edit_osm":"Edytuj OSM","loading_labels_serious":["\ud83d\uddfa\ufe0f Wczytywanie danych mapy","\ud83d\udda5\ufe0f Odpytywanie API","\ud83d\uddbc\ufe0f Wczytywanie miniaturek","\ud83d\udd0d Analizowanie metadanych EXIF","\ud83c\udfd8\ufe0f Renderowanie 3D","\ud83d\udcf7 Inicjowanie zdj\u0119\u0107 360\xb0","\ud83d\udfe0 Balansowanie kolor\xf3w","\ud83d\udcaf Obliczanie oceny jako\u015bci \xa9"],"map_theme_age_2":"< 2 lata","map_theme_age_1":"> 2 lata","map_theme_age":"Data zrobienia","filter_picture":"Typ zdj\u0119cia","map_theme_age_3":"< rok","map_theme_age_4":"< miesi\u0105c","map_theme_type":"Typ aparatu","metadata":"Metadane zdj\u0119cia","metadata_general_picid":"Identyfikator zdj\u0119cia","metadata_general_seqid":"Identyfikator sekwencji","metadata_general_license":"Licencja","metadata_general_author":"Autor","metadata_camera":"Aparat","metadata_camera_type":"Typ","metadata_camera_resolution":"Rozdzielczo\u015b\u0107","metadata_location":"Lokalizacja","metadata_exif":"EXIF / XMP","metadata_quality_missing":"Brak warto\u015bci ustawionej w zdj\u0119ciu","metadata_exif_name":"Tag","metadata_exif_value":"Warto\u015b\u0107","report":"Zg\u0142o\u015b zdj\u0119cie","report_nature":{"privacy":"Prywatna droga lub w\u0142asno\u015b\u0107 widoczna","mislocated":"Zdj\u0119cie jest w z\u0142ym miejscu na mapie","copyright":"Zdj\u0119cie narusza prawa autorskie","picture_low_quality":"Zdj\u0119cie jest bardzo niskiej jako\u015bci","other":"Inny problem","":"Wybierz typ problemu\u2026","blur_missing":"Twarz osoby lub rejestracja samochodu jest widoczna","blur_excess":"Obiekt, kt\xf3ry nie wymaga zamazania jest zamazany","inappropriate":"Zdj\u0119cie jest niestosowne (niezwi\u0105zane, nago\u015b\u0107\u2026)"},"zoomOut":"Oddal","report_whole_sequence":"Dotyczy ca\u0142ej sekwencji","report_details":"Dodatkowe szczeg\xf3\u0142y","report_email":"Tw\xf3j adres email","report_email_placeholder":"Opcjonalne","report_submit":"Wy\u015blij","report_wait":"Wysy\u0142anie zg\u0142oszenia\u2026","report_success":"Zg\u0142oszenie zosta\u0142o wys\u0142ane. Zostanie przejrzane tak szybko jak to mo\u017cliwe.","share_rss_title":"Kana\u0142 RSS nowych sekwencji na widocznym obszarze mapy","loading_labels_fun":["\ud83e\udd8c Wykrywanie znak\xf3w przechodzenia jeleni",null,"\u2615 Wstrzykiwanie kofeiny","\ud83d\ude00 U\u015bmiechnij si\u0119, jeste\u015b mapowany!","\ud83d\udc08 Udost\u0119pnianie zdj\u0119\u0107 kot\xf3w","\ud83d\ude34 Zmniejszania prokrastynacji","\ud83e\uded6 Parzenie herbaty","\ud83d\udc27 Otwieranie kodu \u017ar\xf3d\u0142owego","\ud83d\ude87 Indeksowanie stacji metra","\ud83e\uddf9 Czyszczenie metadanych","\ud83d\ude92 Przesy\u0142anie zdj\u0119\u0107 remiz",null,"\ud83d\ude89 Przechodzenie peron\xf3w stacji","\ud83d\udef0\ufe0f Wyszukiwanie satelit",null,"\ud83d\udc1f Szukanie sklep\xf3w z frytkami i ryb\u0105","\ud83e\uddd1\u200d\ud83d\udcbb Interfejs debugowania","\ud83d\udcc8 Zwi\u0119kszanie statystyk"],"share_embed_docs":"Przeczytaj wi\u0119cej o konfiguracji osadzenia","sequence_play":"Odtw\xf3rz t\u0119 sekwencj\u0119","josm_live":"W\u0142\u0105cz automatyczn\u0105 synchronizacj\u0119 JOSM przy \u0142adowaniu zdj\u0119\u0107","error_api":"Serwer zdj\u0119\u0107 nie jest dost\u0119pny","error_webgl":"WebGL nie jest obs\u0142ugiwany przez t\u0119 przegl\u0105dark\u0119","error_api_compatibility":"Serwer zdj\u0119\u0107 nie jest kompatybilny z t\u0105 wersj\u0105 przegl\u0105darki","filter_date":"Data","filter_date_1month":"1 miesi\u0105c","filter_date_1year":"1 rok","filter_user":"U\u017cytkownik","filter_user_mypics":"Moje zdj\u0119cia","filter_zoom_in":"Przybli\u017c, aby filtry by\u0142y widoczne","picture_flat":"Klasyczne","picture_360":"360\xb0","filter_qualityscore":"Ocena jako\u015bci","map_background":"Podk\u0142ad mapowy","map_background_aerial":"Zdj\u0119cia lotnicze","map_background_streets":"Ulice","map_theme":"Motyw mapy","map_theme_default":"Klasyczny","map_theme_score":"Ocena jako\u015bci","contrast":"W\u0142\u0105cz wy\u017cszy kontrast zdj\u0119cia","metadata_general_picid_link":"Id\u017a do opisu zdj\u0119cia w JSON","metadata_general_seqid_link":"Id\u017a do opisu sekwencji w JSON","metadata_general_license_link":"Id\u017a do strony z pelnym opisem licencji","metadata_general_date":"Data zrobienia","metadata_camera_make":"Marka","metadata_camera_focal_length":"Ogniskowa","metadata_location_longitude":"D\u0142ugo\u015b\u0107 geograficzna","metadata_location_latitude":"Szeroko\u015b\u0107 geograficzna","metadata_location_orientation":"Kierunek robienia zdj\u0119cia","metadata_location_precision":"Precyzja lokalizacji","metadata_quality":"Ocena jako\u015bci","metadata_quality_help":"Dowiedz si\u0119 wi\u0119cej o ocenie jako\u015bci","metadata_quality_score":"Ocena globalna","metadata_quality_gps_score":"Ocena pozycji","metadata_quality_resolution_score":"Ocena rozdzielczo\u015bci","report_auth":"To zg\u0142oszenie b\u0119dzie wys\u0142anie przy pomocy Twojego konta \\"{a}\\"","report_nature_label":"Typ problemu","report_details_placeholder":"Opcjonalnie, mo\u017cesz doda\u0107 szczeg\xf3\u0142y o problemie","report_failure":"B\u0142\u0105d wyst\u0105pi\u0142 podczas tworzenia zg\u0142oszenia: {e}. Prosz\u0119 spr\xf3buj ponownie.","filter_qualityscore_help":"Kliknij, aby w\u0142\u0105czy\u0107 lub wy\u0142\u0105czy\u0107","error_josm":"JOSM nie odpowiada, czy jest uruchomiony i czy dost\u0119p zdalny jest w\u0142\u0105czony?"},"psv":{"twoFingers":"U\u017cyj dw\xf3ch palc\xf3w do nawigacji","ctrlZoom":"U\u017cyj ctrl + rolka myszy, aby powi\u0119kszy\u0107 zdj\u0119cie","loadError":"Panorama nie mo\u017ce by\u0107 za\u0142adowana"},"maplibre":{"GeolocateControl.FindMyLocation":"Znajd\u017a moj\u0105 lokalizacj\u0119","GeolocateControl.LocationNotAvailable":"Lokalizacja niedost\u0119pna"},"map":{"thumbnail":"Miniaturki najechanego zdj\u0119cia","not_public":"Niewidoczne publicznie","slow_loading":"Mapa \u0142aduje si\u0119 wolno i mo\u017ce si\u0119 wydawaj popsuta","loading":"\u0141adowanie\u2026"}}')},991:at=>{"use strict";at.exports=JSON.parse('{"psv":{"twoFingers":"Anv\xe4nd tv\xe5 fingrar f\xf6r att panorera","loadError":"Panoramat kan inte laddas","ctrlZoom":"Anv\xe4nd ctrl + scroll f\xf6r att zooma in p\xe5 bilden"},"pnx":{"moveUp":"Flytta upp","zoom":"Zoom","zoomOut":"Zooma ut","zoomIn":"Zooma in","moveDown":"Flytta ner","moveLeft":"Flytta v\xe4nster","moveRight":"Flytta h\xf6ger","moveMiddle":"Centrera vy","expand":"Expandera","show_psv":"Visa bildvisaren","show_map":"Visa kartan","expand_info":"Visa widgeten p\xe5 hela sidan","minimize":"G\xf6m denna flik, du kan visa den igen genom att anv\xe4nda knappen i nedersta v\xe4nstra h\xf6rnet","minimize_short":"G\xf6m","options":"Alternativ","search":"S\xf6k","search_empty":"Inga resultat hittade","filters":"Filter","layers":"Lager","share":"Dela","share_links":"L\xe4nkar","share_page":"L\xe4nka till denna sida","share_image":"HD bild","share_rss":"RSS feed","share_embed":"B\xe4dda in p\xe5 din hemsida","share_embed_docs":"L\xe4s mer om inb\xe4ddad konfiguration","share_print":"Skriv ut","copy":"Kopiera","copied":"Kopierad","error":"Vi har ett problem\u2026","error_click":"Forts\xe4tt","error_retry":"V\xe4nligen f\xf6rs\xf6k igen senare","sequence_next":"N\xe4sta bild i sekvensen","sequence_play":"Spela upp bilder i sekvensen","sequence_pause":"Pausa sekvens","sequence_more":"Mera uppspelningsalternativ","sequence_speed":"Uppspelningshastighet","legend_license":"Licens: {l}","search_address":"S\xf6k en adress, stad\u2026","edit_osm":"Redigera OSM","loading_labels_serious":["\ud83d\uddfa\ufe0f Laddar kartdata","\ud83d\udda5\ufe0f Anropar API","\ud83d\uddbc\ufe0f Laddar miniatyrer","\ud83d\udd0d Analyserar EXIF metadata","\ud83c\udfd8\ufe0f 3D rendering","\ud83d\udcf7 Initialiserar 360\xb0 bilder","\ud83d\udfe0 F\xe4rg balansering","\ud83d\udcaf Ber\xe4kna Kvalitetspo\xe4ng \xa9"],"loading_labels_fun":["\ud83e\udd8c R\xe4knar \xe4lgar","R\xe4knar gula bilar","\u2615 Bunkrar upp med kaffe","Kaj nu simmar du ur bild!","\ud83d\udc08 Delar kattbilder","\ud83d\ude34 Prokastinerar","\ud83e\uded6 Kokar te","\ud83d\udc27 \xd6ppnar k\xe4llkod","\ud83d\ude87 R\xe4knar t\xe5g","\ud83e\uddf9 St\xe4dar upp bland metadata","\ud83d\udc3f\ufe0f R\xe4knar ekorrar","\ud83d\udeb2 R\xe4knar cykelst\xe4ll","\ud83d\ude89 G\xe5r igenom stationer","\ud83d\udef0\ufe0f S\xf6ker satelliter","\ud83e\uddd1\u200d\ud83c\udf73 Lagar k\xf6ttbullar","\ud83e\uddcdSt\xe5r i k\xf6","\ud83e\uddd1\u200d\ud83d\udcbb Fels\xf6ker gr\xe4nsnitt","\ud83d\udcc8 \xd6kar statistik"],"error_psv":"Foto-sf\xe4r visaren laddar inte ordentligt","error_nopic":"Ingen bild finns p\xe5 angiven position","error_api":"Bildservern \xe4r inte tillg\xe4nlig","error_webgl":"WebGL st\xf6ds inte i din webbl\xe4sare","error_api_compatibility":"Bildservern \xe4r inte kompatibel med den h\xe4r visarens version","filter_date":"Datum","filter_date_1month":"1 m\xe5nad","filter_date_1year":"1 \xe5r","filter_user":"Anv\xe4ndare","filter_user_mypics":"Mina bilder","filter_picture":"Bildtyp","filter_zoom_in":"Zooma in f\xf6r att se detta filter","picture_360":"360\xb0","filter_qualityscore_help":"Klicka f\xf6r att sl\xe5 p\xe5 eller av","qualityscore_title":"Om Kvalitetspo\xe4ng","filter_qualityscore":"Kvalitetspo\xe4ng","qualityscore_doc_2":"Kvalitet visas som en skala p\xe5 A/B/C/D/E (A \xe4r b\xe4st, E \xe4r s\xe4mst) och visas grafisk genom skalan:","map_theme_default":"Klassisk","map_theme_age_1":"> 2 \xe5r","map_theme_age_2":"< 2 \xe5r","map_theme_age_3":"< 1 \xe5r","map_theme_age_4":"< 1 m\xe5nad","map_theme_type":"Kameratyp","contrast":"Aktivera h\xf6gre bildkontrast","metadata":"Bildmetadata","metadata_general_picid":"Bild-identifierare","metadata_general_seqid":"Sekvens-identifierare","qualityscore_doc_link":"Mer information om hur Kvalitetspo\xe4ng ber\xe4knas finns i v\xe5r dokumentation.","map_theme_score":"Kvalitetspo\xe4ng","metadata_general_seqid_link":"G\xe5 till JSON beskrivning av sekvensen","metadata_general_author":"Upphovsman","metadata_general_license":"Licens","metadata_general_license_link":"Se full licensbeskrivning","metadata_general_date":"Bild tagen","metadata_camera":"Kamera","metadata_camera_make":"M\xe4rke","metadata_camera_model":"Modell","metadata_camera_type":"Typ","metadata_camera_resolution":"Uppl\xf6sning","metadata_location":"Plats","metadata_location_longitude":"Longitud","metadata_location_latitude":"Latitud","metadata_location_orientation":"Kamerariktning","metadata_location_precision":"Positionsprecision","metadata_quality":"Kvalitetspo\xe4ng","metadata_quality_score":"Global po\xe4ng","metadata_quality_gps_score":"Positioneringspo\xe4ng","metadata_quality_resolution_score":"Uppl\xf6sningspo\xe4ng","metadata_quality_missing":"Inget v\xe4rde satt i bilden","metadata_exif":"EXIF / XMP","metadata_exif_name":"Tag","metadata_exif_value":"V\xe4rde","report":"Rapportera bild","search_user":"S\xf6k anv\xe4ndarnamn\u2026","legend_title":"Visa detaljer f\xf6r bild","report_auth":"Denna rapport kommer skickas genom ditt konto \\"{a}\\"","share_rss_title":"RSS feed av nya sekvensen f\xf6r karta i bild","error_josm":"JOSM svarar inte, k\xf6rs det och \xe4r remote p\xe5slaget?","sequence_prev":"F\xf6reg\xe5ende bild i sekvensen","josm_live":"Aktivera automatisk JOSM synkronisering vid inladdning av bild","metadata_general_picid_link":"G\xe5 till JSON beskrivning av bilden","metadata_quality_help":"L\xe4s mer om Kvalitetspo\xe4ng","error_pic":"Beg\xe4rd bild hittades inte","qualityscore_doc_3":"Det r\xe4knas ut baserat p\xe5 GPS precision och bildens uppl\xf6sning. Ett profesionellt system kommer ha A-kvalit\xe9, en 360\xb0 actionkamera kommer ha B-kvalit\xe9 och en telefon kommer ha C/D/E-kvalit\xe9.","qualityscore_doc_1":"Panoramax erbjuder en Kvalitetspo\xe4ng f\xf6r varje bild. Det m\xf6jlig\xf6r enkel kartfiltrering och en omfattande uppvisning av tillg\xe4nligheten av bilder av h\xf6g kvalitet.","metadata_camera_focal_length":"Br\xe4nnvidd","picture_flat":"Klassisk","map_background":"Kartbakgrund","map_background_aerial":"Sattelit","map_background_streets":"Gator","map_theme":"Karttema","map_theme_age":"Fotodatum","report_nature_label":"Typ av problem","report_nature":{"":"V\xe4lj typen av problem\u2026","blur_missing":"En persons ansikte eller en registreringspl\xe5t \xe4r synlig","blur_excess":"Ett objekt som inte beh\xf6ver suddas \xe4r suddad","inappropriate":"Bilden \xe4r ol\xe4mplig(orelaterat, nakenhet...)","privacy":"En privat v\xe4g eller fastighet \xe4r synlig","picture_low_quality":"Bilden \xe4r av mycket d\xe5lig kvalitet","mislocated":"Bilden \xe4r placerat d\xe5lig p\xe5 kartan","copyright":"Bilden inkr\xe4nker p\xe5 upphovsr\xe4tt","other":"N\xe5got annat typ av problem"},"report_whole_sequence":"Detta g\xe4ller hela sekvensen","report_details":"Ytterligare detaljer","report_details_placeholder":"Valfritt, kan du l\xe4gga till information om problemet och varf\xf6r det \xe4r ett problem","report_email":"Din e-post","report_email_placeholder":"Valfri","report_submit":"Skicka","report_wait":"Skickar rapport \u2026","report_success":"Rapporten har skickats. Det kommer att ses \xf6ver s\xe5 snart som m\xf6jligt.","report_failure":"Ett fel uppstod n\xe4r rapporten skapades: {e}. F\xf6rs\xf6k igen senare."},"maplibre":{"GeolocateControl.FindMyLocation":"Hitta min postion","GeolocateControl.LocationNotAvailable":"Plats inte tillg\xe4nlig"},"map":{"loading":"Laddar\u2026","thumbnail":"Miniatyrbild av r\xf6rd bild","not_public":"Inte offentligt synligt","slow_loading":"Kartan laddas l\xe5ngsamt och kan verka trasig"}}')},6984:at=>{"use strict";at.exports=JSON.parse('{"pnx":{"contrast":"\u589e\u52a0\u76f8\u7247\u5c0d\u6bd4\u5ea6","copied":"\u5df2\u8907\u88fd","copy":"\u8907\u88fd","edit_osm":"\u7de8\u8f2f OSM","error":"Panoramax \u7576\u6a5f\u4e86\u2026","error_api":"\u76f8\u7247\u4f3a\u670d\u5668\u7121\u6cd5\u4f7f\u7528","error_api_compatibility":"\u76f8\u7247\u4f3a\u670d\u5668\u548c\u6b64\u6aa2\u8996\u5668\u7684\u7248\u672c\u4e0d\u76f8\u5bb9","error_josm":"JOSM \u6c92\u6709\u56de\u61c9\uff0c\u5b83\u5df2\u7d93\u555f\u52d5\u4e14\u555f\u7528\u9060\u7aef\u63a7\u5236\u4e86\u55ce?","error_nopic":"\u641c\u5c0b\u7684\u4f4d\u7f6e\u9644\u8fd1\u6c92\u6709\u76f8\u7247","error_pic":"\u627e\u4e0d\u5230\u6307\u5b9a\u7684\u76f8\u7247","error_psv":"\u7121\u6cd5\u6b63\u78ba\u8f09\u5165 Photo Sphere Viewer","error_subtitle":"\u8acb\u7a0d\u5f8c\u91cd\u8a66\u6216\u6aa2\u67e5\u700f\u89bd\u5668\u7684\u4e3b\u63a7\u53f0\u4ee5\u4e86\u89e3\u8a73\u60c5\u3002","error_webgl":"\u60a8\u7684\u700f\u89bd\u5668\u4e0d\u652f\u63f4 WebGL","expand":"\u5c55\u958b","expand_info":"\u5728\u6574\u500b\u756b\u9762\u986f\u793a\u6b64\u5c0f\u5de5\u5177","filter_camera_model":"\u6309\u76f8\u6a5f\u578b\u865f","filter_date":"\u65e5\u671f","filter_picture":"\u76f8\u7247\u985e\u578b","filter_user":"\u4f7f\u7528\u8005","filter_zoom_in":"\u62c9\u8fd1\u5730\u5716\u4ee5\u986f\u793a\u7be9\u9078\u7d50\u679c","filters":"\u7be9\u9078\u5668","id":"iD","josm":"JOSM","josm_live":"\u555f\u7528\u8f09\u5165\u76f8\u7247\u6642\u81ea\u52d5\u540c\u6b65 JOSM","layers":"\u5716\u5c64","legend_license":"\u6388\u6b0a: {l}","loading_labels_fun":["\ud83e\udd8c \u5075\u6e2c\u5230\u7576\u5fc3\u6885\u82b1\u9e7f\u6a19\u8a8c","\ud83d\ude98 \u6b63\u5728\u641c\u5c0b Panoramax \u6c7d\u8eca \xa9","\u2615 \u6ce8\u5165\u5496\u5561\u56e0","\ud83d\ude00 \u8acb\u5fae\u7b11\uff0c\u60a8\u5df2\u88ab\u6a19\u8a18\u5728\u5730\u5716\u4e0a\u4e86\uff01","\ud83d\udc08 \u6b63\u5728\u5206\u4eab\u8c93\u54aa\u7684\u76f8\u7247","\ud83d\ude34 \u6b63\u5728\u6e1b\u5c11\u5ef6\u9072","\ud83e\uded6 \u6b63\u5728\u6c8f\u58fa\u597d\u8336","\ud83d\udc27 \u6b63\u5728\u958b\u555f\u539f\u59cb\u78bc","\ud83d\ude87 \u6b63\u5728\u7d22\u5f15\u5730\u9435\u8eca\u7ad9","\ud83e\uddf9 \u6e05\u7406\u8a6e\u91cb\u8cc7\u6599","\ud83d\ude92 \u6b63\u5728\u50b3\u9001\u6d88\u9632\u968a\u7684\u76f8\u7247","\ud83d\udeb2 \u66f4\u65b0\u7da0\u9053","\ud83d\ude89 \u6b63\u5728\u901a\u904e\u8eca\u7ad9\u6708\u53f0","\ud83d\udef0\ufe0f \u6b63\u5728\u641c\u5c0b\u885b\u661f","\ud83d\udc65 \u6b63\u5728\u64b0\u5beb\u4eba\u7269\u8a8c","\ud83c\udf57 \u6b63\u5728\u5b9a\u4f4d\u9e79\u9165\u96de\u5e97","\ud83e\uddd1\u200d\ud83d\udcbb \u6b63\u5728\u5075\u932f\u4ecb\u9762","\ud83d\udcc8 \u7d71\u8a08\u6578\u64da\u6b63\u5728\u589e\u52a0","\ud83e\udd16 \u6b63\u5728\u5b78\u7fd2\u8a9e\u7fa9","\ud83c\udfa8 \u91cd\u65b0\u8a2d\u8a08\u4ecb\u9762","\ud83d\udcc5 \u6b63\u5728\u898f\u5283\u76f8\u7247\u5730\u5716\u7e6a\u5716\u805a\u6703","\ud83e\uddc0 \u6b63\u5728\u719f\u6210\u5207\u9054\u8d77\u53f8","\ud83c\udf04 \u6b63\u5728\u8a08\u7b97\u6046\u6625\u7684\u65e5\u7167\u6642\u6578","\ud83c\udf0a \u6b63\u5728\u6e2c\u91cf\u6f6e\u6c50"],"loading_labels_serious":["\ud83d\uddfa\ufe0f \u6b63\u5728\u8f09\u5165\u5730\u5716\u8cc7\u6599","\ud83d\udda5\ufe0f \u6b63\u5728\u67e5\u8a62 API","\ud83d\uddbc\ufe0f \u6b63\u5728\u8f09\u5165\u7e2e\u5716","\ud83d\udd0d \u6b63\u5728\u5206\u6790 EXIF \u8a6e\u91cb\u8cc7\u6599","\ud83c\udfd8\ufe0f \u6b63\u5728\u7b97\u7e6a 3D","\ud83d\udcf7 \u6b63\u5728\u521d\u59cb\u5316 360\xb0 \u76f8\u7247","\ud83d\udfe0 \u6b63\u5728\u5e73\u8861\u8272\u5f69","\ud83d\udcaf \u6b63\u5728\u8a08\u7b97\u54c1\u8cea\u5206\u6578 \xa9","\ud83d\udce1 \u6b63\u5728\u4e0b\u8f09\u66f4\u65b0","\ud83c\udf0d \u6b63\u5728\u53d6\u5f97\u5730\u5716\u5716\u78da","\ud83d\udcf8 \u6b63\u5728\u8655\u7406\u9670\u5f71"],"map_background":"\u5730\u5716\u80cc\u666f","map_background_aerial":"\u885b\u661f","map_background_streets":"\u9810\u8a2d","map_theme":"\u5730\u5716\u4e3b\u984c","map_theme_age":"\u62cd\u651d\u6642\u9593","map_theme_age_1":"> 2 \u5e74","map_theme_age_2":"< 2 \u5e74","map_theme_age_3":"< 1 \u5e74","map_theme_age_4":"< 1 \u500b\u6708","map_theme_default":"\u7d93\u5178","map_theme_type":"\u76f8\u6a5f\u985e\u578b","metadata":"\u76f8\u7247\u8a6e\u91cb\u8cc7\u6599","metadata_camera":"\u76f8\u6a5f","metadata_camera_focal_length":"\u7126\u8ddd","metadata_camera_make":"\u88fd\u9020\u5546","metadata_camera_model":"\u578b\u865f","metadata_camera_type":"\u985e\u578b","metadata_exif":"EXIF","metadata_exif_name":"\u6a19\u7c64","metadata_exif_value":"\u503c","metadata_general_author":"\u4f5c\u8005","metadata_general_date":"\u62cd\u651d\u6642\u9593","metadata_general_license":"\u6388\u6b0a","metadata_general_license_link":"\u67e5\u770b\u5b8c\u6574\u6388\u6b0a\u689d\u6b3e","metadata_general_picid":"\u76f8\u7247","metadata_general_picid_link":"\u524d\u5f80\u672c\u76f8\u7247\u7684 JSON \u8aaa\u660e","metadata_general_seqid":"\u5e8f\u5217","metadata_general_seqid_link":"\u524d\u5f80\u672c\u5e8f\u5217\u7684 JSON \u8aaa\u660e","metadata_location":"\u4f4d\u7f6e","metadata_location_latitude":"\u7def\u5ea6","metadata_location_longitude":"\u7d93\u5ea6","metadata_location_orientation":"\u65b9\u5411","metadata_location_precision":"\u5b9a\u4f4d\u7cbe\u5ea6","minimize":"\u96b1\u85cf\u9019\u500b\u5c0f\u5de5\u5177\uff0c\u60a8\u53ef\u4ee5\u6309\u5de6\u4e0b\u89d2\u7684\u6309\u9215\u518d\u6b21\u986f\u793a\u5b83","moveDown":"\u4e0b\u79fb","moveLeft":"\u5de6\u79fb","moveMiddle":"\u756b\u9762\u7f6e\u4e2d","moveRight":"\u53f3\u79fb","moveUp":"\u4e0a\u79fb","options":"\u9078\u9805","picture_360":"360\xb0","picture_flat":"\u7d93\u5178","search":"\u641c\u5c0b","search_address":"\u641c\u5c0b\u5730\u5740\u3001\u57ce\u5e02\u2026","search_empty":"\u627e\u4e0d\u5230\u7d50\u679c","search_user":"\u641c\u5c0b\u5e33\u865f\u2026","sequence_more":"\u66f4\u591a\u64ad\u653e\u9078\u9805","sequence_next":"\u5e8f\u5217\u4e2d\u7684\u4e0b\u4e00\u5f35\u76f8\u7247","sequence_pause":"\u66ab\u505c\u5e8f\u5217","sequence_play":"\u64ad\u653e\u5e8f\u5217","sequence_prev":"\u5e8f\u5217\u4e2d\u7684\u4e0a\u4e00\u5f35\u76f8\u7247","sequence_speed":"\u64ad\u653e\u901f\u5ea6","share":"\u5206\u4eab","share_embed":"\u5d4c\u5165\u5230\u60a8\u7684\u7db2\u7ad9","share_image":"\u9ad8\u756b\u8cea\u76f8\u7247","share_links":"\u8d85\u9023\u7d50","share_page":"\u9019\u5f35\u76f8\u7247\u7684\u9023\u7d50","share_print":"\u5217\u5370","share_rss":"RSS \u6458\u8981","share_rss_title":"\u76ee\u524d\u5730\u5716\u53ef\u898b\u5340\u57df\u4e2d\u65b0\u76f8\u7247\u5e8f\u5217\u7684 RSS \u6458\u8981","show_map":"\u986f\u793a\u5730\u5716","show_psv":"\u986f\u793a\u76f8\u7247\u6aa2\u8996\u5668","zoom":"\u7e2e\u653e","zoomIn":"\u62c9\u8fd1","zoomOut":"\u62c9\u9060","report_submit":"\u9001\u51fa","report_email":"\u60a8\u7684 email","report_nature_label":"\u554f\u984c\u7684\u985e\u578b","report_nature":{"":"\u9078\u64c7\u554f\u984c\u7684\u985e\u578b\u2026","blur_missing":"\u53ef\u4ee5\u770b\u898b\u4eba\u81c9\u6216\u8eca\u724c","blur_excess":"\u4e0d\u9700\u8981\u6a21\u7cca\u7684\u7269\u4ef6\u88ab\u6a21\u7cca\u8655\u7406\u4e86","inappropriate":"\u4e0d\u7576\u7684\u76f8\u7247 (\u4e0d\u76f8\u95dc\u3001\u88f8\u9ad4\u2026)","privacy":"\u53ef\u4ee5\u770b\u898b\u79c1\u4eba\u7684\u9053\u8def\u6216\u8cc7\u7522","picture_low_quality":"\u76f8\u7247\u7684\u54c1\u8cea\u5f88\u5dee","mislocated":"\u76f8\u7247\u5728\u5730\u5716\u4e0a\u7684\u4f4d\u7f6e\u4e0d\u6b63\u78ba","copyright":"\u76f8\u7247\u4fb5\u72af\u4e86\u7248\u6b0a","other":"\u4efb\u4f55\u5176\u4ed6\u985e\u578b\u7684\u554f\u984c"},"share_embed_docs":"\u6df1\u5165\u4e86\u89e3\u5d4c\u5165\u8a2d\u5b9a\u503c","error_retry":"\u8acb\u7a0d\u5f8c\u518d\u8a66","error_click":"\u7e7c\u7e8c","legend_title":"\u986f\u793a\u76f8\u7247\u7684\u8a73\u7d30\u8cc7\u6599","report_email_placeholder":"\u9078\u586b","report_whole_sequence":"\u9019\u500b\u554f\u984c\u5f71\u97ff\u6574\u500b\u5e8f\u5217","report_details":"\u66f4\u591a\u8cc7\u8a0a","report_details_placeholder":"\u9078\u586b\uff0c\u60a8\u53ef\u4ee5\u8a73\u8ff0\u6b64\u554f\u984c\u548c\u5b83\u9020\u6210\u7684\u5f71\u97ff","report_wait":"\u6b63\u5728\u50b3\u9001\u5831\u544a\u2026","report_success":"\u5df2\u6210\u529f\u767c\u9001\u5831\u544a\uff0c\u6211\u5011\u5c07\u5118\u5feb\u5c0d\u5b83\u9032\u884c\u5be9\u6838\u3002","report_failure":"\u5efa\u7acb\u5831\u544a\u6642\u767c\u9001\u932f\u8aa4: {e}\uff0c\u8acb\u7a0d\u5f8c\u518d\u8a66\u3002","report_auth":"\u6b64\u5831\u544a\u5c07\u4f7f\u7528\u60a8\u7684\u5e33\u6236\u300c{a}\u300d\u767c\u9001","filter_qualityscore":"\u54c1\u8cea\u5206\u6578","filter_qualityscore_help":"\u9ede\u64ca\u4ee5\u555f\u7528\u6216\u505c\u7528","map_theme_score":"\u54c1\u8cea\u5206\u6578","metadata_camera_resolution":"\u89e3\u6790\u5ea6","metadata_quality":"\u54c1\u8cea","metadata_quality_help":"\u6df1\u5165\u4e86\u89e3\u54c1\u8cea\u5206\u6578","metadata_quality_gps_score":"\u5b9a\u4f4d\u5206\u6578","metadata_quality_resolution_score":"\u89e3\u6790\u5ea6\u5206\u6578","metadata_quality_missing":"\u76f8\u7247\u672a\u5305\u542b\u8cc7\u8a0a","report":"\u6aa2\u8209","metadata_quality_score":"\u6574\u9ad4\u5206\u6578","filter_user_mypics":"\u6211\u7684\u76f8\u7247","filter_date_1month":"1 \u500b\u6708","filter_date_1year":"1 \u5e74","qualityscore_doc_2":"\u5206\u6578\u4ee5 A/B/C/D/E \u7b49\u7d1a\u7684\u5f62\u5f0f\u986f\u793a (A \u6700\u4f73\u3001E \u6700\u5dee) \uff0c\u4e26\u900f\u904e\u9019\u500b\u91cf\u5c3a\u8996\u89ba\u5316\u986f\u793a:","qualityscore_doc_link":"\u6df1\u5165\u4e86\u89e3\u54c1\u8cea\u5206\u6578","qualityscore_title":"\u95dc\u65bc\u54c1\u8cea\u5206\u6578","qualityscore_doc_1":"Panoramax \u70ba\u6bcf\u5f35\u76f8\u7247\u63d0\u4f9b\u54c1\u8cea\u5206\u6578\uff0c\u9019\u80fd\u5e6b\u52a9\u6211\u5011\u8f15\u9b06\u5730\u5728\u5730\u5716\u4e0a\u7be9\u9078\u548c\u986f\u793a\u9ad8\u54c1\u8cea\u76f8\u7247\u3002","qualityscore_doc_3":"\u5b83\u6839\u64da GPS \u7cbe\u78ba\u5ea6\u548c\u76f8\u7247\u89e3\u6790\u5ea6\u8a08\u7b97\u5f97\u51fa\uff0c\u5c08\u696d\u8a2d\u5099\u7684\u7b49\u7d1a\u70ba A\u3001360\xb0 \u904b\u52d5\u76f8\u6a5f\u7684\u7b49\u7d1a\u70ba B\u3001\u667a\u6167\u578b\u624b\u6a5f\u7684\u7b49\u7d1a\u70ba C/D/E\u3002","minimize_short":"\u96b1\u85cf","metadata_general_instance":"\u4f86\u6e90\u57f7\u884c\u500b\u9ad4","metadata_general_copy_picid":"\u8907\u88fd\u76f8\u7247 ID","metadata_general_copy_id":"\u8907\u88fd ID","picture_360_long":"\u5168\u666f\u76f8\u7247","metadata_summary":"\u6458\u8981","picture_flat_long":"\u7d93\u5178\u76f8\u7247","geo_uri":"\u5916\u90e8\u7a0b\u5f0f","contribute_id":"\u900f\u904e iD \u7de8\u8f2f\u5668\u4f86\u8ca2\u737b OpenStreetMap","filter_date_6months":"6 \u500b\u6708","picture_all":"\u5168\u90e8","metadata_exif_doc":"EXIF \u6a19\u7c64\u6587\u4ef6","metadata_exif_doc_title":"\u8acb\u53c3\u95b1 Exiv2 \u6587\u4ef6\u4ee5\u53d6\u5f97 EXIF \u548c XMP \u6a19\u7c64\u5b9a\u7fa9\u7684\u5b8c\u6574\u8aaa\u660e","metadata_location_coordinates":"\u5ea7\u6a19 (\u7d93\u5ea6, \u7def\u5ea6)","metadata_location_copy":"\u8907\u88fd {v}","metadata_location_copy_more":"\u66f4\u591a\u5ea7\u6a19\u8907\u88fd\u9078\u9805","semantics_title":"\u6a19\u7c64","semantics_tags":"{nb} \u500b\u6a19\u7c64","semantics_show_annotations":"\u986f\u793a\u76f8\u7247\u6a19\u8a3b","semantics_show_all_tags":"\u986f\u793a\u6240\u6709\u6a19\u7c64","semantics_key":"\u7d22\u5f15\u9375","semantics_annotation_tooltip":"\u9ede\u64ca\u67e5\u770b\u8a73\u60c5","semantics_features_default_title":"\u7279\u5fb5 #{nb}","semantics_features_subtitle":"{nb} \u500b\u95dc\u806f\u7684\u5c6c\u6027","semantics_hide_all_tags":"\u96b1\u85cf\u6240\u6709\u6a19\u7c64","semantics_features_none":"\u6b64\u76f8\u7247\u5c1a\u672a\u6aa2\u6e2c\u5230\u6216\u8a3b\u91cb\u4efb\u4f55\u7279\u5fb5\u3002","semantics_value":"\u503c","semantics_tags_picture_none":"\u6b64\u76f8\u7247\u5c1a\u672a\u52a0\u4e0a\u4efb\u4f55\u6a19\u7c64\u3002","semantics_tags_picture":"\u76f8\u7247\u6a19\u7c64","whats_panoramax":"Panoramax \u662f\u5404\u5730\u76f8\u7247\u7684\u5730\u7406\u5171\u4eab\u8cc7\u6e90\u3002","semantics_features":"\u5075\u6e2c\u5230\u7684\u7279\u5fb5","semantics_key_doc":"\u6df1\u5165\u4e86\u89e3\u6b64\u7d22\u5f15\u9375","semantics_value_doc":"\u6df1\u5165\u4e86\u89e3\u6b64\u6a19\u7c64","semantics_qualifiers":"\u9650\u5b9a\u689d\u4ef6","semantics_hide_annotations":"\u96b1\u85cf\u76f8\u7247\u6a19\u8a3b","semantics_zero_annotations":"\u6b64\u76f8\u7247\u5c1a\u672a\u52a0\u4e0a\u4efb\u4f55\u6a19\u8a3b","semantics_hashtags":"\u76f8\u7247\u4e3b\u984c\u6a19\u7c64","semantics_wikidata_properties":{"P31":"\u96b8\u5c6c\u65bc","P279":"\u4e0a\u7d1a\u5206\u985e","P361":"\u6240\u5c6c\u5be6\u9ad4"},"panoramax":"Panoramax"},"map":{"loading":"\u6b63\u5728\u8f09\u5165\u2026","not_public":"\u672a\u516c\u958b\u986f\u793a","thumbnail":"\u904a\u6a19\u61f8\u505c\u76f8\u7247\u7684\u7e2e\u5716","slow_loading":"\u5730\u5716\u8f09\u5165\u901f\u5ea6\u7de9\u6162\u800c\u4e14\u53ef\u80fd\u51fa\u73fe\u640d\u58de","more_panoramax":"\u6df1\u5165\u4e86\u89e3 Panoramax","map_data":"\u5730\u5716\u8cc7\u6599: {m}"},"psv":{"ctrlZoom":"\u4f7f\u7528 CTRL + \u6ed1\u9f20\u6efe\u8f2a\u7e2e\u653e\u5716\u7247","loadError":"\u7121\u6cd5\u8f09\u5165\u5168\u666f\u5716","twoFingers":"\u4f7f\u7528\u96d9\u6307\u79fb\u52d5"},"maplibre":{"GeolocateControl.FindMyLocation":"\u5c0b\u627e\u6211\u7684\u4f4d\u7f6e","GeolocateControl.LocationNotAvailable":"\u7121\u6cd5\u4f7f\u7528\u4f4d\u7f6e\u8cc7\u8a0a"}}')}},st={};function __webpack_require__(ot){var ut=st[ot];if(void 0!==ut)return ut.exports;var Hl=st[ot]={exports:{}};return at[ot].call(Hl.exports,Hl,Hl.exports,__webpack_require__),Hl.exports}__webpack_require__.n=at=>{var st=at&&at.__esModule?()=>at.default:()=>at;return __webpack_require__.d(st,{a:st}),st},__webpack_require__.d=(at,st)=>{for(var ot in st)__webpack_require__.o(st,ot)&&!__webpack_require__.o(at,ot)&&Object.defineProperty(at,ot,{enumerable:!0,get:st[ot]})},__webpack_require__.o=(at,st)=>Object.prototype.hasOwnProperty.call(at,st),__webpack_require__.r=at=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(at,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(at,"__esModule",{value:!0})};var ot={};return(()=>{"use strict";__webpack_require__.r(ot),__webpack_require__.d(ot,{CoverageMap:()=>Hl.A,Editor:()=>rc.A,PhotoViewer:()=>sc.Ay,Viewer:()=>ut.A,components:()=>at,utils:()=>st});var at=__webpack_require__(9341),st=__webpack_require__(2030),ut=__webpack_require__(8743),Hl=__webpack_require__(153),rc=__webpack_require__(1752),sc=__webpack_require__(3407)})(),ot})()));
//# sourceMappingURL=index.js.map